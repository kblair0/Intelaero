/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/page";
exports.ids = ["app/page"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),\n/* harmony export */   __next_app__: () => (/* binding */ __next_app__),\n/* harmony export */   pages: () => (/* binding */ pages),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   tree: () => (/* binding */ tree)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-page/module.compiled */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/module.compiled.js?91d2\");\n/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/client/components/error-boundary */ \"(rsc)/./node_modules/next/dist/client/components/error-boundary.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/app-render/entry-base */ \"(rsc)/./node_modules/next/dist/server/app-render/entry-base.js\");\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if([\"default\",\"tree\",\"pages\",\"GlobalError\",\"__next_app__\",\"routeModule\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\nconst module0 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/layout.tsx */ \"(rsc)/./src/app/layout.tsx\"));\nconst module1 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/not-found-error */ \"(rsc)/./node_modules/next/dist/client/components/not-found-error.js\", 23));\nconst module2 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/forbidden-error */ \"(rsc)/./node_modules/next/dist/client/components/forbidden-error.js\", 23));\nconst module3 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/unauthorized-error */ \"(rsc)/./node_modules/next/dist/client/components/unauthorized-error.js\", 23));\nconst page4 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/page.tsx */ \"(rsc)/./src/app/page.tsx\"));\n\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: ['__PAGE__', {}, {\n          page: [page4, \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\"],\n          metadata: {\n    icon: [(async (props) => (await Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! next-metadata-image-loader?type=favicon&segment=&basePath=&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js!./src/app/favicon.ico?__next_metadata__ */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-metadata-image-loader.js?type=favicon&segment=&basePath=&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js!./src/app/favicon.ico?__next_metadata__\"))).default(props))],\n    apple: [],\n    openGraph: [],\n    twitter: [],\n    manifest: undefined\n  }\n        }]\n      },\n        {\n        'layout': [module0, \"/Users/kieranblair/git/fa/flight-assurance/src/app/layout.tsx\"],\n'not-found': [module1, \"next/dist/client/components/not-found-error\"],\n'forbidden': [module2, \"next/dist/client/components/forbidden-error\"],\n'unauthorized': [module3, \"next/dist/client/components/unauthorized-error\"],\n        metadata: {\n    icon: [(async (props) => (await Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! next-metadata-image-loader?type=favicon&segment=&basePath=&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js!./src/app/favicon.ico?__next_metadata__ */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-metadata-image-loader.js?type=favicon&segment=&basePath=&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js!./src/app/favicon.ico?__next_metadata__\"))).default(props))],\n    apple: [],\n    openGraph: [],\n    twitter: [],\n    manifest: undefined\n  }\n      }\n      ]\n      }.children;\nconst pages = [\"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\"];\n\n\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nconst __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\n\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n        page: \"/page\",\n        pathname: \"/\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: '',\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZwYWdlJnBhZ2U9JTJGcGFnZSZhcHBQYXRocz0lMkZwYWdlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGcGFnZS50c3gmYXBwRGlyPSUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHNCQUFzQixvSkFBa0c7QUFDeEgsc0JBQXNCLDBOQUFnRjtBQUN0RyxzQkFBc0IsME5BQWdGO0FBQ3RHLHNCQUFzQixnT0FBbUY7QUFDekcsb0JBQW9CLGdKQUFnRztBQUdsSDtBQUNzRDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLG9DQUFvQyxzZkFBMFA7QUFDOVI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHNmQUEwUDtBQUM5UjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUN1QjtBQUM2RDtBQUNwRiw2QkFBNkIsbUJBQW1CO0FBQ2hEO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDdUQ7QUFDdkQ7QUFDTyx3QkFBd0IsdUdBQWtCO0FBQ2pEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vZHVsZTAgPSAoKSA9PiBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2xheW91dC50c3hcIik7XG5jb25zdCBtb2R1bGUxID0gKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbm90LWZvdW5kLWVycm9yXCIpO1xuY29uc3QgbW9kdWxlMiA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2ZvcmJpZGRlbi1lcnJvclwiKTtcbmNvbnN0IG1vZHVsZTMgPSAoKSA9PiBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy91bmF1dGhvcml6ZWQtZXJyb3JcIik7XG5jb25zdCBwYWdlNCA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvcGFnZS50c3hcIik7XG5pbXBvcnQgeyBBcHBQYWdlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1wYWdlL21vZHVsZS5jb21waWxlZFwiIHdpdGgge1xuICAgICd0dXJib3BhY2stdHJhbnNpdGlvbic6ICduZXh0LXNzcidcbn07XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG4vLyBXZSBpbmplY3QgdGhlIHRyZWUgYW5kIHBhZ2VzIGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCB0cmVlID0ge1xuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAnJyxcbiAgICAgICAge1xuICAgICAgICBjaGlsZHJlbjogWydfX1BBR0VfXycsIHt9LCB7XG4gICAgICAgICAgcGFnZTogW3BhZ2U0LCBcIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL3BhZ2UudHN4XCJdLFxuICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgaWNvbjogWyhhc3luYyAocHJvcHMpID0+IChhd2FpdCBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIm5leHQtbWV0YWRhdGEtaW1hZ2UtbG9hZGVyP3R5cGU9ZmF2aWNvbiZzZWdtZW50PSZiYXNlUGF0aD0mcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyEvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9mYXZpY29uLmljbz9fX25leHRfbWV0YWRhdGFfX1wiKSkuZGVmYXVsdChwcm9wcykpXSxcbiAgICBhcHBsZTogW10sXG4gICAgb3BlbkdyYXBoOiBbXSxcbiAgICB0d2l0dGVyOiBbXSxcbiAgICBtYW5pZmVzdDogdW5kZWZpbmVkXG4gIH1cbiAgICAgICAgfV1cbiAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgJ2xheW91dCc6IFttb2R1bGUwLCBcIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2xheW91dC50c3hcIl0sXG4nbm90LWZvdW5kJzogW21vZHVsZTEsIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL25vdC1mb3VuZC1lcnJvclwiXSxcbidmb3JiaWRkZW4nOiBbbW9kdWxlMiwgXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvZm9yYmlkZGVuLWVycm9yXCJdLFxuJ3VuYXV0aG9yaXplZCc6IFttb2R1bGUzLCBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy91bmF1dGhvcml6ZWQtZXJyb3JcIl0sXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgaWNvbjogWyhhc3luYyAocHJvcHMpID0+IChhd2FpdCBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIm5leHQtbWV0YWRhdGEtaW1hZ2UtbG9hZGVyP3R5cGU9ZmF2aWNvbiZzZWdtZW50PSZiYXNlUGF0aD0mcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyEvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9mYXZpY29uLmljbz9fX25leHRfbWV0YWRhdGFfX1wiKSkuZGVmYXVsdChwcm9wcykpXSxcbiAgICBhcHBsZTogW10sXG4gICAgb3BlbkdyYXBoOiBbXSxcbiAgICB0d2l0dGVyOiBbXSxcbiAgICBtYW5pZmVzdDogdW5kZWZpbmVkXG4gIH1cbiAgICAgIH1cbiAgICAgIF1cbiAgICAgIH0uY2hpbGRyZW47XG5jb25zdCBwYWdlcyA9IFtcIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL3BhZ2UudHN4XCJdO1xuZXhwb3J0IHsgdHJlZSwgcGFnZXMgfTtcbmV4cG9ydCB7IGRlZmF1bHQgYXMgR2xvYmFsRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2Vycm9yLWJvdW5kYXJ5XCI7XG5jb25zdCBfX25leHRfYXBwX3JlcXVpcmVfXyA9IF9fd2VicGFja19yZXF1aXJlX19cbmNvbnN0IF9fbmV4dF9hcHBfbG9hZF9jaHVua19fID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKClcbmV4cG9ydCBjb25zdCBfX25leHRfYXBwX18gPSB7XG4gICAgcmVxdWlyZTogX19uZXh0X2FwcF9yZXF1aXJlX18sXG4gICAgbG9hZENodW5rOiBfX25leHRfYXBwX2xvYWRfY2h1bmtfX1xufTtcbmV4cG9ydCAqIGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvZW50cnktYmFzZVwiO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUGFnZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUEFHRSxcbiAgICAgICAgcGFnZTogXCIvcGFnZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJyxcbiAgICAgICAgYXBwUGF0aHM6IFtdXG4gICAgfSxcbiAgICB1c2VybGFuZDoge1xuICAgICAgICBsb2FkZXJUcmVlOiB0cmVlXG4gICAgfVxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1wYWdlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fmetadata%2Fmetadata-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fmetadata%2Fmetadata-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(rsc)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-segment.js */ \"(rsc)/./node_modules/next/dist/client/components/client-segment.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/error-boundary.js */ \"(rsc)/./node_modules/next/dist/client/components/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js */ \"(rsc)/./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(rsc)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(rsc)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/metadata/metadata-boundary.js */ \"(rsc)/./node_modules/next/dist/lib/metadata/metadata-boundary.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZjbGllbnQtcGFnZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZVc2VycyUyRmtpZXJhbmJsYWlyJTJGZ2l0JTJGZmElMkZmbGlnaHQtYXNzdXJhbmNlJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGY2xpZW50LXNlZ21lbnQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGVXNlcnMlMkZraWVyYW5ibGFpciUyRmdpdCUyRmZhJTJGZmxpZ2h0LWFzc3VyYW5jZSUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRmVycm9yLWJvdW5kYXJ5LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZodHRwLWFjY2Vzcy1mYWxsYmFjayUyRmVycm9yLWJvdW5kYXJ5LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZsYXlvdXQtcm91dGVyLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZyZW5kZXItZnJvbS10ZW1wbGF0ZS1jb250ZXh0LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmxpYiUyRm1ldGFkYXRhJTJGbWV0YWRhdGEtYm91bmRhcnkuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0Qmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBLG9PQUF1STtBQUN2STtBQUNBLDBPQUEwSTtBQUMxSTtBQUNBLDBPQUEwSTtBQUMxSTtBQUNBLG9SQUErSjtBQUMvSjtBQUNBLHdPQUF5STtBQUN6STtBQUNBLHNRQUF3SjtBQUN4SjtBQUNBLHNPQUF3SSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvY2xpZW50LXBhZ2UuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2NsaWVudC1zZWdtZW50LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9lcnJvci1ib3VuZGFyeS5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvaHR0cC1hY2Nlc3MtZmFsbGJhY2svZXJyb3ItYm91bmRhcnkuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2xheW91dC1yb3V0ZXIuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2xpYi9tZXRhZGF0YS9tZXRhZGF0YS1ib3VuZGFyeS5qc1wiKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fmetadata%2Fmetadata-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fmetadata%2Fmetadata-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fmetadata%2Fmetadata-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(ssr)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-segment.js */ \"(ssr)/./node_modules/next/dist/client/components/client-segment.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(ssr)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(ssr)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/metadata/metadata-boundary.js */ \"(ssr)/./node_modules/next/dist/lib/metadata/metadata-boundary.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZjbGllbnQtcGFnZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZVc2VycyUyRmtpZXJhbmJsYWlyJTJGZ2l0JTJGZmElMkZmbGlnaHQtYXNzdXJhbmNlJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGY2xpZW50LXNlZ21lbnQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGVXNlcnMlMkZraWVyYW5ibGFpciUyRmdpdCUyRmZhJTJGZmxpZ2h0LWFzc3VyYW5jZSUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRmVycm9yLWJvdW5kYXJ5LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZodHRwLWFjY2Vzcy1mYWxsYmFjayUyRmVycm9yLWJvdW5kYXJ5LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZsYXlvdXQtcm91dGVyLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZyZW5kZXItZnJvbS10ZW1wbGF0ZS1jb250ZXh0LmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmxpYiUyRm1ldGFkYXRhJTJGbWV0YWRhdGEtYm91bmRhcnkuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0Qmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBLG9PQUF1STtBQUN2STtBQUNBLDBPQUEwSTtBQUMxSTtBQUNBLDBPQUEwSTtBQUMxSTtBQUNBLG9SQUErSjtBQUMvSjtBQUNBLHdPQUF5STtBQUN6STtBQUNBLHNRQUF3SjtBQUN4SjtBQUNBLHNPQUF3SSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvY2xpZW50LXBhZ2UuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2NsaWVudC1zZWdtZW50LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9lcnJvci1ib3VuZGFyeS5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvaHR0cC1hY2Nlc3MtZmFsbGJhY2svZXJyb3ItYm91bmRhcnkuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2xheW91dC1yb3V0ZXIuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2xpYi9tZXRhZGF0YS9tZXRhZGF0YS1ib3VuZGFyeS5qc1wiKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fhttp-access-fallback%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Fdist%2Flib%2Fmetadata%2Fmetadata-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Ffont%2Fgoogle%2Ftarget.css%3F%7B%5C%22path%5C%22%3A%5C%22src%2Fapp%2Flayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Ubuntu%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%5D%2C%5C%22weight%5C%22%3A%5B%5C%22300%5C%22%2C%5C%22400%5C%22%2C%5C%22500%5C%22%2C%5C%22700%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-ubuntu%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22ubuntu%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Ffont%2Fgoogle%2Ftarget.css%3F%7B%5C%22path%5C%22%3A%5C%22src%2Fapp%2Flayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Ubuntu%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%5D%2C%5C%22weight%5C%22%3A%5B%5C%22300%5C%22%2C%5C%22400%5C%22%2C%5C%22500%5C%22%2C%5C%22700%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-ubuntu%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22ubuntu%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Ffont%2Fgoogle%2Ftarget.css%3F%7B%5C%22path%5C%22%3A%5C%22src%2Fapp%2Flayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Ubuntu%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%5D%2C%5C%22weight%5C%22%3A%5B%5C%22300%5C%22%2C%5C%22400%5C%22%2C%5C%22500%5C%22%2C%5C%22700%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-ubuntu%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22ubuntu%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fnode_modules%2Fnext%2Ffont%2Fgoogle%2Ftarget.css%3F%7B%5C%22path%5C%22%3A%5C%22src%2Fapp%2Flayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Ubuntu%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%5D%2C%5C%22weight%5C%22%3A%5B%5C%22300%5C%22%2C%5C%22400%5C%22%2C%5C%22500%5C%22%2C%5C%22700%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-ubuntu%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22ubuntu%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!*******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \*******************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/page.tsx */ \"(rsc)/./src/app/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UlMkZzcmMlMkZhcHAlMkZwYWdlLnRzeCUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsZ0pBQWdHIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9wYWdlLnRzeFwiKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!*******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \*******************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/page.tsx */ \"(ssr)/./src/app/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGa2llcmFuYmxhaXIlMkZnaXQlMkZmYSUyRmZsaWdodC1hc3N1cmFuY2UlMkZzcmMlMkZhcHAlMkZwYWdlLnRzeCUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsZ0pBQWdHIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9wYWdlLnRzeFwiKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./src/app/components/AO/AODisplay.tsx":
/*!*********************************************!*\
  !*** ./src/app/components/AO/AODisplay.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../context/AreaOfOpsContext */ \"(ssr)/./src/app/context/AreaOfOpsContext.tsx\");\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/LayerManager */ \"(ssr)/./src/app/services/LayerManager.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n/**\n * A component that handles displaying the Area of Operations on the map.\n * Automatically updates when AO geometry changes or the map becomes ready.\n */ const AODisplay = ()=>{\n    const { aoGeometry, aoTerrainGrid } = (0,_context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_1__.useAreaOfOpsContext)();\n    const { map, terrainLoaded } = (0,_context_mapcontext__WEBPACK_IMPORTED_MODULE_2__.useMapContext)();\n    // Display AO when geometry changes or map becomes ready\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"AODisplay.useEffect\": ()=>{\n            if (aoGeometry && map && terrainLoaded) {\n                console.log(\"Displaying AO on map\");\n                _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.addAreaOfOperations(aoGeometry);\n                _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.fitToAreaOfOperations(aoGeometry);\n            }\n        }\n    }[\"AODisplay.useEffect\"], [\n        aoGeometry,\n        map,\n        terrainLoaded\n    ]);\n    // Display terrain grid when it changes\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"AODisplay.useEffect\": ()=>{\n            if (aoTerrainGrid && aoTerrainGrid.length > 0 && map && terrainLoaded) {\n                console.log(\"Displaying AO terrain grid on map\");\n                _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.addAreaOfOperationsTerrain(aoTerrainGrid);\n            }\n        }\n    }[\"AODisplay.useEffect\"], [\n        aoTerrainGrid,\n        map,\n        terrainLoaded\n    ]);\n    // This is a behavior-only component, so it doesn't render anything directly\n    return null;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AODisplay);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvQU8vQU9EaXNwbGF5LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7NkRBQ2tDO0FBQ21DO0FBQ1o7QUFDRTtBQUUzRDs7O0NBR0MsR0FDRCxNQUFNSSxZQUFzQjtJQUMxQixNQUFNLEVBQUVDLFVBQVUsRUFBRUMsYUFBYSxFQUFFLEdBQUdMLDhFQUFtQkE7SUFDekQsTUFBTSxFQUFFTSxHQUFHLEVBQUVDLGFBQWEsRUFBRSxHQUFHTixrRUFBYUE7SUFFNUMsd0RBQXdEO0lBQ3hERixnREFBU0E7K0JBQUM7WUFDUixJQUFJSyxjQUFjRSxPQUFPQyxlQUFlO2dCQUN0Q0MsUUFBUUMsR0FBRyxDQUFDO2dCQUNaUCxnRUFBWUEsQ0FBQ1EsbUJBQW1CLENBQUNOO2dCQUNqQ0YsZ0VBQVlBLENBQUNTLHFCQUFxQixDQUFDUDtZQUNyQztRQUNGOzhCQUFHO1FBQUNBO1FBQVlFO1FBQUtDO0tBQWM7SUFFbkMsdUNBQXVDO0lBQ3ZDUixnREFBU0E7K0JBQUM7WUFDUixJQUFJTSxpQkFBaUJBLGNBQWNPLE1BQU0sR0FBRyxLQUFLTixPQUFPQyxlQUFlO2dCQUNyRUMsUUFBUUMsR0FBRyxDQUFDO2dCQUNaUCxnRUFBWUEsQ0FBQ1csMEJBQTBCLENBQUNSO1lBQzFDO1FBQ0Y7OEJBQUc7UUFBQ0E7UUFBZUM7UUFBS0M7S0FBYztJQUV0Qyw0RUFBNEU7SUFDNUUsT0FBTztBQUNUO0FBRUEsaUVBQWVKLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbXBvbmVudHMvQU8vQU9EaXNwbGF5LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlQXJlYU9mT3BzQ29udGV4dCB9IGZyb20gXCIuLi8uLi9jb250ZXh0L0FyZWFPZk9wc0NvbnRleHRcIjtcbmltcG9ydCB7IHVzZU1hcENvbnRleHQgfSBmcm9tIFwiLi4vLi4vY29udGV4dC9tYXBjb250ZXh0XCI7XG5pbXBvcnQgeyBsYXllck1hbmFnZXIgfSBmcm9tIFwiLi4vLi4vc2VydmljZXMvTGF5ZXJNYW5hZ2VyXCI7XG5cbi8qKlxuICogQSBjb21wb25lbnQgdGhhdCBoYW5kbGVzIGRpc3BsYXlpbmcgdGhlIEFyZWEgb2YgT3BlcmF0aW9ucyBvbiB0aGUgbWFwLlxuICogQXV0b21hdGljYWxseSB1cGRhdGVzIHdoZW4gQU8gZ2VvbWV0cnkgY2hhbmdlcyBvciB0aGUgbWFwIGJlY29tZXMgcmVhZHkuXG4gKi9cbmNvbnN0IEFPRGlzcGxheTogUmVhY3QuRkMgPSAoKSA9PiB7XG4gIGNvbnN0IHsgYW9HZW9tZXRyeSwgYW9UZXJyYWluR3JpZCB9ID0gdXNlQXJlYU9mT3BzQ29udGV4dCgpO1xuICBjb25zdCB7IG1hcCwgdGVycmFpbkxvYWRlZCB9ID0gdXNlTWFwQ29udGV4dCgpO1xuICBcbiAgLy8gRGlzcGxheSBBTyB3aGVuIGdlb21ldHJ5IGNoYW5nZXMgb3IgbWFwIGJlY29tZXMgcmVhZHlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYW9HZW9tZXRyeSAmJiBtYXAgJiYgdGVycmFpbkxvYWRlZCkge1xuICAgICAgY29uc29sZS5sb2coXCJEaXNwbGF5aW5nIEFPIG9uIG1hcFwiKTtcbiAgICAgIGxheWVyTWFuYWdlci5hZGRBcmVhT2ZPcGVyYXRpb25zKGFvR2VvbWV0cnkpO1xuICAgICAgbGF5ZXJNYW5hZ2VyLmZpdFRvQXJlYU9mT3BlcmF0aW9ucyhhb0dlb21ldHJ5KTtcbiAgICB9XG4gIH0sIFthb0dlb21ldHJ5LCBtYXAsIHRlcnJhaW5Mb2FkZWRdKTtcbiAgXG4gIC8vIERpc3BsYXkgdGVycmFpbiBncmlkIHdoZW4gaXQgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhb1RlcnJhaW5HcmlkICYmIGFvVGVycmFpbkdyaWQubGVuZ3RoID4gMCAmJiBtYXAgJiYgdGVycmFpbkxvYWRlZCkge1xuICAgICAgY29uc29sZS5sb2coXCJEaXNwbGF5aW5nIEFPIHRlcnJhaW4gZ3JpZCBvbiBtYXBcIik7XG4gICAgICBsYXllck1hbmFnZXIuYWRkQXJlYU9mT3BlcmF0aW9uc1RlcnJhaW4oYW9UZXJyYWluR3JpZCk7XG4gICAgfVxuICB9LCBbYW9UZXJyYWluR3JpZCwgbWFwLCB0ZXJyYWluTG9hZGVkXSk7XG4gIFxuICAvLyBUaGlzIGlzIGEgYmVoYXZpb3Itb25seSBjb21wb25lbnQsIHNvIGl0IGRvZXNuJ3QgcmVuZGVyIGFueXRoaW5nIGRpcmVjdGx5XG4gIHJldHVybiBudWxsO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQU9EaXNwbGF5OyJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VBcmVhT2ZPcHNDb250ZXh0IiwidXNlTWFwQ29udGV4dCIsImxheWVyTWFuYWdlciIsIkFPRGlzcGxheSIsImFvR2VvbWV0cnkiLCJhb1RlcnJhaW5HcmlkIiwibWFwIiwidGVycmFpbkxvYWRlZCIsImNvbnNvbGUiLCJsb2ciLCJhZGRBcmVhT2ZPcGVyYXRpb25zIiwiZml0VG9BcmVhT2ZPcGVyYXRpb25zIiwibGVuZ3RoIiwiYWRkQXJlYU9mT3BlcmF0aW9uc1RlcnJhaW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/AO/AODisplay.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/AO/Hooks/useAreaOpsProcessor.ts":
/*!************************************************************!*\
  !*** ./src/app/components/AO/Hooks/useAreaOpsProcessor.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAreaOpsProcessor: () => (/* binding */ useAreaOpsProcessor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/helpers/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/buffer/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/bbox/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/point-grid/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/circle/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/center/dist/esm/index.js\");\n/* harmony import */ var _turf_clean_coords__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @turf/clean-coords */ \"(ssr)/./node_modules/@turf/clean-coords/dist/esm/index.js\");\n/* harmony import */ var _context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../context/AreaOfOpsContext */ \"(ssr)/./src/app/context/AreaOfOpsContext.tsx\");\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../services/LayerManager */ \"(ssr)/./src/app/services/LayerManager.ts\");\n/* harmony import */ var _components_Analyses_Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/Analyses/Types/GridAnalysisTypes */ \"(ssr)/./src/app/components/Analyses/Types/GridAnalysisTypes.ts\");\n// src/components/AO/Hooks/useAreaOpsProcessor.ts\n\n\n\n\n\n\n// FIXED: Import GridCell from unified location and helper function\n\nconst useAreaOpsProcessor = ()=>{\n    const { aoGeometry, setAoGeometry, setAoTerrainGrid, bufferDistance } = (0,_context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_1__.useAreaOfOpsContext)();\n    const { map, terrainLoaded } = (0,_context_mapcontext__WEBPACK_IMPORTED_MODULE_2__.useMapContext)();\n    const processKML = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAreaOpsProcessor.useCallback[processKML]\": (kmlText)=>{\n            try {\n                console.log(\"Processing KML text...\");\n                const parser = new DOMParser();\n                const kmlDom = parser.parseFromString(kmlText, \"text/xml\");\n                const coordsElement = kmlDom.querySelector(\"Polygon > outerBoundaryIs > LinearRing > coordinates\");\n                if (!coordsElement || !coordsElement.textContent) {\n                    throw new Error(\"No polygon coordinates found in KML\");\n                }\n                const coordsText = coordsElement.textContent.trim();\n                const coordinates = coordsText.split(/\\s+/).map({\n                    \"useAreaOpsProcessor.useCallback[processKML].coordinates\": (pair)=>{\n                        const [lon, lat] = pair.split(\",\").map(Number);\n                        return [\n                            lon,\n                            lat\n                        ];\n                    }\n                }[\"useAreaOpsProcessor.useCallback[processKML].coordinates\"]);\n                if (coordinates.length > 0) {\n                    const first = coordinates[0];\n                    const last = coordinates[coordinates.length - 1];\n                    if (first[0] !== last[0] || first[1] !== last[1]) {\n                        coordinates.push(first);\n                    }\n                }\n                const polygon = _turf_turf__WEBPACK_IMPORTED_MODULE_5__.polygon([\n                    coordinates\n                ]);\n                const featureCollection = _turf_turf__WEBPACK_IMPORTED_MODULE_5__.featureCollection([\n                    polygon\n                ]);\n                console.log(\"Processed KML into polygon with coordinates:\", coordinates.length);\n                if (map && terrainLoaded) {\n                    setAoGeometry(featureCollection);\n                } else {\n                    console.log(\"Waiting for map and terrain to load before setting AO\");\n                    const checkReady = setInterval({\n                        \"useAreaOpsProcessor.useCallback[processKML].checkReady\": ()=>{\n                            if (map && terrainLoaded) {\n                                setAoGeometry(featureCollection);\n                                clearInterval(checkReady);\n                            }\n                        }\n                    }[\"useAreaOpsProcessor.useCallback[processKML].checkReady\"], 100);\n                }\n                if (map && terrainLoaded) {\n                    _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.addAreaOfOperations(featureCollection);\n                    _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.fitToAreaOfOperations(featureCollection);\n                }\n                return featureCollection;\n            } catch (error) {\n                console.error(\"Error processing KML:\", error);\n                throw error;\n            }\n        }\n    }[\"useAreaOpsProcessor.useCallback[processKML]\"], [\n        map,\n        terrainLoaded,\n        setAoGeometry\n    ]);\n    const generateAOFromFlightPlan = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAreaOpsProcessor.useCallback[generateAOFromFlightPlan]\": (flightPlan, makeVisible = false)=>{\n            console.log(\"Generating AO from flight plan...\");\n            if (!flightPlan?.features?.[0]?.geometry?.coordinates) {\n                console.error(\"Invalid flight plan data for AO generation\");\n                return null;\n            }\n            try {\n                const coordinates = flightPlan.features[0].geometry.coordinates;\n                console.log(\"Flight plan coordinates:\", JSON.stringify(coordinates));\n                // Validate coordinates\n                if (coordinates.length < 2) {\n                    console.error(\"Insufficient coordinates for LineString:\", coordinates);\n                    return null;\n                }\n                const invalidCoords = coordinates.find({\n                    \"useAreaOpsProcessor.useCallback[generateAOFromFlightPlan].invalidCoords\": ([lon, lat])=>isNaN(lon) || isNaN(lat) || lon < -180 || lon > 180 || lat < -90 || lat > 90\n                }[\"useAreaOpsProcessor.useCallback[generateAOFromFlightPlan].invalidCoords\"]);\n                if (invalidCoords) {\n                    console.error(\"Invalid coordinates detected:\", invalidCoords);\n                    return null;\n                }\n                const line = _turf_turf__WEBPACK_IMPORTED_MODULE_5__.lineString(coordinates.map({\n                    \"useAreaOpsProcessor.useCallback[generateAOFromFlightPlan].line\": (coord)=>[\n                            coord[0],\n                            coord[1]\n                        ]\n                }[\"useAreaOpsProcessor.useCallback[generateAOFromFlightPlan].line\"]));\n                const cleanedLine = (0,_turf_clean_coords__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(line);\n                const buffered = _turf_turf__WEBPACK_IMPORTED_MODULE_7__.buffer(cleanedLine, bufferDistance / 1000, {\n                    units: 'kilometers'\n                });\n                if (!buffered) {\n                    throw new Error(\"Buffering resulted in undefined geometry\");\n                }\n                const featureCollection = _turf_turf__WEBPACK_IMPORTED_MODULE_5__.featureCollection([\n                    buffered\n                ]);\n                console.log(`Generated AO from flight plan with ${coordinates.length} points and ${bufferDistance}m buffer`);\n                setAoGeometry(featureCollection);\n                if (map && terrainLoaded) {\n                    if (makeVisible) {\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.addAreaOfOperations(featureCollection);\n                    } else {\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.addAreaOfOperations(featureCollection);\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.setLayerVisibility(_services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.MAP_LAYERS.AREA_OF_OPERATIONS_FILL, false);\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.setLayerVisibility(_services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.MAP_LAYERS.AREA_OF_OPERATIONS_OUTLINE, false);\n                    }\n                }\n                return featureCollection;\n            } catch (error) {\n                console.warn(\"Failed to generate AO, proceeding without AO:\", error);\n                setAoGeometry(null);\n                return null;\n            }\n        }\n    }[\"useAreaOpsProcessor.useCallback[generateAOFromFlightPlan]\"], [\n        map,\n        terrainLoaded,\n        setAoGeometry,\n        bufferDistance\n    ]);\n    const showAreaOfOperations = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAreaOpsProcessor.useCallback[showAreaOfOperations]\": ()=>{\n            if (!map || !aoGeometry) return false;\n            try {\n                _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.setLayerVisibility(_services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.MAP_LAYERS.AREA_OF_OPERATIONS_FILL, true);\n                _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.setLayerVisibility(_services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.MAP_LAYERS.AREA_OF_OPERATIONS_OUTLINE, true);\n                return true;\n            } catch (error) {\n                console.error(\"Error showing Area of Operations:\", error);\n                return false;\n            }\n        }\n    }[\"useAreaOpsProcessor.useCallback[showAreaOfOperations]\"], [\n        map,\n        aoGeometry\n    ]);\n    const generateTerrainGrid = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAreaOpsProcessor.useCallback[generateTerrainGrid]\": async (gridSize = 30)=>{\n            if (!aoGeometry) {\n                console.error(\"Cannot generate terrain grid: Missing AO geometry\");\n                return null;\n            }\n            if (!map) {\n                console.error(\"Cannot generate terrain grid: Map not available\");\n                return null;\n            }\n            if (!terrainLoaded) {\n                console.error(\"Cannot generate terrain grid: Terrain Not Available\");\n                return null;\n            }\n            try {\n                console.log(\"Generating AO terrain grid...\");\n                showAreaOfOperations();\n                if (!aoGeometry.features || aoGeometry.features.length === 0) {\n                    console.error(\"Cannot generate terrain grid: AO geometry has no features\");\n                    return null;\n                }\n                const sourceGeometry = aoGeometry.features[0];\n                const bbox = _turf_turf__WEBPACK_IMPORTED_MODULE_8__.bbox(sourceGeometry);\n                const grid = _turf_turf__WEBPACK_IMPORTED_MODULE_9__.pointGrid(bbox, gridSize, {\n                    units: \"meters\",\n                    mask: sourceGeometry\n                });\n                const cells = [];\n                for(let i = 0; i < grid.features.length; i++){\n                    const point = grid.features[i];\n                    try {\n                        const cell = _turf_turf__WEBPACK_IMPORTED_MODULE_10__.circle(point.geometry.coordinates, gridSize / 2, {\n                            units: \"meters\",\n                            steps: 4\n                        });\n                        const center = _turf_turf__WEBPACK_IMPORTED_MODULE_11__.center(cell.geometry);\n                        let elevation = 0;\n                        try {\n                            elevation = map.queryTerrainElevation(center.geometry.coordinates) ?? 0;\n                        } catch (elevationError) {\n                            console.warn(`Error querying elevation for cell ${i}:`, elevationError);\n                        }\n                        // FIXED: Use the helper function to create properly typed GridCell\n                        const gridCell = (0,_components_Analyses_Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_4__.createGridCell)(`terrain-cell-${i}`, cell.geometry, elevation);\n                        cells.push(gridCell);\n                    } catch (cellError) {\n                        console.warn(`Error generating cell ${i}:`, cellError);\n                    }\n                }\n                console.log(`Generated terrain grid with ${cells.length} cells`);\n                setAoTerrainGrid(cells);\n                _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.addAreaOfOperationsTerrain(cells);\n                return cells;\n            } catch (error) {\n                console.error(\"Error generating terrain grid:\", error);\n                return null;\n            }\n        }\n    }[\"useAreaOpsProcessor.useCallback[generateTerrainGrid]\"], [\n        aoGeometry,\n        map,\n        terrainLoaded,\n        setAoTerrainGrid,\n        showAreaOfOperations\n    ]);\n    const processAreaOfOperations = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAreaOpsProcessor.useCallback[processAreaOfOperations]\": async ()=>{\n            if (!map || !terrainLoaded) {\n                console.error(\"Map not available for AO processing\");\n                return false;\n            }\n            if (aoGeometry) {\n                _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.addAreaOfOperations(aoGeometry);\n                _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.layerManager.fitToAreaOfOperations(aoGeometry);\n                await generateTerrainGrid();\n                return true;\n            }\n            console.error(\"No AO geometry available to process\");\n            return false;\n        }\n    }[\"useAreaOpsProcessor.useCallback[processAreaOfOperations]\"], [\n        aoGeometry,\n        map,\n        terrainLoaded,\n        generateTerrainGrid\n    ]);\n    return {\n        processKML,\n        generateAOFromFlightPlan,\n        generateTerrainGrid,\n        processAreaOfOperations,\n        showAreaOfOperations\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvQU8vSG9va3MvdXNlQXJlYU9wc1Byb2Nlc3Nvci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLGlEQUFpRDtBQUNiO0FBQ0Q7QUFDVTtBQUMyQjtBQUNaO0FBQ0U7QUFFOUQsbUVBQW1FO0FBQzZCO0FBR3pGLE1BQU1PLHNCQUFzQjtJQUNqQyxNQUFNLEVBQ0pDLFVBQVUsRUFDVkMsYUFBYSxFQUNiQyxnQkFBZ0IsRUFDaEJDLGNBQWMsRUFDZixHQUFHUiw4RUFBbUJBO0lBRXZCLE1BQU0sRUFBRVMsR0FBRyxFQUFFQyxhQUFhLEVBQUUsR0FBR1Qsa0VBQWFBO0lBRTVDLE1BQU1VLGFBQWFkLGtEQUFXQTt1REFBQyxDQUFDZTtZQUM5QixJQUFJO2dCQUNGQyxRQUFRQyxHQUFHLENBQUM7Z0JBQ1osTUFBTUMsU0FBUyxJQUFJQztnQkFDbkIsTUFBTUMsU0FBU0YsT0FBT0csZUFBZSxDQUFDTixTQUFTO2dCQUMvQyxNQUFNTyxnQkFBZ0JGLE9BQU9HLGFBQWEsQ0FBQztnQkFFM0MsSUFBSSxDQUFDRCxpQkFBaUIsQ0FBQ0EsY0FBY0UsV0FBVyxFQUFFO29CQUNoRCxNQUFNLElBQUlDLE1BQU07Z0JBQ2xCO2dCQUVBLE1BQU1DLGFBQWFKLGNBQWNFLFdBQVcsQ0FBQ0csSUFBSTtnQkFDakQsTUFBTUMsY0FBY0YsV0FBV0csS0FBSyxDQUFDLE9BQU9qQixHQUFHOytFQUFDLENBQUNrQjt3QkFDL0MsTUFBTSxDQUFDQyxLQUFLQyxJQUFJLEdBQUdGLEtBQUtELEtBQUssQ0FBQyxLQUFLakIsR0FBRyxDQUFDcUI7d0JBQ3ZDLE9BQU87NEJBQUNGOzRCQUFLQzt5QkFBSTtvQkFDbkI7O2dCQUVBLElBQUlKLFlBQVlNLE1BQU0sR0FBRyxHQUFHO29CQUMxQixNQUFNQyxRQUFRUCxXQUFXLENBQUMsRUFBRTtvQkFDNUIsTUFBTVEsT0FBT1IsV0FBVyxDQUFDQSxZQUFZTSxNQUFNLEdBQUcsRUFBRTtvQkFD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QUFRLEVBQ2JpQzt3QkFHRlAsTUFBTXZDLElBQUksQ0FBQ2lEO29CQUNiLEVBQUUsT0FBT0MsV0FBVzt3QkFDbEJ2RSxRQUFRbUQsSUFBSSxDQUFDLENBQUMsc0JBQXNCLEVBQUVVLEVBQUUsQ0FBQyxDQUFDLEVBQUVVO29CQUM5QztnQkFDRjtnQkFFQXZFLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDRCQUE0QixFQUFFMkQsTUFBTTFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBRS9EeEIsaUJBQWlCa0U7Z0JBRWpCdkUsZ0VBQVlBLENBQUNtRiwwQkFBMEIsQ0FBQ1o7Z0JBRXhDLE9BQU9BO1lBQ1QsRUFBRSxPQUFPL0IsT0FBTztnQkFDZDdCLFFBQVE2QixLQUFLLENBQUMsa0NBQWtDQTtnQkFDaEQsT0FBTztZQUNUO1FBQ0Y7K0RBQUc7UUFBQ3JDO1FBQVlJO1FBQUtDO1FBQWVIO1FBQWtCMEQ7S0FBcUI7SUFFM0UsTUFBTXFCLDBCQUEwQnpGLGtEQUFXQTtvRUFBQztZQUMxQyxJQUFJLENBQUNZLE9BQU8sQ0FBQ0MsZUFBZTtnQkFDMUJHLFFBQVE2QixLQUFLLENBQUM7Z0JBQ2QsT0FBTztZQUNUO1lBRUEsSUFBSXJDLFlBQVk7Z0JBQ2RILGdFQUFZQSxDQUFDc0MsbUJBQW1CLENBQUNuQztnQkFDakNILGdFQUFZQSxDQUFDdUMscUJBQXFCLENBQUNwQztnQkFFbkMsTUFBTTZEO2dCQUNOLE9BQU87WUFDVDtZQUVBckQsUUFBUTZCLEtBQUssQ0FBQztZQUNkLE9BQU87UUFDVDttRUFBRztRQUFDckM7UUFBWUk7UUFBS0M7UUFBZXdEO0tBQW9CO0lBRXhELE9BQU87UUFDTHZEO1FBQ0FnQztRQUNBdUI7UUFDQW9CO1FBQ0FyQjtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvY29tcG9uZW50cy9BTy9Ib29rcy91c2VBcmVhT3BzUHJvY2Vzc29yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb21wb25lbnRzL0FPL0hvb2tzL3VzZUFyZWFPcHNQcm9jZXNzb3IudHNcbmltcG9ydCB7IHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgdHVyZiBmcm9tICdAdHVyZi90dXJmJztcbmltcG9ydCBjbGVhbkNvb3JkcyBmcm9tICdAdHVyZi9jbGVhbi1jb29yZHMnO1xuaW1wb3J0IHsgdXNlQXJlYU9mT3BzQ29udGV4dCB9IGZyb20gJy4uLy4uLy4uL2NvbnRleHQvQXJlYU9mT3BzQ29udGV4dCc7XG5pbXBvcnQgeyB1c2VNYXBDb250ZXh0IH0gZnJvbSAnLi4vLi4vLi4vY29udGV4dC9tYXBjb250ZXh0JztcbmltcG9ydCB7IGxheWVyTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL0xheWVyTWFuYWdlcic7XG5cbi8vIEZJWEVEOiBJbXBvcnQgR3JpZENlbGwgZnJvbSB1bmlmaWVkIGxvY2F0aW9uIGFuZCBoZWxwZXIgZnVuY3Rpb25cbmltcG9ydCB7IEdyaWRDZWxsLCBjcmVhdGVHcmlkQ2VsbCB9IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvQW5hbHlzZXMvVHlwZXMvR3JpZEFuYWx5c2lzVHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBGbGlnaHRQbGFuRGF0YSB9IGZyb20gJy4uLy4uLy4uL2NvbnRleHQvRmxpZ2h0UGxhbkNvbnRleHQnO1xuXG5leHBvcnQgY29uc3QgdXNlQXJlYU9wc1Byb2Nlc3NvciA9ICgpID0+IHtcbiAgY29uc3QgeyBcbiAgICBhb0dlb21ldHJ5LCBcbiAgICBzZXRBb0dlb21ldHJ5LCBcbiAgICBzZXRBb1RlcnJhaW5HcmlkLFxuICAgIGJ1ZmZlckRpc3RhbmNlXG4gIH0gPSB1c2VBcmVhT2ZPcHNDb250ZXh0KCk7XG4gIFxuICBjb25zdCB7IG1hcCwgdGVycmFpbkxvYWRlZCB9ID0gdXNlTWFwQ29udGV4dCgpO1xuXG4gIGNvbnN0IHByb2Nlc3NLTUwgPSB1c2VDYWxsYmFjaygoa21sVGV4dDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiUHJvY2Vzc2luZyBLTUwgdGV4dC4uLlwiKTtcbiAgICAgIGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcbiAgICAgIGNvbnN0IGttbERvbSA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoa21sVGV4dCwgXCJ0ZXh0L3htbFwiKTtcbiAgICAgIGNvbnN0IGNvb3Jkc0VsZW1lbnQgPSBrbWxEb20ucXVlcnlTZWxlY3RvcihcIlBvbHlnb24gPiBvdXRlckJvdW5kYXJ5SXMgPiBMaW5lYXJSaW5nID4gY29vcmRpbmF0ZXNcIik7XG4gICAgXG4gICAgICBpZiAoIWNvb3Jkc0VsZW1lbnQgfHwgIWNvb3Jkc0VsZW1lbnQudGV4dENvbnRlbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcG9seWdvbiBjb29yZGluYXRlcyBmb3VuZCBpbiBLTUxcIik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGNvb3Jkc1RleHQgPSBjb29yZHNFbGVtZW50LnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gY29vcmRzVGV4dC5zcGxpdCgvXFxzKy8pLm1hcCgocGFpcikgPT4ge1xuICAgICAgICBjb25zdCBbbG9uLCBsYXRdID0gcGFpci5zcGxpdChcIixcIikubWFwKE51bWJlcik7XG4gICAgICAgIHJldHVybiBbbG9uLCBsYXRdO1xuICAgICAgfSk7XG4gICAgXG4gICAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBmaXJzdCA9IGNvb3JkaW5hdGVzWzBdO1xuICAgICAgICBjb25zdCBsYXN0ID0gY29vcmRpbmF0ZXNbY29vcmRpbmF0ZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChmaXJzdFswXSAhPT0gbGFzdFswXSB8fCBmaXJzdFsxXSAhPT0gbGFzdFsxXSkge1xuICAgICAgICAgIGNvb3JkaW5hdGVzLnB1c2goZmlyc3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHBvbHlnb24gPSB0dXJmLnBvbHlnb24oW2Nvb3JkaW5hdGVzXSk7XG4gICAgICBjb25zdCBmZWF0dXJlQ29sbGVjdGlvbiA9IHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oW3BvbHlnb25dKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coXCJQcm9jZXNzZWQgS01MIGludG8gcG9seWdvbiB3aXRoIGNvb3JkaW5hdGVzOlwiLCBjb29yZGluYXRlcy5sZW5ndGgpO1xuICAgICAgXG4gICAgICBpZiAobWFwICYmIHRlcnJhaW5Mb2FkZWQpIHtcbiAgICAgICAgc2V0QW9HZW9tZXRyeShmZWF0dXJlQ29sbGVjdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIldhaXRpbmcgZm9yIG1hcCBhbmQgdGVycmFpbiB0byBsb2FkIGJlZm9yZSBzZXR0aW5nIEFPXCIpO1xuICAgICAgICBjb25zdCBjaGVja1JlYWR5ID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgIGlmIChtYXAgJiYgdGVycmFpbkxvYWRlZCkge1xuICAgICAgICAgICAgc2V0QW9HZW9tZXRyeShmZWF0dXJlQ29sbGVjdGlvbik7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGNoZWNrUmVhZHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMTAwKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKG1hcCAmJiB0ZXJyYWluTG9hZGVkKSB7XG4gICAgICAgIGxheWVyTWFuYWdlci5hZGRBcmVhT2ZPcGVyYXRpb25zKGZlYXR1cmVDb2xsZWN0aW9uKTtcbiAgICAgICAgbGF5ZXJNYW5hZ2VyLmZpdFRvQXJlYU9mT3BlcmF0aW9ucyhmZWF0dXJlQ29sbGVjdGlvbik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBmZWF0dXJlQ29sbGVjdGlvbjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHByb2Nlc3NpbmcgS01MOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0sIFttYXAsIHRlcnJhaW5Mb2FkZWQsIHNldEFvR2VvbWV0cnldKTtcblxuICBjb25zdCBnZW5lcmF0ZUFPRnJvbUZsaWdodFBsYW4gPSB1c2VDYWxsYmFjayhcbiAgICAoZmxpZ2h0UGxhbjogRmxpZ2h0UGxhbkRhdGEsIG1ha2VWaXNpYmxlID0gZmFsc2UpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiR2VuZXJhdGluZyBBTyBmcm9tIGZsaWdodCBwbGFuLi4uXCIpO1xuICAgICAgXG4gICAgICBpZiAoIWZsaWdodFBsYW4/LmZlYXR1cmVzPy5bMF0/Lmdlb21ldHJ5Py5jb29yZGluYXRlcykge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCBmbGlnaHQgcGxhbiBkYXRhIGZvciBBTyBnZW5lcmF0aW9uXCIpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29vcmRpbmF0ZXMgPSBmbGlnaHRQbGFuLmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkZsaWdodCBwbGFuIGNvb3JkaW5hdGVzOlwiLCBKU09OLnN0cmluZ2lmeShjb29yZGluYXRlcykpO1xuICAgICAgICBcbiAgICAgICAgLy8gVmFsaWRhdGUgY29vcmRpbmF0ZXNcbiAgICAgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSW5zdWZmaWNpZW50IGNvb3JkaW5hdGVzIGZvciBMaW5lU3RyaW5nOlwiLCBjb29yZGluYXRlcyk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW52YWxpZENvb3JkcyA9IGNvb3JkaW5hdGVzLmZpbmQoXG4gICAgICAgICAgKFtsb24sIGxhdF0pID0+IGlzTmFOKGxvbikgfHwgaXNOYU4obGF0KSB8fCBsb24gPCAtMTgwIHx8IGxvbiA+IDE4MCB8fCBsYXQgPCAtOTAgfHwgbGF0ID4gOTBcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGludmFsaWRDb29yZHMpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCBjb29yZGluYXRlcyBkZXRlY3RlZDpcIiwgaW52YWxpZENvb3Jkcyk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxpbmUgPSB0dXJmLmxpbmVTdHJpbmcoY29vcmRpbmF0ZXMubWFwKGNvb3JkID0+IFtjb29yZFswXSwgY29vcmRbMV1dKSk7XG4gICAgICAgIGNvbnN0IGNsZWFuZWRMaW5lID0gY2xlYW5Db29yZHMobGluZSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBidWZmZXJlZCA9IHR1cmYuYnVmZmVyKGNsZWFuZWRMaW5lLCBidWZmZXJEaXN0YW5jZSAvIDEwMDAsIHsgdW5pdHM6ICdraWxvbWV0ZXJzJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGlmICghYnVmZmVyZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCdWZmZXJpbmcgcmVzdWx0ZWQgaW4gdW5kZWZpbmVkIGdlb21ldHJ5XCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmZWF0dXJlQ29sbGVjdGlvbiA9IHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oW2J1ZmZlcmVkXSk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgR2VuZXJhdGVkIEFPIGZyb20gZmxpZ2h0IHBsYW4gd2l0aCAke2Nvb3JkaW5hdGVzLmxlbmd0aH0gcG9pbnRzIGFuZCAke2J1ZmZlckRpc3RhbmNlfW0gYnVmZmVyYCk7XG4gICAgICAgIFxuICAgICAgICBzZXRBb0dlb21ldHJ5KGZlYXR1cmVDb2xsZWN0aW9uKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChtYXAgJiYgdGVycmFpbkxvYWRlZCkge1xuICAgICAgICAgIGlmIChtYWtlVmlzaWJsZSkge1xuICAgICAgICAgICAgbGF5ZXJNYW5hZ2VyLmFkZEFyZWFPZk9wZXJhdGlvbnMoZmVhdHVyZUNvbGxlY3Rpb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsYXllck1hbmFnZXIuYWRkQXJlYU9mT3BlcmF0aW9ucyhmZWF0dXJlQ29sbGVjdGlvbik7XG4gICAgICAgICAgICBsYXllck1hbmFnZXIuc2V0TGF5ZXJWaXNpYmlsaXR5KGxheWVyTWFuYWdlci5NQVBfTEFZRVJTLkFSRUFfT0ZfT1BFUkFUSU9OU19GSUxMLCBmYWxzZSk7XG4gICAgICAgICAgICBsYXllck1hbmFnZXIuc2V0TGF5ZXJWaXNpYmlsaXR5KGxheWVyTWFuYWdlci5NQVBfTEFZRVJTLkFSRUFfT0ZfT1BFUkFUSU9OU19PVVRMSU5FLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmVhdHVyZUNvbGxlY3Rpb247XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gZ2VuZXJhdGUgQU8sIHByb2NlZWRpbmcgd2l0aG91dCBBTzpcIiwgZXJyb3IpO1xuICAgICAgICBzZXRBb0dlb21ldHJ5KG51bGwpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9LFxuICAgIFttYXAsIHRlcnJhaW5Mb2FkZWQsIHNldEFvR2VvbWV0cnksIGJ1ZmZlckRpc3RhbmNlXVxuICApO1xuXG4gIGNvbnN0IHNob3dBcmVhT2ZPcGVyYXRpb25zID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghbWFwIHx8ICFhb0dlb21ldHJ5KSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGxheWVyTWFuYWdlci5zZXRMYXllclZpc2liaWxpdHkobGF5ZXJNYW5hZ2VyLk1BUF9MQVlFUlMuQVJFQV9PRl9PUEVSQVRJT05TX0ZJTEwsIHRydWUpO1xuICAgICAgbGF5ZXJNYW5hZ2VyLnNldExheWVyVmlzaWJpbGl0eShsYXllck1hbmFnZXIuTUFQX0xBWUVSUy5BUkVBX09GX09QRVJBVElPTlNfT1VUTElORSwgdHJ1ZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNob3dpbmcgQXJlYSBvZiBPcGVyYXRpb25zOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCBbbWFwLCBhb0dlb21ldHJ5XSk7XG5cbiAgY29uc3QgZ2VuZXJhdGVUZXJyYWluR3JpZCA9IHVzZUNhbGxiYWNrKGFzeW5jIChncmlkU2l6ZSA9IDMwKSA9PiB7XG4gICAgaWYgKCFhb0dlb21ldHJ5KSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IGdlbmVyYXRlIHRlcnJhaW4gZ3JpZDogTWlzc2luZyBBTyBnZW9tZXRyeVwiKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIW1hcCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCBnZW5lcmF0ZSB0ZXJyYWluIGdyaWQ6IE1hcCBub3QgYXZhaWxhYmxlXCIpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIGlmICghdGVycmFpbkxvYWRlZCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCBnZW5lcmF0ZSB0ZXJyYWluIGdyaWQ6IFRlcnJhaW4gTm90IEF2YWlsYWJsZVwiKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coXCJHZW5lcmF0aW5nIEFPIHRlcnJhaW4gZ3JpZC4uLlwiKTtcbiAgICAgIFxuICAgICAgc2hvd0FyZWFPZk9wZXJhdGlvbnMoKTtcbiAgICAgIFxuICAgICAgaWYgKCFhb0dlb21ldHJ5LmZlYXR1cmVzIHx8IGFvR2VvbWV0cnkuZmVhdHVyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYW5ub3QgZ2VuZXJhdGUgdGVycmFpbiBncmlkOiBBTyBnZW9tZXRyeSBoYXMgbm8gZmVhdHVyZXNcIik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBzb3VyY2VHZW9tZXRyeSA9IGFvR2VvbWV0cnkuZmVhdHVyZXNbMF07XG4gICAgICBcbiAgICAgIGNvbnN0IGJib3ggPSB0dXJmLmJib3goc291cmNlR2VvbWV0cnkpO1xuICAgICAgY29uc3QgZ3JpZCA9IHR1cmYucG9pbnRHcmlkKGJib3gsIGdyaWRTaXplLCB7XG4gICAgICAgIHVuaXRzOiBcIm1ldGVyc1wiLFxuICAgICAgICBtYXNrOiBzb3VyY2VHZW9tZXRyeSBhcyBHZW9KU09OLkZlYXR1cmU8R2VvSlNPTi5Qb2x5Z29uPixcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBjZWxsczogR3JpZENlbGxbXSA9IFtdO1xuICAgICAgXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyaWQuZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcG9pbnQgPSBncmlkLmZlYXR1cmVzW2ldO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGNlbGwgPSB0dXJmLmNpcmNsZShwb2ludC5nZW9tZXRyeS5jb29yZGluYXRlcywgZ3JpZFNpemUgLyAyLCB7XG4gICAgICAgICAgICB1bml0czogXCJtZXRlcnNcIixcbiAgICAgICAgICAgIHN0ZXBzOiA0LFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IGNlbnRlciA9IHR1cmYuY2VudGVyKGNlbGwuZ2VvbWV0cnkpO1xuICAgICAgICAgIFxuICAgICAgICAgIGxldCBlbGV2YXRpb24gPSAwO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBlbGV2YXRpb24gPSBtYXAucXVlcnlUZXJyYWluRWxldmF0aW9uKGNlbnRlci5nZW9tZXRyeS5jb29yZGluYXRlcyBhcyBbbnVtYmVyLCBudW1iZXJdKSA/PyAwO1xuICAgICAgICAgIH0gY2F0Y2ggKGVsZXZhdGlvbkVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEVycm9yIHF1ZXJ5aW5nIGVsZXZhdGlvbiBmb3IgY2VsbCAke2l9OmAsIGVsZXZhdGlvbkVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRklYRUQ6IFVzZSB0aGUgaGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBwcm9wZXJseSB0eXBlZCBHcmlkQ2VsbFxuICAgICAgICAgIGNvbnN0IGdyaWRDZWxsID0gY3JlYXRlR3JpZENlbGwoXG4gICAgICAgICAgICBgdGVycmFpbi1jZWxsLSR7aX1gLFxuICAgICAgICAgICAgY2VsbC5nZW9tZXRyeSBhcyBHZW9KU09OLlBvbHlnb24sXG4gICAgICAgICAgICBlbGV2YXRpb25cbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIGNlbGxzLnB1c2goZ3JpZENlbGwpO1xuICAgICAgICB9IGNhdGNoIChjZWxsRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYEVycm9yIGdlbmVyYXRpbmcgY2VsbCAke2l9OmAsIGNlbGxFcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYEdlbmVyYXRlZCB0ZXJyYWluIGdyaWQgd2l0aCAke2NlbGxzLmxlbmd0aH0gY2VsbHNgKTtcbiAgICAgIFxuICAgICAgc2V0QW9UZXJyYWluR3JpZChjZWxscyk7XG4gICAgICBcbiAgICAgIGxheWVyTWFuYWdlci5hZGRBcmVhT2ZPcGVyYXRpb25zVGVycmFpbihjZWxscyk7XG4gICAgICBcbiAgICAgIHJldHVybiBjZWxscztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdlbmVyYXRpbmcgdGVycmFpbiBncmlkOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIFthb0dlb21ldHJ5LCBtYXAsIHRlcnJhaW5Mb2FkZWQsIHNldEFvVGVycmFpbkdyaWQsIHNob3dBcmVhT2ZPcGVyYXRpb25zXSk7XG5cbiAgY29uc3QgcHJvY2Vzc0FyZWFPZk9wZXJhdGlvbnMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFtYXAgfHwgIXRlcnJhaW5Mb2FkZWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJNYXAgbm90IGF2YWlsYWJsZSBmb3IgQU8gcHJvY2Vzc2luZ1wiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGFvR2VvbWV0cnkpIHtcbiAgICAgIGxheWVyTWFuYWdlci5hZGRBcmVhT2ZPcGVyYXRpb25zKGFvR2VvbWV0cnkpO1xuICAgICAgbGF5ZXJNYW5hZ2VyLmZpdFRvQXJlYU9mT3BlcmF0aW9ucyhhb0dlb21ldHJ5KTtcbiAgICAgIFxuICAgICAgYXdhaXQgZ2VuZXJhdGVUZXJyYWluR3JpZCgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUuZXJyb3IoXCJObyBBTyBnZW9tZXRyeSBhdmFpbGFibGUgdG8gcHJvY2Vzc1wiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sIFthb0dlb21ldHJ5LCBtYXAsIHRlcnJhaW5Mb2FkZWQsIGdlbmVyYXRlVGVycmFpbkdyaWRdKTtcblxuICByZXR1cm4ge1xuICAgIHByb2Nlc3NLTUwsXG4gICAgZ2VuZXJhdGVBT0Zyb21GbGlnaHRQbGFuLFxuICAgIGdlbmVyYXRlVGVycmFpbkdyaWQsXG4gICAgcHJvY2Vzc0FyZWFPZk9wZXJhdGlvbnMsXG4gICAgc2hvd0FyZWFPZk9wZXJhdGlvbnNcbiAgfTtcbn07Il0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidHVyZiIsImNsZWFuQ29vcmRzIiwidXNlQXJlYU9mT3BzQ29udGV4dCIsInVzZU1hcENvbnRleHQiLCJsYXllck1hbmFnZXIiLCJjcmVhdGVHcmlkQ2VsbCIsInVzZUFyZWFPcHNQcm9jZXNzb3IiLCJhb0dlb21ldHJ5Iiwic2V0QW9HZW9tZXRyeSIsInNldEFvVGVycmFpbkdyaWQiLCJidWZmZXJEaXN0YW5jZSIsIm1hcCIsInRlcnJhaW5Mb2FkZWQiLCJwcm9jZXNzS01MIiwia21sVGV4dCIsImNvbnNvbGUiLCJsb2ciLCJwYXJzZXIiLCJET01QYXJzZXIiLCJrbWxEb20iLCJwYXJzZUZyb21TdHJpbmciLCJjb29yZHNFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwiRXJyb3IiLCJjb29yZHNUZXh0IiwidHJpbSIsImNvb3JkaW5hdGVzIiwic3BsaXQiLCJwYWlyIiwibG9uIiwibGF0IiwiTnVtYmVyIiwibGVuZ3RoIiwiZmlyc3QiLCJsYXN0IiwicHVzaCIsInBvbHlnb24iLCJmZWF0dXJlQ29sbGVjdGlvbiIsImNoZWNrUmVhZHkiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJhZGRBcmVhT2ZPcGVyYXRpb25zIiwiZml0VG9BcmVhT2ZPcGVyYXRpb25zIiwiZXJyb3IiLCJnZW5lcmF0ZUFPRnJvbUZsaWdodFBsYW4iLCJmbGlnaHRQbGFuIiwibWFrZVZpc2libGUiLCJmZWF0dXJlcyIsImdlb21ldHJ5IiwiSlNPTiIsInN0cmluZ2lmeSIsImludmFsaWRDb29yZHMiLCJmaW5kIiwiaXNOYU4iLCJsaW5lIiwibGluZVN0cmluZyIsImNvb3JkIiwiY2xlYW5lZExpbmUiLCJidWZmZXJlZCIsImJ1ZmZlciIsInVuaXRzIiwic2V0TGF5ZXJWaXNpYmlsaXR5IiwiTUFQX0xBWUVSUyIsIkFSRUFfT0ZfT1BFUkFUSU9OU19GSUxMIiwiQVJFQV9PRl9PUEVSQVRJT05TX09VVExJTkUiLCJ3YXJuIiwic2hvd0FyZWFPZk9wZXJhdGlvbnMiLCJnZW5lcmF0ZVRlcnJhaW5HcmlkIiwiZ3JpZFNpemUiLCJzb3VyY2VHZW9tZXRyeSIsImJib3giLCJncmlkIiwicG9pbnRHcmlkIiwibWFzayIsImNlbGxzIiwiaSIsInBvaW50IiwiY2VsbCIsImNpcmNsZSIsInN0ZXBzIiwiY2VudGVyIiwiZWxldmF0aW9uIiwicXVlcnlUZXJyYWluRWxldmF0aW9uIiwiZWxldmF0aW9uRXJyb3IiLCJncmlkQ2VsbCIsImNlbGxFcnJvciIsImFkZEFyZWFPZk9wZXJhdGlvbnNUZXJyYWluIiwicHJvY2Vzc0FyZWFPZk9wZXJhdGlvbnMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/AO/Hooks/useAreaOpsProcessor.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Analyses/Hooks/useGridAnalysis.ts":
/*!**************************************************************!*\
  !*** ./src/app/components/Analyses/Hooks/useGridAnalysis.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useGridAnalysis: () => (/* binding */ useGridAnalysis)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"(ssr)/./node_modules/mapbox-gl/dist/mapbox-gl.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _context_MarkerContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../context/MarkerContext */ \"(ssr)/./src/app/context/MarkerContext.tsx\");\n/* harmony import */ var _context_LOSAnalysisContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../context/LOSAnalysisContext */ \"(ssr)/./src/app/context/LOSAnalysisContext.tsx\");\n/* harmony import */ var _services_LayerManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../services/LayerManager */ \"(ssr)/./src/app/services/LayerManager.ts\");\n/* harmony import */ var _Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Utils/GridAnalysisCore */ \"(ssr)/./src/app/components/Analyses/Utils/GridAnalysisCore.ts\");\n/* harmony import */ var _hooks_useFlightPathSampling__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../hooks/useFlightPathSampling */ \"(ssr)/./src/app/hooks/useFlightPathSampling.ts\");\n/* harmony import */ var _Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Types/GridAnalysisTypes */ \"(ssr)/./src/app/components/Analyses/Types/GridAnalysisTypes.ts\");\n/**\n * useGridAnalysis.ts\n * \n * Optimized React hook for grid-based Line of Sight (LOS) analyses.\n * Provides an interface between UI components and the optimized GridAnalysisCore.\n * Maintains the same API for existing UI components while using the more\n * efficient implementations internally.\n * \n * This optimized hook replaces the existing useGridAnalysis.ts file while maintaining the same interface for the UI components. \n */ \n\n\n\n\n\n// Import from the optimized core engine\n\n\n\nfunction useGridAnalysis(options = {}) {\n    const { map, elevationService } = (0,_context_mapcontext__WEBPACK_IMPORTED_MODULE_2__.useMapContext)();\n    const { sampleFlightPath } = (0,_hooks_useFlightPathSampling__WEBPACK_IMPORTED_MODULE_7__.useFlightPathSampling)();\n    const { gcsLocation, observerLocation, repeaterLocation, gcsElevationOffset, observerElevationOffset, repeaterElevationOffset } = (0,_context_MarkerContext__WEBPACK_IMPORTED_MODULE_3__.useMarkersContext)();\n    const { gridSize, elosGridRange, isAnalyzing, setIsAnalyzing, setResults, setError, setProgress: setGlobalProgress } = (0,_context_LOSAnalysisContext__WEBPACK_IMPORTED_MODULE_4__.useLOSAnalysis)();\n    // State and refs\n    const [analysisInProgress, setAnalysisInProgress] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [lastAnalysisTime, setLastAnalysisTime] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [progress, setProgress] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const abortControllerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const cacheRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Map());\n    /**\n   * Updates progress and notifies via callback\n   */ const updateProgress = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGridAnalysis.useCallback[updateProgress]\": (value)=>{\n            setProgress(value);\n            setGlobalProgress(value);\n            if (options.onProgress) {\n                options.onProgress(value);\n            }\n        }\n    }[\"useGridAnalysis.useCallback[updateProgress]\"], [\n        options,\n        setGlobalProgress\n    ]);\n    /**\n   * Cleans up after analysis\n   */ const cleanupAnalysis = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGridAnalysis.useCallback[cleanupAnalysis]\": ()=>{\n            setAnalysisInProgress(null);\n            setProgress(0);\n            if (abortControllerRef.current) {\n                abortControllerRef.current = null;\n            }\n        }\n    }[\"useGridAnalysis.useCallback[cleanupAnalysis]\"], []);\n    /**\n   * Aborts any running analysis\n   */ const abortAnalysis = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGridAnalysis.useCallback[abortAnalysis]\": ()=>{\n            if (abortControllerRef.current) {\n                abortControllerRef.current.abort();\n                abortControllerRef.current = null;\n            }\n            setIsAnalyzing(false);\n            cleanupAnalysis();\n        }\n    }[\"useGridAnalysis.useCallback[abortAnalysis]\"], [\n        cleanupAnalysis,\n        setIsAnalyzing\n    ]);\n    /**\n   * Visualizes grid cells on the map\n   */ const visualizeGrid = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGridAnalysis.useCallback[visualizeGrid]\": (analysisResults, layerId = _services_LayerManager__WEBPACK_IMPORTED_MODULE_5__.MAP_LAYERS.ELOS_GRID)=>{\n            if (!map) {\n                console.error('Map not initialized, cannot visualize grid');\n                return;\n            }\n            try {\n                const geojson = {\n                    type: 'FeatureCollection',\n                    features: analysisResults.cells.map({\n                        \"useGridAnalysis.useCallback[visualizeGrid]\": (cell)=>({\n                                type: 'Feature',\n                                geometry: cell.geometry,\n                                properties: cell.properties\n                            })\n                    }[\"useGridAnalysis.useCallback[visualizeGrid]\"])\n                };\n                if (map.getSource(layerId)) {\n                    const source = map.getSource(layerId);\n                    source.setData(geojson);\n                    return;\n                }\n                map.addSource(layerId, {\n                    type: 'geojson',\n                    data: geojson\n                });\n                // Define color ramp based on layer type\n                const colorRamp = layerId === _services_LayerManager__WEBPACK_IMPORTED_MODULE_5__.MAP_LAYERS.MERGED_VISIBILITY ? [\n                    'interpolate',\n                    [\n                        'linear'\n                    ],\n                    [\n                        'get',\n                        'visibility'\n                    ],\n                    0,\n                    '#d32f2f',\n                    50,\n                    '#1976d2',\n                    100,\n                    '#7cb342' // Green: Two or more stations\n                ] : [\n                    'interpolate',\n                    [\n                        'linear'\n                    ],\n                    [\n                        'get',\n                        'visibility'\n                    ],\n                    0,\n                    '#d32f2f',\n                    25,\n                    '#f57c00',\n                    50,\n                    '#fbc02d',\n                    75,\n                    '#7cb342',\n                    100,\n                    '#1976d2' // Blue\n                ];\n                map.addLayer({\n                    id: layerId,\n                    type: 'fill',\n                    source: layerId,\n                    paint: {\n                        'fill-color': colorRamp,\n                        'fill-opacity': [\n                            'interpolate',\n                            [\n                                'linear'\n                            ],\n                            [\n                                'zoom'\n                            ],\n                            10,\n                            0.7,\n                            15,\n                            0.5\n                        ]\n                    }\n                });\n                // Set up popup\n                const onMouseMove = {\n                    \"useGridAnalysis.useCallback[visualizeGrid].onMouseMove\": (e)=>{\n                        if (e.features && e.features.length > 0) {\n                            const feature = e.features[0];\n                            const vis = feature.properties?.visibility?.toFixed(1);\n                            const elev = feature.properties?.elevation?.toFixed(1);\n                            if (onMouseMove.popup) {\n                                onMouseMove.popup.remove();\n                            }\n                            onMouseMove.popup = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Popup)({\n                                closeButton: false,\n                                closeOnMove: true\n                            }).setLngLat(e.lngLat).setHTML(`\n                <div class=\"bg-white text-black p-2 rounded shadow\">\n                  <strong>Visibility Analysis</strong>\n                  <hr class=\"my-1 border-gray-300\"/>\n                  <div class=\"grid grid-cols-2 gap-1\">\n                    <span>Visibility:</span>\n                    <strong>${vis || 'N/A'}%</strong>\n                    <span>Terrain Elevation:</span>\n                    <strong>${elev || 'N/A'}m</strong>\n                    <span>Distance Range:</span>\n                    <strong>${elosGridRange}m</strong>\n                  </div>\n                </div>\n              `).addTo(map);\n                        }\n                    }\n                }[\"useGridAnalysis.useCallback[visualizeGrid].onMouseMove\"];\n                // Set up event handling\n                onMouseMove.popup = null;\n                const onMouseLeave = {\n                    \"useGridAnalysis.useCallback[visualizeGrid].onMouseLeave\": ()=>{\n                        if (onMouseMove.popup) {\n                            onMouseMove.popup.remove();\n                            onMouseMove.popup = null;\n                        }\n                    }\n                }[\"useGridAnalysis.useCallback[visualizeGrid].onMouseLeave\"];\n                map.off('mousemove', layerId, onMouseMove);\n                map.off('mouseleave', layerId, onMouseLeave);\n                map.on('mousemove', layerId, onMouseMove);\n                map.on('mouseleave', layerId, onMouseLeave);\n                _services_LayerManager__WEBPACK_IMPORTED_MODULE_5__.layerManager.registerLayer(layerId, true);\n            } catch (error) {\n                console.error('Error in visualization:', error);\n            }\n        }\n    }[\"useGridAnalysis.useCallback[visualizeGrid]\"], [\n        map,\n        elosGridRange\n    ]);\n    /**\n * Optimized flight path visibility analysis implementation\n */ const analyzeFlightPath = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGridAnalysis.useCallback[analyzeFlightPath]\": async (flightPlan, options)=>{\n            if (!map) {\n                throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Map not initialized', 'MAP_INTERACTION');\n            }\n            setIsAnalyzing(true);\n            const startTime = performance.now();\n            setAnalysisInProgress(_Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_8__.AnalysisType.FLIGHT_PATH);\n            abortControllerRef.current = new AbortController();\n            try {\n                updateProgress(5);\n                // Validate flight plan\n                if (!flightPlan || !flightPlan.features || !flightPlan.features[0] || flightPlan.features[0].geometry.type !== 'LineString') {\n                    const error = new Error('Invalid flight plan geometry');\n                    throw error;\n                }\n                // Extract flight path feature\n                const flightPath = flightPlan.features[0];\n                // Get the original coordinates (we'll still need these for other operations)\n                const originalCoordinates = flightPath.geometry.coordinates;\n                // Determine altitude mode\n                const waypoints = flightPath.properties?.waypoints || [];\n                const altitudeMode = waypoints.length > 0 ? waypoints[0].altitudeMode : \"absolute\"; // Default\n                updateProgress(10);\n                // Generate sampled points at the specified resolution using your hook's sampleFlightPath\n                console.log(`[Flight Path Analysis] Sampling flight path at ${options?.samplingResolution || 10}m intervals`);\n                // Extract lineString directly\n                const lineString = flightPath.geometry;\n                const sampledPoints = await sampleFlightPath(lineString, {\n                    resolution: options?.samplingResolution || 10,\n                    progressCallback: {\n                        \"useGridAnalysis.useCallback[analyzeFlightPath]\": (progress)=>{\n                            updateProgress(10 + progress * 0.1);\n                            return false; // Don't abort\n                        }\n                    }[\"useGridAnalysis.useCallback[analyzeFlightPath]\"]\n                });\n                // Extract coordinates from the sampled points\n                const sampledCoordinates = sampledPoints.map({\n                    \"useGridAnalysis.useCallback[analyzeFlightPath].sampledCoordinates\": (point)=>point.position\n                }[\"useGridAnalysis.useCallback[analyzeFlightPath].sampledCoordinates\"]);\n                console.log(`[Flight Path Analysis] Generated ${sampledCoordinates.length} sample points from ${originalCoordinates.length} original waypoints`);\n                updateProgress(20);\n                // Generate grid using optimized core function\n                const cells = await (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.generateGrid)(map, {\n                    flightPath,\n                    elosGridRange,\n                    gridSize,\n                    elevationService\n                });\n                if (!cells || !cells.length) {\n                    throw new Error('Generated grid is empty');\n                }\n                updateProgress(40);\n                // Process cells in optimized batches\n                const chunkSize = 100; // Larger batch size for efficiency\n                const results = [];\n                let visibleCellCount = 0;\n                let totalVisibility = 0;\n                for(let i = 0; i < cells.length; i += chunkSize){\n                    if (abortControllerRef.current?.signal.aborted) {\n                        throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Analysis aborted', 'VISIBILITY_ANALYSIS');\n                    }\n                    const chunk = cells.slice(i, i + chunkSize);\n                    // Process chunk in parallel\n                    const processedChunk = await Promise.all(chunk.map({\n                        \"useGridAnalysis.useCallback[analyzeFlightPath]\": async (cell)=>{\n                            try {\n                                const center = [\n                                    (cell.geometry.coordinates[0][0][0] + cell.geometry.coordinates[0][2][0]) / 2,\n                                    (cell.geometry.coordinates[0][0][1] + cell.geometry.coordinates[0][2][1]) / 2\n                                ];\n                                // IMPORTANT CHANGE: Pass sampled coordinates instead of original coordinates\n                                const visibility = await (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.checkFlightPathLOS)(map, [\n                                    center[0],\n                                    center[1],\n                                    cell.properties.elevation || 0\n                                ], originalCoordinates, {\n                                    altitudeMode,\n                                    elevationService,\n                                    gridRange: elosGridRange,\n                                    sampledCoordinates\n                                });\n                                if (visibility > 0) visibleCellCount++;\n                                totalVisibility += visibility;\n                                return {\n                                    ...cell,\n                                    properties: {\n                                        ...cell.properties,\n                                        visibility,\n                                        fullyVisible: visibility === 100,\n                                        lastAnalyzed: Date.now()\n                                    }\n                                };\n                            } catch (e) {\n                                console.warn('Error processing cell:', e);\n                                return cell; // Return unmodified on error\n                            }\n                        }\n                    }[\"useGridAnalysis.useCallback[analyzeFlightPath]\"]));\n                    results.push(...processedChunk);\n                    const progressValue = 40 + Math.min(50, (i + chunkSize) / cells.length * 50);\n                    updateProgress(progressValue);\n                    await new Promise({\n                        \"useGridAnalysis.useCallback[analyzeFlightPath]\": (resolve)=>setTimeout(resolve, 0)\n                    }[\"useGridAnalysis.useCallback[analyzeFlightPath]\"]); // Let UI breathe\n                }\n                updateProgress(95);\n                const analysisTime = performance.now() - startTime;\n                const analysisResults = {\n                    cells: results,\n                    stats: {\n                        totalCells: cells.length,\n                        visibleCells: visibleCellCount,\n                        averageVisibility: totalVisibility / cells.length,\n                        analysisTime\n                    }\n                };\n                visualizeGrid(analysisResults, _services_LayerManager__WEBPACK_IMPORTED_MODULE_5__.MAP_LAYERS.ELOS_GRID);\n                updateProgress(100);\n                setLastAnalysisTime(Date.now());\n                // Log visibility distribution\n                const visibilityBuckets = {\n                    'zero': 0,\n                    '1-25': 0,\n                    '26-50': 0,\n                    '51-75': 0,\n                    '76-99': 0,\n                    'hundred': 0\n                };\n                results.forEach({\n                    \"useGridAnalysis.useCallback[analyzeFlightPath]\": (cell)=>{\n                        const vis = cell.properties.visibility;\n                        if (vis === 0) visibilityBuckets.zero++;\n                        else if (vis <= 25) visibilityBuckets['1-25']++;\n                        else if (vis <= 50) visibilityBuckets['26-50']++;\n                        else if (vis <= 75) visibilityBuckets['51-75']++;\n                        else if (vis < 100) visibilityBuckets['76-99']++;\n                        else visibilityBuckets.hundred++;\n                    }\n                }[\"useGridAnalysis.useCallback[analyzeFlightPath]\"]);\n                console.log(`[Debug] Final visibility distribution:`, visibilityBuckets);\n                return analysisResults;\n            } catch (error) {\n                console.error(`Flight path analysis error:`, error);\n                throw error;\n            } finally{\n                cleanupAnalysis();\n                setIsAnalyzing(false);\n            }\n        }\n    }[\"useGridAnalysis.useCallback[analyzeFlightPath]\"], [\n        map,\n        gridSize,\n        elosGridRange,\n        updateProgress,\n        visualizeGrid,\n        cleanupAnalysis,\n        setIsAnalyzing,\n        elevationService,\n        sampleFlightPath\n    ]);\n    /**\n   * Analyzes visibility from a single station\n   */ const analyzeStation = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGridAnalysis.useCallback[analyzeStation]\": async ({ stationType, location, range, elevationOffset, markerId, layerId })=>{\n            if (!map) {\n                throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Map not initialized', 'MAP_INTERACTION');\n            }\n            setIsAnalyzing(true);\n            const startTime = performance.now();\n            try {\n                // Validate location data\n                if (!location || typeof location.lng !== 'number' || typeof location.lat !== 'number') {\n                    throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)(`${stationType.toUpperCase()} location not set or invalid`, 'INVALID_INPUT');\n                }\n                updateProgress(10);\n                // Generate grid using optimized core function\n                const cells = await (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.generateGrid)(map, {\n                    center: [\n                        location.lng,\n                        location.lat\n                    ],\n                    range,\n                    gridSize,\n                    elevationService\n                });\n                if (!cells || !cells.length) {\n                    throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Failed to generate grid', 'GRID_GENERATION');\n                }\n                updateProgress(40);\n                // Get observer elevation\n                const stationElevation = location.elevation ?? await elevationService?.getElevation(location.lng, location.lat) ?? 0;\n                const stationPosition = [\n                    location.lng,\n                    location.lat,\n                    stationElevation + elevationOffset\n                ];\n                // Process in optimized batches\n                const chunkSize = 100;\n                let visibleCells = 0;\n                let totalVisibility = 0;\n                const updatedCells = [];\n                for(let i = 0; i < cells.length; i += chunkSize){\n                    if (abortControllerRef.current?.signal.aborted) {\n                        throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Analysis aborted', 'VISIBILITY_ANALYSIS');\n                    }\n                    const chunk = cells.slice(i, i + chunkSize);\n                    // Process in parallel\n                    const chunkResults = await Promise.all(chunk.map({\n                        \"useGridAnalysis.useCallback[analyzeStation]\": async (cell)=>{\n                            try {\n                                const center = [\n                                    (cell.geometry.coordinates[0][0][0] + cell.geometry.coordinates[0][2][0]) / 2,\n                                    (cell.geometry.coordinates[0][0][1] + cell.geometry.coordinates[0][2][1]) / 2\n                                ];\n                                const isVisible = await (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.checkStationLOS)(map, stationPosition, [\n                                    center[0],\n                                    center[1],\n                                    cell.properties.elevation || 0\n                                ], {\n                                    elevationService\n                                });\n                                const visibility = isVisible ? 100 : 0;\n                                if (isVisible) {\n                                    visibleCells++;\n                                    totalVisibility += 100;\n                                }\n                                return {\n                                    ...cell,\n                                    properties: {\n                                        ...cell.properties,\n                                        visibility,\n                                        fullyVisible: isVisible,\n                                        lastAnalyzed: Date.now()\n                                    }\n                                };\n                            } catch (e) {\n                                console.warn('Error processing cell:', e);\n                                return cell; // Return unmodified on error\n                            }\n                        }\n                    }[\"useGridAnalysis.useCallback[analyzeStation]\"]));\n                    updatedCells.push(...chunkResults);\n                    const progressValue = 40 + (i + chunkSize) / cells.length * 50;\n                    updateProgress(progressValue);\n                    await new Promise({\n                        \"useGridAnalysis.useCallback[analyzeStation]\": (resolve)=>setTimeout(resolve, 0)\n                    }[\"useGridAnalysis.useCallback[analyzeStation]\"]); // Let UI breathe\n                }\n                const analysisTime = performance.now() - startTime;\n                updateProgress(95);\n                // Use the provided layerId or generate a default one\n                const effectiveLayerId = layerId || (stationType === 'gcs' ? _services_LayerManager__WEBPACK_IMPORTED_MODULE_5__.MAP_LAYERS.GCS_GRID : stationType === 'observer' ? _services_LayerManager__WEBPACK_IMPORTED_MODULE_5__.MAP_LAYERS.OBSERVER_GRID : _services_LayerManager__WEBPACK_IMPORTED_MODULE_5__.MAP_LAYERS.REPEATER_GRID);\n                const analysisResults = {\n                    cells: updatedCells,\n                    stats: {\n                        visibleCells: visibleCells,\n                        totalCells: cells.length,\n                        averageVisibility: cells.length > 0 ? totalVisibility / cells.length : 0,\n                        analysisTime\n                    }\n                };\n                // Visualize with the effective layer ID\n                visualizeGrid(analysisResults, effectiveLayerId);\n                updateProgress(100);\n                setLastAnalysisTime(Date.now());\n                return analysisResults;\n            } catch (error) {\n                console.error(`Station analysis error:`, error);\n                throw error;\n            } finally{\n                updateProgress(0);\n                cleanupAnalysis();\n                setIsAnalyzing(false);\n            }\n        }\n    }[\"useGridAnalysis.useCallback[analyzeStation]\"], [\n        map,\n        gridSize,\n        elevationService,\n        updateProgress,\n        visualizeGrid,\n        cleanupAnalysis,\n        setIsAnalyzing\n    ]);\n    /**\n   * Optimized merged analysis implementation\n   */ const analyzeMerged = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGridAnalysis.useCallback[analyzeMerged]\": async ({ stations })=>{\n            if (!map) {\n                throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Map not initialized', 'MAP_INTERACTION');\n            }\n            setIsAnalyzing(true);\n            const startTime = performance.now();\n            try {\n                if (!stations || !Array.isArray(stations) || stations.length < 2) {\n                    throw new Error(\"At least two stations are required for merged analysis\");\n                }\n                // Validate stations\n                for (const station of stations){\n                    if (!station.location || typeof station.location.lng !== 'number' || typeof station.location.lat !== 'number') {\n                        throw new Error(`Invalid location data for station (${station.type})`);\n                    }\n                }\n                updateProgress(10);\n                // Generate combined bounding box\n                const bbox = (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.generateCombinedBoundingBox)(stations);\n                const center = [\n                    (bbox[0] + bbox[2]) / 2,\n                    (bbox[1] + bbox[3]) / 2\n                ];\n                const maxRange = Math.max(...stations.map({\n                    \"useGridAnalysis.useCallback[analyzeMerged].maxRange\": (s)=>s.range\n                }[\"useGridAnalysis.useCallback[analyzeMerged].maxRange\"]));\n                // Prepare station positions with elevations\n                const stationPositions = await Promise.all(stations.map({\n                    \"useGridAnalysis.useCallback[analyzeMerged]\": async (station)=>{\n                        const elev = station.location.elevation ?? await elevationService?.getElevation(station.location.lng, station.location.lat) ?? 0;\n                        return {\n                            type: station.type,\n                            position: [\n                                station.location.lng,\n                                station.location.lat,\n                                elev + station.elevationOffset\n                            ]\n                        };\n                    }\n                }[\"useGridAnalysis.useCallback[analyzeMerged]\"]));\n                updateProgress(20);\n                // Generate grid - use larger grid size for better performance\n                const cells = await (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.generateGrid)(map, {\n                    center,\n                    range: maxRange * 1.1,\n                    gridSize,\n                    elevationService\n                });\n                if (!cells.length) {\n                    throw new Error('Failed to generate grid for merged analysis');\n                }\n                updateProgress(40);\n                // Process in more efficient batches\n                const chunkSize = 100;\n                let visibleCells = 0;\n                let visibilitySum = 0;\n                for(let i = 0; i < cells.length; i += chunkSize){\n                    if (abortControllerRef.current?.signal.aborted) {\n                        throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Analysis aborted', 'VISIBILITY_ANALYSIS');\n                    }\n                    const chunk = cells.slice(i, i + chunkSize);\n                    // Process batch in parallel\n                    await Promise.all(chunk.map({\n                        \"useGridAnalysis.useCallback[analyzeMerged]\": async (cell, cellIndex)=>{\n                            try {\n                                const center = [\n                                    (cell.geometry.coordinates[0][0][0] + cell.geometry.coordinates[0][2][0]) / 2,\n                                    (cell.geometry.coordinates[0][0][1] + cell.geometry.coordinates[0][2][1]) / 2\n                                ];\n                                const targetPosition = [\n                                    center[0],\n                                    center[1],\n                                    cell.properties.elevation || 0\n                                ];\n                                let visibleStationCount = 0;\n                                // Check visibility from each station\n                                for (const station of stationPositions){\n                                    const isVisible = await (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.checkStationLOS)(map, station.position, targetPosition, {\n                                        elevationService\n                                    });\n                                    if (isVisible) {\n                                        visibleStationCount++;\n                                    }\n                                }\n                                // Set visibility based on number of visible stations\n                                let visibilityPercentage = 0;\n                                if (visibleStationCount === 1) {\n                                    visibilityPercentage = 50;\n                                } else if (visibleStationCount >= 2) {\n                                    visibilityPercentage = 100;\n                                }\n                                cell.properties.visibility = visibilityPercentage;\n                                cell.properties.fullyVisible = visibleStationCount >= stationPositions.length;\n                                cell.properties.visibleStationCount = visibleStationCount;\n                                cell.properties.lastAnalyzed = Date.now();\n                                if (visibleStationCount > 0) {\n                                    visibleCells++;\n                                    visibilitySum += visibilityPercentage;\n                                }\n                            } catch (e) {\n                                console.warn('Error analyzing merged cell:', e);\n                            }\n                        }\n                    }[\"useGridAnalysis.useCallback[analyzeMerged]\"]));\n                    const progressValue = 40 + (i + chunkSize) / cells.length * 50;\n                    updateProgress(progressValue);\n                    await new Promise({\n                        \"useGridAnalysis.useCallback[analyzeMerged]\": (resolve)=>setTimeout(resolve, 0)\n                    }[\"useGridAnalysis.useCallback[analyzeMerged]\"]); // Let UI breathe\n                }\n                updateProgress(95);\n                const analysisTime = performance.now() - startTime;\n                const analysisResults = {\n                    cells,\n                    stats: {\n                        visibleCells,\n                        totalCells: cells.length,\n                        averageVisibility: cells.length > 0 ? visibilitySum / cells.length : 0,\n                        analysisTime\n                    }\n                };\n                visualizeGrid(analysisResults, _services_LayerManager__WEBPACK_IMPORTED_MODULE_5__.MAP_LAYERS.MERGED_VISIBILITY);\n                updateProgress(100);\n                setLastAnalysisTime(Date.now());\n                return analysisResults;\n            } catch (error) {\n                console.error(`Merged analysis error:`, error);\n                throw error;\n            } finally{\n                updateProgress(0);\n                cleanupAnalysis();\n                setIsAnalyzing(false);\n            }\n        }\n    }[\"useGridAnalysis.useCallback[analyzeMerged]\"], [\n        map,\n        gridSize,\n        elevationService,\n        updateProgress,\n        visualizeGrid,\n        cleanupAnalysis,\n        setIsAnalyzing\n    ]);\n    /**\n * Checks LOS between two stations - either by marker IDs or station types\n */ const checkStationToStationLOS = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGridAnalysis.useCallback[checkStationToStationLOS]\": async (sourceStationData, targetStationData)=>{\n            if (!map) {\n                throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Map not initialized', 'MAP_INTERACTION');\n            }\n            setIsAnalyzing(true);\n            try {\n                // Handle string-based station types (backward compatibility)\n                if (typeof sourceStationData === 'string' && typeof targetStationData === 'string') {\n                    // Original implementation for string-based station types\n                    const sourceStation = sourceStationData;\n                    const targetStation = targetStationData;\n                    // Log the station types for debugging\n                    console.log('Using string-based station types:', {\n                        sourceStation,\n                        targetStation\n                    });\n                    const stations = {\n                        gcs: {\n                            location: gcsLocation,\n                            offset: gcsElevationOffset\n                        },\n                        observer: {\n                            location: observerLocation,\n                            offset: observerElevationOffset\n                        },\n                        repeater: {\n                            location: repeaterLocation,\n                            offset: repeaterElevationOffset\n                        }\n                    };\n                    // Ensure sourceStation and targetStation are valid strings\n                    if (![\n                        'gcs',\n                        'observer',\n                        'repeater'\n                    ].includes(sourceStation)) {\n                        throw new Error(`Invalid source station type: ${sourceStation}`);\n                    }\n                    if (![\n                        'gcs',\n                        'observer',\n                        'repeater'\n                    ].includes(targetStation)) {\n                        throw new Error(`Invalid target station type: ${targetStation}`);\n                    }\n                    const source = stations[sourceStation];\n                    const target = stations[targetStation];\n                    // Defensive null check before accessing properties\n                    if (!source?.location || !target?.location) {\n                        console.error('Station details:', {\n                            source: {\n                                type: sourceStation,\n                                data: source\n                            },\n                            target: {\n                                type: targetStation,\n                                data: target\n                            }\n                        });\n                        throw new Error(`Both ${sourceStation} and ${targetStation} must be on the map with valid locations.`);\n                    }\n                    updateProgress(20);\n                    // Use the renamed core function to avoid recursion\n                    const losData = await (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.checkStationToStationLOS)(map, {\n                        location: source.location,\n                        elevationOffset: source.offset\n                    }, {\n                        location: target.location,\n                        elevationOffset: target.offset\n                    }, {\n                        elevationService\n                    });\n                    updateProgress(100);\n                    return losData;\n                } else if (typeof sourceStationData === 'object' && sourceStationData !== null && typeof targetStationData === 'object' && targetStationData !== null) {\n                    // New implementation for object-based station data\n                    console.log('Using object-based station data');\n                    const sourceStation = sourceStationData;\n                    const targetStation = targetStationData;\n                    // Validate input objects\n                    if (!sourceStation.location || !targetStation.location) {\n                        console.error('Invalid station data:', {\n                            sourceStation,\n                            targetStation\n                        });\n                        throw new Error('Both source and target stations must have valid location data');\n                    }\n                    updateProgress(20);\n                    // Directly use the core function with the station objects\n                    const losData = await (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.checkStationToStationLOS)(map, {\n                        location: sourceStation.location,\n                        elevationOffset: sourceStation.elevationOffset\n                    }, {\n                        location: targetStation.location,\n                        elevationOffset: targetStation.elevationOffset\n                    }, {\n                        elevationService\n                    });\n                    updateProgress(100);\n                    return losData;\n                } else {\n                    throw new Error(`Invalid station data format. Expected either station type strings or station objects.`);\n                }\n            } catch (error) {\n                console.error(`Station-to-station LOS error:`, error);\n                throw error;\n            } finally{\n                updateProgress(0);\n                cleanupAnalysis();\n                setIsAnalyzing(false);\n            }\n        }\n    }[\"useGridAnalysis.useCallback[checkStationToStationLOS]\"], [\n        map,\n        gcsLocation,\n        observerLocation,\n        repeaterLocation,\n        gcsElevationOffset,\n        observerElevationOffset,\n        repeaterElevationOffset,\n        elevationService,\n        updateProgress,\n        cleanupAnalysis,\n        setIsAnalyzing\n    ]);\n    /**\n * Main analysis function that handles all analysis types\n */ const runAnalysis = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGridAnalysis.useCallback[runAnalysis]\": async (type, options)=>{\n            if (isAnalyzing) {\n                throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Analysis already in progress', 'INVALID_INPUT');\n            }\n            try {\n                setIsAnalyzing(true);\n                setError(null);\n                let result;\n                switch(type){\n                    case _Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_8__.AnalysisType.FLIGHT_PATH:\n                        if (!options?.flightPlan) {\n                            throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Flight plan is required', 'INVALID_INPUT');\n                        }\n                        result = await analyzeFlightPath(options.flightPlan, {\n                            samplingResolution: options.samplingResolution\n                        });\n                        break;\n                    case _Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_8__.AnalysisType.STATION:\n                        if (!options?.stationType || !options?.location || !options?.range) {\n                            throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Station type, location, and range are required', 'INVALID_INPUT');\n                        }\n                        result = await analyzeStation({\n                            stationType: options.stationType,\n                            location: options.location,\n                            range: options.range,\n                            elevationOffset: options.elevationOffset || 0\n                        });\n                        break;\n                    case _Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_8__.AnalysisType.MERGED:\n                        if (!options?.stations || options.stations.length < 2) {\n                            throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('At least two stations are required', 'INVALID_INPUT');\n                        }\n                        result = await analyzeMerged({\n                            stations: options.stations\n                        });\n                        break;\n                    case _Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_8__.AnalysisType.STATION_TO_STATION:\n                        if (!options?.sourceStation || !options?.targetStation) {\n                            throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Source and target stations are required', 'INVALID_INPUT');\n                        }\n                        // Pass the station data objects directly to checkStationToStationLOS\n                        const stationResult = await checkStationToStationLOS(options.sourceStation, options.targetStation);\n                        result = {\n                            cells: [],\n                            stats: {\n                                visibleCells: 0,\n                                totalCells: 0,\n                                averageVisibility: stationResult.result.clear ? 100 : 0,\n                                analysisTime: 0\n                            },\n                            stationLOSResult: stationResult.result,\n                            profile: stationResult.profile\n                        };\n                        break;\n                    default:\n                        throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)(`Unsupported analysis type: ${type}`, 'INVALID_INPUT');\n                }\n                const compatibleResult = {\n                    cells: result.cells,\n                    stats: result.stats,\n                    stationLOSResult: result.stationLOSResult\n                };\n                setResults(compatibleResult);\n                return result;\n            } catch (error) {\n                console.error(`Analysis error, type: ${type}:`, error);\n                setError(error instanceof Error ? error.message : 'Analysis failed');\n                throw error;\n            } finally{\n                setIsAnalyzing(false);\n            }\n        }\n    }[\"useGridAnalysis.useCallback[runAnalysis]\"], [\n        isAnalyzing,\n        setIsAnalyzing,\n        setError,\n        setResults,\n        analyzeFlightPath,\n        analyzeStation,\n        analyzeMerged,\n        checkStationToStationLOS\n    ]);\n    /**\n * Analyzes terrain grid with optimized performance\n */ const analyzeTerrainGrid = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGridAnalysis.useCallback[analyzeTerrainGrid]\": async (gridCells, referenceAltitude = 120)=>{\n            if (!map) {\n                throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Map not initialized', 'MAP_INTERACTION');\n            }\n            if (isAnalyzing) {\n                throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Analysis already in progress', 'INVALID_INPUT');\n            }\n            try {\n                setIsAnalyzing(true);\n                setAnalysisInProgress(_Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_8__.AnalysisType.TERRAIN);\n                abortControllerRef.current = new AbortController();\n                const startTime = performance.now();\n                // Use the renamed core implementation\n                const result = await (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.analyzeTerrainGrid)(gridCells, {\n                    batchSize: 1000,\n                    referenceAltitude,\n                    onProgress: {\n                        \"useGridAnalysis.useCallback[analyzeTerrainGrid]\": (progress)=>{\n                            updateProgress(progress);\n                            return abortControllerRef.current?.signal.aborted || false;\n                        }\n                    }[\"useGridAnalysis.useCallback[analyzeTerrainGrid]\"]\n                });\n                if (abortControllerRef.current?.signal.aborted) {\n                    throw (0,_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_6__.createError)('Analysis aborted', 'USER_ABORT');\n                }\n                // Create analysis results in compatible format\n                const analysisResults = {\n                    cells: gridCells,\n                    stats: {\n                        visibleCells: gridCells.length,\n                        totalCells: gridCells.length,\n                        averageVisibility: 100,\n                        analysisTime: performance.now() - startTime,\n                        terrainStats: {\n                            highestElevation: result.highestElevation,\n                            lowestElevation: result.lowestElevation,\n                            averageElevation: result.averageElevation,\n                            elevationDistribution: result.elevationDistribution\n                        }\n                    }\n                };\n                return analysisResults;\n            } catch (error) {\n                console.error(`Terrain grid analysis error:`, error);\n                throw error;\n            } finally{\n                cleanupAnalysis();\n                setIsAnalyzing(false);\n            }\n        }\n    }[\"useGridAnalysis.useCallback[analyzeTerrainGrid]\"], [\n        map,\n        isAnalyzing,\n        updateProgress,\n        cleanupAnalysis,\n        setIsAnalyzing\n    ]);\n    // Return the same interface for backward compatibility\n    return {\n        isAnalyzing: isAnalyzing || analysisInProgress !== null,\n        currentAnalysisType: analysisInProgress,\n        progress,\n        lastAnalysisTime,\n        runAnalysis,\n        analyzeFlightPath,\n        analyzeStation,\n        analyzeMerged,\n        checkStationToStationLOS,\n        abortAnalysis,\n        visualizeGrid,\n        analyzeTerrainGrid\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvQW5hbHlzZXMvSG9va3MvdXNlR3JpZEFuYWx5c2lzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Q0FTQyxHQUVxRDtBQUNyQjtBQUMyQjtBQUNPO0FBQ0U7QUFDSztBQUcxRSx3Q0FBd0M7QUFVTDtBQUMwQztBQWF6QztBQU03QixTQUFTb0IsZ0JBQWdCQyxVQUFrQyxDQUFDLENBQUM7SUFDbEUsTUFBTSxFQUFFQyxHQUFHLEVBQUVDLGdCQUFnQixFQUFFLEdBQUduQixrRUFBYUE7SUFDL0MsTUFBTSxFQUFFb0IsZ0JBQWdCLEVBQUUsR0FBR04sbUZBQXFCQTtJQUNsRCxNQUFNLEVBQ0pPLFdBQVcsRUFDWEMsZ0JBQWdCLEVBQ2hCQyxnQkFBZ0IsRUFDaEJDLGtCQUFrQixFQUNsQkMsdUJBQXVCLEVBQ3ZCQyx1QkFBdUIsRUFDeEIsR0FBR3pCLHlFQUFpQkE7SUFDckIsTUFBTSxFQUNKMEIsUUFBUSxFQUNSQyxhQUFhLEVBQ2JDLFdBQVcsRUFDWEMsY0FBYyxFQUNkQyxVQUFVLEVBQ1ZDLFFBQVEsRUFDUkMsYUFBYUMsaUJBQWlCLEVBQy9CLEdBQUdoQywyRUFBY0E7SUFFbEIsaUJBQWlCO0lBQ2pCLE1BQU0sQ0FBQ2lDLG9CQUFvQkMsc0JBQXNCLEdBQUd2QywrQ0FBUUEsQ0FBc0I7SUFDbEYsTUFBTSxDQUFDd0Msa0JBQWtCQyxvQkFBb0IsR0FBR3pDLCtDQUFRQSxDQUFTO0lBQ2pFLE1BQU0sQ0FBQzBDLFVBQVVOLFlBQVksR0FBR3BDLCtDQUFRQSxDQUFTO0lBQ2pELE1BQU0yQyxxQkFBcUIxQyw2Q0FBTUEsQ0FBeUI7SUFDMUQsTUFBTTJDLFdBQVczQyw2Q0FBTUEsQ0FBOEQsSUFBSTRDO0lBRXpGOztHQUVDLEdBQ0QsTUFBTUMsaUJBQWlCL0Msa0RBQVdBO3VEQUFDLENBQUNnRDtZQUNsQ1gsWUFBWVc7WUFDWlYsa0JBQWtCVTtZQUNsQixJQUFJM0IsUUFBUTRCLFVBQVUs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T2lCLGdCQUFnQjs0QkFDekNDLHVCQUF1QmxCLE9BQU9rQixxQkFBcUI7d0JBQ3JEO29CQUNGO2dCQUNGO2dCQUVBLE9BQU9uSztZQUNULEVBQUUsT0FBT0ksT0FBTztnQkFDZEQsUUFBUUMsS0FBSyxDQUFDLENBQUMsNEJBQTRCLENBQUMsRUFBRUE7Z0JBQzlDLE1BQU1BO1lBQ1IsU0FBVTtnQkFDUlQ7Z0JBQ0FoQixlQUFlO1lBQ2pCO1FBQ0Y7MERBQ0E7UUFBQ1o7UUFBS1c7UUFBYWM7UUFBZ0JHO1FBQWlCaEI7S0FBZTtJQUduRSx1REFBdUQ7SUFDdkQsT0FBTztRQUNMRCxhQUFhQSxlQUFlTSx1QkFBdUI7UUFDbkRvTCxxQkFBcUJwTDtRQUNyQkk7UUFDQUY7UUFDQThKO1FBQ0FwRztRQUNBdUQ7UUFDQW1CO1FBQ0FqSztRQUNBd0M7UUFDQUU7UUFDQXRDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvY29tcG9uZW50cy9BbmFseXNlcy9Ib29rcy91c2VHcmlkQW5hbHlzaXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiB1c2VHcmlkQW5hbHlzaXMudHNcbiAqIFxuICogT3B0aW1pemVkIFJlYWN0IGhvb2sgZm9yIGdyaWQtYmFzZWQgTGluZSBvZiBTaWdodCAoTE9TKSBhbmFseXNlcy5cbiAqIFByb3ZpZGVzIGFuIGludGVyZmFjZSBiZXR3ZWVuIFVJIGNvbXBvbmVudHMgYW5kIHRoZSBvcHRpbWl6ZWQgR3JpZEFuYWx5c2lzQ29yZS5cbiAqIE1haW50YWlucyB0aGUgc2FtZSBBUEkgZm9yIGV4aXN0aW5nIFVJIGNvbXBvbmVudHMgd2hpbGUgdXNpbmcgdGhlIG1vcmVcbiAqIGVmZmljaWVudCBpbXBsZW1lbnRhdGlvbnMgaW50ZXJuYWxseS5cbiAqIFxuICogVGhpcyBvcHRpbWl6ZWQgaG9vayByZXBsYWNlcyB0aGUgZXhpc3RpbmcgdXNlR3JpZEFuYWx5c2lzLnRzIGZpbGUgd2hpbGUgbWFpbnRhaW5pbmcgdGhlIHNhbWUgaW50ZXJmYWNlIGZvciB0aGUgVUkgY29tcG9uZW50cy4gXG4gKi9cblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgbWFwYm94Z2wgZnJvbSAnbWFwYm94LWdsJztcbmltcG9ydCB7IHVzZU1hcENvbnRleHQgfSBmcm9tICcuLi8uLi8uLi9jb250ZXh0L21hcGNvbnRleHQnO1xuaW1wb3J0IHsgdXNlTWFya2Vyc0NvbnRleHQgfSBmcm9tICcuLi8uLi8uLi9jb250ZXh0L01hcmtlckNvbnRleHQnO1xuaW1wb3J0IHsgdXNlTE9TQW5hbHlzaXMgfSBmcm9tICcuLi8uLi8uLi9jb250ZXh0L0xPU0FuYWx5c2lzQ29udGV4dCc7XG5pbXBvcnQgeyBsYXllck1hbmFnZXIsIE1BUF9MQVlFUlMgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9MYXllck1hbmFnZXInO1xuaW1wb3J0IHsgRmxpZ2h0UGxhbkRhdGEgfSBmcm9tICcuLi8uLi8uLi9jb250ZXh0L0ZsaWdodFBsYW5Db250ZXh0JztcblxuLy8gSW1wb3J0IGZyb20gdGhlIG9wdGltaXplZCBjb3JlIGVuZ2luZVxuaW1wb3J0IHtcbiAgZ2VuZXJhdGVHcmlkLFxuICBjaGVja1N0YXRpb25MT1MsXG4gIGNoZWNrRmxpZ2h0UGF0aExPUyxcbiAgZ2V0TE9TUHJvZmlsZSxcbiAgY2hlY2tTdGF0aW9uVG9TdGF0aW9uTE9TIGFzIGNvcmVDaGVja1N0YXRpb25Ub1N0YXRpb25MT1MsXG4gIGdlbmVyYXRlQ29tYmluZWRCb3VuZGluZ0JveCxcbiAgY3JlYXRlRXJyb3IsXG4gIGFuYWx5emVUZXJyYWluR3JpZCBhcyBjb3JlQW5hbHl6ZVRlcnJhaW5HcmlkICAvLyBSZW5hbWUgdG8gYXZvaWQgY29uZmxpY3RzXG59IGZyb20gJy4uL1V0aWxzL0dyaWRBbmFseXNpc0NvcmUnO1xuaW1wb3J0IHsgdXNlRmxpZ2h0UGF0aFNhbXBsaW5nIH0gZnJvbSAnLi4vLi4vLi4vaG9va3MvdXNlRmxpZ2h0UGF0aFNhbXBsaW5nJztcblxuaW1wb3J0IHtcbiAgQW5hbHlzaXNSZXN1bHRzLFxuICBHcmlkQ2VsbCxcbiAgTG9jYXRpb25EYXRhLFxuICBNYXJrZXJUeXBlLFxuICBTdGF0aW9uQ29uZmlnLFxuICBTdGF0aW9uTE9TUmVzdWx0LFxuICBMT1NQcm9maWxlUG9pbnQsXG4gIEFuYWx5c2lzVHlwZSxcbiAgQ29vcmRpbmF0ZXMyRCxcbiAgQ29vcmRpbmF0ZXMzRFxufSBmcm9tICcuLi9UeXBlcy9HcmlkQW5hbHlzaXNUeXBlcyc7XG5cbmludGVyZmFjZSBVc2VHcmlkQW5hbHlzaXNPcHRpb25zIHtcbiAgb25Qcm9ncmVzcz86IChwcm9ncmVzczogbnVtYmVyKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlR3JpZEFuYWx5c2lzKG9wdGlvbnM6IFVzZUdyaWRBbmFseXNpc09wdGlvbnMgPSB7fSkge1xuICBjb25zdCB7IG1hcCwgZWxldmF0aW9uU2VydmljZSB9ID0gdXNlTWFwQ29udGV4dCgpO1xuICBjb25zdCB7IHNhbXBsZUZsaWdodFBhdGggfSA9IHVzZUZsaWdodFBhdGhTYW1wbGluZygpO1xuICBjb25zdCB7IFxuICAgIGdjc0xvY2F0aW9uLCBcbiAgICBvYnNlcnZlckxvY2F0aW9uLCBcbiAgICByZXBlYXRlckxvY2F0aW9uLFxuICAgIGdjc0VsZXZhdGlvbk9mZnNldCxcbiAgICBvYnNlcnZlckVsZXZhdGlvbk9mZnNldCxcbiAgICByZXBlYXRlckVsZXZhdGlvbk9mZnNldFxuICB9ID0gdXNlTWFya2Vyc0NvbnRleHQoKTtcbiAgY29uc3QgeyBcbiAgICBncmlkU2l6ZSwgXG4gICAgZWxvc0dyaWRSYW5nZSxcbiAgICBpc0FuYWx5emluZywgXG4gICAgc2V0SXNBbmFseXppbmcsXG4gICAgc2V0UmVzdWx0cyxcbiAgICBzZXRFcnJvcixcbiAgICBzZXRQcm9ncmVzczogc2V0R2xvYmFsUHJvZ3Jlc3NcbiAgfSA9IHVzZUxPU0FuYWx5c2lzKCk7XG5cbiAgLy8gU3RhdGUgYW5kIHJlZnNcbiAgY29uc3QgW2FuYWx5c2lzSW5Qcm9ncmVzcywgc2V0QW5hbHlzaXNJblByb2dyZXNzXSA9IHVzZVN0YXRlPEFuYWx5c2lzVHlwZSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbbGFzdEFuYWx5c2lzVGltZSwgc2V0TGFzdEFuYWx5c2lzVGltZV0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xuICBjb25zdCBbcHJvZ3Jlc3MsIHNldFByb2dyZXNzXSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XG4gIGNvbnN0IGFib3J0Q29udHJvbGxlclJlZiA9IHVzZVJlZjxBYm9ydENvbnRyb2xsZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgY2FjaGVSZWYgPSB1c2VSZWY8TWFwPHN0cmluZywgeyB0aW1lc3RhbXA6IG51bWJlcjsgcmVzdWx0OiBBbmFseXNpc1Jlc3VsdHMgfT4+KG5ldyBNYXAoKSk7XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgcHJvZ3Jlc3MgYW5kIG5vdGlmaWVzIHZpYSBjYWxsYmFja1xuICAgKi9cbiAgY29uc3QgdXBkYXRlUHJvZ3Jlc3MgPSB1c2VDYWxsYmFjaygodmFsdWU6IG51bWJlcikgPT4ge1xuICAgIHNldFByb2dyZXNzKHZhbHVlKTtcbiAgICBzZXRHbG9iYWxQcm9ncmVzcyh2YWx1ZSk7XG4gICAgaWYgKG9wdGlvbnMub25Qcm9ncmVzcykge1xuICAgICAgb3B0aW9ucy5vblByb2dyZXNzKHZhbHVlKTtcbiAgICB9XG4gIH0sIFtvcHRpb25zLCBzZXRHbG9iYWxQcm9ncmVzc10pO1xuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgYWZ0ZXIgYW5hbHlzaXNcbiAgICovXG4gIGNvbnN0IGNsZWFudXBBbmFseXNpcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRBbmFseXNpc0luUHJvZ3Jlc3MobnVsbCk7XG4gICAgc2V0UHJvZ3Jlc3MoMCk7XG4gICAgaWYgKGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50KSB7XG4gICAgICBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLyoqXG4gICAqIEFib3J0cyBhbnkgcnVubmluZyBhbmFseXNpc1xuICAgKi9cbiAgY29uc3QgYWJvcnRBbmFseXNpcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50LmFib3J0KCk7XG4gICAgICBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICAgIHNldElzQW5hbHl6aW5nKGZhbHNlKTtcbiAgICBjbGVhbnVwQW5hbHlzaXMoKTtcbiAgfSwgW2NsZWFudXBBbmFseXNpcywgc2V0SXNBbmFseXppbmddKTtcblxuICAvKipcbiAgICogVmlzdWFsaXplcyBncmlkIGNlbGxzIG9uIHRoZSBtYXBcbiAgICovXG4gIGNvbnN0IHZpc3VhbGl6ZUdyaWQgPSB1c2VDYWxsYmFjayhcbiAgICAoYW5hbHlzaXNSZXN1bHRzOiBBbmFseXNpc1Jlc3VsdHMsIGxheWVySWQ6IHN0cmluZyA9IE1BUF9MQVlFUlMuRUxPU19HUklEKSA9PiB7XG4gICAgICBpZiAoIW1hcCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdNYXAgbm90IGluaXRpYWxpemVkLCBjYW5ub3QgdmlzdWFsaXplIGdyaWQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGdlb2pzb246IEdlb0pTT04uRmVhdHVyZUNvbGxlY3Rpb24gPSB7XG4gICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgICBmZWF0dXJlczogYW5hbHlzaXNSZXN1bHRzLmNlbGxzLm1hcCgoY2VsbCkgPT4gKHtcbiAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJyxcbiAgICAgICAgICAgIGdlb21ldHJ5OiBjZWxsLmdlb21ldHJ5LFxuICAgICAgICAgICAgcHJvcGVydGllczogY2VsbC5wcm9wZXJ0aWVzLFxuICAgICAgICAgIH0pKSxcbiAgICAgICAgfTtcbiAgXG4gICAgICAgIGlmIChtYXAuZ2V0U291cmNlKGxheWVySWQpKSB7XG4gICAgICAgICAgY29uc3Qgc291cmNlID0gbWFwLmdldFNvdXJjZShsYXllcklkKSBhcyBtYXBib3hnbC5HZW9KU09OU291cmNlO1xuICAgICAgICAgIHNvdXJjZS5zZXREYXRhKGdlb2pzb24pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbWFwLmFkZFNvdXJjZShsYXllcklkLCB7XG4gICAgICAgICAgdHlwZTogJ2dlb2pzb24nLFxuICAgICAgICAgIGRhdGE6IGdlb2pzb24sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIERlZmluZSBjb2xvciByYW1wIGJhc2VkIG9uIGxheWVyIHR5cGVcbiAgICAgICAgY29uc3QgY29sb3JSYW1wID0gbGF5ZXJJZCA9PT0gTUFQX0xBWUVSUy5NRVJHRURfVklTSUJJTElUWVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAnaW50ZXJwb2xhdGUnLFxuICAgICAgICAgICAgICBbJ2xpbmVhciddLFxuICAgICAgICAgICAgICBbJ2dldCcsICd2aXNpYmlsaXR5J10sXG4gICAgICAgICAgICAgIDAsICcjZDMyZjJmJywgICAvLyBSZWQ6IE5vIHN0YXRpb25zXG4gICAgICAgICAgICAgIDUwLCAnIzE5NzZkMicsICAvLyBCbHVlOiBPbmUgc3RhdGlvblxuICAgICAgICAgICAgICAxMDAsICcjN2NiMzQyJyAgLy8gR3JlZW46IFR3byBvciBtb3JlIHN0YXRpb25zXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICdpbnRlcnBvbGF0ZScsXG4gICAgICAgICAgICAgIFsnbGluZWFyJ10sXG4gICAgICAgICAgICAgIFsnZ2V0JywgJ3Zpc2liaWxpdHknXSxcbiAgICAgICAgICAgICAgMCwgJyNkMzJmMmYnLCAgIC8vIFJlZFxuICAgICAgICAgICAgICAyNSwgJyNmNTdjMDAnLCAgLy8gT3JhbmdlXG4gICAgICAgICAgICAgIDUwLCAnI2ZiYzAyZCcsICAvLyBZZWxsb3dcbiAgICAgICAgICAgICAgNzUsICcjN2NiMzQyJywgIC8vIEdyZWVuXG4gICAgICAgICAgICAgIDEwMCwgJyMxOTc2ZDInICAvLyBCbHVlXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgIG1hcC5hZGRMYXllcih7XG4gICAgICAgICAgaWQ6IGxheWVySWQsXG4gICAgICAgICAgdHlwZTogJ2ZpbGwnLFxuICAgICAgICAgIHNvdXJjZTogbGF5ZXJJZCxcbiAgICAgICAgICBwYWludDoge1xuICAgICAgICAgICAgJ2ZpbGwtY29sb3InOiBjb2xvclJhbXAsXG4gICAgICAgICAgICAnZmlsbC1vcGFjaXR5JzogW1xuICAgICAgICAgICAgICAnaW50ZXJwb2xhdGUnLFxuICAgICAgICAgICAgICBbJ2xpbmVhciddLFxuICAgICAgICAgICAgICBbJ3pvb20nXSxcbiAgICAgICAgICAgICAgMTAsIDAuNyxcbiAgICAgICAgICAgICAgMTUsIDAuNSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2V0IHVwIHBvcHVwXG4gICAgICAgIGNvbnN0IG9uTW91c2VNb3ZlID0gKGU6IG1hcGJveGdsLk1hcE1vdXNlRXZlbnQgJiBtYXBib3hnbC5FdmVudERhdGEpID0+IHtcbiAgICAgICAgICBpZiAoZS5mZWF0dXJlcyAmJiBlLmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGZlYXR1cmUgPSBlLmZlYXR1cmVzWzBdO1xuICAgICAgICAgICAgY29uc3QgdmlzID0gZmVhdHVyZS5wcm9wZXJ0aWVzPy52aXNpYmlsaXR5Py50b0ZpeGVkKDEpO1xuICAgICAgICAgICAgY29uc3QgZWxldiA9IGZlYXR1cmUucHJvcGVydGllcz8uZWxldmF0aW9uPy50b0ZpeGVkKDEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAob25Nb3VzZU1vdmUucG9wdXApIHtcbiAgICAgICAgICAgICAgb25Nb3VzZU1vdmUucG9wdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG9uTW91c2VNb3ZlLnBvcHVwID0gbmV3IG1hcGJveGdsLlBvcHVwKHtcbiAgICAgICAgICAgICAgY2xvc2VCdXR0b246IGZhbHNlLFxuICAgICAgICAgICAgICBjbG9zZU9uTW92ZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5zZXRMbmdMYXQoZS5sbmdMYXQpXG4gICAgICAgICAgICAgIC5zZXRIVE1MKGBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmctd2hpdGUgdGV4dC1ibGFjayBwLTIgcm91bmRlZCBzaGFkb3dcIj5cbiAgICAgICAgICAgICAgICAgIDxzdHJvbmc+VmlzaWJpbGl0eSBBbmFseXNpczwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgPGhyIGNsYXNzPVwibXktMSBib3JkZXItZ3JheS0zMDBcIi8+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZCBncmlkLWNvbHMtMiBnYXAtMVwiPlxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5WaXNpYmlsaXR5Ojwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz4ke3ZpcyB8fCAnTi9BJ30lPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPlRlcnJhaW4gRWxldmF0aW9uOjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz4ke2VsZXYgfHwgJ04vQSd9bTwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5EaXN0YW5jZSBSYW5nZTo8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+JHtlbG9zR3JpZFJhbmdlfW08L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBgKVxuICAgICAgICAgICAgICAuYWRkVG8obWFwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgdXAgZXZlbnQgaGFuZGxpbmdcbiAgICAgICAgb25Nb3VzZU1vdmUucG9wdXAgPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgb25Nb3VzZUxlYXZlID0gKCkgPT4ge1xuICAgICAgICAgIGlmIChvbk1vdXNlTW92ZS5wb3B1cCkge1xuICAgICAgICAgICAgb25Nb3VzZU1vdmUucG9wdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICBvbk1vdXNlTW92ZS5wb3B1cCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgbWFwLm9mZignbW91c2Vtb3ZlJywgbGF5ZXJJZCwgb25Nb3VzZU1vdmUpO1xuICAgICAgICBtYXAub2ZmKCdtb3VzZWxlYXZlJywgbGF5ZXJJZCwgb25Nb3VzZUxlYXZlKTtcbiAgICAgICAgbWFwLm9uKCdtb3VzZW1vdmUnLCBsYXllcklkLCBvbk1vdXNlTW92ZSk7XG4gICAgICAgIG1hcC5vbignbW91c2VsZWF2ZScsIGxheWVySWQsIG9uTW91c2VMZWF2ZSk7XG4gICAgICAgIFxuICAgICAgICBsYXllck1hbmFnZXIucmVnaXN0ZXJMYXllcihsYXllcklkLCB0cnVlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHZpc3VhbGl6YXRpb246JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW21hcCwgZWxvc0dyaWRSYW5nZV1cbiAgKTtcblxuLyoqXG4gKiBPcHRpbWl6ZWQgZmxpZ2h0IHBhdGggdmlzaWJpbGl0eSBhbmFseXNpcyBpbXBsZW1lbnRhdGlvblxuICovXG5jb25zdCBhbmFseXplRmxpZ2h0UGF0aCA9IHVzZUNhbGxiYWNrKFxuICBhc3luYyAoZmxpZ2h0UGxhbjogRmxpZ2h0UGxhbkRhdGEsIG9wdGlvbnM/OiB7IHNhbXBsaW5nUmVzb2x1dGlvbj86IG51bWJlciB9KTogUHJvbWlzZTxBbmFseXNpc1Jlc3VsdHM+ID0+IHtcbiAgICBpZiAoIW1hcCkge1xuICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ01hcCBub3QgaW5pdGlhbGl6ZWQnLCAnTUFQX0lOVEVSQUNUSU9OJyk7XG4gICAgfVxuICAgIFxuICAgIHNldElzQW5hbHl6aW5nKHRydWUpO1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIHNldEFuYWx5c2lzSW5Qcm9ncmVzcyhBbmFseXNpc1R5cGUuRkxJR0hUX1BBVEgpO1xuICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50ID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHVwZGF0ZVByb2dyZXNzKDUpO1xuXG4gICAgICAvLyBWYWxpZGF0ZSBmbGlnaHQgcGxhblxuICAgICAgaWYgKCFmbGlnaHRQbGFuIHx8ICFmbGlnaHRQbGFuLmZlYXR1cmVzIHx8ICFmbGlnaHRQbGFuLmZlYXR1cmVzWzBdIHx8IFxuICAgICAgICAgIGZsaWdodFBsYW4uZmVhdHVyZXNbMF0uZ2VvbWV0cnkudHlwZSAhPT0gJ0xpbmVTdHJpbmcnKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdJbnZhbGlkIGZsaWdodCBwbGFuIGdlb21ldHJ5Jyk7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuXG4gICAgICAvLyBFeHRyYWN0IGZsaWdodCBwYXRoIGZlYXR1cmVcbiAgICAgIGNvbnN0IGZsaWdodFBhdGggPSBmbGlnaHRQbGFuLmZlYXR1cmVzWzBdO1xuICAgICAgXG4gICAgICAvLyBHZXQgdGhlIG9yaWdpbmFsIGNvb3JkaW5hdGVzICh3ZSdsbCBzdGlsbCBuZWVkIHRoZXNlIGZvciBvdGhlciBvcGVyYXRpb25zKVxuICAgICAgY29uc3Qgb3JpZ2luYWxDb29yZGluYXRlcyA9IGZsaWdodFBhdGguZ2VvbWV0cnkuY29vcmRpbmF0ZXMgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXJdW107XG5cbiAgICAgIC8vIERldGVybWluZSBhbHRpdHVkZSBtb2RlXG4gICAgICBjb25zdCB3YXlwb2ludHMgPSBmbGlnaHRQYXRoLnByb3BlcnRpZXM/LndheXBvaW50cyB8fCBbXTtcbiAgICAgIGNvbnN0IGFsdGl0dWRlTW9kZSA9IHdheXBvaW50cy5sZW5ndGggPiAwID8gXG4gICAgICAgIHdheXBvaW50c1swXS5hbHRpdHVkZU1vZGUgOiBcbiAgICAgICAgXCJhYnNvbHV0ZVwiOyAvLyBEZWZhdWx0XG5cbiAgICAgIHVwZGF0ZVByb2dyZXNzKDEwKTtcblxuICAgICAgLy8gR2VuZXJhdGUgc2FtcGxlZCBwb2ludHMgYXQgdGhlIHNwZWNpZmllZCByZXNvbHV0aW9uIHVzaW5nIHlvdXIgaG9vaydzIHNhbXBsZUZsaWdodFBhdGhcbiAgICAgIGNvbnNvbGUubG9nKGBbRmxpZ2h0IFBhdGggQW5hbHlzaXNdIFNhbXBsaW5nIGZsaWdodCBwYXRoIGF0ICR7b3B0aW9ucz8uc2FtcGxpbmdSZXNvbHV0aW9uIHx8IDEwfW0gaW50ZXJ2YWxzYCk7XG4gICAgICBcbiAgICAgIC8vIEV4dHJhY3QgbGluZVN0cmluZyBkaXJlY3RseVxuICAgICAgY29uc3QgbGluZVN0cmluZyA9IGZsaWdodFBhdGguZ2VvbWV0cnk7XG4gICAgICBjb25zdCBzYW1wbGVkUG9pbnRzID0gYXdhaXQgc2FtcGxlRmxpZ2h0UGF0aChsaW5lU3RyaW5nLCB7XG4gICAgICAgIHJlc29sdXRpb246IG9wdGlvbnM/LnNhbXBsaW5nUmVzb2x1dGlvbiB8fCAxMCxcbiAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjazogKHByb2dyZXNzKSA9PiB7XG4gICAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoMTAgKyBwcm9ncmVzcyAqIDAuMSk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBEb24ndCBhYm9ydFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gRXh0cmFjdCBjb29yZGluYXRlcyBmcm9tIHRoZSBzYW1wbGVkIHBvaW50c1xuICAgICAgY29uc3Qgc2FtcGxlZENvb3JkaW5hdGVzOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSA9IHNhbXBsZWRQb2ludHMubWFwKFxuICAgICAgICBwb2ludCA9PiBwb2ludC5wb3NpdGlvblxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYFtGbGlnaHQgUGF0aCBBbmFseXNpc10gR2VuZXJhdGVkICR7c2FtcGxlZENvb3JkaW5hdGVzLmxlbmd0aH0gc2FtcGxlIHBvaW50cyBmcm9tICR7b3JpZ2luYWxDb29yZGluYXRlcy5sZW5ndGh9IG9yaWdpbmFsIHdheXBvaW50c2ApO1xuICAgICAgXG4gICAgICB1cGRhdGVQcm9ncmVzcygyMCk7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGdyaWQgdXNpbmcgb3B0aW1pemVkIGNvcmUgZnVuY3Rpb25cbiAgICAgIGNvbnN0IGNlbGxzID0gYXdhaXQgZ2VuZXJhdGVHcmlkKG1hcCwge1xuICAgICAgICBmbGlnaHRQYXRoLFxuICAgICAgICBlbG9zR3JpZFJhbmdlLFxuICAgICAgICBncmlkU2l6ZSxcbiAgICAgICAgZWxldmF0aW9uU2VydmljZVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghY2VsbHMgfHwgIWNlbGxzLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dlbmVyYXRlZCBncmlkIGlzIGVtcHR5Jyk7XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZVByb2dyZXNzKDQwKTtcblxuICAgICAgLy8gUHJvY2VzcyBjZWxscyBpbiBvcHRpbWl6ZWQgYmF0Y2hlc1xuICAgICAgY29uc3QgY2h1bmtTaXplID0gMTAwOyAvLyBMYXJnZXIgYmF0Y2ggc2l6ZSBmb3IgZWZmaWNpZW5jeVxuICAgICAgY29uc3QgcmVzdWx0czogR3JpZENlbGxbXSA9IFtdO1xuICAgICAgbGV0IHZpc2libGVDZWxsQ291bnQgPSAwO1xuICAgICAgbGV0IHRvdGFsVmlzaWJpbGl0eSA9IDA7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2VsbHMubGVuZ3RoOyBpICs9IGNodW5rU2l6ZSkge1xuICAgICAgICBpZiAoYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQ/LnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0FuYWx5c2lzIGFib3J0ZWQnLCAnVklTSUJJTElUWV9BTkFMWVNJUycpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2h1bmsgPSBjZWxscy5zbGljZShpLCBpICsgY2h1bmtTaXplKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFByb2Nlc3MgY2h1bmsgaW4gcGFyYWxsZWxcbiAgICAgICAgY29uc3QgcHJvY2Vzc2VkQ2h1bmsgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICBjaHVuay5tYXAoYXN5bmMgKGNlbGwpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IFtcbiAgICAgICAgICAgICAgICAoY2VsbC5nZW9tZXRyeS5jb29yZGluYXRlc1swXVswXVswXSArIGNlbGwuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMl1bMF0pIC8gMixcbiAgICAgICAgICAgICAgICAoY2VsbC5nZW9tZXRyeS5jb29yZGluYXRlc1swXVswXVsxXSArIGNlbGwuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMl1bMV0pIC8gMlxuICAgICAgICAgICAgICBdIGFzIENvb3JkaW5hdGVzMkQ7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBJTVBPUlRBTlQgQ0hBTkdFOiBQYXNzIHNhbXBsZWQgY29vcmRpbmF0ZXMgaW5zdGVhZCBvZiBvcmlnaW5hbCBjb29yZGluYXRlc1xuICAgICAgICAgICAgICBjb25zdCB2aXNpYmlsaXR5ID0gYXdhaXQgY2hlY2tGbGlnaHRQYXRoTE9TKFxuICAgICAgICAgICAgICAgIG1hcCxcbiAgICAgICAgICAgICAgICBbY2VudGVyWzBdLCBjZW50ZXJbMV0sIGNlbGwucHJvcGVydGllcy5lbGV2YXRpb24gfHwgMF0sXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxDb29yZGluYXRlcywgLy8gV2Ugc3RpbGwgbmVlZCB0byBwYXNzIHRoZXNlIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICAgIGFsdGl0dWRlTW9kZSwgXG4gICAgICAgICAgICAgICAgICBlbGV2YXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgZ3JpZFJhbmdlOiBlbG9zR3JpZFJhbmdlLFxuICAgICAgICAgICAgICAgICAgc2FtcGxlZENvb3JkaW5hdGVzIC8vIFBhc3MgdGhlIHNhbXBsZWQgY29vcmRpbmF0ZXMgaGVyZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICBpZiAodmlzaWJpbGl0eSA+IDApIHZpc2libGVDZWxsQ291bnQrKztcbiAgICAgICAgICAgICAgdG90YWxWaXNpYmlsaXR5ICs9IHZpc2liaWxpdHk7XG4gICAgICAgIFxuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmNlbGwsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgLi4uY2VsbC5wcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eSxcbiAgICAgICAgICAgICAgICAgIGZ1bGx5VmlzaWJsZTogdmlzaWJpbGl0eSA9PT0gMTAwLFxuICAgICAgICAgICAgICAgICAgbGFzdEFuYWx5emVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgcHJvY2Vzc2luZyBjZWxsOicsIGUpO1xuICAgICAgICAgICAgICByZXR1cm4gY2VsbDsgLy8gUmV0dXJuIHVubW9kaWZpZWQgb24gZXJyb3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIHJlc3VsdHMucHVzaCguLi5wcm9jZXNzZWRDaHVuayk7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzVmFsdWUgPSA0MCArIE1hdGgubWluKDUwLCAoKGkgKyBjaHVua1NpemUpIC8gY2VsbHMubGVuZ3RoKSAqIDUwKTtcbiAgICAgICAgdXBkYXRlUHJvZ3Jlc3MocHJvZ3Jlc3NWYWx1ZSk7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7IC8vIExldCBVSSBicmVhdGhlXG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZVByb2dyZXNzKDk1KTtcblxuICAgICAgY29uc3QgYW5hbHlzaXNUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICBjb25zdCBhbmFseXNpc1Jlc3VsdHM6IEFuYWx5c2lzUmVzdWx0cyA9IHtcbiAgICAgICAgY2VsbHM6IHJlc3VsdHMsXG4gICAgICAgIHN0YXRzOiB7XG4gICAgICAgICAgdG90YWxDZWxsczogY2VsbHMubGVuZ3RoLFxuICAgICAgICAgIHZpc2libGVDZWxsczogdmlzaWJsZUNlbGxDb3VudCxcbiAgICAgICAgICBhdmVyYWdlVmlzaWJpbGl0eTogdG90YWxWaXNpYmlsaXR5IC8gY2VsbHMubGVuZ3RoLFxuICAgICAgICAgIGFuYWx5c2lzVGltZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIHZpc3VhbGl6ZUdyaWQoYW5hbHlzaXNSZXN1bHRzLCBNQVBfTEFZRVJTLkVMT1NfR1JJRCk7XG4gICAgICB1cGRhdGVQcm9ncmVzcygxMDApO1xuICAgICAgc2V0TGFzdEFuYWx5c2lzVGltZShEYXRlLm5vdygpKTtcblxuICAgICAgLy8gTG9nIHZpc2liaWxpdHkgZGlzdHJpYnV0aW9uXG4gICAgICBjb25zdCB2aXNpYmlsaXR5QnVja2V0cyA9IHtcbiAgICAgICAgJ3plcm8nOiAwLFxuICAgICAgICAnMS0yNSc6IDAsXG4gICAgICAgICcyNi01MCc6IDAsXG4gICAgICAgICc1MS03NSc6IDAsXG4gICAgICAgICc3Ni05OSc6IDAsXG4gICAgICAgICdodW5kcmVkJzogMFxuICAgICAgfTtcblxuICAgICAgcmVzdWx0cy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICBjb25zdCB2aXMgPSBjZWxsLnByb3BlcnRpZXMudmlzaWJpbGl0eTtcbiAgICAgICAgaWYgKHZpcyA9PT0gMCkgdmlzaWJpbGl0eUJ1Y2tldHMuemVybysrO1xuICAgICAgICBlbHNlIGlmICh2aXMgPD0gMjUpIHZpc2liaWxpdHlCdWNrZXRzWycxLTI1J10rKztcbiAgICAgICAgZWxzZSBpZiAodmlzIDw9IDUwKSB2aXNpYmlsaXR5QnVja2V0c1snMjYtNTAnXSsrO1xuICAgICAgICBlbHNlIGlmICh2aXMgPD0gNzUpIHZpc2liaWxpdHlCdWNrZXRzWyc1MS03NSddKys7XG4gICAgICAgIGVsc2UgaWYgKHZpcyA8IDEwMCkgdmlzaWJpbGl0eUJ1Y2tldHNbJzc2LTk5J10rKztcbiAgICAgICAgZWxzZSB2aXNpYmlsaXR5QnVja2V0cy5odW5kcmVkKys7XG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coYFtEZWJ1Z10gRmluYWwgdmlzaWJpbGl0eSBkaXN0cmlidXRpb246YCwgdmlzaWJpbGl0eUJ1Y2tldHMpO1xuXG4gICAgICByZXR1cm4gYW5hbHlzaXNSZXN1bHRzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGbGlnaHQgcGF0aCBhbmFseXNpcyBlcnJvcjpgLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY2xlYW51cEFuYWx5c2lzKCk7XG4gICAgICBzZXRJc0FuYWx5emluZyhmYWxzZSk7XG4gICAgfVxuICB9LFxuICBbXG4gICAgbWFwLFxuICAgIGdyaWRTaXplLFxuICAgIGVsb3NHcmlkUmFuZ2UsXG4gICAgdXBkYXRlUHJvZ3Jlc3MsXG4gICAgdmlzdWFsaXplR3JpZCxcbiAgICBjbGVhbnVwQW5hbHlzaXMsXG4gICAgc2V0SXNBbmFseXppbmcsXG4gICAgZWxldmF0aW9uU2VydmljZSxcbiAgICBzYW1wbGVGbGlnaHRQYXRoXG4gIF1cbik7XG5cbiAgLyoqXG4gICAqIEFuYWx5emVzIHZpc2liaWxpdHkgZnJvbSBhIHNpbmdsZSBzdGF0aW9uXG4gICAqL1xuICBjb25zdCBhbmFseXplU3RhdGlvbiA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jICh7XG4gICAgICBzdGF0aW9uVHlwZSxcbiAgICAgIGxvY2F0aW9uLFxuICAgICAgcmFuZ2UsXG4gICAgICBlbGV2YXRpb25PZmZzZXQsXG4gICAgICBtYXJrZXJJZCxcbiAgICAgIGxheWVySWRcbiAgICB9OiB7XG4gICAgICBzdGF0aW9uVHlwZTogXCJnY3NcIiB8IFwib2JzZXJ2ZXJcIiB8IFwicmVwZWF0ZXJcIjtcbiAgICAgIGxvY2F0aW9uOiBMb2NhdGlvbkRhdGE7XG4gICAgICByYW5nZTogbnVtYmVyO1xuICAgICAgZWxldmF0aW9uT2Zmc2V0OiBudW1iZXI7XG4gICAgICBtYXJrZXJJZD86IHN0cmluZztcbiAgICAgIGxheWVySWQ/OiBzdHJpbmc7XG4gICAgfSk6IFByb21pc2U8QW5hbHlzaXNSZXN1bHRzPiA9PiB7XG4gICAgICBpZiAoIW1hcCkge1xuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignTWFwIG5vdCBpbml0aWFsaXplZCcsICdNQVBfSU5URVJBQ1RJT04nKTtcbiAgICAgIH1cbiAgXG4gICAgICBzZXRJc0FuYWx5emluZyh0cnVlKTtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFZhbGlkYXRlIGxvY2F0aW9uIGRhdGFcbiAgICAgICAgaWYgKCFsb2NhdGlvbiB8fCB0eXBlb2YgbG9jYXRpb24ubG5nICE9PSAnbnVtYmVyJyB8fCB0eXBlb2YgbG9jYXRpb24ubGF0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgIHRocm93IGNyZWF0ZUVycm9yKGAke3N0YXRpb25UeXBlLnRvVXBwZXJDYXNlKCl9IGxvY2F0aW9uIG5vdCBzZXQgb3IgaW52YWxpZGAsICdJTlZBTElEX0lOUFVUJyk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIHVwZGF0ZVByb2dyZXNzKDEwKTtcbiAgXG4gICAgICAgIC8vIEdlbmVyYXRlIGdyaWQgdXNpbmcgb3B0aW1pemVkIGNvcmUgZnVuY3Rpb25cbiAgICAgICAgY29uc3QgY2VsbHMgPSBhd2FpdCBnZW5lcmF0ZUdyaWQobWFwLCB7XG4gICAgICAgICAgY2VudGVyOiBbbG9jYXRpb24ubG5nLCBsb2NhdGlvbi5sYXRdLFxuICAgICAgICAgIHJhbmdlLFxuICAgICAgICAgIGdyaWRTaXplLFxuICAgICAgICAgIGVsZXZhdGlvblNlcnZpY2VcbiAgICAgICAgfSk7XG4gIFxuICAgICAgICBpZiAoIWNlbGxzIHx8ICFjZWxscy5sZW5ndGgpIHtcbiAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignRmFpbGVkIHRvIGdlbmVyYXRlIGdyaWQnLCAnR1JJRF9HRU5FUkFUSU9OJyk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIHVwZGF0ZVByb2dyZXNzKDQwKTtcblxuICAgICAgICAvLyBHZXQgb2JzZXJ2ZXIgZWxldmF0aW9uXG4gICAgICAgIGNvbnN0IHN0YXRpb25FbGV2YXRpb24gPSBsb2NhdGlvbi5lbGV2YXRpb24gPz8gXG4gICAgICAgICAgYXdhaXQgZWxldmF0aW9uU2VydmljZT8uZ2V0RWxldmF0aW9uKGxvY2F0aW9uLmxuZywgbG9jYXRpb24ubGF0KSA/PyAwO1xuXG4gICAgICAgIGNvbnN0IHN0YXRpb25Qb3NpdGlvbjogQ29vcmRpbmF0ZXMzRCA9IFtcbiAgICAgICAgICBsb2NhdGlvbi5sbmcsXG4gICAgICAgICAgbG9jYXRpb24ubGF0LFxuICAgICAgICAgIHN0YXRpb25FbGV2YXRpb24gKyBlbGV2YXRpb25PZmZzZXQsXG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gUHJvY2VzcyBpbiBvcHRpbWl6ZWQgYmF0Y2hlc1xuICAgICAgICBjb25zdCBjaHVua1NpemUgPSAxMDA7XG4gICAgICAgIGxldCB2aXNpYmxlQ2VsbHMgPSAwO1xuICAgICAgICBsZXQgdG90YWxWaXNpYmlsaXR5ID0gMDtcbiAgICAgICAgY29uc3QgdXBkYXRlZENlbGxzOiBHcmlkQ2VsbFtdID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjZWxscy5sZW5ndGg7IGkgKz0gY2h1bmtTaXplKSB7XG4gICAgICAgICAgaWYgKGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50Py5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0FuYWx5c2lzIGFib3J0ZWQnLCAnVklTSUJJTElUWV9BTkFMWVNJUycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGNodW5rID0gY2VsbHMuc2xpY2UoaSwgaSArIGNodW5rU2l6ZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUHJvY2VzcyBpbiBwYXJhbGxlbFxuICAgICAgICAgIGNvbnN0IGNodW5rUmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgY2h1bmsubWFwKGFzeW5jIChjZWxsKSA9PiB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VudGVyID0gW1xuICAgICAgICAgICAgICAgICAgKGNlbGwuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMF1bMF0gKyBjZWxsLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdWzJdWzBdKSAvIDIsXG4gICAgICAgICAgICAgICAgICAoY2VsbC5nZW9tZXRyeS5jb29yZGluYXRlc1swXVswXVsxXSArIGNlbGwuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMl1bMV0pIC8gMlxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gYXdhaXQgY2hlY2tTdGF0aW9uTE9TKFxuICAgICAgICAgICAgICAgICAgbWFwLFxuICAgICAgICAgICAgICAgICAgc3RhdGlvblBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgW2NlbnRlclswXSwgY2VudGVyWzFdLCBjZWxsLnByb3BlcnRpZXMuZWxldmF0aW9uIHx8IDBdLFxuICAgICAgICAgICAgICAgICAgeyBlbGV2YXRpb25TZXJ2aWNlIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdmlzaWJpbGl0eSA9IGlzVmlzaWJsZSA/IDEwMCA6IDA7XG4gICAgICAgICAgICAgICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgdmlzaWJsZUNlbGxzKys7XG4gICAgICAgICAgICAgICAgICB0b3RhbFZpc2liaWxpdHkgKz0gMTAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5jZWxsLFxuICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5jZWxsLnByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHksXG4gICAgICAgICAgICAgICAgICAgIGZ1bGx5VmlzaWJsZTogaXNWaXNpYmxlLFxuICAgICAgICAgICAgICAgICAgICBsYXN0QW5hbHl6ZWQ6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHByb2Nlc3NpbmcgY2VsbDonLCBlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2VsbDsgLy8gUmV0dXJuIHVubW9kaWZpZWQgb24gZXJyb3JcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgdXBkYXRlZENlbGxzLnB1c2goLi4uY2h1bmtSZXN1bHRzKTtcbiAgICAgICAgICBjb25zdCBwcm9ncmVzc1ZhbHVlID0gNDAgKyAoKGkgKyBjaHVua1NpemUpIC8gY2VsbHMubGVuZ3RoKSAqIDUwO1xuICAgICAgICAgIHVwZGF0ZVByb2dyZXNzKHByb2dyZXNzVmFsdWUpO1xuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7IC8vIExldCBVSSBicmVhdGhlXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhbmFseXNpc1RpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoOTUpO1xuXG4gICAgICAvLyBVc2UgdGhlIHByb3ZpZGVkIGxheWVySWQgb3IgZ2VuZXJhdGUgYSBkZWZhdWx0IG9uZVxuICAgICAgY29uc3QgZWZmZWN0aXZlTGF5ZXJJZCA9IGxheWVySWQgfHwgXG4gICAgICAgIChzdGF0aW9uVHlwZSA9PT0gJ2djcycgPyBNQVBfTEFZRVJTLkdDU19HUklEIDpcbiAgICAgICAgIHN0YXRpb25UeXBlID09PSAnb2JzZXJ2ZXInID8gTUFQX0xBWUVSUy5PQlNFUlZFUl9HUklEIDpcbiAgICAgICAgIE1BUF9MQVlFUlMuUkVQRUFURVJfR1JJRCk7XG5cbiAgICAgIGNvbnN0IGFuYWx5c2lzUmVzdWx0czogQW5hbHlzaXNSZXN1bHRzID0ge1xuICAgICAgICBjZWxsczogdXBkYXRlZENlbGxzLFxuICAgICAgICBzdGF0czoge1xuICAgICAgICAgIHZpc2libGVDZWxsczogdmlzaWJsZUNlbGxzLFxuICAgICAgICAgIHRvdGFsQ2VsbHM6IGNlbGxzLmxlbmd0aCxcbiAgICAgICAgICBhdmVyYWdlVmlzaWJpbGl0eTogY2VsbHMubGVuZ3RoID4gMCA/IHRvdGFsVmlzaWJpbGl0eSAvIGNlbGxzLmxlbmd0aCA6IDAsXG4gICAgICAgICAgYW5hbHlzaXNUaW1lLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgLy8gVmlzdWFsaXplIHdpdGggdGhlIGVmZmVjdGl2ZSBsYXllciBJRFxuICAgICAgdmlzdWFsaXplR3JpZChhbmFseXNpc1Jlc3VsdHMsIGVmZmVjdGl2ZUxheWVySWQpO1xuICAgICAgXG4gICAgICB1cGRhdGVQcm9ncmVzcygxMDApO1xuICAgICAgc2V0TGFzdEFuYWx5c2lzVGltZShEYXRlLm5vdygpKTtcbiAgICAgIHJldHVybiBhbmFseXNpc1Jlc3VsdHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFN0YXRpb24gYW5hbHlzaXMgZXJyb3I6YCwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHVwZGF0ZVByb2dyZXNzKDApO1xuICAgICAgY2xlYW51cEFuYWx5c2lzKCk7XG4gICAgICBzZXRJc0FuYWx5emluZyhmYWxzZSk7XG4gICAgfVxuICB9LFxuICAgIFtcbiAgICAgIG1hcCxcbiAgICAgIGdyaWRTaXplLFxuICAgICAgZWxldmF0aW9uU2VydmljZSxcbiAgICAgIHVwZGF0ZVByb2dyZXNzLFxuICAgICAgdmlzdWFsaXplR3JpZCxcbiAgICAgIGNsZWFudXBBbmFseXNpcyxcbiAgICAgIHNldElzQW5hbHl6aW5nXG4gICAgXVxuICApO1xuXG4gIC8qKlxuICAgKiBPcHRpbWl6ZWQgbWVyZ2VkIGFuYWx5c2lzIGltcGxlbWVudGF0aW9uXG4gICAqL1xuICBjb25zdCBhbmFseXplTWVyZ2VkID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKHsgc3RhdGlvbnMgfTogeyBcbiAgICAgIHN0YXRpb25zOiBBcnJheTx7XG4gICAgICAgIHR5cGU6IFwiZ2NzXCIgfCBcIm9ic2VydmVyXCIgfCBcInJlcGVhdGVyXCI7XG4gICAgICAgIGxvY2F0aW9uOiBMb2NhdGlvbkRhdGE7XG4gICAgICAgIHJhbmdlOiBudW1iZXI7XG4gICAgICAgIGVsZXZhdGlvbk9mZnNldDogbnVtYmVyO1xuICAgICAgfT4gXG4gICAgfSk6IFByb21pc2U8QW5hbHlzaXNSZXN1bHRzPiA9PiB7XG4gICAgICBpZiAoIW1hcCkge1xuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignTWFwIG5vdCBpbml0aWFsaXplZCcsICdNQVBfSU5URVJBQ1RJT04nKTtcbiAgICAgIH1cblxuICAgICAgc2V0SXNBbmFseXppbmcodHJ1ZSk7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFzdGF0aW9ucyB8fCAhQXJyYXkuaXNBcnJheShzdGF0aW9ucykgfHwgc3RhdGlvbnMubGVuZ3RoIDwgMikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0IGxlYXN0IHR3byBzdGF0aW9ucyBhcmUgcmVxdWlyZWQgZm9yIG1lcmdlZCBhbmFseXNpc1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFZhbGlkYXRlIHN0YXRpb25zXG4gICAgICAgIGZvciAoY29uc3Qgc3RhdGlvbiBvZiBzdGF0aW9ucykge1xuICAgICAgICAgIGlmICghc3RhdGlvbi5sb2NhdGlvbiB8fCBcbiAgICAgICAgICAgICAgdHlwZW9mIHN0YXRpb24ubG9jYXRpb24ubG5nICE9PSAnbnVtYmVyJyB8fCBcbiAgICAgICAgICAgICAgdHlwZW9mIHN0YXRpb24ubG9jYXRpb24ubGF0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGxvY2F0aW9uIGRhdGEgZm9yIHN0YXRpb24gKCR7c3RhdGlvbi50eXBlfSlgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHVwZGF0ZVByb2dyZXNzKDEwKTtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBjb21iaW5lZCBib3VuZGluZyBib3hcbiAgICAgICAgY29uc3QgYmJveCA9IGdlbmVyYXRlQ29tYmluZWRCb3VuZGluZ0JveChzdGF0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNlbnRlciA9IFsoYmJveFswXSArIGJib3hbMl0pIC8gMiwgKGJib3hbMV0gKyBiYm94WzNdKSAvIDJdIGFzIENvb3JkaW5hdGVzMkQ7XG4gICAgICAgIGNvbnN0IG1heFJhbmdlID0gTWF0aC5tYXgoLi4uc3RhdGlvbnMubWFwKHMgPT4gcy5yYW5nZSkpO1xuICAgICAgICBcbiAgICAgICAgLy8gUHJlcGFyZSBzdGF0aW9uIHBvc2l0aW9ucyB3aXRoIGVsZXZhdGlvbnNcbiAgICAgICAgY29uc3Qgc3RhdGlvblBvc2l0aW9ucyA9IGF3YWl0IFByb21pc2UuYWxsKHN0YXRpb25zLm1hcChhc3luYyAoc3RhdGlvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGVsZXYgPSBzdGF0aW9uLmxvY2F0aW9uLmVsZXZhdGlvbiA/PyBcbiAgICAgICAgICAgIGF3YWl0IGVsZXZhdGlvblNlcnZpY2U/LmdldEVsZXZhdGlvbihzdGF0aW9uLmxvY2F0aW9uLmxuZywgc3RhdGlvbi5sb2NhdGlvbi5sYXQpID8/IDA7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IHN0YXRpb24udHlwZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBbXG4gICAgICAgICAgICAgIHN0YXRpb24ubG9jYXRpb24ubG5nLFxuICAgICAgICAgICAgICBzdGF0aW9uLmxvY2F0aW9uLmxhdCxcbiAgICAgICAgICAgICAgZWxldiArIHN0YXRpb24uZWxldmF0aW9uT2Zmc2V0XG4gICAgICAgICAgICBdIGFzIENvb3JkaW5hdGVzM0RcbiAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgICAgIFxuICAgICAgICB1cGRhdGVQcm9ncmVzcygyMCk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZW5lcmF0ZSBncmlkIC0gdXNlIGxhcmdlciBncmlkIHNpemUgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICAgICAgICBjb25zdCBjZWxscyA9IGF3YWl0IGdlbmVyYXRlR3JpZChtYXAsIHtcbiAgICAgICAgICBjZW50ZXIsXG4gICAgICAgICAgcmFuZ2U6IG1heFJhbmdlICogMS4xLCAvLyBTbGlnaHRseSBsYXJnZXIgdG8gZW5zdXJlIGNvdmVyYWdlXG4gICAgICAgICAgZ3JpZFNpemUsXG4gICAgICAgICAgZWxldmF0aW9uU2VydmljZVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGlmICghY2VsbHMubGVuZ3RoKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZ2VuZXJhdGUgZ3JpZCBmb3IgbWVyZ2VkIGFuYWx5c2lzJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHVwZGF0ZVByb2dyZXNzKDQwKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFByb2Nlc3MgaW4gbW9yZSBlZmZpY2llbnQgYmF0Y2hlc1xuICAgICAgICBjb25zdCBjaHVua1NpemUgPSAxMDA7XG4gICAgICAgIGxldCB2aXNpYmxlQ2VsbHMgPSAwO1xuICAgICAgICBsZXQgdmlzaWJpbGl0eVN1bSA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNlbGxzLmxlbmd0aDsgaSArPSBjaHVua1NpemUpIHtcbiAgICAgICAgICBpZiAoYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQ/LnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignQW5hbHlzaXMgYWJvcnRlZCcsICdWSVNJQklMSVRZX0FOQUxZU0lTJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGNodW5rID0gY2VsbHMuc2xpY2UoaSwgaSArIGNodW5rU2l6ZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUHJvY2VzcyBiYXRjaCBpbiBwYXJhbGxlbFxuICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGNodW5rLm1hcChhc3luYyAoY2VsbCwgY2VsbEluZGV4KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCBjZW50ZXIgPSBbXG4gICAgICAgICAgICAgICAgKGNlbGwuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMF1bMF0gKyBjZWxsLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdWzJdWzBdKSAvIDIsXG4gICAgICAgICAgICAgICAgKGNlbGwuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMF1bMV0gKyBjZWxsLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdWzJdWzFdKSAvIDJcbiAgICAgICAgICAgICAgXSBhcyBDb29yZGluYXRlczJEO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0UG9zaXRpb246IENvb3JkaW5hdGVzM0QgPSBbXG4gICAgICAgICAgICAgICAgY2VudGVyWzBdLFxuICAgICAgICAgICAgICAgIGNlbnRlclsxXSxcbiAgICAgICAgICAgICAgICBjZWxsLnByb3BlcnRpZXMuZWxldmF0aW9uIHx8IDBcbiAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGxldCB2aXNpYmxlU3RhdGlvbkNvdW50ID0gMDtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIENoZWNrIHZpc2liaWxpdHkgZnJvbSBlYWNoIHN0YXRpb25cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBzdGF0aW9uIG9mIHN0YXRpb25Qb3NpdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1Zpc2libGUgPSBhd2FpdCBjaGVja1N0YXRpb25MT1MoXG4gICAgICAgICAgICAgICAgICBtYXAsXG4gICAgICAgICAgICAgICAgICBzdGF0aW9uLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0UG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICB7IGVsZXZhdGlvblNlcnZpY2UgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgdmlzaWJsZVN0YXRpb25Db3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gU2V0IHZpc2liaWxpdHkgYmFzZWQgb24gbnVtYmVyIG9mIHZpc2libGUgc3RhdGlvbnNcbiAgICAgICAgICAgICAgbGV0IHZpc2liaWxpdHlQZXJjZW50YWdlID0gMDtcbiAgICAgICAgICAgICAgaWYgKHZpc2libGVTdGF0aW9uQ291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5UGVyY2VudGFnZSA9IDUwO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZpc2libGVTdGF0aW9uQ291bnQgPj0gMikge1xuICAgICAgICAgICAgICAgIHZpc2liaWxpdHlQZXJjZW50YWdlID0gMTAwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBjZWxsLnByb3BlcnRpZXMudmlzaWJpbGl0eSA9IHZpc2liaWxpdHlQZXJjZW50YWdlO1xuICAgICAgICAgICAgICBjZWxsLnByb3BlcnRpZXMuZnVsbHlWaXNpYmxlID0gdmlzaWJsZVN0YXRpb25Db3VudCA+PSBzdGF0aW9uUG9zaXRpb25zLmxlbmd0aDtcbiAgICAgICAgICAgICAgY2VsbC5wcm9wZXJ0aWVzLnZpc2libGVTdGF0aW9uQ291bnQgPSB2aXNpYmxlU3RhdGlvbkNvdW50O1xuICAgICAgICAgICAgICBjZWxsLnByb3BlcnRpZXMubGFzdEFuYWx5emVkID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmICh2aXNpYmxlU3RhdGlvbkNvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIHZpc2libGVDZWxscysrO1xuICAgICAgICAgICAgICAgIHZpc2liaWxpdHlTdW0gKz0gdmlzaWJpbGl0eVBlcmNlbnRhZ2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBhbmFseXppbmcgbWVyZ2VkIGNlbGw6JywgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHByb2dyZXNzVmFsdWUgPSA0MCArICgoaSArIGNodW5rU2l6ZSkgLyBjZWxscy5sZW5ndGgpICogNTA7XG4gICAgICAgICAgdXBkYXRlUHJvZ3Jlc3MocHJvZ3Jlc3NWYWx1ZSk7XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTsgLy8gTGV0IFVJIGJyZWF0aGVcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoOTUpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYW5hbHlzaXNUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICAgIGNvbnN0IGFuYWx5c2lzUmVzdWx0czogQW5hbHlzaXNSZXN1bHRzID0ge1xuICAgICAgICAgIGNlbGxzLFxuICAgICAgICAgIHN0YXRzOiB7XG4gICAgICAgICAgICB2aXNpYmxlQ2VsbHMsXG4gICAgICAgICAgICB0b3RhbENlbGxzOiBjZWxscy5sZW5ndGgsXG4gICAgICAgICAgICBhdmVyYWdlVmlzaWJpbGl0eTogY2VsbHMubGVuZ3RoID4gMCA/IHZpc2liaWxpdHlTdW0gLyBjZWxscy5sZW5ndGggOiAwLFxuICAgICAgICAgICAgYW5hbHlzaXNUaW1lLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB2aXN1YWxpemVHcmlkKGFuYWx5c2lzUmVzdWx0cywgTUFQX0xBWUVSUy5NRVJHRURfVklTSUJJTElUWSk7XG4gICAgICAgIHVwZGF0ZVByb2dyZXNzKDEwMCk7XG4gICAgICAgIHNldExhc3RBbmFseXNpc1RpbWUoRGF0ZS5ub3coKSk7XG4gICAgICAgIHJldHVybiBhbmFseXNpc1Jlc3VsdHM7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBNZXJnZWQgYW5hbHlzaXMgZXJyb3I6YCwgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHVwZGF0ZVByb2dyZXNzKDApO1xuICAgICAgICBjbGVhbnVwQW5hbHlzaXMoKTtcbiAgICAgICAgc2V0SXNBbmFseXppbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW1xuICAgICAgbWFwLFxuICAgICAgZ3JpZFNpemUsXG4gICAgICBlbGV2YXRpb25TZXJ2aWNlLFxuICAgICAgdXBkYXRlUHJvZ3Jlc3MsXG4gICAgICB2aXN1YWxpemVHcmlkLFxuICAgICAgY2xlYW51cEFuYWx5c2lzLFxuICAgICAgc2V0SXNBbmFseXppbmdcbiAgICBdXG4gICk7XG5cbi8qKlxuICogQ2hlY2tzIExPUyBiZXR3ZWVuIHR3byBzdGF0aW9ucyAtIGVpdGhlciBieSBtYXJrZXIgSURzIG9yIHN0YXRpb24gdHlwZXNcbiAqL1xuY29uc3QgY2hlY2tTdGF0aW9uVG9TdGF0aW9uTE9TID0gdXNlQ2FsbGJhY2soXG4gIGFzeW5jIChcbiAgICBzb3VyY2VTdGF0aW9uRGF0YTogc3RyaW5nIHwgeyB0eXBlOiBzdHJpbmc7IGxvY2F0aW9uOiBMb2NhdGlvbkRhdGE7IGVsZXZhdGlvbk9mZnNldDogbnVtYmVyIH0sXG4gICAgdGFyZ2V0U3RhdGlvbkRhdGE6IHN0cmluZyB8IHsgdHlwZTogc3RyaW5nOyBsb2NhdGlvbjogTG9jYXRpb25EYXRhOyBlbGV2YXRpb25PZmZzZXQ6IG51bWJlciB9XG4gICk6IFByb21pc2U8eyByZXN1bHQ6IFN0YXRpb25MT1NSZXN1bHQ7IHByb2ZpbGU6IExPU1Byb2ZpbGVQb2ludFtdIH0+ID0+IHtcbiAgICBpZiAoIW1hcCkge1xuICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ01hcCBub3QgaW5pdGlhbGl6ZWQnLCAnTUFQX0lOVEVSQUNUSU9OJyk7XG4gICAgfVxuICAgIFxuICAgIHNldElzQW5hbHl6aW5nKHRydWUpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEhhbmRsZSBzdHJpbmctYmFzZWQgc3RhdGlvbiB0eXBlcyAoYmFja3dhcmQgY29tcGF0aWJpbGl0eSlcbiAgICAgIGlmICh0eXBlb2Ygc291cmNlU3RhdGlvbkRhdGEgPT09ICdzdHJpbmcnICYmIHR5cGVvZiB0YXJnZXRTdGF0aW9uRGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gT3JpZ2luYWwgaW1wbGVtZW50YXRpb24gZm9yIHN0cmluZy1iYXNlZCBzdGF0aW9uIHR5cGVzXG4gICAgICAgIGNvbnN0IHNvdXJjZVN0YXRpb24gPSBzb3VyY2VTdGF0aW9uRGF0YSBhcyAnZ2NzJyB8ICdvYnNlcnZlcicgfCAncmVwZWF0ZXInO1xuICAgICAgICBjb25zdCB0YXJnZXRTdGF0aW9uID0gdGFyZ2V0U3RhdGlvbkRhdGEgYXMgJ2djcycgfCAnb2JzZXJ2ZXInIHwgJ3JlcGVhdGVyJztcblxuICAgICAgICAvLyBMb2cgdGhlIHN0YXRpb24gdHlwZXMgZm9yIGRlYnVnZ2luZ1xuICAgICAgICBjb25zb2xlLmxvZygnVXNpbmcgc3RyaW5nLWJhc2VkIHN0YXRpb24gdHlwZXM6JywgeyBzb3VyY2VTdGF0aW9uLCB0YXJnZXRTdGF0aW9uIH0pO1xuICAgIFxuICAgICAgICBjb25zdCBzdGF0aW9ucyA9IHtcbiAgICAgICAgICBnY3M6IHtcbiAgICAgICAgICAgIGxvY2F0aW9uOiBnY3NMb2NhdGlvbixcbiAgICAgICAgICAgIG9mZnNldDogZ2NzRWxldmF0aW9uT2Zmc2V0LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb2JzZXJ2ZXI6IHtcbiAgICAgICAgICAgIGxvY2F0aW9uOiBvYnNlcnZlckxvY2F0aW9uLFxuICAgICAgICAgICAgb2Zmc2V0OiBvYnNlcnZlckVsZXZhdGlvbk9mZnNldCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcGVhdGVyOiB7XG4gICAgICAgICAgICBsb2NhdGlvbjogcmVwZWF0ZXJMb2NhdGlvbixcbiAgICAgICAgICAgIG9mZnNldDogcmVwZWF0ZXJFbGV2YXRpb25PZmZzZXQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLy8gRW5zdXJlIHNvdXJjZVN0YXRpb24gYW5kIHRhcmdldFN0YXRpb24gYXJlIHZhbGlkIHN0cmluZ3NcbiAgICAgICAgaWYgKCFbJ2djcycsICdvYnNlcnZlcicsICdyZXBlYXRlciddLmluY2x1ZGVzKHNvdXJjZVN0YXRpb24pKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNvdXJjZSBzdGF0aW9uIHR5cGU6ICR7c291cmNlU3RhdGlvbn1gKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZiAoIVsnZ2NzJywgJ29ic2VydmVyJywgJ3JlcGVhdGVyJ10uaW5jbHVkZXModGFyZ2V0U3RhdGlvbikpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdGFyZ2V0IHN0YXRpb24gdHlwZTogJHt0YXJnZXRTdGF0aW9ufWApO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHN0YXRpb25zW3NvdXJjZVN0YXRpb24gYXMga2V5b2YgdHlwZW9mIHN0YXRpb25zXTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gc3RhdGlvbnNbdGFyZ2V0U3RhdGlvbiBhcyBrZXlvZiB0eXBlb2Ygc3RhdGlvbnNdO1xuICAgICAgICBcbiAgICAgICAgLy8gRGVmZW5zaXZlIG51bGwgY2hlY2sgYmVmb3JlIGFjY2Vzc2luZyBwcm9wZXJ0aWVzXG4gICAgICAgIGlmICghc291cmNlPy5sb2NhdGlvbiB8fCAhdGFyZ2V0Py5sb2NhdGlvbikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N0YXRpb24gZGV0YWlsczonLCB7XG4gICAgICAgICAgICBzb3VyY2U6IHsgdHlwZTogc291cmNlU3RhdGlvbiwgZGF0YTogc291cmNlIH0sXG4gICAgICAgICAgICB0YXJnZXQ6IHsgdHlwZTogdGFyZ2V0U3RhdGlvbiwgZGF0YTogdGFyZ2V0IH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJvdGggJHtzb3VyY2VTdGF0aW9ufSBhbmQgJHt0YXJnZXRTdGF0aW9ufSBtdXN0IGJlIG9uIHRoZSBtYXAgd2l0aCB2YWxpZCBsb2NhdGlvbnMuYCk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoMjApO1xuICAgICAgICBcbiAgICAgICAgLy8gVXNlIHRoZSByZW5hbWVkIGNvcmUgZnVuY3Rpb24gdG8gYXZvaWQgcmVjdXJzaW9uXG4gICAgICAgIGNvbnN0IGxvc0RhdGEgPSBhd2FpdCBjb3JlQ2hlY2tTdGF0aW9uVG9TdGF0aW9uTE9TKFxuICAgICAgICAgIG1hcCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsb2NhdGlvbjogc291cmNlLmxvY2F0aW9uLFxuICAgICAgICAgICAgZWxldmF0aW9uT2Zmc2V0OiBzb3VyY2Uub2Zmc2V0XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsb2NhdGlvbjogdGFyZ2V0LmxvY2F0aW9uLFxuICAgICAgICAgICAgZWxldmF0aW9uT2Zmc2V0OiB0YXJnZXQub2Zmc2V0XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IGVsZXZhdGlvblNlcnZpY2UgfVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoMTAwKTtcbiAgICAgICAgcmV0dXJuIGxvc0RhdGE7XG4gICAgICB9IFxuICAgICAgLy8gSGFuZGxlIGRpcmVjdCBvYmplY3Qgc3RhdGlvbiBkYXRhXG4gICAgICBlbHNlIGlmIChcbiAgICAgICAgdHlwZW9mIHNvdXJjZVN0YXRpb25EYXRhID09PSAnb2JqZWN0JyAmJiBzb3VyY2VTdGF0aW9uRGF0YSAhPT0gbnVsbCAmJlxuICAgICAgICB0eXBlb2YgdGFyZ2V0U3RhdGlvbkRhdGEgPT09ICdvYmplY3QnICYmIHRhcmdldFN0YXRpb25EYXRhICE9PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgLy8gTmV3IGltcGxlbWVudGF0aW9uIGZvciBvYmplY3QtYmFzZWQgc3RhdGlvbiBkYXRhXG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBvYmplY3QtYmFzZWQgc3RhdGlvbiBkYXRhJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzb3VyY2VTdGF0aW9uID0gc291cmNlU3RhdGlvbkRhdGEgYXMgeyB0eXBlOiBzdHJpbmc7IGxvY2F0aW9uOiBMb2NhdGlvbkRhdGE7IGVsZXZhdGlvbk9mZnNldDogbnVtYmVyIH07XG4gICAgICAgIGNvbnN0IHRhcmdldFN0YXRpb24gPSB0YXJnZXRTdGF0aW9uRGF0YSBhcyB7IHR5cGU6IHN0cmluZzsgbG9jYXRpb246IExvY2F0aW9uRGF0YTsgZWxldmF0aW9uT2Zmc2V0OiBudW1iZXIgfTtcblxuICAgICAgICAvLyBWYWxpZGF0ZSBpbnB1dCBvYmplY3RzXG4gICAgICAgIGlmICghc291cmNlU3RhdGlvbi5sb2NhdGlvbiB8fCAhdGFyZ2V0U3RhdGlvbi5sb2NhdGlvbikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgc3RhdGlvbiBkYXRhOicsIHsgc291cmNlU3RhdGlvbiwgdGFyZ2V0U3RhdGlvbiB9KTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JvdGggc291cmNlIGFuZCB0YXJnZXQgc3RhdGlvbnMgbXVzdCBoYXZlIHZhbGlkIGxvY2F0aW9uIGRhdGEnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZVByb2dyZXNzKDIwKTtcbiAgICAgICAgXG4gICAgICAgIC8vIERpcmVjdGx5IHVzZSB0aGUgY29yZSBmdW5jdGlvbiB3aXRoIHRoZSBzdGF0aW9uIG9iamVjdHNcbiAgICAgICAgY29uc3QgbG9zRGF0YSA9IGF3YWl0IGNvcmVDaGVja1N0YXRpb25Ub1N0YXRpb25MT1MoXG4gICAgICAgICAgbWFwLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGxvY2F0aW9uOiBzb3VyY2VTdGF0aW9uLmxvY2F0aW9uLFxuICAgICAgICAgICAgZWxldmF0aW9uT2Zmc2V0OiBzb3VyY2VTdGF0aW9uLmVsZXZhdGlvbk9mZnNldFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbG9jYXRpb246IHRhcmdldFN0YXRpb24ubG9jYXRpb24sXG4gICAgICAgICAgICBlbGV2YXRpb25PZmZzZXQ6IHRhcmdldFN0YXRpb24uZWxldmF0aW9uT2Zmc2V0XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IGVsZXZhdGlvblNlcnZpY2UgfVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgdXBkYXRlUHJvZ3Jlc3MoMTAwKTtcbiAgICAgICAgcmV0dXJuIGxvc0RhdGE7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YXRpb24gZGF0YSBmb3JtYXQuIEV4cGVjdGVkIGVpdGhlciBzdGF0aW9uIHR5cGUgc3RyaW5ncyBvciBzdGF0aW9uIG9iamVjdHMuYCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFN0YXRpb24tdG8tc3RhdGlvbiBMT1MgZXJyb3I6YCwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHVwZGF0ZVByb2dyZXNzKDApO1xuICAgICAgY2xlYW51cEFuYWx5c2lzKCk7XG4gICAgICBzZXRJc0FuYWx5emluZyhmYWxzZSk7XG4gICAgfVxuICB9LFxuICBbXG4gICAgbWFwLFxuICAgIGdjc0xvY2F0aW9uLFxuICAgIG9ic2VydmVyTG9jYXRpb24sXG4gICAgcmVwZWF0ZXJMb2NhdGlvbixcbiAgICBnY3NFbGV2YXRpb25PZmZzZXQsXG4gICAgb2JzZXJ2ZXJFbGV2YXRpb25PZmZzZXQsXG4gICAgcmVwZWF0ZXJFbGV2YXRpb25PZmZzZXQsXG4gICAgZWxldmF0aW9uU2VydmljZSxcbiAgICB1cGRhdGVQcm9ncmVzcyxcbiAgICBjbGVhbnVwQW5hbHlzaXMsXG4gICAgc2V0SXNBbmFseXppbmdcbiAgXVxuKTtcbi8qKlxuICogTWFpbiBhbmFseXNpcyBmdW5jdGlvbiB0aGF0IGhhbmRsZXMgYWxsIGFuYWx5c2lzIHR5cGVzXG4gKi9cbmNvbnN0IHJ1bkFuYWx5c2lzID0gdXNlQ2FsbGJhY2soXG4gIGFzeW5jICh0eXBlOiBBbmFseXNpc1R5cGUsIG9wdGlvbnM/OiBhbnkpOiBQcm9taXNlPEFuYWx5c2lzUmVzdWx0cz4gPT4ge1xuICAgIGlmIChpc0FuYWx5emluZykge1xuICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0FuYWx5c2lzIGFscmVhZHkgaW4gcHJvZ3Jlc3MnLCAnSU5WQUxJRF9JTlBVVCcpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBzZXRJc0FuYWx5emluZyh0cnVlKTtcbiAgICAgIHNldEVycm9yKG51bGwpO1xuXG4gICAgICBsZXQgcmVzdWx0OiBBbmFseXNpc1Jlc3VsdHM7XG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIEFuYWx5c2lzVHlwZS5GTElHSFRfUEFUSDpcbiAgICAgICAgICBpZiAoIW9wdGlvbnM/LmZsaWdodFBsYW4pIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdGbGlnaHQgcGxhbiBpcyByZXF1aXJlZCcsICdJTlZBTElEX0lOUFVUJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGFuYWx5emVGbGlnaHRQYXRoKG9wdGlvbnMuZmxpZ2h0UGxhbiwge1xuICAgICAgICAgICAgc2FtcGxpbmdSZXNvbHV0aW9uOiBvcHRpb25zLnNhbXBsaW5nUmVzb2x1dGlvblxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQW5hbHlzaXNUeXBlLlNUQVRJT046XG4gICAgICAgICAgaWYgKCFvcHRpb25zPy5zdGF0aW9uVHlwZSB8fCAhb3B0aW9ucz8ubG9jYXRpb24gfHwgIW9wdGlvbnM/LnJhbmdlKSB7XG4gICAgICAgICAgICB0aHJvdyBjcmVhdGVFcnJvcignU3RhdGlvbiB0eXBlLCBsb2NhdGlvbiwgYW5kIHJhbmdlIGFyZSByZXF1aXJlZCcsICdJTlZBTElEX0lOUFVUJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGFuYWx5emVTdGF0aW9uKHtcbiAgICAgICAgICAgIHN0YXRpb25UeXBlOiBvcHRpb25zLnN0YXRpb25UeXBlLFxuICAgICAgICAgICAgbG9jYXRpb246IG9wdGlvbnMubG9jYXRpb24sXG4gICAgICAgICAgICByYW5nZTogb3B0aW9ucy5yYW5nZSxcbiAgICAgICAgICAgIGVsZXZhdGlvbk9mZnNldDogb3B0aW9ucy5lbGV2YXRpb25PZmZzZXQgfHwgMFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQW5hbHlzaXNUeXBlLk1FUkdFRDpcbiAgICAgICAgICBpZiAoIW9wdGlvbnM/LnN0YXRpb25zIHx8IG9wdGlvbnMuc3RhdGlvbnMubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0F0IGxlYXN0IHR3byBzdGF0aW9ucyBhcmUgcmVxdWlyZWQnLCAnSU5WQUxJRF9JTlBVVCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQgPSBhd2FpdCBhbmFseXplTWVyZ2VkKHsgc3RhdGlvbnM6IG9wdGlvbnMuc3RhdGlvbnMgfSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBBbmFseXNpc1R5cGUuU1RBVElPTl9UT19TVEFUSU9OOlxuICAgICAgICAgIGlmICghb3B0aW9ucz8uc291cmNlU3RhdGlvbiB8fCAhb3B0aW9ucz8udGFyZ2V0U3RhdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ1NvdXJjZSBhbmQgdGFyZ2V0IHN0YXRpb25zIGFyZSByZXF1aXJlZCcsICdJTlZBTElEX0lOUFVUJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFBhc3MgdGhlIHN0YXRpb24gZGF0YSBvYmplY3RzIGRpcmVjdGx5IHRvIGNoZWNrU3RhdGlvblRvU3RhdGlvbkxPU1xuICAgICAgICAgIGNvbnN0IHN0YXRpb25SZXN1bHQgPSBhd2FpdCBjaGVja1N0YXRpb25Ub1N0YXRpb25MT1MoXG4gICAgICAgICAgICBvcHRpb25zLnNvdXJjZVN0YXRpb24sXG4gICAgICAgICAgICBvcHRpb25zLnRhcmdldFN0YXRpb25cbiAgICAgICAgICApO1xuICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgIGNlbGxzOiBbXSxcbiAgICAgICAgICAgIHN0YXRzOiB7XG4gICAgICAgICAgICAgIHZpc2libGVDZWxsczogMCxcbiAgICAgICAgICAgICAgdG90YWxDZWxsczogMCxcbiAgICAgICAgICAgICAgYXZlcmFnZVZpc2liaWxpdHk6IHN0YXRpb25SZXN1bHQucmVzdWx0LmNsZWFyID8gMTAwIDogMCxcbiAgICAgICAgICAgICAgYW5hbHlzaXNUaW1lOiAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0YXRpb25MT1NSZXN1bHQ6IHN0YXRpb25SZXN1bHQucmVzdWx0LFxuICAgICAgICAgICAgcHJvZmlsZTogc3RhdGlvblJlc3VsdC5wcm9maWxlXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IGNyZWF0ZUVycm9yKGBVbnN1cHBvcnRlZCBhbmFseXNpcyB0eXBlOiAke3R5cGV9YCwgJ0lOVkFMSURfSU5QVVQnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29tcGF0aWJsZVJlc3VsdCA9IHtcbiAgICAgICAgY2VsbHM6IHJlc3VsdC5jZWxscyxcbiAgICAgICAgc3RhdHM6IHJlc3VsdC5zdGF0cyxcbiAgICAgICAgc3RhdGlvbkxPU1Jlc3VsdDogcmVzdWx0LnN0YXRpb25MT1NSZXN1bHQsXG4gICAgICAgIC8vIE9taXQgZmxpZ2h0UGF0aFZpc2liaWxpdHkgc2luY2UgdGhlIHR5cGVzIGFyZSBpbmNvbXBhdGlibGVcbiAgICAgIH07XG4gICAgICBzZXRSZXN1bHRzKGNvbXBhdGlibGVSZXN1bHQpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgQW5hbHlzaXMgZXJyb3IsIHR5cGU6ICR7dHlwZX06YCwgZXJyb3IpO1xuICAgICAgc2V0RXJyb3IoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnQW5hbHlzaXMgZmFpbGVkJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNBbmFseXppbmcoZmFsc2UpO1xuICAgIH1cbiAgfSxcbiAgW1xuICAgIGlzQW5hbHl6aW5nLFxuICAgIHNldElzQW5hbHl6aW5nLFxuICAgIHNldEVycm9yLFxuICAgIHNldFJlc3VsdHMsXG4gICAgYW5hbHl6ZUZsaWdodFBhdGgsXG4gICAgYW5hbHl6ZVN0YXRpb24sXG4gICAgYW5hbHl6ZU1lcmdlZCxcbiAgICBjaGVja1N0YXRpb25Ub1N0YXRpb25MT1NcbiAgXVxuKTtcblxuLyoqXG4gKiBBbmFseXplcyB0ZXJyYWluIGdyaWQgd2l0aCBvcHRpbWl6ZWQgcGVyZm9ybWFuY2VcbiAqL1xuY29uc3QgYW5hbHl6ZVRlcnJhaW5HcmlkID0gdXNlQ2FsbGJhY2soXG4gIGFzeW5jIChncmlkQ2VsbHM6IEdyaWRDZWxsW10sIHJlZmVyZW5jZUFsdGl0dWRlOiBudW1iZXIgPSAxMjApOiBQcm9taXNlPEFuYWx5c2lzUmVzdWx0cz4gPT4ge1xuICAgIGlmICghbWFwKSB7XG4gICAgICB0aHJvdyBjcmVhdGVFcnJvcignTWFwIG5vdCBpbml0aWFsaXplZCcsICdNQVBfSU5URVJBQ1RJT04nKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGlzQW5hbHl6aW5nKSB7XG4gICAgICB0aHJvdyBjcmVhdGVFcnJvcignQW5hbHlzaXMgYWxyZWFkeSBpbiBwcm9ncmVzcycsICdJTlZBTElEX0lOUFVUJyk7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBzZXRJc0FuYWx5emluZyh0cnVlKTtcbiAgICAgIHNldEFuYWx5c2lzSW5Qcm9ncmVzcyhBbmFseXNpc1R5cGUuVEVSUkFJTik7XG4gICAgICBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBcbiAgICAgIC8vIFVzZSB0aGUgcmVuYW1lZCBjb3JlIGltcGxlbWVudGF0aW9uXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb3JlQW5hbHl6ZVRlcnJhaW5HcmlkKGdyaWRDZWxscywge1xuICAgICAgICBiYXRjaFNpemU6IDEwMDAsXG4gICAgICAgIHJlZmVyZW5jZUFsdGl0dWRlLFxuICAgICAgICBvblByb2dyZXNzOiAocHJvZ3Jlc3MpID0+IHtcbiAgICAgICAgICB1cGRhdGVQcm9ncmVzcyhwcm9ncmVzcyk7XG4gICAgICAgICAgcmV0dXJuIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50Py5zaWduYWwuYWJvcnRlZCB8fCBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudD8uc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0FuYWx5c2lzIGFib3J0ZWQnLCAnVVNFUl9BQk9SVCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYW5hbHlzaXMgcmVzdWx0cyBpbiBjb21wYXRpYmxlIGZvcm1hdFxuICAgICAgY29uc3QgYW5hbHlzaXNSZXN1bHRzOiBBbmFseXNpc1Jlc3VsdHMgPSB7XG4gICAgICAgIGNlbGxzOiBncmlkQ2VsbHMsXG4gICAgICAgIHN0YXRzOiB7XG4gICAgICAgICAgdmlzaWJsZUNlbGxzOiBncmlkQ2VsbHMubGVuZ3RoLCAvLyBBbGwgY2VsbHMgYXJlIFwidmlzaWJsZVwiIGluIHRoaXMgY29udGV4dFxuICAgICAgICAgIHRvdGFsQ2VsbHM6IGdyaWRDZWxscy5sZW5ndGgsXG4gICAgICAgICAgYXZlcmFnZVZpc2liaWxpdHk6IDEwMCwgLy8gTm90IGFwcGxpY2FibGUgZm9yIHRlcnJhaW4gYW5hbHlzaXNcbiAgICAgICAgICBhbmFseXNpc1RpbWU6IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICAgIHRlcnJhaW5TdGF0czoge1xuICAgICAgICAgICAgaGlnaGVzdEVsZXZhdGlvbjogcmVzdWx0LmhpZ2hlc3RFbGV2YXRpb24sXG4gICAgICAgICAgICBsb3dlc3RFbGV2YXRpb246IHJlc3VsdC5sb3dlc3RFbGV2YXRpb24sXG4gICAgICAgICAgICBhdmVyYWdlRWxldmF0aW9uOiByZXN1bHQuYXZlcmFnZUVsZXZhdGlvbixcbiAgICAgICAgICAgIGVsZXZhdGlvbkRpc3RyaWJ1dGlvbjogcmVzdWx0LmVsZXZhdGlvbkRpc3RyaWJ1dGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGFuYWx5c2lzUmVzdWx0cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgVGVycmFpbiBncmlkIGFuYWx5c2lzIGVycm9yOmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjbGVhbnVwQW5hbHlzaXMoKTtcbiAgICAgIHNldElzQW5hbHl6aW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sXG4gIFttYXAsIGlzQW5hbHl6aW5nLCB1cGRhdGVQcm9ncmVzcywgY2xlYW51cEFuYWx5c2lzLCBzZXRJc0FuYWx5emluZ11cbik7XG5cbiAgLy8gUmV0dXJuIHRoZSBzYW1lIGludGVyZmFjZSBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICByZXR1cm4ge1xuICAgIGlzQW5hbHl6aW5nOiBpc0FuYWx5emluZyB8fCBhbmFseXNpc0luUHJvZ3Jlc3MgIT09IG51bGwsXG4gICAgY3VycmVudEFuYWx5c2lzVHlwZTogYW5hbHlzaXNJblByb2dyZXNzLFxuICAgIHByb2dyZXNzLFxuICAgIGxhc3RBbmFseXNpc1RpbWUsXG4gICAgcnVuQW5hbHlzaXMsXG4gICAgYW5hbHl6ZUZsaWdodFBhdGgsXG4gICAgYW5hbHl6ZVN0YXRpb24sXG4gICAgYW5hbHl6ZU1lcmdlZCxcbiAgICBjaGVja1N0YXRpb25Ub1N0YXRpb25MT1MsXG4gICAgYWJvcnRBbmFseXNpcyxcbiAgICB2aXN1YWxpemVHcmlkLFxuICAgIGFuYWx5emVUZXJyYWluR3JpZFxuICB9O1xufSJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZVN0YXRlIiwidXNlUmVmIiwibWFwYm94Z2wiLCJ1c2VNYXBDb250ZXh0IiwidXNlTWFya2Vyc0NvbnRleHQiLCJ1c2VMT1NBbmFseXNpcyIsImxheWVyTWFuYWdlciIsIk1BUF9MQVlFUlMiLCJnZW5lcmF0ZUdyaWQiLCJjaGVja1N0YXRpb25MT1MiLCJjaGVja0ZsaWdodFBhdGhMT1MiLCJjaGVja1N0YXRpb25Ub1N0YXRpb25MT1MiLCJjb3JlQ2hlY2tTdGF0aW9uVG9TdGF0aW9uTE9TIiwiZ2VuZXJhdGVDb21iaW5lZEJvdW5kaW5nQm94IiwiY3JlYXRlRXJyb3IiLCJhbmFseXplVGVycmFpbkdyaWQiLCJjb3JlQW5hbHl6ZVRlcnJhaW5HcmlkIiwidXNlRmxpZ2h0UGF0aFNhbXBsaW5nIiwiQW5hbHlzaXNUeXBlIiwidXNlR3JpZEFuYWx5c2lzIiwib3B0aW9ucyIsIm1hcCIsImVsZXZhdGlvblNlcnZpY2UiLCJzYW1wbGVGbGlnaHRQYXRoIiwiZ2NzTG9jYXRpb24iLCJvYnNlcnZlckxvY2F0aW9uIiwicmVwZWF0ZXJMb2NhdGlvbiIsImdjc0VsZXZhdGlvbk9mZnNldCIsIm9ic2VydmVyRWxldmF0aW9uT2Zmc2V0IiwicmVwZWF0ZXJFbGV2YXRpb25PZmZzZXQiLCJncmlkU2l6ZSIsImVsb3NHcmlkUmFuZ2UiLCJpc0FuYWx5emluZyIsInNldElzQW5hbHl6aW5nIiwic2V0UmVzdWx0cyIsInNldEVycm9yIiwic2V0UHJvZ3Jlc3MiLCJzZXRHbG9iYWxQcm9ncmVzcyIsImFuYWx5c2lzSW5Qcm9ncmVzcyIsInNldEFuYWx5c2lzSW5Qcm9ncmVzcyIsImxhc3RBbmFseXNpc1RpbWUiLCJzZXRMYXN0QW5hbHlzaXNUaW1lIiwicHJvZ3Jlc3MiLCJhYm9ydENvbnRyb2xsZXJSZWYiLCJjYWNoZVJlZiIsIk1hcCIsInVwZGF0ZVByb2dyZXNzIiwidmFsdWUiLCJvblByb2dyZXNzIiwiY2xlYW51cEFuYWx5c2lzIiwiY3VycmVudCIsImFib3J0QW5hbHlzaXMiLCJhYm9ydCIsInZpc3VhbGl6ZUdyaWQiLCJhbmFseXNpc1Jlc3VsdHMiLCJsYXllcklkIiwiRUxPU19HUklEIiwiY29uc29sZSIsImVycm9yIiwiZ2VvanNvbiIsInR5cGUiLCJmZWF0dXJlcyIsImNlbGxzIiwiY2VsbCIsImdlb21ldHJ5IiwicHJvcGVydGllcyIsImdldFNvdXJjZSIsInNvdXJjZSIsInNldERhdGEiLCJhZGRTb3VyY2UiLCJkYXRhIiwiY29sb3JSYW1wIiwiTUVSR0VEX1ZJU0lCSUxJVFkiLCJhZGRMYXllciIsImlkIiwicGFpbnQiLCJvbk1vdXNlTW92ZSIsImUiLCJsZW5ndGgiLCJmZWF0dXJlIiwidmlzIiwidmlzaWJpbGl0eSIsInRvRml4ZWQiLCJlbGV2IiwiZWxldmF0aW9uIiwicG9wdXAiLCJyZW1vdmUiLCJQb3B1cCIsImNsb3NlQnV0dG9uIiwiY2xvc2VPbk1vdmUiLCJzZXRMbmdMYXQiLCJsbmdMYXQiLCJzZXRIVE1MIiwiYWRkVG8iLCJvbk1vdXNlTGVhdmUiLCJvZmYiLCJvbiIsInJlZ2lzdGVyTGF5ZXIiLCJhbmFseXplRmxpZ2h0UGF0aCIsImZsaWdodFBsYW4iLCJzdGFydFRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsIkZMSUdIVF9QQVRIIiwiQWJvcnRDb250cm9sbGVyIiwiRXJyb3IiLCJmbGlnaHRQYXRoIiwib3JpZ2luYWxDb29yZGluYXRlcyIsImNvb3JkaW5hdGVzIiwid2F5cG9pbnRzIiwiYWx0aXR1ZGVNb2RlIiwibG9nIiwic2FtcGxpbmdSZXNvbHV0aW9uIiwibGluZVN0cmluZyIsInNhbXBsZWRQb2ludHMiLCJyZXNvbHV0aW9uIiwicHJvZ3Jlc3NDYWxsYmFjayIsInNhbXBsZWRDb29yZGluYXRlcyIsInBvaW50IiwicG9zaXRpb24iLCJjaHVua1NpemUiLCJyZXN1bHRzIiwidmlzaWJsZUNlbGxDb3VudCIsInRvdGFsVmlzaWJpbGl0eSIsImkiLCJzaWduYWwiLCJhYm9ydGVkIiwiY2h1bmsiLCJzbGljZSIsInByb2Nlc3NlZENodW5rIiwiUHJvbWlzZSIsImFsbCIsImNlbnRlciIsImdyaWRSYW5nZSIsImZ1bGx5VmlzaWJsZSIsImxhc3RBbmFseXplZCIsIkRhdGUiLCJ3YXJuIiwicHVzaCIsInByb2dyZXNzVmFsdWUiLCJNYXRoIiwibWluIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJhbmFseXNpc1RpbWUiLCJzdGF0cyIsInRvdGFsQ2VsbHMiLCJ2aXNpYmxlQ2VsbHMiLCJhdmVyYWdlVmlzaWJpbGl0eSIsInZpc2liaWxpdHlCdWNrZXRzIiwiZm9yRWFjaCIsInplcm8iLCJodW5kcmVkIiwiYW5hbHl6ZVN0YXRpb24iLCJzdGF0aW9uVHlwZSIsImxvY2F0aW9uIiwicmFuZ2UiLCJlbGV2YXRpb25PZmZzZXQiLCJtYXJrZXJJZCIsImxuZyIsImxhdCIsInRvVXBwZXJDYXNlIiwic3RhdGlvbkVsZXZhdGlvbiIsImdldEVsZXZhdGlvbiIsInN0YXRpb25Qb3NpdGlvbiIsInVwZGF0ZWRDZWxscyIsImNodW5rUmVzdWx0cyIsImlzVmlzaWJsZSIsImVmZmVjdGl2ZUxheWVySWQiLCJHQ1NfR1JJRCIsIk9CU0VSVkVSX0dSSUQiLCJSRVBFQVRFUl9HUklEIiwiYW5hbHl6ZU1lcmdlZCIsInN0YXRpb25zIiwiQXJyYXkiLCJpc0FycmF5Iiwic3RhdGlvbiIsImJib3giLCJtYXhSYW5nZSIsIm1heCIsInMiLCJzdGF0aW9uUG9zaXRpb25zIiwidmlzaWJpbGl0eVN1bSIsImNlbGxJbmRleCIsInRhcmdldFBvc2l0aW9uIiwidmlzaWJsZVN0YXRpb25Db3VudCIsInZpc2liaWxpdHlQZXJjZW50YWdlIiwic291cmNlU3RhdGlvbkRhdGEiLCJ0YXJnZXRTdGF0aW9uRGF0YSIsInNvdXJjZVN0YXRpb24iLCJ0YXJnZXRTdGF0aW9uIiwiZ2NzIiwib2Zmc2V0Iiwib2JzZXJ2ZXIiLCJyZXBlYXRlciIsImluY2x1ZGVzIiwidGFyZ2V0IiwibG9zRGF0YSIsInJ1bkFuYWx5c2lzIiwicmVzdWx0IiwiU1RBVElPTiIsIk1FUkdFRCIsIlNUQVRJT05fVE9fU1RBVElPTiIsInN0YXRpb25SZXN1bHQiLCJjbGVhciIsInN0YXRpb25MT1NSZXN1bHQiLCJwcm9maWxlIiwiY29tcGF0aWJsZVJlc3VsdCIsIm1lc3NhZ2UiLCJncmlkQ2VsbHMiLCJyZWZlcmVuY2VBbHRpdHVkZSIsIlRFUlJBSU4iLCJiYXRjaFNpemUiLCJ0ZXJyYWluU3RhdHMiLCJoaWdoZXN0RWxldmF0aW9uIiwibG93ZXN0RWxldmF0aW9uIiwiYXZlcmFnZUVsZXZhdGlvbiIsImVsZXZhdGlvbkRpc3RyaWJ1dGlvbiIsImN1cnJlbnRBbmFseXNpc1R5cGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Analyses/Hooks/useGridAnalysis.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Analyses/Services/GridAnalysis/GridAnalysisController.tsx":
/*!**************************************************************************************!*\
  !*** ./src/app/components/Analyses/Services/GridAnalysis/GridAnalysisController.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Hooks_useGridAnalysis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Hooks/useGridAnalysis */ \"(ssr)/./src/app/components/Analyses/Hooks/useGridAnalysis.ts\");\n/* harmony import */ var _context_LOSAnalysisContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../context/LOSAnalysisContext */ \"(ssr)/./src/app/context/LOSAnalysisContext.tsx\");\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../services/LayerManager */ \"(ssr)/./src/app/services/LayerManager.ts\");\n/* harmony import */ var _Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../Types/GridAnalysisTypes */ \"(ssr)/./src/app/components/Analyses/Types/GridAnalysisTypes.ts\");\n/* harmony import */ var _context_MarkerContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../context/MarkerContext */ \"(ssr)/./src/app/context/MarkerContext.tsx\");\n/**\n * GridAnalysisController.tsx\n * \n * Optimized controller for grid-based LOS analysis that coordinates\n * between map, analysis hook, and UI components.\n * \n * Provides:\n * - A ref API for triggering analyses programmatically\n * - Progress tracking\n * - Error handling\n * - Proper resource management\n */ \n\n\n\n\n\n\n/**\n * Adapts analysis results from GridAnalysisTypes to LOSAnalysisContext format\n * This ensures consistent data structure throughout the application\n */ function adaptAnalysisResults(internalResults) {\n    // Create a new object with the basic properties copied\n    const results = {\n        cells: internalResults.cells,\n        stats: internalResults.stats ? {\n            visibleCells: internalResults.stats.visibleCells,\n            totalCells: internalResults.stats.totalCells,\n            averageVisibility: internalResults.stats.averageVisibility,\n            analysisTime: internalResults.stats.analysisTime,\n            // Copy terrainStats if present\n            terrainStats: internalResults.stats.terrainStats\n        } : null,\n        stationLOSResult: internalResults.stationLOSResult\n    };\n    // Convert flightPathVisibility if present\n    if (internalResults.flightPathVisibility) {\n        results.flightPathVisibility = {\n            visibleLength: internalResults.flightPathVisibility.visibleLength,\n            totalLength: internalResults.flightPathVisibility.totalLength,\n            coveragePercentage: internalResults.flightPathVisibility.coveragePercentage\n        };\n        // Convert stationStats from Record to Array format\n        if (internalResults.flightPathVisibility.stationStats) {\n            results.flightPathVisibility.stationStats = Object.entries(internalResults.flightPathVisibility.stationStats).map(([stationId, visibleLength])=>{\n                // Extract station type from ID (assuming format like \"gcs-123\")\n                const stationType = stationId.split('-')[0];\n                const totalLength = internalResults.flightPathVisibility?.totalLength || 0;\n                return {\n                    stationType,\n                    visibleLength,\n                    coveragePercentage: totalLength > 0 ? visibleLength / totalLength * 100 : 0\n                };\n            });\n        }\n    }\n    return results;\n}\n/**\n * Main controller component for grid analysis functionality\n */ const GridAnalysisController = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(({ flightPlan, onProgress, onError, onComplete }, ref)=>{\n    const { map, elevationService } = (0,_context_mapcontext__WEBPACK_IMPORTED_MODULE_3__.useMapContext)();\n    const { setResults, setError, setProgress, setIsAnalyzing, samplingResolution } = (0,_context_LOSAnalysisContext__WEBPACK_IMPORTED_MODULE_2__.useLOSAnalysis)();\n    const [internalProgress, setInternalProgress] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    // Use the markers collection instead of individual locations\n    const { markers } = (0,_context_MarkerContext__WEBPACK_IMPORTED_MODULE_6__.useMarkersContext)();\n    // Initialize the grid analysis hook with progress tracking\n    const { runAnalysis, abortAnalysis, progress, analyzeTerrainGrid } = (0,_Hooks_useGridAnalysis__WEBPACK_IMPORTED_MODULE_1__.useGridAnalysis)({\n        onProgress: {\n            \"GridAnalysisController.useGridAnalysis\": (value)=>{\n                setInternalProgress(value);\n                if (onProgress) onProgress(value);\n                setProgress(value);\n            }\n        }[\"GridAnalysisController.useGridAnalysis\"]\n    });\n    // Clean up layers when needed\n    const cleanup = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"GridAnalysisController.useCallback[cleanup]\": ()=>{\n            if (!map) return;\n            // Define which layer types to clean up (exclude FLIGHT_PATH)\n            const layersToClean = Object.values(_services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS).filter({\n                \"GridAnalysisController.useCallback[cleanup].layersToClean\": (layerId)=>layerId !== _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.FLIGHT_PATH\n            }[\"GridAnalysisController.useCallback[cleanup].layersToClean\"]);\n            // Clean up analysis layers - now need to find layers with dynamic prefixes\n            layersToClean.forEach({\n                \"GridAnalysisController.useCallback[cleanup]\": (layerId)=>{\n                    // Remove exact matches\n                    if (map.getLayer(layerId)) {\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(layerId);\n                    }\n                    // For marker-specific layers (those with ID pattern like \"gcs-grid-123\")\n                    // we can find and remove them by checking all layers\n                    const layers = map.getStyle().layers || [];\n                    layers.forEach({\n                        \"GridAnalysisController.useCallback[cleanup]\": (layer)=>{\n                            if (layer.id.startsWith(`${layerId}-`)) {\n                                _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(layer.id);\n                            }\n                        }\n                    }[\"GridAnalysisController.useCallback[cleanup]\"]);\n                }\n            }[\"GridAnalysisController.useCallback[cleanup]\"]);\n        }\n    }[\"GridAnalysisController.useCallback[cleanup]\"], [\n        map\n    ]);\n    // Expose methods through the ref\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref, {\n        \"GridAnalysisController.useImperativeHandle\": ()=>({\n                // Flight path analysis\n                async runFlightPathAnalysis () {\n                    if (!flightPlan) {\n                        const message = 'No flight plan available';\n                        setError(message);\n                        return {\n                            cells: [],\n                            stats: null\n                        }; // Return empty results\n                    }\n                    try {\n                        setIsAnalyzing(true);\n                        cleanup();\n                        // Pass sampling resolution to analysis function\n                        const internalResults = await runAnalysis(_Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_5__.AnalysisType.FLIGHT_PATH, {\n                            flightPlan,\n                            samplingResolution\n                        });\n                        // Convert to context format\n                        const contextResults = adaptAnalysisResults(internalResults);\n                        setResults(contextResults);\n                        if (onComplete) onComplete(contextResults);\n                        return contextResults;\n                    } catch (error) {\n                        const message = error instanceof Error ? error.message : \"Unknown error\";\n                        setError(message);\n                        if (onError) onError(error instanceof Error ? error : new Error(message));\n                        return {\n                            cells: [],\n                            stats: null\n                        }; // Return empty results\n                    } finally{\n                        setIsAnalyzing(false);\n                    }\n                },\n                // Station analysis\n                async runStationAnalysis (options) {\n                    try {\n                        // Validate location\n                        if (!options.location || typeof options.location.lng !== 'number' || typeof options.location.lat !== 'number') {\n                            const errorMsg = `${options.stationType.toUpperCase()} location not set or invalid`;\n                            setError(errorMsg);\n                            throw new Error(errorMsg);\n                        }\n                        setIsAnalyzing(true);\n                        // Create a unique layer ID using marker type and ID\n                        const layerPrefix = options.stationType === 'gcs' ? _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.GCS_GRID : options.stationType === 'observer' ? _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.OBSERVER_GRID : _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.REPEATER_GRID;\n                        const layerId = options.markerId ? `${layerPrefix}-${options.markerId}` : layerPrefix;\n                        // Remove existing layer if present\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(layerId);\n                        // Run the analysis with the unique layer ID\n                        const internalResults = await runAnalysis(_Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_5__.AnalysisType.STATION, {\n                            ...options,\n                            layerId\n                        });\n                        // Convert to context format\n                        const contextResults = adaptAnalysisResults(internalResults);\n                        setResults(contextResults);\n                        if (onComplete) onComplete(contextResults);\n                        return contextResults;\n                    } catch (error) {\n                        const message = error instanceof Error ? error.message : \"Unknown error\";\n                        setError(message);\n                        if (onError) onError(error instanceof Error ? error : new Error(message));\n                        throw error;\n                    } finally{\n                        setIsAnalyzing(false);\n                    }\n                },\n                // Merged analysis - update to use markers collection\n                async runMergedAnalysis (stations) {\n                    try {\n                        setIsAnalyzing(true);\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.MERGED_VISIBILITY);\n                        // Use the provided stations array directly\n                        const stationsToUse = stations || markers.map({\n                            \"GridAnalysisController.useImperativeHandle\": (marker)=>({\n                                    type: marker.type,\n                                    location: marker.location,\n                                    range: 500,\n                                    elevationOffset: marker.elevationOffset\n                                })\n                        }[\"GridAnalysisController.useImperativeHandle\"]);\n                        const internalResults = await runAnalysis(_Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_5__.AnalysisType.MERGED, {\n                            stations: stationsToUse\n                        });\n                        // Convert to context format\n                        const contextResults = adaptAnalysisResults(internalResults);\n                        setResults(contextResults);\n                        if (onComplete) onComplete(contextResults);\n                        return contextResults;\n                    } catch (error) {\n                        const message = error instanceof Error ? error.message : \"Unknown error\";\n                        setError(message);\n                        if (onError) onError(error instanceof Error ? error : new Error(message));\n                        throw error;\n                    } finally{\n                        setIsAnalyzing(false);\n                    }\n                },\n                // Station-to-station LOS check - update to use marker IDs\n                async checkStationToStationLOS (sourceMarkerId, targetMarkerId) {\n                    try {\n                        setIsAnalyzing(true);\n                        // Find markers by ID\n                        const sourceMarker = markers.find({\n                            \"GridAnalysisController.useImperativeHandle.sourceMarker\": (m)=>m.id === sourceMarkerId\n                        }[\"GridAnalysisController.useImperativeHandle.sourceMarker\"]);\n                        const targetMarker = markers.find({\n                            \"GridAnalysisController.useImperativeHandle.targetMarker\": (m)=>m.id === targetMarkerId\n                        }[\"GridAnalysisController.useImperativeHandle.targetMarker\"]);\n                        if (!sourceMarker || !targetMarker) {\n                            throw new Error(\"One or both markers not found\");\n                        }\n                        // Create clean objects with only the needed properties\n                        // This avoids passing full markers which might have circular references\n                        const sourceStationData = {\n                            type: sourceMarker.type,\n                            location: {\n                                ...sourceMarker.location\n                            },\n                            elevationOffset: sourceMarker.elevationOffset\n                        };\n                        const targetStationData = {\n                            type: targetMarker.type,\n                            location: {\n                                ...targetMarker.location\n                            },\n                            elevationOffset: targetMarker.elevationOffset\n                        };\n                        const losData = await runAnalysis(_Types_GridAnalysisTypes__WEBPACK_IMPORTED_MODULE_5__.AnalysisType.STATION_TO_STATION, {\n                            sourceStation: sourceStationData,\n                            targetStation: targetStationData\n                        });\n                        // Create internal results format\n                        const internalResults = {\n                            cells: [],\n                            stats: {\n                                visibleCells: 0,\n                                totalCells: 0,\n                                averageVisibility: losData.stationLOSResult?.clear ? 100 : 0,\n                                analysisTime: 0\n                            },\n                            stationLOSResult: losData.stationLOSResult\n                        };\n                        // Convert to context format\n                        const contextResults = adaptAnalysisResults(internalResults);\n                        setResults(contextResults);\n                        if (onComplete) onComplete(contextResults);\n                        return {\n                            result: losData.stationLOSResult,\n                            profile: losData.profile || []\n                        };\n                    } catch (error) {\n                        const message = error instanceof Error ? error.message : \"Unknown error\";\n                        setError(message);\n                        if (onError) onError(error instanceof Error ? error : new Error(message));\n                        throw error;\n                    } finally{\n                        setIsAnalyzing(false);\n                    }\n                },\n                // Flight path visibility analysis - update to use markers collection\n                async runFlightPathVisibilityAnalysis (options = {}) {\n                    if (!flightPlan) {\n                        const message = 'No flight plan available';\n                        setError(message);\n                        return {\n                            cells: [],\n                            stats: null\n                        }; // Return empty results\n                    }\n                    try {\n                        setIsAnalyzing(true);\n                        // Remove previous visibility layer\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.FLIGHT_PATH_VISIBILITY);\n                        // Import the visibility analysis dynamically (only when needed)\n                        const { analyzeFlightPathVisibility, addVisibilityLayer } = await __webpack_require__.e(/*! import() */ \"_ssr_src_app_components_Analyses_LOSAnalyses_Utils_FlightPathVisibilityEngine_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ../../LOSAnalyses/Utils/FlightPathVisibilityEngine */ \"(ssr)/./src/app/components/Analyses/LOSAnalyses/Utils/FlightPathVisibilityEngine.ts\"));\n                        // Filter markers if markerIds is provided\n                        const markersToUse = options.markerIds ? markers.filter({\n                            \"GridAnalysisController.useImperativeHandle\": (marker)=>options.markerIds?.includes(marker.id)\n                        }[\"GridAnalysisController.useImperativeHandle\"]) : markers;\n                        // Run the analysis with selected markers\n                        const visibilityResults = await analyzeFlightPathVisibility(map, flightPlan, markersToUse, elevationService, {\n                            sampleInterval: options.sampleInterval || 10,\n                            minimumOffset: options.minimumOffset || 1,\n                            onProgress: {\n                                \"GridAnalysisController.useImperativeHandle\": (progress)=>{\n                                    setProgress(progress);\n                                    if (onProgress) onProgress(progress);\n                                }\n                            }[\"GridAnalysisController.useImperativeHandle\"]\n                        });\n                        // Always add the visibility layer when analysis completes\n                        if (map) {\n                            // First ensure any old layer is removed\n                            _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.FLIGHT_PATH_VISIBILITY);\n                            // Add the new visibility layer\n                            addVisibilityLayer(map, visibilityResults.segments);\n                            // Apply visibility based on option (visible by default)\n                            _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.setLayerVisibility(_services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.FLIGHT_PATH_VISIBILITY, options.showLayer !== false);\n                        }\n                        // Create the internal results object\n                        const internalResults = {\n                            cells: [],\n                            stats: {\n                                visibleCells: 0,\n                                totalCells: 0,\n                                averageVisibility: visibilityResults.stats.coveragePercentage,\n                                analysisTime: visibilityResults.stats.analysisTime\n                            },\n                            flightPathVisibility: {\n                                visibleLength: visibilityResults.stats.visibleLength,\n                                totalLength: visibilityResults.stats.totalLength,\n                                coveragePercentage: visibilityResults.stats.coveragePercentage,\n                                // Convert the array-based stats to a Record format for internal use\n                                stationStats: visibilityResults.stats.stationStats?.reduce({\n                                    \"GridAnalysisController.useImperativeHandle\": (acc, stat)=>{\n                                        acc[`${stat.stationType}-${Math.random().toString(36).substr(2, 9)}`] = stat.visibleLength;\n                                        return acc;\n                                    }\n                                }[\"GridAnalysisController.useImperativeHandle\"], {})\n                            }\n                        };\n                        // Convert to context format\n                        const contextResults = adaptAnalysisResults(internalResults);\n                        setResults(contextResults);\n                        if (onComplete) onComplete(contextResults);\n                        return contextResults;\n                    } catch (error) {\n                        const message = error instanceof Error ? error.message : \"Unknown error\";\n                        setError(message);\n                        if (onError) onError(error instanceof Error ? error : new Error(message));\n                        return {\n                            cells: [],\n                            stats: null\n                        }; // Return empty results\n                    } finally{\n                        setIsAnalyzing(false);\n                        setProgress(0);\n                    }\n                },\n                /**\n       * Analyzes a grid of terrain cells to generate elevation statistics\n       * @param gridCells - The grid cells to analyze\n       * @param options - Analysis options including reference altitude and progress tracking\n       * @returns Analysis results with terrain statistics\n       */ async analyzeTerrainGrid (gridCells, options) {\n                    try {\n                        setIsAnalyzing(true);\n                        const startTime = performance.now();\n                        // The hook's analyzeTerrainGrid expects a number for referenceAltitude, not an object\n                        // Just pass the referenceAltitude value directly\n                        const result = await analyzeTerrainGrid(gridCells, options?.referenceAltitude || 120);\n                        // For the progress tracking, we'll need to add a listener in the useEffect\n                        if (options?.onProgress || onProgress) {\n                            const progressHandler = {\n                                \"GridAnalysisController.useImperativeHandle.progressHandler\": (progress)=>{\n                                    if (options?.onProgress) {\n                                        return options.onProgress(progress) || false;\n                                    }\n                                    if (onProgress) {\n                                        onProgress(progress);\n                                    }\n                                    return false;\n                                }\n                            }[\"GridAnalysisController.useImperativeHandle.progressHandler\"];\n                            // Register progress handling here if needed\n                            setProgress(0); // Start at 0%\n                        }\n                        // Create internal results format\n                        const internalResults = {\n                            cells: gridCells,\n                            stats: {\n                                visibleCells: gridCells.length,\n                                totalCells: gridCells.length,\n                                averageVisibility: 100,\n                                analysisTime: performance.now() - startTime,\n                                terrainStats: {\n                                    highestElevation: result.highestElevation,\n                                    lowestElevation: result.lowestElevation,\n                                    averageElevation: result.averageElevation,\n                                    elevationDistribution: result.elevationDistribution,\n                                    sampleElevations: result.elevations // Include sample elevations\n                                }\n                            }\n                        };\n                        // Convert to context format\n                        const contextResults = adaptAnalysisResults(internalResults);\n                        // Set results and notify completion\n                        setResults(contextResults);\n                        if (onComplete) onComplete(contextResults);\n                        return contextResults;\n                    } catch (error) {\n                        const message = error instanceof Error ? error.message : \"Unknown error\";\n                        setError(message);\n                        if (onError) onError(error instanceof Error ? error : new Error(message));\n                        throw error;\n                    } finally{\n                        setIsAnalyzing(false);\n                    }\n                },\n                // Abort any running analysis\n                abortAnalysis () {\n                    abortAnalysis();\n                }\n            })\n    }[\"GridAnalysisController.useImperativeHandle\"], [\n        map,\n        flightPlan,\n        runAnalysis,\n        abortAnalysis,\n        cleanup,\n        setResults,\n        setError,\n        setIsAnalyzing,\n        onComplete,\n        onError,\n        elevationService,\n        markers,\n        samplingResolution,\n        analyzeTerrainGrid,\n        onProgress,\n        setProgress\n    ]);\n    // The controller doesn't render anything, it just manages state\n    return null;\n});\nGridAnalysisController.displayName = 'GridAnalysisController';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GridAnalysisController);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvQW5hbHlzZXMvU2VydmljZXMvR3JpZEFuYWx5c2lzL0dyaWRBbmFseXNpc0NvbnRyb2xsZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7OztDQVdDLEdBRXNGO0FBQ3pCO0FBSWQ7QUFDZTtBQUNjO0FBU3RDO0FBQytCO0FBOEN0RTs7O0NBR0MsR0FDRCxTQUFTVyxxQkFDUEMsZUFBcUM7SUFFckMsdURBQXVEO0lBQ3ZELE1BQU1DLFVBQWtDO1FBQ3RDQyxPQUFPRixnQkFBZ0JFLEtBQUs7UUFDNUJDLE9BQU9ILGdCQUFnQkcsS0FBSyxHQUFHO1lBQzdCQyxjQUFjSixnQkFBZ0JHLEtBQUssQ0FBQ0MsWUFBWTtZQUNoREMsWUFBWUwsZ0JBQWdCRyxLQUFLLENBQUNFLFVBQVU7WUFDNUNDLG1CQUFtQk4sZ0JBQWdCRyxLQUFLLENBQUNHLGlCQUFpQjtZQUMxREMsY0FBY1AsZ0JBQWdCRyxLQUFLLENBQUNJLFlBQVk7WUFDaEQsK0JBQStCO1lBQy9CQyxjQUFjUixnQkFBZ0JHLEtBQUssQ0FBQ0ssWUFBWTtRQUNsRCxJQUFJO1FBQ0pDLGtCQUFrQlQsZ0JBQWdCUyxnQkFBZ0I7SUFDcEQ7SUFFQSwwQ0FBMEM7SUFDMUMsSUFBSVQsZ0JBQWdCVSxvQkFBb0IsRUFBRTtRQUN4Q1QsUUFBUVMsb0JBQW9CLEdBQUc7WUFDN0JDLGVBQWVYLGdCQUFnQlUsb0JBQW9CLENBQUNDLGFBQWE7WUFDakVDLGFBQWFaLGdCQUFnQlUsb0JBQW9CLENBQUNFLFdBQVc7WUFDN0RDLG9CQUFvQmIsZ0JBQWdCVSxvQkFBb0IsQ0FBQ0csa0JBQWtCO1FBQzdFO1FBRUEsbURBQW1EO1FBQ25ELElBQUliLGdCQUFnQlUsb0JBQW9CLENBQUNJLFlBQVksRUFBRTtZQUNyRGIsUUFBUVMsb0JBQW9CLENBQUNJLFlBQVksR0FBR0MsT0FBT0MsT0FBTyxDQUN4RGhCLGdCQUFnQlUsb0JBQW9CLENBQUNJLFlBQVksRUFD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RUFBZTlHLHNCQUFzQkEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvY29tcG9uZW50cy9BbmFseXNlcy9TZXJ2aWNlcy9HcmlkQW5hbHlzaXMvR3JpZEFuYWx5c2lzQ29udHJvbGxlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBHcmlkQW5hbHlzaXNDb250cm9sbGVyLnRzeFxuICogXG4gKiBPcHRpbWl6ZWQgY29udHJvbGxlciBmb3IgZ3JpZC1iYXNlZCBMT1MgYW5hbHlzaXMgdGhhdCBjb29yZGluYXRlc1xuICogYmV0d2VlbiBtYXAsIGFuYWx5c2lzIGhvb2ssIGFuZCBVSSBjb21wb25lbnRzLlxuICogXG4gKiBQcm92aWRlczpcbiAqIC0gQSByZWYgQVBJIGZvciB0cmlnZ2VyaW5nIGFuYWx5c2VzIHByb2dyYW1tYXRpY2FsbHlcbiAqIC0gUHJvZ3Jlc3MgdHJhY2tpbmdcbiAqIC0gRXJyb3IgaGFuZGxpbmdcbiAqIC0gUHJvcGVyIHJlc291cmNlIG1hbmFnZW1lbnRcbiAqL1xuXG5pbXBvcnQgeyBmb3J3YXJkUmVmLCB1c2VJbXBlcmF0aXZlSGFuZGxlLCB1c2VSZWYsIHVzZVN0YXRlLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUdyaWRBbmFseXNpcyB9IGZyb20gJy4uLy4uL0hvb2tzL3VzZUdyaWRBbmFseXNpcyc7XG5pbXBvcnQgeyBcbiAgQW5hbHlzaXNSZXN1bHRzIGFzIENvbnRleHRBbmFseXNpc1Jlc3VsdHMsXG4gIHVzZUxPU0FuYWx5c2lzIFxufSBmcm9tICcuLi8uLi8uLi8uLi9jb250ZXh0L0xPU0FuYWx5c2lzQ29udGV4dCc7XG5pbXBvcnQgeyB1c2VNYXBDb250ZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vY29udGV4dC9tYXBjb250ZXh0JztcbmltcG9ydCB7IGxheWVyTWFuYWdlciwgTUFQX0xBWUVSUyB9IGZyb20gJy4uLy4uLy4uLy4uL3NlcnZpY2VzL0xheWVyTWFuYWdlcic7XG5pbXBvcnQgeyBGbGlnaHRQbGFuRGF0YSB9IGZyb20gJy4uLy4uLy4uLy4uL2NvbnRleHQvRmxpZ2h0UGxhbkNvbnRleHQnO1xuaW1wb3J0IHsgXG4gIExvY2F0aW9uRGF0YSwgXG4gIEFuYWx5c2lzVHlwZSwgXG4gIFN0YXRpb25MT1NSZXN1bHQsIFxuICBMT1NQcm9maWxlUG9pbnQsIFxuICBHcmlkQ2VsbCxcbiAgQW5hbHlzaXNSZXN1bHRzIGFzIFR5cGVzQW5hbHlzaXNSZXN1bHRzIFxufSBmcm9tICcuLi8uLi9UeXBlcy9HcmlkQW5hbHlzaXNUeXBlcyc7XG5pbXBvcnQgeyB1c2VNYXJrZXJzQ29udGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uL2NvbnRleHQvTWFya2VyQ29udGV4dCc7XG5cbi8vIEludGVyZmFjZSBmb3IgdGhlIGNvbnRyb2xsZXIncyBwdWJsaWMgbWV0aG9kc1xuZXhwb3J0IGludGVyZmFjZSBHcmlkQW5hbHlzaXNSZWYge1xuICBydW5GbGlnaHRQYXRoQW5hbHlzaXM6ICgpID0+IFByb21pc2U8Q29udGV4dEFuYWx5c2lzUmVzdWx0cz47XG4gIHJ1blN0YXRpb25BbmFseXNpczogKG9wdGlvbnM6IHtcbiAgICBzdGF0aW9uVHlwZTogJ2djcycgfCAnb2JzZXJ2ZXInIHwgJ3JlcGVhdGVyJztcbiAgICBsb2NhdGlvbjogTG9jYXRpb25EYXRhO1xuICAgIHJhbmdlOiBudW1iZXI7XG4gICAgZWxldmF0aW9uT2Zmc2V0OiBudW1iZXI7XG4gICAgbWFya2VySWQ6IHN0cmluZztcbiAgfSkgPT4gUHJvbWlzZTxDb250ZXh0QW5hbHlzaXNSZXN1bHRzPjtcbiAgcnVuTWVyZ2VkQW5hbHlzaXM6IChzdGF0aW9uczogQXJyYXk8e1xuICAgIHR5cGU6ICdnY3MnIHwgJ29ic2VydmVyJyB8ICdyZXBlYXRlcic7XG4gICAgbG9jYXRpb246IExvY2F0aW9uRGF0YTtcbiAgICByYW5nZTogbnVtYmVyO1xuICAgIGVsZXZhdGlvbk9mZnNldDogbnVtYmVyO1xuICB9PikgPT4gUHJvbWlzZTxDb250ZXh0QW5hbHlzaXNSZXN1bHRzPjtcbiAgY2hlY2tTdGF0aW9uVG9TdGF0aW9uTE9TOiAoXG4gICAgc291cmNlU3RhdGlvbjogc3RyaW5nLFxuICAgIHRhcmdldFN0YXRpb246IHN0cmluZ1xuICApID0+IFByb21pc2U8e1xuICAgIHJlc3VsdDogU3RhdGlvbkxPU1Jlc3VsdDtcbiAgICBwcm9maWxlOiBMT1NQcm9maWxlUG9pbnRbXTtcbiAgfT47XG4gIHJ1bkZsaWdodFBhdGhWaXNpYmlsaXR5QW5hbHlzaXM6IChvcHRpb25zPzoge1xuICAgIHNhbXBsZUludGVydmFsPzogbnVtYmVyO1xuICAgIG1pbmltdW1PZmZzZXQ/OiBudW1iZXI7XG4gICAgc2hvd0xheWVyPzogYm9vbGVhbjtcbiAgICBtYXJrZXJJZHM/OiBzdHJpbmdbXTtcbiAgfSkgPT4gUHJvbWlzZTxDb250ZXh0QW5hbHlzaXNSZXN1bHRzPjtcbiAgYW5hbHl6ZVRlcnJhaW5HcmlkOiAoZ3JpZENlbGxzOiBHcmlkQ2VsbFtdLCBvcHRpb25zPzoge1xuICAgIHJlZmVyZW5jZUFsdGl0dWRlPzogbnVtYmVyO1xuICAgIG9uUHJvZ3Jlc3M/OiAocHJvZ3Jlc3M6IG51bWJlcikgPT4gYm9vbGVhbiB8IHZvaWQ7XG4gIH0pID0+IFByb21pc2U8Q29udGV4dEFuYWx5c2lzUmVzdWx0cz47XG5cbiAgYWJvcnRBbmFseXNpczogKCkgPT4gdm9pZDtcbn1cblxuaW50ZXJmYWNlIEdyaWRBbmFseXNpc0NvbnRyb2xsZXJQcm9wcyB7XG4gIGZsaWdodFBsYW4/OiBGbGlnaHRQbGFuRGF0YTtcbiAgb25Qcm9ncmVzcz86IChwcm9ncmVzczogbnVtYmVyKSA9PiB2b2lkO1xuICBvbkVycm9yPzogKGVycm9yOiBFcnJvcikgPT4gdm9pZDtcbiAgb25Db21wbGV0ZT86IChyZXN1bHRzOiBhbnkpID0+IHZvaWQ7XG59XG5cbi8qKlxuICogQWRhcHRzIGFuYWx5c2lzIHJlc3VsdHMgZnJvbSBHcmlkQW5hbHlzaXNUeXBlcyB0byBMT1NBbmFseXNpc0NvbnRleHQgZm9ybWF0XG4gKiBUaGlzIGVuc3VyZXMgY29uc2lzdGVudCBkYXRhIHN0cnVjdHVyZSB0aHJvdWdob3V0IHRoZSBhcHBsaWNhdGlvblxuICovXG5mdW5jdGlvbiBhZGFwdEFuYWx5c2lzUmVzdWx0cyhcbiAgaW50ZXJuYWxSZXN1bHRzOiBUeXBlc0FuYWx5c2lzUmVzdWx0c1xuKTogQ29udGV4dEFuYWx5c2lzUmVzdWx0cyB7XG4gIC8vIENyZWF0ZSBhIG5ldyBvYmplY3Qgd2l0aCB0aGUgYmFzaWMgcHJvcGVydGllcyBjb3BpZWRcbiAgY29uc3QgcmVzdWx0czogQ29udGV4dEFuYWx5c2lzUmVzdWx0cyA9IHtcbiAgICBjZWxsczogaW50ZXJuYWxSZXN1bHRzLmNlbGxzLFxuICAgIHN0YXRzOiBpbnRlcm5hbFJlc3VsdHMuc3RhdHMgPyB7XG4gICAgICB2aXNpYmxlQ2VsbHM6IGludGVybmFsUmVzdWx0cy5zdGF0cy52aXNpYmxlQ2VsbHMsXG4gICAgICB0b3RhbENlbGxzOiBpbnRlcm5hbFJlc3VsdHMuc3RhdHMudG90YWxDZWxscyxcbiAgICAgIGF2ZXJhZ2VWaXNpYmlsaXR5OiBpbnRlcm5hbFJlc3VsdHMuc3RhdHMuYXZlcmFnZVZpc2liaWxpdHksXG4gICAgICBhbmFseXNpc1RpbWU6IGludGVybmFsUmVzdWx0cy5zdGF0cy5hbmFseXNpc1RpbWUsXG4gICAgICAvLyBDb3B5IHRlcnJhaW5TdGF0cyBpZiBwcmVzZW50XG4gICAgICB0ZXJyYWluU3RhdHM6IGludGVybmFsUmVzdWx0cy5zdGF0cy50ZXJyYWluU3RhdHNcbiAgICB9IDogbnVsbCxcbiAgICBzdGF0aW9uTE9TUmVzdWx0OiBpbnRlcm5hbFJlc3VsdHMuc3RhdGlvbkxPU1Jlc3VsdFxuICB9O1xuXG4gIC8vIENvbnZlcnQgZmxpZ2h0UGF0aFZpc2liaWxpdHkgaWYgcHJlc2VudFxuICBpZiAoaW50ZXJuYWxSZXN1bHRzLmZsaWdodFBhdGhWaXNpYmlsaXR5KSB7XG4gICAgcmVzdWx0cy5mbGlnaHRQYXRoVmlzaWJpbGl0eSA9IHtcbiAgICAgIHZpc2libGVMZW5ndGg6IGludGVybmFsUmVzdWx0cy5mbGlnaHRQYXRoVmlzaWJpbGl0eS52aXNpYmxlTGVuZ3RoLFxuICAgICAgdG90YWxMZW5ndGg6IGludGVybmFsUmVzdWx0cy5mbGlnaHRQYXRoVmlzaWJpbGl0eS50b3RhbExlbmd0aCxcbiAgICAgIGNvdmVyYWdlUGVyY2VudGFnZTogaW50ZXJuYWxSZXN1bHRzLmZsaWdodFBhdGhWaXNpYmlsaXR5LmNvdmVyYWdlUGVyY2VudGFnZVxuICAgIH07XG5cbiAgICAvLyBDb252ZXJ0IHN0YXRpb25TdGF0cyBmcm9tIFJlY29yZCB0byBBcnJheSBmb3JtYXRcbiAgICBpZiAoaW50ZXJuYWxSZXN1bHRzLmZsaWdodFBhdGhWaXNpYmlsaXR5LnN0YXRpb25TdGF0cykge1xuICAgICAgcmVzdWx0cy5mbGlnaHRQYXRoVmlzaWJpbGl0eS5zdGF0aW9uU3RhdHMgPSBPYmplY3QuZW50cmllcyhcbiAgICAgICAgaW50ZXJuYWxSZXN1bHRzLmZsaWdodFBhdGhWaXNpYmlsaXR5LnN0YXRpb25TdGF0c1xuICAgICAgKS5tYXAoKFtzdGF0aW9uSWQsIHZpc2libGVMZW5ndGhdKSA9PiB7XG4gICAgICAgIC8vIEV4dHJhY3Qgc3RhdGlvbiB0eXBlIGZyb20gSUQgKGFzc3VtaW5nIGZvcm1hdCBsaWtlIFwiZ2NzLTEyM1wiKVxuICAgICAgICBjb25zdCBzdGF0aW9uVHlwZSA9IHN0YXRpb25JZC5zcGxpdCgnLScpWzBdIGFzICdnY3MnIHwgJ29ic2VydmVyJyB8ICdyZXBlYXRlcic7XG4gICAgICAgIGNvbnN0IHRvdGFsTGVuZ3RoID0gaW50ZXJuYWxSZXN1bHRzLmZsaWdodFBhdGhWaXNpYmlsaXR5Py50b3RhbExlbmd0aCB8fCAwO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdGF0aW9uVHlwZSxcbiAgICAgICAgICB2aXNpYmxlTGVuZ3RoLFxuICAgICAgICAgIGNvdmVyYWdlUGVyY2VudGFnZTogdG90YWxMZW5ndGggPiAwID8gKHZpc2libGVMZW5ndGggLyB0b3RhbExlbmd0aCkgKiAxMDAgOiAwXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0cztcbn1cblxuLyoqXG4gKiBNYWluIGNvbnRyb2xsZXIgY29tcG9uZW50IGZvciBncmlkIGFuYWx5c2lzIGZ1bmN0aW9uYWxpdHlcbiAqL1xuY29uc3QgR3JpZEFuYWx5c2lzQ29udHJvbGxlciA9IGZvcndhcmRSZWY8R3JpZEFuYWx5c2lzUmVmLCBHcmlkQW5hbHlzaXNDb250cm9sbGVyUHJvcHM+KFxuICAoeyBmbGlnaHRQbGFuLCBvblByb2dyZXNzLCBvbkVycm9yLCBvbkNvbXBsZXRlIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IHsgbWFwLCBlbGV2YXRpb25TZXJ2aWNlIH0gPSB1c2VNYXBDb250ZXh0KCk7XG4gICAgY29uc3QgeyBcbiAgICAgIHNldFJlc3VsdHMsIFxuICAgICAgc2V0RXJyb3IsIFxuICAgICAgc2V0UHJvZ3Jlc3MsIFxuICAgICAgc2V0SXNBbmFseXppbmcsXG4gICAgICBzYW1wbGluZ1Jlc29sdXRpb24gXG4gICAgfSA9IHVzZUxPU0FuYWx5c2lzKCk7XG4gICAgY29uc3QgW2ludGVybmFsUHJvZ3Jlc3MsIHNldEludGVybmFsUHJvZ3Jlc3NdID0gdXNlU3RhdGUoMCk7XG4gICAgXG4gICAgLy8gVXNlIHRoZSBtYXJrZXJzIGNvbGxlY3Rpb24gaW5zdGVhZCBvZiBpbmRpdmlkdWFsIGxvY2F0aW9uc1xuICAgIGNvbnN0IHsgbWFya2VycyB9ID0gdXNlTWFya2Vyc0NvbnRleHQoKTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIHRoZSBncmlkIGFuYWx5c2lzIGhvb2sgd2l0aCBwcm9ncmVzcyB0cmFja2luZ1xuICAgIGNvbnN0IHtcbiAgICAgIHJ1bkFuYWx5c2lzLFxuICAgICAgYWJvcnRBbmFseXNpcyxcbiAgICAgIHByb2dyZXNzLFxuICAgICAgYW5hbHl6ZVRlcnJhaW5HcmlkLFxuICAgIH0gPSB1c2VHcmlkQW5hbHlzaXMoe1xuICAgICAgb25Qcm9ncmVzczogKHZhbHVlKSA9PiB7XG4gICAgICAgIHNldEludGVybmFsUHJvZ3Jlc3ModmFsdWUpO1xuICAgICAgICBpZiAob25Qcm9ncmVzcykgb25Qcm9ncmVzcyh2YWx1ZSk7XG4gICAgICAgIHNldFByb2dyZXNzKHZhbHVlKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBDbGVhbiB1cCBsYXllcnMgd2hlbiBuZWVkZWRcbiAgICBjb25zdCBjbGVhbnVwID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgaWYgKCFtYXApIHJldHVybjtcbiAgICAgIFxuICAgICAgLy8gRGVmaW5lIHdoaWNoIGxheWVyIHR5cGVzIHRvIGNsZWFuIHVwIChleGNsdWRlIEZMSUdIVF9QQVRIKVxuICAgICAgY29uc3QgbGF5ZXJzVG9DbGVhbiA9IE9iamVjdC52YWx1ZXMoTUFQX0xBWUVSUykuZmlsdGVyKFxuICAgICAgICBsYXllcklkID0+IGxheWVySWQgIT09IE1BUF9MQVlFUlMuRkxJR0hUX1BBVEhcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIENsZWFuIHVwIGFuYWx5c2lzIGxheWVycyAtIG5vdyBuZWVkIHRvIGZpbmQgbGF5ZXJzIHdpdGggZHluYW1pYyBwcmVmaXhlc1xuICAgICAgbGF5ZXJzVG9DbGVhbi5mb3JFYWNoKGxheWVySWQgPT4ge1xuICAgICAgICAvLyBSZW1vdmUgZXhhY3QgbWF0Y2hlc1xuICAgICAgICBpZiAobWFwLmdldExheWVyKGxheWVySWQpKSB7XG4gICAgICAgICAgbGF5ZXJNYW5hZ2VyLnJlbW92ZUxheWVyKGxheWVySWQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBGb3IgbWFya2VyLXNwZWNpZmljIGxheWVycyAodGhvc2Ugd2l0aCBJRCBwYXR0ZXJuIGxpa2UgXCJnY3MtZ3JpZC0xMjNcIilcbiAgICAgICAgLy8gd2UgY2FuIGZpbmQgYW5kIHJlbW92ZSB0aGVtIGJ5IGNoZWNraW5nIGFsbCBsYXllcnNcbiAgICAgICAgY29uc3QgbGF5ZXJzID0gbWFwLmdldFN0eWxlKCkubGF5ZXJzIHx8IFtdO1xuICAgICAgICBsYXllcnMuZm9yRWFjaChsYXllciA9PiB7XG4gICAgICAgICAgaWYgKGxheWVyLmlkLnN0YXJ0c1dpdGgoYCR7bGF5ZXJJZH0tYCkpIHtcbiAgICAgICAgICAgIGxheWVyTWFuYWdlci5yZW1vdmVMYXllcihsYXllci5pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0sIFttYXBdKTtcblxuICAgIC8vIEV4cG9zZSBtZXRob2RzIHRocm91Z2ggdGhlIHJlZlxuICAgIHVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiAoe1xuICAgICAgXG4gICAgICAvLyBGbGlnaHQgcGF0aCBhbmFseXNpc1xuICAgICAgYXN5bmMgcnVuRmxpZ2h0UGF0aEFuYWx5c2lzKCkge1xuICAgICAgaWYgKCFmbGlnaHRQbGFuKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnTm8gZmxpZ2h0IHBsYW4gYXZhaWxhYmxlJztcbiAgICAgICAgc2V0RXJyb3IobWVzc2FnZSk7XG4gICAgICAgIHJldHVybiB7IGNlbGxzOiBbXSwgc3RhdHM6IG51bGwgfSBhcyBDb250ZXh0QW5hbHlzaXNSZXN1bHRzOyAvLyBSZXR1cm4gZW1wdHkgcmVzdWx0c1xuICAgICAgfVxuICBcbiAgdHJ5IHtcbiAgICBzZXRJc0FuYWx5emluZyh0cnVlKTtcbiAgICBjbGVhbnVwKCk7XG4gICAgXG4gICAgLy8gUGFzcyBzYW1wbGluZyByZXNvbHV0aW9uIHRvIGFuYWx5c2lzIGZ1bmN0aW9uXG4gICAgY29uc3QgaW50ZXJuYWxSZXN1bHRzID0gYXdhaXQgcnVuQW5hbHlzaXMoQW5hbHlzaXNUeXBlLkZMSUdIVF9QQVRILCB7IFxuICAgICAgZmxpZ2h0UGxhbixcbiAgICAgIHNhbXBsaW5nUmVzb2x1dGlvblxuICAgIH0pO1xuXG4gICAgLy8gQ29udmVydCB0byBjb250ZXh0IGZvcm1hdFxuICAgIGNvbnN0IGNvbnRleHRSZXN1bHRzID0gYWRhcHRBbmFseXNpc1Jlc3VsdHMoaW50ZXJuYWxSZXN1bHRzKTtcbiAgICBcbiAgICBzZXRSZXN1bHRzKGNvbnRleHRSZXN1bHRzKTtcbiAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZShjb250ZXh0UmVzdWx0cyk7XG4gICAgcmV0dXJuIGNvbnRleHRSZXN1bHRzO1xuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiO1xuICAgIHNldEVycm9yKG1lc3NhZ2UpO1xuICAgIGlmIChvbkVycm9yKSBvbkVycm9yKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihtZXNzYWdlKSk7XG4gICAgcmV0dXJuIHsgY2VsbHM6IFtdLCBzdGF0czogbnVsbCB9IGFzIENvbnRleHRBbmFseXNpc1Jlc3VsdHM7IC8vIFJldHVybiBlbXB0eSByZXN1bHRzXG4gIH0gZmluYWxseSB7XG4gICAgc2V0SXNBbmFseXppbmcoZmFsc2UpO1xuICB9XG59LFxuICAgICAgXG4gICAgICAvLyBTdGF0aW9uIGFuYWx5c2lzXG4gICAgICBhc3luYyBydW5TdGF0aW9uQW5hbHlzaXMob3B0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFZhbGlkYXRlIGxvY2F0aW9uXG4gICAgICAgICAgaWYgKCFvcHRpb25zLmxvY2F0aW9uIHx8IHR5cGVvZiBvcHRpb25zLmxvY2F0aW9uLmxuZyAhPT0gJ251bWJlcicgfHwgdHlwZW9mIG9wdGlvbnMubG9jYXRpb24ubGF0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgJHtvcHRpb25zLnN0YXRpb25UeXBlLnRvVXBwZXJDYXNlKCl9IGxvY2F0aW9uIG5vdCBzZXQgb3IgaW52YWxpZGA7XG4gICAgICAgICAgICBzZXRFcnJvcihlcnJvck1zZyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBzZXRJc0FuYWx5emluZyh0cnVlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgIC8vIENyZWF0ZSBhIHVuaXF1ZSBsYXllciBJRCB1c2luZyBtYXJrZXIgdHlwZSBhbmQgSURcbiAgICAgICAgICBjb25zdCBsYXllclByZWZpeCA9IFxuICAgICAgICAgICAgb3B0aW9ucy5zdGF0aW9uVHlwZSA9PT0gJ2djcycgXG4gICAgICAgICAgICAgID8gTUFQX0xBWUVSUy5HQ1NfR1JJRCBcbiAgICAgICAgICAgICAgOiBvcHRpb25zLnN0YXRpb25UeXBlID09PSAnb2JzZXJ2ZXInIFxuICAgICAgICAgICAgICAgID8gTUFQX0xBWUVSUy5PQlNFUlZFUl9HUklEIFxuICAgICAgICAgICAgICAgIDogTUFQX0xBWUVSUy5SRVBFQVRFUl9HUklEO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGxheWVySWQgPSBvcHRpb25zLm1hcmtlcklkIFxuICAgICAgICAgICAgPyBgJHtsYXllclByZWZpeH0tJHtvcHRpb25zLm1hcmtlcklkfWBcbiAgICAgICAgICAgIDogbGF5ZXJQcmVmaXg7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVtb3ZlIGV4aXN0aW5nIGxheWVyIGlmIHByZXNlbnRcbiAgICAgICAgICBsYXllck1hbmFnZXIucmVtb3ZlTGF5ZXIobGF5ZXJJZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUnVuIHRoZSBhbmFseXNpcyB3aXRoIHRoZSB1bmlxdWUgbGF5ZXIgSURcbiAgICAgICAgICBjb25zdCBpbnRlcm5hbFJlc3VsdHMgPSBhd2FpdCBydW5BbmFseXNpcyhBbmFseXNpc1R5cGUuU1RBVElPTiwge1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIGxheWVySWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDb252ZXJ0IHRvIGNvbnRleHQgZm9ybWF0XG4gICAgICAgICAgY29uc3QgY29udGV4dFJlc3VsdHMgPSBhZGFwdEFuYWx5c2lzUmVzdWx0cyhpbnRlcm5hbFJlc3VsdHMpO1xuICAgICAgICAgIFxuICAgICAgICAgIHNldFJlc3VsdHMoY29udGV4dFJlc3VsdHMpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChvbkNvbXBsZXRlKSBvbkNvbXBsZXRlKGNvbnRleHRSZXN1bHRzKTtcbiAgICAgICAgICByZXR1cm4gY29udGV4dFJlc3VsdHM7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCI7XG4gICAgICAgICAgc2V0RXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgaWYgKG9uRXJyb3IpIG9uRXJyb3IoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKG1lc3NhZ2UpKTtcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBzZXRJc0FuYWx5emluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBcbiAgICAgIC8vIE1lcmdlZCBhbmFseXNpcyAtIHVwZGF0ZSB0byB1c2UgbWFya2VycyBjb2xsZWN0aW9uXG4gICAgICBhc3luYyBydW5NZXJnZWRBbmFseXNpcyhzdGF0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHNldElzQW5hbHl6aW5nKHRydWUpO1xuICAgICAgICAgIGxheWVyTWFuYWdlci5yZW1vdmVMYXllcihNQVBfTEFZRVJTLk1FUkdFRF9WSVNJQklMSVRZKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVc2UgdGhlIHByb3ZpZGVkIHN0YXRpb25zIGFycmF5IGRpcmVjdGx5XG4gICAgICAgICAgY29uc3Qgc3RhdGlvbnNUb1VzZSA9IHN0YXRpb25zIHx8IG1hcmtlcnMubWFwKG1hcmtlciA9PiAoe1xuICAgICAgICAgICAgdHlwZTogbWFya2VyLnR5cGUsXG4gICAgICAgICAgICBsb2NhdGlvbjogbWFya2VyLmxvY2F0aW9uLFxuICAgICAgICAgICAgcmFuZ2U6IDUwMCwgLy8gRGVmYXVsdCByYW5nZSBpZiBub3Qgc3BlY2lmaWVkXG4gICAgICAgICAgICBlbGV2YXRpb25PZmZzZXQ6IG1hcmtlci5lbGV2YXRpb25PZmZzZXRcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgaW50ZXJuYWxSZXN1bHRzID0gYXdhaXQgcnVuQW5hbHlzaXMoQW5hbHlzaXNUeXBlLk1FUkdFRCwgeyBzdGF0aW9uczogc3RhdGlvbnNUb1VzZSB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDb252ZXJ0IHRvIGNvbnRleHQgZm9ybWF0XG4gICAgICAgICAgY29uc3QgY29udGV4dFJlc3VsdHMgPSBhZGFwdEFuYWx5c2lzUmVzdWx0cyhpbnRlcm5hbFJlc3VsdHMpO1xuICAgICAgICAgIFxuICAgICAgICAgIHNldFJlc3VsdHMoY29udGV4dFJlc3VsdHMpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChvbkNvbXBsZXRlKSBvbkNvbXBsZXRlKGNvbnRleHRSZXN1bHRzKTtcbiAgICAgICAgICByZXR1cm4gY29udGV4dFJlc3VsdHM7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCI7XG4gICAgICAgICAgc2V0RXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgaWYgKG9uRXJyb3IpIG9uRXJyb3IoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKG1lc3NhZ2UpKTtcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBzZXRJc0FuYWx5emluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBcbiAgICAgIC8vIFN0YXRpb24tdG8tc3RhdGlvbiBMT1MgY2hlY2sgLSB1cGRhdGUgdG8gdXNlIG1hcmtlciBJRHNcbiAgICAgIGFzeW5jIGNoZWNrU3RhdGlvblRvU3RhdGlvbkxPUyhzb3VyY2VNYXJrZXJJZCwgdGFyZ2V0TWFya2VySWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzZXRJc0FuYWx5emluZyh0cnVlKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGaW5kIG1hcmtlcnMgYnkgSURcbiAgICAgICAgICBjb25zdCBzb3VyY2VNYXJrZXIgPSBtYXJrZXJzLmZpbmQobSA9PiBtLmlkID09PSBzb3VyY2VNYXJrZXJJZCk7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0TWFya2VyID0gbWFya2Vycy5maW5kKG0gPT4gbS5pZCA9PT0gdGFyZ2V0TWFya2VySWQpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghc291cmNlTWFya2VyIHx8ICF0YXJnZXRNYXJrZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9uZSBvciBib3RoIG1hcmtlcnMgbm90IGZvdW5kXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDcmVhdGUgY2xlYW4gb2JqZWN0cyB3aXRoIG9ubHkgdGhlIG5lZWRlZCBwcm9wZXJ0aWVzXG4gICAgICAgICAgLy8gVGhpcyBhdm9pZHMgcGFzc2luZyBmdWxsIG1hcmtlcnMgd2hpY2ggbWlnaHQgaGF2ZSBjaXJjdWxhciByZWZlcmVuY2VzXG4gICAgICAgICAgY29uc3Qgc291cmNlU3RhdGlvbkRhdGEgPSB7XG4gICAgICAgICAgICB0eXBlOiBzb3VyY2VNYXJrZXIudHlwZSxcbiAgICAgICAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgICAgICAgIC4uLnNvdXJjZU1hcmtlci5sb2NhdGlvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVsZXZhdGlvbk9mZnNldDogc291cmNlTWFya2VyLmVsZXZhdGlvbk9mZnNldFxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgdGFyZ2V0U3RhdGlvbkRhdGEgPSB7XG4gICAgICAgICAgICB0eXBlOiB0YXJnZXRNYXJrZXIudHlwZSxcbiAgICAgICAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgICAgICAgIC4uLnRhcmdldE1hcmtlci5sb2NhdGlvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVsZXZhdGlvbk9mZnNldDogdGFyZ2V0TWFya2VyLmVsZXZhdGlvbk9mZnNldFxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgbG9zRGF0YSA9IGF3YWl0IHJ1bkFuYWx5c2lzKFxuICAgICAgICAgICAgQW5hbHlzaXNUeXBlLlNUQVRJT05fVE9fU1RBVElPTixcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgIHNvdXJjZVN0YXRpb246IHNvdXJjZVN0YXRpb25EYXRhLFxuICAgICAgICAgICAgICB0YXJnZXRTdGF0aW9uOiB0YXJnZXRTdGF0aW9uRGF0YVxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ3JlYXRlIGludGVybmFsIHJlc3VsdHMgZm9ybWF0XG4gICAgICAgICAgY29uc3QgaW50ZXJuYWxSZXN1bHRzID0ge1xuICAgICAgICAgICAgY2VsbHM6IFtdLFxuICAgICAgICAgICAgc3RhdHM6IHtcbiAgICAgICAgICAgICAgdmlzaWJsZUNlbGxzOiAwLFxuICAgICAgICAgICAgICB0b3RhbENlbGxzOiAwLFxuICAgICAgICAgICAgICBhdmVyYWdlVmlzaWJpbGl0eTogbG9zRGF0YS5zdGF0aW9uTE9TUmVzdWx0Py5jbGVhciA/IDEwMCA6IDAsXG4gICAgICAgICAgICAgIGFuYWx5c2lzVGltZTogMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGF0aW9uTE9TUmVzdWx0OiBsb3NEYXRhLnN0YXRpb25MT1NSZXN1bHQsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDb252ZXJ0IHRvIGNvbnRleHQgZm9ybWF0XG4gICAgICAgICAgY29uc3QgY29udGV4dFJlc3VsdHMgPSBhZGFwdEFuYWx5c2lzUmVzdWx0cyhpbnRlcm5hbFJlc3VsdHMpO1xuICAgICAgICAgIFxuICAgICAgICAgIHNldFJlc3VsdHMoY29udGV4dFJlc3VsdHMpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChvbkNvbXBsZXRlKSBvbkNvbXBsZXRlKGNvbnRleHRSZXN1bHRzKTtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgIHJlc3VsdDogbG9zRGF0YS5zdGF0aW9uTE9TUmVzdWx0ISwgXG4gICAgICAgICAgICBwcm9maWxlOiBsb3NEYXRhLnByb2ZpbGUgfHwgW10gXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIjtcbiAgICAgICAgICBzZXRFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICBpZiAob25FcnJvcikgb25FcnJvcihlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IobWVzc2FnZSkpO1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHNldElzQW5hbHl6aW5nKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLy8gRmxpZ2h0IHBhdGggdmlzaWJpbGl0eSBhbmFseXNpcyAtIHVwZGF0ZSB0byB1c2UgbWFya2VycyBjb2xsZWN0aW9uXG4gICAgICBhc3luYyBydW5GbGlnaHRQYXRoVmlzaWJpbGl0eUFuYWx5c2lzKG9wdGlvbnMgPSB7fSkge1xuICAgICAgaWYgKCFmbGlnaHRQbGFuKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnTm8gZmxpZ2h0IHBsYW4gYXZhaWxhYmxlJztcbiAgICAgICAgc2V0RXJyb3IobWVzc2FnZSk7XG4gICAgICAgIHJldHVybiB7IGNlbGxzOiBbXSwgc3RhdHM6IG51bGwgfSBhcyBDb250ZXh0QW5hbHlzaXNSZXN1bHRzOyAvLyBSZXR1cm4gZW1wdHkgcmVzdWx0c1xuICAgICAgfVxuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBzZXRJc0FuYWx5emluZyh0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbW92ZSBwcmV2aW91cyB2aXNpYmlsaXR5IGxheWVyXG4gICAgICAgIGxheWVyTWFuYWdlci5yZW1vdmVMYXllcihNQVBfTEFZRVJTLkZMSUdIVF9QQVRIX1ZJU0lCSUxJVFkpO1xuICAgICAgICBcbiAgICAgICAgLy8gSW1wb3J0IHRoZSB2aXNpYmlsaXR5IGFuYWx5c2lzIGR5bmFtaWNhbGx5IChvbmx5IHdoZW4gbmVlZGVkKVxuICAgICAgICBjb25zdCB7IGFuYWx5emVGbGlnaHRQYXRoVmlzaWJpbGl0eSwgYWRkVmlzaWJpbGl0eUxheWVyIH0gPSBhd2FpdCBpbXBvcnQoXG4gICAgICAgICAgJy4uLy4uL0xPU0FuYWx5c2VzL1V0aWxzL0ZsaWdodFBhdGhWaXNpYmlsaXR5RW5naW5lJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBGaWx0ZXIgbWFya2VycyBpZiBtYXJrZXJJZHMgaXMgcHJvdmlkZWRcbiAgICAgICAgY29uc3QgbWFya2Vyc1RvVXNlID0gb3B0aW9ucy5tYXJrZXJJZHMgXG4gICAgICAgICAgPyBtYXJrZXJzLmZpbHRlcihtYXJrZXIgPT4gb3B0aW9ucy5tYXJrZXJJZHM/LmluY2x1ZGVzKG1hcmtlci5pZCkpXG4gICAgICAgICAgOiBtYXJrZXJzO1xuICAgICAgICBcbiAgICAgICAgLy8gUnVuIHRoZSBhbmFseXNpcyB3aXRoIHNlbGVjdGVkIG1hcmtlcnNcbiAgICAgICAgY29uc3QgdmlzaWJpbGl0eVJlc3VsdHMgPSBhd2FpdCBhbmFseXplRmxpZ2h0UGF0aFZpc2liaWxpdHkoXG4gICAgICAgICAgbWFwISxcbiAgICAgICAgICBmbGlnaHRQbGFuLFxuICAgICAgICAgIG1hcmtlcnNUb1VzZSxcbiAgICAgICAgICBlbGV2YXRpb25TZXJ2aWNlLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNhbXBsZUludGVydmFsOiBvcHRpb25zLnNhbXBsZUludGVydmFsIHx8IDEwLFxuICAgICAgICAgICAgbWluaW11bU9mZnNldDogb3B0aW9ucy5taW5pbXVtT2Zmc2V0IHx8IDEsXG4gICAgICAgICAgICBvblByb2dyZXNzOiAocHJvZ3Jlc3MpID0+IHtcbiAgICAgICAgICAgICAgc2V0UHJvZ3Jlc3MocHJvZ3Jlc3MpO1xuICAgICAgICAgICAgICBpZiAob25Qcm9ncmVzcykgb25Qcm9ncmVzcyhwcm9ncmVzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8gQWx3YXlzIGFkZCB0aGUgdmlzaWJpbGl0eSBsYXllciB3aGVuIGFuYWx5c2lzIGNvbXBsZXRlc1xuICAgICAgICBpZiAobWFwKSB7XG4gICAgICAgICAgLy8gRmlyc3QgZW5zdXJlIGFueSBvbGQgbGF5ZXIgaXMgcmVtb3ZlZFxuICAgICAgICAgIGxheWVyTWFuYWdlci5yZW1vdmVMYXllcihNQVBfTEFZRVJTLkZMSUdIVF9QQVRIX1ZJU0lCSUxJVFkpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCB0aGUgbmV3IHZpc2liaWxpdHkgbGF5ZXJcbiAgICAgICAgICBhZGRWaXNpYmlsaXR5TGF5ZXIobWFwLCB2aXNpYmlsaXR5UmVzdWx0cy5zZWdtZW50cyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQXBwbHkgdmlzaWJpbGl0eSBiYXNlZCBvbiBvcHRpb24gKHZpc2libGUgYnkgZGVmYXVsdClcbiAgICAgICAgICBsYXllck1hbmFnZXIuc2V0TGF5ZXJWaXNpYmlsaXR5KFxuICAgICAgICAgICAgTUFQX0xBWUVSUy5GTElHSFRfUEFUSF9WSVNJQklMSVRZLCBcbiAgICAgICAgICAgIG9wdGlvbnMuc2hvd0xheWVyICE9PSBmYWxzZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgaW50ZXJuYWwgcmVzdWx0cyBvYmplY3RcbiAgICAgICAgY29uc3QgaW50ZXJuYWxSZXN1bHRzOiBUeXBlc0FuYWx5c2lzUmVzdWx0cyA9IHtcbiAgICAgICAgICBjZWxsczogW10sIC8vIE5vdCB1c2luZyBjZWxscyBmb3IgdGhpcyBhbmFseXNpc1xuICAgICAgICAgIHN0YXRzOiB7XG4gICAgICAgICAgICB2aXNpYmxlQ2VsbHM6IDAsXG4gICAgICAgICAgICB0b3RhbENlbGxzOiAwLFxuICAgICAgICAgICAgYXZlcmFnZVZpc2liaWxpdHk6IHZpc2liaWxpdHlSZXN1bHRzLnN0YXRzLmNvdmVyYWdlUGVyY2VudGFnZSxcbiAgICAgICAgICAgIGFuYWx5c2lzVGltZTogdmlzaWJpbGl0eVJlc3VsdHMuc3RhdHMuYW5hbHlzaXNUaW1lXG4gICAgICAgICAgfSxcbiAgICAgICAgICBmbGlnaHRQYXRoVmlzaWJpbGl0eToge1xuICAgICAgICAgICAgdmlzaWJsZUxlbmd0aDogdmlzaWJpbGl0eVJlc3VsdHMuc3RhdHMudmlzaWJsZUxlbmd0aCxcbiAgICAgICAgICAgIHRvdGFsTGVuZ3RoOiB2aXNpYmlsaXR5UmVzdWx0cy5zdGF0cy50b3RhbExlbmd0aCxcbiAgICAgICAgICAgIGNvdmVyYWdlUGVyY2VudGFnZTogdmlzaWJpbGl0eVJlc3VsdHMuc3RhdHMuY292ZXJhZ2VQZXJjZW50YWdlLFxuICAgICAgICAgICAgLy8gQ29udmVydCB0aGUgYXJyYXktYmFzZWQgc3RhdHMgdG8gYSBSZWNvcmQgZm9ybWF0IGZvciBpbnRlcm5hbCB1c2VcbiAgICAgICAgICAgIHN0YXRpb25TdGF0czogdmlzaWJpbGl0eVJlc3VsdHMuc3RhdHMuc3RhdGlvblN0YXRzPy5yZWR1Y2UoKGFjYywgc3RhdCkgPT4ge1xuICAgICAgICAgICAgICBhY2NbYCR7c3RhdC5zdGF0aW9uVHlwZX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YF0gPSBzdGF0LnZpc2libGVMZW5ndGg7XG4gICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbnZlcnQgdG8gY29udGV4dCBmb3JtYXRcbiAgICAgICAgY29uc3QgY29udGV4dFJlc3VsdHMgPSBhZGFwdEFuYWx5c2lzUmVzdWx0cyhpbnRlcm5hbFJlc3VsdHMpO1xuICAgICAgICBcbiAgICAgICAgc2V0UmVzdWx0cyhjb250ZXh0UmVzdWx0cyk7XG4gICAgICAgIFxuICAgICAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZShjb250ZXh0UmVzdWx0cyk7XG4gICAgICAgIHJldHVybiBjb250ZXh0UmVzdWx0cztcbiAgICAgICAgXG4gICAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIjtcbiAgICAgICAgc2V0RXJyb3IobWVzc2FnZSk7XG4gICAgICAgIGlmIChvbkVycm9yKSBvbkVycm9yKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihtZXNzYWdlKSk7XG4gICAgICAgIHJldHVybiB7IGNlbGxzOiBbXSwgc3RhdHM6IG51bGwgfSBhcyBDb250ZXh0QW5hbHlzaXNSZXN1bHRzOyAvLyBSZXR1cm4gZW1wdHkgcmVzdWx0c1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0SXNBbmFseXppbmcoZmFsc2UpO1xuICAgICAgICBzZXRQcm9ncmVzcygwKTtcbiAgICAgIH1cbiAgICB9LFxuICAgICAgXG4gICAgICAvKipcbiAgICAgICAqIEFuYWx5emVzIGEgZ3JpZCBvZiB0ZXJyYWluIGNlbGxzIHRvIGdlbmVyYXRlIGVsZXZhdGlvbiBzdGF0aXN0aWNzXG4gICAgICAgKiBAcGFyYW0gZ3JpZENlbGxzIC0gVGhlIGdyaWQgY2VsbHMgdG8gYW5hbHl6ZVxuICAgICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbmFseXNpcyBvcHRpb25zIGluY2x1ZGluZyByZWZlcmVuY2UgYWx0aXR1ZGUgYW5kIHByb2dyZXNzIHRyYWNraW5nXG4gICAgICAgKiBAcmV0dXJucyBBbmFseXNpcyByZXN1bHRzIHdpdGggdGVycmFpbiBzdGF0aXN0aWNzXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGFuYWx5emVUZXJyYWluR3JpZChcbiAgICAgICAgZ3JpZENlbGxzOiBHcmlkQ2VsbFtdLCBcbiAgICAgICAgb3B0aW9ucz86IHsgXG4gICAgICAgICAgcmVmZXJlbmNlQWx0aXR1ZGU/OiBudW1iZXI7XG4gICAgICAgICAgb25Qcm9ncmVzcz86IChwcm9ncmVzczogbnVtYmVyKSA9PiBib29sZWFuIHwgdm9pZDtcbiAgICAgICAgfVxuICAgICAgKTogUHJvbWlzZTxDb250ZXh0QW5hbHlzaXNSZXN1bHRzPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgc2V0SXNBbmFseXppbmcodHJ1ZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVGhlIGhvb2sncyBhbmFseXplVGVycmFpbkdyaWQgZXhwZWN0cyBhIG51bWJlciBmb3IgcmVmZXJlbmNlQWx0aXR1ZGUsIG5vdCBhbiBvYmplY3RcbiAgICAgICAgICAvLyBKdXN0IHBhc3MgdGhlIHJlZmVyZW5jZUFsdGl0dWRlIHZhbHVlIGRpcmVjdGx5XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl6ZVRlcnJhaW5HcmlkKFxuICAgICAgICAgICAgZ3JpZENlbGxzLFxuICAgICAgICAgICAgb3B0aW9ucz8ucmVmZXJlbmNlQWx0aXR1ZGUgfHwgMTIwXG4gICAgICAgICAgKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGb3IgdGhlIHByb2dyZXNzIHRyYWNraW5nLCB3ZSdsbCBuZWVkIHRvIGFkZCBhIGxpc3RlbmVyIGluIHRoZSB1c2VFZmZlY3RcbiAgICAgICAgICBpZiAob3B0aW9ucz8ub25Qcm9ncmVzcyB8fCBvblByb2dyZXNzKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9ncmVzc0hhbmRsZXIgPSAocHJvZ3Jlc3M6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICBpZiAob3B0aW9ucz8ub25Qcm9ncmVzcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLm9uUHJvZ3Jlc3MocHJvZ3Jlc3MpIHx8IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChvblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgb25Qcm9ncmVzcyhwcm9ncmVzcyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVnaXN0ZXIgcHJvZ3Jlc3MgaGFuZGxpbmcgaGVyZSBpZiBuZWVkZWRcbiAgICAgICAgICAgIHNldFByb2dyZXNzKDApOyAvLyBTdGFydCBhdCAwJVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDcmVhdGUgaW50ZXJuYWwgcmVzdWx0cyBmb3JtYXRcbiAgICAgICAgICBjb25zdCBpbnRlcm5hbFJlc3VsdHM6IFR5cGVzQW5hbHlzaXNSZXN1bHRzID0ge1xuICAgICAgICAgICAgY2VsbHM6IGdyaWRDZWxscyxcbiAgICAgICAgICAgIHN0YXRzOiB7XG4gICAgICAgICAgICAgIHZpc2libGVDZWxsczogZ3JpZENlbGxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgdG90YWxDZWxsczogZ3JpZENlbGxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgYXZlcmFnZVZpc2liaWxpdHk6IDEwMCwgLy8gTm90IGRpcmVjdGx5IGFwcGxpY2FibGUgZm9yIHRlcnJhaW4gYW5hbHlzaXNcbiAgICAgICAgICAgICAgYW5hbHlzaXNUaW1lOiBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgICAgICAgICAgdGVycmFpblN0YXRzOiB7XG4gICAgICAgICAgICAgICAgaGlnaGVzdEVsZXZhdGlvbjogcmVzdWx0LmhpZ2hlc3RFbGV2YXRpb24sXG4gICAgICAgICAgICAgICAgbG93ZXN0RWxldmF0aW9uOiByZXN1bHQubG93ZXN0RWxldmF0aW9uLFxuICAgICAgICAgICAgICAgIGF2ZXJhZ2VFbGV2YXRpb246IHJlc3VsdC5hdmVyYWdlRWxldmF0aW9uLFxuICAgICAgICAgICAgICAgIGVsZXZhdGlvbkRpc3RyaWJ1dGlvbjogcmVzdWx0LmVsZXZhdGlvbkRpc3RyaWJ1dGlvbixcbiAgICAgICAgICAgICAgICBzYW1wbGVFbGV2YXRpb25zOiByZXN1bHQuZWxldmF0aW9ucyAvLyBJbmNsdWRlIHNhbXBsZSBlbGV2YXRpb25zXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENvbnZlcnQgdG8gY29udGV4dCBmb3JtYXRcbiAgICAgICAgICBjb25zdCBjb250ZXh0UmVzdWx0cyA9IGFkYXB0QW5hbHlzaXNSZXN1bHRzKGludGVybmFsUmVzdWx0cyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2V0IHJlc3VsdHMgYW5kIG5vdGlmeSBjb21wbGV0aW9uXG4gICAgICAgICAgc2V0UmVzdWx0cyhjb250ZXh0UmVzdWx0cyk7XG4gICAgICAgICAgaWYgKG9uQ29tcGxldGUpIG9uQ29tcGxldGUoY29udGV4dFJlc3VsdHMpO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBjb250ZXh0UmVzdWx0cztcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIjtcbiAgICAgICAgICBzZXRFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICBpZiAob25FcnJvcikgb25FcnJvcihlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IobWVzc2FnZSkpO1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHNldElzQW5hbHl6aW5nKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLy8gQWJvcnQgYW55IHJ1bm5pbmcgYW5hbHlzaXNcbiAgICAgIGFib3J0QW5hbHlzaXMoKSB7XG4gICAgICAgIGFib3J0QW5hbHlzaXMoKTtcbiAgICAgIH0sXG4gICAgfSksIFtcbiAgICAgIG1hcCxcbiAgICAgIGZsaWdodFBsYW4sXG4gICAgICBydW5BbmFseXNpcyxcbiAgICAgIGFib3J0QW5hbHlzaXMsXG4gICAgICBjbGVhbnVwLFxuICAgICAgc2V0UmVzdWx0cyxcbiAgICAgIHNldEVycm9yLFxuICAgICAgc2V0SXNBbmFseXppbmcsXG4gICAgICBvbkNvbXBsZXRlLFxuICAgICAgb25FcnJvcixcbiAgICAgIGVsZXZhdGlvblNlcnZpY2UsXG4gICAgICBtYXJrZXJzLFxuICAgICAgc2FtcGxpbmdSZXNvbHV0aW9uLFxuICAgICAgYW5hbHl6ZVRlcnJhaW5HcmlkLFxuICAgICAgb25Qcm9ncmVzcyxcbiAgICAgIHNldFByb2dyZXNzXG4gICAgXSk7XG5cbiAgICAvLyBUaGUgY29udHJvbGxlciBkb2Vzbid0IHJlbmRlciBhbnl0aGluZywgaXQganVzdCBtYW5hZ2VzIHN0YXRlXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbik7XG5cbkdyaWRBbmFseXNpc0NvbnRyb2xsZXIuZGlzcGxheU5hbWUgPSAnR3JpZEFuYWx5c2lzQ29udHJvbGxlcic7XG5cbmV4cG9ydCBkZWZhdWx0IEdyaWRBbmFseXNpc0NvbnRyb2xsZXI7Il0sIm5hbWVzIjpbImZvcndhcmRSZWYiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZUdyaWRBbmFseXNpcyIsInVzZUxPU0FuYWx5c2lzIiwidXNlTWFwQ29udGV4dCIsImxheWVyTWFuYWdlciIsIk1BUF9MQVlFUlMiLCJBbmFseXNpc1R5cGUiLCJ1c2VNYXJrZXJzQ29udGV4dCIsImFkYXB0QW5hbHlzaXNSZXN1bHRzIiwiaW50ZXJuYWxSZXN1bHRzIiwicmVzdWx0cyIsImNlbGxzIiwic3RhdHMiLCJ2aXNpYmxlQ2VsbHMiLCJ0b3RhbENlbGxzIiwiYXZlcmFnZVZpc2liaWxpdHkiLCJhbmFseXNpc1RpbWUiLCJ0ZXJyYWluU3RhdHMiLCJzdGF0aW9uTE9TUmVzdWx0IiwiZmxpZ2h0UGF0aFZpc2liaWxpdHkiLCJ2aXNpYmxlTGVuZ3RoIiwidG90YWxMZW5ndGgiLCJjb3ZlcmFnZVBlcmNlbnRhZ2UiLCJzdGF0aW9uU3RhdHMiLCJPYmplY3QiLCJlbnRyaWVzIiwibWFwIiwic3RhdGlvbklkIiwic3RhdGlvblR5cGUiLCJzcGxpdCIsIkdyaWRBbmFseXNpc0NvbnRyb2xsZXIiLCJmbGlnaHRQbGFuIiwib25Qcm9ncmVzcyIsIm9uRXJyb3IiLCJvbkNvbXBsZXRlIiwicmVmIiwiZWxldmF0aW9uU2VydmljZSIsInNldFJlc3VsdHMiLCJzZXRFcnJvciIsInNldFByb2dyZXNzIiwic2V0SXNBbmFseXppbmciLCJzYW1wbGluZ1Jlc29sdXRpb24iLCJpbnRlcm5hbFByb2dyZXNzIiwic2V0SW50ZXJuYWxQcm9ncmVzcyIsIm1hcmtlcnMiLCJydW5BbmFseXNpcyIsImFib3J0QW5hbHlzaXMiLCJwcm9ncmVzcyIsImFuYWx5emVUZXJyYWluR3JpZCIsInZhbHVlIiwiY2xlYW51cCIsImxheWVyc1RvQ2xlYW4iLCJ2YWx1ZXMiLCJmaWx0ZXIiLCJsYXllcklkIiwiRkxJR0hUX1BBVEgiLCJmb3JFYWNoIiwiZ2V0TGF5ZXIiLCJyZW1vdmVMYXllciIsImxheWVycyIsImdldFN0eWxlIiwibGF5ZXIiLCJpZCIsInN0YXJ0c1dpdGgiLCJydW5GbGlnaHRQYXRoQW5hbHlzaXMiLCJtZXNzYWdlIiwiY29udGV4dFJlc3VsdHMiLCJlcnJvciIsIkVycm9yIiwicnVuU3RhdGlvbkFuYWx5c2lzIiwib3B0aW9ucyIsImxvY2F0aW9uIiwibG5nIiwibGF0IiwiZXJyb3JNc2ciLCJ0b1VwcGVyQ2FzZSIsImxheWVyUHJlZml4IiwiR0NTX0dSSUQiLCJPQlNFUlZFUl9HUklEIiwiUkVQRUFURVJfR1JJRCIsIm1hcmtlcklkIiwiU1RBVElPTiIsInJ1bk1lcmdlZEFuYWx5c2lzIiwic3RhdGlvbnMiLCJNRVJHRURfVklTSUJJTElUWSIsInN0YXRpb25zVG9Vc2UiLCJtYXJrZXIiLCJ0eXBlIiwicmFuZ2UiLCJlbGV2YXRpb25PZmZzZXQiLCJNRVJHRUQiLCJjaGVja1N0YXRpb25Ub1N0YXRpb25MT1MiLCJzb3VyY2VNYXJrZXJJZCIsInRhcmdldE1hcmtlcklkIiwic291cmNlTWFya2VyIiwiZmluZCIsIm0iLCJ0YXJnZXRNYXJrZXIiLCJzb3VyY2VTdGF0aW9uRGF0YSIsInRhcmdldFN0YXRpb25EYXRhIiwibG9zRGF0YSIsIlNUQVRJT05fVE9fU1RBVElPTiIsInNvdXJjZVN0YXRpb24iLCJ0YXJnZXRTdGF0aW9uIiwiY2xlYXIiLCJyZXN1bHQiLCJwcm9maWxlIiwicnVuRmxpZ2h0UGF0aFZpc2liaWxpdHlBbmFseXNpcyIsIkZMSUdIVF9QQVRIX1ZJU0lCSUxJVFkiLCJhbmFseXplRmxpZ2h0UGF0aFZpc2liaWxpdHkiLCJhZGRWaXNpYmlsaXR5TGF5ZXIiLCJtYXJrZXJzVG9Vc2UiLCJtYXJrZXJJZHMiLCJpbmNsdWRlcyIsInZpc2liaWxpdHlSZXN1bHRzIiwic2FtcGxlSW50ZXJ2YWwiLCJtaW5pbXVtT2Zmc2V0Iiwic2VnbWVudHMiLCJzZXRMYXllclZpc2liaWxpdHkiLCJzaG93TGF5ZXIiLCJyZWR1Y2UiLCJhY2MiLCJzdGF0IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwiZ3JpZENlbGxzIiwic3RhcnRUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJyZWZlcmVuY2VBbHRpdHVkZSIsInByb2dyZXNzSGFuZGxlciIsImxlbmd0aCIsImhpZ2hlc3RFbGV2YXRpb24iLCJsb3dlc3RFbGV2YXRpb24iLCJhdmVyYWdlRWxldmF0aW9uIiwiZWxldmF0aW9uRGlzdHJpYnV0aW9uIiwic2FtcGxlRWxldmF0aW9ucyIsImVsZXZhdGlvbnMiLCJkaXNwbGF5TmFtZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Analyses/Services/GridAnalysis/GridAnalysisController.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Analyses/Types/GridAnalysisTypes.ts":
/*!****************************************************************!*\
  !*** ./src/app/components/Analyses/Types/GridAnalysisTypes.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnalysisType: () => (/* binding */ AnalysisType),\n/* harmony export */   convertAOCellToAnalysisCell: () => (/* binding */ convertAOCellToAnalysisCell),\n/* harmony export */   convertAnalysisCellToAOCell: () => (/* binding */ convertAnalysisCellToAOCell),\n/* harmony export */   createGridCell: () => (/* binding */ createGridCell)\n/* harmony export */ });\n// src/app/components/Analyses/Types/GridAnalysisTypes.ts\n/**\n * GridAnalysisTypes.ts\n *\n * UNIFIED type definitions for the grid analysis system.\n * This file consolidates all types to prevent conflicts between\n * Area of Operations (AO) and Line of Sight (LOS) analysis systems.\n *\n * These types are used by:\n * - useGridAnalysis hook\n * - Analysis module implementations  \n * - UI components displaying analysis results\n * - Area of Operations terrain grids\n * - LayerManager for map display\n */ // Basic coordinate types\n// Analysis types\nvar AnalysisType = /*#__PURE__*/ function(AnalysisType) {\n    AnalysisType[\"FLIGHT_PATH\"] = \"flight_path\";\n    AnalysisType[\"STATION\"] = \"station\";\n    AnalysisType[\"MERGED\"] = \"merged\";\n    AnalysisType[\"STATION_TO_STATION\"] = \"station_to_station\";\n    AnalysisType[\"FLIGHT_PATH_VISIBILITY\"] = \"flight_path_visibility\";\n    AnalysisType[\"TERRAIN\"] = \"terrain\"; // Added new terrain analysis type\n    return AnalysisType;\n}({});\n// HELPER FUNCTIONS for backward compatibility\n/**\n * Converts AO-style GridCell to unified GridCell format\n * Used when AO system passes terrain grids to analysis system\n */ function convertAOCellToAnalysisCell(aoCell) {\n    return {\n        id: aoCell.id,\n        geometry: aoCell.geometry,\n        properties: {\n            // Set default analysis values\n            visibility: 0,\n            fullyVisible: false,\n            lastAnalyzed: Date.now(),\n            // Copy elevation from AO cell (now required, not optional)\n            elevation: aoCell.properties.elevation,\n            // Copy any additional properties\n            ...aoCell.properties\n        }\n    };\n}\n/**\n * Converts unified GridCell back to AO-style format\n * Used when analysis system returns data to AO system\n */ function convertAnalysisCellToAOCell(analysisCell) {\n    return {\n        id: analysisCell.id,\n        geometry: analysisCell.geometry,\n        properties: {\n            elevation: analysisCell.properties.elevation,\n            // Copy additional properties except analysis-specific ones\n            ...Object.fromEntries(Object.entries(analysisCell.properties).filter(([key])=>![\n                    'visibility',\n                    'fullyVisible',\n                    'lastAnalyzed',\n                    'visibleStationCount'\n                ].includes(key)))\n        }\n    };\n}\n/**\n * Creates a new GridCell with default analysis properties\n * Used when generating fresh grid cells for analysis\n */ function createGridCell(id, geometry, elevation, additionalProperties = {}) {\n    return {\n        id,\n        geometry,\n        properties: {\n            visibility: 0,\n            fullyVisible: false,\n            lastAnalyzed: Date.now(),\n            elevation,\n            ...additionalProperties\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvQW5hbHlzZXMvVHlwZXMvR3JpZEFuYWx5c2lzVHlwZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLHlEQUF5RDtBQUN6RDs7Ozs7Ozs7Ozs7OztDQWFDLEdBRUQseUJBQXlCO0FBMEd6QixpQkFBaUI7QUFDViwwQ0FBS0E7Ozs7Ozt5Q0FNVSxrQ0FBa0M7V0FONUNBO01BT1g7QUFFRCw4Q0FBOEM7QUFFOUM7OztDQUdDLEdBQ00sU0FBU0MsNEJBQTRCQyxNQU8zQztJQUNDLE9BQU87UUFDTEMsSUFBSUQsT0FBT0MsRUFBRTtRQUNiQyxVQUFVRixPQUFPRSxRQUFRO1FBQ3pCQyxZQUFZO1lBQ1YsOEJBQThCO1lBQzlCQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsY0FBY0MsS0FBS0MsR0FBRztZQUN0QiwyREFBMkQ7WUFDM0RDLFdBQVdULE9BQU9HLFVBQVUsQ0FBQ00sU0FBUztZQUN0QyxpQ0FBaUM7WUFDakMsR0FBR1QsT0FBT0csVUFBVTtRQUN0QjtJQUNGO0FBQ0Y7QUFFQTs7O0NBR0MsR0FDTSxTQUFTTyw0QkFBNEJDLFlBQXNCO0lBUWhFLE9BQU87UUFDTFYsSUFBSVUsYUFBYVYsRUFBRTtRQUNuQkMsVUFBVVMsYUFBYVQsUUFBUTtRQUMvQkMsWUFBWTtZQUNWTSxXQUFXRSxhQUFhUixVQUFVLENBQUNNLFNBQVM7WUFDNUMsMkRBQTJEO1lBQzNELEdBQUdHLE9BQU9DLFdBQVcsQ0FDbkJELE9BQU9FLE9BQU8sQ0FBQ0gsYUFBYVIsVUFBVSxFQUFFWSxNQUFNLENBQzVDLENBQUMsQ0FBQ0MsSUFBSSxHQUFLLENBQUM7b0JBQUM7b0JBQWM7b0JBQWdCO29CQUFnQjtpQkFBc0IsQ0FBQ0MsUUFBUSxDQUFDRCxNQUU5RjtRQUNIO0lBQ0Y7QUFDRjtBQUVBOzs7Q0FHQyxHQUNNLFNBQVNFLGVBQ2RqQixFQUFVLEVBQ1ZDLFFBQXlCLEVBQ3pCTyxTQUFpQixFQUNqQlUsdUJBQTRDLENBQUMsQ0FBQztJQUU5QyxPQUFPO1FBQ0xsQjtRQUNBQztRQUNBQyxZQUFZO1lBQ1ZDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxjQUFjQyxLQUFLQyxHQUFHO1lBQ3RCQztZQUNBLEdBQUdVLG9CQUFvQjtRQUN6QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbXBvbmVudHMvQW5hbHlzZXMvVHlwZXMvR3JpZEFuYWx5c2lzVHlwZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2FwcC9jb21wb25lbnRzL0FuYWx5c2VzL1R5cGVzL0dyaWRBbmFseXNpc1R5cGVzLnRzXG4vKipcbiAqIEdyaWRBbmFseXNpc1R5cGVzLnRzXG4gKlxuICogVU5JRklFRCB0eXBlIGRlZmluaXRpb25zIGZvciB0aGUgZ3JpZCBhbmFseXNpcyBzeXN0ZW0uXG4gKiBUaGlzIGZpbGUgY29uc29saWRhdGVzIGFsbCB0eXBlcyB0byBwcmV2ZW50IGNvbmZsaWN0cyBiZXR3ZWVuXG4gKiBBcmVhIG9mIE9wZXJhdGlvbnMgKEFPKSBhbmQgTGluZSBvZiBTaWdodCAoTE9TKSBhbmFseXNpcyBzeXN0ZW1zLlxuICpcbiAqIFRoZXNlIHR5cGVzIGFyZSB1c2VkIGJ5OlxuICogLSB1c2VHcmlkQW5hbHlzaXMgaG9va1xuICogLSBBbmFseXNpcyBtb2R1bGUgaW1wbGVtZW50YXRpb25zICBcbiAqIC0gVUkgY29tcG9uZW50cyBkaXNwbGF5aW5nIGFuYWx5c2lzIHJlc3VsdHNcbiAqIC0gQXJlYSBvZiBPcGVyYXRpb25zIHRlcnJhaW4gZ3JpZHNcbiAqIC0gTGF5ZXJNYW5hZ2VyIGZvciBtYXAgZGlzcGxheVxuICovXG5cbi8vIEJhc2ljIGNvb3JkaW5hdGUgdHlwZXNcbmV4cG9ydCB0eXBlIENvb3JkaW5hdGVzMkQgPSBbbnVtYmVyLCBudW1iZXJdO1xuZXhwb3J0IHR5cGUgQ29vcmRpbmF0ZXMzRCA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTsgLy8gW2xvbmdpdHVkZSwgbGF0aXR1ZGUsIGFsdGl0dWRlXVxuXG4vLyBVTklGSUVEIEdyaWQgY2VsbCByZXByZXNlbnRhdGlvbiAtIHdvcmtzIGZvciBib3RoIEFPIGFuZCBBbmFseXNpcyBzeXN0ZW1zXG5leHBvcnQgaW50ZXJmYWNlIEdyaWRDZWxsIHtcbiAgaWQ6IHN0cmluZztcbiAgZ2VvbWV0cnk6IEdlb0pTT04uUG9seWdvbjtcbiAgcHJvcGVydGllczoge1xuICAgIC8vIENvcmUgYW5hbHlzaXMgcHJvcGVydGllcyAocmVxdWlyZWQgZm9yIExPUyBhbmFseXNpcylcbiAgICB2aXNpYmlsaXR5OiBudW1iZXI7IC8vIDAtMTAwIHZpc2liaWxpdHkgcGVyY2VudGFnZVxuICAgIGZ1bGx5VmlzaWJsZTogYm9vbGVhbjsgLy8gV2hldGhlciBjZWxsIGhhcyAxMDAlIHZpc2liaWxpdHlcbiAgICBsYXN0QW5hbHl6ZWQ6IG51bWJlcjsgLy8gVGltZXN0YW1wIG9mIGxhc3QgYW5hbHlzaXNcbiAgICBcbiAgICAvLyBUZXJyYWluIHByb3BlcnRpZXMgKHJlcXVpcmVkIGZvciBBTyBjb21wYXRpYmlsaXR5KVxuICAgIGVsZXZhdGlvbjogbnVtYmVyOyAvLyBUZXJyYWluIGVsZXZhdGlvbiBpbiBtZXRlcnMgKE5PVCBvcHRpb25hbCAtIHJlcXVpcmVkIGZvciBBTylcbiAgICBcbiAgICAvLyBBZGRpdGlvbmFsIGFuYWx5c2lzIHByb3BlcnRpZXNcbiAgICB2aXNpYmxlU3RhdGlvbkNvdW50PzogbnVtYmVyOyAvLyBBRERFRDogTnVtYmVyIG9mIHN0YXRpb25zIHRoYXQgY2FuIHNlZSB0aGlzIGNlbGxcbiAgICBcbiAgICAvLyBGbGV4aWJsZSBhZGRpdGlvbmFsIHByb3BlcnRpZXNcbiAgICBba2V5OiBzdHJpbmddOiBhbnk7XG4gIH07XG59XG5cbi8vIFRlcnJhaW4gc3RhdGlzdGljcyBmb3IgYW5hbHlzaXMgcmVzdWx0c1xuZXhwb3J0IGludGVyZmFjZSBUZXJyYWluU3RhdHMge1xuICBoaWdoZXN0RWxldmF0aW9uOiBudW1iZXI7IC8vIE1heGltdW0gdGVycmFpbiBlbGV2YXRpb25cbiAgbG93ZXN0RWxldmF0aW9uOiBudW1iZXI7IC8vIE1pbmltdW0gdGVycmFpbiBlbGV2YXRpb25cbiAgYXZlcmFnZUVsZXZhdGlvbjogbnVtYmVyOyAvLyBBdmVyYWdlIHRlcnJhaW4gZWxldmF0aW9uXG4gIGVsZXZhdGlvbkRpc3RyaWJ1dGlvbjogUmVjb3JkPHN0cmluZywgbnVtYmVyPjsgLy8gSGlzdG9ncmFtIG9mIGVsZXZhdGlvbnNcbiAgc2FtcGxlRWxldmF0aW9ucz86IG51bWJlcltdOyAvLyBTYW1wbGUgZWxldmF0aW9ucyBmb3IgZGV0YWlsZWQgYW5hbHlzaXNcbn1cblxuLy8gU3RhdGlzdGljcyBmb3IgYW5hbHlzaXMgcmVzdWx0c1xuZXhwb3J0IGludGVyZmFjZSBBbmFseXNpc1N0YXRzIHtcbiAgdmlzaWJsZUNlbGxzOiBudW1iZXI7XG4gIHRvdGFsQ2VsbHM6IG51bWJlcjtcbiAgYXZlcmFnZVZpc2liaWxpdHk6IG51bWJlcjtcbiAgYW5hbHlzaXNUaW1lOiBudW1iZXI7XG4gIHRlcnJhaW5TdGF0cz86IFRlcnJhaW5TdGF0czsgLy8gVGVycmFpbiBzdGF0aXN0aWNzIGlmIGF2YWlsYWJsZVxufVxuXG4vLyBGSVhFRDogQ29tcGxldGUgYW5hbHlzaXMgcmVzdWx0cyB3aXRoIGFsbCBtaXNzaW5nIHByb3BlcnRpZXNcbmV4cG9ydCBpbnRlcmZhY2UgQW5hbHlzaXNSZXN1bHRzIHtcbiAgY2VsbHM6IEdyaWRDZWxsW107IC8vIEFsbCBhbmFseXplZCBjZWxsc1xuICBzdGF0czogQW5hbHlzaXNTdGF0czsgLy8gUmVzdWx0IHN0YXRpc3RpY3NcbiAgc3RhdGlvbkxPU1Jlc3VsdD86IFN0YXRpb25MT1NSZXN1bHQ7IC8vIEZvciBzdGF0aW9uLXRvLXN0YXRpb24gYW5hbHlzaXNcbiAgZmxpZ2h0UGF0aFZpc2liaWxpdHk/OiBGbGlnaHRQYXRoVmlzaWJpbGl0eVJlc3VsdHM7IC8vIEZvciBmbGlnaHQgcGF0aCB2aXNpYmlsaXR5XG4gIHByb2ZpbGU/OiBMT1NQcm9maWxlUG9pbnRbXTsgLy8gUHJvZmlsZSBkYXRhIGlmIGFwcGxpY2FibGVcbiAgXG4gIC8vIEZJWEVEOiBEaXJlY3QgdGVycmFpbiBhbmFseXNpcyBwcm9wZXJ0aWVzIChhY2Nlc3NlZCBieSBHcmlkQW5hbHlzaXNDb250cm9sbGVyKVxuICBoaWdoZXN0RWxldmF0aW9uPzogbnVtYmVyOyAvLyBNYXhpbXVtIGVsZXZhdGlvbiBmb3VuZFxuICBsb3dlc3RFbGV2YXRpb24/OiBudW1iZXI7IC8vIE1pbmltdW0gZWxldmF0aW9uIGZvdW5kXG4gIGF2ZXJhZ2VFbGV2YXRpb24/OiBudW1iZXI7IC8vIEF2ZXJhZ2UgZWxldmF0aW9uXG4gIGVsZXZhdGlvbkRpc3RyaWJ1dGlvbj86IFJlY29yZDxzdHJpbmcsIG51bWJlcj47IC8vIEVsZXZhdGlvbiBoaXN0b2dyYW1cbiAgZWxldmF0aW9ucz86IG51bWJlcltdOyAvLyBBcnJheSBvZiBzYW1wbGUgZWxldmF0aW9uc1xufVxuXG4vLyBTdGF0aW9uLXRvLXN0YXRpb24gTE9TIHJlc3VsdFxuZXhwb3J0IGludGVyZmFjZSBTdGF0aW9uTE9TUmVzdWx0IHtcbiAgY2xlYXI6IGJvb2xlYW47IC8vIFdoZXRoZXIgTE9TIGlzIGNsZWFyIGJldHdlZW4gc3RhdGlvbnNcbiAgb2JzdHJ1Y3Rpb25GcmFjdGlvbj86IG51bWJlcjsgLy8gV2hlcmUgYWxvbmcgdGhlIGxpbmUgdGhlIG9ic3RydWN0aW9uIG9jY3VycyAoMC0xKVxuICBvYnN0cnVjdGlvbkRpc3RhbmNlPzogbnVtYmVyOyAvLyBEaXN0YW5jZSB0byBvYnN0cnVjdGlvbiBpbiBtZXRlcnNcbn1cblxuLy8gRmxpZ2h0IHBhdGggdmlzaWJpbGl0eSByZXN1bHRzXG5leHBvcnQgaW50ZXJmYWNlIEZsaWdodFBhdGhWaXNpYmlsaXR5UmVzdWx0cyB7XG4gIHZpc2libGVMZW5ndGg6IG51bWJlcjsgLy8gTGVuZ3RoIG9mIHZpc2libGUgZmxpZ2h0IHBhdGggKG1ldGVycylcbiAgdG90YWxMZW5ndGg6IG51bWJlcjsgLy8gVG90YWwgZmxpZ2h0IHBhdGggbGVuZ3RoIChtZXRlcnMpXG4gIGNvdmVyYWdlUGVyY2VudGFnZTogbnVtYmVyOyAvLyBQZXJjZW50YWdlIG9mIGZsaWdodCBwYXRoIHdpdGggdmlzaWJpbGl0eVxuICBzdGF0aW9uU3RhdHM/OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+OyAvLyBQZXItc3RhdGlvbiB2aXNpYmlsaXR5IHN0YXRzXG59XG5cbi8vIFByb2ZpbGUgcG9pbnQgZm9yIExPUyBlbGV2YXRpb24gcHJvZmlsZVxuZXhwb3J0IGludGVyZmFjZSBMT1NQcm9maWxlUG9pbnQge1xuICBkaXN0YW5jZTogbnVtYmVyOyAvLyBEaXN0YW5jZSBhbG9uZyB0aGUgbGluZSAobWV0ZXJzKVxuICB0ZXJyYWluOiBudW1iZXI7IC8vIFRlcnJhaW4gZWxldmF0aW9uIChtZXRlcnMpXG4gIGxvczogbnVtYmVyOyAvLyBMaW5lIG9mIFNpZ2h0IGVsZXZhdGlvbiAobWV0ZXJzKVxufVxuXG4vLyBBbmFseXNpcyBvcHRpb25zXG5leHBvcnQgaW50ZXJmYWNlIEFuYWx5c2lzT3B0aW9ucyB7XG4gIGNlbGxTaXplPzogbnVtYmVyOyAvLyBTaXplIG9mIGdyaWQgY2VsbHMgaW4gbWV0ZXJzXG4gIHNhbXBsZURpc3RhbmNlPzogbnVtYmVyOyAvLyBEaXN0YW5jZSBiZXR3ZWVuIHNhbXBsZXMgaW4gbWV0ZXJzXG4gIG1heFJhbmdlPzogbnVtYmVyOyAvLyBNYXhpbXVtIGFuYWx5c2lzIHJhbmdlIGluIG1ldGVyc1xufVxuXG4vLyBNYXJrZXIgdHlwZSBlbnVtXG5leHBvcnQgdHlwZSBNYXJrZXJUeXBlID0gJ2djcycgfCAnb2JzZXJ2ZXInIHwgJ3JlcGVhdGVyJztcblxuLy8gU3RhdGlvbiB2aXNpYmlsaXR5IGNvbmZpZ3VyYXRpb25cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGlvbkNvbmZpZyB7XG4gIHR5cGU6IE1hcmtlclR5cGU7XG4gIGxvY2F0aW9uOiBMb2NhdGlvbkRhdGE7XG4gIHJhbmdlOiBudW1iZXI7XG4gIGVsZXZhdGlvbk9mZnNldDogbnVtYmVyO1xufVxuXG4vLyBMb2NhdGlvbiBkYXRhIChtYXRjaGluZyBleGlzdGluZyBMb2NhdGlvbkRhdGEpXG5leHBvcnQgaW50ZXJmYWNlIExvY2F0aW9uRGF0YSB7XG4gIGxuZzogbnVtYmVyO1xuICBsYXQ6IG51bWJlcjtcbiAgZWxldmF0aW9uOiBudW1iZXIgfCBudWxsO1xufVxuXG4vLyBBbmFseXNpcyB0eXBlc1xuZXhwb3J0IGVudW0gQW5hbHlzaXNUeXBlIHtcbiAgRkxJR0hUX1BBVEggPSAnZmxpZ2h0X3BhdGgnLFxuICBTVEFUSU9OID0gJ3N0YXRpb24nLFxuICBNRVJHRUQgPSAnbWVyZ2VkJyxcbiAgU1RBVElPTl9UT19TVEFUSU9OID0gJ3N0YXRpb25fdG9fc3RhdGlvbicsXG4gIEZMSUdIVF9QQVRIX1ZJU0lCSUxJVFkgPSAnZmxpZ2h0X3BhdGhfdmlzaWJpbGl0eScsXG4gIFRFUlJBSU4gPSAndGVycmFpbicgLy8gQWRkZWQgbmV3IHRlcnJhaW4gYW5hbHlzaXMgdHlwZVxufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG5cbi8qKlxuICogQ29udmVydHMgQU8tc3R5bGUgR3JpZENlbGwgdG8gdW5pZmllZCBHcmlkQ2VsbCBmb3JtYXRcbiAqIFVzZWQgd2hlbiBBTyBzeXN0ZW0gcGFzc2VzIHRlcnJhaW4gZ3JpZHMgdG8gYW5hbHlzaXMgc3lzdGVtXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0QU9DZWxsVG9BbmFseXNpc0NlbGwoYW9DZWxsOiB7XG4gIGlkOiBzdHJpbmc7XG4gIGdlb21ldHJ5OiBHZW9KU09OLlBvbHlnb247XG4gIHByb3BlcnRpZXM6IHtcbiAgICBlbGV2YXRpb246IG51bWJlcjtcbiAgICBba2V5OiBzdHJpbmddOiBhbnk7XG4gIH07XG59KTogR3JpZENlbGwge1xuICByZXR1cm4ge1xuICAgIGlkOiBhb0NlbGwuaWQsXG4gICAgZ2VvbWV0cnk6IGFvQ2VsbC5nZW9tZXRyeSxcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAvLyBTZXQgZGVmYXVsdCBhbmFseXNpcyB2YWx1ZXNcbiAgICAgIHZpc2liaWxpdHk6IDAsXG4gICAgICBmdWxseVZpc2libGU6IGZhbHNlLFxuICAgICAgbGFzdEFuYWx5emVkOiBEYXRlLm5vdygpLFxuICAgICAgLy8gQ29weSBlbGV2YXRpb24gZnJvbSBBTyBjZWxsIChub3cgcmVxdWlyZWQsIG5vdCBvcHRpb25hbClcbiAgICAgIGVsZXZhdGlvbjogYW9DZWxsLnByb3BlcnRpZXMuZWxldmF0aW9uLFxuICAgICAgLy8gQ29weSBhbnkgYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gICAgICAuLi5hb0NlbGwucHJvcGVydGllc1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB1bmlmaWVkIEdyaWRDZWxsIGJhY2sgdG8gQU8tc3R5bGUgZm9ybWF0XG4gKiBVc2VkIHdoZW4gYW5hbHlzaXMgc3lzdGVtIHJldHVybnMgZGF0YSB0byBBTyBzeXN0ZW1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRBbmFseXNpc0NlbGxUb0FPQ2VsbChhbmFseXNpc0NlbGw6IEdyaWRDZWxsKToge1xuICBpZDogc3RyaW5nO1xuICBnZW9tZXRyeTogR2VvSlNPTi5Qb2x5Z29uO1xuICBwcm9wZXJ0aWVzOiB7XG4gICAgZWxldmF0aW9uOiBudW1iZXI7XG4gICAgW2tleTogc3RyaW5nXTogYW55O1xuICB9O1xufSB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGFuYWx5c2lzQ2VsbC5pZCxcbiAgICBnZW9tZXRyeTogYW5hbHlzaXNDZWxsLmdlb21ldHJ5LFxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgIGVsZXZhdGlvbjogYW5hbHlzaXNDZWxsLnByb3BlcnRpZXMuZWxldmF0aW9uLFxuICAgICAgLy8gQ29weSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgZXhjZXB0IGFuYWx5c2lzLXNwZWNpZmljIG9uZXNcbiAgICAgIC4uLk9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoYW5hbHlzaXNDZWxsLnByb3BlcnRpZXMpLmZpbHRlcihcbiAgICAgICAgICAoW2tleV0pID0+ICFbJ3Zpc2liaWxpdHknLCAnZnVsbHlWaXNpYmxlJywgJ2xhc3RBbmFseXplZCcsICd2aXNpYmxlU3RhdGlvbkNvdW50J10uaW5jbHVkZXMoa2V5KVxuICAgICAgICApXG4gICAgICApXG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgR3JpZENlbGwgd2l0aCBkZWZhdWx0IGFuYWx5c2lzIHByb3BlcnRpZXNcbiAqIFVzZWQgd2hlbiBnZW5lcmF0aW5nIGZyZXNoIGdyaWQgY2VsbHMgZm9yIGFuYWx5c2lzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHcmlkQ2VsbChcbiAgaWQ6IHN0cmluZyxcbiAgZ2VvbWV0cnk6IEdlb0pTT04uUG9seWdvbixcbiAgZWxldmF0aW9uOiBudW1iZXIsXG4gIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge31cbik6IEdyaWRDZWxsIHtcbiAgcmV0dXJuIHtcbiAgICBpZCxcbiAgICBnZW9tZXRyeSxcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICB2aXNpYmlsaXR5OiAwLFxuICAgICAgZnVsbHlWaXNpYmxlOiBmYWxzZSxcbiAgICAgIGxhc3RBbmFseXplZDogRGF0ZS5ub3coKSxcbiAgICAgIGVsZXZhdGlvbixcbiAgICAgIC4uLmFkZGl0aW9uYWxQcm9wZXJ0aWVzXG4gICAgfVxuICB9O1xufSJdLCJuYW1lcyI6WyJBbmFseXNpc1R5cGUiLCJjb252ZXJ0QU9DZWxsVG9BbmFseXNpc0NlbGwiLCJhb0NlbGwiLCJpZCIsImdlb21ldHJ5IiwicHJvcGVydGllcyIsInZpc2liaWxpdHkiLCJmdWxseVZpc2libGUiLCJsYXN0QW5hbHl6ZWQiLCJEYXRlIiwibm93IiwiZWxldmF0aW9uIiwiY29udmVydEFuYWx5c2lzQ2VsbFRvQU9DZWxsIiwiYW5hbHlzaXNDZWxsIiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwiZmlsdGVyIiwia2V5IiwiaW5jbHVkZXMiLCJjcmVhdGVHcmlkQ2VsbCIsImFkZGl0aW9uYWxQcm9wZXJ0aWVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Analyses/Types/GridAnalysisTypes.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Analyses/Utils/GridAnalysisCore.ts":
/*!***************************************************************!*\
  !*** ./src/app/components/Analyses/Utils/GridAnalysisCore.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyzeTerrainGrid: () => (/* binding */ analyzeTerrainGrid),\n/* harmony export */   batchQueryElevations: () => (/* binding */ batchQueryElevations),\n/* harmony export */   checkFlightPathLOS: () => (/* binding */ checkFlightPathLOS),\n/* harmony export */   checkLineOfSight: () => (/* binding */ checkLineOfSight),\n/* harmony export */   checkStationLOS: () => (/* binding */ checkStationLOS),\n/* harmony export */   checkStationToLocationLOS: () => (/* binding */ checkStationToLocationLOS),\n/* harmony export */   checkStationToStationLOS: () => (/* binding */ checkStationToStationLOS),\n/* harmony export */   createError: () => (/* binding */ createError),\n/* harmony export */   generateCombinedBoundingBox: () => (/* binding */ generateCombinedBoundingBox),\n/* harmony export */   generateGrid: () => (/* binding */ generateGrid),\n/* harmony export */   getLOSProfile: () => (/* binding */ getLOSProfile),\n/* harmony export */   isValidBounds: () => (/* binding */ isValidBounds),\n/* harmony export */   processFlightPath: () => (/* binding */ processFlightPath),\n/* harmony export */   queryElevation: () => (/* binding */ queryElevation)\n/* harmony export */ });\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/helpers/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/buffer/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/bbox/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/point-grid/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/circle/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/distance/dist/esm/index.js\");\n/* harmony import */ var _hooks_useFlightPathSampling__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../hooks/useFlightPathSampling */ \"(ssr)/./src/app/hooks/useFlightPathSampling.ts\");\n/**\n * GridAnalysisCore.ts\n * \n * High-performance core engine for Line of Sight (LOS) analysis.\n * Provides optimized implementations for grid generation, elevation queries,\n * and visibility calculations with minimal overhead.\n * The GridAnalysisCore.ts that I've just provided will replace the following existing files:\ngridAnalysisUtils.ts (completely replaced)\nParts of useGridAnalysis.ts (specifically the core analysis algorithms)\n */ \n\n// Simple LRU cache for elevation data\nclass ElevationCache {\n    constructor(maxSize = 10000){\n        this.cache = new Map();\n        this.maxSize = maxSize;\n    }\n    getKey(lon, lat) {\n        return `${lon.toFixed(4)}|${lat.toFixed(4)}`;\n    }\n    get(lon, lat) {\n        return this.cache.get(this.getKey(lon, lat));\n    }\n    set(lon, lat, elevation) {\n        const key = this.getKey(lon, lat);\n        this.cache.set(key, elevation);\n        // Simple LRU: remove oldest entry if cache is full\n        if (this.cache.size > this.maxSize) {\n            const firstKey = this.cache.keys().next().value;\n            if (firstKey) this.cache.delete(firstKey);\n        }\n    }\n    clear() {\n        this.cache.clear();\n    }\n}\n// Shared cache instance\nconst elevationCache = new ElevationCache();\n/**\n * Creates an error with additional metadata\n */ function createError(message, code, details) {\n    const error = new Error(message);\n    error.code = code;\n    error.details = details;\n    return error;\n}\n/**\n * Optimized terrain elevation query function\n */ async function queryElevation(map, coordinates, elevationService) {\n    const [lon, lat] = coordinates;\n    // Check cache first for fastest response\n    const cachedElevation = elevationCache.get(lon, lat);\n    if (cachedElevation !== undefined) {\n        return cachedElevation;\n    }\n    let elevation = null;\n    // Try elevation service if available\n    if (elevationService) {\n        try {\n            elevation = await elevationService.getElevation(lon, lat);\n            if (elevation !== null && elevation !== undefined && elevation !== 0) {\n                elevationCache.set(lon, lat, elevation);\n                return elevation;\n            }\n        } catch (e) {\n        // Fall through to direct query\n        }\n    }\n    // Direct map query as fallback\n    try {\n        elevation = map.queryTerrainElevation(coordinates) ?? null;\n        if (elevation !== null && elevation !== undefined) {\n            elevationCache.set(lon, lat, elevation);\n            return elevation;\n        }\n    } catch (e) {\n        console.warn(`Terrain query error at [${lon}, ${lat}]:`, e);\n    }\n    // Last resort fallback\n    return 0;\n}\n/**\n * Optimized batch elevation query\n */ async function batchQueryElevations(map, coordinates, elevationService) {\n    if (elevationService && typeof elevationService.batchGetElevations === 'function') {\n        try {\n            return await elevationService.batchGetElevations(coordinates);\n        } catch (e) {\n            console.warn('Batch elevation query failed, falling back to individual queries:', e);\n        }\n    }\n    // Process in larger batches for better performance\n    const BATCH_SIZE = 100;\n    const results = [];\n    for(let i = 0; i < coordinates.length; i += BATCH_SIZE){\n        const batch = coordinates.slice(i, i + BATCH_SIZE);\n        const batchResults = await Promise.all(batch.map((coords)=>queryElevation(map, coords, elevationService)));\n        results.push(...batchResults);\n    }\n    return results;\n}\n/**\n * Checks if bounding box coordinates are valid\n */ function isValidBounds(bounds) {\n    return bounds.length === 4 && bounds[0] >= -180 && bounds[1] >= -90 && bounds[2] <= 180 && bounds[3] <= 90;\n}\n/**\n * Generates a grid of cells for analysis.\n * Optimized for performance with batched elevation queries.\n */ async function generateGrid(map, options) {\n    const { center, range, flightPath, elosGridRange, gridSize, elevationService } = options;\n    const startTime = performance.now();\n    try {\n        let grid;\n        // Marker-based grid generation\n        if (center && range) {\n            if (typeof range !== 'number' || range <= 0 || isNaN(range)) {\n                throw createError('Invalid range for marker grid', 'INVALID_INPUT');\n            }\n            const point = _turf_turf__WEBPACK_IMPORTED_MODULE_1__.point(center);\n            const buffer = _turf_turf__WEBPACK_IMPORTED_MODULE_2__.buffer(point, range, {\n                units: 'meters'\n            });\n            if (!buffer) throw createError('Failed to create buffer', 'INVALID_INPUT');\n            const bounds = _turf_turf__WEBPACK_IMPORTED_MODULE_3__.bbox(buffer);\n            if (!isValidBounds(bounds)) {\n                throw createError('Invalid bounds for marker grid', 'GRID_GENERATION');\n            }\n            grid = _turf_turf__WEBPACK_IMPORTED_MODULE_4__.pointGrid(bounds, gridSize, {\n                units: 'meters',\n                mask: buffer\n            });\n            console.log(`Generated marker grid with ${grid.features.length} points`);\n        } else if (flightPath && elosGridRange) {\n            if (typeof elosGridRange !== 'number' || elosGridRange <= 0 || isNaN(elosGridRange)) {\n                throw createError('Invalid elosGridRange', 'INVALID_INPUT');\n            }\n            const bounds = _turf_turf__WEBPACK_IMPORTED_MODULE_3__.bbox(flightPath);\n            const margin = _turf_turf__WEBPACK_IMPORTED_MODULE_1__.lengthToDegrees(elosGridRange, 'meters');\n            const extendedBounds = [\n                bounds[0] - margin,\n                bounds[1] - margin,\n                bounds[2] + margin,\n                bounds[3] + margin\n            ];\n            if (!isValidBounds(extendedBounds)) {\n                throw createError('Invalid extended bounds', 'GRID_GENERATION');\n            }\n            const maskOptions = {\n                units: 'meters',\n                mask: _turf_turf__WEBPACK_IMPORTED_MODULE_2__.buffer(flightPath, elosGridRange, {\n                    units: 'meters'\n                })\n            };\n            grid = _turf_turf__WEBPACK_IMPORTED_MODULE_4__.pointGrid(extendedBounds, gridSize, maskOptions);\n            console.log(`Generated flight path grid with ${grid.features.length} points`);\n        } else {\n            throw createError('Invalid grid generation parameters', 'INVALID_INPUT');\n        }\n        // Extract coordinates for batch elevation query\n        const gridCoordinates = grid.features.map((feature)=>feature.geometry.coordinates);\n        // Batch query elevations\n        console.time('GridElevationQuery');\n        const elevations = await batchQueryElevations(map, gridCoordinates, elevationService);\n        console.timeEnd('GridElevationQuery');\n        // Create cells with elevations\n        const cells = grid.features.map((point, index)=>{\n            const cell = _turf_turf__WEBPACK_IMPORTED_MODULE_5__.circle(point.geometry.coordinates, gridSize / 2, {\n                units: 'meters',\n                steps: 4\n            });\n            return {\n                id: `cell-${index}`,\n                geometry: cell.geometry,\n                properties: {\n                    visibility: 0,\n                    fullyVisible: false,\n                    elevation: elevations[index],\n                    lastAnalyzed: Date.now()\n                }\n            };\n        });\n        console.log(`Grid generation completed in ${performance.now() - startTime}ms`);\n        return cells;\n    } catch (error) {\n        console.error('Error in generateGrid:', error);\n        throw createError('Failed to generate analysis grid', 'GRID_GENERATION', error);\n    }\n}\n/**\n * Processes the flight path with regular sampling\n * @param map - Mapbox map instance\n * @param flightPath - Flight path feature\n * @param samplingResolution - Distance between samples in meters\n * @param elevationService - Optional elevation service for terrain querying\n * @param onProgress - Optional progress callback\n * @returns Array of sampled points along the flight path\n */ async function processFlightPath(map, flightPath, samplingResolution = 10, elevationService, onProgress) {\n    // Extract the LineString from the flight path feature\n    const lineString = flightPath.geometry;\n    // Sample the flight path at the specified resolution\n    const sampledPoints = await (0,_hooks_useFlightPathSampling__WEBPACK_IMPORTED_MODULE_0__.sampleFlightPath)(lineString, {\n        resolution: samplingResolution,\n        progressCallback: onProgress ? (progress)=>{\n            onProgress(progress * 0.5); // Use half of progress for sampling\n            return false; // Never abort from here\n        } : undefined\n    });\n    // Query terrain elevations for all sampled points if needed\n    if (onProgress) onProgress(50); // Mark sampling as complete\n    // Extract and return the 3D coordinates\n    const sampledCoordinates = sampledPoints.map((point)=>point.position);\n    if (onProgress) onProgress(100); // Mark processing as complete\n    return sampledCoordinates;\n}\n/**\n * Checks line of sight between a source point and a target point.\n * Optimized version with early termination.\n */ async function checkLineOfSight(map, sourcePoint, targetPoint, options = {}) {\n    const [sourceLng, sourceLat, sourceAlt] = sourcePoint;\n    const [targetLng, targetLat, targetAlt] = targetPoint;\n    // Validate inputs\n    if (sourcePoint.some((v)=>typeof v !== 'number' || isNaN(v)) || targetPoint.some((v)=>typeof v !== 'number' || isNaN(v))) {\n        console.error('Invalid coordinates:', {\n            sourcePoint,\n            targetPoint\n        });\n        return false;\n    }\n    const minimumOffset = options.minimumOffset ?? 1;\n    const distance = _turf_turf__WEBPACK_IMPORTED_MODULE_6__.distance([\n        sourceLng,\n        sourceLat\n    ], [\n        targetLng,\n        targetLat\n    ], {\n        units: 'meters'\n    });\n    // Adaptive sampling based on distance\n    const sampleCount = options.sampleCount ?? Math.min(Math.max(5, Math.ceil(distance / 50)), 20);\n    // Add the minimum offset to target altitude\n    const adjustedTargetAlt = targetAlt + minimumOffset;\n    // Local elevation cache for this specific LOS check\n    const localCache = new Map();\n    // Get elevation with local caching\n    const getElevation = async (lng, lat)=>{\n        const key = `${lng.toFixed(6)}|${lat.toFixed(6)}`;\n        if (localCache.has(key)) return localCache.get(key);\n        const elev = await queryElevation(map, [\n            lng,\n            lat\n        ], options.elevationService);\n        localCache.set(key, elev);\n        return elev;\n    };\n    // Check each sample point along the line\n    for(let i = 1; i < sampleCount; i++){\n        const fraction = i / sampleCount;\n        // Interpolate position\n        const lng = sourceLng + fraction * (targetLng - sourceLng);\n        const lat = sourceLat + fraction * (targetLat - sourceLat);\n        // Calculate height along the line of sight at this point\n        const losHeight = sourceAlt + fraction * (adjustedTargetAlt - sourceAlt);\n        // Get terrain height at this point\n        const terrainHeight = await getElevation(lng, lat);\n        // If terrain is higher than LOS, the line is blocked\n        if (terrainHeight > losHeight) {\n            return false;\n        }\n    }\n    // If we've checked all sample points and none block the line, we have LOS\n    return true;\n}\n/**\n * Checks LOS for Station Analysis from a station to a single grid cell.\n */ async function checkStationLOS(map, sourcePoint, targetPoint, options = {}) {\n    return checkLineOfSight(map, sourcePoint, targetPoint, options);\n}\n/**\n * Get LOS profile data between two points\n */ async function getLOSProfile(map, sourcePoint, targetPoint, options = {}) {\n    const [sourceLng, sourceLat, sourceAlt] = sourcePoint;\n    const [targetLng, targetLat, targetAlt] = targetPoint;\n    const minimumOffset = options.minimumOffset ?? 3;\n    const point1 = _turf_turf__WEBPACK_IMPORTED_MODULE_1__.point([\n        sourceLng,\n        sourceLat\n    ]);\n    const point2 = _turf_turf__WEBPACK_IMPORTED_MODULE_1__.point([\n        targetLng,\n        targetLat\n    ]);\n    const totalDistance = _turf_turf__WEBPACK_IMPORTED_MODULE_6__.distance(point1, point2, {\n        units: 'meters'\n    });\n    const sampleDistance = options.sampleDistance ?? 10;\n    const sampleCount = Math.ceil(totalDistance / sampleDistance);\n    const profile = [];\n    let isObstructed = false;\n    // Batch coordinates for efficient querying\n    const sampleCoords = [];\n    for(let i = 0; i <= sampleCount; i++){\n        const fraction = i / sampleCount;\n        const lng = sourceLng + fraction * (targetLng - sourceLng);\n        const lat = sourceLat + fraction * (targetLat - sourceLat);\n        sampleCoords.push([\n            lng,\n            lat\n        ]);\n    }\n    // Batch query elevations\n    const terrainElevations = await batchQueryElevations(map, sampleCoords, options.elevationService);\n    // Create profile points\n    for(let i = 0; i <= sampleCount; i++){\n        const fraction = i / sampleCount;\n        const losAltitude = sourceAlt - (sourceAlt - (targetAlt + minimumOffset)) * fraction;\n        const terrain = terrainElevations[i];\n        profile.push({\n            distance: fraction * totalDistance,\n            terrain,\n            los: losAltitude\n        });\n        if (terrain > losAltitude) {\n            isObstructed = true;\n        }\n    }\n    // debuggin Add at the end of the getLOSProfile function before returning\n    console.log('Generated profile:', {\n        pointCount: profile.length,\n        clear: !isObstructed,\n        samplePoints: profile.slice(0, 3)\n    });\n    return {\n        profile,\n        clear: !isObstructed\n    };\n}\n/**\n * Checks visibility along flight path from a single location\n * Only considers flight path points within specified grid range\n */ async function checkFlightPathLOS(map, sourcePoint, flightCoordinates, options = {}) {\n    const { sampleCount = 20, minimumOffset = 1, altitudeMode = \"absolute\", gridRange = 500, sampledCoordinates// This will be used if provided\n     } = options;\n    // Use provided sampled coordinates if available, otherwise use raw coordinates\n    const coordinatesToCheck = sampledCoordinates || flightCoordinates;\n    if (!Array.isArray(sourcePoint) || sourcePoint.length !== 3 || sourcePoint.some((v)=>typeof v !== 'number' || isNaN(v))) {\n        throw createError('Source point must be a valid [lon, lat, alt] array', 'INVALID_INPUT');\n    }\n    if (!Array.isArray(coordinatesToCheck) || !coordinatesToCheck.every((point)=>Array.isArray(point) && point.length === 3 && point.every((v)=>typeof v === 'number' && !isNaN(v)))) {\n        throw createError('Flight coordinates must be an array of [lon, lat, alt] arrays', 'INVALID_INPUT');\n    }\n    // Filter flight coordinates by distance to only check relevant ones\n    const relevantCoordinates = [];\n    for (const fpPoint of coordinatesToCheck){\n        // Calculate distance from cell to flight point\n        const distance = _turf_turf__WEBPACK_IMPORTED_MODULE_6__.distance([\n            sourcePoint[0],\n            sourcePoint[1]\n        ], [\n            fpPoint[0],\n            fpPoint[1]\n        ], {\n            units: 'meters'\n        });\n        // Only consider points within the grid range\n        if (distance <= gridRange) {\n            relevantCoordinates.push(fpPoint);\n        }\n    }\n    // If no relevant flight coordinates, cell is not visible\n    if (relevantCoordinates.length === 0) {\n        return 0;\n    }\n    let visibleCount = 0;\n    // Check visibility only for relevant coordinates\n    for (const targetPoint of relevantCoordinates){\n        try {\n            if (altitudeMode === \"terrain\" || altitudeMode === \"relative\") {\n                const terrainElevation = await queryElevation(map, [\n                    targetPoint[0],\n                    targetPoint[1]\n                ], options.elevationService);\n                const adjustedTargetPoint = [\n                    targetPoint[0],\n                    targetPoint[1],\n                    terrainElevation + targetPoint[2]\n                ];\n                const isVisible = await checkLineOfSight(map, sourcePoint, adjustedTargetPoint, {\n                    sampleCount,\n                    minimumOffset,\n                    elevationService: options.elevationService\n                });\n                if (isVisible) visibleCount++;\n            } else {\n                const isVisible = await checkLineOfSight(map, sourcePoint, targetPoint, {\n                    sampleCount,\n                    minimumOffset,\n                    elevationService: options.elevationService\n                });\n                if (isVisible) visibleCount++;\n            }\n        } catch (e) {\n            console.warn('Error checking LOS for point:', targetPoint, e);\n        // Continue to next point\n        }\n    }\n    const visibilityPercentage = relevantCoordinates.length > 0 ? visibleCount / relevantCoordinates.length * 100 : 0;\n    return visibilityPercentage;\n}\n/**\n * Generate a combined bounding box for multiple stations\n */ function generateCombinedBoundingBox(stations) {\n    if (!stations.length) {\n        throw new Error('No stations provided for analysis');\n    }\n    const bboxes = stations.map((station)=>{\n        const point = _turf_turf__WEBPACK_IMPORTED_MODULE_1__.point([\n            station.location.lng,\n            station.location.lat\n        ]);\n        const buffer = _turf_turf__WEBPACK_IMPORTED_MODULE_2__.buffer(point, station.range, {\n            units: 'meters'\n        });\n        return _turf_turf__WEBPACK_IMPORTED_MODULE_3__.bbox(buffer);\n    });\n    const combinedBbox = [\n        180,\n        90,\n        -180,\n        -90\n    ];\n    bboxes.forEach((bbox)=>{\n        combinedBbox[0] = Math.min(combinedBbox[0], bbox[0]);\n        combinedBbox[1] = Math.min(combinedBbox[1], bbox[1]);\n        combinedBbox[2] = Math.max(combinedBbox[2], bbox[2]);\n        combinedBbox[3] = Math.max(combinedBbox[3], bbox[3]);\n    });\n    return combinedBbox;\n}\n/**\n * Checks if station has line of sight to all provided locations\n */ async function checkStationToLocationLOS(map, stationLocation, stationElevationOffset, targetLocations, options = {}) {\n    if (!stationLocation || typeof stationLocation.lng !== 'number' || typeof stationLocation.lat !== 'number') {\n        throw createError('Invalid station location', 'INVALID_INPUT');\n    }\n    if (!targetLocations || !targetLocations.length) {\n        return {\n            visibleLocations: [],\n            visibilityPercentage: 0\n        };\n    }\n    // Get station elevation if not available\n    const stationElevation = stationLocation.elevation ?? await queryElevation(map, [\n        stationLocation.lng,\n        stationLocation.lat\n    ], options.elevationService);\n    const stationPoint = [\n        stationLocation.lng,\n        stationLocation.lat,\n        stationElevation + stationElevationOffset\n    ];\n    const visibleLocations = [];\n    // Check visibility to each target location\n    for (const targetLocation of targetLocations){\n        try {\n            if (!targetLocation || typeof targetLocation.lng !== 'number' || typeof targetLocation.lat !== 'number') {\n                continue; // Skip invalid locations\n            }\n            // Get target elevation if not available\n            const targetElevation = targetLocation.elevation ?? await queryElevation(map, [\n                targetLocation.lng,\n                targetLocation.lat\n            ], options.elevationService);\n            const targetPoint = [\n                targetLocation.lng,\n                targetLocation.lat,\n                targetElevation\n            ];\n            const isVisible = await checkLineOfSight(map, stationPoint, targetPoint, {\n                elevationService: options.elevationService\n            });\n            if (isVisible) {\n                visibleLocations.push(targetLocation);\n            }\n        } catch (e) {\n            console.warn('Error checking LOS to location:', targetLocation, e);\n        }\n    }\n    const visibilityPercentage = targetLocations.length > 0 ? visibleLocations.length / targetLocations.length * 100 : 0;\n    return {\n        visibleLocations,\n        visibilityPercentage\n    };\n}\n/**\n * Checks line of sight between two stations\n */ async function checkStationToStationLOS(map, sourceStation, targetStation, options = {}) {\n    if (!sourceStation.location || !targetStation.location || typeof sourceStation.location.lng !== 'number' || typeof sourceStation.location.lat !== 'number' || typeof targetStation.location.lng !== 'number' || typeof targetStation.location.lat !== 'number') {\n        throw createError('Both station locations must be set and valid', 'INVALID_INPUT');\n    }\n    // Get source station elevation if not available\n    const sourceElevation = sourceStation.location.elevation ?? await queryElevation(map, [\n        sourceStation.location.lng,\n        sourceStation.location.lat\n    ], options.elevationService);\n    // Get target station elevation if not available\n    const targetElevation = targetStation.location.elevation ?? await queryElevation(map, [\n        targetStation.location.lng,\n        targetStation.location.lat\n    ], options.elevationService);\n    const sourcePoint = [\n        sourceStation.location.lng,\n        sourceStation.location.lat,\n        sourceElevation + sourceStation.elevationOffset\n    ];\n    const targetPoint = [\n        targetStation.location.lng,\n        targetStation.location.lat,\n        targetElevation + targetStation.elevationOffset\n    ];\n    const { profile, clear } = await getLOSProfile(map, sourcePoint, targetPoint, {\n        sampleDistance: 10,\n        minimumOffset: 3,\n        elevationService: options.elevationService\n    });\n    let obstructionFraction = null;\n    let obstructionDistance = null;\n    if (!clear) {\n        for(let i = 0; i < profile.length; i++){\n            if (profile[i].terrain > profile[i].los) {\n                obstructionFraction = i / (profile.length - 1);\n                obstructionDistance = profile[i].distance;\n                break;\n            }\n        }\n    }\n    const result = {\n        clear,\n        obstructionFraction: obstructionFraction ?? undefined,\n        obstructionDistance: obstructionDistance ?? undefined\n    };\n    return {\n        result,\n        profile\n    };\n}\n/**\n * Analyzes a terrain grid efficiently for elevation statistics\n * Uses a batched approach to prevent call stack overflow with large areas\n */ async function analyzeTerrainGrid(gridCells, options = {}) {\n    const { batchSize = 1000, onProgress } = options;\n    if (!gridCells || gridCells.length === 0) {\n        throw createError('No grid cells provided for analysis', 'INVALID_INPUT');\n    }\n    console.log(`Analyzing terrain grid with ${gridCells.length} cells`);\n    // For very large datasets, use a reduced set of elevation points for statistics\n    // to prevent memory issues, but still analyze all points for highest/lowest\n    const totalCells = gridCells.length;\n    const useReducedSet = totalCells > 10000;\n    const sampleInterval = useReducedSet ? Math.ceil(totalCells / 10000) : 1;\n    let highestElevation = -Infinity;\n    let lowestElevation = Infinity;\n    let elevationSum = 0;\n    const elevationCounts = {};\n    const sampleElevations = [];\n    // Process in batches to prevent stack overflow\n    for(let i = 0; i < totalCells; i += batchSize){\n        // Check for abort if callback provided\n        if (onProgress) {\n            const progressValue = Math.round(i / totalCells * 100);\n            const shouldAbort = onProgress(progressValue);\n            if (shouldAbort) {\n                throw createError('Analysis aborted by user', 'USER_ABORT');\n            }\n        }\n        // Process current batch\n        const endIndex = Math.min(i + batchSize, totalCells);\n        const batchCells = gridCells.slice(i, endIndex);\n        for(let j = 0; j < batchCells.length; j++){\n            const elevation = batchCells[j].properties.elevation;\n            // Update highest and lowest\n            highestElevation = Math.max(highestElevation, elevation);\n            lowestElevation = Math.min(lowestElevation, elevation);\n            // Only include in average and distribution if part of reduced set or using full set\n            if (!useReducedSet || (i + j) % sampleInterval === 0) {\n                elevationSum += elevation;\n                // Add to sample array\n                sampleElevations.push(elevation);\n                // Update distribution count\n                // Round to nearest 10m for reasonable histogram\n                const elevationBucket = Math.round(elevation / 10) * 10;\n                const bucketKey = elevationBucket.toString();\n                elevationCounts[bucketKey] = (elevationCounts[bucketKey] || 0) + 1;\n            }\n        }\n        // Yield to event loop to prevent stack overflow and UI freezing\n        await new Promise((resolve)=>setTimeout(resolve, 0));\n    }\n    // Calculate averages based on the sample set\n    const averageElevation = sampleElevations.length > 0 ? elevationSum / sampleElevations.length : 0;\n    // Report completion\n    if (onProgress) {\n        onProgress(100);\n    }\n    return {\n        highestElevation,\n        lowestElevation,\n        averageElevation,\n        elevationDistribution: elevationCounts,\n        elevations: sampleElevations\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvQW5hbHlzZXMvVXRpbHMvR3JpZEFuYWx5c2lzQ29yZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7O0NBU0MsR0FFa0M7QUFXa0Q7QUFNckYsc0NBQXNDO0FBQ3RDLE1BQU1FO0lBSUpDLFlBQVlDLFVBQVUsS0FBSyxDQUFFO2FBSHJCQyxRQUFRLElBQUlDO1FBSWxCLElBQUksQ0FBQ0YsT0FBTyxHQUFHQTtJQUNqQjtJQUVRRyxPQUFPQyxHQUFXLEVBQUVDLEdBQVcsRUFBVTtRQUMvQyxPQUFPLEdBQUdELElBQUlFLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRUQsSUFBSUMsT0FBTyxDQUFDLElBQUk7SUFDOUM7SUFFQUMsSUFBSUgsR0FBVyxFQUFFQyxHQUFXLEVBQXNCO1FBQ2hELE9BQU8sSUFBSSxDQUFDSixLQUFLLENBQUNNLEdBQUcsQ0FBQyxJQUFJLENBQUNKLE1BQU0sQ0FBQ0MsS0FBS0M7SUFDekM7SUFFQUcsSUFBSUosR0FBVyxFQUFFQyxHQUFXLEVBQUVJLFNBQWlCLEVBQVE7UUFDckQsTUFBTUMsTUFBTSxJQUFJLENBQUNQLE1BQU0sQ0FBQ0MsS0FBS0M7UUFDN0IsSUFBSSxDQUFDSixLQUFLLENBQUNPLEdBQUcsQ0FBQ0UsS0FBS0Q7UUFFcEIsbURBQW1EO1FBQ25ELElBQUksSUFBSSxDQUFDUixLQUFLLENBQUNVLElBQUksR0FBRyxJQUFJLENBQUNYLE9BQU8sRUFBRTtZQUNsQyxNQUFNWSxXQUFXLElBQUksQ0FBQ1gsS0FBSyxDQUFDWSxJQUFJLEdBQUdDLElBQUksR0FBR0MsS0FBSztZQUMvQyxJQUFJSCxVQUFVLElBQUksQ0FBQ1gsS0FBSyxDQUFDZSxNQUFNLENBQUNKO1FBQ2xDO0lBQ0Y7SUFFQUssUUFBYztRQUNaLElBQUksQ0FBQ2hCLEtBQUssQ0FBQ2dCLEtBQUs7SUFDbEI7QUFDRjtBQUVBLHdCQUF3QjtBQUN4QixNQUFNQyxpQkFBaUIs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Z0JBRWhCLHNCQUFzQjtnQkFDdEJ3TCxpQkFBaUJqSixJQUFJLENBQUN2QztnQkFFdEIsNEJBQTRCO2dCQUM1QixnREFBZ0Q7Z0JBQ2hELE1BQU0rTCxrQkFBa0JwRixLQUFLK0UsS0FBSyxDQUFDMUwsWUFBWSxNQUFNO2dCQUNyRCxNQUFNZ00sWUFBWUQsZ0JBQWdCRSxRQUFRO2dCQUMxQ1YsZUFBZSxDQUFDUyxVQUFVLEdBQUcsQ0FBQ1QsZUFBZSxDQUFDUyxVQUFVLElBQUksS0FBSztZQUNuRTtRQUNGO1FBRUEsZ0VBQWdFO1FBQ2hFLE1BQU0sSUFBSTVKLFFBQVE4SixDQUFBQSxVQUFXQyxXQUFXRCxTQUFTO0lBQ25EO0lBRUEsNkNBQTZDO0lBQzdDLE1BQU1FLG1CQUFtQlosaUJBQWlCeEosTUFBTSxHQUFHLElBQ2pEc0osZUFBZUUsaUJBQWlCeEosTUFBTSxHQUFHO0lBRTNDLG9CQUFvQjtJQUNwQixJQUFJcUQsWUFBWTtRQUNkQSxXQUFXO0lBQ2I7SUFFQSxPQUFPO1FBQ0w4RjtRQUNBRTtRQUNBZTtRQUNBQyx1QkFBdUJkO1FBQ3ZCakgsWUFBWWtIO0lBQ2Q7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvY29tcG9uZW50cy9BbmFseXNlcy9VdGlscy9HcmlkQW5hbHlzaXNDb3JlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR3JpZEFuYWx5c2lzQ29yZS50c1xuICogXG4gKiBIaWdoLXBlcmZvcm1hbmNlIGNvcmUgZW5naW5lIGZvciBMaW5lIG9mIFNpZ2h0IChMT1MpIGFuYWx5c2lzLlxuICogUHJvdmlkZXMgb3B0aW1pemVkIGltcGxlbWVudGF0aW9ucyBmb3IgZ3JpZCBnZW5lcmF0aW9uLCBlbGV2YXRpb24gcXVlcmllcyxcbiAqIGFuZCB2aXNpYmlsaXR5IGNhbGN1bGF0aW9ucyB3aXRoIG1pbmltYWwgb3ZlcmhlYWQuXG4gKiBUaGUgR3JpZEFuYWx5c2lzQ29yZS50cyB0aGF0IEkndmUganVzdCBwcm92aWRlZCB3aWxsIHJlcGxhY2UgdGhlIGZvbGxvd2luZyBleGlzdGluZyBmaWxlczpcbmdyaWRBbmFseXNpc1V0aWxzLnRzIChjb21wbGV0ZWx5IHJlcGxhY2VkKVxuUGFydHMgb2YgdXNlR3JpZEFuYWx5c2lzLnRzIChzcGVjaWZpY2FsbHkgdGhlIGNvcmUgYW5hbHlzaXMgYWxnb3JpdGhtcylcbiAqL1xuXG5pbXBvcnQgKiBhcyB0dXJmIGZyb20gJ0B0dXJmL3R1cmYnO1xuaW1wb3J0IG1hcGJveGdsIGZyb20gJ21hcGJveC1nbCc7XG5pbXBvcnQgeyBcbiAgQ29vcmRpbmF0ZXMyRCwgXG4gIENvb3JkaW5hdGVzM0QsIFxuICBHcmlkQ2VsbCwgXG4gIExPU1Byb2ZpbGVQb2ludCwgXG4gIExvY2F0aW9uRGF0YSxcbiAgU3RhdGlvbkxPU1Jlc3VsdFxufSBmcm9tICcuLi9UeXBlcy9HcmlkQW5hbHlzaXNUeXBlcyc7XG5pbXBvcnQgeyBGbGlnaHRQbGFuRGF0YSB9IGZyb20gJy4uLy4uLy4uL2NvbnRleHQvRmxpZ2h0UGxhbkNvbnRleHQnO1xuaW1wb3J0IHsgc2FtcGxlRmxpZ2h0UGF0aCwgU2FtcGxlUG9pbnQgfSBmcm9tICcuLi8uLi8uLi9ob29rcy91c2VGbGlnaHRQYXRoU2FtcGxpbmcnO1xuXG4vLyBUeXBlIGRlZmluaXRpb25zIGZvciBpbnRlcm5hbCB1c2VcbnR5cGUgQkJveCA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdO1xudHlwZSBUZXJyYWluUXVlcnlGbiA9IChjb29yZHM6IENvb3JkaW5hdGVzMkQpID0+IFByb21pc2U8bnVtYmVyPjtcblxuLy8gU2ltcGxlIExSVSBjYWNoZSBmb3IgZWxldmF0aW9uIGRhdGFcbmNsYXNzIEVsZXZhdGlvbkNhY2hlIHtcbiAgcHJpdmF0ZSBjYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gIHByaXZhdGUgbWF4U2l6ZTogbnVtYmVyO1xuICBcbiAgY29uc3RydWN0b3IobWF4U2l6ZSA9IDEwMDAwKSB7XG4gICAgdGhpcy5tYXhTaXplID0gbWF4U2l6ZTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBnZXRLZXkobG9uOiBudW1iZXIsIGxhdDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7bG9uLnRvRml4ZWQoNCl9fCR7bGF0LnRvRml4ZWQoNCl9YDtcbiAgfVxuICBcbiAgZ2V0KGxvbjogbnVtYmVyLCBsYXQ6IG51bWJlcik6IG51bWJlciB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuZ2V0KHRoaXMuZ2V0S2V5KGxvbiwgbGF0KSk7XG4gIH1cbiAgXG4gIHNldChsb246IG51bWJlciwgbGF0OiBudW1iZXIsIGVsZXZhdGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3Qga2V5ID0gdGhpcy5nZXRLZXkobG9uLCBsYXQpO1xuICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgZWxldmF0aW9uKTtcbiAgICBcbiAgICAvLyBTaW1wbGUgTFJVOiByZW1vdmUgb2xkZXN0IGVudHJ5IGlmIGNhY2hlIGlzIGZ1bGxcbiAgICBpZiAodGhpcy5jYWNoZS5zaXplID4gdGhpcy5tYXhTaXplKSB7XG4gICAgICBjb25zdCBmaXJzdEtleSA9IHRoaXMuY2FjaGUua2V5cygpLm5leHQoKS52YWx1ZTtcbiAgICAgIGlmIChmaXJzdEtleSkgdGhpcy5jYWNoZS5kZWxldGUoZmlyc3RLZXkpO1xuICAgIH1cbiAgfVxuICBcbiAgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5jYWNoZS5jbGVhcigpO1xuICB9XG59XG5cbi8vIFNoYXJlZCBjYWNoZSBpbnN0YW5jZVxuY29uc3QgZWxldmF0aW9uQ2FjaGUgPSBuZXcgRWxldmF0aW9uQ2FjaGUoKTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGVycm9yIHdpdGggYWRkaXRpb25hbCBtZXRhZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXJyb3IobWVzc2FnZTogc3RyaW5nLCBjb2RlOiBzdHJpbmcsIGRldGFpbHM/OiBhbnkpOiBFcnJvciB7XG4gIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpIGFzIGFueTtcbiAgZXJyb3IuY29kZSA9IGNvZGU7XG4gIGVycm9yLmRldGFpbHMgPSBkZXRhaWxzO1xuICByZXR1cm4gZXJyb3I7XG59XG5cbi8qKlxuICogT3B0aW1pemVkIHRlcnJhaW4gZWxldmF0aW9uIHF1ZXJ5IGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeUVsZXZhdGlvbihcbiAgbWFwOiBtYXBib3hnbC5NYXAsXG4gIGNvb3JkaW5hdGVzOiBDb29yZGluYXRlczJELFxuICBlbGV2YXRpb25TZXJ2aWNlPzogYW55XG4pOiBQcm9taXNlPG51bWJlcj4ge1xuICBjb25zdCBbbG9uLCBsYXRdID0gY29vcmRpbmF0ZXM7XG4gIFxuICAvLyBDaGVjayBjYWNoZSBmaXJzdCBmb3IgZmFzdGVzdCByZXNwb25zZVxuICBjb25zdCBjYWNoZWRFbGV2YXRpb24gPSBlbGV2YXRpb25DYWNoZS5nZXQobG9uLCBsYXQpO1xuICBpZiAoY2FjaGVkRWxldmF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gY2FjaGVkRWxldmF0aW9uO1xuICB9XG4gIFxuICBsZXQgZWxldmF0aW9uOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgXG4gIC8vIFRyeSBlbGV2YXRpb24gc2VydmljZSBpZiBhdmFpbGFibGVcbiAgaWYgKGVsZXZhdGlvblNlcnZpY2UpIHtcbiAgICB0cnkge1xuICAgICAgZWxldmF0aW9uID0gYXdhaXQgZWxldmF0aW9uU2VydmljZS5nZXRFbGV2YXRpb24obG9uLCBsYXQpO1xuICAgICAgaWYgKGVsZXZhdGlvbiAhPT0gbnVsbCAmJiBlbGV2YXRpb24gIT09IHVuZGVmaW5lZCAmJiBlbGV2YXRpb24gIT09IDApIHtcbiAgICAgICAgZWxldmF0aW9uQ2FjaGUuc2V0KGxvbiwgbGF0LCBlbGV2YXRpb24pO1xuICAgICAgICByZXR1cm4gZWxldmF0aW9uO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIEZhbGwgdGhyb3VnaCB0byBkaXJlY3QgcXVlcnlcbiAgICB9XG4gIH1cbiAgXG4gIC8vIERpcmVjdCBtYXAgcXVlcnkgYXMgZmFsbGJhY2tcbiAgdHJ5IHtcbiAgICBlbGV2YXRpb24gPSBtYXAucXVlcnlUZXJyYWluRWxldmF0aW9uKGNvb3JkaW5hdGVzKSA/PyBudWxsO1xuICAgIGlmIChlbGV2YXRpb24gIT09IG51bGwgJiYgZWxldmF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGVsZXZhdGlvbkNhY2hlLnNldChsb24sIGxhdCwgZWxldmF0aW9uKTtcbiAgICAgIHJldHVybiBlbGV2YXRpb247XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKGBUZXJyYWluIHF1ZXJ5IGVycm9yIGF0IFske2xvbn0sICR7bGF0fV06YCwgZSk7XG4gIH1cbiAgXG4gIC8vIExhc3QgcmVzb3J0IGZhbGxiYWNrXG4gIHJldHVybiAwO1xufVxuXG4vKipcbiAqIE9wdGltaXplZCBiYXRjaCBlbGV2YXRpb24gcXVlcnlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJhdGNoUXVlcnlFbGV2YXRpb25zKFxuICBtYXA6IG1hcGJveGdsLk1hcCxcbiAgY29vcmRpbmF0ZXM6IENvb3JkaW5hdGVzMkRbXSxcbiAgZWxldmF0aW9uU2VydmljZT86IGFueVxuKTogUHJvbWlzZTxudW1iZXJbXT4ge1xuICBpZiAoZWxldmF0aW9uU2VydmljZSAmJiB0eXBlb2YgZWxldmF0aW9uU2VydmljZS5iYXRjaEdldEVsZXZhdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IGVsZXZhdGlvblNlcnZpY2UuYmF0Y2hHZXRFbGV2YXRpb25zKGNvb3JkaW5hdGVzKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0JhdGNoIGVsZXZhdGlvbiBxdWVyeSBmYWlsZWQsIGZhbGxpbmcgYmFjayB0byBpbmRpdmlkdWFsIHF1ZXJpZXM6JywgZSk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBQcm9jZXNzIGluIGxhcmdlciBiYXRjaGVzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgY29uc3QgQkFUQ0hfU0laRSA9IDEwMDtcbiAgY29uc3QgcmVzdWx0czogbnVtYmVyW10gPSBbXTtcbiAgXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29vcmRpbmF0ZXMubGVuZ3RoOyBpICs9IEJBVENIX1NJWkUpIHtcbiAgICBjb25zdCBiYXRjaCA9IGNvb3JkaW5hdGVzLnNsaWNlKGksIGkgKyBCQVRDSF9TSVpFKTtcbiAgICBjb25zdCBiYXRjaFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIGJhdGNoLm1hcChjb29yZHMgPT4gcXVlcnlFbGV2YXRpb24obWFwLCBjb29yZHMsIGVsZXZhdGlvblNlcnZpY2UpKVxuICAgICk7XG4gICAgcmVzdWx0cy5wdXNoKC4uLmJhdGNoUmVzdWx0cyk7XG4gIH1cbiAgXG4gIHJldHVybiByZXN1bHRzO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBib3VuZGluZyBib3ggY29vcmRpbmF0ZXMgYXJlIHZhbGlkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkQm91bmRzKGJvdW5kczogbnVtYmVyW10pOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICBib3VuZHMubGVuZ3RoID09PSA0ICYmXG4gICAgYm91bmRzWzBdID49IC0xODAgJiZcbiAgICBib3VuZHNbMV0gPj0gLTkwICYmXG4gICAgYm91bmRzWzJdIDw9IDE4MCAmJlxuICAgIGJvdW5kc1szXSA8PSA5MFxuICApO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIGdyaWQgb2YgY2VsbHMgZm9yIGFuYWx5c2lzLlxuICogT3B0aW1pemVkIGZvciBwZXJmb3JtYW5jZSB3aXRoIGJhdGNoZWQgZWxldmF0aW9uIHF1ZXJpZXMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUdyaWQoXG4gIG1hcDogbWFwYm94Z2wuTWFwLFxuICBvcHRpb25zOiB7XG4gICAgY2VudGVyPzogQ29vcmRpbmF0ZXMyRDtcbiAgICByYW5nZT86IG51bWJlcjtcbiAgICBmbGlnaHRQYXRoPzogR2VvSlNPTi5GZWF0dXJlPEdlb0pTT04uTGluZVN0cmluZz47XG4gICAgZWxvc0dyaWRSYW5nZT86IG51bWJlcjtcbiAgICBncmlkU2l6ZTogbnVtYmVyO1xuICAgIGVsZXZhdGlvblNlcnZpY2U/OiBhbnk7XG4gIH1cbik6IFByb21pc2U8R3JpZENlbGxbXT4ge1xuICBjb25zdCB7IGNlbnRlciwgcmFuZ2UsIGZsaWdodFBhdGgsIGVsb3NHcmlkUmFuZ2UsIGdyaWRTaXplLCBlbGV2YXRpb25TZXJ2aWNlIH0gPSBvcHRpb25zO1xuICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgXG4gIHRyeSB7XG4gICAgbGV0IGdyaWQ7XG4gICAgXG4gICAgLy8gTWFya2VyLWJhc2VkIGdyaWQgZ2VuZXJhdGlvblxuICAgIGlmIChjZW50ZXIgJiYgcmFuZ2UpIHtcbiAgICAgIGlmICh0eXBlb2YgcmFuZ2UgIT09ICdudW1iZXInIHx8IHJhbmdlIDw9IDAgfHwgaXNOYU4ocmFuZ2UpKSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdJbnZhbGlkIHJhbmdlIGZvciBtYXJrZXIgZ3JpZCcsICdJTlZBTElEX0lOUFVUJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHBvaW50ID0gdHVyZi5wb2ludChjZW50ZXIpO1xuICAgICAgY29uc3QgYnVmZmVyID0gdHVyZi5idWZmZXIocG9pbnQsIHJhbmdlLCB7IHVuaXRzOiAnbWV0ZXJzJyB9KTtcbiAgICAgIGlmICghYnVmZmVyKSB0aHJvdyBjcmVhdGVFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBidWZmZXInLCAnSU5WQUxJRF9JTlBVVCcpO1xuICAgICAgY29uc3QgYm91bmRzID0gdHVyZi5iYm94KGJ1ZmZlcikgYXMgQkJveDtcbiAgICAgIFxuICAgICAgaWYgKCFpc1ZhbGlkQm91bmRzKGJvdW5kcykpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0ludmFsaWQgYm91bmRzIGZvciBtYXJrZXIgZ3JpZCcsICdHUklEX0dFTkVSQVRJT04nKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZ3JpZCA9IHR1cmYucG9pbnRHcmlkKGJvdW5kcywgZ3JpZFNpemUsIHtcbiAgICAgICAgdW5pdHM6ICdtZXRlcnMnLFxuICAgICAgICBtYXNrOiBidWZmZXJcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgR2VuZXJhdGVkIG1hcmtlciBncmlkIHdpdGggJHtncmlkLmZlYXR1cmVzLmxlbmd0aH0gcG9pbnRzYCk7XG4gICAgfSBcbiAgICAvLyBGbGlnaHQgcGF0aCBncmlkIGdlbmVyYXRpb25cbiAgICBlbHNlIGlmIChmbGlnaHRQYXRoICYmIGVsb3NHcmlkUmFuZ2UpIHtcbiAgICAgIGlmICh0eXBlb2YgZWxvc0dyaWRSYW5nZSAhPT0gJ251bWJlcicgfHwgZWxvc0dyaWRSYW5nZSA8PSAwIHx8IGlzTmFOKGVsb3NHcmlkUmFuZ2UpKSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdJbnZhbGlkIGVsb3NHcmlkUmFuZ2UnLCAnSU5WQUxJRF9JTlBVVCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBib3VuZHMgPSB0dXJmLmJib3goZmxpZ2h0UGF0aCkgYXMgQkJveDtcbiAgICAgIGNvbnN0IG1hcmdpbiA9IHR1cmYubGVuZ3RoVG9EZWdyZWVzKGVsb3NHcmlkUmFuZ2UsICdtZXRlcnMnKTtcbiAgICAgIGNvbnN0IGV4dGVuZGVkQm91bmRzOiBCQm94ID0gW1xuICAgICAgICBib3VuZHNbMF0gLSBtYXJnaW4sXG4gICAgICAgIGJvdW5kc1sxXSAtIG1hcmdpbixcbiAgICAgICAgYm91bmRzWzJdICsgbWFyZ2luLFxuICAgICAgICBib3VuZHNbM10gKyBtYXJnaW5cbiAgICAgIF07XG4gICAgICBcbiAgICAgIGlmICghaXNWYWxpZEJvdW5kcyhleHRlbmRlZEJvdW5kcykpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0ludmFsaWQgZXh0ZW5kZWQgYm91bmRzJywgJ0dSSURfR0VORVJBVElPTicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBtYXNrT3B0aW9ucyA9IHtcbiAgICAgICAgdW5pdHM6ICdtZXRlcnMnIGFzIGNvbnN0LFxuICAgICAgICBtYXNrOiB0dXJmLmJ1ZmZlcihmbGlnaHRQYXRoLCBlbG9zR3JpZFJhbmdlLCB7IHVuaXRzOiAnbWV0ZXJzJyB9KSxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGdyaWQgPSB0dXJmLnBvaW50R3JpZChleHRlbmRlZEJvdW5kcywgZ3JpZFNpemUsIG1hc2tPcHRpb25zKTtcbiAgICAgIGNvbnNvbGUubG9nKGBHZW5lcmF0ZWQgZmxpZ2h0IHBhdGggZ3JpZCB3aXRoICR7Z3JpZC5mZWF0dXJlcy5sZW5ndGh9IHBvaW50c2ApO1xuICAgIH0gXG4gICAgZWxzZSB7XG4gICAgICB0aHJvdyBjcmVhdGVFcnJvcignSW52YWxpZCBncmlkIGdlbmVyYXRpb24gcGFyYW1ldGVycycsICdJTlZBTElEX0lOUFVUJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEV4dHJhY3QgY29vcmRpbmF0ZXMgZm9yIGJhdGNoIGVsZXZhdGlvbiBxdWVyeVxuICAgIGNvbnN0IGdyaWRDb29yZGluYXRlcyA9IGdyaWQuZmVhdHVyZXMubWFwKGZlYXR1cmUgPT4gXG4gICAgICBmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzIGFzIENvb3JkaW5hdGVzMkRcbiAgICApO1xuICAgIFxuICAgIC8vIEJhdGNoIHF1ZXJ5IGVsZXZhdGlvbnNcbiAgICBjb25zb2xlLnRpbWUoJ0dyaWRFbGV2YXRpb25RdWVyeScpO1xuICAgIGNvbnN0IGVsZXZhdGlvbnMgPSBhd2FpdCBiYXRjaFF1ZXJ5RWxldmF0aW9ucyhtYXAsIGdyaWRDb29yZGluYXRlcywgZWxldmF0aW9uU2VydmljZSk7XG4gICAgY29uc29sZS50aW1lRW5kKCdHcmlkRWxldmF0aW9uUXVlcnknKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgY2VsbHMgd2l0aCBlbGV2YXRpb25zXG4gICAgY29uc3QgY2VsbHM6IEdyaWRDZWxsW10gPSBncmlkLmZlYXR1cmVzLm1hcCgocG9pbnQsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBjZWxsID0gdHVyZi5jaXJjbGUocG9pbnQuZ2VvbWV0cnkuY29vcmRpbmF0ZXMsIGdyaWRTaXplIC8gMiwge1xuICAgICAgICB1bml0czogJ21ldGVycycsXG4gICAgICAgIHN0ZXBzOiA0LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBgY2VsbC0ke2luZGV4fWAsXG4gICAgICAgIGdlb21ldHJ5OiBjZWxsLmdlb21ldHJ5IGFzIEdlb0pTT04uUG9seWdvbixcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHZpc2liaWxpdHk6IDAsXG4gICAgICAgICAgZnVsbHlWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICBlbGV2YXRpb246IGVsZXZhdGlvbnNbaW5kZXhdLFxuICAgICAgICAgIGxhc3RBbmFseXplZDogRGF0ZS5ub3coKSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYEdyaWQgZ2VuZXJhdGlvbiBjb21wbGV0ZWQgaW4gJHtwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZX1tc2ApO1xuICAgIHJldHVybiBjZWxscztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZW5lcmF0ZUdyaWQ6JywgZXJyb3IpO1xuICAgIHRocm93IGNyZWF0ZUVycm9yKFxuICAgICAgJ0ZhaWxlZCB0byBnZW5lcmF0ZSBhbmFseXNpcyBncmlkJywgXG4gICAgICAnR1JJRF9HRU5FUkFUSU9OJywgXG4gICAgICBlcnJvclxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBQcm9jZXNzZXMgdGhlIGZsaWdodCBwYXRoIHdpdGggcmVndWxhciBzYW1wbGluZ1xuICogQHBhcmFtIG1hcCAtIE1hcGJveCBtYXAgaW5zdGFuY2VcbiAqIEBwYXJhbSBmbGlnaHRQYXRoIC0gRmxpZ2h0IHBhdGggZmVhdHVyZVxuICogQHBhcmFtIHNhbXBsaW5nUmVzb2x1dGlvbiAtIERpc3RhbmNlIGJldHdlZW4gc2FtcGxlcyBpbiBtZXRlcnNcbiAqIEBwYXJhbSBlbGV2YXRpb25TZXJ2aWNlIC0gT3B0aW9uYWwgZWxldmF0aW9uIHNlcnZpY2UgZm9yIHRlcnJhaW4gcXVlcnlpbmdcbiAqIEBwYXJhbSBvblByb2dyZXNzIC0gT3B0aW9uYWwgcHJvZ3Jlc3MgY2FsbGJhY2tcbiAqIEByZXR1cm5zIEFycmF5IG9mIHNhbXBsZWQgcG9pbnRzIGFsb25nIHRoZSBmbGlnaHQgcGF0aFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0ZsaWdodFBhdGgoXG4gIG1hcDogbWFwYm94Z2wuTWFwLFxuICBmbGlnaHRQYXRoOiBHZW9KU09OLkZlYXR1cmU8R2VvSlNPTi5MaW5lU3RyaW5nPixcbiAgc2FtcGxpbmdSZXNvbHV0aW9uOiBudW1iZXIgPSAxMCxcbiAgZWxldmF0aW9uU2VydmljZT86IGFueSxcbiAgb25Qcm9ncmVzcz86IChwcm9ncmVzczogbnVtYmVyKSA9PiB2b2lkXG4pOiBQcm9taXNlPFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdPiB7XG4gIC8vIEV4dHJhY3QgdGhlIExpbmVTdHJpbmcgZnJvbSB0aGUgZmxpZ2h0IHBhdGggZmVhdHVyZVxuICBjb25zdCBsaW5lU3RyaW5nID0gZmxpZ2h0UGF0aC5nZW9tZXRyeTtcbiAgXG4gIC8vIFNhbXBsZSB0aGUgZmxpZ2h0IHBhdGggYXQgdGhlIHNwZWNpZmllZCByZXNvbHV0aW9uXG4gIGNvbnN0IHNhbXBsZWRQb2ludHMgPSBhd2FpdCBzYW1wbGVGbGlnaHRQYXRoKGxpbmVTdHJpbmcsIHtcbiAgICByZXNvbHV0aW9uOiBzYW1wbGluZ1Jlc29sdXRpb24sXG4gICAgcHJvZ3Jlc3NDYWxsYmFjazogb25Qcm9ncmVzcyA/IChwcm9ncmVzcykgPT4ge1xuICAgICAgb25Qcm9ncmVzcyhwcm9ncmVzcyAqIDAuNSk7IC8vIFVzZSBoYWxmIG9mIHByb2dyZXNzIGZvciBzYW1wbGluZ1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBOZXZlciBhYm9ydCBmcm9tIGhlcmVcbiAgICB9IDogdW5kZWZpbmVkXG4gIH0pO1xuICBcbiAgLy8gUXVlcnkgdGVycmFpbiBlbGV2YXRpb25zIGZvciBhbGwgc2FtcGxlZCBwb2ludHMgaWYgbmVlZGVkXG4gIGlmIChvblByb2dyZXNzKSBvblByb2dyZXNzKDUwKTsgLy8gTWFyayBzYW1wbGluZyBhcyBjb21wbGV0ZVxuICBcbiAgLy8gRXh0cmFjdCBhbmQgcmV0dXJuIHRoZSAzRCBjb29yZGluYXRlc1xuICBjb25zdCBzYW1wbGVkQ29vcmRpbmF0ZXM6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdID0gc2FtcGxlZFBvaW50cy5tYXAoXG4gICAgcG9pbnQgPT4gcG9pbnQucG9zaXRpb25cbiAgKTtcbiAgXG4gIGlmIChvblByb2dyZXNzKSBvblByb2dyZXNzKDEwMCk7IC8vIE1hcmsgcHJvY2Vzc2luZyBhcyBjb21wbGV0ZVxuICByZXR1cm4gc2FtcGxlZENvb3JkaW5hdGVzO1xufVxuXG4vKipcbiAqIENoZWNrcyBsaW5lIG9mIHNpZ2h0IGJldHdlZW4gYSBzb3VyY2UgcG9pbnQgYW5kIGEgdGFyZ2V0IHBvaW50LlxuICogT3B0aW1pemVkIHZlcnNpb24gd2l0aCBlYXJseSB0ZXJtaW5hdGlvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrTGluZU9mU2lnaHQoXG4gIG1hcDogbWFwYm94Z2wuTWFwLFxuICBzb3VyY2VQb2ludDogQ29vcmRpbmF0ZXMzRCxcbiAgdGFyZ2V0UG9pbnQ6IENvb3JkaW5hdGVzM0QsXG4gIG9wdGlvbnM6IHsgXG4gICAgc2FtcGxlQ291bnQ/OiBudW1iZXI7IFxuICAgIG1pbmltdW1PZmZzZXQ/OiBudW1iZXI7XG4gICAgZWxldmF0aW9uU2VydmljZT86IGFueTtcbiAgfSA9IHt9XG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3QgW3NvdXJjZUxuZywgc291cmNlTGF0LCBzb3VyY2VBbHRdID0gc291cmNlUG9pbnQ7XG4gIGNvbnN0IFt0YXJnZXRMbmcsIHRhcmdldExhdCwgdGFyZ2V0QWx0XSA9IHRhcmdldFBvaW50O1xuICBcbiAgLy8gVmFsaWRhdGUgaW5wdXRzXG4gIGlmIChzb3VyY2VQb2ludC5zb21lKHYgPT4gdHlwZW9mIHYgIT09ICdudW1iZXInIHx8IGlzTmFOKHYpKSB8fFxuICAgICAgdGFyZ2V0UG9pbnQuc29tZSh2ID0+IHR5cGVvZiB2ICE9PSAnbnVtYmVyJyB8fCBpc05hTih2KSkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIGNvb3JkaW5hdGVzOicsIHsgc291cmNlUG9pbnQsIHRhcmdldFBvaW50IH0pO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgY29uc3QgbWluaW11bU9mZnNldCA9IG9wdGlvbnMubWluaW11bU9mZnNldCA/PyAxO1xuICBjb25zdCBkaXN0YW5jZSA9IHR1cmYuZGlzdGFuY2UoXG4gICAgW3NvdXJjZUxuZywgc291cmNlTGF0XSxcbiAgICBbdGFyZ2V0TG5nLCB0YXJnZXRMYXRdLFxuICAgIHsgdW5pdHM6ICdtZXRlcnMnIH1cbiAgKTtcbiAgXG4gIC8vIEFkYXB0aXZlIHNhbXBsaW5nIGJhc2VkIG9uIGRpc3RhbmNlXG4gIGNvbnN0IHNhbXBsZUNvdW50ID0gb3B0aW9ucy5zYW1wbGVDb3VudCA/PyBcbiAgICBNYXRoLm1pbihNYXRoLm1heCg1LCBNYXRoLmNlaWwoZGlzdGFuY2UgLyA1MCkpLCAyMCk7XG4gIFxuICAvLyBBZGQgdGhlIG1pbmltdW0gb2Zmc2V0IHRvIHRhcmdldCBhbHRpdHVkZVxuICBjb25zdCBhZGp1c3RlZFRhcmdldEFsdCA9IHRhcmdldEFsdCArIG1pbmltdW1PZmZzZXQ7XG4gIFxuICAvLyBMb2NhbCBlbGV2YXRpb24gY2FjaGUgZm9yIHRoaXMgc3BlY2lmaWMgTE9TIGNoZWNrXG4gIGNvbnN0IGxvY2FsQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICBcbiAgLy8gR2V0IGVsZXZhdGlvbiB3aXRoIGxvY2FsIGNhY2hpbmdcbiAgY29uc3QgZ2V0RWxldmF0aW9uID0gYXN5bmMgKGxuZzogbnVtYmVyLCBsYXQ6IG51bWJlcik6IFByb21pc2U8bnVtYmVyPiA9PiB7XG4gICAgY29uc3Qga2V5ID0gYCR7bG5nLnRvRml4ZWQoNil9fCR7bGF0LnRvRml4ZWQoNil9YDtcbiAgICBpZiAobG9jYWxDYWNoZS5oYXMoa2V5KSkgcmV0dXJuIGxvY2FsQ2FjaGUuZ2V0KGtleSkhO1xuICAgIFxuICAgIGNvbnN0IGVsZXYgPSBhd2FpdCBxdWVyeUVsZXZhdGlvbihtYXAsIFtsbmcsIGxhdF0sIG9wdGlvbnMuZWxldmF0aW9uU2VydmljZSk7XG4gICAgbG9jYWxDYWNoZS5zZXQoa2V5LCBlbGV2KTtcbiAgICByZXR1cm4gZWxldjtcbiAgfTtcbiAgXG4gIC8vIENoZWNrIGVhY2ggc2FtcGxlIHBvaW50IGFsb25nIHRoZSBsaW5lXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgc2FtcGxlQ291bnQ7IGkrKykge1xuICAgIGNvbnN0IGZyYWN0aW9uID0gaSAvIHNhbXBsZUNvdW50O1xuICAgIFxuICAgIC8vIEludGVycG9sYXRlIHBvc2l0aW9uXG4gICAgY29uc3QgbG5nID0gc291cmNlTG5nICsgZnJhY3Rpb24gKiAodGFyZ2V0TG5nIC0gc291cmNlTG5nKTtcbiAgICBjb25zdCBsYXQgPSBzb3VyY2VMYXQgKyBmcmFjdGlvbiAqICh0YXJnZXRMYXQgLSBzb3VyY2VMYXQpO1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBoZWlnaHQgYWxvbmcgdGhlIGxpbmUgb2Ygc2lnaHQgYXQgdGhpcyBwb2ludFxuICAgIGNvbnN0IGxvc0hlaWdodCA9IHNvdXJjZUFsdCArIGZyYWN0aW9uICogKGFkanVzdGVkVGFyZ2V0QWx0IC0gc291cmNlQWx0KTtcbiAgICBcbiAgICAvLyBHZXQgdGVycmFpbiBoZWlnaHQgYXQgdGhpcyBwb2ludFxuICAgIGNvbnN0IHRlcnJhaW5IZWlnaHQgPSBhd2FpdCBnZXRFbGV2YXRpb24obG5nLCBsYXQpO1xuICAgIFxuICAgIC8vIElmIHRlcnJhaW4gaXMgaGlnaGVyIHRoYW4gTE9TLCB0aGUgbGluZSBpcyBibG9ja2VkXG4gICAgaWYgKHRlcnJhaW5IZWlnaHQgPiBsb3NIZWlnaHQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIElmIHdlJ3ZlIGNoZWNrZWQgYWxsIHNhbXBsZSBwb2ludHMgYW5kIG5vbmUgYmxvY2sgdGhlIGxpbmUsIHdlIGhhdmUgTE9TXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIENoZWNrcyBMT1MgZm9yIFN0YXRpb24gQW5hbHlzaXMgZnJvbSBhIHN0YXRpb24gdG8gYSBzaW5nbGUgZ3JpZCBjZWxsLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tTdGF0aW9uTE9TKFxuICBtYXA6IG1hcGJveGdsLk1hcCxcbiAgc291cmNlUG9pbnQ6IENvb3JkaW5hdGVzM0QsXG4gIHRhcmdldFBvaW50OiBDb29yZGluYXRlczNELFxuICBvcHRpb25zOiB7IFxuICAgIHNhbXBsZUNvdW50PzogbnVtYmVyOyBcbiAgICBtaW5pbXVtT2Zmc2V0PzogbnVtYmVyO1xuICAgIGVsZXZhdGlvblNlcnZpY2U/OiBhbnk7XG4gIH0gPSB7fVxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHJldHVybiBjaGVja0xpbmVPZlNpZ2h0KG1hcCwgc291cmNlUG9pbnQsIHRhcmdldFBvaW50LCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBHZXQgTE9TIHByb2ZpbGUgZGF0YSBiZXR3ZWVuIHR3byBwb2ludHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldExPU1Byb2ZpbGUoXG4gIG1hcDogbWFwYm94Z2wuTWFwLFxuICBzb3VyY2VQb2ludDogQ29vcmRpbmF0ZXMzRCxcbiAgdGFyZ2V0UG9pbnQ6IENvb3JkaW5hdGVzM0QsXG4gIG9wdGlvbnM6IHsgXG4gICAgc2FtcGxlRGlzdGFuY2U/OiBudW1iZXI7IFxuICAgIG1pbmltdW1PZmZzZXQ/OiBudW1iZXI7XG4gICAgZWxldmF0aW9uU2VydmljZT86IGFueTtcbiAgfSA9IHt9XG4pOiBQcm9taXNlPHsgcHJvZmlsZTogTE9TUHJvZmlsZVBvaW50W107IGNsZWFyOiBib29sZWFuIH0+IHtcbiAgY29uc3QgW3NvdXJjZUxuZywgc291cmNlTGF0LCBzb3VyY2VBbHRdID0gc291cmNlUG9pbnQ7XG4gIGNvbnN0IFt0YXJnZXRMbmcsIHRhcmdldExhdCwgdGFyZ2V0QWx0XSA9IHRhcmdldFBvaW50O1xuICBcbiAgY29uc3QgbWluaW11bU9mZnNldCA9IG9wdGlvbnMubWluaW11bU9mZnNldCA/PyAzO1xuICBjb25zdCBwb2ludDEgPSB0dXJmLnBvaW50KFtzb3VyY2VMbmcsIHNvdXJjZUxhdF0pO1xuICBjb25zdCBwb2ludDIgPSB0dXJmLnBvaW50KFt0YXJnZXRMbmcsIHRhcmdldExhdF0pO1xuICBjb25zdCB0b3RhbERpc3RhbmNlID0gdHVyZi5kaXN0YW5jZShwb2ludDEsIHBvaW50MiwgeyB1bml0czogJ21ldGVycycgfSk7XG4gIFxuICBjb25zdCBzYW1wbGVEaXN0YW5jZSA9IG9wdGlvbnMuc2FtcGxlRGlzdGFuY2UgPz8gMTA7XG4gIGNvbnN0IHNhbXBsZUNvdW50ID0gTWF0aC5jZWlsKHRvdGFsRGlzdGFuY2UgLyBzYW1wbGVEaXN0YW5jZSk7XG4gIFxuICBjb25zdCBwcm9maWxlOiBMT1NQcm9maWxlUG9pbnRbXSA9IFtdO1xuICBsZXQgaXNPYnN0cnVjdGVkID0gZmFsc2U7XG4gIFxuICAvLyBCYXRjaCBjb29yZGluYXRlcyBmb3IgZWZmaWNpZW50IHF1ZXJ5aW5nXG4gIGNvbnN0IHNhbXBsZUNvb3JkczogQ29vcmRpbmF0ZXMyRFtdID0gW107XG4gIFxuICBmb3IgKGxldCBpID0gMDsgaSA8PSBzYW1wbGVDb3VudDsgaSsrKSB7XG4gICAgY29uc3QgZnJhY3Rpb24gPSBpIC8gc2FtcGxlQ291bnQ7XG4gICAgY29uc3QgbG5nID0gc291cmNlTG5nICsgZnJhY3Rpb24gKiAodGFyZ2V0TG5nIC0gc291cmNlTG5nKTtcbiAgICBjb25zdCBsYXQgPSBzb3VyY2VMYXQgKyBmcmFjdGlvbiAqICh0YXJnZXRMYXQgLSBzb3VyY2VMYXQpO1xuICAgIHNhbXBsZUNvb3Jkcy5wdXNoKFtsbmcsIGxhdF0pO1xuICB9XG4gIFxuICAvLyBCYXRjaCBxdWVyeSBlbGV2YXRpb25zXG4gIGNvbnN0IHRlcnJhaW5FbGV2YXRpb25zID0gYXdhaXQgYmF0Y2hRdWVyeUVsZXZhdGlvbnMoXG4gICAgbWFwLCBcbiAgICBzYW1wbGVDb29yZHMsIFxuICAgIG9wdGlvbnMuZWxldmF0aW9uU2VydmljZVxuICApO1xuICBcbiAgLy8gQ3JlYXRlIHByb2ZpbGUgcG9pbnRzXG4gIGZvciAobGV0IGkgPSAwOyBpIDw9IHNhbXBsZUNvdW50OyBpKyspIHtcbiAgICBjb25zdCBmcmFjdGlvbiA9IGkgLyBzYW1wbGVDb3VudDtcbiAgICBjb25zdCBsb3NBbHRpdHVkZSA9IHNvdXJjZUFsdCAtICgoc291cmNlQWx0IC0gKHRhcmdldEFsdCArIG1pbmltdW1PZmZzZXQpKSAqIGZyYWN0aW9uKTtcbiAgICBjb25zdCB0ZXJyYWluID0gdGVycmFpbkVsZXZhdGlvbnNbaV07XG4gICAgXG4gICAgcHJvZmlsZS5wdXNoKHtcbiAgICAgIGRpc3RhbmNlOiBmcmFjdGlvbiAqIHRvdGFsRGlzdGFuY2UsXG4gICAgICB0ZXJyYWluLFxuICAgICAgbG9zOiBsb3NBbHRpdHVkZSxcbiAgICB9KTtcbiAgICBcbiAgICBpZiAodGVycmFpbiA+IGxvc0FsdGl0dWRlKSB7XG4gICAgICBpc09ic3RydWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8vIGRlYnVnZ2luIEFkZCBhdCB0aGUgZW5kIG9mIHRoZSBnZXRMT1NQcm9maWxlIGZ1bmN0aW9uIGJlZm9yZSByZXR1cm5pbmdcbiAgY29uc29sZS5sb2coJ0dlbmVyYXRlZCBwcm9maWxlOicsIHtcbiAgICBwb2ludENvdW50OiBwcm9maWxlLmxlbmd0aCxcbiAgICBjbGVhcjogIWlzT2JzdHJ1Y3RlZCxcbiAgICBzYW1wbGVQb2ludHM6IHByb2ZpbGUuc2xpY2UoMCwgMylcbiAgfSk7XG4gIFxuICByZXR1cm4geyBwcm9maWxlLCBjbGVhcjogIWlzT2JzdHJ1Y3RlZCB9O1xufVxuXG4vKipcbiAqIENoZWNrcyB2aXNpYmlsaXR5IGFsb25nIGZsaWdodCBwYXRoIGZyb20gYSBzaW5nbGUgbG9jYXRpb25cbiAqIE9ubHkgY29uc2lkZXJzIGZsaWdodCBwYXRoIHBvaW50cyB3aXRoaW4gc3BlY2lmaWVkIGdyaWQgcmFuZ2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRmxpZ2h0UGF0aExPUyhcbiAgbWFwOiBtYXBib3hnbC5NYXAsXG4gIHNvdXJjZVBvaW50OiBDb29yZGluYXRlczNELFxuICBmbGlnaHRDb29yZGluYXRlczogQ29vcmRpbmF0ZXMzRFtdLFxuICBvcHRpb25zOiB7IFxuICAgIHNhbXBsZUNvdW50PzogbnVtYmVyOyBcbiAgICBtaW5pbXVtT2Zmc2V0PzogbnVtYmVyO1xuICAgIGFsdGl0dWRlTW9kZT86IFwidGVycmFpblwiIHwgXCJyZWxhdGl2ZVwiIHwgXCJhYnNvbHV0ZVwiO1xuICAgIGVsZXZhdGlvblNlcnZpY2U/OiBhbnk7XG4gICAgZ3JpZFJhbmdlPzogbnVtYmVyOyAvLyBQYXJhbWV0ZXIgdG8gdXNlIHRoZSBzYW1lIHJhbmdlIGFzIGdyaWQgZ2VuZXJhdGlvblxuICAgIHNhbXBsZWRDb29yZGluYXRlcz86IENvb3JkaW5hdGVzM0RbXTsgLy8gTmV3IHBhcmFtZXRlciBmb3IgcHJlLXNhbXBsZWQgY29vcmRpbmF0ZXNcbiAgfSA9IHt9XG4pOiBQcm9taXNlPG51bWJlcj4ge1xuICBjb25zdCB7IFxuICAgIHNhbXBsZUNvdW50ID0gMjAsIFxuICAgIG1pbmltdW1PZmZzZXQgPSAxLCBcbiAgICBhbHRpdHVkZU1vZGUgPSBcImFic29sdXRlXCIsXG4gICAgZ3JpZFJhbmdlID0gNTAwLCAvLyBEZWZhdWx0IHRvIDUwMG0gaWYgbm90IHByb3ZpZGVkXG4gICAgc2FtcGxlZENvb3JkaW5hdGVzIC8vIFRoaXMgd2lsbCBiZSB1c2VkIGlmIHByb3ZpZGVkXG4gIH0gPSBvcHRpb25zO1xuICBcbiAgLy8gVXNlIHByb3ZpZGVkIHNhbXBsZWQgY29vcmRpbmF0ZXMgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgdXNlIHJhdyBjb29yZGluYXRlc1xuICBjb25zdCBjb29yZGluYXRlc1RvQ2hlY2sgPSBzYW1wbGVkQ29vcmRpbmF0ZXMgfHwgZmxpZ2h0Q29vcmRpbmF0ZXM7XG4gIFxuICBpZiAoIUFycmF5LmlzQXJyYXkoc291cmNlUG9pbnQpIHx8IHNvdXJjZVBvaW50Lmxlbmd0aCAhPT0gMyB8fCBcbiAgICAgIHNvdXJjZVBvaW50LnNvbWUodiA9PiB0eXBlb2YgdiAhPT0gJ251bWJlcicgfHwgaXNOYU4odikpKSB7XG4gICAgdGhyb3cgY3JlYXRlRXJyb3IoJ1NvdXJjZSBwb2ludCBtdXN0IGJlIGEgdmFsaWQgW2xvbiwgbGF0LCBhbHRdIGFycmF5JywgJ0lOVkFMSURfSU5QVVQnKTtcbiAgfVxuICBcbiAgaWYgKCFBcnJheS5pc0FycmF5KGNvb3JkaW5hdGVzVG9DaGVjaykgfHwgIWNvb3JkaW5hdGVzVG9DaGVjay5ldmVyeShwb2ludCA9PiBcbiAgICAgIEFycmF5LmlzQXJyYXkocG9pbnQpICYmIHBvaW50Lmxlbmd0aCA9PT0gMyAmJiBwb2ludC5ldmVyeSh2ID0+IHR5cGVvZiB2ID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odikpKSkge1xuICAgIHRocm93IGNyZWF0ZUVycm9yKCdGbGlnaHQgY29vcmRpbmF0ZXMgbXVzdCBiZSBhbiBhcnJheSBvZiBbbG9uLCBsYXQsIGFsdF0gYXJyYXlzJywgJ0lOVkFMSURfSU5QVVQnKTtcbiAgfVxuICBcbiAgLy8gRmlsdGVyIGZsaWdodCBjb29yZGluYXRlcyBieSBkaXN0YW5jZSB0byBvbmx5IGNoZWNrIHJlbGV2YW50IG9uZXNcbiAgY29uc3QgcmVsZXZhbnRDb29yZGluYXRlczogQ29vcmRpbmF0ZXMzRFtdID0gW107XG4gIFxuICBmb3IgKGNvbnN0IGZwUG9pbnQgb2YgY29vcmRpbmF0ZXNUb0NoZWNrKSB7XG4gICAgLy8gQ2FsY3VsYXRlIGRpc3RhbmNlIGZyb20gY2VsbCB0byBmbGlnaHQgcG9pbnRcbiAgICBjb25zdCBkaXN0YW5jZSA9IHR1cmYuZGlzdGFuY2UoXG4gICAgICBbc291cmNlUG9pbnRbMF0sIHNvdXJjZVBvaW50WzFdXSxcbiAgICAgIFtmcFBvaW50WzBdLCBmcFBvaW50WzFdXSxcbiAgICAgIHsgdW5pdHM6ICdtZXRlcnMnIH1cbiAgICApO1xuICAgIFxuICAgIC8vIE9ubHkgY29uc2lkZXIgcG9pbnRzIHdpdGhpbiB0aGUgZ3JpZCByYW5nZVxuICAgIGlmIChkaXN0YW5jZSA8PSBncmlkUmFuZ2UpIHtcbiAgICAgIHJlbGV2YW50Q29vcmRpbmF0ZXMucHVzaChmcFBvaW50KTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIElmIG5vIHJlbGV2YW50IGZsaWdodCBjb29yZGluYXRlcywgY2VsbCBpcyBub3QgdmlzaWJsZVxuICBpZiAocmVsZXZhbnRDb29yZGluYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuICBcbiAgbGV0IHZpc2libGVDb3VudCA9IDA7XG4gIFxuICAvLyBDaGVjayB2aXNpYmlsaXR5IG9ubHkgZm9yIHJlbGV2YW50IGNvb3JkaW5hdGVzXG4gIGZvciAoY29uc3QgdGFyZ2V0UG9pbnQgb2YgcmVsZXZhbnRDb29yZGluYXRlcykge1xuICAgIHRyeSB7XG4gICAgICBpZiAoYWx0aXR1ZGVNb2RlID09PSBcInRlcnJhaW5cIiB8fCBhbHRpdHVkZU1vZGUgPT09IFwicmVsYXRpdmVcIikge1xuICAgICAgICBjb25zdCB0ZXJyYWluRWxldmF0aW9uID0gYXdhaXQgcXVlcnlFbGV2YXRpb24oXG4gICAgICAgICAgbWFwLCBcbiAgICAgICAgICBbdGFyZ2V0UG9pbnRbMF0sIHRhcmdldFBvaW50WzFdXSwgXG4gICAgICAgICAgb3B0aW9ucy5lbGV2YXRpb25TZXJ2aWNlXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhZGp1c3RlZFRhcmdldFBvaW50OiBDb29yZGluYXRlczNEID0gW1xuICAgICAgICAgIHRhcmdldFBvaW50WzBdLFxuICAgICAgICAgIHRhcmdldFBvaW50WzFdLFxuICAgICAgICAgIHRlcnJhaW5FbGV2YXRpb24gKyB0YXJnZXRQb2ludFsyXVxuICAgICAgICBdO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gYXdhaXQgY2hlY2tMaW5lT2ZTaWdodChcbiAgICAgICAgICBtYXAsXG4gICAgICAgICAgc291cmNlUG9pbnQsXG4gICAgICAgICAgYWRqdXN0ZWRUYXJnZXRQb2ludCxcbiAgICAgICAgICB7IFxuICAgICAgICAgICAgc2FtcGxlQ291bnQsIFxuICAgICAgICAgICAgbWluaW11bU9mZnNldCxcbiAgICAgICAgICAgIGVsZXZhdGlvblNlcnZpY2U6IG9wdGlvbnMuZWxldmF0aW9uU2VydmljZVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChpc1Zpc2libGUpIHZpc2libGVDb3VudCsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gYXdhaXQgY2hlY2tMaW5lT2ZTaWdodChcbiAgICAgICAgICBtYXAsXG4gICAgICAgICAgc291cmNlUG9pbnQsXG4gICAgICAgICAgdGFyZ2V0UG9pbnQsXG4gICAgICAgICAgeyBcbiAgICAgICAgICAgIHNhbXBsZUNvdW50LCBcbiAgICAgICAgICAgIG1pbmltdW1PZmZzZXQsXG4gICAgICAgICAgICBlbGV2YXRpb25TZXJ2aWNlOiBvcHRpb25zLmVsZXZhdGlvblNlcnZpY2UgXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGlzVmlzaWJsZSkgdmlzaWJsZUNvdW50Kys7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKCdFcnJvciBjaGVja2luZyBMT1MgZm9yIHBvaW50OicsIHRhcmdldFBvaW50LCBlKTtcbiAgICAgIC8vIENvbnRpbnVlIHRvIG5leHQgcG9pbnRcbiAgICB9XG4gIH1cbiAgXG4gIGNvbnN0IHZpc2liaWxpdHlQZXJjZW50YWdlID0gcmVsZXZhbnRDb29yZGluYXRlcy5sZW5ndGggPiAwID8gXG4gICAgKHZpc2libGVDb3VudCAvIHJlbGV2YW50Q29vcmRpbmF0ZXMubGVuZ3RoKSAqIDEwMCA6IDA7XG4gIFxuICByZXR1cm4gdmlzaWJpbGl0eVBlcmNlbnRhZ2U7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBjb21iaW5lZCBib3VuZGluZyBib3ggZm9yIG11bHRpcGxlIHN0YXRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUNvbWJpbmVkQm91bmRpbmdCb3goXG4gIHN0YXRpb25zOiBBcnJheTx7IGxvY2F0aW9uOiBMb2NhdGlvbkRhdGE7IHJhbmdlOiBudW1iZXIgfT5cbik6IEJCb3gge1xuICBpZiAoIXN0YXRpb25zLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gc3RhdGlvbnMgcHJvdmlkZWQgZm9yIGFuYWx5c2lzJyk7XG4gIH1cbiAgXG4gIGNvbnN0IGJib3hlcyA9IHN0YXRpb25zLm1hcCgoc3RhdGlvbikgPT4ge1xuICAgIGNvbnN0IHBvaW50ID0gdHVyZi5wb2ludChbc3RhdGlvbi5sb2NhdGlvbi5sbmcsIHN0YXRpb24ubG9jYXRpb24ubGF0XSk7XG4gICAgY29uc3QgYnVmZmVyID0gdHVyZi5idWZmZXIocG9pbnQsIHN0YXRpb24ucmFuZ2UsIHsgdW5pdHM6ICdtZXRlcnMnIH0pO1xuICAgIHJldHVybiB0dXJmLmJib3goYnVmZmVyKSBhcyBCQm94O1xuICB9KTtcbiAgXG4gIGNvbnN0IGNvbWJpbmVkQmJveDogQkJveCA9IFsxODAsIDkwLCAtMTgwLCAtOTBdO1xuICBiYm94ZXMuZm9yRWFjaCgoYmJveCkgPT4ge1xuICAgIGNvbWJpbmVkQmJveFswXSA9IE1hdGgubWluKGNvbWJpbmVkQmJveFswXSwgYmJveFswXSk7XG4gICAgY29tYmluZWRCYm94WzFdID0gTWF0aC5taW4oY29tYmluZWRCYm94WzFdLCBiYm94WzFdKTtcbiAgICBjb21iaW5lZEJib3hbMl0gPSBNYXRoLm1heChjb21iaW5lZEJib3hbMl0sIGJib3hbMl0pO1xuICAgIGNvbWJpbmVkQmJveFszXSA9IE1hdGgubWF4KGNvbWJpbmVkQmJveFszXSwgYmJveFszXSk7XG4gIH0pO1xuICBcbiAgcmV0dXJuIGNvbWJpbmVkQmJveDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgc3RhdGlvbiBoYXMgbGluZSBvZiBzaWdodCB0byBhbGwgcHJvdmlkZWQgbG9jYXRpb25zXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1N0YXRpb25Ub0xvY2F0aW9uTE9TKFxuICBtYXA6IG1hcGJveGdsLk1hcCxcbiAgc3RhdGlvbkxvY2F0aW9uOiBMb2NhdGlvbkRhdGEsXG4gIHN0YXRpb25FbGV2YXRpb25PZmZzZXQ6IG51bWJlcixcbiAgdGFyZ2V0TG9jYXRpb25zOiBMb2NhdGlvbkRhdGFbXSxcbiAgb3B0aW9uczoge1xuICAgIGVsZXZhdGlvblNlcnZpY2U/OiBhbnk7XG4gIH0gPSB7fVxuKTogUHJvbWlzZTx7IFxuICB2aXNpYmxlTG9jYXRpb25zOiBMb2NhdGlvbkRhdGFbXTsgXG4gIHZpc2liaWxpdHlQZXJjZW50YWdlOiBudW1iZXI7IFxufT4ge1xuICBpZiAoIXN0YXRpb25Mb2NhdGlvbiB8fCB0eXBlb2Ygc3RhdGlvbkxvY2F0aW9uLmxuZyAhPT0gJ251bWJlcicgfHwgXG4gICAgICB0eXBlb2Ygc3RhdGlvbkxvY2F0aW9uLmxhdCAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBjcmVhdGVFcnJvcignSW52YWxpZCBzdGF0aW9uIGxvY2F0aW9uJywgJ0lOVkFMSURfSU5QVVQnKTtcbiAgfVxuICBcbiAgaWYgKCF0YXJnZXRMb2NhdGlvbnMgfHwgIXRhcmdldExvY2F0aW9ucy5sZW5ndGgpIHtcbiAgICByZXR1cm4geyB2aXNpYmxlTG9jYXRpb25zOiBbXSwgdmlzaWJpbGl0eVBlcmNlbnRhZ2U6IDAgfTtcbiAgfVxuICBcbiAgLy8gR2V0IHN0YXRpb24gZWxldmF0aW9uIGlmIG5vdCBhdmFpbGFibGVcbiAgY29uc3Qgc3RhdGlvbkVsZXZhdGlvbiA9IHN0YXRpb25Mb2NhdGlvbi5lbGV2YXRpb24gPz8gXG4gICAgYXdhaXQgcXVlcnlFbGV2YXRpb24obWFwLCBbc3RhdGlvbkxvY2F0aW9uLmxuZywgc3RhdGlvbkxvY2F0aW9uLmxhdF0sIG9wdGlvbnMuZWxldmF0aW9uU2VydmljZSk7XG4gIFxuICBjb25zdCBzdGF0aW9uUG9pbnQ6IENvb3JkaW5hdGVzM0QgPSBbXG4gICAgc3RhdGlvbkxvY2F0aW9uLmxuZyxcbiAgICBzdGF0aW9uTG9jYXRpb24ubGF0LFxuICAgIHN0YXRpb25FbGV2YXRpb24gKyBzdGF0aW9uRWxldmF0aW9uT2Zmc2V0XG4gIF07XG4gIFxuICBjb25zdCB2aXNpYmxlTG9jYXRpb25zOiBMb2NhdGlvbkRhdGFbXSA9IFtdO1xuICBcbiAgLy8gQ2hlY2sgdmlzaWJpbGl0eSB0byBlYWNoIHRhcmdldCBsb2NhdGlvblxuICBmb3IgKGNvbnN0IHRhcmdldExvY2F0aW9uIG9mIHRhcmdldExvY2F0aW9ucykge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRhcmdldExvY2F0aW9uIHx8IHR5cGVvZiB0YXJnZXRMb2NhdGlvbi5sbmcgIT09ICdudW1iZXInIHx8IFxuICAgICAgICAgIHR5cGVvZiB0YXJnZXRMb2NhdGlvbi5sYXQgIT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIGludmFsaWQgbG9jYXRpb25zXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdldCB0YXJnZXQgZWxldmF0aW9uIGlmIG5vdCBhdmFpbGFibGVcbiAgICAgIGNvbnN0IHRhcmdldEVsZXZhdGlvbiA9IHRhcmdldExvY2F0aW9uLmVsZXZhdGlvbiA/P1xuICAgICAgICBhd2FpdCBxdWVyeUVsZXZhdGlvbihtYXAsIFt0YXJnZXRMb2NhdGlvbi5sbmcsIHRhcmdldExvY2F0aW9uLmxhdF0sIG9wdGlvbnMuZWxldmF0aW9uU2VydmljZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHRhcmdldFBvaW50OiBDb29yZGluYXRlczNEID0gW1xuICAgICAgICB0YXJnZXRMb2NhdGlvbi5sbmcsXG4gICAgICAgIHRhcmdldExvY2F0aW9uLmxhdCxcbiAgICAgICAgdGFyZ2V0RWxldmF0aW9uXG4gICAgICBdO1xuICAgICAgXG4gICAgICBjb25zdCBpc1Zpc2libGUgPSBhd2FpdCBjaGVja0xpbmVPZlNpZ2h0KFxuICAgICAgICBtYXAsXG4gICAgICAgIHN0YXRpb25Qb2ludCxcbiAgICAgICAgdGFyZ2V0UG9pbnQsXG4gICAgICAgIHsgZWxldmF0aW9uU2VydmljZTogb3B0aW9ucy5lbGV2YXRpb25TZXJ2aWNlIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmIChpc1Zpc2libGUpIHtcbiAgICAgICAgdmlzaWJsZUxvY2F0aW9ucy5wdXNoKHRhcmdldExvY2F0aW9uKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGNoZWNraW5nIExPUyB0byBsb2NhdGlvbjonLCB0YXJnZXRMb2NhdGlvbiwgZSk7XG4gICAgfVxuICB9XG4gIFxuICBjb25zdCB2aXNpYmlsaXR5UGVyY2VudGFnZSA9IHRhcmdldExvY2F0aW9ucy5sZW5ndGggPiAwID9cbiAgICAodmlzaWJsZUxvY2F0aW9ucy5sZW5ndGggLyB0YXJnZXRMb2NhdGlvbnMubGVuZ3RoKSAqIDEwMCA6IDA7XG4gIFxuICByZXR1cm4geyB2aXNpYmxlTG9jYXRpb25zLCB2aXNpYmlsaXR5UGVyY2VudGFnZSB9O1xufVxuXG4vKipcbiAqIENoZWNrcyBsaW5lIG9mIHNpZ2h0IGJldHdlZW4gdHdvIHN0YXRpb25zXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1N0YXRpb25Ub1N0YXRpb25MT1MoXG4gIG1hcDogbWFwYm94Z2wuTWFwLFxuICBzb3VyY2VTdGF0aW9uOiB7XG4gICAgbG9jYXRpb246IExvY2F0aW9uRGF0YTtcbiAgICBlbGV2YXRpb25PZmZzZXQ6IG51bWJlcjtcbiAgfSxcbiAgdGFyZ2V0U3RhdGlvbjoge1xuICAgIGxvY2F0aW9uOiBMb2NhdGlvbkRhdGE7XG4gICAgZWxldmF0aW9uT2Zmc2V0OiBudW1iZXI7XG4gIH0sXG4gIG9wdGlvbnM6IHtcbiAgICBlbGV2YXRpb25TZXJ2aWNlPzogYW55O1xuICB9ID0ge31cbik6IFByb21pc2U8eyBcbiAgcmVzdWx0OiBTdGF0aW9uTE9TUmVzdWx0OyBcbiAgcHJvZmlsZTogTE9TUHJvZmlsZVBvaW50W107XG59PiB7XG4gIGlmICghc291cmNlU3RhdGlvbi5sb2NhdGlvbiB8fCAhdGFyZ2V0U3RhdGlvbi5sb2NhdGlvbiB8fCBcbiAgICAgIHR5cGVvZiBzb3VyY2VTdGF0aW9uLmxvY2F0aW9uLmxuZyAhPT0gJ251bWJlcicgfHwgXG4gICAgICB0eXBlb2Ygc291cmNlU3RhdGlvbi5sb2NhdGlvbi5sYXQgIT09ICdudW1iZXInIHx8XG4gICAgICB0eXBlb2YgdGFyZ2V0U3RhdGlvbi5sb2NhdGlvbi5sbmcgIT09ICdudW1iZXInIHx8IFxuICAgICAgdHlwZW9mIHRhcmdldFN0YXRpb24ubG9jYXRpb24ubGF0ICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IGNyZWF0ZUVycm9yKCdCb3RoIHN0YXRpb24gbG9jYXRpb25zIG11c3QgYmUgc2V0IGFuZCB2YWxpZCcsICdJTlZBTElEX0lOUFVUJyk7XG4gIH1cbiAgXG4gIC8vIEdldCBzb3VyY2Ugc3RhdGlvbiBlbGV2YXRpb24gaWYgbm90IGF2YWlsYWJsZVxuICBjb25zdCBzb3VyY2VFbGV2YXRpb24gPSBzb3VyY2VTdGF0aW9uLmxvY2F0aW9uLmVsZXZhdGlvbiA/PyBcbiAgICBhd2FpdCBxdWVyeUVsZXZhdGlvbihcbiAgICAgIG1hcCwgXG4gICAgICBbc291cmNlU3RhdGlvbi5sb2NhdGlvbi5sbmcsIHNvdXJjZVN0YXRpb24ubG9jYXRpb24ubGF0XSxcbiAgICAgIG9wdGlvbnMuZWxldmF0aW9uU2VydmljZVxuICAgICk7XG4gIFxuICAvLyBHZXQgdGFyZ2V0IHN0YXRpb24gZWxldmF0aW9uIGlmIG5vdCBhdmFpbGFibGVcbiAgY29uc3QgdGFyZ2V0RWxldmF0aW9uID0gdGFyZ2V0U3RhdGlvbi5sb2NhdGlvbi5lbGV2YXRpb24gPz8gXG4gICAgYXdhaXQgcXVlcnlFbGV2YXRpb24oXG4gICAgICBtYXAsIFxuICAgICAgW3RhcmdldFN0YXRpb24ubG9jYXRpb24ubG5nLCB0YXJnZXRTdGF0aW9uLmxvY2F0aW9uLmxhdF0sXG4gICAgICBvcHRpb25zLmVsZXZhdGlvblNlcnZpY2VcbiAgICApO1xuICBcbiAgY29uc3Qgc291cmNlUG9pbnQ6IENvb3JkaW5hdGVzM0QgPSBbXG4gICAgc291cmNlU3RhdGlvbi5sb2NhdGlvbi5sbmcsXG4gICAgc291cmNlU3RhdGlvbi5sb2NhdGlvbi5sYXQsXG4gICAgc291cmNlRWxldmF0aW9uICsgc291cmNlU3RhdGlvbi5lbGV2YXRpb25PZmZzZXRcbiAgXTtcbiAgXG4gIGNvbnN0IHRhcmdldFBvaW50OiBDb29yZGluYXRlczNEID0gW1xuICAgIHRhcmdldFN0YXRpb24ubG9jYXRpb24ubG5nLFxuICAgIHRhcmdldFN0YXRpb24ubG9jYXRpb24ubGF0LFxuICAgIHRhcmdldEVsZXZhdGlvbiArIHRhcmdldFN0YXRpb24uZWxldmF0aW9uT2Zmc2V0XG4gIF07XG4gIFxuICBjb25zdCB7IHByb2ZpbGUsIGNsZWFyIH0gPSBhd2FpdCBnZXRMT1NQcm9maWxlKFxuICAgIG1hcCxcbiAgICBzb3VyY2VQb2ludCxcbiAgICB0YXJnZXRQb2ludCxcbiAgICB7IFxuICAgICAgc2FtcGxlRGlzdGFuY2U6IDEwLFxuICAgICAgbWluaW11bU9mZnNldDogMyxcbiAgICAgIGVsZXZhdGlvblNlcnZpY2U6IG9wdGlvbnMuZWxldmF0aW9uU2VydmljZVxuICAgIH1cbiAgKTtcbiAgXG4gIGxldCBvYnN0cnVjdGlvbkZyYWN0aW9uID0gbnVsbDtcbiAgbGV0IG9ic3RydWN0aW9uRGlzdGFuY2UgPSBudWxsO1xuICBcbiAgaWYgKCFjbGVhcikge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvZmlsZS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHByb2ZpbGVbaV0udGVycmFpbiA+IHByb2ZpbGVbaV0ubG9zKSB7XG4gICAgICAgIG9ic3RydWN0aW9uRnJhY3Rpb24gPSBpIC8gKHByb2ZpbGUubGVuZ3RoIC0gMSk7XG4gICAgICAgIG9ic3RydWN0aW9uRGlzdGFuY2UgPSBwcm9maWxlW2ldLmRpc3RhbmNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIGNvbnN0IHJlc3VsdDogU3RhdGlvbkxPU1Jlc3VsdCA9IHtcbiAgICBjbGVhcixcbiAgICBvYnN0cnVjdGlvbkZyYWN0aW9uOiBvYnN0cnVjdGlvbkZyYWN0aW9uID8/IHVuZGVmaW5lZCxcbiAgICBvYnN0cnVjdGlvbkRpc3RhbmNlOiBvYnN0cnVjdGlvbkRpc3RhbmNlID8/IHVuZGVmaW5lZCxcbiAgfTtcbiAgXG4gIHJldHVybiB7IHJlc3VsdCwgcHJvZmlsZSB9O1xufVxuXG4vKipcbiAqIEFuYWx5emVzIGEgdGVycmFpbiBncmlkIGVmZmljaWVudGx5IGZvciBlbGV2YXRpb24gc3RhdGlzdGljc1xuICogVXNlcyBhIGJhdGNoZWQgYXBwcm9hY2ggdG8gcHJldmVudCBjYWxsIHN0YWNrIG92ZXJmbG93IHdpdGggbGFyZ2UgYXJlYXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFuYWx5emVUZXJyYWluR3JpZChcbiAgZ3JpZENlbGxzOiBHcmlkQ2VsbFtdLFxuICBvcHRpb25zOiB7XG4gICAgYmF0Y2hTaXplPzogbnVtYmVyO1xuICAgIHJlZmVyZW5jZUFsdGl0dWRlPzogbnVtYmVyO1xuICAgIG9uUHJvZ3Jlc3M/OiAocHJvZ3Jlc3M6IG51bWJlcikgPT4gYm9vbGVhbjtcbiAgfSA9IHt9XG4pOiBQcm9taXNlPHtcbiAgaGlnaGVzdEVsZXZhdGlvbjogbnVtYmVyO1xuICBsb3dlc3RFbGV2YXRpb246IG51bWJlcjtcbiAgYXZlcmFnZUVsZXZhdGlvbjogbnVtYmVyO1xuICBlbGV2YXRpb25EaXN0cmlidXRpb246IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIGVsZXZhdGlvbnM6IG51bWJlcltdO1xufT4ge1xuICBjb25zdCB7IFxuICAgIGJhdGNoU2l6ZSA9IDEwMDAsXG4gICAgb25Qcm9ncmVzc1xuICB9ID0gb3B0aW9ucztcbiAgXG4gIGlmICghZ3JpZENlbGxzIHx8IGdyaWRDZWxscy5sZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBjcmVhdGVFcnJvcignTm8gZ3JpZCBjZWxscyBwcm92aWRlZCBmb3IgYW5hbHlzaXMnLCAnSU5WQUxJRF9JTlBVVCcpO1xuICB9XG4gIFxuICBjb25zb2xlLmxvZyhgQW5hbHl6aW5nIHRlcnJhaW4gZ3JpZCB3aXRoICR7Z3JpZENlbGxzLmxlbmd0aH0gY2VsbHNgKTtcbiAgXG4gIC8vIEZvciB2ZXJ5IGxhcmdlIGRhdGFzZXRzLCB1c2UgYSByZWR1Y2VkIHNldCBvZiBlbGV2YXRpb24gcG9pbnRzIGZvciBzdGF0aXN0aWNzXG4gIC8vIHRvIHByZXZlbnQgbWVtb3J5IGlzc3VlcywgYnV0IHN0aWxsIGFuYWx5emUgYWxsIHBvaW50cyBmb3IgaGlnaGVzdC9sb3dlc3RcbiAgY29uc3QgdG90YWxDZWxscyA9IGdyaWRDZWxscy5sZW5ndGg7XG4gIGNvbnN0IHVzZVJlZHVjZWRTZXQgPSB0b3RhbENlbGxzID4gMTAwMDA7XG4gIGNvbnN0IHNhbXBsZUludGVydmFsID0gdXNlUmVkdWNlZFNldCA/IE1hdGguY2VpbCh0b3RhbENlbGxzIC8gMTAwMDApIDogMTtcbiAgXG4gIGxldCBoaWdoZXN0RWxldmF0aW9uID0gLUluZmluaXR5O1xuICBsZXQgbG93ZXN0RWxldmF0aW9uID0gSW5maW5pdHk7XG4gIGxldCBlbGV2YXRpb25TdW0gPSAwO1xuICBjb25zdCBlbGV2YXRpb25Db3VudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgY29uc3Qgc2FtcGxlRWxldmF0aW9uczogbnVtYmVyW10gPSBbXTtcbiAgXG4gIC8vIFByb2Nlc3MgaW4gYmF0Y2hlcyB0byBwcmV2ZW50IHN0YWNrIG92ZXJmbG93XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxDZWxsczsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAvLyBDaGVjayBmb3IgYWJvcnQgaWYgY2FsbGJhY2sgcHJvdmlkZWRcbiAgICBpZiAob25Qcm9ncmVzcykge1xuICAgICAgY29uc3QgcHJvZ3Jlc3NWYWx1ZSA9IE1hdGgucm91bmQoKGkgLyB0b3RhbENlbGxzKSAqIDEwMCk7XG4gICAgICBjb25zdCBzaG91bGRBYm9ydCA9IG9uUHJvZ3Jlc3MocHJvZ3Jlc3NWYWx1ZSk7XG4gICAgICBpZiAoc2hvdWxkQWJvcnQpIHtcbiAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0FuYWx5c2lzIGFib3J0ZWQgYnkgdXNlcicsICdVU0VSX0FCT1JUJyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFByb2Nlc3MgY3VycmVudCBiYXRjaFxuICAgIGNvbnN0IGVuZEluZGV4ID0gTWF0aC5taW4oaSArIGJhdGNoU2l6ZSwgdG90YWxDZWxscyk7XG4gICAgY29uc3QgYmF0Y2hDZWxscyA9IGdyaWRDZWxscy5zbGljZShpLCBlbmRJbmRleCk7XG4gICAgXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBiYXRjaENlbGxzLmxlbmd0aDsgaisrKSB7XG4gICAgICBjb25zdCBlbGV2YXRpb24gPSBiYXRjaENlbGxzW2pdLnByb3BlcnRpZXMuZWxldmF0aW9uO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgaGlnaGVzdCBhbmQgbG93ZXN0XG4gICAgICBoaWdoZXN0RWxldmF0aW9uID0gTWF0aC5tYXgoaGlnaGVzdEVsZXZhdGlvbiwgZWxldmF0aW9uKTtcbiAgICAgIGxvd2VzdEVsZXZhdGlvbiA9IE1hdGgubWluKGxvd2VzdEVsZXZhdGlvbiwgZWxldmF0aW9uKTtcbiAgICAgIFxuICAgICAgLy8gT25seSBpbmNsdWRlIGluIGF2ZXJhZ2UgYW5kIGRpc3RyaWJ1dGlvbiBpZiBwYXJ0IG9mIHJlZHVjZWQgc2V0IG9yIHVzaW5nIGZ1bGwgc2V0XG4gICAgICBpZiAoIXVzZVJlZHVjZWRTZXQgfHwgKGkgKyBqKSAlIHNhbXBsZUludGVydmFsID09PSAwKSB7XG4gICAgICAgIGVsZXZhdGlvblN1bSArPSBlbGV2YXRpb247XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgdG8gc2FtcGxlIGFycmF5XG4gICAgICAgIHNhbXBsZUVsZXZhdGlvbnMucHVzaChlbGV2YXRpb24pO1xuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGRpc3RyaWJ1dGlvbiBjb3VudFxuICAgICAgICAvLyBSb3VuZCB0byBuZWFyZXN0IDEwbSBmb3IgcmVhc29uYWJsZSBoaXN0b2dyYW1cbiAgICAgICAgY29uc3QgZWxldmF0aW9uQnVja2V0ID0gTWF0aC5yb3VuZChlbGV2YXRpb24gLyAxMCkgKiAxMDtcbiAgICAgICAgY29uc3QgYnVja2V0S2V5ID0gZWxldmF0aW9uQnVja2V0LnRvU3RyaW5nKCk7XG4gICAgICAgIGVsZXZhdGlvbkNvdW50c1tidWNrZXRLZXldID0gKGVsZXZhdGlvbkNvdW50c1tidWNrZXRLZXldIHx8IDApICsgMTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gWWllbGQgdG8gZXZlbnQgbG9vcCB0byBwcmV2ZW50IHN0YWNrIG92ZXJmbG93IGFuZCBVSSBmcmVlemluZ1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XG4gIH1cbiAgXG4gIC8vIENhbGN1bGF0ZSBhdmVyYWdlcyBiYXNlZCBvbiB0aGUgc2FtcGxlIHNldFxuICBjb25zdCBhdmVyYWdlRWxldmF0aW9uID0gc2FtcGxlRWxldmF0aW9ucy5sZW5ndGggPiAwID8gXG4gICAgZWxldmF0aW9uU3VtIC8gc2FtcGxlRWxldmF0aW9ucy5sZW5ndGggOiAwO1xuICBcbiAgLy8gUmVwb3J0IGNvbXBsZXRpb25cbiAgaWYgKG9uUHJvZ3Jlc3MpIHtcbiAgICBvblByb2dyZXNzKDEwMCk7XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgaGlnaGVzdEVsZXZhdGlvbixcbiAgICBsb3dlc3RFbGV2YXRpb24sXG4gICAgYXZlcmFnZUVsZXZhdGlvbixcbiAgICBlbGV2YXRpb25EaXN0cmlidXRpb246IGVsZXZhdGlvbkNvdW50cyxcbiAgICBlbGV2YXRpb25zOiBzYW1wbGVFbGV2YXRpb25zXG4gIH07XG59Il0sIm5hbWVzIjpbInR1cmYiLCJzYW1wbGVGbGlnaHRQYXRoIiwiRWxldmF0aW9uQ2FjaGUiLCJjb25zdHJ1Y3RvciIsIm1heFNpemUiLCJjYWNoZSIsIk1hcCIsImdldEtleSIsImxvbiIsImxhdCIsInRvRml4ZWQiLCJnZXQiLCJzZXQiLCJlbGV2YXRpb24iLCJrZXkiLCJzaXplIiwiZmlyc3RLZXkiLCJrZXlzIiwibmV4dCIsInZhbHVlIiwiZGVsZXRlIiwiY2xlYXIiLCJlbGV2YXRpb25DYWNoZSIsImNyZWF0ZUVycm9yIiwibWVzc2FnZSIsImNvZGUiLCJkZXRhaWxzIiwiZXJyb3IiLCJFcnJvciIsInF1ZXJ5RWxldmF0aW9uIiwibWFwIiwiY29vcmRpbmF0ZXMiLCJlbGV2YXRpb25TZXJ2aWNlIiwiY2FjaGVkRWxldmF0aW9uIiwidW5kZWZpbmVkIiwiZ2V0RWxldmF0aW9uIiwiZSIsInF1ZXJ5VGVycmFpbkVsZXZhdGlvbiIsImNvbnNvbGUiLCJ3YXJuIiwiYmF0Y2hRdWVyeUVsZXZhdGlvbnMiLCJiYXRjaEdldEVsZXZhdGlvbnMiLCJCQVRDSF9TSVpFIiwicmVzdWx0cyIsImkiLCJsZW5ndGgiLCJiYXRjaCIsInNsaWNlIiwiYmF0Y2hSZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsImNvb3JkcyIsInB1c2giLCJpc1ZhbGlkQm91bmRzIiwiYm91bmRzIiwiZ2VuZXJhdGVHcmlkIiwib3B0aW9ucyIsImNlbnRlciIsInJhbmdlIiwiZmxpZ2h0UGF0aCIsImVsb3NHcmlkUmFuZ2UiLCJncmlkU2l6ZSIsInN0YXJ0VGltZSIsInBlcmZvcm1hbmNlIiwibm93IiwiZ3JpZCIsImlzTmFOIiwicG9pbnQiLCJidWZmZXIiLCJ1bml0cyIsImJib3giLCJwb2ludEdyaWQiLCJtYXNrIiwibG9nIiwiZmVhdHVyZXMiLCJtYXJnaW4iLCJsZW5ndGhUb0RlZ3JlZXMiLCJleHRlbmRlZEJvdW5kcyIsIm1hc2tPcHRpb25zIiwiZ3JpZENvb3JkaW5hdGVzIiwiZmVhdHVyZSIsImdlb21ldHJ5IiwidGltZSIsImVsZXZhdGlvbnMiLCJ0aW1lRW5kIiwiY2VsbHMiLCJpbmRleCIsImNlbGwiLCJjaXJjbGUiLCJzdGVwcyIsImlkIiwicHJvcGVydGllcyIsInZpc2liaWxpdHkiLCJmdWxseVZpc2libGUiLCJsYXN0QW5hbHl6ZWQiLCJEYXRlIiwicHJvY2Vzc0ZsaWdodFBhdGgiLCJzYW1wbGluZ1Jlc29sdXRpb24iLCJvblByb2dyZXNzIiwibGluZVN0cmluZyIsInNhbXBsZWRQb2ludHMiLCJyZXNvbHV0aW9uIiwicHJvZ3Jlc3NDYWxsYmFjayIsInByb2dyZXNzIiwic2FtcGxlZENvb3JkaW5hdGVzIiwicG9zaXRpb24iLCJjaGVja0xpbmVPZlNpZ2h0Iiwic291cmNlUG9pbnQiLCJ0YXJnZXRQb2ludCIsInNvdXJjZUxuZyIsInNvdXJjZUxhdCIsInNvdXJjZUFsdCIsInRhcmdldExuZyIsInRhcmdldExhdCIsInRhcmdldEFsdCIsInNvbWUiLCJ2IiwibWluaW11bU9mZnNldCIsImRpc3RhbmNlIiwic2FtcGxlQ291bnQiLCJNYXRoIiwibWluIiwibWF4IiwiY2VpbCIsImFkanVzdGVkVGFyZ2V0QWx0IiwibG9jYWxDYWNoZSIsImxuZyIsImhhcyIsImVsZXYiLCJmcmFjdGlvbiIsImxvc0hlaWdodCIsInRlcnJhaW5IZWlnaHQiLCJjaGVja1N0YXRpb25MT1MiLCJnZXRMT1NQcm9maWxlIiwicG9pbnQxIiwicG9pbnQyIiwidG90YWxEaXN0YW5jZSIsInNhbXBsZURpc3RhbmNlIiwicHJvZmlsZSIsImlzT2JzdHJ1Y3RlZCIsInNhbXBsZUNvb3JkcyIsInRlcnJhaW5FbGV2YXRpb25zIiwibG9zQWx0aXR1ZGUiLCJ0ZXJyYWluIiwibG9zIiwicG9pbnRDb3VudCIsInNhbXBsZVBvaW50cyIsImNoZWNrRmxpZ2h0UGF0aExPUyIsImZsaWdodENvb3JkaW5hdGVzIiwiYWx0aXR1ZGVNb2RlIiwiZ3JpZFJhbmdlIiwiY29vcmRpbmF0ZXNUb0NoZWNrIiwiQXJyYXkiLCJpc0FycmF5IiwiZXZlcnkiLCJyZWxldmFudENvb3JkaW5hdGVzIiwiZnBQb2ludCIsInZpc2libGVDb3VudCIsInRlcnJhaW5FbGV2YXRpb24iLCJhZGp1c3RlZFRhcmdldFBvaW50IiwiaXNWaXNpYmxlIiwidmlzaWJpbGl0eVBlcmNlbnRhZ2UiLCJnZW5lcmF0ZUNvbWJpbmVkQm91bmRpbmdCb3giLCJzdGF0aW9ucyIsImJib3hlcyIsInN0YXRpb24iLCJsb2NhdGlvbiIsImNvbWJpbmVkQmJveCIsImZvckVhY2giLCJjaGVja1N0YXRpb25Ub0xvY2F0aW9uTE9TIiwic3RhdGlvbkxvY2F0aW9uIiwic3RhdGlvbkVsZXZhdGlvbk9mZnNldCIsInRhcmdldExvY2F0aW9ucyIsInZpc2libGVMb2NhdGlvbnMiLCJzdGF0aW9uRWxldmF0aW9uIiwic3RhdGlvblBvaW50IiwidGFyZ2V0TG9jYXRpb24iLCJ0YXJnZXRFbGV2YXRpb24iLCJjaGVja1N0YXRpb25Ub1N0YXRpb25MT1MiLCJzb3VyY2VTdGF0aW9uIiwidGFyZ2V0U3RhdGlvbiIsInNvdXJjZUVsZXZhdGlvbiIsImVsZXZhdGlvbk9mZnNldCIsIm9ic3RydWN0aW9uRnJhY3Rpb24iLCJvYnN0cnVjdGlvbkRpc3RhbmNlIiwicmVzdWx0IiwiYW5hbHl6ZVRlcnJhaW5HcmlkIiwiZ3JpZENlbGxzIiwiYmF0Y2hTaXplIiwidG90YWxDZWxscyIsInVzZVJlZHVjZWRTZXQiLCJzYW1wbGVJbnRlcnZhbCIsImhpZ2hlc3RFbGV2YXRpb24iLCJJbmZpbml0eSIsImxvd2VzdEVsZXZhdGlvbiIsImVsZXZhdGlvblN1bSIsImVsZXZhdGlvbkNvdW50cyIsInNhbXBsZUVsZXZhdGlvbnMiLCJwcm9ncmVzc1ZhbHVlIiwicm91bmQiLCJzaG91bGRBYm9ydCIsImVuZEluZGV4IiwiYmF0Y2hDZWxscyIsImoiLCJlbGV2YXRpb25CdWNrZXQiLCJidWNrZXRLZXkiLCJ0b1N0cmluZyIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiYXZlcmFnZUVsZXZhdGlvbiIsImVsZXZhdGlvbkRpc3RyaWJ1dGlvbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Analyses/Utils/GridAnalysisCore.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/AnalysisStatus.tsx":
/*!***************************************************!*\
  !*** ./src/app/components/Map/AnalysisStatus.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_Loader_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Loader!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/loader.js\");\n/* harmony import */ var _context_LOSAnalysisContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../context/LOSAnalysisContext */ \"(ssr)/./src/app/context/LOSAnalysisContext.tsx\");\n/* harmony import */ var _context_ObstacleAnalysisContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../context/ObstacleAnalysisContext */ \"(ssr)/./src/app/context/ObstacleAnalysisContext.tsx\");\n// components/Map/AnalysisStatus.tsx\n\n\n\n\n\nconst AnalysisStatus = ({ onStopLOS, onStopObstacle })=>{\n    // Get status from both analysis contexts\n    const { isAnalyzing: isLOSAnalyzing, error: losError, setError: setLOSError, progress: losProgress } = (0,_context_LOSAnalysisContext__WEBPACK_IMPORTED_MODULE_2__.useLOSAnalysis)();\n    const { status: obstacleStatus, progress: obstacleProgress, error: obstacleError, cancelAnalysis } = (0,_context_ObstacleAnalysisContext__WEBPACK_IMPORTED_MODULE_3__.useObstacleAnalysis)();\n    const isObstacleAnalyzing = obstacleStatus === 'loading';\n    // Debug log to verify obstacle analysis progress updates\n    react__WEBPACK_IMPORTED_MODULE_1___default().useEffect({\n        \"AnalysisStatus.useEffect\": ()=>{\n            if (isObstacleAnalyzing && obstacleProgress > 0) {\n                console.log(\"AnalysisStatus received obstacle progress:\", obstacleProgress);\n            }\n        }\n    }[\"AnalysisStatus.useEffect\"], [\n        isObstacleAnalyzing,\n        obstacleProgress\n    ]);\n    // If nothing is active, don't show anything\n    if (!isLOSAnalyzing && !isObstacleAnalyzing && !losError && !obstacleError) return null;\n    // Determine which analysis is active\n    let activeAnalysis = null;\n    if (isObstacleAnalyzing) {\n        activeAnalysis = {\n            type: 'Terrain Analysis',\n            progress: obstacleProgress,\n            message: 'Analyzing flight path...',\n            note: 'This may take a moment for complex routes.',\n            onStop: ()=>{\n                if (onStopObstacle) onStopObstacle();\n                cancelAnalysis();\n            }\n        };\n    } else if (isLOSAnalyzing) {\n        activeAnalysis = {\n            type: 'Analysing Visibility',\n            progress: losProgress,\n            message: 'This may take a few moments...',\n            note: 'Larger areas required longer analysis times.',\n            onStop: onStopLOS || (()=>{})\n        };\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"analysis-status-container\",\n        children: [\n            activeAnalysis && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed top-4 left-1/2 transform -translate-x-1/2 bg-white shadow-xl rounded-lg border border-gray-300 p-4 z-[1000] w-80\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center justify-between mb-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                        className: \"w-5 h-5 animate-spin text-blue-500\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                                        lineNumber: 73,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                className: \"font-medium text-gray-900 text-sm\",\n                                                children: activeAnalysis.type\n                                            }, void 0, false, {\n                                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                                                lineNumber: 75,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-xs text-gray-600\",\n                                                children: activeAnalysis.message\n                                            }, void 0, false, {\n                                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                                                lineNumber: 76,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                                        lineNumber: 74,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                                lineNumber: 72,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: activeAnalysis.onStop,\n                                className: \"text-xs px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition-colors\",\n                                children: \"Cancel\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                                lineNumber: 79,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                        lineNumber: 71,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mb-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex justify-between mb-1\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-xs text-gray-600\",\n                                        children: \"Progress\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                                        lineNumber: 89,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-xs font-medium\",\n                                        children: [\n                                            Math.round(activeAnalysis.progress),\n                                            \"%\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                                        lineNumber: 90,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                                lineNumber: 88,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-full bg-gray-200 rounded-full h-2.5\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"bg-blue-600 h-2.5 rounded-full\",\n                                    style: {\n                                        width: `${Math.round(activeAnalysis.progress)}%`\n                                    }\n                                }, void 0, false, {\n                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                                    lineNumber: 93,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                                lineNumber: 92,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                        lineNumber: 87,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-xs text-gray-500 mt-2\",\n                        children: activeAnalysis.note\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                        lineNumber: 100,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                lineNumber: 70,\n                columnNumber: 9\n            }, undefined),\n            losError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed bottom-4 left-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center z-[1000]\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                        lineNumber: 106,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"ml-2\",\n                        children: losError\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                        lineNumber: 107,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setLOSError(null),\n                        className: \"ml-2 hover:opacity-75\",\n                        children: \"\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                        lineNumber: 108,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                lineNumber: 105,\n                columnNumber: 9\n            }, undefined),\n            obstacleError && !losError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed bottom-4 left-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center z-[1000]\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                        lineNumber: 116,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"ml-2\",\n                        children: obstacleError\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                        lineNumber: 117,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>cancelAnalysis(),\n                        className: \"ml-2 hover:opacity-75\",\n                        children: \"\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                        lineNumber: 118,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n                lineNumber: 115,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/AnalysisStatus.tsx\",\n        lineNumber: 68,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AnalysisStatus);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL0FuYWx5c2lzU3RhdHVzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLG9DQUFvQzs7QUFDVjtBQUNZO0FBQzRCO0FBQ1U7QUFPNUUsTUFBTUksaUJBQWdELENBQUMsRUFDckRDLFNBQVMsRUFDVEMsY0FBYyxFQUNmO0lBQ0MseUNBQXlDO0lBQ3pDLE1BQU0sRUFBRUMsYUFBYUMsY0FBYyxFQUFFQyxPQUFPQyxRQUFRLEVBQUVDLFVBQVVDLFdBQVcsRUFBRUMsVUFBVUMsV0FBVyxFQUFFLEdBQUdaLDJFQUFjQTtJQUNySCxNQUFNLEVBQ0phLFFBQVFDLGNBQWMsRUFDdEJILFVBQVVJLGdCQUFnQixFQUMxQlIsT0FBT1MsYUFBYSxFQUNwQkMsY0FBYyxFQUNmLEdBQUdoQixxRkFBbUJBO0lBRXZCLE1BQU1pQixzQkFBc0JKLG1CQUFtQjtJQUUvQyx5REFBeUQ7SUFDekRoQixzREFBZTtvQ0FBQztZQUNkLElBQUlvQix1QkFBdUJILG1CQUFtQixHQUFHO2dCQUMvQ0ssUUFBUUMsR0FBRyxDQUFDLDhDQUE4Q047WUFDNUQ7UUFDRjttQ0FBRztRQUFDRztRQUFxQkg7S0FBaUI7SUFFMUMsNENBQTRDO0lBQzVDLElBQUksQ0FBQ1Qsa0JBQWtCLENBQUNZLHVCQUF1QixDQUFDVixZQUFZLENBQUNRLGVBQWUsT0FBTztJQUVuRixxQ0FBcUM7SUFDckMsSUFBSU0saUJBTU87SUFFWCxJQUFJSixxQkFBcUI7UUFDdkJJLGlCQUFpQjtZQUNmQyxNQUFNO1lBQ05aLFVBQVVJO1lBQ1ZTLFNBQVM7WUFDVEMsTUFBTTtZQUNOQyxRQUFRO2dCQUNOLElBQUl0QixnQkFBZ0JBO2dCQUNwQmE7WUFDRjtRQUNGO0lBQ0YsT0FBTyxJQUFJWCxnQkFBZ0I7UUFDekJnQixpQkFBaUI7WUFDZkMsTUFBTTtZQUNOWixVQUFVQztZQUNWWSxTQUFTO1lBQ1RDLE1BQU07WUFDTkMsUUFBUXZCLGFBQWMsTUFBTztRQUMvQjtJQUNGO0lBRUEscUJBQ0UsOERBQUN3QjtRQUFJQyxXQUFVOztZQUNaTixnQ0FDQyw4REFBQ0s7Z0JBQUlDLFdBQVU7O2tDQUNiLDhEQUFDRDt3QkFBSUMsV0FBVTs7MENBQ2IsOERBQUNEO2dDQUFJQyxXQUFVOztrREFDYiw4REFBQzdCLGtGQUFNQTt3Q0FBQzZCLFdBQVU7Ozs7OztrREFDbEIsOERBQUNEOzswREFDQyw4REFBQ0U7Z0RBQUdELFdBQVU7MERBQXFDTixlQUFlQyxJQUFJOzs7Ozs7MERBQ3RFLDhEQUFDTztnREFBRUYsV0FBVTswREFBeUJOLGVBQWVFLE9BQU87Ozs7Ozs7Ozs7Ozs7Ozs7OzswQ0FHaEUsOERBQUNPO2dDQUNDQyxTQUFTVixlQUFlSSxNQUFNO2dDQUM5QkUsV0FBVTswQ0FDWDs7Ozs7Ozs7Ozs7O2tDQUtILDhEQUFDRDt3QkFBSUMsV0FBVTs7MENBQ2IsOERBQUNEO2dDQUFJQyxXQUFVOztrREFDYiw4REFBQ0s7d0NBQUtMLFdBQVU7a0RBQXdCOzs7Ozs7a0RBQ3hDLDhEQUFDSzt3Q0FBS0wsV0FBVTs7NENBQXVCTSxLQUFLQyxLQUFLLENBQUNiLGVBQWVYLFFBQVE7NENBQUU7Ozs7Ozs7Ozs7Ozs7MENBRTdFLDhEQUFDZ0I7Z0NBQUlDLFdBQVU7MENBQ2IsNEVBQUNEO29DQUNDQyxXQUFVO29DQUNWUSxPQUFPO3dDQUFFQyxPQUFPLEdBQUdILEtBQUtDLEtBQUssQ0FBQ2IsZUFBZVgsUUFBUSxFQUFFLENBQUMsQ0FBQztvQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7a0NBS2hFLDhEQUFDbUI7d0JBQUVGLFdBQVU7a0NBQThCTixlQUFlRyxJQUFJOzs7Ozs7Ozs7Ozs7WUFJakVqQiwwQkFDQyw4REFBQ21CO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0s7a0NBQUs7Ozs7OztrQ0FDTiw4REFBQ0E7d0JBQUtMLFdBQVU7a0NBQVFwQjs7Ozs7O2tDQUN4Qiw4REFBQ3VCO3dCQUFPQyxTQUFTLElBQU10QixZQUFZO3dCQUFPa0IsV0FBVTtrQ0FBd0I7Ozs7Ozs7Ozs7OztZQU0vRVosaUJBQWlCLENBQUNSLDBCQUNqQiw4REFBQ21CO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0s7a0NBQUs7Ozs7OztrQ0FDTiw4REFBQ0E7d0JBQUtMLFdBQVU7a0NBQVFaOzs7Ozs7a0NBQ3hCLDhEQUFDZTt3QkFBT0MsU0FBUyxJQUFNZjt3QkFBa0JXLFdBQVU7a0NBQXdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPckY7QUFFQSxpRUFBZTFCLGNBQWNBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL0FuYWx5c2lzU3RhdHVzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb21wb25lbnRzL01hcC9BbmFseXNpc1N0YXR1cy50c3hcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMb2FkZXIgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgdXNlTE9TQW5hbHlzaXMgfSBmcm9tICcuLi8uLi9jb250ZXh0L0xPU0FuYWx5c2lzQ29udGV4dCc7XG5pbXBvcnQgeyB1c2VPYnN0YWNsZUFuYWx5c2lzIH0gZnJvbSAnLi4vLi4vY29udGV4dC9PYnN0YWNsZUFuYWx5c2lzQ29udGV4dCc7XG5cbmludGVyZmFjZSBBbmFseXNpc1N0YXR1c1Byb3BzIHtcbiAgb25TdG9wTE9TPzogKCkgPT4gdm9pZDtcbiAgb25TdG9wT2JzdGFjbGU/OiAoKSA9PiB2b2lkO1xufVxuXG5jb25zdCBBbmFseXNpc1N0YXR1czogUmVhY3QuRkM8QW5hbHlzaXNTdGF0dXNQcm9wcz4gPSAoeyBcbiAgb25TdG9wTE9TLCBcbiAgb25TdG9wT2JzdGFjbGUgXG59KSA9PiB7XG4gIC8vIEdldCBzdGF0dXMgZnJvbSBib3RoIGFuYWx5c2lzIGNvbnRleHRzXG4gIGNvbnN0IHsgaXNBbmFseXppbmc6IGlzTE9TQW5hbHl6aW5nLCBlcnJvcjogbG9zRXJyb3IsIHNldEVycm9yOiBzZXRMT1NFcnJvciwgcHJvZ3Jlc3M6IGxvc1Byb2dyZXNzIH0gPSB1c2VMT1NBbmFseXNpcygpO1xuICBjb25zdCB7IFxuICAgIHN0YXR1czogb2JzdGFjbGVTdGF0dXMsIFxuICAgIHByb2dyZXNzOiBvYnN0YWNsZVByb2dyZXNzLCBcbiAgICBlcnJvcjogb2JzdGFjbGVFcnJvciwgXG4gICAgY2FuY2VsQW5hbHlzaXMgXG4gIH0gPSB1c2VPYnN0YWNsZUFuYWx5c2lzKCk7XG5cbiAgY29uc3QgaXNPYnN0YWNsZUFuYWx5emluZyA9IG9ic3RhY2xlU3RhdHVzID09PSAnbG9hZGluZyc7XG4gIFxuICAvLyBEZWJ1ZyBsb2cgdG8gdmVyaWZ5IG9ic3RhY2xlIGFuYWx5c2lzIHByb2dyZXNzIHVwZGF0ZXNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNPYnN0YWNsZUFuYWx5emluZyAmJiBvYnN0YWNsZVByb2dyZXNzID4gMCkge1xuICAgICAgY29uc29sZS5sb2coXCJBbmFseXNpc1N0YXR1cyByZWNlaXZlZCBvYnN0YWNsZSBwcm9ncmVzczpcIiwgb2JzdGFjbGVQcm9ncmVzcyk7XG4gICAgfVxuICB9LCBbaXNPYnN0YWNsZUFuYWx5emluZywgb2JzdGFjbGVQcm9ncmVzc10pO1xuICBcbiAgLy8gSWYgbm90aGluZyBpcyBhY3RpdmUsIGRvbid0IHNob3cgYW55dGhpbmdcbiAgaWYgKCFpc0xPU0FuYWx5emluZyAmJiAhaXNPYnN0YWNsZUFuYWx5emluZyAmJiAhbG9zRXJyb3IgJiYgIW9ic3RhY2xlRXJyb3IpIHJldHVybiBudWxsO1xuXG4gIC8vIERldGVybWluZSB3aGljaCBhbmFseXNpcyBpcyBhY3RpdmVcbiAgbGV0IGFjdGl2ZUFuYWx5c2lzOiB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIHByb2dyZXNzOiBudW1iZXI7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIG5vdGU6IHN0cmluZztcbiAgICBvblN0b3A6ICgpID0+IHZvaWQ7XG4gIH0gfCBudWxsID0gbnVsbDtcbiAgXG4gIGlmIChpc09ic3RhY2xlQW5hbHl6aW5nKSB7XG4gICAgYWN0aXZlQW5hbHlzaXMgPSB7XG4gICAgICB0eXBlOiAnVGVycmFpbiBBbmFseXNpcycsXG4gICAgICBwcm9ncmVzczogb2JzdGFjbGVQcm9ncmVzcyxcbiAgICAgIG1lc3NhZ2U6ICdBbmFseXppbmcgZmxpZ2h0IHBhdGguLi4nLFxuICAgICAgbm90ZTogJ1RoaXMgbWF5IHRha2UgYSBtb21lbnQgZm9yIGNvbXBsZXggcm91dGVzLicsXG4gICAgICBvblN0b3A6ICgpID0+IHtcbiAgICAgICAgaWYgKG9uU3RvcE9ic3RhY2xlKSBvblN0b3BPYnN0YWNsZSgpO1xuICAgICAgICBjYW5jZWxBbmFseXNpcygpO1xuICAgICAgfVxuICAgIH07XG4gIH0gZWxzZSBpZiAoaXNMT1NBbmFseXppbmcpIHtcbiAgICBhY3RpdmVBbmFseXNpcyA9IHtcbiAgICAgIHR5cGU6ICdBbmFseXNpbmcgVmlzaWJpbGl0eScsXG4gICAgICBwcm9ncmVzczogbG9zUHJvZ3Jlc3MsXG4gICAgICBtZXNzYWdlOiAnVGhpcyBtYXkgdGFrZSBhIGZldyBtb21lbnRzLi4uJyxcbiAgICAgIG5vdGU6ICdMYXJnZXIgYXJlYXMgcmVxdWlyZWQgbG9uZ2VyIGFuYWx5c2lzIHRpbWVzLicsXG4gICAgICBvblN0b3A6IG9uU3RvcExPUyB8fCAoKCkgPT4ge30pXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJhbmFseXNpcy1zdGF0dXMtY29udGFpbmVyXCI+XG4gICAgICB7YWN0aXZlQW5hbHlzaXMgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIHRvcC00IGxlZnQtMS8yIHRyYW5zZm9ybSAtdHJhbnNsYXRlLXgtMS8yIGJnLXdoaXRlIHNoYWRvdy14bCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcC00IHotWzEwMDBdIHctODBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi0zXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgIDxMb2FkZXIgY2xhc3NOYW1lPVwidy01IGgtNSBhbmltYXRlLXNwaW4gdGV4dC1ibHVlLTUwMFwiIC8+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAgdGV4dC1zbVwiPnthY3RpdmVBbmFseXNpcy50eXBlfTwvaDM+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+e2FjdGl2ZUFuYWx5c2lzLm1lc3NhZ2V9PC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgb25DbGljaz17YWN0aXZlQW5hbHlzaXMub25TdG9wfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXhzIHB4LTIgcHktMSBiZy1yZWQtNTAwIHRleHQtd2hpdGUgcm91bmRlZCBob3ZlcjpiZy1yZWQtNjAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTFcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gbWItMVwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5Qcm9ncmVzczwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyBmb250LW1lZGl1bVwiPntNYXRoLnJvdW5kKGFjdGl2ZUFuYWx5c2lzLnByb2dyZXNzKX0lPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBiZy1ncmF5LTIwMCByb3VuZGVkLWZ1bGwgaC0yLjVcIj5cbiAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ibHVlLTYwMCBoLTIuNSByb3VuZGVkLWZ1bGxcIiBcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYCR7TWF0aC5yb3VuZChhY3RpdmVBbmFseXNpcy5wcm9ncmVzcyl9JWAgfX1cbiAgICAgICAgICAgICAgPjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIG10LTJcIj57YWN0aXZlQW5hbHlzaXMubm90ZX08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAge2xvc0Vycm9yICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBib3R0b20tNCBsZWZ0LTQgYmctcmVkLTUwMCB0ZXh0LXdoaXRlIHB4LTQgcHktMiByb3VuZGVkLWxnIHNoYWRvdy1sZyBmbGV4IGl0ZW1zLWNlbnRlciB6LVsxMDAwXVwiPlxuICAgICAgICAgIDxzcGFuPuKaoO+4jzwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtbC0yXCI+e2xvc0Vycm9yfTwvc3Bhbj5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldExPU0Vycm9yKG51bGwpfSBjbGFzc05hbWU9XCJtbC0yIGhvdmVyOm9wYWNpdHktNzVcIj5cbiAgICAgICAgICAgIOKclVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHtvYnN0YWNsZUVycm9yICYmICFsb3NFcnJvciAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgYm90dG9tLTQgbGVmdC00IGJnLXJlZC01MDAgdGV4dC13aGl0ZSBweC00IHB5LTIgcm91bmRlZC1sZyBzaGFkb3ctbGcgZmxleCBpdGVtcy1jZW50ZXIgei1bMTAwMF1cIj5cbiAgICAgICAgICA8c3Bhbj7imqDvuI88L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibWwtMlwiPntvYnN0YWNsZUVycm9yfTwvc3Bhbj5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IGNhbmNlbEFuYWx5c2lzKCl9IGNsYXNzTmFtZT1cIm1sLTIgaG92ZXI6b3BhY2l0eS03NVwiPlxuICAgICAgICAgICAg4pyVXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFuYWx5c2lzU3RhdHVzOyJdLCJuYW1lcyI6WyJSZWFjdCIsIkxvYWRlciIsInVzZUxPU0FuYWx5c2lzIiwidXNlT2JzdGFjbGVBbmFseXNpcyIsIkFuYWx5c2lzU3RhdHVzIiwib25TdG9wTE9TIiwib25TdG9wT2JzdGFjbGUiLCJpc0FuYWx5emluZyIsImlzTE9TQW5hbHl6aW5nIiwiZXJyb3IiLCJsb3NFcnJvciIsInNldEVycm9yIiwic2V0TE9TRXJyb3IiLCJwcm9ncmVzcyIsImxvc1Byb2dyZXNzIiwic3RhdHVzIiwib2JzdGFjbGVTdGF0dXMiLCJvYnN0YWNsZVByb2dyZXNzIiwib2JzdGFjbGVFcnJvciIsImNhbmNlbEFuYWx5c2lzIiwiaXNPYnN0YWNsZUFuYWx5emluZyIsInVzZUVmZmVjdCIsImNvbnNvbGUiLCJsb2ciLCJhY3RpdmVBbmFseXNpcyIsInR5cGUiLCJtZXNzYWdlIiwibm90ZSIsIm9uU3RvcCIsImRpdiIsImNsYXNzTmFtZSIsImgzIiwicCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJzcGFuIiwiTWF0aCIsInJvdW5kIiwic3R5bGUiLCJ3aWR0aCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/AnalysisStatus.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/DBYDLayerHandler.tsx":
/*!*****************************************************!*\
  !*** ./src/app/components/Map/DBYDLayerHandler.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../context/AreaOfOpsContext */ \"(ssr)/./src/app/context/AreaOfOpsContext.tsx\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/bbox/dist/esm/index.js\");\n/* harmony import */ var _AO_Hooks_useAreaOpsProcessor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../AO/Hooks/useAreaOpsProcessor */ \"(ssr)/./src/app/components/AO/Hooks/useAreaOpsProcessor.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\nconst services = [\n    \"LUAL_Network_HV_Feature_Public\",\n    \"LUAL_Network_LV_Feature_Public\",\n    \"LUAL_Network_SWER_Feature_Public\",\n    \"LUAL_Network_Other_Feature_Public\",\n    \"LUAL_Network_Device_Feature_View\"\n];\nconst serviceLayerMapping = {\n    LUAL_Network_HV_Feature_Public: {\n        sourceId: \"byda-hv-source\",\n        layerId: \"byda-hv-layer\",\n        color: \"#ff0000\"\n    },\n    LUAL_Network_LV_Feature_Public: {\n        sourceId: \"byda-lv-source\",\n        layerId: \"byda-lv-layer\",\n        color: \"#ff0000\"\n    },\n    LUAL_Network_SWER_Feature_Public: {\n        sourceId: \"byda-swer-source\",\n        layerId: \"byda-swer-layer\",\n        color: \"#ff0000\"\n    },\n    LUAL_Network_Other_Feature_Public: {\n        sourceId: \"byda-other-source\",\n        layerId: \"byda-other-layer\",\n        color: \"#ff0000\"\n    },\n    LUAL_Network_Device_Feature_View: {\n        sourceId: \"byda-device-source\",\n        layerId: \"byda-device-layer\",\n        color: \"#ff0000\"\n    }\n};\nconst baseUrl = \"https://services-ap1.arcgis.com/ug6sGLFkytbXYo4f/ArcGIS/rest/services\";\nconst serviceQueryParams = {\n    LUAL_Network_HV_Feature_Public: {\n        where: \"ASSET_TYPE IN ('US','OH')\",\n        outFields: \"OPERATING_VOLTAGE,OWNER\"\n    },\n    LUAL_Network_LV_Feature_Public: {\n        where: \"ASSET_TYPE IN ('US','OH')\",\n        outFields: \"OPERATING_VOLTAGE,OWNER\"\n    },\n    LUAL_Network_SWER_Feature_Public: {\n        where: \"ASSET_TYPE IN ('US','OH')\",\n        outFields: \"OWNER,OPERATING_VOLTAGE\"\n    },\n    LUAL_Network_Other_Feature_Public: {\n        where: \"ASSET_TYPE IN ('US','OH')\",\n        outFields: \"OWNER,OPERATING_VOLTAGE\"\n    },\n    LUAL_Network_Device_Feature_View: {\n        where: \"1=1\",\n        outFields: \"OWNER,ASSET_TYPE\"\n    }\n};\nconst DBYDLayerHandler = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(({ map }, ref)=>{\n    const geometryType = \"esriGeometryEnvelope\";\n    const inSR = \"4326\";\n    const spatialRel = \"esriSpatialRelIntersects\";\n    const f = \"geojson\";\n    // Instead of destructuring \"layerManager\", extract the functions provided by the context.\n    const { setLayerVisibility } = (0,_context_mapcontext__WEBPACK_IMPORTED_MODULE_1__.useMapContext)();\n    const { aoGeometry } = (0,_context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_2__.useAreaOfOpsContext)();\n    const { showAreaOfOperations } = (0,_AO_Hooks_useAreaOpsProcessor__WEBPACK_IMPORTED_MODULE_3__.useAreaOpsProcessor)();\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    // Initialize layers on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"DBYDLayerHandler.useEffect\": ()=>{\n            if (!map) return;\n            services.forEach({\n                \"DBYDLayerHandler.useEffect\": (service)=>{\n                    const { sourceId, layerId, color } = serviceLayerMapping[service];\n                    // Add empty GeoJSON source if it doesn't exist\n                    if (!map.getSource(sourceId)) {\n                        map.addSource(sourceId, {\n                            type: \"geojson\",\n                            data: {\n                                type: \"FeatureCollection\",\n                                features: []\n                            }\n                        });\n                    }\n                    // Add layer if it doesn't exist\n                    if (!map.getLayer(layerId)) {\n                        map.addLayer({\n                            id: layerId,\n                            type: \"line\",\n                            source: sourceId,\n                            layout: {\n                                visibility: \"none\"\n                            },\n                            paint: {\n                                \"line-color\": color,\n                                \"line-width\": 2\n                            }\n                        });\n                    // If you need to register this layer in a centralized LayerManager, consider calling that here.\n                    }\n                }\n            }[\"DBYDLayerHandler.useEffect\"]);\n            // Cleanup: Optionally remove layers and sources on unmount\n            return ({\n                \"DBYDLayerHandler.useEffect\": ()=>{\n                    // Add comprehensive map validation before cleanup\n                    if (!map || !map.getStyle || !map.getLayer || !map.getSource) {\n                        console.warn(\"[DBYDLayerHandler] Map not available or already destroyed during cleanup\");\n                        return;\n                    }\n                    try {\n                        // Check if map is still loaded\n                        if (!map.loaded()) {\n                            console.warn(\"[DBYDLayerHandler] Map not loaded during cleanup\");\n                            return;\n                        }\n                    } catch (mapStateError) {\n                        console.warn(\"[DBYDLayerHandler] Error checking map state during cleanup:\", mapStateError);\n                        return;\n                    }\n                    services.forEach({\n                        \"DBYDLayerHandler.useEffect\": (service)=>{\n                            const { sourceId, layerId } = serviceLayerMapping[service];\n                            try {\n                                if (map.getLayer && map.getLayer(layerId)) {\n                                    map.removeLayer(layerId);\n                                }\n                            } catch (layerError) {\n                                console.warn(`[DBYDLayerHandler] Error removing layer ${layerId}:`, layerError);\n                            }\n                            try {\n                                if (map.getSource && map.getSource(sourceId)) {\n                                    map.removeSource(sourceId);\n                                }\n                            } catch (sourceError) {\n                                console.warn(`[DBYDLayerHandler] Error removing source ${sourceId}:`, sourceError);\n                            }\n                        }\n                    }[\"DBYDLayerHandler.useEffect\"]);\n                }\n            })[\"DBYDLayerHandler.useEffect\"];\n        }\n    }[\"DBYDLayerHandler.useEffect\"], [\n        map\n    ]);\n    const fetchLayers = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"DBYDLayerHandler.useCallback[fetchLayers]\": ()=>{\n            if (!map) {\n                console.warn(\"[DBYDLayerHandler] No map instance. Aborting fetch.\");\n                return;\n            }\n            if (!aoGeometry) {\n                console.warn(\"[DBYDLayerHandler] No AO geometry. Aborting fetch.\");\n                return;\n            }\n            // Show Area of Operations when BYDA layers are fetched\n            try {\n                showAreaOfOperations();\n            } catch (error) {\n                console.warn(\"[DBYDLayerHandler] Failed to show Area of Operations:\", error);\n            }\n            const boundingBox = _turf_turf__WEBPACK_IMPORTED_MODULE_4__.bbox(aoGeometry);\n            const geometry = boundingBox.join(\",\");\n            services.forEach({\n                \"DBYDLayerHandler.useCallback[fetchLayers]\": (service)=>{\n                    const params = serviceQueryParams[service];\n                    const queryParams = new URLSearchParams({\n                        where: params.where,\n                        geometry,\n                        geometryType,\n                        inSR,\n                        spatialRel,\n                        outFields: params.outFields,\n                        returnGeometry: \"true\",\n                        f\n                    });\n                    const queryUrl = `${baseUrl}/${service}/FeatureServer/0/query?${queryParams.toString()}`;\n                    fetch(queryUrl).then({\n                        \"DBYDLayerHandler.useCallback[fetchLayers]\": (res)=>{\n                            return res.json();\n                        }\n                    }[\"DBYDLayerHandler.useCallback[fetchLayers]\"]).then({\n                        \"DBYDLayerHandler.useCallback[fetchLayers]\": (data)=>{\n                            const mapping = serviceLayerMapping[service];\n                            if (!mapping) return;\n                            const { sourceId, layerId } = mapping;\n                            if (!map.getSource(sourceId)) {\n                                map.addSource(sourceId, {\n                                    type: \"geojson\",\n                                    data: {\n                                        type: \"FeatureCollection\",\n                                        features: []\n                                    }\n                                });\n                            }\n                            if (data.features && data.features.length > 0) {\n                                const existingSource = map.getSource(sourceId);\n                                if (existingSource) {\n                                    existingSource.setData(data);\n                                    setLayerVisibility(layerId, true);\n                                } else {\n                                    console.warn(`[DBYDLayerHandler] Source \"${sourceId}\" not found after re-adding.`);\n                                }\n                            } else {\n                                const existingSource = map.getSource(sourceId);\n                                if (existingSource) {\n                                    existingSource.setData({\n                                        type: \"FeatureCollection\",\n                                        features: []\n                                    });\n                                }\n                            }\n                        }\n                    }[\"DBYDLayerHandler.useCallback[fetchLayers]\"]).catch({\n                        \"DBYDLayerHandler.useCallback[fetchLayers]\": (error)=>{\n                            console.error(`[DBYDLayerHandler] Error with ${service}:`, error);\n                            setError(`Failed to fetch ${service}: ${error.message}`);\n                        }\n                    }[\"DBYDLayerHandler.useCallback[fetchLayers]\"]);\n                }\n            }[\"DBYDLayerHandler.useCallback[fetchLayers]\"]);\n        }\n    }[\"DBYDLayerHandler.useCallback[fetchLayers]\"], [\n        map,\n        aoGeometry,\n        setLayerVisibility,\n        showAreaOfOperations\n    ]);\n    // Expose fetchLayers to parent via ref\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref, {\n        \"DBYDLayerHandler.useImperativeHandle\": ()=>({\n                fetchLayers\n            })\n    }[\"DBYDLayerHandler.useImperativeHandle\"], [\n        fetchLayers\n    ]);\n    return null;\n});\nDBYDLayerHandler.displayName = \"DBYDLayerHandler\";\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DBYDLayerHandler);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL0RCWURMYXllckhhbmRsZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7NkRBRTBGO0FBRWpDO0FBQ1k7QUFDbEM7QUFDbUM7QUFPdEUsTUFBTVMsV0FBVztJQUNmO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDRDtBQUVELE1BQU1DLHNCQUdGO0lBQ0ZDLGdDQUFnQztRQUM5QkMsVUFBVTtRQUNWQyxTQUFTO1FBQ1RDLE9BQU87SUFDVDtJQUNBQyxnQ0FBZ0M7UUFDOUJILFVBQVU7UUFDVkMsU0FBUztRQUNUQyxPQUFPO0lBQ1Q7SUFDQUUsa0NBQWtDO1FBQ2hDSixVQUFVO1FBQ1ZDLFNBQVM7UUFDVEMsT0FBTztJQUNUO0lBQ0FHLG1DQUFtQztRQUNqQ0wsVUFBVTtRQUNWQyxTQUFTO1FBQ1RDLE9BQU87SUFDVDtJQUNBSSxrQ0FBa0M7UUFDaENOLFVBQVU7UUFDVkMsU0FBUztRQUNUQyxPQUFPO0lBQ1Q7QUFDRjtBQUVBLE1BQU1LLFVBQ0o7QUFFRixNQUFNQyxxQkFBMkU7SUFDL0VULGdDQUFnQztRQUM5QlUsT0FBTztRQUNQQyxXQUFXO0lBQ2I7SUFDQVAsZ0NBQWdDO1FBQzlCTSxPQUFPO1FBQ1BDLFdBQVc7SUFDYjtJQUNBTixrQ0FBa0M7UUFDaENLLE9BQU87UUFDUEMsV0FBVztJQUNiO0lBQ0FMLG1DQUFtQztRQUNqQ0ksT0FBTztRQUNQQyxXQUFXO0lBQ2I7SUFDQUosa0NBQWtDO1FBQ2hDRyxPQUFPO1FBQ1BDLFdBQVc7SUFDYjtBQUNGO0FBRUEsTUFBTUMsaUNBQW1CdkIsaURBQVVBLENBR2pDLENBQUMsRUFBRXdCLEdBQUcsRUFBRSxFQUFFQztJQUNWLE1BQU1DLGVBQWU7SUFDckIsTUFBTUMsT0FBTztJQUNiLE1BQU1DLGFBQWE7SUFDbkIsTUFBTUMsSUFBSTtJQUNWLDBGQUEwRjtJQUMxRixNQUFNLEVBQUVDLGtCQUFrQixFQUFFLEdBQUd6QixrRUFBYUE7SUFDNUMsTUFBTSxFQUFFMEIs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U0FBUyw0QkFBNEIsQ0FBQztnQ0FDbkY7NEJBQ0YsT0FBTztnQ0FDTCxNQUFNK0QsaUJBQWlCbkQsSUFBSWEsU0FBUyxDQUFDekI7Z0NBQ3JDLElBQUkrRCxnQkFBZ0I7b0NBQ2xCQSxlQUFlQyxPQUFPLENBQUM7d0NBQUVyQyxNQUFNO3dDQUFxQkUsVUFBVSxFQUFFO29DQUFDO2dDQUNuRTs0QkFDRjt3QkFDRjtvRUFDQ29DLEtBQUs7cUVBQUMsQ0FBQzVDOzRCQUNOaUIsUUFBUWpCLEtBQUssQ0FBQyxDQUFDLDhCQUE4QixFQUFFRyxRQUFRLENBQUMsQ0FBQyxFQUFFSDs0QkFDM0RDLFNBQVMsQ0FBQyxnQkFBZ0IsRUFBRUUsUUFBUSxFQUFFLEVBQUVILE1BQU02QyxPQUFPLEVBQUU7d0JBQ3pEOztnQkFDSjs7UUFDRjtvREFBRztRQUFDdEQ7UUFBS087UUFBWUQ7UUFBb0JFO0tBQXFCO0lBRTlELHVDQUF1QztJQUN2Qy9CLDBEQUFtQkEsQ0FDakJ3QjtnREFDQSxJQUFPO2dCQUNMaUM7WUFDRjsrQ0FDQTtRQUFDQTtLQUFZO0lBR2YsT0FBTztBQUNUO0FBRUFuQyxpQkFBaUJ3RCxXQUFXLEdBQUc7QUFDL0IsaUVBQWV4RCxnQkFBZ0JBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL0RCWURMYXllckhhbmRsZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyBmb3J3YXJkUmVmLCB1c2VJbXBlcmF0aXZlSGFuZGxlLCB1c2VDYWxsYmFjaywgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHR5cGUgbWFwYm94Z2wgZnJvbSBcIm1hcGJveC1nbFwiO1xuaW1wb3J0IHsgdXNlTWFwQ29udGV4dCB9IGZyb20gXCIuLi8uLi9jb250ZXh0L21hcGNvbnRleHRcIjtcbmltcG9ydCB7IHVzZUFyZWFPZk9wc0NvbnRleHQgfSBmcm9tIFwiLi4vLi4vY29udGV4dC9BcmVhT2ZPcHNDb250ZXh0XCI7XG5pbXBvcnQgKiBhcyB0dXJmIGZyb20gXCJAdHVyZi90dXJmXCI7XG5pbXBvcnQgeyB1c2VBcmVhT3BzUHJvY2Vzc29yIH0gZnJvbSBcIi4uL0FPL0hvb2tzL3VzZUFyZWFPcHNQcm9jZXNzb3JcIjtcblxuXG5pbnRlcmZhY2UgREJZRExheWVySGFuZGxlclByb3BzIHtcbiAgbWFwOiBtYXBib3hnbC5NYXAgfCBudWxsO1xufVxuXG5jb25zdCBzZXJ2aWNlcyA9IFtcbiAgXCJMVUFMX05ldHdvcmtfSFZfRmVhdHVyZV9QdWJsaWNcIixcbiAgXCJMVUFMX05ldHdvcmtfTFZfRmVhdHVyZV9QdWJsaWNcIixcbiAgXCJMVUFMX05ldHdvcmtfU1dFUl9GZWF0dXJlX1B1YmxpY1wiLFxuICBcIkxVQUxfTmV0d29ya19PdGhlcl9GZWF0dXJlX1B1YmxpY1wiLFxuICBcIkxVQUxfTmV0d29ya19EZXZpY2VfRmVhdHVyZV9WaWV3XCIsXG5dO1xuXG5jb25zdCBzZXJ2aWNlTGF5ZXJNYXBwaW5nOiBSZWNvcmQ8XG4gIHN0cmluZyxcbiAgeyBzb3VyY2VJZDogc3RyaW5nOyBsYXllcklkOiBzdHJpbmc7IGNvbG9yOiBzdHJpbmcgfVxuPiA9IHtcbiAgTFVBTF9OZXR3b3JrX0hWX0ZlYXR1cmVfUHVibGljOiB7XG4gICAgc291cmNlSWQ6IFwiYnlkYS1odi1zb3VyY2VcIixcbiAgICBsYXllcklkOiBcImJ5ZGEtaHYtbGF5ZXJcIixcbiAgICBjb2xvcjogXCIjZmYwMDAwXCIsXG4gIH0sXG4gIExVQUxfTmV0d29ya19MVl9GZWF0dXJlX1B1YmxpYzoge1xuICAgIHNvdXJjZUlkOiBcImJ5ZGEtbHYtc291cmNlXCIsXG4gICAgbGF5ZXJJZDogXCJieWRhLWx2LWxheWVyXCIsXG4gICAgY29sb3I6IFwiI2ZmMDAwMFwiLFxuICB9LFxuICBMVUFMX05ldHdvcmtfU1dFUl9GZWF0dXJlX1B1YmxpYzoge1xuICAgIHNvdXJjZUlkOiBcImJ5ZGEtc3dlci1zb3VyY2VcIixcbiAgICBsYXllcklkOiBcImJ5ZGEtc3dlci1sYXllclwiLFxuICAgIGNvbG9yOiBcIiNmZjAwMDBcIixcbiAgfSxcbiAgTFVBTF9OZXR3b3JrX090aGVyX0ZlYXR1cmVfUHVibGljOiB7XG4gICAgc291cmNlSWQ6IFwiYnlkYS1vdGhlci1zb3VyY2VcIixcbiAgICBsYXllcklkOiBcImJ5ZGEtb3RoZXItbGF5ZXJcIixcbiAgICBjb2xvcjogXCIjZmYwMDAwXCIsXG4gIH0sXG4gIExVQUxfTmV0d29ya19EZXZpY2VfRmVhdHVyZV9WaWV3OiB7XG4gICAgc291cmNlSWQ6IFwiYnlkYS1kZXZpY2Utc291cmNlXCIsXG4gICAgbGF5ZXJJZDogXCJieWRhLWRldmljZS1sYXllclwiLFxuICAgIGNvbG9yOiBcIiNmZjAwMDBcIixcbiAgfSxcbn07XG5cbmNvbnN0IGJhc2VVcmwgPVxuICBcImh0dHBzOi8vc2VydmljZXMtYXAxLmFyY2dpcy5jb20vdWc2c0dMRmt5dGJYWW80Zi9BcmNHSVMvcmVzdC9zZXJ2aWNlc1wiO1xuXG5jb25zdCBzZXJ2aWNlUXVlcnlQYXJhbXM6IFJlY29yZDxzdHJpbmcsIHsgd2hlcmU6IHN0cmluZzsgb3V0RmllbGRzOiBzdHJpbmcgfT4gPSB7XG4gIExVQUxfTmV0d29ya19IVl9GZWF0dXJlX1B1YmxpYzoge1xuICAgIHdoZXJlOiBcIkFTU0VUX1RZUEUgSU4gKCdVUycsJ09IJylcIixcbiAgICBvdXRGaWVsZHM6IFwiT1BFUkFUSU5HX1ZPTFRBR0UsT1dORVJcIixcbiAgfSxcbiAgTFVBTF9OZXR3b3JrX0xWX0ZlYXR1cmVfUHVibGljOiB7XG4gICAgd2hlcmU6IFwiQVNTRVRfVFlQRSBJTiAoJ1VTJywnT0gnKVwiLFxuICAgIG91dEZpZWxkczogXCJPUEVSQVRJTkdfVk9MVEFHRSxPV05FUlwiLFxuICB9LFxuICBMVUFMX05ldHdvcmtfU1dFUl9GZWF0dXJlX1B1YmxpYzoge1xuICAgIHdoZXJlOiBcIkFTU0VUX1RZUEUgSU4gKCdVUycsJ09IJylcIixcbiAgICBvdXRGaWVsZHM6IFwiT1dORVIsT1BFUkFUSU5HX1ZPTFRBR0VcIixcbiAgfSxcbiAgTFVBTF9OZXR3b3JrX090aGVyX0ZlYXR1cmVfUHVibGljOiB7XG4gICAgd2hlcmU6IFwiQVNTRVRfVFlQRSBJTiAoJ1VTJywnT0gnKVwiLFxuICAgIG91dEZpZWxkczogXCJPV05FUixPUEVSQVRJTkdfVk9MVEFHRVwiLFxuICB9LFxuICBMVUFMX05ldHdvcmtfRGV2aWNlX0ZlYXR1cmVfVmlldzoge1xuICAgIHdoZXJlOiBcIjE9MVwiLFxuICAgIG91dEZpZWxkczogXCJPV05FUixBU1NFVF9UWVBFXCIsXG4gIH0sXG59O1xuXG5jb25zdCBEQllETGF5ZXJIYW5kbGVyID0gZm9yd2FyZFJlZjxcbiAgeyBmZXRjaExheWVyczogKCkgPT4gdm9pZCB9LFxuICBEQllETGF5ZXJIYW5kbGVyUHJvcHNcbj4oKHsgbWFwIH0sIHJlZikgPT4ge1xuICBjb25zdCBnZW9tZXRyeVR5cGUgPSBcImVzcmlHZW9tZXRyeUVudmVsb3BlXCI7XG4gIGNvbnN0IGluU1IgPSBcIjQzMjZcIjtcbiAgY29uc3Qgc3BhdGlhbFJlbCA9IFwiZXNyaVNwYXRpYWxSZWxJbnRlcnNlY3RzXCI7XG4gIGNvbnN0IGYgPSBcImdlb2pzb25cIjtcbiAgLy8gSW5zdGVhZCBvZiBkZXN0cnVjdHVyaW5nIFwibGF5ZXJNYW5hZ2VyXCIsIGV4dHJhY3QgdGhlIGZ1bmN0aW9ucyBwcm92aWRlZCBieSB0aGUgY29udGV4dC5cbiAgY29uc3QgeyBzZXRMYXllclZpc2liaWxpdHkgfSA9IHVzZU1hcENvbnRleHQoKTtcbiAgY29uc3QgeyBhb0dlb21ldHJ5IH0gPSB1c2VBcmVhT2ZPcHNDb250ZXh0KCk7XG4gIGNvbnN0IHsgc2hvd0FyZWFPZk9wZXJhdGlvbnMgfSA9IHVzZUFyZWFPcHNQcm9jZXNzb3IoKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICAvLyBJbml0aWFsaXplIGxheWVycyBvbiBtb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbWFwKSByZXR1cm47XG5cbiAgICBzZXJ2aWNlcy5mb3JFYWNoKChzZXJ2aWNlKSA9PiB7XG4gICAgICBjb25zdCB7IHNvdXJjZUlkLCBsYXllcklkLCBjb2xvciB9ID0gc2VydmljZUxheWVyTWFwcGluZ1tzZXJ2aWNlXTtcblxuICAgICAgLy8gQWRkIGVtcHR5IEdlb0pTT04gc291cmNlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICAgIGlmICghbWFwLmdldFNvdXJjZShzb3VyY2VJZCkpIHtcbiAgICAgICAgbWFwLmFkZFNvdXJjZShzb3VyY2VJZCwge1xuICAgICAgICAgIHR5cGU6IFwiZ2VvanNvblwiLFxuICAgICAgICAgIGRhdGE6IHsgdHlwZTogXCJGZWF0dXJlQ29sbGVjdGlvblwiLCBmZWF0dXJlczogW10gfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBsYXllciBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICBpZiAoIW1hcC5nZXRMYXllcihsYXllcklkKSkge1xuICAgICAgICBtYXAuYWRkTGF5ZXIoe1xuICAgICAgICAgIGlkOiBsYXllcklkLFxuICAgICAgICAgIHR5cGU6IFwibGluZVwiLFxuICAgICAgICAgIHNvdXJjZTogc291cmNlSWQsXG4gICAgICAgICAgbGF5b3V0OiB7IHZpc2liaWxpdHk6IFwibm9uZVwiIH0sXG4gICAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAgIFwibGluZS1jb2xvclwiOiBjb2xvcixcbiAgICAgICAgICAgIFwibGluZS13aWR0aFwiOiAyLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gSWYgeW91IG5lZWQgdG8gcmVnaXN0ZXIgdGhpcyBsYXllciBpbiBhIGNlbnRyYWxpemVkIExheWVyTWFuYWdlciwgY29uc2lkZXIgY2FsbGluZyB0aGF0IGhlcmUuXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDbGVhbnVwOiBPcHRpb25hbGx5IHJlbW92ZSBsYXllcnMgYW5kIHNvdXJjZXMgb24gdW5tb3VudFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAvLyBBZGQgY29tcHJlaGVuc2l2ZSBtYXAgdmFsaWRhdGlvbiBiZWZvcmUgY2xlYW51cFxuICAgICAgaWYgKCFtYXAgfHwgIW1hcC5nZXRTdHlsZSB8fCAhbWFwLmdldExheWVyIHx8ICFtYXAuZ2V0U291cmNlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIltEQllETGF5ZXJIYW5kbGVyXSBNYXAgbm90IGF2YWlsYWJsZSBvciBhbHJlYWR5IGRlc3Ryb3llZCBkdXJpbmcgY2xlYW51cFwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICAvLyBDaGVjayBpZiBtYXAgaXMgc3RpbGwgbG9hZGVkXG4gICAgICAgIGlmICghbWFwLmxvYWRlZCgpKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiW0RCWURMYXllckhhbmRsZXJdIE1hcCBub3QgbG9hZGVkIGR1cmluZyBjbGVhbnVwXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAobWFwU3RhdGVFcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJbREJZRExheWVySGFuZGxlcl0gRXJyb3IgY2hlY2tpbmcgbWFwIHN0YXRlIGR1cmluZyBjbGVhbnVwOlwiLCBtYXBTdGF0ZUVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBzZXJ2aWNlcy5mb3JFYWNoKChzZXJ2aWNlKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgc291cmNlSWQsIGxheWVySWQgfSA9IHNlcnZpY2VMYXllck1hcHBpbmdbc2VydmljZV07XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChtYXAuZ2V0TGF5ZXIgJiYgbWFwLmdldExheWVyKGxheWVySWQpKSB7XG4gICAgICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXJJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChsYXllckVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBbREJZRExheWVySGFuZGxlcl0gRXJyb3IgcmVtb3ZpbmcgbGF5ZXIgJHtsYXllcklkfTpgLCBsYXllckVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAobWFwLmdldFNvdXJjZSAmJiBtYXAuZ2V0U291cmNlKHNvdXJjZUlkKSkge1xuICAgICAgICAgICAgbWFwLnJlbW92ZVNvdXJjZShzb3VyY2VJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChzb3VyY2VFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgW0RCWURMYXllckhhbmRsZXJdIEVycm9yIHJlbW92aW5nIHNvdXJjZSAke3NvdXJjZUlkfTpgLCBzb3VyY2VFcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gIH0sIFttYXBdKTtcblxuICBjb25zdCBmZXRjaExheWVycyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIW1hcCkge1xuICAgICAgY29uc29sZS53YXJuKFwiW0RCWURMYXllckhhbmRsZXJdIE5vIG1hcCBpbnN0YW5jZS4gQWJvcnRpbmcgZmV0Y2guXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWFvR2VvbWV0cnkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIltEQllETGF5ZXJIYW5kbGVyXSBObyBBTyBnZW9tZXRyeS4gQWJvcnRpbmcgZmV0Y2guXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNob3cgQXJlYSBvZiBPcGVyYXRpb25zIHdoZW4gQllEQSBsYXllcnMgYXJlIGZldGNoZWRcbiAgICB0cnkge1xuICAgICAgc2hvd0FyZWFPZk9wZXJhdGlvbnMoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFwiW0RCWURMYXllckhhbmRsZXJdIEZhaWxlZCB0byBzaG93IEFyZWEgb2YgT3BlcmF0aW9uczpcIiwgZXJyb3IpO1xuICAgIH1cblxuICAgIGNvbnN0IGJvdW5kaW5nQm94ID0gdHVyZi5iYm94KGFvR2VvbWV0cnkpIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICAgIGNvbnN0IGdlb21ldHJ5ID0gYm91bmRpbmdCb3guam9pbihcIixcIik7XG5cbiAgICBzZXJ2aWNlcy5mb3JFYWNoKChzZXJ2aWNlKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBzZXJ2aWNlUXVlcnlQYXJhbXNbc2VydmljZV07XG4gICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICB3aGVyZTogcGFyYW1zLndoZXJlLFxuICAgICAgICBnZW9tZXRyeSxcbiAgICAgICAgZ2VvbWV0cnlUeXBlLFxuICAgICAgICBpblNSLFxuICAgICAgICBzcGF0aWFsUmVsLFxuICAgICAgICBvdXRGaWVsZHM6IHBhcmFtcy5vdXRGaWVsZHMsXG4gICAgICAgIHJldHVybkdlb21ldHJ5OiBcInRydWVcIixcbiAgICAgICAgZixcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcXVlcnlVcmwgPSBgJHtiYXNlVXJsfS8ke3NlcnZpY2V9L0ZlYXR1cmVTZXJ2ZXIvMC9xdWVyeT8ke3F1ZXJ5UGFyYW1zLnRvU3RyaW5nKCl9YDtcblxuICAgICAgZmV0Y2gocXVlcnlVcmwpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICBjb25zdCBtYXBwaW5nID0gc2VydmljZUxheWVyTWFwcGluZ1tzZXJ2aWNlXTtcbiAgICAgICAgICBpZiAoIW1hcHBpbmcpIHJldHVybjtcbiAgICAgICAgICBjb25zdCB7IHNvdXJjZUlkLCBsYXllcklkIH0gPSBtYXBwaW5nO1xuXG4gICAgICAgICAgaWYgKCFtYXAuZ2V0U291cmNlKHNvdXJjZUlkKSkge1xuICAgICAgICAgICAgbWFwLmFkZFNvdXJjZShzb3VyY2VJZCwge1xuICAgICAgICAgICAgICB0eXBlOiBcImdlb2pzb25cIixcbiAgICAgICAgICAgICAgZGF0YTogeyB0eXBlOiBcIkZlYXR1cmVDb2xsZWN0aW9uXCIsIGZlYXR1cmVzOiBbXSB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGRhdGEuZmVhdHVyZXMgJiYgZGF0YS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1NvdXJjZSA9IG1hcC5nZXRTb3VyY2Uoc291cmNlSWQpIGFzIG1hcGJveGdsLkdlb0pTT05Tb3VyY2U7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdTb3VyY2UpIHtcbiAgICAgICAgICAgICAgZXhpc3RpbmdTb3VyY2Uuc2V0RGF0YShkYXRhKTtcbiAgICAgICAgICAgICAgc2V0TGF5ZXJWaXNpYmlsaXR5KGxheWVySWQsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBbREJZRExheWVySGFuZGxlcl0gU291cmNlIFwiJHtzb3VyY2VJZH1cIiBub3QgZm91bmQgYWZ0ZXIgcmUtYWRkaW5nLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1NvdXJjZSA9IG1hcC5nZXRTb3VyY2Uoc291cmNlSWQpIGFzIG1hcGJveGdsLkdlb0pTT05Tb3VyY2U7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdTb3VyY2UpIHtcbiAgICAgICAgICAgICAgZXhpc3RpbmdTb3VyY2Uuc2V0RGF0YSh7IHR5cGU6IFwiRmVhdHVyZUNvbGxlY3Rpb25cIiwgZmVhdHVyZXM6IFtdIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtEQllETGF5ZXJIYW5kbGVyXSBFcnJvciB3aXRoICR7c2VydmljZX06YCwgZXJyb3IpO1xuICAgICAgICAgIHNldEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggJHtzZXJ2aWNlfTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfSwgW21hcCwgYW9HZW9tZXRyeSwgc2V0TGF5ZXJWaXNpYmlsaXR5LCBzaG93QXJlYU9mT3BlcmF0aW9uc10pO1xuXG4gIC8vIEV4cG9zZSBmZXRjaExheWVycyB0byBwYXJlbnQgdmlhIHJlZlxuICB1c2VJbXBlcmF0aXZlSGFuZGxlKFxuICAgIHJlZixcbiAgICAoKSA9PiAoe1xuICAgICAgZmV0Y2hMYXllcnMsXG4gICAgfSksXG4gICAgW2ZldGNoTGF5ZXJzXVxuICApO1xuXG4gIHJldHVybiBudWxsO1xufSk7XG5cbkRCWURMYXllckhhbmRsZXIuZGlzcGxheU5hbWUgPSBcIkRCWURMYXllckhhbmRsZXJcIjtcbmV4cG9ydCBkZWZhdWx0IERCWURMYXllckhhbmRsZXI7Il0sIm5hbWVzIjpbImZvcndhcmRSZWYiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwidXNlQ2FsbGJhY2siLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZU1hcENvbnRleHQiLCJ1c2VBcmVhT2ZPcHNDb250ZXh0IiwidHVyZiIsInVzZUFyZWFPcHNQcm9jZXNzb3IiLCJzZXJ2aWNlcyIsInNlcnZpY2VMYXllck1hcHBpbmciLCJMVUFMX05ldHdvcmtfSFZfRmVhdHVyZV9QdWJsaWMiLCJzb3VyY2VJZCIsImxheWVySWQiLCJjb2xvciIsIkxVQUxfTmV0d29ya19MVl9GZWF0dXJlX1B1YmxpYyIsIkxVQUxfTmV0d29ya19TV0VSX0ZlYXR1cmVfUHVibGljIiwiTFVBTF9OZXR3b3JrX090aGVyX0ZlYXR1cmVfUHVibGljIiwiTFVBTF9OZXR3b3JrX0RldmljZV9GZWF0dXJlX1ZpZXciLCJiYXNlVXJsIiwic2VydmljZVF1ZXJ5UGFyYW1zIiwid2hlcmUiLCJvdXRGaWVsZHMiLCJEQllETGF5ZXJIYW5kbGVyIiwibWFwIiwicmVmIiwiZ2VvbWV0cnlUeXBlIiwiaW5TUiIsInNwYXRpYWxSZWwiLCJmIiwic2V0TGF5ZXJWaXNpYmlsaXR5IiwiYW9HZW9tZXRyeSIsInNob3dBcmVhT2ZPcGVyYXRpb25zIiwiZXJyb3IiLCJzZXRFcnJvciIsImZvckVhY2giLCJzZXJ2aWNlIiwiZ2V0U291cmNlIiwiYWRkU291cmNlIiwidHlwZSIsImRhdGEiLCJmZWF0dXJlcyIsImdldExheWVyIiwiYWRkTGF5ZXIiLCJpZCIsInNvdXJjZSIsImxheW91dCIsInZpc2liaWxpdHkiLCJwYWludCIsImdldFN0eWxlIiwiY29uc29sZSIsIndhcm4iLCJsb2FkZWQiLCJtYXBTdGF0ZUVycm9yIiwicmVtb3ZlTGF5ZXIiLCJsYXllckVycm9yIiwicmVtb3ZlU291cmNlIiwic291cmNlRXJyb3IiLCJmZXRjaExheWVycyIsImJvdW5kaW5nQm94IiwiYmJveCIsImdlb21ldHJ5Iiwiam9pbiIsInBhcmFtcyIsInF1ZXJ5UGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwicmV0dXJuR2VvbWV0cnkiLCJxdWVyeVVybCIsInRvU3RyaW5nIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwianNvbiIsIm1hcHBpbmciLCJsZW5ndGgiLCJleGlzdGluZ1NvdXJjZSIsInNldERhdGEiLCJjYXRjaCIsIm1lc3NhZ2UiLCJkaXNwbGF5TmFtZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/DBYDLayerHandler.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/FlightPathDisplay.tsx":
/*!******************************************************!*\
  !*** ./src/app/components/Map/FlightPathDisplay.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"(ssr)/./node_modules/mapbox-gl/dist/mapbox-gl.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _context_FlightPlanContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../context/FlightPlanContext */ \"(ssr)/./src/app/context/FlightPlanContext.tsx\");\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _hooks_useLayers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hooks/useLayers */ \"(ssr)/./src/app/hooks/useLayers.ts\");\n/* harmony import */ var _context_FlightConfigurationContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../context/FlightConfigurationContext */ \"(ssr)/./src/app/context/FlightConfigurationContext.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\nconst FLIGHT_SOURCE_ID = 'flightplan-data';\nconst FLIGHT_LINE_LAYER_ID = 'flightplan-line';\n/**\n * Displays the flight path, start/end markers, and (when re-enabled) the available range marker on the map.\n * @component\n */ const FlightPathDisplay = ()=>{\n    const { flightPlan } = (0,_context_FlightPlanContext__WEBPACK_IMPORTED_MODULE_2__.useFlightPlanContext)();\n    const { map, terrainLoaded } = (0,_context_mapcontext__WEBPACK_IMPORTED_MODULE_3__.useMapContext)();\n    const { addFlightPath } = (0,_hooks_useLayers__WEBPACK_IMPORTED_MODULE_4__.useLayers)();\n    const { config, metrics } = (0,_context_FlightConfigurationContext__WEBPACK_IMPORTED_MODULE_5__.useFlightConfiguration)();\n    const startMarkerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const endMarkerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const availableRangeMarkerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    //  Draw (or redraw) the flightpath & start/end markers\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"FlightPathDisplay.useEffect\": ()=>{\n            if (!map || !terrainLoaded || !flightPlan || !flightPlan.properties?.processed) {\n                return;\n            }\n            //  CLEAN UP any previous flightplan before drawing the new one\n            if (map.getLayer(FLIGHT_LINE_LAYER_ID)) {\n                map.removeLayer(FLIGHT_LINE_LAYER_ID);\n            }\n            if (map.getSource(FLIGHT_SOURCE_ID)) {\n                map.removeSource(FLIGHT_SOURCE_ID);\n            }\n            //  Now invoke your hook to add the new source + layer\n            addFlightPath(flightPlan);\n            try {\n                const coords = flightPlan.features[0].geometry.coordinates;\n                if (coords.length > 0) {\n                    //  Start marker\n                    const [startLon, startLat] = coords[0];\n                    if (startMarkerRef.current) {\n                        startMarkerRef.current.remove();\n                        startMarkerRef.current = null;\n                    }\n                    startMarkerRef.current = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Marker)({\n                        color: '#00FF00',\n                        scale: 1.2\n                    }).setLngLat([\n                        startLon,\n                        startLat\n                    ]).setPopup(new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Popup)({\n                        offset: 25,\n                        className: 'custom-popup'\n                    }).setHTML('<strong style=\"color:black;background:white;padding:4px;\">Start</strong>')).addTo(map);\n                    startMarkerRef.current.togglePopup();\n                    //  End marker\n                    const [endLon, endLat] = coords[coords.length - 1];\n                    if (endMarkerRef.current) {\n                        endMarkerRef.current.remove();\n                        endMarkerRef.current = null;\n                    }\n                    endMarkerRef.current = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Marker)({\n                        color: '#0000FF',\n                        scale: 1.2\n                    }).setLngLat([\n                        endLon,\n                        endLat\n                    ]).setPopup(new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Popup)({\n                        offset: 25,\n                        className: 'custom-popup'\n                    }).setHTML('<strong style=\"color:black;background:white;padding:4px;\">Finish</strong>')).addTo(map);\n                    endMarkerRef.current.togglePopup();\n                }\n            } catch (err) {\n                console.error('Error creating start/end markers:', err);\n            }\n        }\n    }[\"FlightPathDisplay.useEffect\"], [\n        map,\n        terrainLoaded,\n        flightPlan,\n        addFlightPath\n    ]);\n    /*\n   *  Available Range Marker (DISABLED)\n   * This block computes and displays a marker indicating the point where the battery would run out.\n  useEffect(() => {\n    if (!map || !terrainLoaded || !flightPlan || !flightPlan.properties?.processed) {\n      return;\n    }\n    const coords = flightPlan.features[0].geometry.coordinates;\n    const totalDistance = flightPlan.properties.totalDistance;\n    if (!coords.length || !totalDistance) return;\n\n    const dischargeRate = parseFloat(config.dischargeRate);\n    const assumedSpeed = parseFloat(config.assumedSpeed);\n    if (!dischargeRate || !assumedSpeed) return;\n\n    const availableTimeMin = metrics.availableBatteryCapacity / dischargeRate;\n    const availableDistKm = (availableTimeMin / 60) * assumedSpeed;\n\n    //  Remove marker entirely if we can complete the route\n    if (availableDistKm >= totalDistance) {\n      if (availableRangeMarkerRef.current) {\n        availableRangeMarkerRef.current.remove();\n        availableRangeMarkerRef.current = null;\n      }\n      return;\n    }\n\n    //  Otherwise place/update a red marker at the cutoff point\n    const line = turf.lineString(coords.map(c => [c[0], c[1]] as [number, number]));\n    const cutoffPt = turf.along(line, availableDistKm, { units: 'kilometers' });\n    const [lng, lat] = cutoffPt.geometry.coordinates as [number, number];\n\n    if (availableRangeMarkerRef.current) {\n      availableRangeMarkerRef.current.setLngLat([lng, lat]);\n    } else {\n      availableRangeMarkerRef.current = new mapboxgl.Marker({ color: 'red' })\n        .setLngLat([lng, lat])\n        .setPopup(new mapboxgl.Popup({ closeButton: false })\n          .setHTML('<strong style=\"color:black;background:white;padding:4px;\">Available Range Limit</strong>'))\n        .addTo(map);\n      availableRangeMarkerRef.current.togglePopup();\n    }\n  }, [map, terrainLoaded, flightPlan, config, metrics]);\n  */ (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"FlightPathDisplay.useEffect\": ()=>{\n            // Capture the current ref values for cleanup\n            const startMarker = startMarkerRef.current;\n            const endMarker = endMarkerRef.current;\n            const availableRangeMarker = availableRangeMarkerRef.current;\n            return ({\n                \"FlightPathDisplay.useEffect\": ()=>{\n                    // Use the captured references in cleanup\n                    startMarker?.remove();\n                    endMarker?.remove();\n                    availableRangeMarker?.remove();\n                }\n            })[\"FlightPathDisplay.useEffect\"];\n        }\n    }[\"FlightPathDisplay.useEffect\"], []);\n    return null;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FlightPathDisplay);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL0ZsaWdodFBhdGhEaXNwbGF5LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7NkRBQ2lEO0FBQ2hCO0FBRXNDO0FBQ2Q7QUFDUDtBQUNnQztBQUVsRixNQUFNUSxtQkFBbUI7QUFDekIsTUFBTUMsdUJBQXVCO0FBRTdCOzs7Q0FHQyxHQUNELE1BQU1DLG9CQUE4QjtJQUNsQyxNQUFNLEVBQUVDLFVBQVUsRUFBRSxHQUFHUCxnRkFBb0JBO0lBQzNDLE1BQU0sRUFBRVEsR0FBRyxFQUFFQyxhQUFhLEVBQUUsR0FBR1Isa0VBQWFBO0lBQzVDLE1BQU0sRUFBRVMsYUFBYSxFQUFFLEdBQUdSLDJEQUFTQTtJQUNuQyxNQUFNLEVBQUVTLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUdULDJGQUFzQkE7SUFFbEQsTUFBTVUsaUJBQWlCZiw2Q0FBTUEsQ0FBeUI7SUFDdEQsTUFBTWdCLGVBQWVoQiw2Q0FBTUEsQ0FBeUI7SUFDcEQsTUFBTWlCLDBCQUEwQmpCLDZDQUFNQSxDQUF5QjtJQUUvRCwwREFBMEQ7SUFDMURELGdEQUFTQTt1Q0FBQztZQUNSLElBQUksQ0FBQ1csT0FBTyxDQUFDQyxpQkFBaUIsQ0FBQ0YsY0FBYyxDQUFDQSxXQUFXUyxVQUFVLEVBQUVDLFdBQVc7Z0JBQzlFO1lBQ0Y7WUFFQSxrRUFBa0U7WUFDbEUsSUFBSVQsSUFBSVUsUUFBUSxDQUFDYix1QkFBdUI7Z0JBQ3RDRyxJQUFJVyxXQUFXLENBQUNkO1lBQ2xCO1lBQ0EsSUFBSUcsSUFBSVksU0FBUyxDQUFDaEIsbUJBQW1CO2dCQUNuQ0ksSUFBSWEsWUFBWSxDQUFDakI7WUFDbkI7WUFFQSx3REFBd0Q7WUFDeERNLGNBQWNIO1lBRWQsSUFBSTtnQkFDRixNQUFNZSxTQUFTZixXQUFXZ0IsUUFBUSxDQUFDLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDQyxXQUFXO2dCQUMxRCxJQUFJSCxPQUFPSSxNQUFNLEdBQUcsR0FBRztvQkFDckIsa0JBQWtCO29CQUNsQixNQUFNLENBQUNDLFVBQVVDLFNBQVMsR0FBR04sTUFBTSxDQUFDLEVBQUU7b0JBQ3RDLElBQUlULGVBQWVnQixPQUFPLEVBQUU7d0JBQzFCaEIsZUFBZWdCLE9BQU8sQ0FBQ0MsTUFBTTt3QkFDN0JqQixlQUFlZ0IsT0FBTyxHQUFHO29CQUMzQjtvQkFDQWhCLGVBQWVnQixPQUFPLEdBQUcsSUFBSTlCLHlEQUFlLENBQUM7d0JBQUVpQyxPQUFPO3dCQUFXQyxPQUFPO29CQUFJLEdBQ3pFQyxTQUFTLENBQUM7d0JBQUNQO3dCQUFVQztxQkFBUyxFQUM5Qk8sUUFBUSxDQUFDLElBQUlwQyx3REFBYyxDQUFDO3dCQUFFc0MsUUFBUTt3QkFBSUMsV0FBVztvQkFBZSxHQUNsRUMsT0FBTyxDQUFDLDZFQUNWQyxLQUFLLENBQUNoQztvQkFDVEssZUFBZWdCLE9BQU8sQ0FBQ1ksV0FBVztvQkFFbEMsZ0JBQWdCO29CQUNoQixNQUFNLENBQUNDLFFBQVFDLE9BQU8sR0FBR3JCLE1BQU0sQ0FBQ0EsT0FBT0ksTUFBTSxHQUFHLEVBQUU7b0JBQ2xELElBQUlaLGFBQWFlLE9BQU8sRUFBRTt3QkFDeEJmLGFBQWFlLE9BQU8sQ0FBQ0MsTUFBTTt3QkFDM0JoQixhQUFhZSxPQUFPLEdBQUc7b0JBQ3pCO29CQUNBZixhQUFhZSxPQUFPLEdBQUcsSUFBSTlCLHlEQUFlLENBQUM7d0JBQUVpQyxPQUFPO3dCQUFXQyxPQUFPO29CQUFJLEdBQ3ZFQyxTQUFTLENBQUM7d0JBQUNRO3dCQUFRQztxQkFBTyxFQUMxQlIsUUFBUSxDQUFDLElBQUlwQyx3REFBYyxDQUFDO3dCQUFFc0MsUUFBUTt3QkFBSUMsV0FBVztvQkFBZSxHQUNsRUMsT0FBTyxDQUFDLDhFQUNWQyxLQUFLLENBQUNoQztvQkFDVE0sYUFBYWUsT0FBTyxDQUFDWSxXQUFXO2dCQUNsQztZQUNGLEVBQUUsT0FBT0csS0FBSztnQkFDWkMsUUFBUUMsS0FBSyxDQUFDLHFDQUFxQ0Y7WUFDckQ7UUFDRjtzQ0FBRztRQUFDcEM7UUFBS0M7UUFBZUY7UUFBWUc7S0FBYztJQUVsRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQTJDQSxHQUVGYixnREFBU0E7dUNBQUM7WUFDUiw2Q0FBNkM7WUFDN0MsTUFBTWtELGNBQWNsQyxlQUFlZ0IsT0FBTztZQUMxQyxNQUFNbUIsWUFBWWxDLGFBQWFlLE9BQU87WUFDdEMsTUFBTW9CLHVCQUF1QmxDLHdCQUF3QmMsT0FBTztZQUU1RDsrQ0FBTztvQkFDTCx5Q0FBeUM7b0JBQ3pDa0IsYUFBYWpCO29CQUNia0IsV0FBV2xCO29CQUNYbUIsc0JBQXNCbkI7Z0JBQ3hCOztRQUNGO3NDQUFHLEVBQUU7SUFFSCxPQUFPO0FBQ1Q7QUFFQSxpRUFBZXhCLGlCQUFpQkEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvY29tcG9uZW50cy9NYXAvRmxpZ2h0UGF0aERpc3BsYXkudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBtYXBib3hnbCBmcm9tICdtYXBib3gtZ2wnO1xuaW1wb3J0ICogYXMgdHVyZiBmcm9tICdAdHVyZi90dXJmJztcbmltcG9ydCB7IHVzZUZsaWdodFBsYW5Db250ZXh0IH0gZnJvbSAnLi4vLi4vY29udGV4dC9GbGlnaHRQbGFuQ29udGV4dCc7XG5pbXBvcnQgeyB1c2VNYXBDb250ZXh0IH0gZnJvbSAnLi4vLi4vY29udGV4dC9tYXBjb250ZXh0JztcbmltcG9ydCB7IHVzZUxheWVycyB9IGZyb20gJy4uLy4uL2hvb2tzL3VzZUxheWVycyc7XG5pbXBvcnQgeyB1c2VGbGlnaHRDb25maWd1cmF0aW9uIH0gZnJvbSAnLi4vLi4vY29udGV4dC9GbGlnaHRDb25maWd1cmF0aW9uQ29udGV4dCc7XG5cbmNvbnN0IEZMSUdIVF9TT1VSQ0VfSUQgPSAnZmxpZ2h0cGxhbi1kYXRhJztcbmNvbnN0IEZMSUdIVF9MSU5FX0xBWUVSX0lEID0gJ2ZsaWdodHBsYW4tbGluZSc7XG5cbi8qKlxuICogRGlzcGxheXMgdGhlIGZsaWdodCBwYXRoLCBzdGFydC9lbmQgbWFya2VycywgYW5kICh3aGVuIHJlLWVuYWJsZWQpIHRoZSBhdmFpbGFibGUgcmFuZ2UgbWFya2VyIG9uIHRoZSBtYXAuXG4gKiBAY29tcG9uZW50XG4gKi9cbmNvbnN0IEZsaWdodFBhdGhEaXNwbGF5OiBSZWFjdC5GQyA9ICgpID0+IHtcbiAgY29uc3QgeyBmbGlnaHRQbGFuIH0gPSB1c2VGbGlnaHRQbGFuQ29udGV4dCgpO1xuICBjb25zdCB7IG1hcCwgdGVycmFpbkxvYWRlZCB9ID0gdXNlTWFwQ29udGV4dCgpO1xuICBjb25zdCB7IGFkZEZsaWdodFBhdGggfSA9IHVzZUxheWVycygpO1xuICBjb25zdCB7IGNvbmZpZywgbWV0cmljcyB9ID0gdXNlRmxpZ2h0Q29uZmlndXJhdGlvbigpO1xuXG4gIGNvbnN0IHN0YXJ0TWFya2VyUmVmID0gdXNlUmVmPG1hcGJveGdsLk1hcmtlciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBlbmRNYXJrZXJSZWYgPSB1c2VSZWY8bWFwYm94Z2wuTWFya2VyIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGF2YWlsYWJsZVJhbmdlTWFya2VyUmVmID0gdXNlUmVmPG1hcGJveGdsLk1hcmtlciB8IG51bGw+KG51bGwpO1xuXG4gIC8vIOKAlOKAlCBEcmF3IChvciByZWRyYXcpIHRoZSBmbGlnaHTigJBwYXRoICYgc3RhcnQvZW5kIG1hcmtlcnNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW1hcCB8fCAhdGVycmFpbkxvYWRlZCB8fCAhZmxpZ2h0UGxhbiB8fCAhZmxpZ2h0UGxhbi5wcm9wZXJ0aWVzPy5wcm9jZXNzZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDigJTigJQgQ0xFQU4gVVAgYW55IHByZXZpb3VzIGZsaWdodOKAkHBsYW4gYmVmb3JlIGRyYXdpbmcgdGhlIG5ldyBvbmVcbiAgICBpZiAobWFwLmdldExheWVyKEZMSUdIVF9MSU5FX0xBWUVSX0lEKSkge1xuICAgICAgbWFwLnJlbW92ZUxheWVyKEZMSUdIVF9MSU5FX0xBWUVSX0lEKTtcbiAgICB9XG4gICAgaWYgKG1hcC5nZXRTb3VyY2UoRkxJR0hUX1NPVVJDRV9JRCkpIHtcbiAgICAgIG1hcC5yZW1vdmVTb3VyY2UoRkxJR0hUX1NPVVJDRV9JRCk7XG4gICAgfVxuXG4gICAgLy8g4oCU4oCUIE5vdyBpbnZva2UgeW91ciBob29rIHRvIGFkZCB0aGUgbmV3IHNvdXJjZSArIGxheWVyXG4gICAgYWRkRmxpZ2h0UGF0aChmbGlnaHRQbGFuKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb29yZHMgPSBmbGlnaHRQbGFuLmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICAgICAgaWYgKGNvb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIOKAlOKAlCBTdGFydCBtYXJrZXJcbiAgICAgICAgY29uc3QgW3N0YXJ0TG9uLCBzdGFydExhdF0gPSBjb29yZHNbMF07XG4gICAgICAgIGlmIChzdGFydE1hcmtlclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgc3RhcnRNYXJrZXJSZWYuY3VycmVudC5yZW1vdmUoKTtcbiAgICAgICAgICBzdGFydE1hcmtlclJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBzdGFydE1hcmtlclJlZi5jdXJyZW50ID0gbmV3IG1hcGJveGdsLk1hcmtlcih7IGNvbG9yOiAnIzAwRkYwMCcsIHNjYWxlOiAxLjIgfSlcbiAgICAgICAgICAuc2V0TG5nTGF0KFtzdGFydExvbiwgc3RhcnRMYXRdKVxuICAgICAgICAgIC5zZXRQb3B1cChuZXcgbWFwYm94Z2wuUG9wdXAoeyBvZmZzZXQ6IDI1LCBjbGFzc05hbWU6ICdjdXN0b20tcG9wdXAnIH0pXG4gICAgICAgICAgICAuc2V0SFRNTCgnPHN0cm9uZyBzdHlsZT1cImNvbG9yOmJsYWNrO2JhY2tncm91bmQ6d2hpdGU7cGFkZGluZzo0cHg7XCI+U3RhcnQ8L3N0cm9uZz4nKSlcbiAgICAgICAgICAuYWRkVG8obWFwKTtcbiAgICAgICAgc3RhcnRNYXJrZXJSZWYuY3VycmVudC50b2dnbGVQb3B1cCgpO1xuXG4gICAgICAgIC8vIOKAlOKAlCBFbmQgbWFya2VyXG4gICAgICAgIGNvbnN0IFtlbmRMb24sIGVuZExhdF0gPSBjb29yZHNbY29vcmRzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoZW5kTWFya2VyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBlbmRNYXJrZXJSZWYuY3VycmVudC5yZW1vdmUoKTtcbiAgICAgICAgICBlbmRNYXJrZXJSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZW5kTWFya2VyUmVmLmN1cnJlbnQgPSBuZXcgbWFwYm94Z2wuTWFya2VyKHsgY29sb3I6ICcjMDAwMEZGJywgc2NhbGU6IDEuMiB9KVxuICAgICAgICAgIC5zZXRMbmdMYXQoW2VuZExvbiwgZW5kTGF0XSlcbiAgICAgICAgICAuc2V0UG9wdXAobmV3IG1hcGJveGdsLlBvcHVwKHsgb2Zmc2V0OiAyNSwgY2xhc3NOYW1lOiAnY3VzdG9tLXBvcHVwJyB9KVxuICAgICAgICAgICAgLnNldEhUTUwoJzxzdHJvbmcgc3R5bGU9XCJjb2xvcjpibGFjaztiYWNrZ3JvdW5kOndoaXRlO3BhZGRpbmc6NHB4O1wiPkZpbmlzaDwvc3Ryb25nPicpKVxuICAgICAgICAgIC5hZGRUbyhtYXApO1xuICAgICAgICBlbmRNYXJrZXJSZWYuY3VycmVudC50b2dnbGVQb3B1cCgpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgc3RhcnQvZW5kIG1hcmtlcnM6JywgZXJyKTtcbiAgICB9XG4gIH0sIFttYXAsIHRlcnJhaW5Mb2FkZWQsIGZsaWdodFBsYW4sIGFkZEZsaWdodFBhdGhdKTtcblxuICAvKlxuICAgKiDigJTigJQgQXZhaWxhYmxlIFJhbmdlIE1hcmtlciAoRElTQUJMRUQpXG4gICAqIFRoaXMgYmxvY2sgY29tcHV0ZXMgYW5kIGRpc3BsYXlzIGEgbWFya2VyIGluZGljYXRpbmcgdGhlIHBvaW50IHdoZXJlIHRoZSBiYXR0ZXJ5IHdvdWxkIHJ1biBvdXQuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFtYXAgfHwgIXRlcnJhaW5Mb2FkZWQgfHwgIWZsaWdodFBsYW4gfHwgIWZsaWdodFBsYW4ucHJvcGVydGllcz8ucHJvY2Vzc2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvb3JkcyA9IGZsaWdodFBsYW4uZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgY29uc3QgdG90YWxEaXN0YW5jZSA9IGZsaWdodFBsYW4ucHJvcGVydGllcy50b3RhbERpc3RhbmNlO1xuICAgIGlmICghY29vcmRzLmxlbmd0aCB8fCAhdG90YWxEaXN0YW5jZSkgcmV0dXJuO1xuXG4gICAgY29uc3QgZGlzY2hhcmdlUmF0ZSA9IHBhcnNlRmxvYXQoY29uZmlnLmRpc2NoYXJnZVJhdGUpO1xuICAgIGNvbnN0IGFzc3VtZWRTcGVlZCA9IHBhcnNlRmxvYXQoY29uZmlnLmFzc3VtZWRTcGVlZCk7XG4gICAgaWYgKCFkaXNjaGFyZ2VSYXRlIHx8ICFhc3N1bWVkU3BlZWQpIHJldHVybjtcblxuICAgIGNvbnN0IGF2YWlsYWJsZVRpbWVNaW4gPSBtZXRyaWNzLmF2YWlsYWJsZUJhdHRlcnlDYXBhY2l0eSAvIGRpc2NoYXJnZVJhdGU7XG4gICAgY29uc3QgYXZhaWxhYmxlRGlzdEttID0gKGF2YWlsYWJsZVRpbWVNaW4gLyA2MCkgKiBhc3N1bWVkU3BlZWQ7XG5cbiAgICAvLyDigJTigJQgUmVtb3ZlIG1hcmtlciBlbnRpcmVseSBpZiB3ZSBjYW4gY29tcGxldGUgdGhlIHJvdXRlXG4gICAgaWYgKGF2YWlsYWJsZURpc3RLbSA+PSB0b3RhbERpc3RhbmNlKSB7XG4gICAgICBpZiAoYXZhaWxhYmxlUmFuZ2VNYXJrZXJSZWYuY3VycmVudCkge1xuICAgICAgICBhdmFpbGFibGVSYW5nZU1hcmtlclJlZi5jdXJyZW50LnJlbW92ZSgpO1xuICAgICAgICBhdmFpbGFibGVSYW5nZU1hcmtlclJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDigJTigJQgT3RoZXJ3aXNlIHBsYWNlL3VwZGF0ZSBhIHJlZCBtYXJrZXIgYXQgdGhlIGN1dG9mZiBwb2ludFxuICAgIGNvbnN0IGxpbmUgPSB0dXJmLmxpbmVTdHJpbmcoY29vcmRzLm1hcChjID0+IFtjWzBdLCBjWzFdXSBhcyBbbnVtYmVyLCBudW1iZXJdKSk7XG4gICAgY29uc3QgY3V0b2ZmUHQgPSB0dXJmLmFsb25nKGxpbmUsIGF2YWlsYWJsZURpc3RLbSwgeyB1bml0czogJ2tpbG9tZXRlcnMnIH0pO1xuICAgIGNvbnN0IFtsbmcsIGxhdF0gPSBjdXRvZmZQdC5nZW9tZXRyeS5jb29yZGluYXRlcyBhcyBbbnVtYmVyLCBudW1iZXJdO1xuXG4gICAgaWYgKGF2YWlsYWJsZVJhbmdlTWFya2VyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGF2YWlsYWJsZVJhbmdlTWFya2VyUmVmLmN1cnJlbnQuc2V0TG5nTGF0KFtsbmcsIGxhdF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhdmFpbGFibGVSYW5nZU1hcmtlclJlZi5jdXJyZW50ID0gbmV3IG1hcGJveGdsLk1hcmtlcih7IGNvbG9yOiAncmVkJyB9KVxuICAgICAgICAuc2V0TG5nTGF0KFtsbmcsIGxhdF0pXG4gICAgICAgIC5zZXRQb3B1cChuZXcgbWFwYm94Z2wuUG9wdXAoeyBjbG9zZUJ1dHRvbjogZmFsc2UgfSlcbiAgICAgICAgICAuc2V0SFRNTCgnPHN0cm9uZyBzdHlsZT1cImNvbG9yOmJsYWNrO2JhY2tncm91bmQ6d2hpdGU7cGFkZGluZzo0cHg7XCI+QXZhaWxhYmxlIFJhbmdlIExpbWl0PC9zdHJvbmc+JykpXG4gICAgICAgIC5hZGRUbyhtYXApO1xuICAgICAgYXZhaWxhYmxlUmFuZ2VNYXJrZXJSZWYuY3VycmVudC50b2dnbGVQb3B1cCgpO1xuICAgIH1cbiAgfSwgW21hcCwgdGVycmFpbkxvYWRlZCwgZmxpZ2h0UGxhbiwgY29uZmlnLCBtZXRyaWNzXSk7XG4gICovXG5cbnVzZUVmZmVjdCgoKSA9PiB7XG4gIC8vIENhcHR1cmUgdGhlIGN1cnJlbnQgcmVmIHZhbHVlcyBmb3IgY2xlYW51cFxuICBjb25zdCBzdGFydE1hcmtlciA9IHN0YXJ0TWFya2VyUmVmLmN1cnJlbnQ7XG4gIGNvbnN0IGVuZE1hcmtlciA9IGVuZE1hcmtlclJlZi5jdXJyZW50O1xuICBjb25zdCBhdmFpbGFibGVSYW5nZU1hcmtlciA9IGF2YWlsYWJsZVJhbmdlTWFya2VyUmVmLmN1cnJlbnQ7XG4gIFxuICByZXR1cm4gKCkgPT4ge1xuICAgIC8vIFVzZSB0aGUgY2FwdHVyZWQgcmVmZXJlbmNlcyBpbiBjbGVhbnVwXG4gICAgc3RhcnRNYXJrZXI/LnJlbW92ZSgpO1xuICAgIGVuZE1hcmtlcj8ucmVtb3ZlKCk7XG4gICAgYXZhaWxhYmxlUmFuZ2VNYXJrZXI/LnJlbW92ZSgpO1xuICB9O1xufSwgW10pO1xuXG4gIHJldHVybiBudWxsO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRmxpZ2h0UGF0aERpc3BsYXk7Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlUmVmIiwibWFwYm94Z2wiLCJ1c2VGbGlnaHRQbGFuQ29udGV4dCIsInVzZU1hcENvbnRleHQiLCJ1c2VMYXllcnMiLCJ1c2VGbGlnaHRDb25maWd1cmF0aW9uIiwiRkxJR0hUX1NPVVJDRV9JRCIsIkZMSUdIVF9MSU5FX0xBWUVSX0lEIiwiRmxpZ2h0UGF0aERpc3BsYXkiLCJmbGlnaHRQbGFuIiwibWFwIiwidGVycmFpbkxvYWRlZCIsImFkZEZsaWdodFBhdGgiLCJjb25maWciLCJtZXRyaWNzIiwic3RhcnRNYXJrZXJSZWYiLCJlbmRNYXJrZXJSZWYiLCJhdmFpbGFibGVSYW5nZU1hcmtlclJlZiIsInByb3BlcnRpZXMiLCJwcm9jZXNzZWQiLCJnZXRMYXllciIsInJlbW92ZUxheWVyIiwiZ2V0U291cmNlIiwicmVtb3ZlU291cmNlIiwiY29vcmRzIiwiZmVhdHVyZXMiLCJnZW9tZXRyeSIsImNvb3JkaW5hdGVzIiwibGVuZ3RoIiwic3RhcnRMb24iLCJzdGFydExhdCIsImN1cnJlbnQiLCJyZW1vdmUiLCJNYXJrZXIiLCJjb2xvciIsInNjYWxlIiwic2V0TG5nTGF0Iiwic2V0UG9wdXAiLCJQb3B1cCIsIm9mZnNldCIsImNsYXNzTmFtZSIsInNldEhUTUwiLCJhZGRUbyIsInRvZ2dsZVBvcHVwIiwiZW5kTG9uIiwiZW5kTGF0IiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwic3RhcnRNYXJrZXIiLCJlbmRNYXJrZXIiLCJhdmFpbGFibGVSYW5nZU1hcmtlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/FlightPathDisplay.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/Hooks/useFlightPlanProcessor.tsx":
/*!*****************************************************************!*\
  !*** ./src/app/components/Map/Hooks/useFlightPlanProcessor.tsx ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useFlightPlanProcessor: () => (/* binding */ useFlightPlanProcessor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/helpers/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/distance/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/along/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/length/dist/esm/index.js\");\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _AO_Hooks_useAreaOpsProcessor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../AO/Hooks/useAreaOpsProcessor */ \"(ssr)/./src/app/components/AO/Hooks/useAreaOpsProcessor.ts\");\n/* harmony import */ var _utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/TerrainUtils */ \"(ssr)/./src/app/utils/TerrainUtils.ts\");\n// src/components/Map/Hooks/useFlightPlanProcessor.tsx\n/* __next_internal_client_entry_do_not_use__ useFlightPlanProcessor auto */ \n\n\n\n\n/**\n * Hook to process flight plans, integrating elevation data using direct map queries.\n * Uses a two-stage approach to handle elevation loading race conditions.\n * @returns Functions and state for processing flight plans.\n */ const useFlightPlanProcessor = ()=>{\n    const { map } = (0,_context_mapcontext__WEBPACK_IMPORTED_MODULE_1__.useMapContext)();\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isProcessing, setIsProcessing] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const { generateAOFromFlightPlan } = (0,_AO_Hooks_useAreaOpsProcessor__WEBPACK_IMPORTED_MODULE_2__.useAreaOpsProcessor)();\n    /**\n   * Densifies a terrain-following segment by interpolating points.\n   * Memoized to prevent unnecessary re-creation and maintain stable dependencies.\n   */ const densifyTerrainSegment = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useFlightPlanProcessor.useCallback[densifyTerrainSegment]\": async (segmentCoords, waypoints, elevations)=>{\n            if (!map) throw new Error('Map not initialized');\n            if (segmentCoords.length < 2) return segmentCoords;\n            const coords2D = segmentCoords.map({\n                \"useFlightPlanProcessor.useCallback[densifyTerrainSegment].coords2D\": ([lon, lat])=>[\n                        lon,\n                        lat\n                    ]\n            }[\"useFlightPlanProcessor.useCallback[densifyTerrainSegment].coords2D\"]);\n            const line = _turf_turf__WEBPACK_IMPORTED_MODULE_4__.lineString(coords2D);\n            const cumDist = [\n                0\n            ];\n            for(let i = 1; i < segmentCoords.length; i++){\n                cumDist.push(cumDist[i - 1] + _turf_turf__WEBPACK_IMPORTED_MODULE_5__.distance(coords2D[i - 1], coords2D[i], {\n                    units: 'meters'\n                }));\n            }\n            const totalLen = cumDist[cumDist.length - 1];\n            const step = 10; // 10 meter steps\n            const densified = [];\n            const points = [];\n            for(let d = 0; d <= totalLen; d += step){\n                const pt = _turf_turf__WEBPACK_IMPORTED_MODULE_6__.along(line, d, {\n                    units: 'meters'\n                });\n                points.push(pt.geometry.coordinates);\n            }\n            // Clear cache to avoid stale values\n            (0,_utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_3__.clearElevationCache)();\n            // Preload tiles\n            await (0,_utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_3__.preloadTiles)(map, points);\n            // Use dynamic test points\n            await (0,_utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_3__.ensureDEMLoaded)(map, points.slice(0, 3));\n            const interpElevations = await (0,_utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_3__.getReliableTerrainElevations)(map, points);\n            // Log elevations for debugging\n            console.log(`[${new Date().toISOString()}] [FlightPlanProcessor] Interpolated elevations:`, interpElevations);\n            // Add terrain and waypoint altitude\n            for(let i = 0; i < points.length; i++){\n                const [lon, lat] = points[i];\n                const elev = interpElevations[i];\n                // Interpolate waypoint altitude\n                let waypointAlt = waypoints[0].originalAltitude;\n                if (waypoints.length > 1) {\n                    const d = i * step;\n                    const segmentIdx = cumDist.findIndex({\n                        \"useFlightPlanProcessor.useCallback[densifyTerrainSegment]\": (cd)=>cd > d\n                    }[\"useFlightPlanProcessor.useCallback[densifyTerrainSegment]\"]) - 1;\n                    const idx = Math.max(0, segmentIdx);\n                    const nextIdx = Math.min(waypoints.length - 1, idx + 1);\n                    if (idx === nextIdx) {\n                        waypointAlt = waypoints[idx].originalAltitude;\n                    } else {\n                        const segStart = cumDist[idx];\n                        const segEnd = cumDist[nextIdx];\n                        const ratio = (d - segStart) / (segEnd - segStart);\n                        waypointAlt = waypoints[idx].originalAltitude + ratio * (waypoints[nextIdx].originalAltitude - waypoints[idx].originalAltitude);\n                    }\n                }\n                densified.push([\n                    lon,\n                    lat,\n                    elev + waypointAlt\n                ]);\n            }\n            return densified;\n        }\n    }[\"useFlightPlanProcessor.useCallback[densifyTerrainSegment]\"], [\n        map\n    ]);\n    /**\n * Updates a flight plan with real terrain elevations\n */ const updateFlightPlanElevations = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useFlightPlanProcessor.useCallback[updateFlightPlanElevations]\": async (plan)=>{\n            if (!map) throw new Error('Map not initialized');\n            console.log(`[${new Date().toISOString()}] [FlightPlanProcessor] Updating flight plan with real elevations...`);\n            const updatedPlan = structuredClone(plan);\n            const coordinates = updatedPlan.features[0].geometry.coordinates;\n            const waypoints = updatedPlan.features[0].properties.waypoints;\n            // Extract 2D coordinates for all points\n            const coords2D = coordinates.map({\n                \"useFlightPlanProcessor.useCallback[updateFlightPlanElevations].coords2D\": (coord)=>[\n                        coord[0],\n                        coord[1]\n                    ]\n            }[\"useFlightPlanProcessor.useCallback[updateFlightPlanElevations].coords2D\"]);\n            // Get home position\n            const homeLngLat = [\n                updatedPlan.properties.homePosition.longitude,\n                updatedPlan.properties.homePosition.latitude\n            ];\n            const allCoords = [\n                homeLngLat,\n                ...coords2D\n            ];\n            // Clear cache to avoid stale values\n            (0,_utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_3__.clearElevationCache)();\n            // Preload tiles\n            await (0,_utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_3__.preloadTiles)(map, allCoords);\n            // Use dynamic test points\n            await (0,_utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_3__.ensureDEMLoaded)(map, allCoords.slice(0, 3));\n            const elevations = await (0,_utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_3__.getReliableTerrainElevations)(map, allCoords, {\n                \"useFlightPlanProcessor.useCallback[updateFlightPlanElevations]\": (progress)=>console.log(`Elevation update progress: ${progress}%`)\n            }[\"useFlightPlanProcessor.useCallback[updateFlightPlanElevations]\"]);\n            // Log elevations for debugging\n            console.log(`[${new Date().toISOString()}] [FlightPlanProcessor] Elevations:`, elevations);\n            const homeTerrainElev = elevations[0];\n            console.log(`[${new Date().toISOString()}] [FlightPlanProcessor] Home terrain elevation = ${homeTerrainElev.toFixed(1)}m`);\n            if (homeTerrainElev <= -0.5) {\n                console.warn(`[${new Date().toISOString()}] [FlightPlanProcessor] Invalid home elevation (${homeTerrainElev.toFixed(1)}m), possible DEM query failure`);\n            }\n            const waypointElevations = elevations.slice(1);\n            // Group waypoints by altitude mode\n            const segments = [];\n            let currentSegment = [];\n            waypoints.forEach({\n                \"useFlightPlanProcessor.useCallback[updateFlightPlanElevations]\": (wp, idx)=>{\n                    if (idx >= coordinates.length) return;\n                    const coord = coordinates[idx];\n                    const elevation = waypointElevations[idx];\n                    const item = {\n                        waypoint: wp,\n                        coordinate: coord,\n                        elevation\n                    };\n                    if (currentSegment.length && wp.altitudeMode !== currentSegment[currentSegment.length - 1].waypoint.altitudeMode) {\n                        segments.push(currentSegment);\n                        currentSegment = [\n                            item\n                        ];\n                    } else {\n                        currentSegment.push(item);\n                    }\n                }\n            }[\"useFlightPlanProcessor.useCallback[updateFlightPlanElevations]\"]);\n            if (currentSegment.length) segments.push(currentSegment);\n            console.log(`[${new Date().toISOString()}] [FlightPlanProcessor] Built ${segments.length} segments with real elevations`);\n            const processedCoords = [];\n            const originalCoords = [];\n            // Process each segment\n            for (const segment of segments){\n                const mode = segment[0].waypoint.altitudeMode;\n                if (mode === 'terrain') {\n                    console.log(`[${new Date().toISOString()}] [FlightPlanProcessor] Processing terrain segment with real elevations`);\n                    // For terrain mode, densify the segment\n                    const densified = await densifyTerrainSegment(segment.map({\n                        \"useFlightPlanProcessor.useCallback[updateFlightPlanElevations]\": (item)=>item.coordinate\n                    }[\"useFlightPlanProcessor.useCallback[updateFlightPlanElevations]\"]), segment.map({\n                        \"useFlightPlanProcessor.useCallback[updateFlightPlanElevations]\": (item)=>item.waypoint\n                    }[\"useFlightPlanProcessor.useCallback[updateFlightPlanElevations]\"]), segment.map({\n                        \"useFlightPlanProcessor.useCallback[updateFlightPlanElevations]\": (item)=>item.elevation\n                    }[\"useFlightPlanProcessor.useCallback[updateFlightPlanElevations]\"]));\n                    processedCoords.push(...densified);\n                    // Original coordinates just need the elevation added\n                    for (const { waypoint, coordinate, elevation } of segment){\n                        const alt = elevation + waypoint.originalAltitude;\n                        originalCoords.push([\n                            coordinate[0],\n                            coordinate[1],\n                            alt\n                        ]);\n                        console.log(`[${new Date().toISOString()}] [FlightPlanProcessor] Original point [${coordinate[0]}, ${coordinate[1]}] alt=${alt.toFixed(1)}`);\n                    }\n                } else if (mode === 'relative') {\n                    console.log(`[${new Date().toISOString()}] [FlightPlanProcessor] Processing relative segment with real elevations`);\n                    // For relative mode, add terrain elevation to waypoint altitude\n                    for (const { waypoint, coordinate, elevation } of segment){\n                        const alt = elevation + waypoint.originalAltitude;\n                        processedCoords.push([\n                            coordinate[0],\n                            coordinate[1],\n                            alt\n                        ]);\n                        originalCoords.push([\n                            coordinate[0],\n                            coordinate[1],\n                            alt\n                        ]);\n                    }\n                } else {\n                    console.log(`[${new Date().toISOString()}] [FlightPlanProcessor] Processing absolute segment`);\n                    // For absolute mode, just use the waypoint altitude\n                    for (const { waypoint, coordinate } of segment){\n                        const alt = waypoint.originalAltitude;\n                        processedCoords.push([\n                            coordinate[0],\n                            coordinate[1],\n                            alt\n                        ]);\n                        originalCoords.push([\n                            coordinate[0],\n                            coordinate[1],\n                            alt\n                        ]);\n                    }\n                }\n            }\n            // We'll keep the same distances from the placeholder version\n            const waypointDistances = plan.waypointDistances || [];\n            const originalWaypointDistances = plan.originalWaypointDistances || [];\n            // Update flight plan\n            updatedPlan.properties.homePosition.altitude = homeTerrainElev + (waypoints[0]?.originalAltitude || 0);\n            updatedPlan.properties.processed = true;\n            updatedPlan.properties.placeholder = false;\n            updatedPlan.features[0].geometry.coordinates = processedCoords;\n            updatedPlan.features[0].properties.originalCoordinates = originalCoords;\n            updatedPlan.waypointDistances = waypointDistances;\n            updatedPlan.originalWaypointDistances = originalWaypointDistances;\n            return updatedPlan;\n        }\n    }[\"useFlightPlanProcessor.useCallback[updateFlightPlanElevations]\"], [\n        map,\n        densifyTerrainSegment\n    ]);\n    /**\n   * Processes a flight plan by resolving altitudes with terrain data.\n   * Uses a two-stage approach to handle DEM loading race conditions.\n   * @param flightPlan - The flight plan data to process.\n   * @returns The processed flight plan with updated coordinates.\n   */ const processFlightPlan = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useFlightPlanProcessor.useCallback[processFlightPlan]\": async (flightPlan)=>{\n            if (!map) {\n                console.error('processFlightPlan: Map not initialized');\n                throw new Error('Map not initialized');\n            }\n            if (flightPlan.properties?.processed) {\n                return flightPlan;\n            }\n            console.log(`[${new Date().toISOString()}] [FlightPlanProcessor] Starting two-stage flight plan processing`);\n            setIsProcessing(true);\n            setError(null);\n            try {\n                // STAGE 1: Initial load with placeholder elevations\n                console.log(`[${new Date().toISOString()}] [FlightPlanProcessor] STAGE 1 - Initial load with placeholders`);\n                const newPlan = structuredClone(flightPlan);\n                const coordinates = newPlan.features[0].geometry.coordinates;\n                const waypoints = newPlan.features[0].properties.waypoints;\n                // Apply placeholder elevation of 25m for each coordinate\n                // This is a reasonable default for urban areas like Sydney\n                const PLACEHOLDER_ELEVATION = 25;\n                const processedCoords = [];\n                const originalCoords = [];\n                // Process waypoints with placeholder elevations\n                waypoints.forEach({\n                    \"useFlightPlanProcessor.useCallback[processFlightPlan]\": (wp, idx)=>{\n                        if (idx >= coordinates.length) return;\n                        const coord = coordinates[idx];\n                        const [lon, lat, originalAlt] = coord;\n                        let altitude = wp.originalAltitude;\n                        if (wp.altitudeMode === 'terrain' || wp.altitudeMode === 'relative') {\n                            // For terrain/relative modes, add placeholder elevation\n                            altitude = PLACEHOLDER_ELEVATION + originalAlt;\n                        }\n                        processedCoords.push([\n                            lon,\n                            lat,\n                            altitude\n                        ]);\n                        originalCoords.push([\n                            lon,\n                            lat,\n                            altitude\n                        ]);\n                    }\n                }[\"useFlightPlanProcessor.useCallback[processFlightPlan]\"]);\n                // Calculate distances (same as before)\n                let totalDistance = 0;\n                const waypointDistances = [\n                    0\n                ];\n                for(let i = 1; i < processedCoords.length; i++){\n                    const line = _turf_turf__WEBPACK_IMPORTED_MODULE_4__.lineString([\n                        processedCoords[i - 1].slice(0, 2),\n                        processedCoords[i].slice(0, 2)\n                    ]);\n                    totalDistance += _turf_turf__WEBPACK_IMPORTED_MODULE_7__.length(line, {\n                        units: 'kilometers'\n                    });\n                    waypointDistances.push(totalDistance * 1000); // Convert to meters\n                }\n                // Update flight plan with placeholder data\n                newPlan.properties.homePosition.altitude = PLACEHOLDER_ELEVATION + (waypoints[0]?.originalAltitude || 0);\n                newPlan.properties.totalDistance = totalDistance;\n                newPlan.properties.processed = true; // Mark as processed so we don't repeat Stage 1\n                newPlan.properties.placeholder = true; // Mark that this is placeholder data\n                newPlan.features[0].geometry.coordinates = processedCoords;\n                newPlan.features[0].properties.originalCoordinates = originalCoords;\n                newPlan.waypointDistances = waypointDistances;\n                newPlan.originalWaypointDistances = [\n                    ...waypointDistances\n                ];\n                // Generate AO with placeholder data\n                try {\n                    await generateAOFromFlightPlan(newPlan, false);\n                } catch (aoError) {\n                    console.warn(`[${new Date().toISOString()}] [FlightPlanProcessor] Failed to generate AO with placeholder data`, aoError);\n                }\n                // STAGE 2: Update with real elevations in the background\n                console.log(`[${new Date().toISOString()}] [FlightPlanProcessor] STAGE 2 - Starting terrain elevation update`);\n                // Ensure DEM is properly loaded before proceeding\n                await (0,_utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_3__.ensureDEMLoaded)(map);\n                // Now get accurate elevations and update the plan\n                const updatedPlan = await updateFlightPlanElevations(newPlan);\n                // Generate AO with real data\n                try {\n                    await generateAOFromFlightPlan(updatedPlan, false);\n                } catch (aoError) {\n                    console.warn(`[${new Date().toISOString()}] [FlightPlanProcessor] Failed to generate AO with real elevations`, aoError);\n                }\n                console.log(`[${new Date().toISOString()}] [FlightPlanProcessor] Complete with real elevations`);\n                return updatedPlan;\n            } catch (err) {\n                console.error(`[${new Date().toISOString()}] [FlightPlanProcessor] Error`, err);\n                setError('Failed to process flight plan: ' + (err instanceof Error ? err.message : String(err)));\n                throw err;\n            } finally{\n                setIsProcessing(false);\n            }\n        }\n    }[\"useFlightPlanProcessor.useCallback[processFlightPlan]\"], [\n        map,\n        generateAOFromFlightPlan,\n        updateFlightPlanElevations\n    ]);\n    return {\n        processFlightPlan,\n        generateAOFromFlightPlan,\n        isProcessing,\n        error,\n        setError\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL0hvb2tzL3VzZUZsaWdodFBsYW5Qcm9jZXNzb3IudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxzREFBc0Q7NEVBRVI7QUFDWDtBQUV5QjtBQUNhO0FBS3BDO0FBRXJDOzs7O0NBSUMsR0FDTSxNQUFNUyx5QkFBeUI7SUFDcEMsTUFBTSxFQUFFQyxHQUFHLEVBQUUsR0FBR1Asa0VBQWFBO0lBQzdCLE1BQU0sQ0FBQ1EsT0FBT0MsU0FBUyxHQUFHWCwrQ0FBUUEsQ0FBZ0I7SUFDbEQsTUFBTSxDQUFDWSxjQUFjQyxnQkFBZ0IsR0FBR2IsK0NBQVFBLENBQUM7SUFDakQsTUFBTSxFQUFFYyx3QkFBd0IsRUFBRSxHQUFHWCxrRkFBbUJBO0lBR3hEOzs7R0FHQyxHQUNELE1BQU1ZLHdCQUF3QmhCLGtEQUFXQTtxRUFBQyxPQUN4Q2lCLGVBQ0FDLFdBQ0FDO1lBRUEsSUFBSSxDQUFDVCxLQUFLLE1BQU0sSUFBSVUsTUFBTTtZQUMxQixJQUFJSCxjQUFjSSxNQUFNLEdBQUcsR0FBRyxPQUFPSjtZQUVyQyxNQUFNSyxXQUFXTCxjQUFjUCxHQUFHO3NGQUFDLENBQUMsQ0FBQ2EsS0FBS0MsSUFBSSxHQUFLO3dCQUFDRDt3QkFBS0M7cUJBQUk7O1lBQzdELE1BQU1DLE9BQU92QixrREFBZSxDQUFDb0I7WUFDN0IsTUFBTUssVUFBb0I7Z0JBQUM7YUFBRTtZQUU3QixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSVgsY0FBY0ksTUFBTSxFQUFFTyxJQUFLO2dCQUM3Q0QsUUFBUUUsSUFBSSxDQUFDRixPQUFPLENBQUNDLElBQUksRUFBRSxHQUFHMUIsZ0RBQWEsQ0FBQ29CLFFBQVEsQ0FBQ00sSUFBSSxFQUFFLEVBQUVOLFFBQVEsQ0FBQ00sRUFBRSxFQUFFO29CQUFFRyxPQUFPO2dCQUFTO1lBQzlGO1lBRUEsTUFBTUMsV0FBV0wsT0FBTyxDQUFDQSxRQUFRTixNQUFNLEdBQUcsRUFBRTtZQUM1QyxNQUFN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LGdCQUFnQjtZQUNsQjtRQUNGO2dFQUFHO1FBQUNKO1FBQUtLO1FBQTBCOEM7S0FBNEI7SUFFL0QsT0FBTztRQUNMcUM7UUFDQW5GO1FBQ0FGO1FBQ0FGO1FBQ0FDO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9jb21wb25lbnRzL01hcC9Ib29rcy91c2VGbGlnaHRQbGFuUHJvY2Vzc29yLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tcG9uZW50cy9NYXAvSG9va3MvdXNlRmxpZ2h0UGxhblByb2Nlc3Nvci50c3hcblwidXNlIGNsaWVudFwiO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgdHVyZiBmcm9tICdAdHVyZi90dXJmJztcbmltcG9ydCB7IEZsaWdodFBsYW5EYXRhLCBXYXlwb2ludERhdGEgfSBmcm9tICcuLi8uLi8uLi9jb250ZXh0L0ZsaWdodFBsYW5Db250ZXh0JztcbmltcG9ydCB7IHVzZU1hcENvbnRleHQgfSBmcm9tICcuLi8uLi8uLi9jb250ZXh0L21hcGNvbnRleHQnO1xuaW1wb3J0IHsgdXNlQXJlYU9wc1Byb2Nlc3NvciB9IGZyb20gJy4uLy4uL0FPL0hvb2tzL3VzZUFyZWFPcHNQcm9jZXNzb3InO1xuaW1wb3J0IHsgXG4gIGdldFJlbGlhYmxlVGVycmFpbkVsZXZhdGlvbnMsIFxuICBlbnN1cmVERU1Mb2FkZWQsIGNsZWFyRWxldmF0aW9uQ2FjaGUsXG4gIHByZWxvYWRUaWxlcyxcbn0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvVGVycmFpblV0aWxzJztcblxuLyoqXG4gKiBIb29rIHRvIHByb2Nlc3MgZmxpZ2h0IHBsYW5zLCBpbnRlZ3JhdGluZyBlbGV2YXRpb24gZGF0YSB1c2luZyBkaXJlY3QgbWFwIHF1ZXJpZXMuXG4gKiBVc2VzIGEgdHdvLXN0YWdlIGFwcHJvYWNoIHRvIGhhbmRsZSBlbGV2YXRpb24gbG9hZGluZyByYWNlIGNvbmRpdGlvbnMuXG4gKiBAcmV0dXJucyBGdW5jdGlvbnMgYW5kIHN0YXRlIGZvciBwcm9jZXNzaW5nIGZsaWdodCBwbGFucy5cbiAqL1xuZXhwb3J0IGNvbnN0IHVzZUZsaWdodFBsYW5Qcm9jZXNzb3IgPSAoKSA9PiB7XG4gIGNvbnN0IHsgbWFwIH0gPSB1c2VNYXBDb250ZXh0KCk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc1Byb2Nlc3NpbmcsIHNldElzUHJvY2Vzc2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHsgZ2VuZXJhdGVBT0Zyb21GbGlnaHRQbGFuIH0gPSB1c2VBcmVhT3BzUHJvY2Vzc29yKCk7XG5cblxuICAvKipcbiAgICogRGVuc2lmaWVzIGEgdGVycmFpbi1mb2xsb3dpbmcgc2VnbWVudCBieSBpbnRlcnBvbGF0aW5nIHBvaW50cy5cbiAgICogTWVtb2l6ZWQgdG8gcHJldmVudCB1bm5lY2Vzc2FyeSByZS1jcmVhdGlvbiBhbmQgbWFpbnRhaW4gc3RhYmxlIGRlcGVuZGVuY2llcy5cbiAgICovXG4gIGNvbnN0IGRlbnNpZnlUZXJyYWluU2VnbWVudCA9IHVzZUNhbGxiYWNrKGFzeW5jIChcbiAgICBzZWdtZW50Q29vcmRzOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSxcbiAgICB3YXlwb2ludHM6IFdheXBvaW50RGF0YVtdLFxuICAgIGVsZXZhdGlvbnM6IG51bWJlcltdXG4gICk6IFByb21pc2U8W251bWJlciwgbnVtYmVyLCBudW1iZXJdW10+ID0+IHtcbiAgICBpZiAoIW1hcCkgdGhyb3cgbmV3IEVycm9yKCdNYXAgbm90IGluaXRpYWxpemVkJyk7XG4gICAgaWYgKHNlZ21lbnRDb29yZHMubGVuZ3RoIDwgMikgcmV0dXJuIHNlZ21lbnRDb29yZHM7XG4gICAgXG4gICAgY29uc3QgY29vcmRzMkQgPSBzZWdtZW50Q29vcmRzLm1hcCgoW2xvbiwgbGF0XSkgPT4gW2xvbiwgbGF0XSk7XG4gICAgY29uc3QgbGluZSA9IHR1cmYubGluZVN0cmluZyhjb29yZHMyRCk7XG4gICAgY29uc3QgY3VtRGlzdDogbnVtYmVyW10gPSBbMF07XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzZWdtZW50Q29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjdW1EaXN0LnB1c2goY3VtRGlzdFtpIC0gMV0gKyB0dXJmLmRpc3RhbmNlKGNvb3JkczJEW2kgLSAxXSwgY29vcmRzMkRbaV0sIHsgdW5pdHM6ICdtZXRlcnMnIH0pKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdG90YWxMZW4gPSBjdW1EaXN0W2N1bURpc3QubGVuZ3RoIC0gMV07XG4gICAgY29uc3Qgc3RlcCA9IDEwOyAvLyAxMCBtZXRlciBzdGVwc1xuICAgIGNvbnN0IGRlbnNpZmllZDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdW10gPSBbXTtcbiAgICBcbiAgICBjb25zdCBwb2ludHM6IFtudW1iZXIsIG51bWJlcl1bXSA9IFtdO1xuICAgIGZvciAobGV0IGQgPSAwOyBkIDw9IHRvdGFsTGVuOyBkICs9IHN0ZXApIHtcbiAgICAgIGNvbnN0IHB0ID0gdHVyZi5hbG9uZyhsaW5lLCBkLCB7IHVuaXRzOiAnbWV0ZXJzJyB9KTtcbiAgICAgIHBvaW50cy5wdXNoKHB0Lmdlb21ldHJ5LmNvb3JkaW5hdGVzIGFzIFtudW1iZXIsIG51bWJlcl0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhciBjYWNoZSB0byBhdm9pZCBzdGFsZSB2YWx1ZXNcbiAgICBjbGVhckVsZXZhdGlvbkNhY2hlKCk7XG4gICAgXG4gICAgLy8gUHJlbG9hZCB0aWxlc1xuICAgIGF3YWl0IHByZWxvYWRUaWxlcyhtYXAsIHBvaW50cyk7XG4gICAgXG4gICAgLy8gVXNlIGR5bmFtaWMgdGVzdCBwb2ludHNcbiAgICBhd2FpdCBlbnN1cmVERU1Mb2FkZWQobWFwLCBwb2ludHMuc2xpY2UoMCwgMykpO1xuICAgIFxuICAgIGNvbnN0IGludGVycEVsZXZhdGlvbnMgPSBhd2FpdCBnZXRSZWxpYWJsZVRlcnJhaW5FbGV2YXRpb25zKG1hcCwgcG9pbnRzKTtcbiAgICBcbiAgICAvLyBMb2cgZWxldmF0aW9ucyBmb3IgZGVidWdnaW5nXG4gICAgY29uc29sZS5sb2coYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtGbGlnaHRQbGFuUHJvY2Vzc29yXSBJbnRlcnBvbGF0ZWQgZWxldmF0aW9uczpgLCBpbnRlcnBFbGV2YXRpb25zKTtcbiAgICBcbiAgICAvLyBBZGQgdGVycmFpbiBhbmQgd2F5cG9pbnQgYWx0aXR1ZGVcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgW2xvbiwgbGF0XSA9IHBvaW50c1tpXTtcbiAgICAgIGNvbnN0IGVsZXYgPSBpbnRlcnBFbGV2YXRpb25zW2ldO1xuICAgICAgXG4gICAgICAvLyBJbnRlcnBvbGF0ZSB3YXlwb2ludCBhbHRpdHVkZVxuICAgICAgbGV0IHdheXBvaW50QWx0ID0gd2F5cG9pbnRzWzBdLm9yaWdpbmFsQWx0aXR1ZGU7XG4gICAgICBpZiAod2F5cG9pbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgY29uc3QgZCA9IGkgKiBzdGVwO1xuICAgICAgICBjb25zdCBzZWdtZW50SWR4ID0gY3VtRGlzdC5maW5kSW5kZXgoY2QgPT4gY2QgPiBkKSAtIDE7XG4gICAgICAgIGNvbnN0IGlkeCA9IE1hdGgubWF4KDAsIHNlZ21lbnRJZHgpO1xuICAgICAgICBjb25zdCBuZXh0SWR4ID0gTWF0aC5taW4od2F5cG9pbnRzLmxlbmd0aCAtIDEsIGlkeCArIDEpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGlkeCA9PT0gbmV4dElkeCkge1xuICAgICAgICAgIHdheXBvaW50QWx0ID0gd2F5cG9pbnRzW2lkeF0ub3JpZ2luYWxBbHRpdHVkZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBzZWdTdGFydCA9IGN1bURpc3RbaWR4XTtcbiAgICAgICAgICBjb25zdCBzZWdFbmQgPSBjdW1EaXN0W25leHRJZHhdO1xuICAgICAgICAgIGNvbnN0IHJhdGlvID0gKGQgLSBzZWdTdGFydCkgLyAoc2VnRW5kIC0gc2VnU3RhcnQpO1xuICAgICAgICAgIHdheXBvaW50QWx0ID0gd2F5cG9pbnRzW2lkeF0ub3JpZ2luYWxBbHRpdHVkZSArIFxuICAgICAgICAgICAgcmF0aW8gKiAod2F5cG9pbnRzW25leHRJZHhdLm9yaWdpbmFsQWx0aXR1ZGUgLSB3YXlwb2ludHNbaWR4XS5vcmlnaW5hbEFsdGl0dWRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBkZW5zaWZpZWQucHVzaChbbG9uLCBsYXQsIGVsZXYgKyB3YXlwb2ludEFsdF0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZGVuc2lmaWVkO1xuICB9LCBbbWFwXSk7XG5cbi8qKlxuICogVXBkYXRlcyBhIGZsaWdodCBwbGFuIHdpdGggcmVhbCB0ZXJyYWluIGVsZXZhdGlvbnNcbiAqL1xuY29uc3QgdXBkYXRlRmxpZ2h0UGxhbkVsZXZhdGlvbnMgPSB1c2VDYWxsYmFjayhhc3luYyAocGxhbjogRmxpZ2h0UGxhbkRhdGEpOiBQcm9taXNlPEZsaWdodFBsYW5EYXRhPiA9PiB7XG4gIGlmICghbWFwKSB0aHJvdyBuZXcgRXJyb3IoJ01hcCBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgXG4gIGNvbnNvbGUubG9nKGBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBbRmxpZ2h0UGxhblByb2Nlc3Nvcl0gVXBkYXRpbmcgZmxpZ2h0IHBsYW4gd2l0aCByZWFsIGVsZXZhdGlvbnMuLi5gKTtcbiAgXG4gIGNvbnN0IHVwZGF0ZWRQbGFuID0gc3RydWN0dXJlZENsb25lKHBsYW4pO1xuICBjb25zdCBjb29yZGluYXRlcyA9IHVwZGF0ZWRQbGFuLmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdO1xuICBjb25zdCB3YXlwb2ludHMgPSB1cGRhdGVkUGxhbi5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLndheXBvaW50cztcbiAgXG4gIC8vIEV4dHJhY3QgMkQgY29vcmRpbmF0ZXMgZm9yIGFsbCBwb2ludHNcbiAgY29uc3QgY29vcmRzMkQgPSBjb29yZGluYXRlcy5tYXAoY29vcmQgPT4gW2Nvb3JkWzBdLCBjb29yZFsxXV0gYXMgW251bWJlciwgbnVtYmVyXSk7XG4gIFxuICAvLyBHZXQgaG9tZSBwb3NpdGlvblxuICBjb25zdCBob21lTG5nTGF0OiBbbnVtYmVyLCBudW1iZXJdID0gW1xuICAgIHVwZGF0ZWRQbGFuLnByb3BlcnRpZXMuaG9tZVBvc2l0aW9uLmxvbmdpdHVkZSxcbiAgICB1cGRhdGVkUGxhbi5wcm9wZXJ0aWVzLmhvbWVQb3NpdGlvbi5sYXRpdHVkZVxuICBdO1xuICBcbiAgY29uc3QgYWxsQ29vcmRzID0gW2hvbWVMbmdMYXQsIC4uLmNvb3JkczJEXTtcbiAgXG4gIC8vIENsZWFyIGNhY2hlIHRvIGF2b2lkIHN0YWxlIHZhbHVlc1xuICBjbGVhckVsZXZhdGlvbkNhY2hlKCk7XG4gIFxuICAvLyBQcmVsb2FkIHRpbGVzXG4gIGF3YWl0IHByZWxvYWRUaWxlcyhtYXAsIGFsbENvb3Jkcyk7XG4gIFxuICAvLyBVc2UgZHluYW1pYyB0ZXN0IHBvaW50c1xuICBhd2FpdCBlbnN1cmVERU1Mb2FkZWQobWFwLCBhbGxDb29yZHMuc2xpY2UoMCwgMykpO1xuICBcbiAgY29uc3QgZWxldmF0aW9ucyA9IGF3YWl0IGdldFJlbGlhYmxlVGVycmFpbkVsZXZhdGlvbnMobWFwLCBhbGxDb29yZHMsIFxuICAgIChwcm9ncmVzcykgPT4gY29uc29sZS5sb2coYEVsZXZhdGlvbiB1cGRhdGUgcHJvZ3Jlc3M6ICR7cHJvZ3Jlc3N9JWApXG4gICk7XG4gIFxuICAvLyBMb2cgZWxldmF0aW9ucyBmb3IgZGVidWdnaW5nXG4gIGNvbnNvbGUubG9nKGBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBbRmxpZ2h0UGxhblByb2Nlc3Nvcl0gRWxldmF0aW9uczpgLCBlbGV2YXRpb25zKTtcbiAgXG4gIGNvbnN0IGhvbWVUZXJyYWluRWxldiA9IGVsZXZhdGlvbnNbMF07XG4gIGNvbnNvbGUubG9nKGBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBbRmxpZ2h0UGxhblByb2Nlc3Nvcl0gSG9tZSB0ZXJyYWluIGVsZXZhdGlvbiA9ICR7aG9tZVRlcnJhaW5FbGV2LnRvRml4ZWQoMSl9bWApO1xuICBpZiAoaG9tZVRlcnJhaW5FbGV2IDw9IC0wLjUpIHtcbiAgICBjb25zb2xlLndhcm4oYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtGbGlnaHRQbGFuUHJvY2Vzc29yXSBJbnZhbGlkIGhvbWUgZWxldmF0aW9uICgke2hvbWVUZXJyYWluRWxldi50b0ZpeGVkKDEpfW0pLCBwb3NzaWJsZSBERU0gcXVlcnkgZmFpbHVyZWApO1xuICB9XG4gIFxuICBjb25zdCB3YXlwb2ludEVsZXZhdGlvbnMgPSBlbGV2YXRpb25zLnNsaWNlKDEpO1xuICBcbiAgLy8gR3JvdXAgd2F5cG9pbnRzIGJ5IGFsdGl0dWRlIG1vZGVcbiAgY29uc3Qgc2VnbWVudHM6IEFycmF5PEFycmF5PHsgd2F5cG9pbnQ6IFdheXBvaW50RGF0YTsgY29vcmRpbmF0ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdOyBlbGV2YXRpb246IG51bWJlciB9Pj4gPSBbXTtcbiAgbGV0IGN1cnJlbnRTZWdtZW50OiBBcnJheTx7IHdheXBvaW50OiBXYXlwb2ludERhdGE7IGNvb3JkaW5hdGU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTsgZWxldmF0aW9uOiBudW1iZXIgfT4gPSBbXTtcbiAgXG4gIHdheXBvaW50cy5mb3JFYWNoKCh3cCwgaWR4KSA9PiB7XG4gICAgaWYgKGlkeCA+PSBjb29yZGluYXRlcy5sZW5ndGgpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBjb29yZCA9IGNvb3JkaW5hdGVzW2lkeF07XG4gICAgY29uc3QgZWxldmF0aW9uID0gd2F5cG9pbnRFbGV2YXRpb25zW2lkeF07XG4gICAgY29uc3QgaXRlbSA9IHsgd2F5cG9pbnQ6IHdwLCBjb29yZGluYXRlOiBjb29yZCwgZWxldmF0aW9uIH07XG4gICAgXG4gICAgaWYgKGN1cnJlbnRTZWdtZW50Lmxlbmd0aCAmJiBcbiAgICAgICAgd3AuYWx0aXR1ZGVNb2RlICE9PSBjdXJyZW50U2VnbWVudFtjdXJyZW50U2VnbWVudC5sZW5ndGggLSAxXS53YXlwb2ludC5hbHRpdHVkZU1vZGUpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2goY3VycmVudFNlZ21lbnQpO1xuICAgICAgY3VycmVudFNlZ21lbnQgPSBbaXRlbV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRTZWdtZW50LnB1c2goaXRlbSk7XG4gICAgfVxuICB9KTtcbiAgXG4gIGlmIChjdXJyZW50U2VnbWVudC5sZW5ndGgpIHNlZ21lbnRzLnB1c2goY3VycmVudFNlZ21lbnQpO1xuICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0ZsaWdodFBsYW5Qcm9jZXNzb3JdIEJ1aWx0ICR7c2VnbWVudHMubGVuZ3RofSBzZWdtZW50cyB3aXRoIHJlYWwgZWxldmF0aW9uc2ApO1xuICBcbiAgY29uc3QgcHJvY2Vzc2VkQ29vcmRzOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSA9IFtdO1xuICBjb25zdCBvcmlnaW5hbENvb3JkczogW251bWJlciwgbnVtYmVyLCBudW1iZXJdW10gPSBbXTtcbiAgXG4gIC8vIFByb2Nlc3MgZWFjaCBzZWdtZW50XG4gIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuICAgIGNvbnN0IG1vZGUgPSBzZWdtZW50WzBdLndheXBvaW50LmFsdGl0dWRlTW9kZTtcbiAgICBcbiAgICBpZiAobW9kZSA9PT0gJ3RlcnJhaW4nKSB7XG4gICAgICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0ZsaWdodFBsYW5Qcm9jZXNzb3JdIFByb2Nlc3NpbmcgdGVycmFpbiBzZWdtZW50IHdpdGggcmVhbCBlbGV2YXRpb25zYCk7XG4gICAgICBcbiAgICAgIC8vIEZvciB0ZXJyYWluIG1vZGUsIGRlbnNpZnkgdGhlIHNlZ21lbnRcbiAgICAgIGNvbnN0IGRlbnNpZmllZCA9IGF3YWl0IGRlbnNpZnlUZXJyYWluU2VnbWVudChcbiAgICAgICAgc2VnbWVudC5tYXAoaXRlbSA9PiBpdGVtLmNvb3JkaW5hdGUpLFxuICAgICAgICBzZWdtZW50Lm1hcChpdGVtID0+IGl0ZW0ud2F5cG9pbnQpLFxuICAgICAgICBzZWdtZW50Lm1hcChpdGVtID0+IGl0ZW0uZWxldmF0aW9uKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgcHJvY2Vzc2VkQ29vcmRzLnB1c2goLi4uZGVuc2lmaWVkKTtcbiAgICAgIFxuICAgICAgLy8gT3JpZ2luYWwgY29vcmRpbmF0ZXMganVzdCBuZWVkIHRoZSBlbGV2YXRpb24gYWRkZWRcbiAgICAgIGZvciAoY29uc3QgeyB3YXlwb2ludCwgY29vcmRpbmF0ZSwgZWxldmF0aW9uIH0gb2Ygc2VnbWVudCkge1xuICAgICAgICBjb25zdCBhbHQgPSBlbGV2YXRpb24gKyB3YXlwb2ludC5vcmlnaW5hbEFsdGl0dWRlO1xuICAgICAgICBvcmlnaW5hbENvb3Jkcy5wdXNoKFtjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdLCBhbHRdKTtcbiAgICAgICAgY29uc29sZS5sb2coYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtGbGlnaHRQbGFuUHJvY2Vzc29yXSBPcmlnaW5hbCBwb2ludCBbJHtjb29yZGluYXRlWzBdfSwgJHtjb29yZGluYXRlWzFdfV0gYWx0PSR7YWx0LnRvRml4ZWQoMSl9YCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChtb2RlID09PSAncmVsYXRpdmUnKSB7XG4gICAgICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0ZsaWdodFBsYW5Qcm9jZXNzb3JdIFByb2Nlc3NpbmcgcmVsYXRpdmUgc2VnbWVudCB3aXRoIHJlYWwgZWxldmF0aW9uc2ApO1xuICAgICAgXG4gICAgICAvLyBGb3IgcmVsYXRpdmUgbW9kZSwgYWRkIHRlcnJhaW4gZWxldmF0aW9uIHRvIHdheXBvaW50IGFsdGl0dWRlXG4gICAgICBmb3IgKGNvbnN0IHsgd2F5cG9pbnQsIGNvb3JkaW5hdGUsIGVsZXZhdGlvbiB9IG9mIHNlZ21lbnQpIHtcbiAgICAgICAgY29uc3QgYWx0ID0gZWxldmF0aW9uICsgd2F5cG9pbnQub3JpZ2luYWxBbHRpdHVkZTtcbiAgICAgICAgcHJvY2Vzc2VkQ29vcmRzLnB1c2goW2Nvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0sIGFsdF0pO1xuICAgICAgICBvcmlnaW5hbENvb3Jkcy5wdXNoKFtjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdLCBhbHRdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtGbGlnaHRQbGFuUHJvY2Vzc29yXSBQcm9jZXNzaW5nIGFic29sdXRlIHNlZ21lbnRgKTtcbiAgICAgIFxuICAgICAgLy8gRm9yIGFic29sdXRlIG1vZGUsIGp1c3QgdXNlIHRoZSB3YXlwb2ludCBhbHRpdHVkZVxuICAgICAgZm9yIChjb25zdCB7IHdheXBvaW50LCBjb29yZGluYXRlIH0gb2Ygc2VnbWVudCkge1xuICAgICAgICBjb25zdCBhbHQgPSB3YXlwb2ludC5vcmlnaW5hbEFsdGl0dWRlO1xuICAgICAgICBwcm9jZXNzZWRDb29yZHMucHVzaChbY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSwgYWx0XSk7XG4gICAgICAgIG9yaWdpbmFsQ29vcmRzLnB1c2goW2Nvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0sIGFsdF0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgLy8gV2UnbGwga2VlcCB0aGUgc2FtZSBkaXN0YW5jZXMgZnJvbSB0aGUgcGxhY2Vob2xkZXIgdmVyc2lvblxuICBjb25zdCB3YXlwb2ludERpc3RhbmNlcyA9IHBsYW4ud2F5cG9pbnREaXN0YW5jZXMgfHwgW107XG4gIGNvbnN0IG9yaWdpbmFsV2F5cG9pbnREaXN0YW5jZXMgPSBwbGFuLm9yaWdpbmFsV2F5cG9pbnREaXN0YW5jZXMgfHwgW107XG4gIFxuICAvLyBVcGRhdGUgZmxpZ2h0IHBsYW5cbiAgdXBkYXRlZFBsYW4ucHJvcGVydGllcy5ob21lUG9zaXRpb24uYWx0aXR1ZGUgPSBob21lVGVycmFpbkVsZXYgKyBcbiAgICAod2F5cG9pbnRzWzBdPy5vcmlnaW5hbEFsdGl0dWRlIHx8IDApO1xuICBcbiAgdXBkYXRlZFBsYW4ucHJvcGVydGllcy5wcm9jZXNzZWQgPSB0cnVlO1xuICB1cGRhdGVkUGxhbi5wcm9wZXJ0aWVzLnBsYWNlaG9sZGVyID0gZmFsc2U7XG4gIHVwZGF0ZWRQbGFuLmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzID0gcHJvY2Vzc2VkQ29vcmRzO1xuICB1cGRhdGVkUGxhbi5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLm9yaWdpbmFsQ29vcmRpbmF0ZXMgPSBvcmlnaW5hbENvb3JkcztcbiAgdXBkYXRlZFBsYW4ud2F5cG9pbnREaXN0YW5jZXMgPSB3YXlwb2ludERpc3RhbmNlcztcbiAgdXBkYXRlZFBsYW4ub3JpZ2luYWxXYXlwb2ludERpc3RhbmNlcyA9IG9yaWdpbmFsV2F5cG9pbnREaXN0YW5jZXM7XG4gIFxuICByZXR1cm4gdXBkYXRlZFBsYW47XG59LCBbbWFwLCBkZW5zaWZ5VGVycmFpblNlZ21lbnRdKTtcblxuICAvKipcbiAgICogUHJvY2Vzc2VzIGEgZmxpZ2h0IHBsYW4gYnkgcmVzb2x2aW5nIGFsdGl0dWRlcyB3aXRoIHRlcnJhaW4gZGF0YS5cbiAgICogVXNlcyBhIHR3by1zdGFnZSBhcHByb2FjaCB0byBoYW5kbGUgREVNIGxvYWRpbmcgcmFjZSBjb25kaXRpb25zLlxuICAgKiBAcGFyYW0gZmxpZ2h0UGxhbiAtIFRoZSBmbGlnaHQgcGxhbiBkYXRhIHRvIHByb2Nlc3MuXG4gICAqIEByZXR1cm5zIFRoZSBwcm9jZXNzZWQgZmxpZ2h0IHBsYW4gd2l0aCB1cGRhdGVkIGNvb3JkaW5hdGVzLlxuICAgKi9cbiAgY29uc3QgcHJvY2Vzc0ZsaWdodFBsYW4gPSB1c2VDYWxsYmFjayhhc3luYyAoXG4gICAgZmxpZ2h0UGxhbjogRmxpZ2h0UGxhbkRhdGFcbiAgKTogUHJvbWlzZTxGbGlnaHRQbGFuRGF0YT4gPT4ge1xuICAgIGlmICghbWFwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdwcm9jZXNzRmxpZ2h0UGxhbjogTWFwIG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNYXAgbm90IGluaXRpYWxpemVkJyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChmbGlnaHRQbGFuLnByb3BlcnRpZXM/LnByb2Nlc3NlZCkge1xuICAgICAgcmV0dXJuIGZsaWdodFBsYW47XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBbRmxpZ2h0UGxhblByb2Nlc3Nvcl0gU3RhcnRpbmcgdHdvLXN0YWdlIGZsaWdodCBwbGFuIHByb2Nlc3NpbmdgKTtcbiAgICBzZXRJc1Byb2Nlc3NpbmcodHJ1ZSk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIFNUQUdFIDE6IEluaXRpYWwgbG9hZCB3aXRoIHBsYWNlaG9sZGVyIGVsZXZhdGlvbnNcbiAgICAgIGNvbnNvbGUubG9nKGBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBbRmxpZ2h0UGxhblByb2Nlc3Nvcl0gU1RBR0UgMSAtIEluaXRpYWwgbG9hZCB3aXRoIHBsYWNlaG9sZGVyc2ApO1xuICAgICAgY29uc3QgbmV3UGxhbjogRmxpZ2h0UGxhbkRhdGEgPSBzdHJ1Y3R1cmVkQ2xvbmUoZmxpZ2h0UGxhbik7XG4gICAgICBjb25zdCBjb29yZGluYXRlcyA9IG5ld1BsYW4uZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXMgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXJdW107XG4gICAgICBjb25zdCB3YXlwb2ludHMgPSBuZXdQbGFuLmZlYXR1cmVzWzBdLnByb3BlcnRpZXMud2F5cG9pbnRzO1xuICAgICAgXG4gICAgICAvLyBBcHBseSBwbGFjZWhvbGRlciBlbGV2YXRpb24gb2YgMjVtIGZvciBlYWNoIGNvb3JkaW5hdGVcbiAgICAgIC8vIFRoaXMgaXMgYSByZWFzb25hYmxlIGRlZmF1bHQgZm9yIHVyYmFuIGFyZWFzIGxpa2UgU3lkbmV5XG4gICAgICBjb25zdCBQTEFDRUhPTERFUl9FTEVWQVRJT04gPSAyNTtcbiAgICAgIFxuICAgICAgY29uc3QgcHJvY2Vzc2VkQ29vcmRzOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSA9IFtdO1xuICAgICAgY29uc3Qgb3JpZ2luYWxDb29yZHM6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdID0gW107XG4gICAgICBcbiAgICAgIC8vIFByb2Nlc3Mgd2F5cG9pbnRzIHdpdGggcGxhY2Vob2xkZXIgZWxldmF0aW9uc1xuICAgICAgd2F5cG9pbnRzLmZvckVhY2goKHdwLCBpZHgpID0+IHtcbiAgICAgICAgaWYgKGlkeCA+PSBjb29yZGluYXRlcy5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNvb3JkID0gY29vcmRpbmF0ZXNbaWR4XTtcbiAgICAgICAgY29uc3QgW2xvbiwgbGF0LCBvcmlnaW5hbEFsdF0gPSBjb29yZDtcbiAgICAgICAgXG4gICAgICAgIGxldCBhbHRpdHVkZSA9IHdwLm9yaWdpbmFsQWx0aXR1ZGU7XG4gICAgICAgIGlmICh3cC5hbHRpdHVkZU1vZGUgPT09ICd0ZXJyYWluJyB8fCB3cC5hbHRpdHVkZU1vZGUgPT09ICdyZWxhdGl2ZScpIHtcbiAgICAgICAgICAvLyBGb3IgdGVycmFpbi9yZWxhdGl2ZSBtb2RlcywgYWRkIHBsYWNlaG9sZGVyIGVsZXZhdGlvblxuICAgICAgICAgIGFsdGl0dWRlID0gUExBQ0VIT0xERVJfRUxFVkFUSU9OICsgb3JpZ2luYWxBbHQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHByb2Nlc3NlZENvb3Jkcy5wdXNoKFtsb24sIGxhdCwgYWx0aXR1ZGVdKTtcbiAgICAgICAgb3JpZ2luYWxDb29yZHMucHVzaChbbG9uLCBsYXQsIGFsdGl0dWRlXSk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIGRpc3RhbmNlcyAoc2FtZSBhcyBiZWZvcmUpXG4gICAgICBsZXQgdG90YWxEaXN0YW5jZSA9IDA7XG4gICAgICBjb25zdCB3YXlwb2ludERpc3RhbmNlczogbnVtYmVyW10gPSBbMF07XG4gICAgICBcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcHJvY2Vzc2VkQ29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxpbmUgPSB0dXJmLmxpbmVTdHJpbmcoW1xuICAgICAgICAgIHByb2Nlc3NlZENvb3Jkc1tpIC0gMV0uc2xpY2UoMCwgMiksXG4gICAgICAgICAgcHJvY2Vzc2VkQ29vcmRzW2ldLnNsaWNlKDAsIDIpXG4gICAgICAgIF0pO1xuICAgICAgICBcbiAgICAgICAgdG90YWxEaXN0YW5jZSArPSB0dXJmLmxlbmd0aChsaW5lLCB7IHVuaXRzOiAna2lsb21ldGVycycgfSk7XG4gICAgICAgIHdheXBvaW50RGlzdGFuY2VzLnB1c2godG90YWxEaXN0YW5jZSAqIDEwMDApOyAvLyBDb252ZXJ0IHRvIG1ldGVyc1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgZmxpZ2h0IHBsYW4gd2l0aCBwbGFjZWhvbGRlciBkYXRhXG4gICAgICBuZXdQbGFuLnByb3BlcnRpZXMuaG9tZVBvc2l0aW9uLmFsdGl0dWRlID0gUExBQ0VIT0xERVJfRUxFVkFUSU9OICsgXG4gICAgICAgICh3YXlwb2ludHNbMF0/Lm9yaWdpbmFsQWx0aXR1ZGUgfHwgMCk7XG4gICAgICBcbiAgICAgIG5ld1BsYW4ucHJvcGVydGllcy50b3RhbERpc3RhbmNlID0gdG90YWxEaXN0YW5jZTtcbiAgICAgIG5ld1BsYW4ucHJvcGVydGllcy5wcm9jZXNzZWQgPSB0cnVlOyAvLyBNYXJrIGFzIHByb2Nlc3NlZCBzbyB3ZSBkb24ndCByZXBlYXQgU3RhZ2UgMVxuICAgICAgbmV3UGxhbi5wcm9wZXJ0aWVzLnBsYWNlaG9sZGVyID0gdHJ1ZTsgLy8gTWFyayB0aGF0IHRoaXMgaXMgcGxhY2Vob2xkZXIgZGF0YVxuICAgICAgbmV3UGxhbi5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlcyA9IHByb2Nlc3NlZENvb3JkcztcbiAgICAgIG5ld1BsYW4uZmVhdHVyZXNbMF0ucHJvcGVydGllcy5vcmlnaW5hbENvb3JkaW5hdGVzID0gb3JpZ2luYWxDb29yZHM7XG4gICAgICBuZXdQbGFuLndheXBvaW50RGlzdGFuY2VzID0gd2F5cG9pbnREaXN0YW5jZXM7XG4gICAgICBuZXdQbGFuLm9yaWdpbmFsV2F5cG9pbnREaXN0YW5jZXMgPSBbLi4ud2F5cG9pbnREaXN0YW5jZXNdO1xuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSBBTyB3aXRoIHBsYWNlaG9sZGVyIGRhdGFcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGdlbmVyYXRlQU9Gcm9tRmxpZ2h0UGxhbihuZXdQbGFuLCBmYWxzZSk7XG4gICAgICB9IGNhdGNoIChhb0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0ZsaWdodFBsYW5Qcm9jZXNzb3JdIEZhaWxlZCB0byBnZW5lcmF0ZSBBTyB3aXRoIHBsYWNlaG9sZGVyIGRhdGFgLCBhb0Vycm9yKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU1RBR0UgMjogVXBkYXRlIHdpdGggcmVhbCBlbGV2YXRpb25zIGluIHRoZSBiYWNrZ3JvdW5kXG4gICAgICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0ZsaWdodFBsYW5Qcm9jZXNzb3JdIFNUQUdFIDIgLSBTdGFydGluZyB0ZXJyYWluIGVsZXZhdGlvbiB1cGRhdGVgKTtcbiAgICAgIFxuICAgICAgLy8gRW5zdXJlIERFTSBpcyBwcm9wZXJseSBsb2FkZWQgYmVmb3JlIHByb2NlZWRpbmdcbiAgICAgIGF3YWl0IGVuc3VyZURFTUxvYWRlZChtYXApO1xuICAgICAgXG4gICAgICAvLyBOb3cgZ2V0IGFjY3VyYXRlIGVsZXZhdGlvbnMgYW5kIHVwZGF0ZSB0aGUgcGxhblxuICAgICAgY29uc3QgdXBkYXRlZFBsYW4gPSBhd2FpdCB1cGRhdGVGbGlnaHRQbGFuRWxldmF0aW9ucyhuZXdQbGFuKTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgQU8gd2l0aCByZWFsIGRhdGFcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGdlbmVyYXRlQU9Gcm9tRmxpZ2h0UGxhbih1cGRhdGVkUGxhbiwgZmFsc2UpO1xuICAgICAgfSBjYXRjaCAoYW9FcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtGbGlnaHRQbGFuUHJvY2Vzc29yXSBGYWlsZWQgdG8gZ2VuZXJhdGUgQU8gd2l0aCByZWFsIGVsZXZhdGlvbnNgLCBhb0Vycm9yKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtGbGlnaHRQbGFuUHJvY2Vzc29yXSBDb21wbGV0ZSB3aXRoIHJlYWwgZWxldmF0aW9uc2ApO1xuICAgICAgcmV0dXJuIHVwZGF0ZWRQbGFuO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0ZsaWdodFBsYW5Qcm9jZXNzb3JdIEVycm9yYCwgZXJyKTtcbiAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gcHJvY2VzcyBmbGlnaHQgcGxhbjogJyArIChlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogU3RyaW5nKGVycikpKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNQcm9jZXNzaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFttYXAsIGdlbmVyYXRlQU9Gcm9tRmxpZ2h0UGxhbiwgdXBkYXRlRmxpZ2h0UGxhbkVsZXZhdGlvbnMgXSk7XG5cbiAgcmV0dXJuIHsgXG4gICAgcHJvY2Vzc0ZsaWdodFBsYW4sIFxuICAgIGdlbmVyYXRlQU9Gcm9tRmxpZ2h0UGxhbiwgXG4gICAgaXNQcm9jZXNzaW5nLCBcbiAgICBlcnJvciwgXG4gICAgc2V0RXJyb3JcbiAgfTtcbn07Il0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlU3RhdGUiLCJ0dXJmIiwidXNlTWFwQ29udGV4dCIsInVzZUFyZWFPcHNQcm9jZXNzb3IiLCJnZXRSZWxpYWJsZVRlcnJhaW5FbGV2YXRpb25zIiwiZW5zdXJlREVNTG9hZGVkIiwiY2xlYXJFbGV2YXRpb25DYWNoZSIsInByZWxvYWRUaWxlcyIsInVzZUZsaWdodFBsYW5Qcm9jZXNzb3IiLCJtYXAiLCJlcnJvciIsInNldEVycm9yIiwiaXNQcm9jZXNzaW5nIiwic2V0SXNQcm9jZXNzaW5nIiwiZ2VuZXJhdGVBT0Zyb21GbGlnaHRQbGFuIiwiZGVuc2lmeVRlcnJhaW5TZWdtZW50Iiwic2VnbWVudENvb3JkcyIsIndheXBvaW50cyIsImVsZXZhdGlvbnMiLCJFcnJvciIsImxlbmd0aCIsImNvb3JkczJEIiwibG9uIiwibGF0IiwibGluZSIsImxpbmVTdHJpbmciLCJjdW1EaXN0IiwiaSIsInB1c2giLCJkaXN0YW5jZSIsInVuaXRzIiwidG90YWxMZW4iLCJzdGVwIiwiZGVuc2lmaWVkIiwicG9pbnRzIiwiZCIsInB0IiwiYWxvbmciLCJnZW9tZXRyeSIsImNvb3JkaW5hdGVzIiwic2xpY2UiLCJpbnRlcnBFbGV2YXRpb25zIiwiY29uc29sZSIsImxvZyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImVsZXYiLCJ3YXlwb2ludEFsdCIsIm9yaWdpbmFsQWx0aXR1ZGUiLCJzZWdtZW50SWR4IiwiZmluZEluZGV4IiwiY2QiLCJpZHgiLCJNYXRoIiwibWF4IiwibmV4dElkeCIsIm1pbiIsInNlZ1N0YXJ0Iiwic2VnRW5kIiwicmF0aW8iLCJ1cGRhdGVGbGlnaHRQbGFuRWxldmF0aW9ucyIsInBsYW4iLCJ1cGRhdGVkUGxhbiIsInN0cnVjdHVyZWRDbG9uZSIsImZlYXR1cmVzIiwicHJvcGVydGllcyIsImNvb3JkIiwiaG9tZUxuZ0xhdCIsImhvbWVQb3NpdGlvbiIsImxvbmdpdHVkZSIsImxhdGl0dWRlIiwiYWxsQ29vcmRzIiwicHJvZ3Jlc3MiLCJob21lVGVycmFpbkVsZXYiLCJ0b0ZpeGVkIiwid2FybiIsIndheXBvaW50RWxldmF0aW9ucyIsInNlZ21lbnRzIiwiY3VycmVudFNlZ21lbnQiLCJmb3JFYWNoIiwid3AiLCJlbGV2YXRpb24iLCJpdGVtIiwid2F5cG9pbnQiLCJjb29yZGluYXRlIiwiYWx0aXR1ZGVNb2RlIiwicHJvY2Vzc2VkQ29vcmRzIiwib3JpZ2luYWxDb29yZHMiLCJzZWdtZW50IiwibW9kZSIsImFsdCIsIndheXBvaW50RGlzdGFuY2VzIiwib3JpZ2luYWxXYXlwb2ludERpc3RhbmNlcyIsImFsdGl0dWRlIiwicHJvY2Vzc2VkIiwicGxhY2Vob2xkZXIiLCJvcmlnaW5hbENvb3JkaW5hdGVzIiwicHJvY2Vzc0ZsaWdodFBsYW4iLCJmbGlnaHRQbGFuIiwibmV3UGxhbiIsIlBMQUNFSE9MREVSX0VMRVZBVElPTiIsIm9yaWdpbmFsQWx0IiwidG90YWxEaXN0YW5jZSIsImFvRXJyb3IiLCJlcnIiLCJtZXNzYWdlIiwiU3RyaW5nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/Hooks/useFlightPlanProcessor.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/Hooks/useMap.ts":
/*!************************************************!*\
  !*** ./src/app/components/Map/Hooks/useMap.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useMap: () => (/* binding */ useMap)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"(ssr)/./node_modules/mapbox-gl/dist/mapbox-gl.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ useMap auto */ \n\nconst waitForDEM = (map, timeoutMs = 20000)=>{\n    return new Promise((resolve, reject)=>{\n        const timeout = setTimeout(()=>{\n            console.warn(\" DEM load timeout reached, proceeding anyway\");\n            resolve();\n        }, timeoutMs);\n        const checkDEM = ()=>{\n            if (map.isSourceLoaded(\"mapbox-dem\")) {\n                console.log(\" DEM source loaded successfully\");\n                clearTimeout(timeout);\n                resolve();\n            } else {\n                map.once(\"sourcedata\", checkDEM);\n            }\n        };\n        checkDEM();\n    });\n};\nconst useMap = (containerId, options)=>{\n    const mapRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const [terrainLoaded, setTerrainLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [mapError, setMapError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const centerString = JSON.stringify(options.center);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useMap.useEffect\": ()=>{\n            if (!containerId) {\n                setMapError(new Error(\"No containerId provided\"));\n                return;\n            }\n            let isInitializing = true;\n            let mapInstance = null;\n            try {\n                (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().accessToken) = \"pk.eyJ1IjoiaW50ZWxhZXJvIiwiYSI6ImNtM2EwZzY3ODB5bDgyam9yOTZ1ajE2YWsifQ.b9w33legWjEDzezOZx1N4g\" || 0;\n                if (!(mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().accessToken)) {\n                    throw new Error(\"Mapbox access token is not set\");\n                }\n                const container = document.getElementById(containerId);\n                if (!container) {\n                    throw new Error(`Container with id \"${containerId}\" not found`);\n                }\n                const map = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Map)({\n                    container,\n                    style: options.style,\n                    center: JSON.parse(centerString),\n                    zoom: options.zoom,\n                    projection: options.projection\n                });\n                mapInstance = map;\n                map.once('style.load', {\n                    \"useMap.useEffect\": ()=>{\n                        try {\n                            if (!map.getSource(\"mapbox-dem\")) {\n                                map.addSource(\"mapbox-dem\", {\n                                    type: \"raster-dem\",\n                                    url: \"mapbox://mapbox.mapbox-terrain-dem-v1\",\n                                    tileSize: 512,\n                                    maxzoom: 15\n                                });\n                            }\n                            map.setTerrain({\n                                source: \"mapbox-dem\",\n                                exaggeration: 1.5\n                            });\n                            Promise.all([\n                                new Promise({\n                                    \"useMap.useEffect\": (resolve)=>{\n                                        if (map.loaded()) {\n                                            resolve(true);\n                                        } else {\n                                            map.once(\"load\", {\n                                                \"useMap.useEffect\": ()=>resolve(true)\n                                            }[\"useMap.useEffect\"]);\n                                        }\n                                    }\n                                }[\"useMap.useEffect\"]),\n                                waitForDEM(map).then({\n                                    \"useMap.useEffect\": ()=>true\n                                }[\"useMap.useEffect\"]).catch({\n                                    \"useMap.useEffect\": ()=>false\n                                }[\"useMap.useEffect\"])\n                            ]).then({\n                                \"useMap.useEffect\": ([mapLoaded, demLoaded])=>{\n                                    if (!isInitializing) return;\n                                    mapRef.current = map;\n                                    setTerrainLoaded(true);\n                                    setTimeout({\n                                        \"useMap.useEffect\": ()=>{\n                                            // Add comprehensive validation before calling resize\n                                            if (map && map.loaded) {\n                                                try {\n                                                    // Check if map is still loaded and container exists\n                                                    const container = map.getContainer();\n                                                    const canvas = map.getCanvas();\n                                                    if (container && canvas && map.loaded()) {\n                                                        map.resize();\n                                                    } else {\n                                                        console.warn(\"Map resize skipped: container or canvas not available\");\n                                                    }\n                                                } catch (resizeError) {\n                                                    console.warn(\"Error during map resize:\", resizeError);\n                                                }\n                                            }\n                                        }\n                                    }[\"useMap.useEffect\"], 100);\n                                }\n                            }[\"useMap.useEffect\"]).catch({\n                                \"useMap.useEffect\": (error)=>{\n                                    setMapError(error instanceof Error ? error : new Error(String(error)));\n                                }\n                            }[\"useMap.useEffect\"]);\n                        } catch (error) {\n                            setMapError(error instanceof Error ? error : new Error(String(error)));\n                        }\n                    }\n                }[\"useMap.useEffect\"]);\n            } catch (error) {\n                setMapError(error instanceof Error ? error : new Error(String(error)));\n            }\n            return ({\n                \"useMap.useEffect\": ()=>{\n                    isInitializing = false;\n                    if (mapInstance) {\n                        try {\n                            // Check if map has a remove method and is still valid\n                            if (mapInstance.remove && typeof mapInstance.remove === 'function') {\n                                mapInstance.remove();\n                            } else {\n                                console.warn(\"Map already destroyed, skipping cleanup\");\n                            }\n                        } catch (err) {\n                            console.warn(\"Error removing map:\", err);\n                        }\n                    }\n                    mapRef.current = null;\n                }\n            })[\"useMap.useEffect\"];\n        }\n    }[\"useMap.useEffect\"], [\n        containerId,\n        options.style,\n        centerString,\n        options.zoom,\n        options.projection\n    ]);\n    return {\n        map: mapRef.current,\n        terrainLoaded,\n        error: mapError\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL0hvb2tzL3VzZU1hcC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs0REFDb0Q7QUFDbkI7QUFFakMsTUFBTUksYUFBYSxDQUFDQyxLQUFtQkMsWUFBWSxLQUFLO0lBQ3RELE9BQU8sSUFBSUMsUUFBUSxDQUFDQyxTQUFTQztRQUMzQixNQUFNQyxVQUFVQyxXQUFXO1lBQ3pCQyxRQUFRQyxJQUFJLENBQUM7WUFDYkw7UUFDRixHQUFHRjtRQUVILE1BQU1RLFdBQVc7WUFDZixJQUFJVCxJQUFJVSxjQUFjLENBQUMsZUFBZTtnQkFDcENILFFBQVFJLEdBQUcsQ0FBQztnQkFDWkMsYUFBYVA7Z0JBQ2JGO1lBQ0YsT0FBTztnQkFDTEgsSUFBSWEsSUFBSSxDQUFDLGNBQWNKO1lBQ3pCO1FBQ0Y7UUFFQUE7SUFDRjtBQUNGO0FBRU8sTUFBTUssU0FBUyxDQUFDQyxhQUFxQkM7SUFDMUMsTUFBTUMsU0FBU3JCLDZDQUFNQSxDQUFzQjtJQUMzQyxNQUFNLENBQUNzQixlQUFlQyxpQkFBaUIsR0FBR3RCLCtDQUFRQSxDQUFDO0lBQ25ELE1BQU0sQ0FBQ3VCLFVBQVVDLFlBQVksR0FBR3hCLCtDQUFRQSxDQUFlO0lBQ3ZELE1BQU15QixlQUFlQyxLQUFLQyxTQUFTLENBQUNSLFFBQVFTLE1BQU07SUFFbEQ5QixnREFBU0E7NEJBQUM7WUFDUixJQUFJLENBQUNvQixhQUFhO2dCQUNoQk0sWUFBWSxJQUFJSyxNQUFNO2dCQUN0QjtZQUNGO1lBRUEsSUFBSUMsaUJBQWlCO1lBQ3JCLElBQUlDLGNBQW1DO1lBRXZDLElBQUk7Z0JBQ0Y5Qiw4REFBb0IsR0FBR2dDLDhGQUEyQyxJQUFJLENBQUU7Z0JBQ3hFLElBQUksQ0FBQ2hDLDhEQUFvQixFQUFFO29CQUN6QixNQUFNLElBQUk0QixNQUFNO2dCQUNsQjtnQkFFQSxNQUFNTyxZQUFZQyxTQUFTQyxjQUFjLENBQUNwQjtnQkFDMUMsSUFBSSxDQUFDa0IsV0FBVztvQkFDZCxNQUFN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QUtpQixPQUFPdUMsT0FBTztRQUNuQnRDO1FBQ0E0QyxPQUFPMUM7SUFDVDtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL0hvb2tzL3VzZU1hcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBtYXBib3hnbCBmcm9tICdtYXBib3gtZ2wnO1xuXG5jb25zdCB3YWl0Rm9yREVNID0gKG1hcDogbWFwYm94Z2wuTWFwLCB0aW1lb3V0TXMgPSAyMDAwMCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnNvbGUud2FybihcIuKaoO+4jyBERU0gbG9hZCB0aW1lb3V0IHJlYWNoZWQsIHByb2NlZWRpbmcgYW55d2F5XCIpO1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH0sIHRpbWVvdXRNcyk7XG5cbiAgICBjb25zdCBjaGVja0RFTSA9ICgpID0+IHtcbiAgICAgIGlmIChtYXAuaXNTb3VyY2VMb2FkZWQoXCJtYXBib3gtZGVtXCIpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIERFTSBzb3VyY2UgbG9hZGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXAub25jZShcInNvdXJjZWRhdGFcIiwgY2hlY2tERU0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjaGVja0RFTSgpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCB1c2VNYXAgPSAoY29udGFpbmVySWQ6IHN0cmluZywgb3B0aW9uczogbWFwYm94Z2wuTWFwYm94T3B0aW9ucykgPT4ge1xuICBjb25zdCBtYXBSZWYgPSB1c2VSZWY8bWFwYm94Z2wuTWFwIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFt0ZXJyYWluTG9hZGVkLCBzZXRUZXJyYWluTG9hZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW21hcEVycm9yLCBzZXRNYXBFcnJvcl0gPSB1c2VTdGF0ZTxFcnJvciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBjZW50ZXJTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zLmNlbnRlcik7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICBzZXRNYXBFcnJvcihuZXcgRXJyb3IoXCJObyBjb250YWluZXJJZCBwcm92aWRlZFwiKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGlzSW5pdGlhbGl6aW5nID0gdHJ1ZTtcbiAgICBsZXQgbWFwSW5zdGFuY2U6IG1hcGJveGdsLk1hcCB8IG51bGwgPSBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIG1hcGJveGdsLmFjY2Vzc1Rva2VuID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfTUFQQk9YX0FDQ0VTU19UT0tFTiB8fCAnJztcbiAgICAgIGlmICghbWFwYm94Z2wuYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWFwYm94IGFjY2VzcyB0b2tlbiBpcyBub3Qgc2V0XCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJJZCk7XG4gICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbnRhaW5lciB3aXRoIGlkIFwiJHtjb250YWluZXJJZH1cIiBub3QgZm91bmRgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbWFwID0gbmV3IG1hcGJveGdsLk1hcCh7XG4gICAgICAgIGNvbnRhaW5lciwgLy8gUGFzcyBET00gZWxlbWVudCBkaXJlY3RseVxuICAgICAgICBzdHlsZTogb3B0aW9ucy5zdHlsZSxcbiAgICAgICAgY2VudGVyOiBKU09OLnBhcnNlKGNlbnRlclN0cmluZyksXG4gICAgICAgIHpvb206IG9wdGlvbnMuem9vbSxcbiAgICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgfSk7XG5cbiAgICAgIG1hcEluc3RhbmNlID0gbWFwO1xuXG4gICAgICBtYXAub25jZSgnc3R5bGUubG9hZCcsICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIW1hcC5nZXRTb3VyY2UoXCJtYXBib3gtZGVtXCIpKSB7XG4gICAgICAgICAgICBtYXAuYWRkU291cmNlKFwibWFwYm94LWRlbVwiLCB7XG4gICAgICAgICAgICAgIHR5cGU6IFwicmFzdGVyLWRlbVwiLFxuICAgICAgICAgICAgICB1cmw6IFwibWFwYm94Oi8vbWFwYm94Lm1hcGJveC10ZXJyYWluLWRlbS12MVwiLFxuICAgICAgICAgICAgICB0aWxlU2l6ZTogNTEyLFxuICAgICAgICAgICAgICBtYXh6b29tOiAxNSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1hcC5zZXRUZXJyYWluKHtcbiAgICAgICAgICAgIHNvdXJjZTogXCJtYXBib3gtZGVtXCIsXG4gICAgICAgICAgICBleGFnZ2VyYXRpb246IDEuNSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIG5ldyBQcm9taXNlPGJvb2xlYW4+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChtYXAubG9hZGVkKCkpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1hcC5vbmNlKFwibG9hZFwiLCAoKSA9PiByZXNvbHZlKHRydWUpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB3YWl0Rm9yREVNKG1hcCkudGhlbigoKSA9PiB0cnVlKS5jYXRjaCgoKSA9PiBmYWxzZSksXG4gICAgICAgICAgXSlcbiAgICAgICAgICAgIC50aGVuKChbbWFwTG9hZGVkLCBkZW1Mb2FkZWRdKSA9PiB7XG4gICAgICAgICAgICAgIGlmICghaXNJbml0aWFsaXppbmcpIHJldHVybjtcbiAgICAgICAgICAgICAgbWFwUmVmLmN1cnJlbnQgPSBtYXA7XG4gICAgICAgICAgICAgIHNldFRlcnJhaW5Mb2FkZWQodHJ1ZSk7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEFkZCBjb21wcmVoZW5zaXZlIHZhbGlkYXRpb24gYmVmb3JlIGNhbGxpbmcgcmVzaXplXG4gICAgICAgICAgICAgICAgaWYgKG1hcCAmJiBtYXAubG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBtYXAgaXMgc3RpbGwgbG9hZGVkIGFuZCBjb250YWluZXIgZXhpc3RzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG1hcC5nZXRDb250YWluZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gbWFwLmdldENhbnZhcygpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lciAmJiBjYW52YXMgJiYgbWFwLmxvYWRlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgbWFwLnJlc2l6ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk1hcCByZXNpemUgc2tpcHBlZDogY29udGFpbmVyIG9yIGNhbnZhcyBub3QgYXZhaWxhYmxlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChyZXNpemVFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBkdXJpbmcgbWFwIHJlc2l6ZTpcIiwgcmVzaXplRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgIHNldE1hcEVycm9yKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBzZXRNYXBFcnJvcihlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgc2V0TWFwRXJyb3IoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKFN0cmluZyhlcnJvcikpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaXNJbml0aWFsaXppbmcgPSBmYWxzZTtcbiAgICAgIGlmIChtYXBJbnN0YW5jZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIENoZWNrIGlmIG1hcCBoYXMgYSByZW1vdmUgbWV0aG9kIGFuZCBpcyBzdGlsbCB2YWxpZFxuICAgICAgICAgIGlmIChtYXBJbnN0YW5jZS5yZW1vdmUgJiYgdHlwZW9mIG1hcEluc3RhbmNlLnJlbW92ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgbWFwSW5zdGFuY2UucmVtb3ZlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk1hcCBhbHJlYWR5IGRlc3Ryb3llZCwgc2tpcHBpbmcgY2xlYW51cFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIHJlbW92aW5nIG1hcDpcIiwgZXJyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbWFwUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIH07XG4gIH0sIFtjb250YWluZXJJZCwgb3B0aW9ucy5zdHlsZSwgY2VudGVyU3RyaW5nLCBvcHRpb25zLnpvb20sIG9wdGlvbnMucHJvamVjdGlvbl0pO1xuXG4gIHJldHVybiB7XG4gICAgbWFwOiBtYXBSZWYuY3VycmVudCxcbiAgICB0ZXJyYWluTG9hZGVkLFxuICAgIGVycm9yOiBtYXBFcnJvcixcbiAgfTtcbn07Il0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwibWFwYm94Z2wiLCJ3YWl0Rm9yREVNIiwibWFwIiwidGltZW91dE1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsImNvbnNvbGUiLCJ3YXJuIiwiY2hlY2tERU0iLCJpc1NvdXJjZUxvYWRlZCIsImxvZyIsImNsZWFyVGltZW91dCIsIm9uY2UiLCJ1c2VNYXAiLCJjb250YWluZXJJZCIsIm9wdGlvbnMiLCJtYXBSZWYiLCJ0ZXJyYWluTG9hZGVkIiwic2V0VGVycmFpbkxvYWRlZCIsIm1hcEVycm9yIiwic2V0TWFwRXJyb3IiLCJjZW50ZXJTdHJpbmciLCJKU09OIiwic3RyaW5naWZ5IiwiY2VudGVyIiwiRXJyb3IiLCJpc0luaXRpYWxpemluZyIsIm1hcEluc3RhbmNlIiwiYWNjZXNzVG9rZW4iLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfTUFQQk9YX0FDQ0VTU19UT0tFTiIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJNYXAiLCJzdHlsZSIsInBhcnNlIiwiem9vbSIsInByb2plY3Rpb24iLCJnZXRTb3VyY2UiLCJhZGRTb3VyY2UiLCJ0eXBlIiwidXJsIiwidGlsZVNpemUiLCJtYXh6b29tIiwic2V0VGVycmFpbiIsInNvdXJjZSIsImV4YWdnZXJhdGlvbiIsImFsbCIsImxvYWRlZCIsInRoZW4iLCJjYXRjaCIsIm1hcExvYWRlZCIsImRlbUxvYWRlZCIsImN1cnJlbnQiLCJnZXRDb250YWluZXIiLCJjYW52YXMiLCJnZXRDYW52YXMiLCJyZXNpemUiLCJyZXNpemVFcnJvciIsImVycm9yIiwiU3RyaW5nIiwicmVtb3ZlIiwiZXJyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/Hooks/useMap.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/Hooks/useMarkers.ts":
/*!****************************************************!*\
  !*** ./src/app/components/Map/Hooks/useMarkers.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useMarkers: () => (/* binding */ useMarkers)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"(ssr)/./node_modules/mapbox-gl/dist/mapbox-gl.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _context_MarkerContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../context/MarkerContext */ \"(ssr)/./src/app/context/MarkerContext.tsx\");\n/* harmony import */ var _Utils_markerPopup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Utils/markerPopup */ \"(ssr)/./src/app/components/Map/Utils/markerPopup.ts\");\n/* harmony import */ var _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../services/LayerManager */ \"(ssr)/./src/app/services/LayerManager.ts\");\n/* harmony import */ var _tracking_tracking__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../tracking/tracking */ \"(ssr)/./src/app/components/tracking/tracking.js\");\n/* harmony import */ var _context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../context/AreaOfOpsContext */ \"(ssr)/./src/app/context/AreaOfOpsContext.tsx\");\n// src/app/hooks/useMarkers.ts\n/* __next_internal_client_entry_do_not_use__ useMarkers auto */ /**\n * useMarkers.ts\n * \n * Purpose:\n * This hook manages map markers for ground stations, observers, and repeaters.\n * It implements premium tier restrictions for marker creation and handles terrain elevation queries.\n * \n * Premium Tier Integration:\n * - Free tier: No markers allowed\n * - Community tier: Limited to 1 marker total\n * - Commercial tier: Up to 10 markers (configurable via PremiumContext)\n * \n * Features:\n * - Creates, updates, and removes markers on the map\n * - Queries terrain elevation for marker placement\n * - Provides error handling for premium tier restrictions\n * - Manages marker popups and visual styling\n * - Handles cleanup of analysis layers\n * \n * Usage:\n * const { \n *   addGroundStation, \n *   addObserver, \n *   addRepeater, \n *   error // Contains any premium tier restriction messages\n * } = useMarkers({ map, terrainLoaded });\n * \n * Related Files:\n * - MarkerContext.tsx: Provides marker state and premium tier checks\n * - PremiumContext.tsx: Defines tier levels and restrictions\n */ \n\n\n\n\n\n\nfunction useMarkers({ map, terrainLoaded }) {\n    // Store all marker references in a single collection\n    const markerRefs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n    // State for premium tier restriction errors\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const { markers, addMarker, updateMarker, removeMarker, defaultElevationOffsets } = (0,_context_MarkerContext__WEBPACK_IMPORTED_MODULE_2__.useMarkersContext)();\n    // Include AO context clear for removing all analysis layers\n    const { setAoTerrainGrid } = (0,_context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_6__.useAreaOfOpsContext)();\n    // Helper for querying terrain elevation\n    const queryTerrainElevation = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMarkers.useCallback[queryTerrainElevation]\": async (coordinates, retryCount = 3)=>{\n            if (!map) {\n                throw new Error(\"Map not initialized\");\n            }\n            try {\n                const elevation = map.queryTerrainElevation(coordinates);\n                if (elevation !== null && elevation !== undefined) {\n                    return elevation;\n                }\n                throw new Error(\"Invalid elevation value\");\n            } catch (error) {\n                console.warn(\"Primary terrain query failed, trying fallback:\", error);\n                if (retryCount > 0) {\n                    try {\n                        const fallbackElevation = await fetchTerrainElevation(coordinates[0], coordinates[1]);\n                        return fallbackElevation;\n                    } catch (fallbackError) {\n                        if (retryCount > 1) {\n                            console.warn(\"Fallback failed, retrying:\", fallbackError);\n                            return queryTerrainElevation(coordinates, retryCount - 1);\n                        }\n                        throw fallbackError;\n                    }\n                }\n                throw error;\n            }\n        }\n    }[\"useMarkers.useCallback[queryTerrainElevation]\"], [\n        map\n    ]);\n    // Fallback function for elevation queries\n    const fetchTerrainElevation = async (lng, lat)=>{\n        try {\n            const tileSize = 512;\n            const zoom = 15;\n            const scale = Math.pow(2, zoom);\n            const latRad = lat * Math.PI / 180;\n            const tileX = Math.floor((lng + 180) / 360 * scale);\n            const tileY = Math.floor((1 - Math.log(Math.tan(latRad) + 1 / Math.cos(latRad)) / Math.PI) / 2 * scale);\n            const pixelX = Math.floor(((lng + 180) / 360 * scale - tileX) * tileSize);\n            const pixelY = Math.floor(((1 - Math.log(Math.tan(latRad) + 1 / Math.cos(latRad)) / Math.PI) / 2 * scale - tileY) * tileSize);\n            const tileURL = `https://api.mapbox.com/v4/mapbox.terrain-rgb/${zoom}/${tileX}/${tileY}@2x.pngraw?access_token=${\"pk.eyJ1IjoiaW50ZWxhZXJvIiwiYSI6ImNtM2EwZzY3ODB5bDgyam9yOTZ1ajE2YWsifQ.b9w33legWjEDzezOZx1N4g\"}`;\n            const response = await fetch(tileURL);\n            const blob = await response.blob();\n            const imageBitmap = await createImageBitmap(blob);\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = tileSize;\n            canvas.height = tileSize;\n            const context = canvas.getContext(\"2d\");\n            if (!context) throw new Error(\"Failed to create canvas context\");\n            context.drawImage(imageBitmap, 0, 0);\n            const imageData = context.getImageData(0, 0, tileSize, tileSize);\n            const idx = (pixelY * tileSize + pixelX) * 4;\n            const [r, g, b] = [\n                imageData.data[idx],\n                imageData.data[idx + 1],\n                imageData.data[idx + 2]\n            ];\n            return -10000 + (r * 256 * 256 + g * 256 + b) * 0.1;\n        } catch (error) {\n            console.error(\"RGB elevation error:\", error);\n            return 0;\n        }\n    };\n    // Helper to create a marker label element\n    const createMarkerLabel = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMarkers.useCallback[createMarkerLabel]\": (index, markerType)=>{\n            const el = document.createElement('div');\n            el.className = 'marker-label';\n            el.textContent = `${index + 1}`;\n            // Style the label based on marker type\n            el.style.cssText = `\n      position: absolute;\n      bottom: 0;\n      right: -5px;\n      width: 16px;\n      height: 16px;\n      background-color: white;\n      color: black;\n      border-radius: 50%;\n      text-align: center;\n      font-size: 10px;\n      font-weight: bold;\n      line-height: 16px;\n      border: 1px solid ${markerType === 'gcs' ? 'blue' : markerType === 'observer' ? 'green' : 'red'};\n    `;\n            return el;\n        }\n    }[\"useMarkers.useCallback[createMarkerLabel]\"], []);\n    // Generic function to create a marker of any type\n    const createMarker = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMarkers.useCallback[createMarker]\": async (type)=>{\n            if (!map || !terrainLoaded) return;\n            // Clear any previous errors\n            setError(null);\n            const center = map.getCenter();\n            try {\n                const elevation = await queryTerrainElevation([\n                    center.lng,\n                    center.lat\n                ]);\n                const initialLocation = {\n                    lng: center.lng,\n                    lat: center.lat,\n                    elevation: elevation\n                };\n                console.log(`${type.toUpperCase()} Initial Location:`, initialLocation);\n                // Add marker to context and check result for premium tier restrictions\n                const result = addMarker(type, initialLocation);\n                // If failed due to premium tier restrictions, show error and return\n                if (!result.success) {\n                    setError(result.error);\n                    console.error(`Failed to add ${type} marker:`, result.error);\n                    return;\n                }\n                // Get the marker ID\n                const markerId = result.markerId;\n                // Define colors for different marker types\n                const markerColors = {\n                    gcs: \"blue\",\n                    observer: \"green\",\n                    repeater: \"red\"\n                };\n                // Get markers of this type to determine index\n                const sameTypeMarkers = markers.filter({\n                    \"useMarkers.useCallback[createMarker].sameTypeMarkers\": (m)=>m.type === type\n                }[\"useMarkers.useCallback[createMarker].sameTypeMarkers\"]);\n                const markerIndex = sameTypeMarkers.length - 1; // This will be the index of the new marker\n                const hasMultiple = sameTypeMarkers.length > 1; // Will be true if there are multiple markers now\n                // Create the default marker first with the appropriate color\n                const newMarker = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Marker)({\n                    color: markerColors[type],\n                    draggable: true\n                }).setLngLat(center).addTo(map);\n                // Only add label if we have multiple markers of this type\n                if (hasMultiple) {\n                    // Create the label\n                    const label = createMarkerLabel(markerIndex, type);\n                    // Get the marker element and append the label to it\n                    const markerElement = newMarker.getElement();\n                    markerElement.appendChild(label);\n                }\n                // Store reference to marker\n                markerRefs.current.push({\n                    id: markerId,\n                    marker: newMarker,\n                    type\n                });\n                // Create and set popup\n                const popup = (0,_Utils_markerPopup__WEBPACK_IMPORTED_MODULE_3__.createMarkerPopup)(type, elevation, defaultElevationOffsets[type], {\n                    \"useMarkers.useCallback[createMarker].popup\": ()=>{\n                        // Delete marker callback\n                        newMarker.remove();\n                        removeMarker(markerId);\n                        markerRefs.current = markerRefs.current.filter({\n                            \"useMarkers.useCallback[createMarker].popup\": (ref)=>ref.id !== markerId\n                        }[\"useMarkers.useCallback[createMarker].popup\"]);\n                    }\n                }[\"useMarkers.useCallback[createMarker].popup\"], markerId, markerIndex, hasMultiple);\n                newMarker.setPopup(popup).togglePopup();\n                // Handle marker drag events\n                newMarker.on(\"dragend\", {\n                    \"useMarkers.useCallback[createMarker]\": async ()=>{\n                        const lngLat = newMarker.getLngLat();\n                        try {\n                            const newElevation = await queryTerrainElevation([\n                                lngLat.lng,\n                                lngLat.lat\n                            ]);\n                            const location = {\n                                lng: lngLat.lng,\n                                lat: lngLat.lat,\n                                elevation: newElevation\n                            };\n                            // Update marker in context\n                            updateMarker(markerId, {\n                                location\n                            });\n                            // Clean up outdated analysis layers\n                            const layerPrefix = type === 'gcs' ? _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.GCS_GRID : type === 'observer' ? _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.OBSERVER_GRID : _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.REPEATER_GRID;\n                            _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.MERGED_VISIBILITY);\n                            _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(`${layerPrefix}-${markerId}`);\n                            // Get current markers of same type for indexing\n                            const currentSameTypeMarkers = markers.filter({\n                                \"useMarkers.useCallback[createMarker].currentSameTypeMarkers\": (m)=>m.type === type\n                            }[\"useMarkers.useCallback[createMarker].currentSameTypeMarkers\"]);\n                            const currentMarkerIndex = currentSameTypeMarkers.findIndex({\n                                \"useMarkers.useCallback[createMarker].currentMarkerIndex\": (m)=>m.id === markerId\n                            }[\"useMarkers.useCallback[createMarker].currentMarkerIndex\"]);\n                            const hasMultipleNow = currentSameTypeMarkers.length > 1;\n                            // Recreate popup with updated elevation\n                            const newPopup = (0,_Utils_markerPopup__WEBPACK_IMPORTED_MODULE_3__.createMarkerPopup)(type, newElevation, defaultElevationOffsets[type], {\n                                \"useMarkers.useCallback[createMarker].newPopup\": ()=>{\n                                    newMarker.remove();\n                                    removeMarker(markerId);\n                                    markerRefs.current = markerRefs.current.filter({\n                                        \"useMarkers.useCallback[createMarker].newPopup\": (ref)=>ref.id !== markerId\n                                    }[\"useMarkers.useCallback[createMarker].newPopup\"]);\n                                }\n                            }[\"useMarkers.useCallback[createMarker].newPopup\"], markerId, currentMarkerIndex, hasMultipleNow);\n                            newMarker.setPopup(newPopup).togglePopup();\n                        } catch (error) {\n                            console.error(`Error updating ${type.toUpperCase()} elevation:`, error);\n                        }\n                    }\n                }[\"useMarkers.useCallback[createMarker]\"]);\n                return initialLocation;\n            } catch (error) {\n                console.error(`Error initializing ${type.toUpperCase()}:`, error);\n                setError(`Error creating ${type} marker: ${error instanceof Error ? error.message : 'Unknown error'}`);\n            }\n        }\n    }[\"useMarkers.useCallback[createMarker]\"], [\n        map,\n        terrainLoaded,\n        queryTerrainElevation,\n        addMarker,\n        updateMarker,\n        removeMarker,\n        defaultElevationOffsets,\n        markers,\n        createMarkerLabel\n    ]);\n    // Type-specific marker creation functions\n    const addGroundStation = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMarkers.useCallback[addGroundStation]\": async ()=>{\n            (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_5__.trackEventWithForm)(\"add_ground_station_click\", {\n                panel: \"map.tsx\"\n            });\n            return createMarker('gcs');\n        }\n    }[\"useMarkers.useCallback[addGroundStation]\"], [\n        createMarker\n    ]);\n    const addObserver = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMarkers.useCallback[addObserver]\": async ()=>{\n            (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_5__.trackEventWithForm)(\"add_observer_click\", {\n                panel: \"map.tsx\"\n            });\n            return createMarker('observer');\n        }\n    }[\"useMarkers.useCallback[addObserver]\"], [\n        createMarker\n    ]);\n    const addRepeater = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMarkers.useCallback[addRepeater]\": async ()=>{\n            (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_5__.trackEventWithForm)(\"add_repeater_click\", {\n                panel: \"map.tsx\"\n            });\n            return createMarker('repeater');\n        }\n    }[\"useMarkers.useCallback[addRepeater]\"], [\n        createMarker\n    ]);\n    // Update marker popups when elevation offsets change\n    const updateMarkerPopups = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMarkers.useCallback[updateMarkerPopups]\": ()=>{\n            markerRefs.current.forEach({\n                \"useMarkers.useCallback[updateMarkerPopups]\": (ref)=>{\n                    // Find marker data in context\n                    const markerData = markers.find({\n                        \"useMarkers.useCallback[updateMarkerPopups].markerData\": (m)=>m.id === ref.id\n                    }[\"useMarkers.useCallback[updateMarkerPopups].markerData\"]);\n                    if (markerData && markerData.location.elevation !== null) {\n                        // Get markers of same type to determine index\n                        const sameTypeMarkers = markers.filter({\n                            \"useMarkers.useCallback[updateMarkerPopups].sameTypeMarkers\": (m)=>m.type === markerData.type\n                        }[\"useMarkers.useCallback[updateMarkerPopups].sameTypeMarkers\"]);\n                        const markerIndex = sameTypeMarkers.findIndex({\n                            \"useMarkers.useCallback[updateMarkerPopups].markerIndex\": (m)=>m.id === markerData.id\n                        }[\"useMarkers.useCallback[updateMarkerPopups].markerIndex\"]);\n                        const hasMultiple = sameTypeMarkers.length > 1;\n                        const updatedPopup = (0,_Utils_markerPopup__WEBPACK_IMPORTED_MODULE_3__.createMarkerPopup)(markerData.type, markerData.location.elevation, markerData.elevationOffset, {\n                            \"useMarkers.useCallback[updateMarkerPopups].updatedPopup\": ()=>{\n                                ref.marker.remove();\n                                removeMarker(ref.id);\n                                markerRefs.current = markerRefs.current.filter({\n                                    \"useMarkers.useCallback[updateMarkerPopups].updatedPopup\": (item)=>item.id !== ref.id\n                                }[\"useMarkers.useCallback[updateMarkerPopups].updatedPopup\"]);\n                            }\n                        }[\"useMarkers.useCallback[updateMarkerPopups].updatedPopup\"], markerData.id, markerIndex, hasMultiple);\n                        ref.marker.setPopup(updatedPopup);\n                        if (ref.marker.getPopup()?.isOpen()) {\n                            ref.marker.getPopup()?.setDOMContent(updatedPopup.getElement());\n                        }\n                    }\n                }\n            }[\"useMarkers.useCallback[updateMarkerPopups]\"]);\n        }\n    }[\"useMarkers.useCallback[updateMarkerPopups]\"], [\n        markers,\n        removeMarker\n    ]);\n    // Remove all the analysis layers\n    const removeAllAnalysisLayers = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMarkers.useCallback[removeAllAnalysisLayers]\": ()=>{\n            // Remove the analysis layers\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.ELOS_GRID);\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.FLIGHT_PATH_VISIBILITY);\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.GCS_GRID);\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.OBSERVER_GRID);\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.REPEATER_GRID);\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.MERGED_VISIBILITY);\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.AOTERRAIN_GRID);\n            // Reset the grid state in context so it can be regenerated\n            setAoTerrainGrid(null);\n            // Also remove any marker-specific layers using marker IDs\n            markers.forEach({\n                \"useMarkers.useCallback[removeAllAnalysisLayers]\": (marker)=>{\n                    const layerPrefix = marker.type === 'gcs' ? _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.GCS_GRID : marker.type === 'observer' ? _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.OBSERVER_GRID : _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.MAP_LAYERS.REPEATER_GRID;\n                    _services_LayerManager__WEBPACK_IMPORTED_MODULE_4__.layerManager.removeLayer(`${layerPrefix}-${marker.id}`);\n                }\n            }[\"useMarkers.useCallback[removeAllAnalysisLayers]\"]);\n        }\n    }[\"useMarkers.useCallback[removeAllAnalysisLayers]\"], [\n        markers,\n        setAoTerrainGrid\n    ]);\n    // Cleanup on unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useMarkers.useEffect\": ()=>{\n            return ({\n                \"useMarkers.useEffect\": ()=>{\n                    markerRefs.current.forEach({\n                        \"useMarkers.useEffect\": (ref)=>{\n                            ref.marker.remove();\n                        }\n                    }[\"useMarkers.useEffect\"]);\n                }\n            })[\"useMarkers.useEffect\"];\n        }\n    }[\"useMarkers.useEffect\"], []);\n    return {\n        markers,\n        addGroundStation,\n        addObserver,\n        addRepeater,\n        updateMarkerPopups,\n        removeAllAnalysisLayers,\n        markerRefs,\n        error\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL0hvb2tzL3VzZU1hcmtlcnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBLDhCQUE4QjtnRUFHOUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQThCQyxHQUVnRTtBQUNoQztBQUNzRDtBQUU5QjtBQUNpQjtBQUNDO0FBQ0g7QUFjakUsU0FBU1ksV0FBVyxFQUFFQyxHQUFHLEVBQUVDLGFBQWEsRUFBbUI7SUFDaEUscURBQXFEO0lBQ3JELE1BQU1DLGFBQWFmLDZDQUFNQSxDQUFjLEVBQUU7SUFFekMsNENBQTRDO0lBQzVDLE1BQU0sQ0FBQ2dCLE9BQU9DLFNBQVMsR0FBR2QsK0NBQVFBLENBQWdCO0lBRWxELE1BQU0sRUFDSmUsT0FBTyxFQUNQQyxTQUFTLEVBQ1RDLFlBQVksRUFDWkMsWUFBWSxFQUNaQyx1QkFBdUIsRUFDeEIsR0FBR2pCLHlFQUFpQkE7SUFFckIsNERBQTREO0lBQzVELE1BQU0sRUFBRWtCLGdCQUFnQixFQUFFLEdBQUdaLDhFQUFtQkE7SUFFaEQsd0NBQXdDO0lBQ3hDLE1BQU1hLHdCQUF3QnZCLGtEQUFXQTt5REFDdkMsT0FBT3dCLGFBQStCQyxhQUFhLENBQUM7WUFDbEQsSUFBSSxDQUFDYixLQUFLO2dCQUNSLE1BQU0sSUFBSWMsTUFBTTtZQUNsQjtZQUVBLElBQUk7Z0JBQ0YsTUFBTUMsWUFBWWYsSUFBSVcscUJBQXFCLENBQUNDO2dCQUM1QyxJQUFJRyxjQUFjLFFBQVFBLGNBQWNDLFdBQVc7b0JBQ2pELE9BQU9EO2dCQUNUO2dCQUNBLE1BQU0sSUFBSUQsTUFBTTtZQUNsQixFQUFFLE9BQU9YLE9BQU87Z0JBQ2RjLFFBQVFDLElBQUksQ0FBQyxrREFBa0RmO2dCQUMvRCxJQUFJVSxhQUFhLEdBQUc7b0JBQ2xCLElBQUk7d0JBQ0YsTUFBTU0sb0JBQW9CLE1BQU1DLHNCQUM5QlIsV0FBVyxDQUFDLEVBQUUsRUFDZEEsV0FBVyxDQUFDLEVBQUU7d0JBRWhC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a2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9jb21wb25lbnRzL01hcC9Ib29rcy91c2VNYXJrZXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9hcHAvaG9va3MvdXNlTWFya2Vycy50c1xuXCJ1c2UgY2xpZW50XCI7XG5cbi8qKlxuICogdXNlTWFya2Vycy50c1xuICogXG4gKiBQdXJwb3NlOlxuICogVGhpcyBob29rIG1hbmFnZXMgbWFwIG1hcmtlcnMgZm9yIGdyb3VuZCBzdGF0aW9ucywgb2JzZXJ2ZXJzLCBhbmQgcmVwZWF0ZXJzLlxuICogSXQgaW1wbGVtZW50cyBwcmVtaXVtIHRpZXIgcmVzdHJpY3Rpb25zIGZvciBtYXJrZXIgY3JlYXRpb24gYW5kIGhhbmRsZXMgdGVycmFpbiBlbGV2YXRpb24gcXVlcmllcy5cbiAqIFxuICogUHJlbWl1bSBUaWVyIEludGVncmF0aW9uOlxuICogLSBGcmVlIHRpZXI6IE5vIG1hcmtlcnMgYWxsb3dlZFxuICogLSBDb21tdW5pdHkgdGllcjogTGltaXRlZCB0byAxIG1hcmtlciB0b3RhbFxuICogLSBDb21tZXJjaWFsIHRpZXI6IFVwIHRvIDEwIG1hcmtlcnMgKGNvbmZpZ3VyYWJsZSB2aWEgUHJlbWl1bUNvbnRleHQpXG4gKiBcbiAqIEZlYXR1cmVzOlxuICogLSBDcmVhdGVzLCB1cGRhdGVzLCBhbmQgcmVtb3ZlcyBtYXJrZXJzIG9uIHRoZSBtYXBcbiAqIC0gUXVlcmllcyB0ZXJyYWluIGVsZXZhdGlvbiBmb3IgbWFya2VyIHBsYWNlbWVudFxuICogLSBQcm92aWRlcyBlcnJvciBoYW5kbGluZyBmb3IgcHJlbWl1bSB0aWVyIHJlc3RyaWN0aW9uc1xuICogLSBNYW5hZ2VzIG1hcmtlciBwb3B1cHMgYW5kIHZpc3VhbCBzdHlsaW5nXG4gKiAtIEhhbmRsZXMgY2xlYW51cCBvZiBhbmFseXNpcyBsYXllcnNcbiAqIFxuICogVXNhZ2U6XG4gKiBjb25zdCB7IFxuICogICBhZGRHcm91bmRTdGF0aW9uLCBcbiAqICAgYWRkT2JzZXJ2ZXIsIFxuICogICBhZGRSZXBlYXRlciwgXG4gKiAgIGVycm9yIC8vIENvbnRhaW5zIGFueSBwcmVtaXVtIHRpZXIgcmVzdHJpY3Rpb24gbWVzc2FnZXNcbiAqIH0gPSB1c2VNYXJrZXJzKHsgbWFwLCB0ZXJyYWluTG9hZGVkIH0pO1xuICogXG4gKiBSZWxhdGVkIEZpbGVzOlxuICogLSBNYXJrZXJDb250ZXh0LnRzeDogUHJvdmlkZXMgbWFya2VyIHN0YXRlIGFuZCBwcmVtaXVtIHRpZXIgY2hlY2tzXG4gKiAtIFByZW1pdW1Db250ZXh0LnRzeDogRGVmaW5lcyB0aWVyIGxldmVscyBhbmQgcmVzdHJpY3Rpb25zXG4gKi9cblxuaW1wb3J0IHsgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBtYXBib3hnbCBmcm9tICdtYXBib3gtZ2wnO1xuaW1wb3J0IHsgdXNlTWFya2Vyc0NvbnRleHQsIE1hcmtlclR5cGUsIE1hcmtlciB9IGZyb20gJy4uLy4uLy4uL2NvbnRleHQvTWFya2VyQ29udGV4dCc7XG5pbXBvcnQgeyBMb2NhdGlvbkRhdGEgfSBmcm9tICcuLi8uLi8uLi90eXBlcy9Mb2NhdGlvbkRhdGEnO1xuaW1wb3J0IHsgY3JlYXRlTWFya2VyUG9wdXAgfSBmcm9tICcuLi9VdGlscy9tYXJrZXJQb3B1cCc7XG5pbXBvcnQgeyBsYXllck1hbmFnZXIsIE1BUF9MQVlFUlMgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9MYXllck1hbmFnZXInO1xuaW1wb3J0IHsgdHJhY2tFdmVudFdpdGhGb3JtIGFzIHRyYWNrRXZlbnQgfSBmcm9tICcuLi8uLi90cmFja2luZy90cmFja2luZyc7XG5pbXBvcnQgeyB1c2VBcmVhT2ZPcHNDb250ZXh0IH0gZnJvbSAnLi4vLi4vLi4vY29udGV4dC9BcmVhT2ZPcHNDb250ZXh0JztcblxuaW50ZXJmYWNlIFVzZU1hcmtlcnNQcm9wcyB7XG4gIG1hcDogbWFwYm94Z2wuTWFwIHwgbnVsbDtcbiAgdGVycmFpbkxvYWRlZDogYm9vbGVhbjtcbn1cblxuLy8gSW50ZXJmYWNlIGZvciB0cmFja2luZyBtYXJrZXIgcmVmZXJlbmNlc1xuaW50ZXJmYWNlIE1hcmtlclJlZiB7XG4gIGlkOiBzdHJpbmc7XG4gIG1hcmtlcjogbWFwYm94Z2wuTWFya2VyO1xuICB0eXBlOiBNYXJrZXJUeXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlTWFya2Vycyh7IG1hcCwgdGVycmFpbkxvYWRlZCB9OiBVc2VNYXJrZXJzUHJvcHMpIHtcbiAgLy8gU3RvcmUgYWxsIG1hcmtlciByZWZlcmVuY2VzIGluIGEgc2luZ2xlIGNvbGxlY3Rpb25cbiAgY29uc3QgbWFya2VyUmVmcyA9IHVzZVJlZjxNYXJrZXJSZWZbXT4oW10pO1xuICBcbiAgLy8gU3RhdGUgZm9yIHByZW1pdW0gdGllciByZXN0cmljdGlvbiBlcnJvcnNcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgXG4gIGNvbnN0IHtcbiAgICBtYXJrZXJzLFxuICAgIGFkZE1hcmtlcixcbiAgICB1cGRhdGVNYXJrZXIsXG4gICAgcmVtb3ZlTWFya2VyLFxuICAgIGRlZmF1bHRFbGV2YXRpb25PZmZzZXRzXG4gIH0gPSB1c2VNYXJrZXJzQ29udGV4dCgpO1xuICBcbiAgLy8gSW5jbHVkZSBBTyBjb250ZXh0IGNsZWFyIGZvciByZW1vdmluZyBhbGwgYW5hbHlzaXMgbGF5ZXJzXG4gIGNvbnN0IHsgc2V0QW9UZXJyYWluR3JpZCB9ID0gdXNlQXJlYU9mT3BzQ29udGV4dCgpO1xuXG4gIC8vIEhlbHBlciBmb3IgcXVlcnlpbmcgdGVycmFpbiBlbGV2YXRpb25cbiAgY29uc3QgcXVlcnlUZXJyYWluRWxldmF0aW9uID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKGNvb3JkaW5hdGVzOiBbbnVtYmVyLCBudW1iZXJdLCByZXRyeUNvdW50ID0gMyk6IFByb21pc2U8bnVtYmVyPiA9PiB7XG4gICAgICBpZiAoIW1hcCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYXAgbm90IGluaXRpYWxpemVkXCIpO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBlbGV2YXRpb24gPSBtYXAucXVlcnlUZXJyYWluRWxldmF0aW9uKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgaWYgKGVsZXZhdGlvbiAhPT0gbnVsbCAmJiBlbGV2YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybiBlbGV2YXRpb247XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBlbGV2YXRpb24gdmFsdWVcIik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJQcmltYXJ5IHRlcnJhaW4gcXVlcnkgZmFpbGVkLCB0cnlpbmcgZmFsbGJhY2s6XCIsIGVycm9yKTtcbiAgICAgICAgaWYgKHJldHJ5Q291bnQgPiAwKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrRWxldmF0aW9uID0gYXdhaXQgZmV0Y2hUZXJyYWluRWxldmF0aW9uKFxuICAgICAgICAgICAgICBjb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgICAgY29vcmRpbmF0ZXNbMV1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gZmFsbGJhY2tFbGV2YXRpb247XG4gICAgICAgICAgfSBjYXRjaCAoZmFsbGJhY2tFcnJvcikge1xuICAgICAgICAgICAgaWYgKHJldHJ5Q291bnQgPiAxKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhbGxiYWNrIGZhaWxlZCwgcmV0cnlpbmc6XCIsIGZhbGxiYWNrRXJyb3IpO1xuICAgICAgICAgICAgICByZXR1cm4gcXVlcnlUZXJyYWluRWxldmF0aW9uKGNvb3JkaW5hdGVzLCByZXRyeUNvdW50IC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBmYWxsYmFja0Vycm9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9LFxuICAgIFttYXBdXG4gICk7XG5cbiAgLy8gRmFsbGJhY2sgZnVuY3Rpb24gZm9yIGVsZXZhdGlvbiBxdWVyaWVzXG4gIGNvbnN0IGZldGNoVGVycmFpbkVsZXZhdGlvbiA9IGFzeW5jIChcbiAgICBsbmc6IG51bWJlcixcbiAgICBsYXQ6IG51bWJlclxuICApOiBQcm9taXNlPG51bWJlcj4gPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0aWxlU2l6ZSA9IDUxMjtcbiAgICAgIGNvbnN0IHpvb20gPSAxNTtcbiAgICAgIGNvbnN0IHNjYWxlID0gTWF0aC5wb3coMiwgem9vbSk7XG4gICAgICBjb25zdCBsYXRSYWQgPSAobGF0ICogTWF0aC5QSSkgLyAxODA7XG4gICAgICBjb25zdCB0aWxlWCA9IE1hdGguZmxvb3IoKChsbmcgKyAxODApIC8gMzYwKSAqIHNjYWxlKTtcbiAgICAgIGNvbnN0IHRpbGVZID0gTWF0aC5mbG9vcihcbiAgICAgICAgKCgxIC0gTWF0aC5sb2coTWF0aC50YW4obGF0UmFkKSArIDEgLyBNYXRoLmNvcyhsYXRSYWQpKSAvIE1hdGguUEkpIC8gMikgKiBzY2FsZVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHBpeGVsWCA9IE1hdGguZmxvb3IoKCgobG5nICsgMTgwKSAvIDM2MCkgKiBzY2FsZSAtIHRpbGVYKSAqIHRpbGVTaXplKTtcbiAgICAgIGNvbnN0IHBpeGVsWSA9IE1hdGguZmxvb3IoXG4gICAgICAgICgoKCgxIC0gTWF0aC5sb2coTWF0aC50YW4obGF0UmFkKSArIDEgLyBNYXRoLmNvcyhsYXRSYWQpKSAvIE1hdGguUEkpIC8gMikgKlxuICAgICAgICAgIHNjYWxlIC1cbiAgICAgICAgICB0aWxlWSkgKlxuICAgICAgICAgIHRpbGVTaXplKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRpbGVVUkwgPSBgaHR0cHM6Ly9hcGkubWFwYm94LmNvbS92NC9tYXBib3gudGVycmFpbi1yZ2IvJHt6b29tfS8ke3RpbGVYfS8ke3RpbGVZfUAyeC5wbmdyYXc/YWNjZXNzX3Rva2VuPSR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfTUFQQk9YX0FDQ0VTU19UT0tFTn1gO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aWxlVVJMKTtcbiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICBjb25zdCBpbWFnZUJpdG1hcCA9IGF3YWl0IGNyZWF0ZUltYWdlQml0bWFwKGJsb2IpO1xuICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgIGNhbnZhcy53aWR0aCA9IHRpbGVTaXplO1xuICAgICAgY2FudmFzLmhlaWdodCA9IHRpbGVTaXplO1xuICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICBpZiAoIWNvbnRleHQpIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgY2FudmFzIGNvbnRleHRcIik7XG4gICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZUJpdG1hcCwgMCwgMCk7XG4gICAgICBjb25zdCBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB0aWxlU2l6ZSwgdGlsZVNpemUpO1xuICAgICAgY29uc3QgaWR4ID0gKHBpeGVsWSAqIHRpbGVTaXplICsgcGl4ZWxYKSAqIDQ7XG4gICAgICBjb25zdCBbciwgZywgYl0gPSBbXG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2lkeF0sXG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2lkeCArIDFdLFxuICAgICAgICBpbWFnZURhdGEuZGF0YVtpZHggKyAyXSxcbiAgICAgIF07XG4gICAgICByZXR1cm4gLTEwMDAwICsgKHIgKiAyNTYgKiAyNTYgKyBnICogMjU2ICsgYikgKiAwLjE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJSR0IgZWxldmF0aW9uIGVycm9yOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH07XG5cbiAgLy8gSGVscGVyIHRvIGNyZWF0ZSBhIG1hcmtlciBsYWJlbCBlbGVtZW50XG4gIGNvbnN0IGNyZWF0ZU1hcmtlckxhYmVsID0gdXNlQ2FsbGJhY2soKGluZGV4OiBudW1iZXIsIG1hcmtlclR5cGU6IE1hcmtlclR5cGUpOiBIVE1MRWxlbWVudCA9PiB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbC5jbGFzc05hbWUgPSAnbWFya2VyLWxhYmVsJztcbiAgICBlbC50ZXh0Q29udGVudCA9IGAke2luZGV4ICsgMX1gO1xuICAgIFxuICAgIC8vIFN0eWxlIHRoZSBsYWJlbCBiYXNlZCBvbiBtYXJrZXIgdHlwZVxuICAgIGVsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBib3R0b206IDA7XG4gICAgICByaWdodDogLTVweDtcbiAgICAgIHdpZHRoOiAxNnB4O1xuICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICBjb2xvcjogYmxhY2s7XG4gICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxNnB4O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgJHttYXJrZXJUeXBlID09PSAnZ2NzJyA/ICdibHVlJyA6IG1hcmtlclR5cGUgPT09ICdvYnNlcnZlcicgPyAnZ3JlZW4nIDogJ3JlZCd9O1xuICAgIGA7XG4gICAgXG4gICAgcmV0dXJuIGVsO1xuICB9LCBbXSk7XG5cbiAgLy8gR2VuZXJpYyBmdW5jdGlvbiB0byBjcmVhdGUgYSBtYXJrZXIgb2YgYW55IHR5cGVcbiAgY29uc3QgY3JlYXRlTWFya2VyID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKHR5cGU6IE1hcmtlclR5cGUpOiBQcm9taXNlPExvY2F0aW9uRGF0YSB8IHVuZGVmaW5lZD4gPT4ge1xuICAgICAgaWYgKCFtYXAgfHwgIXRlcnJhaW5Mb2FkZWQpIHJldHVybjtcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgYW55IHByZXZpb3VzIGVycm9yc1xuICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNlbnRlciA9IG1hcC5nZXRDZW50ZXIoKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGVsZXZhdGlvbiA9IGF3YWl0IHF1ZXJ5VGVycmFpbkVsZXZhdGlvbihbY2VudGVyLmxuZywgY2VudGVyLmxhdF0pO1xuICAgICAgICBjb25zdCBpbml0aWFsTG9jYXRpb246IExvY2F0aW9uRGF0YSA9IHtcbiAgICAgICAgICBsbmc6IGNlbnRlci5sbmcsXG4gICAgICAgICAgbGF0OiBjZW50ZXIubGF0LFxuICAgICAgICAgIGVsZXZhdGlvbjogZWxldmF0aW9uLFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYCR7dHlwZS50b1VwcGVyQ2FzZSgpfSBJbml0aWFsIExvY2F0aW9uOmAsIGluaXRpYWxMb2NhdGlvbik7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgbWFya2VyIHRvIGNvbnRleHQgYW5kIGNoZWNrIHJlc3VsdCBmb3IgcHJlbWl1bSB0aWVyIHJlc3RyaWN0aW9uc1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhZGRNYXJrZXIodHlwZSwgaW5pdGlhbExvY2F0aW9uKTtcbiAgICAgICAgXG4gICAgICAgIC8vIElmIGZhaWxlZCBkdWUgdG8gcHJlbWl1bSB0aWVyIHJlc3RyaWN0aW9ucywgc2hvdyBlcnJvciBhbmQgcmV0dXJuXG4gICAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICBzZXRFcnJvcihyZXN1bHQuZXJyb3IpO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBhZGQgJHt0eXBlfSBtYXJrZXI6YCwgcmVzdWx0LmVycm9yKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEdldCB0aGUgbWFya2VyIElEXG4gICAgICAgIGNvbnN0IG1hcmtlcklkID0gcmVzdWx0Lm1hcmtlcklkIGFzIHN0cmluZztcbiAgICAgICAgXG4gICAgICAgIC8vIERlZmluZSBjb2xvcnMgZm9yIGRpZmZlcmVudCBtYXJrZXIgdHlwZXNcbiAgICAgICAgY29uc3QgbWFya2VyQ29sb3JzOiBSZWNvcmQ8TWFya2VyVHlwZSwgc3RyaW5nPiA9IHtcbiAgICAgICAgICBnY3M6IFwiYmx1ZVwiLFxuICAgICAgICAgIG9ic2VydmVyOiBcImdyZWVuXCIsXG4gICAgICAgICAgcmVwZWF0ZXI6IFwicmVkXCJcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBtYXJrZXJzIG9mIHRoaXMgdHlwZSB0byBkZXRlcm1pbmUgaW5kZXhcbiAgICAgICAgY29uc3Qgc2FtZVR5cGVNYXJrZXJzID0gbWFya2Vycy5maWx0ZXIobSA9PiBtLnR5cGUgPT09IHR5cGUpO1xuICAgICAgICBjb25zdCBtYXJrZXJJbmRleCA9IHNhbWVUeXBlTWFya2Vycy5sZW5ndGggLSAxOyAvLyBUaGlzIHdpbGwgYmUgdGhlIGluZGV4IG9mIHRoZSBuZXcgbWFya2VyXG4gICAgICAgIGNvbnN0IGhhc011bHRpcGxlID0gc2FtZVR5cGVNYXJrZXJzLmxlbmd0aCA+IDE7IC8vIFdpbGwgYmUgdHJ1ZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgbWFya2VycyBub3dcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZGVmYXVsdCBtYXJrZXIgZmlyc3Qgd2l0aCB0aGUgYXBwcm9wcmlhdGUgY29sb3JcbiAgICAgICAgY29uc3QgbmV3TWFya2VyID0gbmV3IG1hcGJveGdsLk1hcmtlcih7IFxuICAgICAgICAgIGNvbG9yOiBtYXJrZXJDb2xvcnNbdHlwZV0sIFxuICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSBcbiAgICAgICAgfSkuc2V0TG5nTGF0KGNlbnRlcikuYWRkVG8obWFwKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE9ubHkgYWRkIGxhYmVsIGlmIHdlIGhhdmUgbXVsdGlwbGUgbWFya2VycyBvZiB0aGlzIHR5cGVcbiAgICAgICAgaWYgKGhhc011bHRpcGxlKSB7XG4gICAgICAgICAgLy8gQ3JlYXRlIHRoZSBsYWJlbFxuICAgICAgICAgIGNvbnN0IGxhYmVsID0gY3JlYXRlTWFya2VyTGFiZWwobWFya2VySW5kZXgsIHR5cGUpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEdldCB0aGUgbWFya2VyIGVsZW1lbnQgYW5kIGFwcGVuZCB0aGUgbGFiZWwgdG8gaXRcbiAgICAgICAgICBjb25zdCBtYXJrZXJFbGVtZW50ID0gbmV3TWFya2VyLmdldEVsZW1lbnQoKTtcbiAgICAgICAgICBtYXJrZXJFbGVtZW50LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU3RvcmUgcmVmZXJlbmNlIHRvIG1hcmtlclxuICAgICAgICBtYXJrZXJSZWZzLmN1cnJlbnQucHVzaCh7XG4gICAgICAgICAgaWQ6IG1hcmtlcklkLFxuICAgICAgICAgIG1hcmtlcjogbmV3TWFya2VyLFxuICAgICAgICAgIHR5cGVcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgYW5kIHNldCBwb3B1cFxuICAgICAgICBjb25zdCBwb3B1cCA9IGNyZWF0ZU1hcmtlclBvcHVwKFxuICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgZWxldmF0aW9uLFxuICAgICAgICAgIGRlZmF1bHRFbGV2YXRpb25PZmZzZXRzW3R5cGVdLFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIC8vIERlbGV0ZSBtYXJrZXIgY2FsbGJhY2tcbiAgICAgICAgICAgIG5ld01hcmtlci5yZW1vdmUoKTtcbiAgICAgICAgICAgIHJlbW92ZU1hcmtlcihtYXJrZXJJZCk7XG4gICAgICAgICAgICBtYXJrZXJSZWZzLmN1cnJlbnQgPSBtYXJrZXJSZWZzLmN1cnJlbnQuZmlsdGVyKHJlZiA9PiByZWYuaWQgIT09IG1hcmtlcklkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1hcmtlcklkLFxuICAgICAgICAgIG1hcmtlckluZGV4LFxuICAgICAgICAgIGhhc011bHRpcGxlXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBuZXdNYXJrZXIuc2V0UG9wdXAocG9wdXApLnRvZ2dsZVBvcHVwKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgbWFya2VyIGRyYWcgZXZlbnRzXG4gICAgICAgIG5ld01hcmtlci5vbihcImRyYWdlbmRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGxuZ0xhdCA9IG5ld01hcmtlci5nZXRMbmdMYXQoKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbmV3RWxldmF0aW9uID0gYXdhaXQgcXVlcnlUZXJyYWluRWxldmF0aW9uKFtsbmdMYXQubG5nLCBsbmdMYXQubGF0XSk7XG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbjogTG9jYXRpb25EYXRhID0ge1xuICAgICAgICAgICAgICBsbmc6IGxuZ0xhdC5sbmcsXG4gICAgICAgICAgICAgIGxhdDogbG5nTGF0LmxhdCxcbiAgICAgICAgICAgICAgZWxldmF0aW9uOiBuZXdFbGV2YXRpb24sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgbWFya2VyIGluIGNvbnRleHRcbiAgICAgICAgICAgIHVwZGF0ZU1hcmtlcihtYXJrZXJJZCwgeyBsb2NhdGlvbiB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2xlYW4gdXAgb3V0ZGF0ZWQgYW5hbHlzaXMgbGF5ZXJzXG4gICAgICAgICAgICBjb25zdCBsYXllclByZWZpeCA9IHR5cGUgPT09ICdnY3MnIFxuICAgICAgICAgICAgICA/IE1BUF9MQVlFUlMuR0NTX0dSSUQgXG4gICAgICAgICAgICAgIDogdHlwZSA9PT0gJ29ic2VydmVyJyBcbiAgICAgICAgICAgICAgICA/IE1BUF9MQVlFUlMuT0JTRVJWRVJfR1JJRCBcbiAgICAgICAgICAgICAgICA6IE1BUF9MQVlFUlMuUkVQRUFURVJfR1JJRDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGxheWVyTWFuYWdlci5yZW1vdmVMYXllcihNQVBfTEFZRVJTLk1FUkdFRF9WSVNJQklMSVRZKTtcbiAgICAgICAgICAgIGxheWVyTWFuYWdlci5yZW1vdmVMYXllcihgJHtsYXllclByZWZpeH0tJHttYXJrZXJJZH1gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gR2V0IGN1cnJlbnQgbWFya2VycyBvZiBzYW1lIHR5cGUgZm9yIGluZGV4aW5nXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U2FtZVR5cGVNYXJrZXJzID0gbWFya2Vycy5maWx0ZXIobSA9PiBtLnR5cGUgPT09IHR5cGUpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudE1hcmtlckluZGV4ID0gY3VycmVudFNhbWVUeXBlTWFya2Vycy5maW5kSW5kZXgobSA9PiBtLmlkID09PSBtYXJrZXJJZCk7XG4gICAgICAgICAgICBjb25zdCBoYXNNdWx0aXBsZU5vdyA9IGN1cnJlbnRTYW1lVHlwZU1hcmtlcnMubGVuZ3RoID4gMTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVjcmVhdGUgcG9wdXAgd2l0aCB1cGRhdGVkIGVsZXZhdGlvblxuICAgICAgICAgICAgY29uc3QgbmV3UG9wdXAgPSBjcmVhdGVNYXJrZXJQb3B1cChcbiAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgbmV3RWxldmF0aW9uLFxuICAgICAgICAgICAgICBkZWZhdWx0RWxldmF0aW9uT2Zmc2V0c1t0eXBlXSxcbiAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ld01hcmtlci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICByZW1vdmVNYXJrZXIobWFya2VySWQpO1xuICAgICAgICAgICAgICAgIG1hcmtlclJlZnMuY3VycmVudCA9IG1hcmtlclJlZnMuY3VycmVudC5maWx0ZXIocmVmID0+IHJlZi5pZCAhPT0gbWFya2VySWQpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBtYXJrZXJJZCxcbiAgICAgICAgICAgICAgY3VycmVudE1hcmtlckluZGV4LFxuICAgICAgICAgICAgICBoYXNNdWx0aXBsZU5vd1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbmV3TWFya2VyLnNldFBvcHVwKG5ld1BvcHVwKS50b2dnbGVQb3B1cCgpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciB1cGRhdGluZyAke3R5cGUudG9VcHBlckNhc2UoKX0gZWxldmF0aW9uOmAsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGluaXRpYWxMb2NhdGlvbjtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluaXRpYWxpemluZyAke3R5cGUudG9VcHBlckNhc2UoKX06YCwgZXJyb3IpO1xuICAgICAgICBzZXRFcnJvcihgRXJyb3IgY3JlYXRpbmcgJHt0eXBlfSBtYXJrZXI6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbbWFwLCB0ZXJyYWluTG9hZGVkLCBxdWVyeVRlcnJhaW5FbGV2YXRpb24sIGFkZE1hcmtlciwgdXBkYXRlTWFya2VyLCByZW1vdmVNYXJrZXIsIGRlZmF1bHRFbGV2YXRpb25PZmZzZXRzLCBtYXJrZXJzLCBjcmVhdGVNYXJrZXJMYWJlbF1cbiAgKTtcblxuICAvLyBUeXBlLXNwZWNpZmljIG1hcmtlciBjcmVhdGlvbiBmdW5jdGlvbnNcbiAgY29uc3QgYWRkR3JvdW5kU3RhdGlvbiA9IHVzZUNhbGxiYWNrKGFzeW5jICgpOiBQcm9taXNlPExvY2F0aW9uRGF0YSB8IHVuZGVmaW5lZD4gPT4ge1xuICAgIHRyYWNrRXZlbnQoXCJhZGRfZ3JvdW5kX3N0YXRpb25fY2xpY2tcIiwgeyBwYW5lbDogXCJtYXAudHN4XCIgfSk7XG4gICAgcmV0dXJuIGNyZWF0ZU1hcmtlcignZ2NzJyk7XG4gIH0sIFtjcmVhdGVNYXJrZXJdKTtcblxuICBjb25zdCBhZGRPYnNlcnZlciA9IHVzZUNhbGxiYWNrKGFzeW5jICgpOiBQcm9taXNlPExvY2F0aW9uRGF0YSB8IHVuZGVmaW5lZD4gPT4ge1xuICAgIHRyYWNrRXZlbnQoXCJhZGRfb2JzZXJ2ZXJfY2xpY2tcIiwgeyBwYW5lbDogXCJtYXAudHN4XCIgfSk7XG4gICAgcmV0dXJuIGNyZWF0ZU1hcmtlcignb2JzZXJ2ZXInKTtcbiAgfSwgW2NyZWF0ZU1hcmtlcl0pO1xuXG4gIGNvbnN0IGFkZFJlcGVhdGVyID0gdXNlQ2FsbGJhY2soYXN5bmMgKCk6IFByb21pc2U8TG9jYXRpb25EYXRhIHwgdW5kZWZpbmVkPiA9PiB7XG4gICAgdHJhY2tFdmVudChcImFkZF9yZXBlYXRlcl9jbGlja1wiLCB7IHBhbmVsOiBcIm1hcC50c3hcIiB9KTtcbiAgICByZXR1cm4gY3JlYXRlTWFya2VyKCdyZXBlYXRlcicpO1xuICB9LCBbY3JlYXRlTWFya2VyXSk7XG5cbiAgLy8gVXBkYXRlIG1hcmtlciBwb3B1cHMgd2hlbiBlbGV2YXRpb24gb2Zmc2V0cyBjaGFuZ2VcbiAgY29uc3QgdXBkYXRlTWFya2VyUG9wdXBzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIG1hcmtlclJlZnMuY3VycmVudC5mb3JFYWNoKHJlZiA9PiB7XG4gICAgICAvLyBGaW5kIG1hcmtlciBkYXRhIGluIGNvbnRleHRcbiAgICAgIGNvbnN0IG1hcmtlckRhdGEgPSBtYXJrZXJzLmZpbmQobSA9PiBtLmlkID09PSByZWYuaWQpO1xuICAgICAgXG4gICAgICBpZiAobWFya2VyRGF0YSAmJiBtYXJrZXJEYXRhLmxvY2F0aW9uLmVsZXZhdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAvLyBHZXQgbWFya2VycyBvZiBzYW1lIHR5cGUgdG8gZGV0ZXJtaW5lIGluZGV4XG4gICAgICAgIGNvbnN0IHNhbWVUeXBlTWFya2VycyA9IG1hcmtlcnMuZmlsdGVyKG0gPT4gbS50eXBlID09PSBtYXJrZXJEYXRhLnR5cGUpO1xuICAgICAgICBjb25zdCBtYXJrZXJJbmRleCA9IHNhbWVUeXBlTWFya2Vycy5maW5kSW5kZXgobSA9PiBtLmlkID09PSBtYXJrZXJEYXRhLmlkKTtcbiAgICAgICAgY29uc3QgaGFzTXVsdGlwbGUgPSBzYW1lVHlwZU1hcmtlcnMubGVuZ3RoID4gMTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRQb3B1cCA9IGNyZWF0ZU1hcmtlclBvcHVwKFxuICAgICAgICAgIG1hcmtlckRhdGEudHlwZSxcbiAgICAgICAgICBtYXJrZXJEYXRhLmxvY2F0aW9uLmVsZXZhdGlvbixcbiAgICAgICAgICBtYXJrZXJEYXRhLmVsZXZhdGlvbk9mZnNldCxcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICByZWYubWFya2VyLnJlbW92ZSgpO1xuICAgICAgICAgICAgcmVtb3ZlTWFya2VyKHJlZi5pZCk7XG4gICAgICAgICAgICBtYXJrZXJSZWZzLmN1cnJlbnQgPSBtYXJrZXJSZWZzLmN1cnJlbnQuZmlsdGVyKGl0ZW0gPT4gaXRlbS5pZCAhPT0gcmVmLmlkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1hcmtlckRhdGEuaWQsXG4gICAgICAgICAgbWFya2VySW5kZXgsXG4gICAgICAgICAgaGFzTXVsdGlwbGVcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIHJlZi5tYXJrZXIuc2V0UG9wdXAodXBkYXRlZFBvcHVwKTtcbiAgICAgICAgaWYgKHJlZi5tYXJrZXIuZ2V0UG9wdXAoKT8uaXNPcGVuKCkpIHtcbiAgICAgICAgICByZWYubWFya2VyLmdldFBvcHVwKCk/LnNldERPTUNvbnRlbnQodXBkYXRlZFBvcHVwLmdldEVsZW1lbnQoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW21hcmtlcnMsIHJlbW92ZU1hcmtlcl0pO1xuXG4gIC8vIFJlbW92ZSBhbGwgdGhlIGFuYWx5c2lzIGxheWVyc1xuICBjb25zdCByZW1vdmVBbGxBbmFseXNpc0xheWVycyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAvLyBSZW1vdmUgdGhlIGFuYWx5c2lzIGxheWVyc1xuICAgIGxheWVyTWFuYWdlci5yZW1vdmVMYXllcihNQVBfTEFZRVJTLkVMT1NfR1JJRCk7XG4gICAgbGF5ZXJNYW5hZ2VyLnJlbW92ZUxheWVyKE1BUF9MQVlFUlMuRkxJR0hUX1BBVEhfVklTSUJJTElUWSk7XG4gICAgbGF5ZXJNYW5hZ2VyLnJlbW92ZUxheWVyKE1BUF9MQVlFUlMuR0NTX0dSSUQpO1xuICAgIGxheWVyTWFuYWdlci5yZW1vdmVMYXllcihNQVBfTEFZRVJTLk9CU0VSVkVSX0dSSUQpO1xuICAgIGxheWVyTWFuYWdlci5yZW1vdmVMYXllcihNQVBfTEFZRVJTLlJFUEVBVEVSX0dSSUQpO1xuICAgIGxheWVyTWFuYWdlci5yZW1vdmVMYXllcihNQVBfTEFZRVJTLk1FUkdFRF9WSVNJQklMSVRZKTtcbiAgICBsYXllck1hbmFnZXIucmVtb3ZlTGF5ZXIoTUFQX0xBWUVSUy5BT1RFUlJBSU5fR1JJRCk7XG4gICAgXG4gICAgLy8gUmVzZXQgdGhlIGdyaWQgc3RhdGUgaW4gY29udGV4dCBzbyBpdCBjYW4gYmUgcmVnZW5lcmF0ZWRcbiAgICBzZXRBb1RlcnJhaW5HcmlkKG51bGwpO1xuICAgIFxuICAgIC8vIEFsc28gcmVtb3ZlIGFueSBtYXJrZXItc3BlY2lmaWMgbGF5ZXJzIHVzaW5nIG1hcmtlciBJRHNcbiAgICBtYXJrZXJzLmZvckVhY2gobWFya2VyID0+IHtcbiAgICAgIGNvbnN0IGxheWVyUHJlZml4ID0gbWFya2VyLnR5cGUgPT09ICdnY3MnIFxuICAgICAgICA/IE1BUF9MQVlFUlMuR0NTX0dSSUQgXG4gICAgICAgIDogbWFya2VyLnR5cGUgPT09ICdvYnNlcnZlcicgXG4gICAgICAgICAgPyBNQVBfTEFZRVJTLk9CU0VSVkVSX0dSSUQgXG4gICAgICAgICAgOiBNQVBfTEFZRVJTLlJFUEVBVEVSX0dSSUQ7XG4gICAgICBcbiAgICAgIGxheWVyTWFuYWdlci5yZW1vdmVMYXllcihgJHtsYXllclByZWZpeH0tJHttYXJrZXIuaWR9YCk7XG4gICAgfSk7XG4gIH0sIFttYXJrZXJzLCBzZXRBb1RlcnJhaW5HcmlkXSk7XG5cbiAgXG4gIC8vIENsZWFudXAgb24gdW5tb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBtYXJrZXJSZWZzLmN1cnJlbnQuZm9yRWFjaChyZWYgPT4ge1xuICAgICAgICByZWYubWFya2VyLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgbWFya2VycywgLy8gUHJvdmlkZSBhY2Nlc3MgdG8gYWxsIG1hcmtlcnNcbiAgICBhZGRHcm91bmRTdGF0aW9uLFxuICAgIGFkZE9ic2VydmVyLFxuICAgIGFkZFJlcGVhdGVyLFxuICAgIHVwZGF0ZU1hcmtlclBvcHVwcyxcbiAgICByZW1vdmVBbGxBbmFseXNpc0xheWVycyxcbiAgICBtYXJrZXJSZWZzLFxuICAgIGVycm9yIC8vIEV4cG9zZSB0aGUgZXJyb3Igc3RhdGUgZm9yIHByZW1pdW0gdGllciByZXN0cmljdGlvbnNcbiAgfTtcbn0iXSwibmFtZXMiOlsidXNlUmVmIiwidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsIm1hcGJveGdsIiwidXNlTWFya2Vyc0NvbnRleHQiLCJjcmVhdGVNYXJrZXJQb3B1cCIsImxheWVyTWFuYWdlciIsIk1BUF9MQVlFUlMiLCJ0cmFja0V2ZW50V2l0aEZvcm0iLCJ0cmFja0V2ZW50IiwidXNlQXJlYU9mT3BzQ29udGV4dCIsInVzZU1hcmtlcnMiLCJtYXAiLCJ0ZXJyYWluTG9hZGVkIiwibWFya2VyUmVmcyIsImVycm9yIiwic2V0RXJyb3IiLCJtYXJrZXJzIiwiYWRkTWFya2VyIiwidXBkYXRlTWFya2VyIiwicmVtb3ZlTWFya2VyIiwiZGVmYXVsdEVsZXZhdGlvbk9mZnNldHMiLCJzZXRBb1RlcnJhaW5HcmlkIiwicXVlcnlUZXJyYWluRWxldmF0aW9uIiwiY29vcmRpbmF0ZXMiLCJyZXRyeUNvdW50IiwiRXJyb3IiLCJlbGV2YXRpb24iLCJ1bmRlZmluZWQiLCJjb25zb2xlIiwid2FybiIsImZhbGxiYWNrRWxldmF0aW9uIiwiZmV0Y2hUZXJyYWluRWxldmF0aW9uIiwiZmFsbGJhY2tFcnJvciIsImxuZyIsImxhdCIsInRpbGVTaXplIiwiem9vbSIsInNjYWxlIiwiTWF0aCIsInBvdyIsImxhdFJhZCIsIlBJIiwidGlsZVgiLCJmbG9vciIsInRpbGVZIiwibG9nIiwidGFuIiwiY29zIiwicGl4ZWxYIiwicGl4ZWxZIiwidGlsZVVSTCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19NQVBCT1hfQUNDRVNTX1RPS0VOIiwicmVzcG9uc2UiLCJmZXRjaCIsImJsb2IiLCJpbWFnZUJpdG1hcCIsImNyZWF0ZUltYWdlQml0bWFwIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJoZWlnaHQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImRyYXdJbWFnZSIsImltYWdlRGF0YSIsImdldEltYWdlRGF0YSIsImlkeCIsInIiLCJnIiwiYiIsImRhdGEiLCJjcmVhdGVNYXJrZXJMYWJlbCIsImluZGV4IiwibWFya2VyVHlwZSIsImVsIiwiY2xhc3NOYW1lIiwidGV4dENvbnRlbnQiLCJzdHlsZSIsImNzc1RleHQiLCJjcmVhdGVNYXJrZXIiLCJ0eXBlIiwiY2VudGVyIiwiZ2V0Q2VudGVyIiwiaW5pdGlhbExvY2F0aW9uIiwidG9VcHBlckNhc2UiLCJyZXN1bHQiLCJzdWNjZXNzIiwibWFya2VySWQiLCJtYXJrZXJDb2xvcnMiLCJnY3MiLCJvYnNlcnZlciIsInJlcGVhdGVyIiwic2FtZVR5cGVNYXJrZXJzIiwiZmlsdGVyIiwibSIsIm1hcmtlckluZGV4IiwibGVuZ3RoIiwiaGFzTXVsdGlwbGUiLCJuZXdNYXJrZXIiLCJNYXJrZXIiLCJjb2xvciIsImRyYWdnYWJsZSIsInNldExuZ0xhdCIsImFkZFRvIiwibGFiZWwiLCJtYXJrZXJFbGVtZW50IiwiZ2V0RWxlbWVudCIsImFwcGVuZENoaWxkIiwiY3VycmVudCIsInB1c2giLCJpZCIsIm1hcmtlciIsInBvcHVwIiwicmVtb3ZlIiwicmVmIiwic2V0UG9wdXAiLCJ0b2dnbGVQb3B1cCIsIm9uIiwibG5nTGF0IiwiZ2V0TG5nTGF0IiwibmV3RWxldmF0aW9uIiwibG9jYXRpb24iLCJsYXllclByZWZpeCIsIkdDU19HUklEIiwiT0JTRVJWRVJfR1JJRCIsIlJFUEVBVEVSX0dSSUQiLCJyZW1vdmVMYXllciIsIk1FUkdFRF9WSVNJQklMSVRZIiwiY3VycmVudFNhbWVUeXBlTWFya2VycyIsImN1cnJlbnRNYXJrZXJJbmRleCIsImZpbmRJbmRleCIsImhhc011bHRpcGxlTm93IiwibmV3UG9wdXAiLCJtZXNzYWdlIiwiYWRkR3JvdW5kU3RhdGlvbiIsInBhbmVsIiwiYWRkT2JzZXJ2ZXIiLCJhZGRSZXBlYXRlciIsInVwZGF0ZU1hcmtlclBvcHVwcyIsImZvckVhY2giLCJtYXJrZXJEYXRhIiwiZmluZCIsInVwZGF0ZWRQb3B1cCIsImVsZXZhdGlvbk9mZnNldCIsIml0ZW0iLCJnZXRQb3B1cCIsImlzT3BlbiIsInNldERPTUNvbnRlbnQiLCJyZW1vdmVBbGxBbmFseXNpc0xheWVycyIsIkVMT1NfR1JJRCIsIkZMSUdIVF9QQVRIX1ZJU0lCSUxJVFkiLCJBT1RFUlJBSU5fR1JJRCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/Hooks/useMarkers.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/Hooks/useMeasurement.ts":
/*!********************************************************!*\
  !*** ./src/app/components/Map/Hooks/useMeasurement.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useMeasurement: () => (/* binding */ useMeasurement)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/distance/dist/esm/index.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mapbox-gl */ \"(ssr)/./node_modules/mapbox-gl/dist/mapbox-gl.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_tracking_tracking__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/tracking/tracking */ \"(ssr)/./src/app/components/tracking/tracking.js\");\n// useMeasurement.ts\n// This hook handles distance measurement functionality on the map,\n// allowing users to click points and visualize the distance between them.\n// It integrates with the MapContext to access the map instance and provides\n// a clean API for measuring distances with visual feedback.\n\n\n\n\n\nconst useMeasurement = ()=>{\n    const { map } = (0,_context_mapcontext__WEBPACK_IMPORTED_MODULE_1__.useMapContext)();\n    const [measurement, setMeasurement] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isMeasuring, setIsMeasuring] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Use refs to maintain consistent references for event handlers\n    const markersRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n    const movingPopupRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const pointsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n    // Constants for layer IDs\n    const FIXED_LINE_SOURCE = 'measurement-fixed-line-source';\n    const TEMP_LINE_SOURCE = 'measurement-temp-line-source';\n    const FIXED_LINE_LAYER = 'measurement-fixed-line-layer';\n    const TEMP_LINE_LAYER = 'measurement-temp-line-layer';\n    // Clean up measurement resources\n    const cleanupMeasurement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMeasurement.useCallback[cleanupMeasurement]\": ()=>{\n            // Add comprehensive map validation\n            if (!map || !map.getStyle || !map.getCanvas) {\n                console.warn(\"Map not available or already destroyed during measurement cleanup\");\n                return;\n            }\n            try {\n                // Check if map is still loaded\n                if (!map.loaded()) {\n                    console.warn(\"Map not loaded during measurement cleanup\");\n                    return;\n                }\n            } catch (mapStateError) {\n                console.warn(\"Error checking map state during cleanup:\", mapStateError);\n                return;\n            }\n            // Remove markers\n            markersRef.current.forEach({\n                \"useMeasurement.useCallback[cleanupMeasurement]\": (marker)=>{\n                    try {\n                        marker.remove();\n                    } catch (markerError) {\n                        console.warn(\"Error removing marker:\", markerError);\n                    }\n                }\n            }[\"useMeasurement.useCallback[cleanupMeasurement]\"]);\n            markersRef.current = [];\n            // Remove popup\n            if (movingPopupRef.current) {\n                try {\n                    movingPopupRef.current.remove();\n                    movingPopupRef.current = null;\n                } catch (popupError) {\n                    console.warn(\"Error removing popup:\", popupError);\n                }\n            }\n            // Remove layers and sources - carefully check if they exist first\n            try {\n                if (map.getLayer && map.getLayer(FIXED_LINE_LAYER)) {\n                    map.removeLayer(FIXED_LINE_LAYER);\n                }\n                if (map.getLayer && map.getLayer(TEMP_LINE_LAYER)) {\n                    map.removeLayer(TEMP_LINE_LAYER);\n                }\n                if (map.getSource && map.getSource(FIXED_LINE_SOURCE)) {\n                    map.removeSource(FIXED_LINE_SOURCE);\n                }\n                if (map.getSource && map.getSource(TEMP_LINE_SOURCE)) {\n                    map.removeSource(TEMP_LINE_SOURCE);\n                }\n            } catch (e) {\n                console.error(\"Error cleaning up measurement layers:\", e);\n            }\n            // Reset cursor and points - with additional safety checks\n            try {\n                if (map.getCanvas && map.getCanvas()) {\n                    map.getCanvas().style.cursor = '';\n                }\n            } catch (canvasError) {\n                console.warn(\"Error resetting cursor:\", canvasError);\n            }\n            pointsRef.current = [];\n        }\n    }[\"useMeasurement.useCallback[cleanupMeasurement]\"], [\n        map\n    ]);\n    // Clear all current measurements but keep measuring active\n    const clearMeasurement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMeasurement.useCallback[clearMeasurement]\": ()=>{\n            if (!map) return;\n            // Remove markers\n            markersRef.current.forEach({\n                \"useMeasurement.useCallback[clearMeasurement]\": (marker)=>marker.remove()\n            }[\"useMeasurement.useCallback[clearMeasurement]\"]);\n            markersRef.current = [];\n            // Reset the fixed line to empty\n            try {\n                if (map.getSource(FIXED_LINE_SOURCE)) {\n                    const source = map.getSource(FIXED_LINE_SOURCE);\n                    source.setData({\n                        type: 'FeatureCollection',\n                        features: []\n                    });\n                }\n                if (map.getSource(TEMP_LINE_SOURCE)) {\n                    const tempSource = map.getSource(TEMP_LINE_SOURCE);\n                    tempSource.setData({\n                        type: 'FeatureCollection',\n                        features: []\n                    });\n                }\n            } catch (e) {\n                console.error(\"Error clearing measurement lines:\", e);\n            }\n            // Reset points and measurement data\n            pointsRef.current = [];\n            setMeasurement({\n                distance: 0,\n                points: [],\n                segments: []\n            });\n            (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_3__.trackEventWithForm)('measurement_cleared', {\n                panel: 'measurement-controls'\n            });\n        }\n    }[\"useMeasurement.useCallback[clearMeasurement]\"], [\n        map\n    ]);\n    // Handle click to add measurement point\n    const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMeasurement.useCallback[handleClick]\": (e)=>{\n            if (!map || !isMeasuring) return;\n            const point = [\n                e.lngLat.lng,\n                e.lngLat.lat\n            ];\n            pointsRef.current.push(point);\n            const points = pointsRef.current;\n            // Update GeoJSON for the line\n            try {\n                if (map.getSource(FIXED_LINE_SOURCE)) {\n                    const source = map.getSource(FIXED_LINE_SOURCE);\n                    source.setData({\n                        type: 'FeatureCollection',\n                        features: points.length >= 2 ? [\n                            {\n                                type: 'Feature',\n                                geometry: {\n                                    type: 'LineString',\n                                    coordinates: points\n                                },\n                                properties: {}\n                            }\n                        ] : []\n                    });\n                }\n            } catch (e) {\n                console.error(\"Error updating fixed line source:\", e);\n            }\n            // Calculate segment and total distances\n            let segments = [];\n            let totalDistance = 0;\n            if (points.length >= 2) {\n                for(let i = 1; i < points.length; i++){\n                    const segment = _turf_turf__WEBPACK_IMPORTED_MODULE_4__.distance(points[i - 1], points[i], {\n                        units: 'meters'\n                    });\n                    segments.push(segment);\n                    totalDistance += segment;\n                }\n            }\n            // Add marker at clicked point\n            try {\n                const marker = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_2___default().Marker)({\n                    color: '#4B56D2'\n                }).setLngLat(point).addTo(map);\n                // Add popup with distance information\n                if (points.length > 1) {\n                    const lastSegmentDistance = segments[segments.length - 1];\n                    const popup = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_2___default().Popup)({\n                        closeButton: false,\n                        className: 'custom-popup',\n                        offset: 25\n                    }).setLngLat(point).setHTML(`<strong style=\"color: black; background: white; padding: 4px;\">Segment: ${(lastSegmentDistance / 1000).toFixed(2)} km<br>Total: ${(totalDistance / 1000).toFixed(2)} km</strong>`);\n                    marker.setPopup(popup);\n                    popup.addTo(map);\n                } else {\n                    // First point just shows \"Start\"\n                    const popup = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_2___default().Popup)({\n                        closeButton: false,\n                        className: 'custom-popup',\n                        offset: 25\n                    }).setLngLat(point).setHTML(`<strong style=\"color: black; background: white; padding: 4px;\">Start</strong>`);\n                    marker.setPopup(popup);\n                    popup.addTo(map);\n                }\n                markersRef.current.push(marker);\n            } catch (e) {\n                console.error(\"Error adding marker:\", e);\n            }\n            // Reset temporary line\n            try {\n                if (map.getSource(TEMP_LINE_SOURCE)) {\n                    const tempSource = map.getSource(TEMP_LINE_SOURCE);\n                    tempSource.setData({\n                        type: 'FeatureCollection',\n                        features: []\n                    });\n                }\n            } catch (e) {\n                console.error(\"Error updating temp line source:\", e);\n            }\n            // Update measurement state\n            setMeasurement({\n                distance: totalDistance,\n                points: [\n                    ...points\n                ],\n                segments\n            });\n        }\n    }[\"useMeasurement.useCallback[handleClick]\"], [\n        map,\n        isMeasuring\n    ]);\n    // Handle mouse move to update temporary line\n    const handleMouseMove = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMeasurement.useCallback[handleMouseMove]\": (e)=>{\n            if (!map || !isMeasuring || pointsRef.current.length === 0) return;\n            const mousePoint = [\n                e.lngLat.lng,\n                e.lngLat.lat\n            ];\n            const lastPoint = pointsRef.current[pointsRef.current.length - 1];\n            // Update temporary line\n            try {\n                if (map.getSource(TEMP_LINE_SOURCE)) {\n                    const tempSource = map.getSource(TEMP_LINE_SOURCE);\n                    tempSource.setData({\n                        type: 'FeatureCollection',\n                        features: [\n                            {\n                                type: 'Feature',\n                                geometry: {\n                                    type: 'LineString',\n                                    coordinates: [\n                                        lastPoint,\n                                        mousePoint\n                                    ]\n                                },\n                                properties: {}\n                            }\n                        ]\n                    });\n                }\n            } catch (e) {\n                console.error(\"Error updating temp line source:\", e);\n            }\n            // Update moving popup with distance\n            const distance = _turf_turf__WEBPACK_IMPORTED_MODULE_4__.distance(lastPoint, mousePoint, {\n                units: 'meters'\n            });\n            try {\n                if (!movingPopupRef.current) {\n                    movingPopupRef.current = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_2___default().Popup)({\n                        closeButton: false,\n                        className: 'custom-popup',\n                        offset: 25\n                    }).addTo(map);\n                }\n                movingPopupRef.current.setLngLat(e.lngLat).setHTML(`<strong style=\"color: black; background: white; padding: 4px;\">${(distance / 1000).toFixed(2)} km</strong>`);\n            } catch (e) {\n                console.error(\"Error updating moving popup:\", e);\n            }\n        }\n    }[\"useMeasurement.useCallback[handleMouseMove]\"], [\n        map,\n        isMeasuring\n    ]);\n    // Start a new measurement\n    const startMeasurement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMeasurement.useCallback[startMeasurement]\": ()=>{\n            if (!map) return;\n            // First clean up any existing measurement\n            cleanupMeasurement();\n            // Set up measurement layers\n            try {\n                // Initialize fixed line source/layer for completed segments\n                map.addSource(FIXED_LINE_SOURCE, {\n                    type: 'geojson',\n                    data: {\n                        type: 'FeatureCollection',\n                        features: []\n                    }\n                });\n                map.addLayer({\n                    id: FIXED_LINE_LAYER,\n                    type: 'line',\n                    source: FIXED_LINE_SOURCE,\n                    paint: {\n                        'line-color': '#4B56D2',\n                        'line-width': 3\n                    }\n                });\n                // Initialize temp line source/layer for active segment\n                map.addSource(TEMP_LINE_SOURCE, {\n                    type: 'geojson',\n                    data: {\n                        type: 'FeatureCollection',\n                        features: []\n                    }\n                });\n                map.addLayer({\n                    id: TEMP_LINE_LAYER,\n                    type: 'line',\n                    source: TEMP_LINE_SOURCE,\n                    paint: {\n                        'line-color': '#4B56D2',\n                        'line-width': 2,\n                        'line-dasharray': [\n                            2,\n                            2\n                        ]\n                    }\n                });\n                // Change cursor to crosshair\n                map.getCanvas().style.cursor = 'crosshair';\n                // Initialize state\n                setIsMeasuring(true);\n                pointsRef.current = [];\n                setMeasurement({\n                    distance: 0,\n                    points: [],\n                    segments: []\n                });\n                (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_3__.trackEventWithForm)('measurement_started', {\n                    panel: 'measurement-controls'\n                });\n            } catch (e) {\n                console.error(\"Error initializing measurement:\", e);\n            }\n        }\n    }[\"useMeasurement.useCallback[startMeasurement]\"], [\n        map,\n        cleanupMeasurement\n    ]);\n    // Stop measuring\n    const stopMeasurement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMeasurement.useCallback[stopMeasurement]\": ()=>{\n            if (!map) return;\n            setIsMeasuring(false);\n            // Remove the temporary line and moving popup\n            try {\n                if (movingPopupRef.current) {\n                    movingPopupRef.current.remove();\n                    movingPopupRef.current = null;\n                }\n                if (map.getSource(TEMP_LINE_SOURCE)) {\n                    const tempSource = map.getSource(TEMP_LINE_SOURCE);\n                    tempSource.setData({\n                        type: 'FeatureCollection',\n                        features: []\n                    });\n                }\n                // Reset cursor\n                map.getCanvas().style.cursor = '';\n            } catch (e) {\n                console.error(\"Error stopping measurement:\", e);\n            }\n        }\n    }[\"useMeasurement.useCallback[stopMeasurement]\"], [\n        map\n    ]);\n    // Handle right-click to finish measurement\n    const handleRightClick = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMeasurement.useCallback[handleRightClick]\": (e)=>{\n            if (!map || !isMeasuring) return;\n            e.preventDefault();\n            stopMeasurement();\n            (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_3__.trackEventWithForm)('measurement_completed', {\n                panel: 'measurement-controls',\n                points: pointsRef.current.length,\n                distance: measurement?.distance || 0\n            });\n        }\n    }[\"useMeasurement.useCallback[handleRightClick]\"], [\n        map,\n        isMeasuring,\n        measurement,\n        stopMeasurement\n    ]);\n    // Set up and clean up event listeners\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useMeasurement.useEffect\": ()=>{\n            if (!map) return;\n            if (isMeasuring) {\n                map.on('click', handleClick);\n                map.on('mousemove', handleMouseMove);\n                map.on('contextmenu', handleRightClick);\n            }\n            return ({\n                \"useMeasurement.useEffect\": ()=>{\n                    if (map) {\n                        map.off('click', handleClick);\n                        map.off('mousemove', handleMouseMove);\n                        map.off('contextmenu', handleRightClick);\n                    }\n                }\n            })[\"useMeasurement.useEffect\"];\n        }\n    }[\"useMeasurement.useEffect\"], [\n        map,\n        isMeasuring,\n        handleClick,\n        handleMouseMove,\n        handleRightClick\n    ]);\n    // Clean up when the component unmounts\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useMeasurement.useEffect\": ()=>{\n            return ({\n                \"useMeasurement.useEffect\": ()=>{\n                    // Use setTimeout to ensure cleanup happens after any pending operations\n                    setTimeout({\n                        \"useMeasurement.useEffect\": ()=>{\n                            try {\n                                cleanupMeasurement();\n                            } catch (cleanupError) {\n                                console.warn(\"Error during measurement cleanup:\", cleanupError);\n                            }\n                        }\n                    }[\"useMeasurement.useEffect\"], 0);\n                }\n            })[\"useMeasurement.useEffect\"];\n        }\n    }[\"useMeasurement.useEffect\"], [\n        cleanupMeasurement\n    ]);\n    return {\n        startMeasurement,\n        stopMeasurement,\n        clearMeasurement,\n        measurement,\n        isMeasuring\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL0hvb2tzL3VzZU1lYXN1cmVtZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsb0JBQW9CO0FBQ3BCLG1FQUFtRTtBQUNuRSwwRUFBMEU7QUFDMUUsNEVBQTRFO0FBQzVFLDREQUE0RDtBQUVLO0FBQ0w7QUFDekI7QUFDRjtBQUN3RDtBQVFsRixNQUFNUyxpQkFBaUI7SUFDNUIsTUFBTSxFQUFFQyxHQUFHLEVBQUUsR0FBR04sa0VBQWFBO0lBQzdCLE1BQU0sQ0FBQ08sYUFBYUMsZUFBZSxHQUFHWCwrQ0FBUUEsQ0FBMkI7SUFDekUsTUFBTSxDQUFDWSxhQUFhQyxlQUFlLEdBQUdiLCtDQUFRQSxDQUFDO0lBRS9DLGdFQUFnRTtJQUNoRSxNQUFNYyxhQUFhWiw2Q0FBTUEsQ0FBb0IsRUFBRTtJQUMvQyxNQUFNYSxpQkFBaUJiLDZDQUFNQSxDQUF3QjtJQUNyRCxNQUFNYyxZQUFZZCw2Q0FBTUEsQ0FBcUIsRUFBRTtJQUUvQywwQkFBMEI7SUFDMUIsTUFBTWUsb0JBQW9CO0lBQzFCLE1BQU1DLG1CQUFtQjtJQUN6QixNQUFNQyxtQkFBbUI7SUFDekIsTUFBTUMsa0JBQWtCO0lBR3hCLGlDQUFpQztJQUNqQyxNQUFNQyxxQkFBcUJ0QixrREFBV0E7MERBQUM7WUFDckMsbUNBQW1DO1lBQ25DLElBQUksQ0FBQ1UsT0FBTyxDQUFDQSxJQUFJYSxRQUFRLElBQUksQ0FBQ2IsSUFBSWMsU0FBUyxFQUFFO2dCQUMzQ0MsUUFBUUMsSUFBSSxDQUFDO2dCQUNiO1lBQ0Y7WUFFQSxJQUFJO2dCQUNGLCtCQUErQjtnQkFDL0IsSUFBSSxDQUFDaEIsSUFBSWlCLE1BQU0sSUFBSTtvQkFDakJGLFFBQVFDLElBQUksQ0FBQztvQkFDYjtnQkFDRjtZQUNGLEVBQUUsT0FBT0UsZUFBZTtnQkFDdEJILFFBQVFDLElBQUksQ0FBQyw0Q0FBNENFO2dCQUN6RDtZQUNGO1lBRUEsaUJBQWlCO1lBQ2pCYixXQUFXYyxPQUFPLENBQUNDLE9BQU87a0VBQUNDLENBQUFBO29CQUN6QixJQUFJO3dCQUNGQSxPQUFPQyxNQUFNO29CQUNmLEVBQUUsT0FBT0MsYUFBYTt3QkFDcEJSLFFBQVFDLElBQUksQ0FBQywwQkFBMEJPO29CQUN6QztnQkFDRjs7WUFDQWxCLFdBQVdjLE9BQU8sR0FBRyxFQUFFO1lBRXZCLGVBQWU7WUFDZixJQUFJYixlQUFlYSxPQUFPLEVBQUU7Z0JBQzFCLElBQUk7b0JBQ0ZiLGVBQWVhLE9BQU8sQ0FBQ0csTUFBTTtvQkFDN0JoQixlQUFlYSxPQUFPLEdBQUc7Z0JBQzNCLEVBQUUsT0FBT0ssWUFBWTtvQkFDbkJULFFBQVFDLElBQUksQ0FBQyx5QkFBeUJRO2dCQUN4QztZQUNGO1lBRUEsa0VBQWtFO1lBQ2xFLElBQUk7Z0JBQ0YsSUFBSXhCLElBQUl5QixRQUFRLElBQUl6QixJQUFJeUIsUUFBUSxDQUFDZixtQkFBbUI7b0JBQ2xEVixJQUFJMEIsV0FBVyxDQUFDaEI7Z0JBQ2xCO2dCQUVBLElBQUlWLElBQUl5QixRQUFRLElBQUl6QixJQUFJeUIsUUFBUSxDQUFDZCxrQkFBa0I7b0JBQ2pEWCxJQUFJMEIsV0FBVyxDQUFDZjtnQkFDbEI7Z0JBRUEsSUFBSVgsSUFBSTJCLFNBQVMsSUFBSTNCLElBQUkyQixTQUFTLENBQUNuQixvQkFBb0I7b0JBQ3JEUixJQUFJNEIsWUFBWSxDQUFDcEI7Z0JBQ25CO2dCQUVBLElBQUlSLElBQUkyQixTQUFTLElBQUkzQixJQUFJMkIsU0FBUyxDQUFDbEIsbUJBQW1CO29CQUNwRFQsSUFBSTRCLFlBQVksQ0FBQ25CO2dCQUNuQjtZQUNGLEVBQUUsT0FBT29CLEdBQUc7Z0JBQ1ZkLFFBQVFlLEtBQUssQ0FBQyx5Q0FBeUNEO1lBQ3pEO1lBRUEsMERBQTBEO1lBQzFELElBQUk7Z0JBQ0YsSUFBSTdCLElBQUljLFNBQVMsSUFBSWQsSUFBSWMsU0FBUyxJQUFJO29CQUNwQ2QsSUFBSWMsU0FBUyxHQUFHaUIsS0FBSyxDQUFDQyxNQUFNLEdBQUc7Z0JBQ2pDO1lBQ0YsRUFBRSxPQUFPQyxhQUFhO2dCQUNwQmxCLFFBQVFDLElBQUksQ0FBQywyQkFBMkJpQjtZQUMxQztZQUVBMUIsVUFBVVksT0FBTyxHQUFHLEVBQUU7UUFDeEI7eURBQUc7UUFBQ25CO0tBQUk7SUFFUiwyREFBMkQ7SUFDM0QsTUFBTWtDLG1CQUFtQjVDLGtEQUFXQTt3REFBQztZQUNuQyxJQUFJLENBQUNVLEtBQUs7WUFFVixpQkFBaUI7WUFDakJLLFdBQVdjLE9BQU8sQ0FBQ0MsT0FBTztnRUFBQ0MsQ0FBQUEsU0FBVUEsT0FBT0MsTUFBTTs7WUFDbERqQixXQUFXYyxPQUFPLEdBQUcsRUFBRTtZQUV2QixnQ0FBZ0M7WUFDaEMsSUFBSTtnQkFDRixJQUFJbkIsSUFBSTJCLFNBQVMsQ0FBQ25CLG9CQUFvQjtvQkFDcEMsTUFBTTJCLFNBQVNuQyxJQUFJMkIsU0FBUyxDQUFDbkI7b0JBQzdCMkIsT0FBT0MsT0FBTyxDQUFDO3dCQUNiQyxNQUFNO3dCQUNOQyxVQUFVLEVBQUU7b0JBQ2Q7Z0JBQ0Y7Z0JBRUEsSUFBSXRDLElBQUkyQixTQUFTLENBQUNsQixtQkFBbUI7b0JBQ25DLE1BQU04QixhQUFhdkMsSUFBSTJCLFNBQVMsQ0FBQ2xCO29CQUNqQzhCLFdBQVdILE9BQU8sQ0FBQzt3QkFDakJDLE1BQU07d0JBQ05DLFVBQVUsRUFBRTtvQkFDZDtnQkFDRjtZQUNGLEVBQUUsT0FBT1QsR0FBRztnQkFDVmQsUUFBUWUsS0FBSyxDQUFDLHFDQUFxQ0Q7WUFDckQ7WUFFQSxvQ0FBb0M7WUFDcEN0QixVQUFVWSxPQUFPLEdBQUcsRUFBRTtZQUN0QmpCLGVBQWU7Z0JBQUVzQyxVQUFVO2dCQUFHQyxRQUFRLEVBQUU7Z0JBQUVDLFVBQVUsRUFBRTtZQUFDO1lBRXZENUMsaUZBQVVBLENBQUMsdUJBQXVCO2dCQUFFNkMsT0FBTztZQUF1QjtRQUNwRTt1REFBRztRQUFDM0M7S0FBSTtJQUVSLHdDQUF3QztJQUN4QyxNQUFNNEMsY0FBY3RELGtEQUFXQTttREFBQyxDQUFDdUM7WUFDL0IsSUFBSSxDQUFDN0IsT0FBTyxDQUFDRyxhQUFhO1lBRTFCLE1BQU0wQyxRQUEwQjtnQkFBQ2hCLEVBQUVpQixNQUFNLENBQUNDLEdBQUc7Z0JBQUVsQixFQUFFaUIsTUFBTSxDQUFDRSxHQUFHO2FBQUM7WUFDNUR6QyxVQUFVWSxPQUFPLENBQUM4QixJQUFJLENBQUNKO1lBQ3ZCLE1BQU1KLFNBQVNsQyxVQUFVWSxPQUFPO1lBRWhDLDhCQUE4QjtZQUM5QixJQUFJO2dCQUNGLElBQUluQixJQUFJMkIsU0FBUyxDQUFDbkIsb0JBQW9CO29CQUNwQyxNQUFNMkIsU0FBU25DLElBQUkyQixTQUFTLENBQUNuQjtvQkFDN0IyQixPQUFPQyxPQUFPLENBQUM7d0JBQ2JDLE1BQU07d0JBQ05DLFVBQVVHLE9BQU9TLE1BQU0sSUFBSSxJQUFJOzRCQUM3QjtnQ0FDRWIsTUFBTTtnQ0FDTmMsVUFBVTtvQ0FDUmQsTUFBTTtvQ0FDTmUsYUFBYVg7Z0NBQ2Y7Z0NBQ0FZLFlBQVksQ0FBQzs0QkFDZjt5QkFDRCxHQUFHLEVBQUU7b0JBQ1I7Z0JBQ0Y7WUFDRixFQUFFLE9BQU94QixHQUFHO2dCQUNWZCxRQUFRZSxLQUFLLENBQUMscUNBQXFDRDtZQUNyRDtZQUVBLHdDQUF3QztZQUN4QyxJQUFJYSxXQUFxQixFQUFFO1lBQzNCLElBQUlZLGdCQUFnQjtZQUVwQixJQUFJYixPQUFPUyxNQUFNLElBQUksR0FBRztnQkFDdEIsSUFBSyxJQUFJSyxJQUFJLEdBQUdBLElBQUlkLE9BQU9TLE1BQU0sRUFBRUssSUFBSztvQkFDdEMsTUFBTUMsVUFBVTdELGdEQUFhLENBQUM4QyxNQUFNLENBQUNjLElBQUUsRUFBRSxFQUFFZCxNQUFNLENBQUNjLEVBQUUsRUFBRTt3QkFBRUUsT0FBTztvQkFBUztvQkFDeEVmLFNBQVNPLElBQUksQ0FBQ087b0JBQ2RGLGlCQUFpQkU7Z0JBQ25CO1lBQ0Y7WUFFQSw4QkFBOEI7WUFDOUIsSUFBSTtnQkFDRixNQUFNbkMsU0FBUyxJQUFJekIseURBQWUsQ0FBQztvQkFBRStELE9BQU87Z0JBQVUsR0FDbkRDLFNBQVMsQ0FBQ2YsT0FDVmdCLEtBQUssQ0FBQzdEO2dCQUVULHNDQUFzQztnQkFDdEMsSUFBSXlDLE9BQU9TLE1BQU0sR0FBRyxHQUFHO29CQUNyQixNQUFNWSxzQkFBc0JwQixRQUFRLENBQUNBLFNBQVNRLE1BQU0sR0FBRyxFQUFFO29CQUN6RCxNQUFNYSxRQUFRLElBQUluRSx3REFBYyxDQUFDO3dCQUMvQnFFLGFBQWE7d0JBQ2JDLFdBQVc7d0JBQ1hDLFFBQVE7b0JBQ1YsR0FDR1AsU0FBUyxDQUFDZixPQUNWdUIsT0FBTyxDQUFDLENBQUMsd0VBQXdFLEVBQUUsQ0FBQ04sc0JBQXNCLElBQUcsRUFBR08sT0FBTyxDQUFDLEdBQUcsY0FBYyxFQUFFLENBQUNmLGdCQUFnQixJQUFHLEVBQUdlLE9BQU8sQ0FBQyxHQUFHLFlBQVksQ0FBQztvQkFFN0xoRCxPQUFPaUQsUUFBUSxDQUFDUDtvQkFDaEJBLE1BQU1GLEtBQUssQ0FBQzdEO2dCQUNkLE9BQU87b0JBQ0wsaUNBQWlDO29CQUNqQyxNQUFNK0QsUUFBUSxJQUFJbkUsd0RBQWMsQ0FBQzt3QkFDL0JxRSxhQUFhO3dCQUNiQyxXQUFXO3dCQUNYQyxRQUFRO29CQUNWLEdBQ0dQLFNBQVMsQ0FBQ2YsT0FDVnVCLE9BQU8sQ0FBQyxDQUFDLDZFQUE2RSxDQUFDO29CQUUxRi9DLE9BQU9pRCxRQUFRLENBQUNQO29CQUNoQkEsTUFBTUYsS0FBSyxDQUFDN0Q7Z0JBQ2Q7Z0JBRUFLLFdBQVdjLE9BQU8sQ0FBQzhCLElBQUksQ0FBQzVCO1lBQzFCLEVBQUUsT0FBT1EsR0FBRztnQkFDVmQsUUFBUWUsS0FBSyxDQUFDLHdCQUF3QkQ7WUFDeEM7WUFFQSx1QkFBdUI7WUFDdkIsSUFBSTtnQkFDRixJQUFJN0IsSUFBSTJCLFNBQVMsQ0FBQ2xCLG1CQUFtQjtvQkFDbkMsTUFBTThCLGFBQWF2QyxJQUFJMkIsU0FBUyxDQUFDbEI7b0JBQ2pDOEIsV0FBV0gsT0FBTyxDQUFDO3dCQUNqQkMsTUFBTTt3QkFDTkMsVUFBVSxFQUFFO29CQUNkO2dCQUNGO1lBQ0YsRUFBRSxPQUFPVCxHQUFHO2dCQUNWZCxRQUFRZSxLQUFLLENBQUMsb0NBQW9DRDtZQUNwRDtZQUVBLDJCQUEyQjtZQUMzQjNCLGVBQWU7Z0JBQ2JzQyxVQUFVYztnQkFDVmIsUUFBUTt1QkFBSUE7aUJBQU87Z0JBQ25CQztZQUNGO1FBQ0Y7a0RBQUc7UUFBQzFDO1FBQUtHO0tBQVk7SUFFckIsNkNBQTZDO0lBQzdDLE1BQU1vRSxrQkFBa0JqRixrREFBV0E7dURBQUMsQ0FBQ3VDO1lBQ25DLElBQUksQ0FBQzdCLE9BQU8sQ0FBQ0csZUFBZUksVUFBVVksT0FBTyxDQUFDK0IsTUFBTSxLQUFLLEdBQUc7WUFFNUQsTUFBTXNCLGFBQStCO2dCQUFDM0MsRUFBRWlCLE1BQU0sQ0FBQ0MsR0FBRztnQkFBRWxCLEVBQUVpQixNQUFNLENBQUNFLEdBQUc7YUFBQztZQUNqRSxNQUFNeUIsWUFBWWxFLFVBQVVZLE9BQU8sQ0FBQ1osVUFBVVksT0FBTyxDQUFDK0IsTUFBTSxHQUFHLEVBQUU7WUFFakUsd0JBQXdCO1lBQ3hCLElBQUk7Z0JBQ0YsSUFBSWxELElBQUkyQixTQUFTLENBQUNsQixtQkFBbUI7b0JBQ25DLE1BQU04QixhQUFhdkMsSUFBSTJCLFNBQVMsQ0FBQ2xCO29CQUNqQzhCLFdBQVdILE9BQU8sQ0FBQzt3QkFDakJDLE1BQU07d0JBQ05DLFVBQVU7NEJBQ1I7Z0NBQ0VELE1BQU07Z0NBQ05jLFVBQVU7b0NBQ1JkLE1BQU07b0NBQ05lLGFBQWE7d0NBQUNxQjt3Q0FBV0Q7cUNBQVc7Z0NBQ3RDO2dDQUNBbkIsWUFBWSxDQUFDOzRCQUNmO3lCQUNEO29CQUNIO2dCQUNGO1lBQ0YsRUFBRSxPQUFPeEIsR0FBRztnQkFDVmQsUUFBUWUsS0FBSyxDQUFDLG9DQUFvQ0Q7WUFDcEQ7WUFFQSxvQ0FBb0M7WUFDcEMsTUFBTVcsV0FBVzdDLGdEQUFhLENBQUM4RSxXQUFXRCxZQUFZO2dCQUFFZixPQUFPO1lBQVM7WUFFeEUsSUFBSTtnQkFDRixJQUFJLENBQUNuRCxlQUFlYSxPQUFPLEVBQUU7b0JBQzNCYixlQUFlYSxPQUFPLEdBQUcsSUFBSXZCLHdEQUFjLENBQUM7d0JBQzFDcUUsYUFBYTt3QkFDYkMsV0FBVzt3QkFDWEMsUUFBUTtvQkFDVixHQUFHTixLQUFLLENBQUM3RDtnQkFDWDtnQkFFQU0sZUFBZWEsT0FBTyxDQUNuQnlDLFNBQVMsQ0FBQy9CLEVBQUVpQixNQUFNLEVBQ2xCc0IsT0FBTyxDQUFDLENBQUMsK0RBQStELEVBQUUsQ0FBQzVCLFdBQVcsSUFBRyxFQUFHNkIsT0FBTyxDQUFDLEdBQUcsWUFBWSxDQUFDO1lBQ3pILEVBQUUsT0FBT3hDLEdBQUc7Z0JBQ1ZkLFFBQVFlLEtBQUssQ0FBQyxnQ0FBZ0NEO1lBQ2hEO1FBQ0Y7c0RBQUc7UUFBQzdCO1FBQUtHO0tBQVk7SUFFckIsMEJBQTBCO0lBQzFCLE1BQU11RSxtQkFBbUJwRixrREFBV0E7d0RBQUM7WUFDbkMsSUFBSSxDQUFDVSxLQUFLO1lBRVYsMENBQTBDO1lBQzFDWTtZQUVBLDRCQUE0QjtZQUM1QixJQUFJO2dCQUNGLDREQUE0RDtnQkFDNURaLElBQUkyRSxTQUFTLENBQUNuRSxtQkFBbUI7b0JBQy9CNkIsTUFBTTtvQkFDTnVDLE1BQU07d0JBQUV2QyxNQUFNO3dCQUFxQkMsVUFBVSxFQUFFO29CQUFDO2dCQUNsRDtnQkFFQXRDLElBQUk2RSxRQUFRLENBQUM7b0JBQ1hDLElBQUlwRTtvQkFDSjJCLE1BQU07b0JBQ05GLFFBQVEzQjtvQkFDUnVFLE9BQU87d0JBQ0wsY0FBYzt3QkFDZCxjQUFjO29CQUNoQjtnQkFDRjtnQkFFQSx1REFBdUQ7Z0JBQ3ZEL0UsSUFBSTJFLFNBQVMsQ0FBQ2xFLGtCQUFrQjtvQkFDOUI0QixNQUFNO29CQUNOdUMsTUFBTTt3QkFBRXZDLE1BQU07d0JBQXFCQyxVQUFVLEVBQUU7b0JBQUM7Z0JBQ2xEO2dCQUVBdEMsSUFBSTZFLFFBQVEsQ0FBQztvQkFDWEMsSUFBSW5FO29CQUNKMEIsTUFBTTtvQkFDTkYsUUFBUTFCO29CQUNSc0UsT0FBTzt3QkFDTCxjQUFjO3dCQUNkLGNBQWM7d0JBQ2Qsa0JBQWtCOzRCQUFDOzRCQUFHO3lCQUFFO29CQUMxQjtnQkFDRjtnQkFFQSw2QkFBNkI7Z0JBQzdCL0UsSUFBSWMsU0FBUyxHQUFHaUIsS0FBSyxDQUFDQyxNQUFNLEdBQUc7Z0JBRS9CLG1CQUFtQjtnQkFDbkI1QixlQUFlO2dCQUNmRyxVQUFVWSxPQUFPLEdBQUcsRUFBRTtnQkFDdEJqQixlQUFlO29CQUFFc0MsVUFBVTtvQkFBR0MsUUFBUSxFQUFFO29CQUFFQyxVQUFVLEVBQUU7Z0JBQUM7Z0JBRXZENUMsaUZBQVVBLENBQUMsdUJBQXVCO29CQUFFNkMsT0FBTztnQkFBdUI7WUFDcEUsRUFBRSxPQUFPZCxHQUFHO2dCQUNWZCxRQUFRZSxLQUFLLENBQUMsbUNBQW1DRDtZQUNuRDtRQUNGO3VEQUFHO1FBQUM3QjtRQUFLWTtLQUFtQjtJQUU1QixpQkFBaUI7SUFDakIsTUFBTW9FLGtCQUFrQjFGLGtEQUFXQTt1REFBQztZQUNsQyxJQUFJLENBQUNVLEtBQUs7WUFFVkksZUFBZTtZQUVmLDZDQUE2QztZQUM3QyxJQUFJO2dCQUNGLElBQUlFLGVBQWVhLE9BQU8sRUFBRTtvQkFDMUJiLGVBQWVhLE9BQU8sQ0FBQ0csTUFBTTtvQkFDN0JoQixlQUFlYSxPQUFPLEdBQUc7Z0JBQzNCO2dCQUVBLElBQUluQixJQUFJMkIsU0FBUyxDQUFDbEIsbUJBQW1CO29CQUNuQyxNQUFNOEIsYUFBYXZDLElBQUkyQixTQUFTLENBQUNsQjtvQkFDakM4QixXQUFXSCxPQUFPLENBQUM7d0JBQ2pCQyxNQUFNO3dCQUNOQyxVQUFVLEVBQUU7b0JBQ2Q7Z0JBQ0Y7Z0JBRUEsZUFBZTtnQkFDZnRDLElBQUljLFNBQVMsR0FBR2lCLEtBQUssQ0FBQ0MsTUFBTSxHQUFHO1lBQ2pDLEVBQUUsT0FBT0gsR0FBRztnQkFDVmQsUUFBUWUsS0FBSyxDQUFDLCtCQUErQkQ7WUFDL0M7UUFDRjtzREFBRztRQUFDN0I7S0FBSTtJQUdSLDJDQUEyQztJQUMzQyxNQUFNaUYsbUJBQW1CM0Ysa0RBQVdBO3dEQUFDLENBQUN1QztZQUNwQyxJQUFJLENBQUM3QixPQUFPLENBQUNHLGFBQWE7WUFFMUIwQixFQUFFcUQsY0FBYztZQUNoQkY7WUFFQWxGLGlGQUFVQSxDQUFDLHlCQUF5QjtnQkFDbEM2QyxPQUFPO2dCQUNQRixRQUFRbEMsVUFBVVksT0FBTyxDQUFDK0IsTUFBTTtnQkFDaENWLFVBQVV2QyxhQUFhdUMsWUFBWTtZQUNyQztRQUNGO3VEQUFHO1FBQUN4QztRQUFLRztRQUFhRjtRQUFhK0U7S0FBZ0I7SUFHbkQsc0NBQXNDO0lBQ3RDeEYsZ0RBQVNBO29DQUFDO1lBQ1IsSUFBSSxDQUFDUSxLQUFLO1lBRVYsSUFBSUcsYUFBYTtnQkFDZkgsSUFBSW1GLEVBQUUsQ0FBQyxTQUFTdkM7Z0JBQ2hCNUMsSUFBSW1GLEVBQUUsQ0FBQyxhQUFhWjtnQkFDcEJ2RSxJQUFJbUYsRUFBRSxDQUFDLGVBQWVGO1lBQ3hCO1lBRUE7NENBQU87b0JBQ0wsSUFBSWpGLEtBQUs7d0JBQ1BBLElBQUlvRixHQUFHLENBQUMsU0FBU3hDO3dCQUNqQjVDLElBQUlvRixHQUFHLENBQUMsYUFBYWI7d0JBQ3JCdkUsSUFBSW9GLEdBQUcsQ0FBQyxlQUFlSDtvQkFDekI7Z0JBQ0Y7O1FBQ0Y7bUNBQUc7UUFBQ2pGO1FBQUtHO1FBQWF5QztRQUFhMkI7UUFBaUJVO0tBQWlCO0lBRXJFLHVDQUF1QztJQUN2Q3pGLGdEQUFTQTtvQ0FBQztZQUNSOzRDQUFPO29CQUNMLHdFQUF3RTtvQkFDeEU2RjtvREFBVzs0QkFDVCxJQUFJO2dDQUNGekU7NEJBQ0YsRUFBRSxPQUFPMEUsY0FBYztnQ0FDckJ2RSxRQUFRQyxJQUFJLENBQUMscUNBQXFDc0U7NEJBQ3BEO3dCQUNGO21EQUFHO2dCQUNMOztRQUNGO21DQUFHO1FBQUMxRTtLQUFtQjtJQUV2QixPQUFPO1FBQ0w4RDtRQUNBTTtRQUNBOUM7UUFDQWpDO1FBQ0FFO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9jb21wb25lbnRzL01hcC9Ib29rcy91c2VNZWFzdXJlbWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyB1c2VNZWFzdXJlbWVudC50c1xuLy8gVGhpcyBob29rIGhhbmRsZXMgZGlzdGFuY2UgbWVhc3VyZW1lbnQgZnVuY3Rpb25hbGl0eSBvbiB0aGUgbWFwLFxuLy8gYWxsb3dpbmcgdXNlcnMgdG8gY2xpY2sgcG9pbnRzIGFuZCB2aXN1YWxpemUgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlbS5cbi8vIEl0IGludGVncmF0ZXMgd2l0aCB0aGUgTWFwQ29udGV4dCB0byBhY2Nlc3MgdGhlIG1hcCBpbnN0YW5jZSBhbmQgcHJvdmlkZXNcbi8vIGEgY2xlYW4gQVBJIGZvciBtZWFzdXJpbmcgZGlzdGFuY2VzIHdpdGggdmlzdWFsIGZlZWRiYWNrLlxuXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlTWFwQ29udGV4dCB9IGZyb20gJy4uLy4uLy4uL2NvbnRleHQvbWFwY29udGV4dCc7XG5pbXBvcnQgKiBhcyB0dXJmIGZyb20gJ0B0dXJmL3R1cmYnO1xuaW1wb3J0IG1hcGJveGdsIGZyb20gJ21hcGJveC1nbCc7XG5pbXBvcnQgeyB0cmFja0V2ZW50V2l0aEZvcm0gYXMgdHJhY2tFdmVudCB9IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvdHJhY2tpbmcvdHJhY2tpbmcnO1xuXG5pbnRlcmZhY2UgTWVhc3VyZW1lbnRSZXN1bHQge1xuICBkaXN0YW5jZTogbnVtYmVyOyAvLyBNZXRlcnNcbiAgcG9pbnRzOiBbbnVtYmVyLCBudW1iZXJdW107IC8vIFtsbmcsIGxhdF0gcG9pbnRzXG4gIHNlZ21lbnRzOiBudW1iZXJbXTsgLy8gSW5kaXZpZHVhbCBzZWdtZW50IGRpc3RhbmNlcyBpbiBtZXRlcnNcbn1cblxuZXhwb3J0IGNvbnN0IHVzZU1lYXN1cmVtZW50ID0gKCkgPT4ge1xuICBjb25zdCB7IG1hcCB9ID0gdXNlTWFwQ29udGV4dCgpO1xuICBjb25zdCBbbWVhc3VyZW1lbnQsIHNldE1lYXN1cmVtZW50XSA9IHVzZVN0YXRlPE1lYXN1cmVtZW50UmVzdWx0IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc01lYXN1cmluZywgc2V0SXNNZWFzdXJpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBcbiAgLy8gVXNlIHJlZnMgdG8gbWFpbnRhaW4gY29uc2lzdGVudCByZWZlcmVuY2VzIGZvciBldmVudCBoYW5kbGVyc1xuICBjb25zdCBtYXJrZXJzUmVmID0gdXNlUmVmPG1hcGJveGdsLk1hcmtlcltdPihbXSk7XG4gIGNvbnN0IG1vdmluZ1BvcHVwUmVmID0gdXNlUmVmPG1hcGJveGdsLlBvcHVwIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IHBvaW50c1JlZiA9IHVzZVJlZjxbbnVtYmVyLCBudW1iZXJdW10+KFtdKTtcbiAgXG4gIC8vIENvbnN0YW50cyBmb3IgbGF5ZXIgSURzXG4gIGNvbnN0IEZJWEVEX0xJTkVfU09VUkNFID0gJ21lYXN1cmVtZW50LWZpeGVkLWxpbmUtc291cmNlJztcbiAgY29uc3QgVEVNUF9MSU5FX1NPVVJDRSA9ICdtZWFzdXJlbWVudC10ZW1wLWxpbmUtc291cmNlJztcbiAgY29uc3QgRklYRURfTElORV9MQVlFUiA9ICdtZWFzdXJlbWVudC1maXhlZC1saW5lLWxheWVyJztcbiAgY29uc3QgVEVNUF9MSU5FX0xBWUVSID0gJ21lYXN1cmVtZW50LXRlbXAtbGluZS1sYXllcic7XG5cblxuICAvLyBDbGVhbiB1cCBtZWFzdXJlbWVudCByZXNvdXJjZXNcbiAgY29uc3QgY2xlYW51cE1lYXN1cmVtZW50ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIC8vIEFkZCBjb21wcmVoZW5zaXZlIG1hcCB2YWxpZGF0aW9uXG4gICAgaWYgKCFtYXAgfHwgIW1hcC5nZXRTdHlsZSB8fCAhbWFwLmdldENhbnZhcykge1xuICAgICAgY29uc29sZS53YXJuKFwiTWFwIG5vdCBhdmFpbGFibGUgb3IgYWxyZWFkeSBkZXN0cm95ZWQgZHVyaW5nIG1lYXN1cmVtZW50IGNsZWFudXBcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiBtYXAgaXMgc3RpbGwgbG9hZGVkXG4gICAgICBpZiAoIW1hcC5sb2FkZWQoKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJNYXAgbm90IGxvYWRlZCBkdXJpbmcgbWVhc3VyZW1lbnQgY2xlYW51cFwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKG1hcFN0YXRlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIGNoZWNraW5nIG1hcCBzdGF0ZSBkdXJpbmcgY2xlYW51cDpcIiwgbWFwU3RhdGVFcnJvcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIFJlbW92ZSBtYXJrZXJzXG4gICAgbWFya2Vyc1JlZi5jdXJyZW50LmZvckVhY2gobWFya2VyID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG1hcmtlci5yZW1vdmUoKTtcbiAgICAgIH0gY2F0Y2ggKG1hcmtlckVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIHJlbW92aW5nIG1hcmtlcjpcIiwgbWFya2VyRXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG1hcmtlcnNSZWYuY3VycmVudCA9IFtdO1xuICAgIFxuICAgIC8vIFJlbW92ZSBwb3B1cFxuICAgIGlmIChtb3ZpbmdQb3B1cFJlZi5jdXJyZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICBtb3ZpbmdQb3B1cFJlZi5jdXJyZW50LnJlbW92ZSgpO1xuICAgICAgICBtb3ZpbmdQb3B1cFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH0gY2F0Y2ggKHBvcHVwRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgcmVtb3ZpbmcgcG9wdXA6XCIsIHBvcHVwRXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBSZW1vdmUgbGF5ZXJzIGFuZCBzb3VyY2VzIC0gY2FyZWZ1bGx5IGNoZWNrIGlmIHRoZXkgZXhpc3QgZmlyc3RcbiAgICB0cnkge1xuICAgICAgaWYgKG1hcC5nZXRMYXllciAmJiBtYXAuZ2V0TGF5ZXIoRklYRURfTElORV9MQVlFUikpIHtcbiAgICAgICAgbWFwLnJlbW92ZUxheWVyKEZJWEVEX0xJTkVfTEFZRVIpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobWFwLmdldExheWVyICYmIG1hcC5nZXRMYXllcihURU1QX0xJTkVfTEFZRVIpKSB7XG4gICAgICAgIG1hcC5yZW1vdmVMYXllcihURU1QX0xJTkVfTEFZRVIpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobWFwLmdldFNvdXJjZSAmJiBtYXAuZ2V0U291cmNlKEZJWEVEX0xJTkVfU09VUkNFKSkge1xuICAgICAgICBtYXAucmVtb3ZlU291cmNlKEZJWEVEX0xJTkVfU09VUkNFKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKG1hcC5nZXRTb3VyY2UgJiYgbWFwLmdldFNvdXJjZShURU1QX0xJTkVfU09VUkNFKSkge1xuICAgICAgICBtYXAucmVtb3ZlU291cmNlKFRFTVBfTElORV9TT1VSQ0UpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjbGVhbmluZyB1cCBtZWFzdXJlbWVudCBsYXllcnM6XCIsIGUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBSZXNldCBjdXJzb3IgYW5kIHBvaW50cyAtIHdpdGggYWRkaXRpb25hbCBzYWZldHkgY2hlY2tzXG4gICAgdHJ5IHtcbiAgICAgIGlmIChtYXAuZ2V0Q2FudmFzICYmIG1hcC5nZXRDYW52YXMoKSkge1xuICAgICAgICBtYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoY2FudmFzRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIHJlc2V0dGluZyBjdXJzb3I6XCIsIGNhbnZhc0Vycm9yKTtcbiAgICB9XG4gICAgXG4gICAgcG9pbnRzUmVmLmN1cnJlbnQgPSBbXTtcbiAgfSwgW21hcF0pO1xuXG4gIC8vIENsZWFyIGFsbCBjdXJyZW50IG1lYXN1cmVtZW50cyBidXQga2VlcCBtZWFzdXJpbmcgYWN0aXZlXG4gIGNvbnN0IGNsZWFyTWVhc3VyZW1lbnQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFtYXApIHJldHVybjtcbiAgICBcbiAgICAvLyBSZW1vdmUgbWFya2Vyc1xuICAgIG1hcmtlcnNSZWYuY3VycmVudC5mb3JFYWNoKG1hcmtlciA9PiBtYXJrZXIucmVtb3ZlKCkpO1xuICAgIG1hcmtlcnNSZWYuY3VycmVudCA9IFtdO1xuICAgIFxuICAgIC8vIFJlc2V0IHRoZSBmaXhlZCBsaW5lIHRvIGVtcHR5XG4gICAgdHJ5IHtcbiAgICAgIGlmIChtYXAuZ2V0U291cmNlKEZJWEVEX0xJTkVfU09VUkNFKSkge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBtYXAuZ2V0U291cmNlKEZJWEVEX0xJTkVfU09VUkNFKSBhcyBtYXBib3hnbC5HZW9KU09OU291cmNlO1xuICAgICAgICBzb3VyY2Uuc2V0RGF0YSh7XG4gICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgICBmZWF0dXJlczogW11cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChtYXAuZ2V0U291cmNlKFRFTVBfTElORV9TT1VSQ0UpKSB7XG4gICAgICAgIGNvbnN0IHRlbXBTb3VyY2UgPSBtYXAuZ2V0U291cmNlKFRFTVBfTElORV9TT1VSQ0UpIGFzIG1hcGJveGdsLkdlb0pTT05Tb3VyY2U7XG4gICAgICAgIHRlbXBTb3VyY2Uuc2V0RGF0YSh7XG4gICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgICBmZWF0dXJlczogW11cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNsZWFyaW5nIG1lYXN1cmVtZW50IGxpbmVzOlwiLCBlKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzZXQgcG9pbnRzIGFuZCBtZWFzdXJlbWVudCBkYXRhXG4gICAgcG9pbnRzUmVmLmN1cnJlbnQgPSBbXTtcbiAgICBzZXRNZWFzdXJlbWVudCh7IGRpc3RhbmNlOiAwLCBwb2ludHM6IFtdLCBzZWdtZW50czogW10gfSk7XG4gICAgXG4gICAgdHJhY2tFdmVudCgnbWVhc3VyZW1lbnRfY2xlYXJlZCcsIHsgcGFuZWw6ICdtZWFzdXJlbWVudC1jb250cm9scycgfSk7XG4gIH0sIFttYXBdKTtcblxuICAvLyBIYW5kbGUgY2xpY2sgdG8gYWRkIG1lYXN1cmVtZW50IHBvaW50XG4gIGNvbnN0IGhhbmRsZUNsaWNrID0gdXNlQ2FsbGJhY2soKGU6IG1hcGJveGdsLk1hcE1vdXNlRXZlbnQpID0+IHtcbiAgICBpZiAoIW1hcCB8fCAhaXNNZWFzdXJpbmcpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBwb2ludDogW251bWJlciwgbnVtYmVyXSA9IFtlLmxuZ0xhdC5sbmcsIGUubG5nTGF0LmxhdF07XG4gICAgcG9pbnRzUmVmLmN1cnJlbnQucHVzaChwb2ludCk7XG4gICAgY29uc3QgcG9pbnRzID0gcG9pbnRzUmVmLmN1cnJlbnQ7XG4gICAgXG4gICAgLy8gVXBkYXRlIEdlb0pTT04gZm9yIHRoZSBsaW5lXG4gICAgdHJ5IHtcbiAgICAgIGlmIChtYXAuZ2V0U291cmNlKEZJWEVEX0xJTkVfU09VUkNFKSkge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBtYXAuZ2V0U291cmNlKEZJWEVEX0xJTkVfU09VUkNFKSBhcyBtYXBib3hnbC5HZW9KU09OU291cmNlO1xuICAgICAgICBzb3VyY2Uuc2V0RGF0YSh7XG4gICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgICBmZWF0dXJlczogcG9pbnRzLmxlbmd0aCA+PSAyID8gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgICAgICAgIGdlb21ldHJ5OiB7IFxuICAgICAgICAgICAgICAgIHR5cGU6ICdMaW5lU3RyaW5nJywgXG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IHBvaW50cyBcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcHJvcGVydGllczoge31cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdIDogW11cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIGZpeGVkIGxpbmUgc291cmNlOlwiLCBlKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIHNlZ21lbnQgYW5kIHRvdGFsIGRpc3RhbmNlc1xuICAgIGxldCBzZWdtZW50czogbnVtYmVyW10gPSBbXTtcbiAgICBsZXQgdG90YWxEaXN0YW5jZSA9IDA7XG4gICAgXG4gICAgaWYgKHBvaW50cy5sZW5ndGggPj0gMikge1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc2VnbWVudCA9IHR1cmYuZGlzdGFuY2UocG9pbnRzW2ktMV0sIHBvaW50c1tpXSwgeyB1bml0czogJ21ldGVycycgfSk7XG4gICAgICAgIHNlZ21lbnRzLnB1c2goc2VnbWVudCk7XG4gICAgICAgIHRvdGFsRGlzdGFuY2UgKz0gc2VnbWVudDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQWRkIG1hcmtlciBhdCBjbGlja2VkIHBvaW50XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1hcmtlciA9IG5ldyBtYXBib3hnbC5NYXJrZXIoeyBjb2xvcjogJyM0QjU2RDInIH0pXG4gICAgICAgIC5zZXRMbmdMYXQocG9pbnQpXG4gICAgICAgIC5hZGRUbyhtYXApO1xuICAgICAgXG4gICAgICAvLyBBZGQgcG9wdXAgd2l0aCBkaXN0YW5jZSBpbmZvcm1hdGlvblxuICAgICAgaWYgKHBvaW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGNvbnN0IGxhc3RTZWdtZW50RGlzdGFuY2UgPSBzZWdtZW50c1tzZWdtZW50cy5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgcG9wdXAgPSBuZXcgbWFwYm94Z2wuUG9wdXAoeyBcbiAgICAgICAgICBjbG9zZUJ1dHRvbjogZmFsc2UsIFxuICAgICAgICAgIGNsYXNzTmFtZTogJ2N1c3RvbS1wb3B1cCcsXG4gICAgICAgICAgb2Zmc2V0OiAyNVxuICAgICAgICB9KVxuICAgICAgICAgIC5zZXRMbmdMYXQocG9pbnQpXG4gICAgICAgICAgLnNldEhUTUwoYDxzdHJvbmcgc3R5bGU9XCJjb2xvcjogYmxhY2s7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiA0cHg7XCI+U2VnbWVudDogJHsobGFzdFNlZ21lbnREaXN0YW5jZSAvIDEwMDApLnRvRml4ZWQoMil9IGttPGJyPlRvdGFsOiAkeyh0b3RhbERpc3RhbmNlIC8gMTAwMCkudG9GaXhlZCgyKX0ga208L3N0cm9uZz5gKTtcbiAgICAgICAgXG4gICAgICAgIG1hcmtlci5zZXRQb3B1cChwb3B1cCk7XG4gICAgICAgIHBvcHVwLmFkZFRvKG1hcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaXJzdCBwb2ludCBqdXN0IHNob3dzIFwiU3RhcnRcIlxuICAgICAgICBjb25zdCBwb3B1cCA9IG5ldyBtYXBib3hnbC5Qb3B1cCh7IFxuICAgICAgICAgIGNsb3NlQnV0dG9uOiBmYWxzZSwgXG4gICAgICAgICAgY2xhc3NOYW1lOiAnY3VzdG9tLXBvcHVwJyxcbiAgICAgICAgICBvZmZzZXQ6IDI1XG4gICAgICAgIH0pXG4gICAgICAgICAgLnNldExuZ0xhdChwb2ludClcbiAgICAgICAgICAuc2V0SFRNTChgPHN0cm9uZyBzdHlsZT1cImNvbG9yOiBibGFjazsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDRweDtcIj5TdGFydDwvc3Ryb25nPmApO1xuICAgICAgICBcbiAgICAgICAgbWFya2VyLnNldFBvcHVwKHBvcHVwKTtcbiAgICAgICAgcG9wdXAuYWRkVG8obWFwKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbWFya2Vyc1JlZi5jdXJyZW50LnB1c2gobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWRkaW5nIG1hcmtlcjpcIiwgZSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlc2V0IHRlbXBvcmFyeSBsaW5lXG4gICAgdHJ5IHtcbiAgICAgIGlmIChtYXAuZ2V0U291cmNlKFRFTVBfTElORV9TT1VSQ0UpKSB7XG4gICAgICAgIGNvbnN0IHRlbXBTb3VyY2UgPSBtYXAuZ2V0U291cmNlKFRFTVBfTElORV9TT1VSQ0UpIGFzIG1hcGJveGdsLkdlb0pTT05Tb3VyY2U7XG4gICAgICAgIHRlbXBTb3VyY2Uuc2V0RGF0YSh7XG4gICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgICBmZWF0dXJlczogW11cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIHRlbXAgbGluZSBzb3VyY2U6XCIsIGUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgbWVhc3VyZW1lbnQgc3RhdGVcbiAgICBzZXRNZWFzdXJlbWVudCh7IFxuICAgICAgZGlzdGFuY2U6IHRvdGFsRGlzdGFuY2UsIFxuICAgICAgcG9pbnRzOiBbLi4ucG9pbnRzXSwgXG4gICAgICBzZWdtZW50cyBcbiAgICB9KTtcbiAgfSwgW21hcCwgaXNNZWFzdXJpbmddKTtcblxuICAvLyBIYW5kbGUgbW91c2UgbW92ZSB0byB1cGRhdGUgdGVtcG9yYXJ5IGxpbmVcbiAgY29uc3QgaGFuZGxlTW91c2VNb3ZlID0gdXNlQ2FsbGJhY2soKGU6IG1hcGJveGdsLk1hcE1vdXNlRXZlbnQpID0+IHtcbiAgICBpZiAoIW1hcCB8fCAhaXNNZWFzdXJpbmcgfHwgcG9pbnRzUmVmLmN1cnJlbnQubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgbW91c2VQb2ludDogW251bWJlciwgbnVtYmVyXSA9IFtlLmxuZ0xhdC5sbmcsIGUubG5nTGF0LmxhdF07XG4gICAgY29uc3QgbGFzdFBvaW50ID0gcG9pbnRzUmVmLmN1cnJlbnRbcG9pbnRzUmVmLmN1cnJlbnQubGVuZ3RoIC0gMV07XG4gICAgXG4gICAgLy8gVXBkYXRlIHRlbXBvcmFyeSBsaW5lXG4gICAgdHJ5IHtcbiAgICAgIGlmIChtYXAuZ2V0U291cmNlKFRFTVBfTElORV9TT1VSQ0UpKSB7XG4gICAgICAgIGNvbnN0IHRlbXBTb3VyY2UgPSBtYXAuZ2V0U291cmNlKFRFTVBfTElORV9TT1VSQ0UpIGFzIG1hcGJveGdsLkdlb0pTT05Tb3VyY2U7XG4gICAgICAgIHRlbXBTb3VyY2Uuc2V0RGF0YSh7XG4gICAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgICAgICBmZWF0dXJlczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsXG4gICAgICAgICAgICAgIGdlb21ldHJ5OiB7IFxuICAgICAgICAgICAgICAgIHR5cGU6ICdMaW5lU3RyaW5nJywgXG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IFtsYXN0UG9pbnQsIG1vdXNlUG9pbnRdIFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIHRlbXAgbGluZSBzb3VyY2U6XCIsIGUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgbW92aW5nIHBvcHVwIHdpdGggZGlzdGFuY2VcbiAgICBjb25zdCBkaXN0YW5jZSA9IHR1cmYuZGlzdGFuY2UobGFzdFBvaW50LCBtb3VzZVBvaW50LCB7IHVuaXRzOiAnbWV0ZXJzJyB9KTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgaWYgKCFtb3ZpbmdQb3B1cFJlZi5jdXJyZW50KSB7XG4gICAgICAgIG1vdmluZ1BvcHVwUmVmLmN1cnJlbnQgPSBuZXcgbWFwYm94Z2wuUG9wdXAoe1xuICAgICAgICAgIGNsb3NlQnV0dG9uOiBmYWxzZSxcbiAgICAgICAgICBjbGFzc05hbWU6ICdjdXN0b20tcG9wdXAnLFxuICAgICAgICAgIG9mZnNldDogMjVcbiAgICAgICAgfSkuYWRkVG8obWFwKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbW92aW5nUG9wdXBSZWYuY3VycmVudFxuICAgICAgICAuc2V0TG5nTGF0KGUubG5nTGF0KVxuICAgICAgICAuc2V0SFRNTChgPHN0cm9uZyBzdHlsZT1cImNvbG9yOiBibGFjazsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDRweDtcIj4keyhkaXN0YW5jZSAvIDEwMDApLnRvRml4ZWQoMil9IGttPC9zdHJvbmc+YCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIG1vdmluZyBwb3B1cDpcIiwgZSk7XG4gICAgfVxuICB9LCBbbWFwLCBpc01lYXN1cmluZ10pO1xuXG4gIC8vIFN0YXJ0IGEgbmV3IG1lYXN1cmVtZW50XG4gIGNvbnN0IHN0YXJ0TWVhc3VyZW1lbnQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFtYXApIHJldHVybjtcbiAgICBcbiAgICAvLyBGaXJzdCBjbGVhbiB1cCBhbnkgZXhpc3RpbmcgbWVhc3VyZW1lbnRcbiAgICBjbGVhbnVwTWVhc3VyZW1lbnQoKTtcbiAgICBcbiAgICAvLyBTZXQgdXAgbWVhc3VyZW1lbnQgbGF5ZXJzXG4gICAgdHJ5IHtcbiAgICAgIC8vIEluaXRpYWxpemUgZml4ZWQgbGluZSBzb3VyY2UvbGF5ZXIgZm9yIGNvbXBsZXRlZCBzZWdtZW50c1xuICAgICAgbWFwLmFkZFNvdXJjZShGSVhFRF9MSU5FX1NPVVJDRSwge1xuICAgICAgICB0eXBlOiAnZ2VvanNvbicsXG4gICAgICAgIGRhdGE6IHsgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywgZmVhdHVyZXM6IFtdIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBtYXAuYWRkTGF5ZXIoe1xuICAgICAgICBpZDogRklYRURfTElORV9MQVlFUixcbiAgICAgICAgdHlwZTogJ2xpbmUnLFxuICAgICAgICBzb3VyY2U6IEZJWEVEX0xJTkVfU09VUkNFLFxuICAgICAgICBwYWludDogeyBcbiAgICAgICAgICAnbGluZS1jb2xvcic6ICcjNEI1NkQyJywgXG4gICAgICAgICAgJ2xpbmUtd2lkdGgnOiAzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBJbml0aWFsaXplIHRlbXAgbGluZSBzb3VyY2UvbGF5ZXIgZm9yIGFjdGl2ZSBzZWdtZW50XG4gICAgICBtYXAuYWRkU291cmNlKFRFTVBfTElORV9TT1VSQ0UsIHtcbiAgICAgICAgdHlwZTogJ2dlb2pzb24nLFxuICAgICAgICBkYXRhOiB7IHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsIGZlYXR1cmVzOiBbXSB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbWFwLmFkZExheWVyKHtcbiAgICAgICAgaWQ6IFRFTVBfTElORV9MQVlFUixcbiAgICAgICAgdHlwZTogJ2xpbmUnLFxuICAgICAgICBzb3VyY2U6IFRFTVBfTElORV9TT1VSQ0UsXG4gICAgICAgIHBhaW50OiB7IFxuICAgICAgICAgICdsaW5lLWNvbG9yJzogJyM0QjU2RDInLCBcbiAgICAgICAgICAnbGluZS13aWR0aCc6IDIsIFxuICAgICAgICAgICdsaW5lLWRhc2hhcnJheSc6IFsyLCAyXSBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIENoYW5nZSBjdXJzb3IgdG8gY3Jvc3NoYWlyXG4gICAgICBtYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gJ2Nyb3NzaGFpcic7XG4gICAgICBcbiAgICAgIC8vIEluaXRpYWxpemUgc3RhdGVcbiAgICAgIHNldElzTWVhc3VyaW5nKHRydWUpO1xuICAgICAgcG9pbnRzUmVmLmN1cnJlbnQgPSBbXTtcbiAgICAgIHNldE1lYXN1cmVtZW50KHsgZGlzdGFuY2U6IDAsIHBvaW50czogW10sIHNlZ21lbnRzOiBbXSB9KTtcbiAgICAgIFxuICAgICAgdHJhY2tFdmVudCgnbWVhc3VyZW1lbnRfc3RhcnRlZCcsIHsgcGFuZWw6ICdtZWFzdXJlbWVudC1jb250cm9scycgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluaXRpYWxpemluZyBtZWFzdXJlbWVudDpcIiwgZSk7XG4gICAgfVxuICB9LCBbbWFwLCBjbGVhbnVwTWVhc3VyZW1lbnRdKTtcblxuICAvLyBTdG9wIG1lYXN1cmluZ1xuICBjb25zdCBzdG9wTWVhc3VyZW1lbnQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFtYXApIHJldHVybjtcbiAgICBcbiAgICBzZXRJc01lYXN1cmluZyhmYWxzZSk7XG4gICAgXG4gICAgLy8gUmVtb3ZlIHRoZSB0ZW1wb3JhcnkgbGluZSBhbmQgbW92aW5nIHBvcHVwXG4gICAgdHJ5IHtcbiAgICAgIGlmIChtb3ZpbmdQb3B1cFJlZi5jdXJyZW50KSB7XG4gICAgICAgIG1vdmluZ1BvcHVwUmVmLmN1cnJlbnQucmVtb3ZlKCk7XG4gICAgICAgIG1vdmluZ1BvcHVwUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobWFwLmdldFNvdXJjZShURU1QX0xJTkVfU09VUkNFKSkge1xuICAgICAgICBjb25zdCB0ZW1wU291cmNlID0gbWFwLmdldFNvdXJjZShURU1QX0xJTkVfU09VUkNFKSBhcyBtYXBib3hnbC5HZW9KU09OU291cmNlO1xuICAgICAgICB0ZW1wU291cmNlLnNldERhdGEoe1xuICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICAgICAgZmVhdHVyZXM6IFtdXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBSZXNldCBjdXJzb3JcbiAgICAgIG1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSAnJztcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc3RvcHBpbmcgbWVhc3VyZW1lbnQ6XCIsIGUpO1xuICAgIH1cbiAgfSwgW21hcF0pO1xuXG5cbiAgLy8gSGFuZGxlIHJpZ2h0LWNsaWNrIHRvIGZpbmlzaCBtZWFzdXJlbWVudFxuICBjb25zdCBoYW5kbGVSaWdodENsaWNrID0gdXNlQ2FsbGJhY2soKGU6IG1hcGJveGdsLk1hcE1vdXNlRXZlbnQpID0+IHtcbiAgICBpZiAoIW1hcCB8fCAhaXNNZWFzdXJpbmcpIHJldHVybjtcbiAgICBcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgc3RvcE1lYXN1cmVtZW50KCk7XG4gICAgXG4gICAgdHJhY2tFdmVudCgnbWVhc3VyZW1lbnRfY29tcGxldGVkJywgeyBcbiAgICAgIHBhbmVsOiAnbWVhc3VyZW1lbnQtY29udHJvbHMnLFxuICAgICAgcG9pbnRzOiBwb2ludHNSZWYuY3VycmVudC5sZW5ndGgsXG4gICAgICBkaXN0YW5jZTogbWVhc3VyZW1lbnQ/LmRpc3RhbmNlIHx8IDAgXG4gICAgfSk7XG4gIH0sIFttYXAsIGlzTWVhc3VyaW5nLCBtZWFzdXJlbWVudCwgc3RvcE1lYXN1cmVtZW50XSk7XG5cblxuICAvLyBTZXQgdXAgYW5kIGNsZWFuIHVwIGV2ZW50IGxpc3RlbmVyc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbWFwKSByZXR1cm47XG4gICAgXG4gICAgaWYgKGlzTWVhc3VyaW5nKSB7XG4gICAgICBtYXAub24oJ2NsaWNrJywgaGFuZGxlQ2xpY2spO1xuICAgICAgbWFwLm9uKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZU1vdmUpO1xuICAgICAgbWFwLm9uKCdjb250ZXh0bWVudScsIGhhbmRsZVJpZ2h0Q2xpY2spO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKG1hcCkge1xuICAgICAgICBtYXAub2ZmKCdjbGljaycsIGhhbmRsZUNsaWNrKTtcbiAgICAgICAgbWFwLm9mZignbW91c2Vtb3ZlJywgaGFuZGxlTW91c2VNb3ZlKTtcbiAgICAgICAgbWFwLm9mZignY29udGV4dG1lbnUnLCBoYW5kbGVSaWdodENsaWNrKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbbWFwLCBpc01lYXN1cmluZywgaGFuZGxlQ2xpY2ssIGhhbmRsZU1vdXNlTW92ZSwgaGFuZGxlUmlnaHRDbGlja10pO1xuXG4gIC8vIENsZWFuIHVwIHdoZW4gdGhlIGNvbXBvbmVudCB1bm1vdW50c1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAvLyBVc2Ugc2V0VGltZW91dCB0byBlbnN1cmUgY2xlYW51cCBoYXBwZW5zIGFmdGVyIGFueSBwZW5kaW5nIG9wZXJhdGlvbnNcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNsZWFudXBNZWFzdXJlbWVudCgpO1xuICAgICAgICB9IGNhdGNoIChjbGVhbnVwRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBkdXJpbmcgbWVhc3VyZW1lbnQgY2xlYW51cDpcIiwgY2xlYW51cEVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSwgMCk7XG4gICAgfTtcbiAgfSwgW2NsZWFudXBNZWFzdXJlbWVudF0pO1xuXG4gIHJldHVybiB7IFxuICAgIHN0YXJ0TWVhc3VyZW1lbnQsIFxuICAgIHN0b3BNZWFzdXJlbWVudCwgXG4gICAgY2xlYXJNZWFzdXJlbWVudCwgXG4gICAgbWVhc3VyZW1lbnQsIFxuICAgIGlzTWVhc3VyaW5nIFxuICB9O1xufTsiXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZU1hcENvbnRleHQiLCJ0dXJmIiwibWFwYm94Z2wiLCJ0cmFja0V2ZW50V2l0aEZvcm0iLCJ0cmFja0V2ZW50IiwidXNlTWVhc3VyZW1lbnQiLCJtYXAiLCJtZWFzdXJlbWVudCIsInNldE1lYXN1cmVtZW50IiwiaXNNZWFzdXJpbmciLCJzZXRJc01lYXN1cmluZyIsIm1hcmtlcnNSZWYiLCJtb3ZpbmdQb3B1cFJlZiIsInBvaW50c1JlZiIsIkZJWEVEX0xJTkVfU09VUkNFIiwiVEVNUF9MSU5FX1NPVVJDRSIsIkZJWEVEX0xJTkVfTEFZRVIiLCJURU1QX0xJTkVfTEFZRVIiLCJjbGVhbnVwTWVhc3VyZW1lbnQiLCJnZXRTdHlsZSIsImdldENhbnZhcyIsImNvbnNvbGUiLCJ3YXJuIiwibG9hZGVkIiwibWFwU3RhdGVFcnJvciIsImN1cnJlbnQiLCJmb3JFYWNoIiwibWFya2VyIiwicmVtb3ZlIiwibWFya2VyRXJyb3IiLCJwb3B1cEVycm9yIiwiZ2V0TGF5ZXIiLCJyZW1vdmVMYXllciIsImdldFNvdXJjZSIsInJlbW92ZVNvdXJjZSIsImUiLCJlcnJvciIsInN0eWxlIiwiY3Vyc29yIiwiY2FudmFzRXJyb3IiLCJjbGVhck1lYXN1cmVtZW50Iiwic291cmNlIiwic2V0RGF0YSIsInR5cGUiLCJmZWF0dXJlcyIsInRlbXBTb3VyY2UiLCJkaXN0YW5jZSIsInBvaW50cyIsInNlZ21lbnRzIiwicGFuZWwiLCJoYW5kbGVDbGljayIsInBvaW50IiwibG5nTGF0IiwibG5nIiwibGF0IiwicHVzaCIsImxlbmd0aCIsImdlb21ldHJ5IiwiY29vcmRpbmF0ZXMiLCJwcm9wZXJ0aWVzIiwidG90YWxEaXN0YW5jZSIsImkiLCJzZWdtZW50IiwidW5pdHMiLCJNYXJrZXIiLCJjb2xvciIsInNldExuZ0xhdCIsImFkZFRvIiwibGFzdFNlZ21lbnREaXN0YW5jZSIsInBvcHVwIiwiUG9wdXAiLCJjbG9zZUJ1dHRvbiIsImNsYXNzTmFtZSIsIm9mZnNldCIsInNldEhUTUwiLCJ0b0ZpeGVkIiwic2V0UG9wdXAiLCJoYW5kbGVNb3VzZU1vdmUiLCJtb3VzZVBvaW50IiwibGFzdFBvaW50Iiwic3RhcnRNZWFzdXJlbWVudCIsImFkZFNvdXJjZSIsImRhdGEiLCJhZGRMYXllciIsImlkIiwicGFpbnQiLCJzdG9wTWVhc3VyZW1lbnQiLCJoYW5kbGVSaWdodENsaWNrIiwicHJldmVudERlZmF1bHQiLCJvbiIsIm9mZiIsInNldFRpbWVvdXQiLCJjbGVhbnVwRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/Hooks/useMeasurement.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/LayerControls.tsx":
/*!**************************************************!*\
  !*** ./src/app/components/Map/LayerControls.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _services_LayerManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/LayerManager */ \"(ssr)/./src/app/services/LayerManager.ts\");\n/* harmony import */ var _tracking_tracking__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tracking/tracking */ \"(ssr)/./src/app/components/tracking/tracking.js\");\n/* harmony import */ var _AO_Hooks_useAreaOpsProcessor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../AO/Hooks/useAreaOpsProcessor */ \"(ssr)/./src/app/components/AO/Hooks/useAreaOpsProcessor.ts\");\n/* harmony import */ var _UI_PremiumButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../UI/PremiumButton */ \"(ssr)/./src/app/components/UI/PremiumButton.tsx\");\n/**\n * src/app/components/UI/LayerControls.tsx\n * \n * Purpose:\n * Provides unified access to map layer controls with premium-feature awareness.\n * Controls visibility of various map layers (powerlines, airfields, terrain) and\n * provides access to analysis tools based on the user's subscription tier.\n * \n * Related to:\n * - PremiumContext.tsx (for permission checks)\n * - PremiumButton.tsx (for access control UI)\n * - MapContext.tsx (for layer management)\n * - AreaOpsProcessor.tsx (for terrain operations)\n */ \n\n\n\n\n\n\nconst LayerControls = ({ onToggleDBYD, activePanel, togglePanel, flightPlan, setShowUploader })=>{\n    const { map, toggleLayer } = (0,_context_mapcontext__WEBPACK_IMPORTED_MODULE_2__.useMapContext)();\n    const { showAreaOfOperations, generateTerrainGrid } = (0,_AO_Hooks_useAreaOpsProcessor__WEBPACK_IMPORTED_MODULE_5__.useAreaOpsProcessor)();\n    const [isTerrainGridVisible, setIsTerrainGridVisible] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [gridResolution, setGridResolution] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(30); // Default grid resolution in meters\n    const [gridRange, setGridRange] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(500); // Default grid range in meters\n    const bydLayerHandlerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    if (!map) return null;\n    const handleToggleTerrainGrid = async ()=>{\n        // Make AO visible and generate terrain grid if not already visible\n        if (!isTerrainGridVisible) {\n            showAreaOfOperations();\n            await generateTerrainGrid();\n        }\n        toggleLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.MAP_LAYERS.AOTERRAIN_GRID);\n        setIsTerrainGridVisible(!isTerrainGridVisible);\n        (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_4__.trackEventWithForm)('toggle_terrain_grid_click', {\n            panel: 'layer-controls'\n        });\n    };\n    const handleDBYDPowerlines = ()=>{\n        // Show Area of Operations when DBYD is requested\n        showAreaOfOperations();\n        if (onToggleDBYD) {\n            onToggleDBYD();\n        }\n        (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_4__.trackEventWithForm)('DYBDpowerlines_add_overlay_click', {\n            panel: 'layer-controls'\n        });\n    };\n    // Determine which terrain feature ID to use based on parameters\n    const getTerrainFeatureId = ()=>{\n        if (gridResolution < 30) {\n            return 'high_resolution_grid';\n        }\n        if (gridRange > 500) {\n            return 'extended_grid_range';\n        }\n        return 'terrain_analysis';\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col gap-2 w-fit rounded-md shadow-md\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_UI_PremiumButton__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                featureId: \"hv_powerlines\",\n                onClick: ()=>{\n                    (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_4__.trackEventWithForm)('powerlines_add_overlay_click', {\n                        panel: 'layer-controls'\n                    });\n                    toggleLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.MAP_LAYERS.POWERLINES);\n                    toggleLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.MAP_LAYERS.POWERLINES_HITBOX);\n                },\n                className: \"map-button bg-gray-100 hover:bg-gray-200 flex items-center justify-start\",\n                showIndicator: false,\n                children: \"Toggle HV Powerlines \"\n            }, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/LayerControls.tsx\",\n                lineNumber: 85,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_UI_PremiumButton__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                featureId: \"airspace_analysis\",\n                onClick: ()=>{\n                    (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_4__.trackEventWithForm)('airspace_add_overlay_click', {\n                        panel: 'layer-controls'\n                    });\n                    toggleLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.MAP_LAYERS.AIRFIELDS);\n                    toggleLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_3__.MAP_LAYERS.AIRFIELDS_LABELS);\n                },\n                className: \"map-button bg-gray-100 hover:bg-gray-200 flex items-center justify-start\",\n                showIndicator: false,\n                children: \"Toggle Aerodrome Overlay \"\n            }, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/LayerControls.tsx\",\n                lineNumber: 98,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_UI_PremiumButton__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                featureId: \"local_powerlines\",\n                onClick: handleDBYDPowerlines,\n                className: \"map-button bg-gray-100 hover:bg-gray-200 flex items-center justify-start\",\n                children: \"Toggle Local Powerlines \\uD83C\\uDFE1\"\n            }, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/LayerControls.tsx\",\n                lineNumber: 111,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_UI_PremiumButton__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                featureId: getTerrainFeatureId(),\n                onClick: handleToggleTerrainGrid,\n                className: \"map-button bg-gray-100 hover:bg-gray-200 flex items-center justify-start\",\n                permissionParams: {\n                    gridResolution: gridResolution,\n                    gridRange: gridRange\n                },\n                children: [\n                    isTerrainGridVisible ? 'Hide' : 'Show',\n                    \" AO Terrain Grid \\uD83C\\uDF0D\"\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/LayerControls.tsx\",\n                lineNumber: 119,\n                columnNumber: 5\n            }, undefined),\n            togglePanel && setShowUploader && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: [\n                    flightPlan && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_UI_PremiumButton__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                        featureId: \"flight_path_analysis\",\n                        onClick: ()=>{\n                            (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_4__.trackEventWithForm)('upload_flight_plan_click', {\n                                panel: 'layer-controls'\n                            });\n                            setShowUploader(true);\n                        },\n                        className: \"map-button bg-gray-100 hover:bg-gray-200 flex items-center justify-start gap-2\",\n                        children: \"Upload Flight Plan\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/LayerControls.tsx\",\n                        lineNumber: 135,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_UI_PremiumButton__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                        featureId: \"merged_analysis\",\n                        onClick: ()=>{\n                            (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_4__.trackEventWithForm)('own_dem_data_request', {\n                                panel: 'layer-controls'\n                            });\n                            window.alert('Coming Soon!');\n                        },\n                        className: \"map-button bg-gray-100 hover:bg-gray-200 flex items-center justify-start gap-2\",\n                        children: \"Add Your Own DEM Data\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/LayerControls.tsx\",\n                        lineNumber: 147,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/LayerControls.tsx\",\n        lineNumber: 83,\n        columnNumber: 3\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LayerControls);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL0xheWVyQ29udHJvbHMudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7OztDQWFDO0FBRStDO0FBQ1M7QUFDQTtBQUNlO0FBRUY7QUFDdEI7QUFXaEQsTUFBTVMsZ0JBQThDLENBQUMsRUFDbkRDLFlBQVksRUFDWkMsV0FBVyxFQUNYQyxXQUFXLEVBQ1hDLFVBQVUsRUFDVkMsZUFBZSxFQUNoQjtJQUNDLE1BQU0sRUFBRUMsR0FBRyxFQUFFQyxXQUFXLEVBQUUsR0FBR2Isa0VBQWFBO0lBQzFDLE1BQU0sRUFBRWMsb0JBQW9CLEVBQUVDLG1CQUFtQixFQUFFLEdBQUdYLGtGQUFtQkE7SUFDekUsTUFBTSxDQUFDWSxzQkFBc0JDLHdCQUF3QixHQUFHbkIsK0NBQVFBLENBQUM7SUFDakUsTUFBTSxDQUFDb0IsZ0JBQWdCQyxrQkFBa0IsR0FBR3JCLCtDQUFRQSxDQUFDLEtBQUssb0NBQW9DO0lBQzlGLE1BQU0sQ0FBQ3NCLFdBQVdDLGFBQWEsR0FBR3ZCLCtDQUFRQSxDQUFDLE1BQU0sK0JBQStCO0lBQ2hGLE1BQU13QixxQkFBcUJ2Qiw2Q0FBTUEsQ0FBcUM7SUFFdEUsSUFBSSxDQUFDYSxLQUFLLE9BQU87SUFFakIsTUFBTVcsMEJBQTBCO1FBQzlCLG1FQUFtRTtRQUNuRSxJQUFJLENBQUNQLHNCQUFzQjtZQUN6QkY7WUFDQSxNQUFNQztRQUNSO1FBRUFGLFlBQVlaLDhEQUFVQSxDQUFDdUIsY0FBYztRQUNyQ1Asd0JBQXdCLENBQUNEO1FBQ3pCYixzRUFBVUEsQ0FBQyw2QkFBNkI7WUFBRXNCLE9BQU87UUFBaUI7SUFDcEU7SUFFQSxNQUFNQyx1QkFBdUI7UUFDM0IsaURBQWlEO1FBQ2pEWjtRQUVBLElBQUlQLGNBQWM7WUFDaEJBO1FBQ0Y7UUFDQUosc0VBQVVBLENBQUMsb0NBQW9DO1lBQUVzQixPQUFPO1FBQWlCO0lBQzNFO0lBRUEsZ0VBQWdFO0lBQ2hFLE1BQU1FLHNCQUFzQjtRQUMxQixJQUFJVCxpQkFBaUIsSUFBSTtZQUN2QixPQUFPO1FBQ1Q7UUFDQSxJQUFJRSxZQUFZLEtBQUs7WUFDbkIsT0FBTztRQUNUO1FBQ0EsT0FBTztJQUNUO0lBRUYscUJBQ0UsOERBQUNRO1FBQUlDLFdBQVU7OzBCQUViLDhEQUFDeEIseURBQWFBO2dCQUNaeUIsV0FBVTtnQkFDVkMsU0FBUztvQkFDUDVCLHNFQUFVQSxDQUFDLGdDQUFnQzt3QkFBRXNCLE9BQU87b0JBQWlCO29CQUNyRVosWUFBWVosOERBQVVBLENBQUMrQixVQUFVO29CQUNqQ25CLFlBQVlaLDhEQUFVQSxDQUFDZ0MsaUJBQWlCO2dCQUMxQztnQkFDQUosV0FBVTtnQkFDVkssZUFBZTswQkFDaEI7Ozs7OzswQkFJRCw4REFBQzdCLHlEQUFhQTtnQkFDWnlCLFdBQVU7Z0JBQ1ZDLFNBQVM7b0JBQ1A1QixzRUFBVUEsQ0FBQyw4QkFBOEI7d0JBQUVzQixPQUFPO29CQUFpQjtvQkFDbkVaLFlBQVlaLDhEQUFVQSxDQUFDa0MsU0FBUztvQkFDaEN0QixZQUFZWiw4REFBVUEsQ0FBQ21DLGdCQUFnQjtnQkFDekM7Z0JBQ0FQLFdBQVU7Z0JBQ1ZLLGVBQWU7MEJBQ2hCOzs7Ozs7MEJBSUQsOERBQUM3Qix5REFBYUE7Z0JBQ1p5QixXQUFVO2dCQUNWQyxTQUFTTDtnQkFDVEcsV0FBVTswQkFDWDs7Ozs7OzBCQUlELDhEQUFDeEIseURBQWFBO2dCQUNaeUIsV0FBV0g7Z0JBQ1hJLFNBQVNSO2dCQUNUTSxXQUFVO2dCQUNWUSxrQkFBa0I7b0JBQ2hCbkIsZ0JBQWdCQTtvQkFDaEJFLFdBQVdBO2dCQUNiOztvQkFFQ0osdUJBQXVCLFNBQVM7b0JBQU87Ozs7Ozs7WUFJekNQLGVBQWVFLGlDQUNkOztvQkFDR0QsNEJBQ0MsOERBQUNMLHlEQUFhQTt3QkFDWnlCLFdBQVU7d0JBQ1ZDLFNBQVM7NEJBQ1A1QixzRUFBVUEsQ0FBQyw0QkFBNEI7Z0NBQUVzQixPQUFPOzRCQUFpQjs0QkFDakVkLGdCQUFnQjt3QkFDbEI7d0JBQ0FrQixXQUFVO2tDQUNYOzs7Ozs7a0NBS0gsOERBQUN4Qix5REFBYUE7d0JBQ1p5QixXQUFVO3dCQUNWQyxTQUFTOzRCQUNQNUIsc0VBQVVBLENBQUMsd0JBQXdCO2dDQUFFc0IsT0FBTzs0QkFBaUI7NEJBQzdEYSxPQUFPQyxLQUFLLENBQUM7d0JBQ2Y7d0JBQ0FWLFdBQVU7a0NBQ1g7Ozs7Ozs7Ozs7Ozs7O0FBT1Q7QUFFQSxpRUFBZXZCLGFBQWFBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL0xheWVyQ29udHJvbHMudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogc3JjL2FwcC9jb21wb25lbnRzL1VJL0xheWVyQ29udHJvbHMudHN4XG4gKiBcbiAqIFB1cnBvc2U6XG4gKiBQcm92aWRlcyB1bmlmaWVkIGFjY2VzcyB0byBtYXAgbGF5ZXIgY29udHJvbHMgd2l0aCBwcmVtaXVtLWZlYXR1cmUgYXdhcmVuZXNzLlxuICogQ29udHJvbHMgdmlzaWJpbGl0eSBvZiB2YXJpb3VzIG1hcCBsYXllcnMgKHBvd2VybGluZXMsIGFpcmZpZWxkcywgdGVycmFpbikgYW5kXG4gKiBwcm92aWRlcyBhY2Nlc3MgdG8gYW5hbHlzaXMgdG9vbHMgYmFzZWQgb24gdGhlIHVzZXIncyBzdWJzY3JpcHRpb24gdGllci5cbiAqIFxuICogUmVsYXRlZCB0bzpcbiAqIC0gUHJlbWl1bUNvbnRleHQudHN4IChmb3IgcGVybWlzc2lvbiBjaGVja3MpXG4gKiAtIFByZW1pdW1CdXR0b24udHN4IChmb3IgYWNjZXNzIGNvbnRyb2wgVUkpXG4gKiAtIE1hcENvbnRleHQudHN4IChmb3IgbGF5ZXIgbWFuYWdlbWVudClcbiAqIC0gQXJlYU9wc1Byb2Nlc3Nvci50c3ggKGZvciB0ZXJyYWluIG9wZXJhdGlvbnMpXG4gKi9cblxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VNYXBDb250ZXh0IH0gZnJvbSAnLi4vLi4vY29udGV4dC9tYXBjb250ZXh0JztcbmltcG9ydCB7IE1BUF9MQVlFUlMgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9MYXllck1hbmFnZXInO1xuaW1wb3J0IHsgdHJhY2tFdmVudFdpdGhGb3JtIGFzIHRyYWNrRXZlbnQgfSBmcm9tICcuLi90cmFja2luZy90cmFja2luZyc7XG5pbXBvcnQgeyBNb3VudGFpbiwgUmFkaW8sIEdyaXBWZXJ0aWNhbCB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyB1c2VBcmVhT3BzUHJvY2Vzc29yIH0gZnJvbSAnLi4vQU8vSG9va3MvdXNlQXJlYU9wc1Byb2Nlc3Nvcic7XG5pbXBvcnQgUHJlbWl1bUJ1dHRvbiBmcm9tICcuLi9VSS9QcmVtaXVtQnV0dG9uJztcbmltcG9ydCB7IEZlYXR1cmVJZCB9IGZyb20gJy4uLy4uL3R5cGVzL1ByZW1pdW1UeXBlcyc7XG5cbmludGVyZmFjZSBMYXllckNvbnRyb2xzUHJvcHMge1xuICBvblRvZ2dsZURCWUQ/OiAoKSA9PiB2b2lkO1xuICBhY3RpdmVQYW5lbD86ICdlbmVyZ3knIHwgJ2xvcycgfCAndGVycmFpbicgfCBudWxsO1xuICB0b2dnbGVQYW5lbD86IChwYW5lbDogJ2VuZXJneScgfCAnbG9zJyB8ICd0ZXJyYWluJykgPT4gdm9pZDtcbiAgZmxpZ2h0UGxhbj86IGFueTsgLy8gUmVwbGFjZSB3aXRoIEZsaWdodFBsYW4gdHlwZSBpZiBhdmFpbGFibGVcbiAgc2V0U2hvd1VwbG9hZGVyPzogKHNob3c6IGJvb2xlYW4pID0+IHZvaWQ7XG59XG5cbmNvbnN0IExheWVyQ29udHJvbHM6IFJlYWN0LkZDPExheWVyQ29udHJvbHNQcm9wcz4gPSAoe1xuICBvblRvZ2dsZURCWUQsXG4gIGFjdGl2ZVBhbmVsLFxuICB0b2dnbGVQYW5lbCxcbiAgZmxpZ2h0UGxhbixcbiAgc2V0U2hvd1VwbG9hZGVyLFxufSkgPT4ge1xuICBjb25zdCB7IG1hcCwgdG9nZ2xlTGF5ZXIgfSA9IHVzZU1hcENvbnRleHQoKTtcbiAgY29uc3QgeyBzaG93QXJlYU9mT3BlcmF0aW9ucywgZ2VuZXJhdGVUZXJyYWluR3JpZCB9ID0gdXNlQXJlYU9wc1Byb2Nlc3NvcigpO1xuICBjb25zdCBbaXNUZXJyYWluR3JpZFZpc2libGUsIHNldElzVGVycmFpbkdyaWRWaXNpYmxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2dyaWRSZXNvbHV0aW9uLCBzZXRHcmlkUmVzb2x1dGlvbl0gPSB1c2VTdGF0ZSgzMCk7IC8vIERlZmF1bHQgZ3JpZCByZXNvbHV0aW9uIGluIG1ldGVyc1xuICBjb25zdCBbZ3JpZFJhbmdlLCBzZXRHcmlkUmFuZ2VdID0gdXNlU3RhdGUoNTAwKTsgLy8gRGVmYXVsdCBncmlkIHJhbmdlIGluIG1ldGVyc1xuICBjb25zdCBieWRMYXllckhhbmRsZXJSZWYgPSB1c2VSZWY8eyBmZXRjaExheWVyczogKCkgPT4gdm9pZCB9IHwgbnVsbD4obnVsbCk7XG5cbiAgaWYgKCFtYXApIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IGhhbmRsZVRvZ2dsZVRlcnJhaW5HcmlkID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIE1ha2UgQU8gdmlzaWJsZSBhbmQgZ2VuZXJhdGUgdGVycmFpbiBncmlkIGlmIG5vdCBhbHJlYWR5IHZpc2libGVcbiAgICBpZiAoIWlzVGVycmFpbkdyaWRWaXNpYmxlKSB7XG4gICAgICBzaG93QXJlYU9mT3BlcmF0aW9ucygpO1xuICAgICAgYXdhaXQgZ2VuZXJhdGVUZXJyYWluR3JpZCgpO1xuICAgIH1cbiAgICBcbiAgICB0b2dnbGVMYXllcihNQVBfTEFZRVJTLkFPVEVSUkFJTl9HUklEKTtcbiAgICBzZXRJc1RlcnJhaW5HcmlkVmlzaWJsZSghaXNUZXJyYWluR3JpZFZpc2libGUpO1xuICAgIHRyYWNrRXZlbnQoJ3RvZ2dsZV90ZXJyYWluX2dyaWRfY2xpY2snLCB7IHBhbmVsOiAnbGF5ZXItY29udHJvbHMnIH0pO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZURCWURQb3dlcmxpbmVzID0gKCkgPT4ge1xuICAgIC8vIFNob3cgQXJlYSBvZiBPcGVyYXRpb25zIHdoZW4gREJZRCBpcyByZXF1ZXN0ZWRcbiAgICBzaG93QXJlYU9mT3BlcmF0aW9ucygpO1xuICAgIFxuICAgIGlmIChvblRvZ2dsZURCWUQpIHtcbiAgICAgIG9uVG9nZ2xlREJZRCgpO1xuICAgIH1cbiAgICB0cmFja0V2ZW50KCdEWUJEcG93ZXJsaW5lc19hZGRfb3ZlcmxheV9jbGljaycsIHsgcGFuZWw6ICdsYXllci1jb250cm9scycgfSk7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIHdoaWNoIHRlcnJhaW4gZmVhdHVyZSBJRCB0byB1c2UgYmFzZWQgb24gcGFyYW1ldGVyc1xuICBjb25zdCBnZXRUZXJyYWluRmVhdHVyZUlkID0gKCk6IEZlYXR1cmVJZCA9PiB7XG4gICAgaWYgKGdyaWRSZXNvbHV0aW9uIDwgMzApIHtcbiAgICAgIHJldHVybiAnaGlnaF9yZXNvbHV0aW9uX2dyaWQnO1xuICAgIH1cbiAgICBpZiAoZ3JpZFJhbmdlID4gNTAwKSB7XG4gICAgICByZXR1cm4gJ2V4dGVuZGVkX2dyaWRfcmFuZ2UnO1xuICAgIH1cbiAgICByZXR1cm4gJ3RlcnJhaW5fYW5hbHlzaXMnO1xuICB9O1xuXG5yZXR1cm4gKFxuICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTIgdy1maXQgcm91bmRlZC1tZCBzaGFkb3ctbWRcIj5cbiAgICB7LyogTWFwIExheWVyIENvbnRyb2xzICovfVxuICAgIDxQcmVtaXVtQnV0dG9uXG4gICAgICBmZWF0dXJlSWQ9XCJodl9wb3dlcmxpbmVzXCJcbiAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgdHJhY2tFdmVudCgncG93ZXJsaW5lc19hZGRfb3ZlcmxheV9jbGljaycsIHsgcGFuZWw6ICdsYXllci1jb250cm9scycgfSk7XG4gICAgICAgIHRvZ2dsZUxheWVyKE1BUF9MQVlFUlMuUE9XRVJMSU5FUyk7XG4gICAgICAgIHRvZ2dsZUxheWVyKE1BUF9MQVlFUlMuUE9XRVJMSU5FU19ISVRCT1gpO1xuICAgICAgfX1cbiAgICAgIGNsYXNzTmFtZT1cIm1hcC1idXR0b24gYmctZ3JheS0xMDAgaG92ZXI6YmctZ3JheS0yMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1zdGFydFwiXG4gICAgICBzaG93SW5kaWNhdG9yPXtmYWxzZX1cbiAgICA+XG4gICAgICBUb2dnbGUgSFYgUG93ZXJsaW5lcyDimqHvuI9cbiAgICA8L1ByZW1pdW1CdXR0b24+XG5cbiAgICA8UHJlbWl1bUJ1dHRvblxuICAgICAgZmVhdHVyZUlkPVwiYWlyc3BhY2VfYW5hbHlzaXNcIlxuICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICB0cmFja0V2ZW50KCdhaXJzcGFjZV9hZGRfb3ZlcmxheV9jbGljaycsIHsgcGFuZWw6ICdsYXllci1jb250cm9scycgfSk7XG4gICAgICAgIHRvZ2dsZUxheWVyKE1BUF9MQVlFUlMuQUlSRklFTERTKTtcbiAgICAgICAgdG9nZ2xlTGF5ZXIoTUFQX0xBWUVSUy5BSVJGSUVMRFNfTEFCRUxTKTtcbiAgICAgIH19XG4gICAgICBjbGFzc05hbWU9XCJtYXAtYnV0dG9uIGJnLWdyYXktMTAwIGhvdmVyOmJnLWdyYXktMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktc3RhcnRcIlxuICAgICAgc2hvd0luZGljYXRvcj17ZmFsc2V9XG4gICAgPlxuICAgICAgVG9nZ2xlIEFlcm9kcm9tZSBPdmVybGF5IOKciO+4j1xuICAgIDwvUHJlbWl1bUJ1dHRvbj5cblxuICAgIDxQcmVtaXVtQnV0dG9uXG4gICAgICBmZWF0dXJlSWQ9XCJsb2NhbF9wb3dlcmxpbmVzXCJcbiAgICAgIG9uQ2xpY2s9e2hhbmRsZURCWURQb3dlcmxpbmVzfVxuICAgICAgY2xhc3NOYW1lPVwibWFwLWJ1dHRvbiBiZy1ncmF5LTEwMCBob3ZlcjpiZy1ncmF5LTIwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LXN0YXJ0XCJcbiAgICA+XG4gICAgICBUb2dnbGUgTG9jYWwgUG93ZXJsaW5lcyDwn4+hXG4gICAgPC9QcmVtaXVtQnV0dG9uPlxuXG4gICAgPFByZW1pdW1CdXR0b25cbiAgICAgIGZlYXR1cmVJZD17Z2V0VGVycmFpbkZlYXR1cmVJZCgpfVxuICAgICAgb25DbGljaz17aGFuZGxlVG9nZ2xlVGVycmFpbkdyaWR9XG4gICAgICBjbGFzc05hbWU9XCJtYXAtYnV0dG9uIGJnLWdyYXktMTAwIGhvdmVyOmJnLWdyYXktMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktc3RhcnRcIlxuICAgICAgcGVybWlzc2lvblBhcmFtcz17eyBcbiAgICAgICAgZ3JpZFJlc29sdXRpb246IGdyaWRSZXNvbHV0aW9uLFxuICAgICAgICBncmlkUmFuZ2U6IGdyaWRSYW5nZVxuICAgICAgfX1cbiAgICA+XG4gICAgICB7aXNUZXJyYWluR3JpZFZpc2libGUgPyAnSGlkZScgOiAnU2hvdyd9IEFPIFRlcnJhaW4gR3JpZCDwn4yNXG4gICAgPC9QcmVtaXVtQnV0dG9uPlxuXG4gICAgey8qIEFuYWx5c2lzIENvbnRyb2xzICovfVxuICAgIHt0b2dnbGVQYW5lbCAmJiBzZXRTaG93VXBsb2FkZXIgJiYgKFxuICAgICAgPD5cbiAgICAgICAge2ZsaWdodFBsYW4gJiYgKFxuICAgICAgICAgIDxQcmVtaXVtQnV0dG9uXG4gICAgICAgICAgICBmZWF0dXJlSWQ9XCJmbGlnaHRfcGF0aF9hbmFseXNpc1wiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIHRyYWNrRXZlbnQoJ3VwbG9hZF9mbGlnaHRfcGxhbl9jbGljaycsIHsgcGFuZWw6ICdsYXllci1jb250cm9scycgfSk7XG4gICAgICAgICAgICAgIHNldFNob3dVcGxvYWRlcih0cnVlKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJtYXAtYnV0dG9uIGJnLWdyYXktMTAwIGhvdmVyOmJnLWdyYXktMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktc3RhcnQgZ2FwLTJcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIFVwbG9hZCBGbGlnaHQgUGxhblxuICAgICAgICAgIDwvUHJlbWl1bUJ1dHRvbj5cbiAgICAgICAgKX1cblxuICAgICAgICA8UHJlbWl1bUJ1dHRvblxuICAgICAgICAgIGZlYXR1cmVJZD1cIm1lcmdlZF9hbmFseXNpc1wiXG4gICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgdHJhY2tFdmVudCgnb3duX2RlbV9kYXRhX3JlcXVlc3QnLCB7IHBhbmVsOiAnbGF5ZXItY29udHJvbHMnIH0pO1xuICAgICAgICAgICAgd2luZG93LmFsZXJ0KCdDb21pbmcgU29vbiEnKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIGNsYXNzTmFtZT1cIm1hcC1idXR0b24gYmctZ3JheS0xMDAgaG92ZXI6YmctZ3JheS0yMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1zdGFydCBnYXAtMlwiXG4gICAgICAgID5cbiAgICAgICAgICBBZGQgWW91ciBPd24gREVNIERhdGFcbiAgICAgICAgPC9QcmVtaXVtQnV0dG9uPlxuICAgICAgPC8+XG4gICAgKX1cbiAgPC9kaXY+XG4pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTGF5ZXJDb250cm9sczsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZVJlZiIsInVzZU1hcENvbnRleHQiLCJNQVBfTEFZRVJTIiwidHJhY2tFdmVudFdpdGhGb3JtIiwidHJhY2tFdmVudCIsInVzZUFyZWFPcHNQcm9jZXNzb3IiLCJQcmVtaXVtQnV0dG9uIiwiTGF5ZXJDb250cm9scyIsIm9uVG9nZ2xlREJZRCIsImFjdGl2ZVBhbmVsIiwidG9nZ2xlUGFuZWwiLCJmbGlnaHRQbGFuIiwic2V0U2hvd1VwbG9hZGVyIiwibWFwIiwidG9nZ2xlTGF5ZXIiLCJzaG93QXJlYU9mT3BlcmF0aW9ucyIsImdlbmVyYXRlVGVycmFpbkdyaWQiLCJpc1RlcnJhaW5HcmlkVmlzaWJsZSIsInNldElzVGVycmFpbkdyaWRWaXNpYmxlIiwiZ3JpZFJlc29sdXRpb24iLCJzZXRHcmlkUmVzb2x1dGlvbiIsImdyaWRSYW5nZSIsInNldEdyaWRSYW5nZSIsImJ5ZExheWVySGFuZGxlclJlZiIsImhhbmRsZVRvZ2dsZVRlcnJhaW5HcmlkIiwiQU9URVJSQUlOX0dSSUQiLCJwYW5lbCIsImhhbmRsZURCWURQb3dlcmxpbmVzIiwiZ2V0VGVycmFpbkZlYXR1cmVJZCIsImRpdiIsImNsYXNzTmFtZSIsImZlYXR1cmVJZCIsIm9uQ2xpY2siLCJQT1dFUkxJTkVTIiwiUE9XRVJMSU5FU19ISVRCT1giLCJzaG93SW5kaWNhdG9yIiwiQUlSRklFTERTIiwiQUlSRklFTERTX0xBQkVMUyIsInBlcm1pc3Npb25QYXJhbXMiLCJ3aW5kb3ciLCJhbGVydCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/LayerControls.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/MapLegend.tsx":
/*!**********************************************!*\
  !*** ./src/app/components/Map/MapLegend.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n// components/Map/Displays/MapLegend.tsx\n\n\nconst MapLegend = ()=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"map-legend absolute bottom-4 right-4 bg-white bg-opacity-80 p-3 rounded-lg shadow-md\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                className: \"font-semibold mb-2\",\n                children: \"Legend\"\n            }, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                lineNumber: 7,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col gap-1\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"w-4 h-4 bg-[#d32f2f] block rounded\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                                lineNumber: 10,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"0% Visibility (Red)\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                                lineNumber: 11,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                        lineNumber: 9,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"w-4 h-4 bg-[#f57c00] block rounded\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                                lineNumber: 14,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"25% Visibility (Orange)\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                                lineNumber: 15,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                        lineNumber: 13,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"w-4 h-4 bg-[#fbc02d] block rounded\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                                lineNumber: 18,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"50% Visibility (Yellow)\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                                lineNumber: 19,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                        lineNumber: 17,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"w-4 h-4 bg-[#7cb342] block rounded\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                                lineNumber: 22,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"75% Visibility (Green)\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                                lineNumber: 23,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                        lineNumber: 21,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"w-4 h-4 bg-[#1976d2] block rounded\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                                lineNumber: 26,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"100% Visibility (Blue)\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                                lineNumber: 27,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                        lineNumber: 25,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n                lineNumber: 8,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MapLegend.tsx\",\n        lineNumber: 6,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MapLegend);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL01hcExlZ2VuZC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSx3Q0FBd0M7O0FBQ2Q7QUFFMUIsTUFBTUMsWUFBc0I7SUFDMUIscUJBQ0UsOERBQUNDO1FBQUlDLFdBQVU7OzBCQUNiLDhEQUFDQztnQkFBR0QsV0FBVTswQkFBcUI7Ozs7OzswQkFDbkMsOERBQUNEO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0Q7d0JBQUlDLFdBQVU7OzBDQUNiLDhEQUFDRTtnQ0FBS0YsV0FBVTs7Ozs7OzBDQUNoQiw4REFBQ0U7MENBQUs7Ozs7Ozs7Ozs7OztrQ0FFUiw4REFBQ0g7d0JBQUlDLFdBQVU7OzBDQUNiLDhEQUFDRTtnQ0FBS0YsV0FBVTs7Ozs7OzBDQUNoQiw4REFBQ0U7MENBQUs7Ozs7Ozs7Ozs7OztrQ0FFUiw4REFBQ0g7d0JBQUlDLFdBQVU7OzBDQUNiLDhEQUFDRTtnQ0FBS0YsV0FBVTs7Ozs7OzBDQUNoQiw4REFBQ0U7MENBQUs7Ozs7Ozs7Ozs7OztrQ0FFUiw4REFBQ0g7d0JBQUlDLFdBQVU7OzBDQUNiLDhEQUFDRTtnQ0FBS0YsV0FBVTs7Ozs7OzBDQUNoQiw4REFBQ0U7MENBQUs7Ozs7Ozs7Ozs7OztrQ0FFUiw4REFBQ0g7d0JBQUlDLFdBQVU7OzBDQUNiLDhEQUFDRTtnQ0FBS0YsV0FBVTs7Ozs7OzBDQUNoQiw4REFBQ0U7MENBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUtoQjtBQUVBLGlFQUFlSixTQUFTQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9jb21wb25lbnRzL01hcC9NYXBMZWdlbmQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbXBvbmVudHMvTWFwL0Rpc3BsYXlzL01hcExlZ2VuZC50c3hcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IE1hcExlZ2VuZDogUmVhY3QuRkMgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtYXAtbGVnZW5kIGFic29sdXRlIGJvdHRvbS00IHJpZ2h0LTQgYmctd2hpdGUgYmctb3BhY2l0eS04MCBwLTMgcm91bmRlZC1sZyBzaGFkb3ctbWRcIj5cbiAgICAgIDxoNCBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIG1iLTJcIj5MZWdlbmQ8L2g0PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC0xXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ3LTQgaC00IGJnLVsjZDMyZjJmXSBibG9jayByb3VuZGVkXCI+PC9zcGFuPlxuICAgICAgICAgIDxzcGFuPjAlIFZpc2liaWxpdHkgKFJlZCk8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidy00IGgtNCBiZy1bI2Y1N2MwMF0gYmxvY2sgcm91bmRlZFwiPjwvc3Bhbj5cbiAgICAgICAgICA8c3Bhbj4yNSUgVmlzaWJpbGl0eSAoT3JhbmdlKTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ3LTQgaC00IGJnLVsjZmJjMDJkXSBibG9jayByb3VuZGVkXCI+PC9zcGFuPlxuICAgICAgICAgIDxzcGFuPjUwJSBWaXNpYmlsaXR5IChZZWxsb3cpPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInctNCBoLTQgYmctWyM3Y2IzNDJdIGJsb2NrIHJvdW5kZWRcIj48L3NwYW4+XG4gICAgICAgICAgPHNwYW4+NzUlIFZpc2liaWxpdHkgKEdyZWVuKTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ3LTQgaC00IGJnLVsjMTk3NmQyXSBibG9jayByb3VuZGVkXCI+PC9zcGFuPlxuICAgICAgICAgIDxzcGFuPjEwMCUgVmlzaWJpbGl0eSAoQmx1ZSk8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNYXBMZWdlbmQ7Il0sIm5hbWVzIjpbIlJlYWN0IiwiTWFwTGVnZW5kIiwiZGl2IiwiY2xhc3NOYW1lIiwiaDQiLCJzcGFuIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/MapLegend.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/MapboxLayerHandler.tsx":
/*!*******************************************************!*\
  !*** ./src/app/components/Map/MapboxLayerHandler.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/LayerManager */ \"(ssr)/./src/app/services/LayerManager.ts\");\n/* harmony import */ var _hooks_useTreeHeights__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hooks/useTreeHeights */ \"(ssr)/./src/app/hooks/useTreeHeights.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\nconst getHeightForVoltage = (voltageValue)=>{\n    const voltage = voltageValue.trim();\n    switch(voltage){\n        case \"415\":\n            return \"7 m\";\n        case \"11\":\n            return \"9 m\";\n        case \"33\":\n            return \"20 m\";\n        case \"66\":\n            return \"20 m\";\n        case \"110\":\n            return \"45 m\";\n        case \"132\":\n            return \"45 m\";\n        case \"220\":\n            return \"45 m\";\n        case \"275\":\n            return \"55 m\";\n        case \"330\":\n            return \"65 m\";\n        case \"500\":\n            return \"76 m\";\n        default:\n            return \"N/A\";\n    }\n};\nconst MapboxLayerHandler = ({ map })=>{\n    const {} = (0,_context_mapcontext__WEBPACK_IMPORTED_MODULE_1__.useMapContext)();\n    const { toggleTreeHeights, handleTreeHeightClick, cleanup: cleanupTreeHeights, isInitialized } = (0,_hooks_useTreeHeights__WEBPACK_IMPORTED_MODULE_3__.useTreeHeights)(map);\n    const eventHandlersRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({});\n    const currentFeatureRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"MapboxLayerHandler.useEffect\": ()=>{\n            if (!map) return;\n            Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! mapbox-gl */ \"(ssr)/./node_modules/mapbox-gl/dist/mapbox-gl.js\", 23)).then({\n                \"MapboxLayerHandler.useEffect\": (mapboxModule)=>{\n                    const mapboxgl = mapboxModule.default;\n                    const extMap = map;\n                    // **POWERLINES LAYER SETUP**\n                    const powerSourceLayerName = \"Electricity_Transmission_Line-08vle5\";\n                    if (!map.getSource(\"electricity-lines\")) {\n                        map.addSource(\"electricity-lines\", {\n                            type: \"vector\",\n                            url: \"mapbox://intelaero.a8qtcidy\"\n                        });\n                    }\n                    if (!map.getLayer(\"Electricity Transmission Lines\")) {\n                        map.addLayer({\n                            id: \"Electricity Transmission Lines\",\n                            type: \"line\",\n                            source: \"electricity-lines\",\n                            \"source-layer\": powerSourceLayerName,\n                            layout: {\n                                visibility: \"none\"\n                            },\n                            paint: {\n                                \"line-color\": \"#f00\",\n                                \"line-width\": [\n                                    \"interpolate\",\n                                    [\n                                        \"linear\"\n                                    ],\n                                    [\n                                        \"zoom\"\n                                    ],\n                                    11,\n                                    1,\n                                    14,\n                                    2\n                                ]\n                            },\n                            minzoom: 10\n                        });\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.registerLayer(\"Electricity Transmission Lines\");\n                    }\n                    if (!map.getLayer(\"Electricity Transmission Lines Hitbox\")) {\n                        map.addLayer({\n                            id: \"Electricity Transmission Lines Hitbox\",\n                            type: \"line\",\n                            source: \"electricity-lines\",\n                            \"source-layer\": powerSourceLayerName,\n                            layout: {\n                                visibility: \"none\"\n                            },\n                            paint: {\n                                \"line-width\": 20,\n                                \"line-color\": \"rgba(0,0,0,0)\"\n                            },\n                            minzoom: 10\n                        });\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.registerLayer(\"Electricity Transmission Lines Hitbox\");\n                    }\n                    // **POWERLINES INTERACTIVITY**\n                    const handlePowerlineMouseEnter = {\n                        \"MapboxLayerHandler.useEffect.handlePowerlineMouseEnter\": (e)=>{\n                            map.getCanvas().style.cursor = \"pointer\";\n                            const feature = e.features && e.features[0];\n                            if (!feature) return;\n                            currentFeatureRef.current = feature;\n                            const voltage = feature.properties?.CAPACITY_KV || \"unknown\";\n                            const height = voltage !== \"unknown\" ? getHeightForVoltage(String(voltage)) : \"N/A\";\n                            const popupContent = `\n          <strong>Powerline</strong><br/>\n          <strong>Voltage (kV):</strong> ${voltage}<br/>\n          <strong>Height:</strong> ${height}\n        `;\n                            if (extMap.__currentPopup) extMap.__currentPopup.remove();\n                            const popup = new mapboxgl.Popup({\n                                closeButton: false,\n                                closeOnClick: false,\n                                maxWidth: \"300px\"\n                            }).setLngLat(e.lngLat).setHTML(popupContent).addTo(map);\n                            extMap.__currentPopup = popup;\n                        }\n                    }[\"MapboxLayerHandler.useEffect.handlePowerlineMouseEnter\"];\n                    const handlePowerlineMouseLeave = {\n                        \"MapboxLayerHandler.useEffect.handlePowerlineMouseLeave\": ()=>{\n                            map.getCanvas().style.cursor = \"\";\n                            currentFeatureRef.current = null;\n                            if (extMap.__currentPopup) {\n                                extMap.__currentPopup.remove();\n                                extMap.__currentPopup = null;\n                            }\n                        }\n                    }[\"MapboxLayerHandler.useEffect.handlePowerlineMouseLeave\"];\n                    const handleMapMouseMove = {\n                        \"MapboxLayerHandler.useEffect.handleMapMouseMove\": (e)=>{\n                            if (map.getLayer(\"Electricity Transmission Lines Hitbox\") && map.getLayoutProperty(\"Electricity Transmission Lines Hitbox\", \"visibility\") === \"visible\") {\n                                const features = map.queryRenderedFeatures(e.point, {\n                                    layers: [\n                                        \"Electricity Transmission Lines Hitbox\"\n                                    ]\n                                });\n                                if (features.length === 0 && currentFeatureRef.current !== null) {\n                                    handlePowerlineMouseLeave();\n                                }\n                            } else if (currentFeatureRef.current !== null) {\n                                handlePowerlineMouseLeave();\n                            }\n                        }\n                    }[\"MapboxLayerHandler.useEffect.handleMapMouseMove\"];\n                    map.on(\"mouseenter\", \"Electricity Transmission Lines Hitbox\", handlePowerlineMouseEnter);\n                    map.on(\"mouseleave\", \"Electricity Transmission Lines Hitbox\", handlePowerlineMouseLeave);\n                    map.on(\"mousemove\", handleMapMouseMove);\n                    // **AIRFIELDS LAYER SETUP**\n                    if (!map.getSource(\"airfields\")) {\n                        map.addSource(\"airfields\", {\n                            type: \"vector\",\n                            url: \"mapbox://intelaero.5d451fq2\"\n                        });\n                    }\n                    if (!map.getLayer(\"Airfields\")) {\n                        map.addLayer({\n                            id: \"Airfields\",\n                            type: \"fill\",\n                            layout: {\n                                visibility: \"none\"\n                            },\n                            source: \"airfields\",\n                            \"source-layer\": \"July2024Airservices-7op6cm\",\n                            paint: {\n                                \"fill-color\": \"#ff7f50\",\n                                \"fill-opacity\": 0.2,\n                                \"fill-outline-color\": \"#FFF\"\n                            },\n                            minzoom: 10\n                        });\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.registerLayer(\"Airfields\");\n                    }\n                    if (!map.getLayer(\"Airfields Labels\")) {\n                        map.addLayer({\n                            id: \"Airfields Labels\",\n                            type: \"symbol\",\n                            source: \"airfields\",\n                            \"source-layer\": \"July2024Airservices-7op6cm\",\n                            layout: {\n                                visibility: \"none\",\n                                \"text-field\": [\n                                    \"get\",\n                                    \"title\"\n                                ],\n                                \"symbol-placement\": \"line\",\n                                \"text-font\": [\n                                    \"Open Sans Bold\",\n                                    \"Arial Unicode MS Bold\"\n                                ],\n                                \"text-size\": 12,\n                                \"text-offset\": [\n                                    0,\n                                    0\n                                ],\n                                \"text-anchor\": \"center\"\n                            },\n                            paint: {\n                                \"text-color\": \"#FFF\"\n                            },\n                            minzoom: 12\n                        });\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.registerLayer(\"Airfields Labels\");\n                    }\n                    eventHandlersRef.current = {\n                        onPowerlineMouseEnter: handlePowerlineMouseEnter,\n                        onPowerlineMouseLeave: handlePowerlineMouseLeave,\n                        onMapMouseMove: handleMapMouseMove\n                    };\n                    console.log(\" MapboxLayerHandler initialization complete\");\n                }\n            }[\"MapboxLayerHandler.useEffect\"]);\n            // Cleanup function\n            return ({\n                \"MapboxLayerHandler.useEffect\": ()=>{\n                    if (!map) return;\n                    console.log(\" Cleaning up MapboxLayerHandler\");\n                    const handlers = eventHandlersRef.current;\n                    if (handlers.onPowerlineMouseEnter) {\n                        map.off(\"mouseenter\", \"Electricity Transmission Lines Hitbox\", handlers.onPowerlineMouseEnter);\n                    }\n                    if (handlers.onPowerlineMouseLeave) {\n                        map.off(\"mouseleave\", \"Electricity Transmission Lines Hitbox\", handlers.onPowerlineMouseLeave);\n                    }\n                    if (handlers.onMapMouseMove) {\n                        map.off(\"mousemove\", handlers.onMapMouseMove);\n                    }\n                    const extMap = map;\n                    if (extMap.__currentPopup) {\n                        extMap.__currentPopup.remove();\n                        extMap.__currentPopup = null;\n                    }\n                    if (extMap.__airfieldsPopup) {\n                        extMap.__airfieldsPopup.remove();\n                        extMap.__airfieldsPopup = null;\n                    }\n                    if (cleanupTreeHeights) {\n                        cleanupTreeHeights();\n                    }\n                    console.log(\" MapboxLayerHandler cleanup complete\");\n                }\n            })[\"MapboxLayerHandler.useEffect\"];\n        }\n    }[\"MapboxLayerHandler.useEffect\"], [\n        map,\n        cleanupTreeHeights\n    ]);\n    // Separate useEffect for tree heights integration\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"MapboxLayerHandler.useEffect\": ()=>{\n            if (!map || !isInitialized) return;\n            // Attach tree heights functionality only when initialized\n            map.toggleTreeHeights = toggleTreeHeights;\n            if (handleTreeHeightClick) {\n                map.on(\"click\", handleTreeHeightClick);\n            }\n            // ADD HOVER HANDLERS HERE:\n            const handleTreeHover = {\n                \"MapboxLayerHandler.useEffect.handleTreeHover\": (e)=>{\n                    if (!isInitialized || !map) return;\n                    const treeHeightVisible = _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.isLayerVisible(\"tree-height-raster\");\n                    if (!treeHeightVisible) return;\n                    // Simple hover effect - change cursor over map when tree layer is active\n                    map.getCanvas().style.cursor = 'crosshair';\n                }\n            }[\"MapboxLayerHandler.useEffect.handleTreeHover\"];\n            const handleTreeHoverLeave = {\n                \"MapboxLayerHandler.useEffect.handleTreeHoverLeave\": ()=>{\n                    if (!map) return;\n                    map.getCanvas().style.cursor = '';\n                }\n            }[\"MapboxLayerHandler.useEffect.handleTreeHoverLeave\"];\n            // Add hover listeners only when tree heights are visible\n            if (_services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.isLayerVisible(\"tree-height-raster\")) {\n                map.on('mousemove', handleTreeHover);\n                map.on('mouseleave', handleTreeHoverLeave);\n            }\n            return ({\n                \"MapboxLayerHandler.useEffect\": ()=>{\n                    delete map.toggleTreeHeights;\n                    if (handleTreeHeightClick) {\n                        map.off(\"click\", handleTreeHeightClick);\n                    }\n                    // Clean up hover listeners\n                    map.off('mousemove', handleTreeHover);\n                    map.off('mouseleave', handleTreeHoverLeave);\n                }\n            })[\"MapboxLayerHandler.useEffect\"];\n        }\n    }[\"MapboxLayerHandler.useEffect\"], [\n        map,\n        isInitialized,\n        toggleTreeHeights,\n        handleTreeHeightClick\n    ]);\n    return null;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MapboxLayerHandler);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL01hcGJveExheWVySGFuZGxlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OzZEQUUwQztBQUVlO0FBQ0U7QUFDQztBQVc1RCxNQUFNSyxzQkFBc0IsQ0FBQ0M7SUFDM0IsTUFBTUMsVUFBVUQsYUFBYUUsSUFBSTtJQUNqQyxPQUFRRDtRQUNOLEtBQUs7WUFBTyxPQUFPO1FBQ25CLEtBQUs7WUFBTSxPQUFPO1FBQ2xCLEtBQUs7WUFBTSxPQUFPO1FBQ2xCLEtBQUs7WUFBTSxPQUFPO1FBQ2xCLEtBQUs7WUFBTyxPQUFPO1FBQ25CLEtBQUs7WUFBTyxPQUFPO1FBQ25CLEtBQUs7WUFBTyxPQUFPO1FBQ25CLEtBQUs7WUFBTyxPQUFPO1FBQ25CLEtBQUs7WUFBTyxPQUFPO1FBQ25CLEtBQUs7WUFBTyxPQUFPO1FBQ25CO1lBQVMsT0FBTztJQUNsQjtBQUNGO0FBRUEsTUFBTUUscUJBQXdELENBQUMsRUFBRUMsR0FBRyxFQUFFO0lBQ3BFLE1BQU0sRUFBRyxHQUFHUixrRUFBYUE7SUFDekIsTUFBTSxFQUFFUyxpQkFBaUIsRUFBRUMscUJBQXFCLEVBQUVDLFNBQVNDLGtCQUFrQixFQUFFQyxhQUFhLEVBQUUsR0FBR1gscUVBQWNBLENBQUNNO0lBRWhILE1BQU1NLG1CQUFtQmYsNkNBQU1BLENBSTVCLENBQUM7SUFFSixNQUFNZ0Isb0JBQW9CaEIsNkNBQU1BLENBQXVDO0lBRXZFRCxnREFBU0E7d0NBQUM7WUFDUixJQUFJLENBQUNVLEtBQUs7WUFFViwrSkFBbUIsQ0FBQ1EsSUFBSTtnREFBQyxDQUFDQztvQkFDeEIsTUFBTUMsV0FBV0QsYUFBYUUsT0FBTztvQkFDckMsTUFBTUMsU0FBU1o7b0JBRWYsNkJBQTZCO29CQUM3QixNQUFNYSx1QkFBdUI7b0JBRTdCLElBQUksQ0FBQ2IsSUFBSWMsU0FBUyxDQUFDLHNCQUFzQjt3QkFDdkNkLElBQUllLFNBQVMsQ0FBQyxxQkFBcUI7NEJBQ2pDQyxNQUFNOzRCQUNO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SztvQkFFNUIsTUFBTW9FLG9CQUFvQjNFLGdFQUFZQSxDQUFDNEUsY0FBYyxDQUFDO29CQUN0RCxJQUFJLENBQUNELG1CQUFtQjtvQkFFeEIseUVBQXlFO29CQUN6RXBFLElBQUk2QixTQUFTLEdBQUdDLEtBQUssQ0FBQ0MsTUFBTSxHQUFHO2dCQUNqQzs7WUFFQSxNQUFNdUM7cUVBQXVCO29CQUMzQixJQUFJLENBQUN0RSxLQUFLO29CQUNWQSxJQUFJNkIsU0FBUyxHQUFHQyxLQUFLLENBQUNDLE1BQU0sR0FBRztnQkFDakM7O1lBRUEseURBQXlEO1lBQ3pELElBQUl0QyxnRUFBWUEsQ0FBQzRFLGNBQWMsQ0FBQyx1QkFBdUI7Z0JBQ3JEckUsSUFBSTBELEVBQUUsQ0FBQyxhQUFhUztnQkFDcEJuRSxJQUFJMEQsRUFBRSxDQUFDLGNBQWNZO1lBQ3ZCO1lBRUE7Z0RBQU87b0JBQ0wsT0FBTyxJQUFhckUsaUJBQWlCO29CQUNyQyxJQUFJQyx1QkFBdUI7d0JBQ3pCRixJQUFJaUUsR0FBRyxDQUFDLFNBQVMvRDtvQkFDbkI7b0JBQ0EsMkJBQTJCO29CQUMzQkYsSUFBSWlFLEdBQUcsQ0FBQyxhQUFhRTtvQkFDckJuRSxJQUFJaUUsR0FBRyxDQUFDLGNBQWNLO2dCQUN4Qjs7UUFDRjt1Q0FBRztRQUFDdEU7UUFBS0s7UUFBZUo7UUFBbUJDO0tBQXNCO0lBRWpFLE9BQU87QUFDVDtBQUVBLGlFQUFlSCxrQkFBa0JBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL01hcGJveExheWVySGFuZGxlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgdHlwZSBtYXBib3hnbCBmcm9tIFwibWFwYm94LWdsXCI7XG5pbXBvcnQgeyB1c2VNYXBDb250ZXh0IH0gZnJvbSBcIi4uLy4uL2NvbnRleHQvbWFwY29udGV4dFwiO1xuaW1wb3J0IHsgbGF5ZXJNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uL3NlcnZpY2VzL0xheWVyTWFuYWdlclwiO1xuaW1wb3J0IHsgdXNlVHJlZUhlaWdodHMgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlVHJlZUhlaWdodHNcIjtcblxuaW50ZXJmYWNlIE1hcGJveExheWVySGFuZGxlclByb3BzIHtcbiAgbWFwOiBtYXBib3hnbC5NYXAgfCBudWxsO1xufVxuXG50eXBlIEV4dGVuZGVkTWFwYm94TWFwID0gbWFwYm94Z2wuTWFwICYge1xuICBfX2N1cnJlbnRQb3B1cD86IG1hcGJveGdsLlBvcHVwIHwgbnVsbDtcbiAgX19haXJmaWVsZHNQb3B1cD86IG1hcGJveGdsLlBvcHVwIHwgbnVsbDtcbn07XG5cbmNvbnN0IGdldEhlaWdodEZvclZvbHRhZ2UgPSAodm9sdGFnZVZhbHVlOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICBjb25zdCB2b2x0YWdlID0gdm9sdGFnZVZhbHVlLnRyaW0oKTtcbiAgc3dpdGNoICh2b2x0YWdlKSB7XG4gICAgY2FzZSBcIjQxNVwiOiByZXR1cm4gXCI3IG1cIjtcbiAgICBjYXNlIFwiMTFcIjogcmV0dXJuIFwiOSBtXCI7XG4gICAgY2FzZSBcIjMzXCI6IHJldHVybiBcIjIwIG1cIjtcbiAgICBjYXNlIFwiNjZcIjogcmV0dXJuIFwiMjAgbVwiO1xuICAgIGNhc2UgXCIxMTBcIjogcmV0dXJuIFwiNDUgbVwiO1xuICAgIGNhc2UgXCIxMzJcIjogcmV0dXJuIFwiNDUgbVwiO1xuICAgIGNhc2UgXCIyMjBcIjogcmV0dXJuIFwiNDUgbVwiO1xuICAgIGNhc2UgXCIyNzVcIjogcmV0dXJuIFwiNTUgbVwiO1xuICAgIGNhc2UgXCIzMzBcIjogcmV0dXJuIFwiNjUgbVwiO1xuICAgIGNhc2UgXCI1MDBcIjogcmV0dXJuIFwiNzYgbVwiO1xuICAgIGRlZmF1bHQ6IHJldHVybiBcIk4vQVwiO1xuICB9XG59O1xuXG5jb25zdCBNYXBib3hMYXllckhhbmRsZXI6IFJlYWN0LkZDPE1hcGJveExheWVySGFuZGxlclByb3BzPiA9ICh7IG1hcCB9KSA9PiB7XG4gIGNvbnN0IHsgfSA9IHVzZU1hcENvbnRleHQoKTtcbiAgY29uc3QgeyB0b2dnbGVUcmVlSGVpZ2h0cywgaGFuZGxlVHJlZUhlaWdodENsaWNrLCBjbGVhbnVwOiBjbGVhbnVwVHJlZUhlaWdodHMsIGlzSW5pdGlhbGl6ZWQgfSA9IHVzZVRyZWVIZWlnaHRzKG1hcCk7XG5cbiAgY29uc3QgZXZlbnRIYW5kbGVyc1JlZiA9IHVzZVJlZjx7XG4gICAgb25Qb3dlcmxpbmVNb3VzZUVudGVyPzogKGU6IG1hcGJveGdsLk1hcE1vdXNlRXZlbnQgJiB7IGZlYXR1cmVzPzogbWFwYm94Z2wuTWFwYm94R2VvSlNPTkZlYXR1cmVbXSB9KSA9PiB2b2lkO1xuICAgIG9uUG93ZXJsaW5lTW91c2VMZWF2ZT86ICgpID0+IHZvaWQ7XG4gICAgb25NYXBNb3VzZU1vdmU/OiAoZTogbWFwYm94Z2wuTWFwTW91c2VFdmVudCkgPT4gdm9pZDtcbiAgfT4oe30pO1xuICBcbiAgY29uc3QgY3VycmVudEZlYXR1cmVSZWYgPSB1c2VSZWY8bWFwYm94Z2wuTWFwYm94R2VvSlNPTkZlYXR1cmUgfCBudWxsPihudWxsKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbWFwKSByZXR1cm47XG5cbiAgICBpbXBvcnQoXCJtYXBib3gtZ2xcIikudGhlbigobWFwYm94TW9kdWxlKSA9PiB7XG4gICAgICBjb25zdCBtYXBib3hnbCA9IG1hcGJveE1vZHVsZS5kZWZhdWx0O1xuICAgICAgY29uc3QgZXh0TWFwID0gbWFwIGFzIEV4dGVuZGVkTWFwYm94TWFwO1xuXG4gICAgICAvLyAqKlBPV0VSTElORVMgTEFZRVIgU0VUVVAqKlxuICAgICAgY29uc3QgcG93ZXJTb3VyY2VMYXllck5hbWUgPSBcIkVsZWN0cmljaXR5X1RyYW5zbWlzc2lvbl9MaW5lLTA4dmxlNVwiO1xuXG4gICAgICBpZiAoIW1hcC5nZXRTb3VyY2UoXCJlbGVjdHJpY2l0eS1saW5lc1wiKSkge1xuICAgICAgICBtYXAuYWRkU291cmNlKFwiZWxlY3RyaWNpdHktbGluZXNcIiwge1xuICAgICAgICAgIHR5cGU6IFwidmVjdG9yXCIsXG4gICAgICAgICAgdXJsOiBcIm1hcGJveDovL2ludGVsYWVyby5hOHF0Y2lkeVwiLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFtYXAuZ2V0TGF5ZXIoXCJFbGVjdHJpY2l0eSBUcmFuc21pc3Npb24gTGluZXNcIikpIHtcbiAgICAgICAgbWFwLmFkZExheWVyKHtcbiAgICAgICAgICBpZDogXCJFbGVjdHJpY2l0eSBUcmFuc21pc3Npb24gTGluZXNcIixcbiAgICAgICAgICB0eXBlOiBcImxpbmVcIixcbiAgICAgICAgICBzb3VyY2U6IFwiZWxlY3RyaWNpdHktbGluZXNcIixcbiAgICAgICAgICBcInNvdXJjZS1sYXllclwiOiBwb3dlclNvdXJjZUxheWVyTmFtZSxcbiAgICAgICAgICBsYXlvdXQ6IHsgdmlzaWJpbGl0eTogXCJub25lXCIgfSxcbiAgICAgICAgICBwYWludDoge1xuICAgICAgICAgICAgXCJsaW5lLWNvbG9yXCI6IFwiI2YwMFwiLFxuICAgICAgICAgICAgXCJsaW5lLXdpZHRoXCI6IFtcImludGVycG9sYXRlXCIsIFtcImxpbmVhclwiXSwgW1wiem9vbVwiXSwgMTEsIDEsIDE0LCAyXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1pbnpvb206IDEwLFxuICAgICAgICB9KTtcbiAgICAgICAgbGF5ZXJNYW5hZ2VyLnJlZ2lzdGVyTGF5ZXIoXCJFbGVjdHJpY2l0eSBUcmFuc21pc3Npb24gTGluZXNcIik7XG4gICAgICB9XG5cbiAgICAgIGlmICghbWFwLmdldExheWVyKFwiRWxlY3RyaWNpdHkgVHJhbnNtaXNzaW9uIExpbmVzIEhpdGJveFwiKSkge1xuICAgICAgICBtYXAuYWRkTGF5ZXIoe1xuICAgICAgICAgIGlkOiBcIkVsZWN0cmljaXR5IFRyYW5zbWlzc2lvbiBMaW5lcyBIaXRib3hcIixcbiAgICAgICAgICB0eXBlOiBcImxpbmVcIixcbiAgICAgICAgICBzb3VyY2U6IFwiZWxlY3RyaWNpdHktbGluZXNcIixcbiAgICAgICAgICBcInNvdXJjZS1sYXllclwiOiBwb3dlclNvdXJjZUxheWVyTmFtZSxcbiAgICAgICAgICBsYXlvdXQ6IHsgdmlzaWJpbGl0eTogXCJub25lXCIgfSxcbiAgICAgICAgICBwYWludDogeyBcImxpbmUtd2lkdGhcIjogMjAsIFwibGluZS1jb2xvclwiOiBcInJnYmEoMCwwLDAsMClcIiB9LFxuICAgICAgICAgIG1pbnpvb206IDEwLFxuICAgICAgICB9KTtcbiAgICAgICAgbGF5ZXJNYW5hZ2VyLnJlZ2lzdGVyTGF5ZXIoXCJFbGVjdHJpY2l0eSBUcmFuc21pc3Npb24gTGluZXMgSGl0Ym94XCIpO1xuICAgICAgfVxuXG4gICAgICAvLyAqKlBPV0VSTElORVMgSU5URVJBQ1RJVklUWSoqXG4gICAgICBjb25zdCBoYW5kbGVQb3dlcmxpbmVNb3VzZUVudGVyID0gKFxuICAgICAgICBlOiBtYXBib3hnbC5NYXBNb3VzZUV2ZW50ICYgeyBmZWF0dXJlcz86IG1hcGJveGdsLk1hcGJveEdlb0pTT05GZWF0dXJlW10gfVxuICAgICAgKSA9PiB7XG4gICAgICAgIG1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICAgICAgY29uc3QgZmVhdHVyZSA9IGUuZmVhdHVyZXMgJiYgZS5mZWF0dXJlc1swXTtcbiAgICAgICAgaWYgKCFmZWF0dXJlKSByZXR1cm47XG5cbiAgICAgICAgY3VycmVudEZlYXR1cmVSZWYuY3VycmVudCA9IGZlYXR1cmU7XG4gICAgICAgIGNvbnN0IHZvbHRhZ2UgPSBmZWF0dXJlLnByb3BlcnRpZXM/LkNBUEFDSVRZX0tWIHx8IFwidW5rbm93blwiO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSB2b2x0YWdlICE9PSBcInVua25vd25cIiA/IGdldEhlaWdodEZvclZvbHRhZ2UoU3RyaW5nKHZvbHRhZ2UpKSA6IFwiTi9BXCI7XG5cbiAgICAgICAgY29uc3QgcG9wdXBDb250ZW50ID0gYFxuICAgICAgICAgIDxzdHJvbmc+UG93ZXJsaW5lPC9zdHJvbmc+PGJyLz5cbiAgICAgICAgICA8c3Ryb25nPlZvbHRhZ2UgKGtWKTo8L3N0cm9uZz4gJHt2b2x0YWdlfTxici8+XG4gICAgICAgICAgPHN0cm9uZz5IZWlnaHQ6PC9zdHJvbmc+ICR7aGVpZ2h0fVxuICAgICAgICBgO1xuXG4gICAgICAgIGlmIChleHRNYXAuX19jdXJyZW50UG9wdXApIGV4dE1hcC5fX2N1cnJlbnRQb3B1cC5yZW1vdmUoKTtcblxuICAgICAgICBjb25zdCBwb3B1cCA9IG5ldyBtYXBib3hnbC5Qb3B1cCh7XG4gICAgICAgICAgY2xvc2VCdXR0b246IGZhbHNlLFxuICAgICAgICAgIGNsb3NlT25DbGljazogZmFsc2UsXG4gICAgICAgICAgbWF4V2lkdGg6IFwiMzAwcHhcIixcbiAgICAgICAgfSlcbiAgICAgICAgICAuc2V0TG5nTGF0KGUubG5nTGF0KVxuICAgICAgICAgIC5zZXRIVE1MKHBvcHVwQ29udGVudClcbiAgICAgICAgICAuYWRkVG8obWFwKTtcblxuICAgICAgICBleHRNYXAuX19jdXJyZW50UG9wdXAgPSBwb3B1cDtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGhhbmRsZVBvd2VybGluZU1vdXNlTGVhdmUgPSAoKSA9PiB7XG4gICAgICAgIG1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSBcIlwiO1xuICAgICAgICBjdXJyZW50RmVhdHVyZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgaWYgKGV4dE1hcC5fX2N1cnJlbnRQb3B1cCkge1xuICAgICAgICAgIGV4dE1hcC5fX2N1cnJlbnRQb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgICBleHRNYXAuX19jdXJyZW50UG9wdXAgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBoYW5kbGVNYXBNb3VzZU1vdmUgPSAoZTogbWFwYm94Z2wuTWFwTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBpZiAobWFwLmdldExheWVyKFwiRWxlY3RyaWNpdHkgVHJhbnNtaXNzaW9uIExpbmVzIEhpdGJveFwiKSAmJlxuICAgICAgICAgICAgbWFwLmdldExheW91dFByb3BlcnR5KFwiRWxlY3RyaWNpdHkgVHJhbnNtaXNzaW9uIExpbmVzIEhpdGJveFwiLCBcInZpc2liaWxpdHlcIikgPT09IFwidmlzaWJsZVwiKSB7XG4gICAgICAgICAgY29uc3QgZmVhdHVyZXMgPSBtYXAucXVlcnlSZW5kZXJlZEZlYXR1cmVzKGUucG9pbnQsIHtcbiAgICAgICAgICAgIGxheWVyczogW1wiRWxlY3RyaWNpdHkgVHJhbnNtaXNzaW9uIExpbmVzIEhpdGJveFwiXSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoZmVhdHVyZXMubGVuZ3RoID09PSAwICYmIGN1cnJlbnRGZWF0dXJlUmVmLmN1cnJlbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhhbmRsZVBvd2VybGluZU1vdXNlTGVhdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZlYXR1cmVSZWYuY3VycmVudCAhPT0gbnVsbCkge1xuICAgICAgICAgIGhhbmRsZVBvd2VybGluZU1vdXNlTGVhdmUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgbWFwLm9uKFwibW91c2VlbnRlclwiLCBcIkVsZWN0cmljaXR5IFRyYW5zbWlzc2lvbiBMaW5lcyBIaXRib3hcIiwgaGFuZGxlUG93ZXJsaW5lTW91c2VFbnRlcik7XG4gICAgICBtYXAub24oXCJtb3VzZWxlYXZlXCIsIFwiRWxlY3RyaWNpdHkgVHJhbnNtaXNzaW9uIExpbmVzIEhpdGJveFwiLCBoYW5kbGVQb3dlcmxpbmVNb3VzZUxlYXZlKTtcbiAgICAgIG1hcC5vbihcIm1vdXNlbW92ZVwiLCBoYW5kbGVNYXBNb3VzZU1vdmUpO1xuXG4gICAgICAvLyAqKkFJUkZJRUxEUyBMQVlFUiBTRVRVUCoqXG4gICAgICBpZiAoIW1hcC5nZXRTb3VyY2UoXCJhaXJmaWVsZHNcIikpIHtcbiAgICAgICAgbWFwLmFkZFNvdXJjZShcImFpcmZpZWxkc1wiLCB7XG4gICAgICAgICAgdHlwZTogXCJ2ZWN0b3JcIixcbiAgICAgICAgICB1cmw6IFwibWFwYm94Oi8vaW50ZWxhZXJvLjVkNDUxZnEyXCIsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW1hcC5nZXRMYXllcihcIkFpcmZpZWxkc1wiKSkge1xuICAgICAgICBtYXAuYWRkTGF5ZXIoe1xuICAgICAgICAgIGlkOiBcIkFpcmZpZWxkc1wiLFxuICAgICAgICAgIHR5cGU6IFwiZmlsbFwiLFxuICAgICAgICAgIGxheW91dDogeyB2aXNpYmlsaXR5OiBcIm5vbmVcIiB9LFxuICAgICAgICAgIHNvdXJjZTogXCJhaXJmaWVsZHNcIixcbiAgICAgICAgICBcInNvdXJjZS1sYXllclwiOiBcIkp1bHkyMDI0QWlyc2VydmljZXMtN29wNmNtXCIsXG4gICAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAgIFwiZmlsbC1jb2xvclwiOiBcIiNmZjdmNTBcIixcbiAgICAgICAgICAgIFwiZmlsbC1vcGFjaXR5XCI6IDAuMixcbiAgICAgICAgICAgIFwiZmlsbC1vdXRsaW5lLWNvbG9yXCI6IFwiI0ZGRlwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbWluem9vbTogMTAsXG4gICAgICAgIH0pO1xuICAgICAgICBsYXllck1hbmFnZXIucmVnaXN0ZXJMYXllcihcIkFpcmZpZWxkc1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFtYXAuZ2V0TGF5ZXIoXCJBaXJmaWVsZHMgTGFiZWxzXCIpKSB7XG4gICAgICAgIG1hcC5hZGRMYXllcih7XG4gICAgICAgICAgaWQ6IFwiQWlyZmllbGRzIExhYmVsc1wiLFxuICAgICAgICAgIHR5cGU6IFwic3ltYm9sXCIsXG4gICAgICAgICAgc291cmNlOiBcImFpcmZpZWxkc1wiLFxuICAgICAgICAgIFwic291cmNlLWxheWVyXCI6IFwiSnVseTIwMjRBaXJzZXJ2aWNlcy03b3A2Y21cIixcbiAgICAgICAgICBsYXlvdXQ6IHtcbiAgICAgICAgICAgIHZpc2liaWxpdHk6IFwibm9uZVwiLFxuICAgICAgICAgICAgXCJ0ZXh0LWZpZWxkXCI6IFtcImdldFwiLCBcInRpdGxlXCJdLFxuICAgICAgICAgICAgXCJzeW1ib2wtcGxhY2VtZW50XCI6IFwibGluZVwiLFxuICAgICAgICAgICAgXCJ0ZXh0LWZvbnRcIjogW1wiT3BlbiBTYW5zIEJvbGRcIiwgXCJBcmlhbCBVbmljb2RlIE1TIEJvbGRcIl0sXG4gICAgICAgICAgICBcInRleHQtc2l6ZVwiOiAxMixcbiAgICAgICAgICAgIFwidGV4dC1vZmZzZXRcIjogWzAsIDBdLFxuICAgICAgICAgICAgXCJ0ZXh0LWFuY2hvclwiOiBcImNlbnRlclwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGFpbnQ6IHsgXCJ0ZXh0LWNvbG9yXCI6IFwiI0ZGRlwiIH0sXG4gICAgICAgICAgbWluem9vbTogMTIsXG4gICAgICAgIH0pO1xuICAgICAgICBsYXllck1hbmFnZXIucmVnaXN0ZXJMYXllcihcIkFpcmZpZWxkcyBMYWJlbHNcIik7XG4gICAgICB9XG5cbiAgICAgIGV2ZW50SGFuZGxlcnNSZWYuY3VycmVudCA9IHtcbiAgICAgICAgb25Qb3dlcmxpbmVNb3VzZUVudGVyOiBoYW5kbGVQb3dlcmxpbmVNb3VzZUVudGVyLFxuICAgICAgICBvblBvd2VybGluZU1vdXNlTGVhdmU6IGhhbmRsZVBvd2VybGluZU1vdXNlTGVhdmUsXG4gICAgICAgIG9uTWFwTW91c2VNb3ZlOiBoYW5kbGVNYXBNb3VzZU1vdmUsXG4gICAgICB9O1xuXG4gICAgICBjb25zb2xlLmxvZyhcIuKchSBNYXBib3hMYXllckhhbmRsZXIgaW5pdGlhbGl6YXRpb24gY29tcGxldGVcIik7XG4gICAgfSk7XG5cbiAgICAvLyBDbGVhbnVwIGZ1bmN0aW9uXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICghbWFwKSByZXR1cm47XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKFwi8J+nuSBDbGVhbmluZyB1cCBNYXBib3hMYXllckhhbmRsZXJcIik7XG4gICAgICBcbiAgICAgIGNvbnN0IGhhbmRsZXJzID0gZXZlbnRIYW5kbGVyc1JlZi5jdXJyZW50O1xuICAgICAgXG4gICAgICBpZiAoaGFuZGxlcnMub25Qb3dlcmxpbmVNb3VzZUVudGVyKSB7XG4gICAgICAgIG1hcC5vZmYoXCJtb3VzZWVudGVyXCIsIFwiRWxlY3RyaWNpdHkgVHJhbnNtaXNzaW9uIExpbmVzIEhpdGJveFwiLCBoYW5kbGVycy5vblBvd2VybGluZU1vdXNlRW50ZXIpO1xuICAgICAgfVxuICAgICAgaWYgKGhhbmRsZXJzLm9uUG93ZXJsaW5lTW91c2VMZWF2ZSkge1xuICAgICAgICBtYXAub2ZmKFwibW91c2VsZWF2ZVwiLCBcIkVsZWN0cmljaXR5IFRyYW5zbWlzc2lvbiBMaW5lcyBIaXRib3hcIiwgaGFuZGxlcnMub25Qb3dlcmxpbmVNb3VzZUxlYXZlKTtcbiAgICAgIH1cbiAgICAgIGlmIChoYW5kbGVycy5vbk1hcE1vdXNlTW92ZSkge1xuICAgICAgICBtYXAub2ZmKFwibW91c2Vtb3ZlXCIsIGhhbmRsZXJzLm9uTWFwTW91c2VNb3ZlKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXh0TWFwID0gbWFwIGFzIEV4dGVuZGVkTWFwYm94TWFwO1xuICAgICAgaWYgKGV4dE1hcC5fX2N1cnJlbnRQb3B1cCkge1xuICAgICAgICBleHRNYXAuX19jdXJyZW50UG9wdXAucmVtb3ZlKCk7XG4gICAgICAgIGV4dE1hcC5fX2N1cnJlbnRQb3B1cCA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoZXh0TWFwLl9fYWlyZmllbGRzUG9wdXApIHtcbiAgICAgICAgZXh0TWFwLl9fYWlyZmllbGRzUG9wdXAucmVtb3ZlKCk7XG4gICAgICAgIGV4dE1hcC5fX2FpcmZpZWxkc1BvcHVwID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKGNsZWFudXBUcmVlSGVpZ2h0cykge1xuICAgICAgICBjbGVhbnVwVHJlZUhlaWdodHMoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coXCLinIUgTWFwYm94TGF5ZXJIYW5kbGVyIGNsZWFudXAgY29tcGxldGVcIik7XG4gICAgfTtcbiAgfSwgW21hcCwgY2xlYW51cFRyZWVIZWlnaHRzXSk7XG5cbiAgLy8gU2VwYXJhdGUgdXNlRWZmZWN0IGZvciB0cmVlIGhlaWdodHMgaW50ZWdyYXRpb25cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW1hcCB8fCAhaXNJbml0aWFsaXplZCkgcmV0dXJuO1xuXG4gICAgLy8gQXR0YWNoIHRyZWUgaGVpZ2h0cyBmdW5jdGlvbmFsaXR5IG9ubHkgd2hlbiBpbml0aWFsaXplZFxuICAgIChtYXAgYXMgYW55KS50b2dnbGVUcmVlSGVpZ2h0cyA9IHRvZ2dsZVRyZWVIZWlnaHRzO1xuICAgIGlmIChoYW5kbGVUcmVlSGVpZ2h0Q2xpY2spIHtcbiAgICAgIG1hcC5vbihcImNsaWNrXCIsIGhhbmRsZVRyZWVIZWlnaHRDbGljayk7XG4gICAgfVxuXG4gICAgLy8gQUREIEhPVkVSIEhBTkRMRVJTIEhFUkU6XG4gICAgY29uc3QgaGFuZGxlVHJlZUhvdmVyID0gKGU6IG1hcGJveGdsLk1hcE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmICghaXNJbml0aWFsaXplZCB8fCAhbWFwKSByZXR1cm47XG4gICAgICBcbiAgICAgIGNvbnN0IHRyZWVIZWlnaHRWaXNpYmxlID0gbGF5ZXJNYW5hZ2VyLmlzTGF5ZXJWaXNpYmxlKFwidHJlZS1oZWlnaHQtcmFzdGVyXCIpO1xuICAgICAgaWYgKCF0cmVlSGVpZ2h0VmlzaWJsZSkgcmV0dXJuO1xuICAgICAgXG4gICAgICAvLyBTaW1wbGUgaG92ZXIgZWZmZWN0IC0gY2hhbmdlIGN1cnNvciBvdmVyIG1hcCB3aGVuIHRyZWUgbGF5ZXIgaXMgYWN0aXZlXG4gICAgICBtYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gJ2Nyb3NzaGFpcic7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZVRyZWVIb3ZlckxlYXZlID0gKCkgPT4ge1xuICAgICAgaWYgKCFtYXApIHJldHVybjtcbiAgICAgIG1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSAnJztcbiAgICB9O1xuXG4gICAgLy8gQWRkIGhvdmVyIGxpc3RlbmVycyBvbmx5IHdoZW4gdHJlZSBoZWlnaHRzIGFyZSB2aXNpYmxlXG4gICAgaWYgKGxheWVyTWFuYWdlci5pc0xheWVyVmlzaWJsZShcInRyZWUtaGVpZ2h0LXJhc3RlclwiKSkge1xuICAgICAgbWFwLm9uKCdtb3VzZW1vdmUnLCBoYW5kbGVUcmVlSG92ZXIpO1xuICAgICAgbWFwLm9uKCdtb3VzZWxlYXZlJywgaGFuZGxlVHJlZUhvdmVyTGVhdmUpO1xuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkZWxldGUgKG1hcCBhcyBhbnkpLnRvZ2dsZVRyZWVIZWlnaHRzO1xuICAgICAgaWYgKGhhbmRsZVRyZWVIZWlnaHRDbGljaykge1xuICAgICAgICBtYXAub2ZmKFwiY2xpY2tcIiwgaGFuZGxlVHJlZUhlaWdodENsaWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENsZWFuIHVwIGhvdmVyIGxpc3RlbmVyc1xuICAgICAgbWFwLm9mZignbW91c2Vtb3ZlJywgaGFuZGxlVHJlZUhvdmVyKTtcbiAgICAgIG1hcC5vZmYoJ21vdXNlbGVhdmUnLCBoYW5kbGVUcmVlSG92ZXJMZWF2ZSk7XG4gICAgfTtcbiAgfSwgW21hcCwgaXNJbml0aWFsaXplZCwgdG9nZ2xlVHJlZUhlaWdodHMsIGhhbmRsZVRyZWVIZWlnaHRDbGlja10pO1xuXG4gIHJldHVybiBudWxsO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTWFwYm94TGF5ZXJIYW5kbGVyOyJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VNYXBDb250ZXh0IiwibGF5ZXJNYW5hZ2VyIiwidXNlVHJlZUhlaWdodHMiLCJnZXRIZWlnaHRGb3JWb2x0YWdlIiwidm9sdGFnZVZhbHVlIiwidm9sdGFnZSIsInRyaW0iLCJNYXBib3hMYXllckhhbmRsZXIiLCJtYXAiLCJ0b2dnbGVUcmVlSGVpZ2h0cyIsImhhbmRsZVRyZWVIZWlnaHRDbGljayIsImNsZWFudXAiLCJjbGVhbnVwVHJlZUhlaWdodHMiLCJpc0luaXRpYWxpemVkIiwiZXZlbnRIYW5kbGVyc1JlZiIsImN1cnJlbnRGZWF0dXJlUmVmIiwidGhlbiIsIm1hcGJveE1vZHVsZSIsIm1hcGJveGdsIiwiZGVmYXVsdCIsImV4dE1hcCIsInBvd2VyU291cmNlTGF5ZXJOYW1lIiwiZ2V0U291cmNlIiwiYWRkU291cmNlIiwidHlwZSIsInVybCIsImdldExheWVyIiwiYWRkTGF5ZXIiLCJpZCIsInNvdXJjZSIsImxheW91dCIsInZpc2liaWxpdHkiLCJwYWludCIsIm1pbnpvb20iLCJyZWdpc3RlckxheWVyIiwiaGFuZGxlUG93ZXJsaW5lTW91c2VFbnRlciIsImUiLCJnZXRDYW52YXMiLCJzdHlsZSIsImN1cnNvciIsImZlYXR1cmUiLCJmZWF0dXJlcyIsImN1cnJlbnQiLCJwcm9wZXJ0aWVzIiwiQ0FQQUNJVFlfS1YiLCJoZWlnaHQiLCJTdHJpbmciLCJwb3B1cENvbnRlbnQiLCJfX2N1cnJlbnRQb3B1cCIsInJlbW92ZSIsInBvcHVwIiwiUG9wdXAiLCJjbG9zZUJ1dHRvbiIsImNsb3NlT25DbGljayIsIm1heFdpZHRoIiwic2V0TG5nTGF0IiwibG5nTGF0Iiwic2V0SFRNTCIsImFkZFRvIiwiaGFuZGxlUG93ZXJsaW5lTW91c2VMZWF2ZSIsImhhbmRsZU1hcE1vdXNlTW92ZSIsImdldExheW91dFByb3BlcnR5IiwicXVlcnlSZW5kZXJlZEZlYXR1cmVzIiwicG9pbnQiLCJsYXllcnMiLCJsZW5ndGgiLCJvbiIsIm9uUG93ZXJsaW5lTW91c2VFbnRlciIsIm9uUG93ZXJsaW5lTW91c2VMZWF2ZSIsIm9uTWFwTW91c2VNb3ZlIiwiY29uc29sZSIsImxvZyIsImhhbmRsZXJzIiwib2ZmIiwiX19haXJmaWVsZHNQb3B1cCIsImhhbmRsZVRyZWVIb3ZlciIsInRyZWVIZWlnaHRWaXNpYmxlIiwiaXNMYXllclZpc2libGUiLCJoYW5kbGVUcmVlSG92ZXJMZWF2ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/MapboxLayerHandler.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/MarkerControls.tsx":
/*!***************************************************!*\
  !*** ./src/app/components/Map/MarkerControls.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Hooks_useMarkers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Hooks/useMarkers */ \"(ssr)/./src/app/components/Map/Hooks/useMarkers.ts\");\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _context_LOSAnalysisContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../context/LOSAnalysisContext */ \"(ssr)/./src/app/context/LOSAnalysisContext.tsx\");\n/* harmony import */ var _tracking_tracking__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tracking/tracking */ \"(ssr)/./src/app/components/tracking/tracking.js\");\n/* harmony import */ var _components_UI_PremiumButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../components/UI/PremiumButton */ \"(ssr)/./src/app/components/UI/PremiumButton.tsx\");\n/* harmony import */ var _barrel_optimize_names_Eye_Radio_Wifi_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=Eye,Radio,Wifi,XCircle!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/circle-x.js\");\n/* harmony import */ var _barrel_optimize_names_Eye_Radio_Wifi_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=Eye,Radio,Wifi,XCircle!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/wifi.js\");\n/* harmony import */ var _barrel_optimize_names_Eye_Radio_Wifi_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=Eye,Radio,Wifi,XCircle!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/radio.js\");\n/* harmony import */ var _barrel_optimize_names_Eye_Radio_Wifi_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=Eye,Radio,Wifi,XCircle!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/eye.js\");\n/* harmony import */ var _context_ChecklistContext__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../context/ChecklistContext */ \"(ssr)/./src/app/context/ChecklistContext.tsx\");\n// components/Map/Controls/MarkerControls.tsx\n/**\n * MarkerControls.tsx\n * \n * This component provides UI controls for adding and managing map markers (GCS, Observer, Repeater).\n * It integrates with the useMarkers hook for marker management and the GridAnalysisController\n * for running station-specific LOS analyses when markers are placed.\n * \n * Related to:\n * - useMarkers hook (marker management)\n * - GridAnalysisController (station analysis)\n * - MarkerContext (marker state)\n * - LOSAnalysisContext (analysis configuration)\n */ // components/Map/Controls/MarkerControls.tsx\n\n\n\n\n\n\n\n\n\nconst MarkerControls = ()=>{\n    const { map, terrainLoaded } = (0,_context_mapcontext__WEBPACK_IMPORTED_MODULE_3__.useMapContext)();\n    const { markerConfigs } = (0,_context_LOSAnalysisContext__WEBPACK_IMPORTED_MODULE_4__.useLOSAnalysis)();\n    const { highlightMarkers, setHighlightMarkers } = (0,_context_ChecklistContext__WEBPACK_IMPORTED_MODULE_7__.useChecklistContext)();\n    // Clear highlight when any marker button is clicked\n    const clearHighlight = ()=>setHighlightMarkers(false);\n    // Reference to the grid analysis controller\n    const gridAnalysisRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { markers, addGroundStation, addObserver, addRepeater, removeAllAnalysisLayers, error// This will be displayed to the user\n     } = (0,_Hooks_useMarkers__WEBPACK_IMPORTED_MODULE_2__.useMarkers)({\n        map,\n        terrainLoaded: terrainLoaded\n    });\n    // Enhanced handlers to optionally trigger analysis\n    const handleAddGroundStation = async ()=>{\n        clearHighlight();\n        // Add marker and get location\n        const location = await addGroundStation();\n        // If auto-analysis is enabled and location was created successfully\n        if (location && gridAnalysisRef.current) {\n            try {\n                // Find the marker we just created to get its ID\n                const newMarker = markers.find((m)=>m.type === 'gcs' && m.location.lng === location.lng && m.location.lat === location.lat);\n                if (newMarker) {\n                    await gridAnalysisRef.current.runStationAnalysis({\n                        stationType: 'gcs',\n                        location,\n                        range: markerConfigs.gcs.gridRange,\n                        elevationOffset: newMarker.elevationOffset,\n                        markerId: newMarker.id\n                    });\n                }\n            } catch (error) {\n                console.error(\"Failed to run GCS analysis:\", error);\n            }\n        }\n    };\n    // Apply conditional class to all buttons:\n    const buttonClass = `map-button ${highlightMarkers ? 'pulse-highlight' : ''}`;\n    const handleAddObserver = async ()=>{\n        const location = await addObserver();\n        if (location && gridAnalysisRef.current) {\n            try {\n                // Find the marker we just created\n                const newMarker = markers.find((m)=>m.type === 'observer' && m.location.lng === location.lng && m.location.lat === location.lat);\n                if (newMarker) {\n                    await gridAnalysisRef.current.runStationAnalysis({\n                        stationType: 'observer',\n                        location,\n                        range: markerConfigs.observer.gridRange,\n                        elevationOffset: newMarker.elevationOffset,\n                        markerId: newMarker.id\n                    });\n                }\n            } catch (error) {\n                console.error(\"Failed to run Observer analysis:\", error);\n            }\n        }\n    };\n    const handleAddRepeater = async ()=>{\n        const location = await addRepeater();\n        if (location && gridAnalysisRef.current) {\n            try {\n                // Find the marker we just created\n                const newMarker = markers.find((m)=>m.type === 'repeater' && m.location.lng === location.lng && m.location.lat === location.lat);\n                if (newMarker) {\n                    await gridAnalysisRef.current.runStationAnalysis({\n                        stationType: 'repeater',\n                        location,\n                        range: markerConfigs.repeater.gridRange,\n                        elevationOffset: newMarker.elevationOffset,\n                        markerId: newMarker.id\n                    });\n                }\n            } catch (error) {\n                console.error(\"Failed to run Repeater analysis:\", error);\n            }\n        }\n    };\n    const handleResetAnalyses = ()=>{\n        (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_5__.trackEventWithForm)(\"reset_los_analyses_click\", {\n            panel: \"map.tsx\"\n        });\n        removeAllAnalysisLayers();\n        // If analysis is in progress, abort it\n        if (gridAnalysisRef.current) {\n            gridAnalysisRef.current.abortAnalysis();\n        }\n    };\n    // Get marker counts for permission parameters\n    const gcsCount = markers.filter((m)=>m.type === 'gcs').length;\n    const observerCount = markers.filter((m)=>m.type === 'observer').length;\n    const repeaterCount = markers.filter((m)=>m.type === 'repeater').length;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute top-20 right-4 z-30 bg-red-50 border border-red-200 text-red-700  px-4 py-2 rounded-md shadow-md max-w-xs animate-fadeIn\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-start\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Eye_Radio_Wifi_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                            size: 16,\n                            className: \"mt-0.5 mr-2 flex-shrink-0\"\n                        }, void 0, false, {\n                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MarkerControls.tsx\",\n                            lineNumber: 158,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm\",\n                            children: error\n                        }, void 0, false, {\n                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MarkerControls.tsx\",\n                            lineNumber: 159,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MarkerControls.tsx\",\n                    lineNumber: 157,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MarkerControls.tsx\",\n                lineNumber: 155,\n                columnNumber: 9\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute top-4 right-4 z-20 flex flex-col space-y-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_UI_PremiumButton__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                        featureId: \"add_gcs\",\n                        onClick: handleAddGroundStation,\n                        className: `map-button ground-station-icon flex items-center justify-center ${highlightMarkers ? 'pulse-highlight' : ''}`,\n                        permissionParams: {\n                            currentCount: gcsCount\n                        },\n                        showIndicator: true,\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Eye_Radio_Wifi_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                size: 16,\n                                className: \"mr-2\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MarkerControls.tsx\",\n                                lineNumber: 173,\n                                columnNumber: 11\n                            }, undefined),\n                            \"Add Ground Station\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MarkerControls.tsx\",\n                        lineNumber: 166,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_UI_PremiumButton__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                        featureId: \"add_repeater\",\n                        onClick: handleAddRepeater,\n                        className: `map-button repeater-icon flex items-center justify-center ${highlightMarkers ? 'pulse-highlight' : ''}`,\n                        permissionParams: {\n                            currentCount: repeaterCount\n                        },\n                        showIndicator: true,\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Eye_Radio_Wifi_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                                size: 16,\n                                className: \"mr-2\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MarkerControls.tsx\",\n                                lineNumber: 185,\n                                columnNumber: 11\n                            }, undefined),\n                            \"Add Repeater\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MarkerControls.tsx\",\n                        lineNumber: 178,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_UI_PremiumButton__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                        featureId: \"add_observer\",\n                        onClick: handleAddObserver,\n                        className: `map-button observer-icon flex items-center justify-center ${highlightMarkers ? 'pulse-highlight' : ''}`,\n                        permissionParams: {\n                            currentCount: observerCount\n                        },\n                        showIndicator: true,\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Eye_Radio_Wifi_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                size: 16,\n                                className: \"mr-2\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MarkerControls.tsx\",\n                                lineNumber: 197,\n                                columnNumber: 11\n                            }, undefined),\n                            \"Add Observer\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MarkerControls.tsx\",\n                        lineNumber: 190,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: handleResetAnalyses,\n                        className: \"map-button flex items-center justify-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Eye_Radio_Wifi_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                size: 16,\n                                className: \"mr-2\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MarkerControls.tsx\",\n                                lineNumber: 206,\n                                columnNumber: 11\n                            }, undefined),\n                            \"Clear All Analyses\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MarkerControls.tsx\",\n                        lineNumber: 202,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MarkerControls.tsx\",\n                lineNumber: 164,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MarkerControls);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL01hcmtlckNvbnRyb2xzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSw2Q0FBNkM7QUFDN0M7Ozs7Ozs7Ozs7OztDQVlDLEdBQ0QsNkNBQTZDOztBQUNHO0FBQ0E7QUFDUztBQUNTO0FBRU07QUFDVjtBQUNMO0FBQ1k7QUFFckUsTUFBTWEsaUJBQTJCO0lBQy9CLE1BQU0sRUFBRUMsR0FBRyxFQUFFQyxhQUFhLEVBQUUsR0FBR1osa0VBQWFBO0lBQzVDLE1BQU0sRUFBRWEsYUFBYSxFQUFFLEdBQUdaLDJFQUFjQTtJQUN4QyxNQUFNLEVBQUVhLGdCQUFnQixFQUFFQyxtQkFBbUIsRUFBRSxHQUFHTiw4RUFBbUJBO0lBRW5FLG9EQUFvRDtJQUN0RCxNQUFNTyxpQkFBaUIsSUFBTUQsb0JBQW9CO0lBRWpELDRDQUE0QztJQUM1QyxNQUFNRSxrQkFBa0JuQiw2Q0FBTUEsQ0FBeUI7SUFFdkQsTUFBTSxFQUNKb0IsT0FBTyxFQUNQQyxnQkFBZ0IsRUFDaEJDLFdBQVcsRUFDWEMsV0FBVyxFQUNYQyx1QkFBdUIsRUFDdkJDLEtBQUsscUNBQXNDO01BQzVDLEdBQUd4Qiw2REFBVUEsQ0FBQztRQUNiWTtRQUNBQyxlQUFlQTtJQUNqQjtJQUVBLG1EQUFtRDtJQUNuRCxNQUFNWSx5QkFBeUI7UUFDN0JSO1FBQ0EsOEJBQThCO1FBQzlCLE1BQU1TLFdBQVcsTUFBTU47UUFFdkIsb0VBQW9FO1FBQ3BFLElBQUlNLFlBQVlSLGdCQUFnQlMsT0FBTyxFQUFFO1lBQ3ZDLElBQUk7Z0JBQ0YsZ0RBQWdEO2dCQUNoRCxNQUFNQyxZQUFZVCxRQUFRVSxJQUFJLENBQUNDLENBQUFBLElBQzdCQSxFQUFFQyxJQUFJLEtBQUssU0FDWEQsRUFBRUosUUFBUSxDQUFDTSxHQUFHLEtBQUtOLFNBQVNNLEdBQUcsSUFDL0JGLEVBQUVKLFFBQVEsQ0FBQ08sR0FBRyxLQUFLUCxTQUFTTyxHQUFHO2dCQUdqQyxJQUFJ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QWU5QyxjQUFjQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9jb21wb25lbnRzL01hcC9NYXJrZXJDb250cm9scy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY29tcG9uZW50cy9NYXAvQ29udHJvbHMvTWFya2VyQ29udHJvbHMudHN4XG4vKipcbiAqIE1hcmtlckNvbnRyb2xzLnRzeFxuICogXG4gKiBUaGlzIGNvbXBvbmVudCBwcm92aWRlcyBVSSBjb250cm9scyBmb3IgYWRkaW5nIGFuZCBtYW5hZ2luZyBtYXAgbWFya2VycyAoR0NTLCBPYnNlcnZlciwgUmVwZWF0ZXIpLlxuICogSXQgaW50ZWdyYXRlcyB3aXRoIHRoZSB1c2VNYXJrZXJzIGhvb2sgZm9yIG1hcmtlciBtYW5hZ2VtZW50IGFuZCB0aGUgR3JpZEFuYWx5c2lzQ29udHJvbGxlclxuICogZm9yIHJ1bm5pbmcgc3RhdGlvbi1zcGVjaWZpYyBMT1MgYW5hbHlzZXMgd2hlbiBtYXJrZXJzIGFyZSBwbGFjZWQuXG4gKiBcbiAqIFJlbGF0ZWQgdG86XG4gKiAtIHVzZU1hcmtlcnMgaG9vayAobWFya2VyIG1hbmFnZW1lbnQpXG4gKiAtIEdyaWRBbmFseXNpc0NvbnRyb2xsZXIgKHN0YXRpb24gYW5hbHlzaXMpXG4gKiAtIE1hcmtlckNvbnRleHQgKG1hcmtlciBzdGF0ZSlcbiAqIC0gTE9TQW5hbHlzaXNDb250ZXh0IChhbmFseXNpcyBjb25maWd1cmF0aW9uKVxuICovXG4vLyBjb21wb25lbnRzL01hcC9Db250cm9scy9NYXJrZXJDb250cm9scy50c3hcbmltcG9ydCBSZWFjdCwgeyB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlTWFya2VycyB9IGZyb20gJy4vSG9va3MvdXNlTWFya2Vycyc7XG5pbXBvcnQgeyB1c2VNYXBDb250ZXh0IH0gZnJvbSAnLi4vLi4vY29udGV4dC9tYXBjb250ZXh0JztcbmltcG9ydCB7IHVzZUxPU0FuYWx5c2lzIH0gZnJvbSAnLi4vLi4vY29udGV4dC9MT1NBbmFseXNpc0NvbnRleHQnO1xuaW1wb3J0IHsgR3JpZEFuYWx5c2lzUmVmIH0gZnJvbSAnLi4vQW5hbHlzZXMvU2VydmljZXMvR3JpZEFuYWx5c2lzL0dyaWRBbmFseXNpc0NvbnRyb2xsZXInO1xuaW1wb3J0IHsgdHJhY2tFdmVudFdpdGhGb3JtIGFzIHRyYWNrRXZlbnQgfSBmcm9tICcuLi90cmFja2luZy90cmFja2luZyc7XG5pbXBvcnQgUHJlbWl1bUJ1dHRvbiBmcm9tICcuLi8uLi9jb21wb25lbnRzL1VJL1ByZW1pdW1CdXR0b24nO1xuaW1wb3J0IHsgV2lmaSwgUmFkaW8sIEV5ZSwgWENpcmNsZSB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyB1c2VDaGVja2xpc3RDb250ZXh0IH0gZnJvbSAnLi4vLi4vY29udGV4dC9DaGVja2xpc3RDb250ZXh0JztcblxuY29uc3QgTWFya2VyQ29udHJvbHM6IFJlYWN0LkZDID0gKCkgPT4ge1xuICBjb25zdCB7IG1hcCwgdGVycmFpbkxvYWRlZCB9ID0gdXNlTWFwQ29udGV4dCgpO1xuICBjb25zdCB7IG1hcmtlckNvbmZpZ3MgfSA9IHVzZUxPU0FuYWx5c2lzKCk7XG4gIGNvbnN0IHsgaGlnaGxpZ2h0TWFya2Vycywgc2V0SGlnaGxpZ2h0TWFya2VycyB9ID0gdXNlQ2hlY2tsaXN0Q29udGV4dCgpO1xuXG4gICAgLy8gQ2xlYXIgaGlnaGxpZ2h0IHdoZW4gYW55IG1hcmtlciBidXR0b24gaXMgY2xpY2tlZFxuICBjb25zdCBjbGVhckhpZ2hsaWdodCA9ICgpID0+IHNldEhpZ2hsaWdodE1hcmtlcnMoZmFsc2UpO1xuICBcbiAgLy8gUmVmZXJlbmNlIHRvIHRoZSBncmlkIGFuYWx5c2lzIGNvbnRyb2xsZXJcbiAgY29uc3QgZ3JpZEFuYWx5c2lzUmVmID0gdXNlUmVmPEdyaWRBbmFseXNpc1JlZiB8IG51bGw+KG51bGwpO1xuICBcbiAgY29uc3Qge1xuICAgIG1hcmtlcnMsIC8vIEdldCBhbGwgbWFya2VycyBmcm9tIGhvb2tcbiAgICBhZGRHcm91bmRTdGF0aW9uLFxuICAgIGFkZE9ic2VydmVyLFxuICAgIGFkZFJlcGVhdGVyLFxuICAgIHJlbW92ZUFsbEFuYWx5c2lzTGF5ZXJzLFxuICAgIGVycm9yIC8vIFRoaXMgd2lsbCBiZSBkaXNwbGF5ZWQgdG8gdGhlIHVzZXJcbiAgfSA9IHVzZU1hcmtlcnMoeyBcbiAgICBtYXAsIFxuICAgIHRlcnJhaW5Mb2FkZWQ6IHRlcnJhaW5Mb2FkZWQgXG4gIH0pO1xuXG4gIC8vIEVuaGFuY2VkIGhhbmRsZXJzIHRvIG9wdGlvbmFsbHkgdHJpZ2dlciBhbmFseXNpc1xuICBjb25zdCBoYW5kbGVBZGRHcm91bmRTdGF0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgIGNsZWFySGlnaGxpZ2h0KCk7XG4gICAgLy8gQWRkIG1hcmtlciBhbmQgZ2V0IGxvY2F0aW9uXG4gICAgY29uc3QgbG9jYXRpb24gPSBhd2FpdCBhZGRHcm91bmRTdGF0aW9uKCk7XG4gICAgXG4gICAgLy8gSWYgYXV0by1hbmFseXNpcyBpcyBlbmFibGVkIGFuZCBsb2NhdGlvbiB3YXMgY3JlYXRlZCBzdWNjZXNzZnVsbHlcbiAgICBpZiAobG9jYXRpb24gJiYgZ3JpZEFuYWx5c2lzUmVmLmN1cnJlbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEZpbmQgdGhlIG1hcmtlciB3ZSBqdXN0IGNyZWF0ZWQgdG8gZ2V0IGl0cyBJRFxuICAgICAgICBjb25zdCBuZXdNYXJrZXIgPSBtYXJrZXJzLmZpbmQobSA9PiBcbiAgICAgICAgICBtLnR5cGUgPT09ICdnY3MnICYmIFxuICAgICAgICAgIG0ubG9jYXRpb24ubG5nID09PSBsb2NhdGlvbi5sbmcgJiYgXG4gICAgICAgICAgbS5sb2NhdGlvbi5sYXQgPT09IGxvY2F0aW9uLmxhdFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKG5ld01hcmtlcikge1xuICAgICAgICAgIGF3YWl0IGdyaWRBbmFseXNpc1JlZi5jdXJyZW50LnJ1blN0YXRpb25BbmFseXNpcyh7XG4gICAgICAgICAgICBzdGF0aW9uVHlwZTogJ2djcycsXG4gICAgICAgICAgICBsb2NhdGlvbixcbiAgICAgICAgICAgIHJhbmdlOiBtYXJrZXJDb25maWdzLmdjcy5ncmlkUmFuZ2UsXG4gICAgICAgICAgICBlbGV2YXRpb25PZmZzZXQ6IG5ld01hcmtlci5lbGV2YXRpb25PZmZzZXQsXG4gICAgICAgICAgICBtYXJrZXJJZDogbmV3TWFya2VyLmlkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gcnVuIEdDUyBhbmFseXNpczpcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgLy8gQXBwbHkgY29uZGl0aW9uYWwgY2xhc3MgdG8gYWxsIGJ1dHRvbnM6XG4gIGNvbnN0IGJ1dHRvbkNsYXNzID0gYG1hcC1idXR0b24gJHtoaWdobGlnaHRNYXJrZXJzID8gJ3B1bHNlLWhpZ2hsaWdodCcgOiAnJ31gO1xuXG4gIGNvbnN0IGhhbmRsZUFkZE9ic2VydmVyID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGxvY2F0aW9uID0gYXdhaXQgYWRkT2JzZXJ2ZXIoKTtcbiAgICBcbiAgICBpZiAobG9jYXRpb24gJiYgZ3JpZEFuYWx5c2lzUmVmLmN1cnJlbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEZpbmQgdGhlIG1hcmtlciB3ZSBqdXN0IGNyZWF0ZWRcbiAgICAgICAgY29uc3QgbmV3TWFya2VyID0gbWFya2Vycy5maW5kKG0gPT4gXG4gICAgICAgICAgbS50eXBlID09PSAnb2JzZXJ2ZXInICYmIFxuICAgICAgICAgIG0ubG9jYXRpb24ubG5nID09PSBsb2NhdGlvbi5sbmcgJiYgXG4gICAgICAgICAgbS5sb2NhdGlvbi5sYXQgPT09IGxvY2F0aW9uLmxhdFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKG5ld01hcmtlcikge1xuICAgICAgICAgIGF3YWl0IGdyaWRBbmFseXNpc1JlZi5jdXJyZW50LnJ1blN0YXRpb25BbmFseXNpcyh7XG4gICAgICAgICAgICBzdGF0aW9uVHlwZTogJ29ic2VydmVyJyxcbiAgICAgICAgICAgIGxvY2F0aW9uLFxuICAgICAgICAgICAgcmFuZ2U6IG1hcmtlckNvbmZpZ3Mub2JzZXJ2ZXIuZ3JpZFJhbmdlLFxuICAgICAgICAgICAgZWxldmF0aW9uT2Zmc2V0OiBuZXdNYXJrZXIuZWxldmF0aW9uT2Zmc2V0LFxuICAgICAgICAgICAgbWFya2VySWQ6IG5ld01hcmtlci5pZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHJ1biBPYnNlcnZlciBhbmFseXNpczpcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVBZGRSZXBlYXRlciA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBsb2NhdGlvbiA9IGF3YWl0IGFkZFJlcGVhdGVyKCk7XG4gICAgXG4gICAgaWYgKGxvY2F0aW9uICYmIGdyaWRBbmFseXNpc1JlZi5jdXJyZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBGaW5kIHRoZSBtYXJrZXIgd2UganVzdCBjcmVhdGVkXG4gICAgICAgIGNvbnN0IG5ld01hcmtlciA9IG1hcmtlcnMuZmluZChtID0+IFxuICAgICAgICAgIG0udHlwZSA9PT0gJ3JlcGVhdGVyJyAmJiBcbiAgICAgICAgICBtLmxvY2F0aW9uLmxuZyA9PT0gbG9jYXRpb24ubG5nICYmIFxuICAgICAgICAgIG0ubG9jYXRpb24ubGF0ID09PSBsb2NhdGlvbi5sYXRcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChuZXdNYXJrZXIpIHtcbiAgICAgICAgICBhd2FpdCBncmlkQW5hbHlzaXNSZWYuY3VycmVudC5ydW5TdGF0aW9uQW5hbHlzaXMoe1xuICAgICAgICAgICAgc3RhdGlvblR5cGU6ICdyZXBlYXRlcicsXG4gICAgICAgICAgICBsb2NhdGlvbixcbiAgICAgICAgICAgIHJhbmdlOiBtYXJrZXJDb25maWdzLnJlcGVhdGVyLmdyaWRSYW5nZSxcbiAgICAgICAgICAgIGVsZXZhdGlvbk9mZnNldDogbmV3TWFya2VyLmVsZXZhdGlvbk9mZnNldCxcbiAgICAgICAgICAgIG1hcmtlcklkOiBuZXdNYXJrZXIuaWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBydW4gUmVwZWF0ZXIgYW5hbHlzaXM6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUmVzZXRBbmFseXNlcyA9ICgpID0+IHtcbiAgICB0cmFja0V2ZW50KFwicmVzZXRfbG9zX2FuYWx5c2VzX2NsaWNrXCIsIHsgcGFuZWw6IFwibWFwLnRzeFwiIH0pO1xuICAgIHJlbW92ZUFsbEFuYWx5c2lzTGF5ZXJzKCk7XG4gICAgXG4gICAgLy8gSWYgYW5hbHlzaXMgaXMgaW4gcHJvZ3Jlc3MsIGFib3J0IGl0XG4gICAgaWYgKGdyaWRBbmFseXNpc1JlZi5jdXJyZW50KSB7XG4gICAgICBncmlkQW5hbHlzaXNSZWYuY3VycmVudC5hYm9ydEFuYWx5c2lzKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEdldCBtYXJrZXIgY291bnRzIGZvciBwZXJtaXNzaW9uIHBhcmFtZXRlcnNcbiAgY29uc3QgZ2NzQ291bnQgPSBtYXJrZXJzLmZpbHRlcihtID0+IG0udHlwZSA9PT0gJ2djcycpLmxlbmd0aDtcbiAgY29uc3Qgb2JzZXJ2ZXJDb3VudCA9IG1hcmtlcnMuZmlsdGVyKG0gPT4gbS50eXBlID09PSAnb2JzZXJ2ZXInKS5sZW5ndGg7XG4gIGNvbnN0IHJlcGVhdGVyQ291bnQgPSBtYXJrZXJzLmZpbHRlcihtID0+IG0udHlwZSA9PT0gJ3JlcGVhdGVyJykubGVuZ3RoO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHsvKiBFcnJvciBub3RpZmljYXRpb24gZGlzcGxheSAqL31cbiAgICAgIHtlcnJvciAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTIwIHJpZ2h0LTQgei0zMCBiZy1yZWQtNTAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHRleHQtcmVkLTcwMCBcbiAgICAgICAgICAgICAgICAgICAgICBweC00IHB5LTIgcm91bmRlZC1tZCBzaGFkb3ctbWQgbWF4LXcteHMgYW5pbWF0ZS1mYWRlSW5cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtc3RhcnRcIj5cbiAgICAgICAgICAgIDxYQ2lyY2xlIHNpemU9ezE2fSBjbGFzc05hbWU9XCJtdC0wLjUgbXItMiBmbGV4LXNocmluay0wXCIgLz5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc21cIj57ZXJyb3J9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICBcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTQgcmlnaHQtNCB6LTIwIGZsZXggZmxleC1jb2wgc3BhY2UteS0yXCI+XG4gICAgICAgIHsvKiBHcm91bmQgU3RhdGlvbiBCdXR0b24gKi99XG4gICAgICAgIDxQcmVtaXVtQnV0dG9uIFxuICAgICAgICAgIGZlYXR1cmVJZD1cImFkZF9nY3NcIlxuICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFkZEdyb3VuZFN0YXRpb259IFxuICAgICAgICAgIGNsYXNzTmFtZT17YG1hcC1idXR0b24gZ3JvdW5kLXN0YXRpb24taWNvbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciAke2hpZ2hsaWdodE1hcmtlcnMgPyAncHVsc2UtaGlnaGxpZ2h0JyA6ICcnfWB9XG4gICAgICAgICAgcGVybWlzc2lvblBhcmFtcz17eyBjdXJyZW50Q291bnQ6IGdjc0NvdW50IH19XG4gICAgICAgICAgc2hvd0luZGljYXRvcj17dHJ1ZX1cbiAgICAgICAgPlxuICAgICAgICAgIDxXaWZpIHNpemU9ezE2fSBjbGFzc05hbWU9XCJtci0yXCIgLz5cbiAgICAgICAgICBBZGQgR3JvdW5kIFN0YXRpb25cbiAgICAgICAgPC9QcmVtaXVtQnV0dG9uPlxuICAgICAgICBcbiAgICAgICAgey8qIFJlcGVhdGVyIEJ1dHRvbiAqL31cbiAgICAgICAgPFByZW1pdW1CdXR0b24gXG4gICAgICAgICAgZmVhdHVyZUlkPVwiYWRkX3JlcGVhdGVyXCJcbiAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBZGRSZXBlYXRlcn1cbiAgICAgICAgICBjbGFzc05hbWU9e2BtYXAtYnV0dG9uIHJlcGVhdGVyLWljb24gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgJHtoaWdobGlnaHRNYXJrZXJzID8gJ3B1bHNlLWhpZ2hsaWdodCcgOiAnJ31gfVxuICAgICAgICAgIHBlcm1pc3Npb25QYXJhbXM9e3sgY3VycmVudENvdW50OiByZXBlYXRlckNvdW50IH19XG4gICAgICAgICAgc2hvd0luZGljYXRvcj17dHJ1ZX1cbiAgICAgICAgPlxuICAgICAgICAgIDxSYWRpbyBzaXplPXsxNn0gY2xhc3NOYW1lPVwibXItMlwiIC8+XG4gICAgICAgICAgQWRkIFJlcGVhdGVyXG4gICAgICAgIDwvUHJlbWl1bUJ1dHRvbj5cbiAgICAgXG4gICAgICAgIHsvKiBPYnNlcnZlciBCdXR0b24gKi99XG4gICAgICAgIDxQcmVtaXVtQnV0dG9uIFxuICAgICAgICAgIGZlYXR1cmVJZD1cImFkZF9vYnNlcnZlclwiXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlQWRkT2JzZXJ2ZXJ9XG4gICAgICAgICAgY2xhc3NOYW1lPXtgbWFwLWJ1dHRvbiBvYnNlcnZlci1pY29uIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyICR7aGlnaGxpZ2h0TWFya2VycyA/ICdwdWxzZS1oaWdobGlnaHQnIDogJyd9YH1cbiAgICAgICAgICBwZXJtaXNzaW9uUGFyYW1zPXt7IGN1cnJlbnRDb3VudDogb2JzZXJ2ZXJDb3VudCB9fVxuICAgICAgICAgIHNob3dJbmRpY2F0b3I9e3RydWV9XG4gICAgICAgID5cbiAgICAgICAgICA8RXllIHNpemU9ezE2fSBjbGFzc05hbWU9XCJtci0yXCIgLz5cbiAgICAgICAgICBBZGQgT2JzZXJ2ZXJcbiAgICAgICAgPC9QcmVtaXVtQnV0dG9uPlxuICAgICAgICBcbiAgICAgICAgey8qIENsZWFyIEFuYWx5c2lzIEJ1dHRvbiAtIG5vdCBwcmVtaXVtIHJlc3RyaWN0ZWQgKi99XG4gICAgICAgIDxidXR0b24gXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlUmVzZXRBbmFseXNlc31cbiAgICAgICAgICBjbGFzc05hbWU9XCJtYXAtYnV0dG9uIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxYQ2lyY2xlIHNpemU9ezE2fSBjbGFzc05hbWU9XCJtci0yXCIgLz5cbiAgICAgICAgICBDbGVhciBBbGwgQW5hbHlzZXNcbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8Lz5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE1hcmtlckNvbnRyb2xzOyJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVJlZiIsInVzZU1hcmtlcnMiLCJ1c2VNYXBDb250ZXh0IiwidXNlTE9TQW5hbHlzaXMiLCJ0cmFja0V2ZW50V2l0aEZvcm0iLCJ0cmFja0V2ZW50IiwiUHJlbWl1bUJ1dHRvbiIsIldpZmkiLCJSYWRpbyIsIkV5ZSIsIlhDaXJjbGUiLCJ1c2VDaGVja2xpc3RDb250ZXh0IiwiTWFya2VyQ29udHJvbHMiLCJtYXAiLCJ0ZXJyYWluTG9hZGVkIiwibWFya2VyQ29uZmlncyIsImhpZ2hsaWdodE1hcmtlcnMiLCJzZXRIaWdobGlnaHRNYXJrZXJzIiwiY2xlYXJIaWdobGlnaHQiLCJncmlkQW5hbHlzaXNSZWYiLCJtYXJrZXJzIiwiYWRkR3JvdW5kU3RhdGlvbiIsImFkZE9ic2VydmVyIiwiYWRkUmVwZWF0ZXIiLCJyZW1vdmVBbGxBbmFseXNpc0xheWVycyIsImVycm9yIiwiaGFuZGxlQWRkR3JvdW5kU3RhdGlvbiIsImxvY2F0aW9uIiwiY3VycmVudCIsIm5ld01hcmtlciIsImZpbmQiLCJtIiwidHlwZSIsImxuZyIsImxhdCIsInJ1blN0YXRpb25BbmFseXNpcyIsInN0YXRpb25UeXBlIiwicmFuZ2UiLCJnY3MiLCJncmlkUmFuZ2UiLCJlbGV2YXRpb25PZmZzZXQiLCJtYXJrZXJJZCIsImlkIiwiY29uc29sZSIsImJ1dHRvbkNsYXNzIiwiaGFuZGxlQWRkT2JzZXJ2ZXIiLCJvYnNlcnZlciIsImhhbmRsZUFkZFJlcGVhdGVyIiwicmVwZWF0ZXIiLCJoYW5kbGVSZXNldEFuYWx5c2VzIiwicGFuZWwiLCJhYm9ydEFuYWx5c2lzIiwiZ2NzQ291bnQiLCJmaWx0ZXIiLCJsZW5ndGgiLCJvYnNlcnZlckNvdW50IiwicmVwZWF0ZXJDb3VudCIsImRpdiIsImNsYXNzTmFtZSIsInNpemUiLCJwIiwiZmVhdHVyZUlkIiwib25DbGljayIsInBlcm1pc3Npb25QYXJhbXMiLCJjdXJyZW50Q291bnQiLCJzaG93SW5kaWNhdG9yIiwiYnV0dG9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/MarkerControls.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/MeasurementControls.tsx":
/*!********************************************************!*\
  !*** ./src/app/components/Map/MeasurementControls.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Map_Hooks_useMeasurement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Map/Hooks/useMeasurement */ \"(ssr)/./src/app/components/Map/Hooks/useMeasurement.ts\");\n/* harmony import */ var _barrel_optimize_names_Ruler_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Ruler,Trash2,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/ruler.js\");\n/* harmony import */ var _barrel_optimize_names_Ruler_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=Ruler,Trash2,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n/* harmony import */ var _barrel_optimize_names_Ruler_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=Ruler,Trash2,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _components_tracking_tracking__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../components/tracking/tracking */ \"(ssr)/./src/app/components/tracking/tracking.js\");\n// MeasurementControls.tsx\n// This component provides UI controls for the measurement tool functionality\n// and displays measurement results\n\n\n\n\n\nconst MeasurementControls = ()=>{\n    const { startMeasurement, stopMeasurement, clearMeasurement, isMeasuring, measurement } = (0,_Map_Hooks_useMeasurement__WEBPACK_IMPORTED_MODULE_2__.useMeasurement)();\n    const handleToggleMeasurement = ()=>{\n        if (isMeasuring) {\n            (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_3__.trackEventWithForm)('measurement_stopped', {\n                panel: 'measurement-controls'\n            });\n            stopMeasurement();\n        } else {\n            (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_3__.trackEventWithForm)('measurement_started', {\n                panel: 'measurement-controls'\n            });\n            startMeasurement();\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col space-y-2\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex space-x-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: handleToggleMeasurement,\n                        className: `map-button flex items-center ${isMeasuring ? 'bg-blue-100' : ''}`,\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Ruler_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                className: \"w-5 h-5 mr-2\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MeasurementControls.tsx\",\n                                lineNumber: 30,\n                                columnNumber: 11\n                            }, undefined),\n                            isMeasuring ? 'Stop Measuring' : 'Measure Distance'\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MeasurementControls.tsx\",\n                        lineNumber: 26,\n                        columnNumber: 9\n                    }, undefined),\n                    isMeasuring && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>{\n                            (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_3__.trackEventWithForm)('measurement_cleared', {\n                                panel: 'measurement-controls'\n                            });\n                            clearMeasurement();\n                        },\n                        className: \"map-button flex items-center\",\n                        title: \"Clear current measurements\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Ruler_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                className: \"w-5 h-5 mr-2\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MeasurementControls.tsx\",\n                                lineNumber: 44,\n                                columnNumber: 13\n                            }, undefined),\n                            \"Clear\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MeasurementControls.tsx\",\n                        lineNumber: 36,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MeasurementControls.tsx\",\n                lineNumber: 25,\n                columnNumber: 7\n            }, undefined),\n            measurement && measurement.points.length > 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-white p-3 rounded-md shadow-md text-sm\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex justify-between items-center mb-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                className: \"font-semibold\",\n                                children: \"Measurement\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MeasurementControls.tsx\",\n                                lineNumber: 53,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Ruler_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                className: \"w-4 h-4 cursor-pointer text-gray-500 hover:text-gray-700\",\n                                onClick: ()=>{\n                                    (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_3__.trackEventWithForm)('measurement_cleared', {\n                                        panel: 'measurement-controls'\n                                    });\n                                    clearMeasurement();\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MeasurementControls.tsx\",\n                                lineNumber: 54,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MeasurementControls.tsx\",\n                        lineNumber: 52,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-gray-700\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    \"Points: \",\n                                    measurement.points.length\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MeasurementControls.tsx\",\n                                lineNumber: 63,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    \"Total distance: \",\n                                    (measurement.distance / 1000).toFixed(2),\n                                    \" km\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MeasurementControls.tsx\",\n                                lineNumber: 64,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MeasurementControls.tsx\",\n                        lineNumber: 62,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MeasurementControls.tsx\",\n                lineNumber: 51,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/MeasurementControls.tsx\",\n        lineNumber: 24,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MeasurementControls);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL01lYXN1cmVtZW50Q29udHJvbHMudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSwwQkFBMEI7QUFDMUIsNkVBQTZFO0FBQzdFLG1DQUFtQzs7QUFFVDtBQUNtQztBQUNiO0FBQ3NDO0FBRXRGLE1BQU1PLHNCQUFnQztJQUNwQyxNQUFNLEVBQUVDLGdCQUFnQixFQUFFQyxlQUFlLEVBQUVDLGdCQUFnQixFQUFFQyxXQUFXLEVBQUVDLFdBQVcsRUFBRSxHQUFHWCx5RUFBY0E7SUFFeEcsTUFBTVksMEJBQTBCO1FBQzlCLElBQUlGLGFBQWE7WUFDZkwsaUZBQVVBLENBQUMsdUJBQXVCO2dCQUFFUSxPQUFPO1lBQXVCO1lBQ2xFTDtRQUNGLE9BQU87WUFDTEgsaUZBQVVBLENBQUMsdUJBQXVCO2dCQUFFUSxPQUFPO1lBQXVCO1lBQ2xFTjtRQUNGO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQ087UUFBSUMsV0FBVTs7MEJBQ2IsOERBQUNEO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0M7d0JBQ0NDLFNBQVNMO3dCQUNURyxXQUFXLENBQUMsNkJBQTZCLEVBQUVMLGNBQWMsZ0JBQWdCLElBQUk7OzBDQUU3RSw4REFBQ1QsMEZBQUtBO2dDQUFDYyxXQUFVOzs7Ozs7NEJBQ2hCTCxjQUFjLG1CQUFtQjs7Ozs7OztvQkFJbkNBLDZCQUNDLDhEQUFDTTt3QkFDQ0MsU0FBUzs0QkFDUFosaUZBQVVBLENBQUMsdUJBQXVCO2dDQUFFUSxPQUFPOzRCQUF1Qjs0QkFDbEVKO3dCQUNGO3dCQUNBTSxXQUFVO3dCQUNWRyxPQUFNOzswQ0FFTiw4REFBQ2YsMEZBQU1BO2dDQUFDWSxXQUFVOzs7Ozs7NEJBQWlCOzs7Ozs7Ozs7Ozs7O1lBTXhDSixlQUFlQSxZQUFZUSxNQUFNLENBQUNDLE1BQU0sR0FBRyxtQkFDMUMsOERBQUNOO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0Q7d0JBQUlDLFdBQVU7OzBDQUNiLDhEQUFDTTtnQ0FBR04sV0FBVTswQ0FBZ0I7Ozs7OzswQ0FDOUIsOERBQUNiLDBGQUFDQTtnQ0FDQWEsV0FBVTtnQ0FDVkUsU0FBUztvQ0FDUFosaUZBQVVBLENBQUMsdUJBQXVCO3dDQUFFUSxPQUFPO29DQUF1QjtvQ0FDbEVKO2dDQUNGOzs7Ozs7Ozs7Ozs7a0NBR0osOERBQUNLO3dCQUFJQyxXQUFVOzswQ0FDYiw4REFBQ0Q7O29DQUFJO29DQUFTSCxZQUFZUSxNQUFNLENBQUNDLE1BQU07Ozs7Ozs7MENBQ3ZDLDhEQUFDTjs7b0NBQUk7b0NBQWtCSCxDQUFBQSxZQUFZVyxRQUFRLEdBQUcsSUFBRyxFQUFHQyxPQUFPLENBQUM7b0NBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNM0U7QUFFQSxpRUFBZWpCLG1CQUFtQkEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvY29tcG9uZW50cy9NYXAvTWVhc3VyZW1lbnRDb250cm9scy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTWVhc3VyZW1lbnRDb250cm9scy50c3hcbi8vIFRoaXMgY29tcG9uZW50IHByb3ZpZGVzIFVJIGNvbnRyb2xzIGZvciB0aGUgbWVhc3VyZW1lbnQgdG9vbCBmdW5jdGlvbmFsaXR5XG4vLyBhbmQgZGlzcGxheXMgbWVhc3VyZW1lbnQgcmVzdWx0c1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlTWVhc3VyZW1lbnQgfSBmcm9tICcuLi9NYXAvSG9va3MvdXNlTWVhc3VyZW1lbnQnO1xuaW1wb3J0IHsgUnVsZXIsIFgsIFRyYXNoMiB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyB0cmFja0V2ZW50V2l0aEZvcm0gYXMgdHJhY2tFdmVudCB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvdHJhY2tpbmcvdHJhY2tpbmcnO1xuXG5jb25zdCBNZWFzdXJlbWVudENvbnRyb2xzOiBSZWFjdC5GQyA9ICgpID0+IHtcbiAgY29uc3QgeyBzdGFydE1lYXN1cmVtZW50LCBzdG9wTWVhc3VyZW1lbnQsIGNsZWFyTWVhc3VyZW1lbnQsIGlzTWVhc3VyaW5nLCBtZWFzdXJlbWVudCB9ID0gdXNlTWVhc3VyZW1lbnQoKTtcblxuICBjb25zdCBoYW5kbGVUb2dnbGVNZWFzdXJlbWVudCA9ICgpID0+IHtcbiAgICBpZiAoaXNNZWFzdXJpbmcpIHtcbiAgICAgIHRyYWNrRXZlbnQoJ21lYXN1cmVtZW50X3N0b3BwZWQnLCB7IHBhbmVsOiAnbWVhc3VyZW1lbnQtY29udHJvbHMnIH0pO1xuICAgICAgc3RvcE1lYXN1cmVtZW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYWNrRXZlbnQoJ21lYXN1cmVtZW50X3N0YXJ0ZWQnLCB7IHBhbmVsOiAnbWVhc3VyZW1lbnQtY29udHJvbHMnIH0pO1xuICAgICAgc3RhcnRNZWFzdXJlbWVudCgpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBzcGFjZS15LTJcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTJcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVRvZ2dsZU1lYXN1cmVtZW50fVxuICAgICAgICAgIGNsYXNzTmFtZT17YG1hcC1idXR0b24gZmxleCBpdGVtcy1jZW50ZXIgJHtpc01lYXN1cmluZyA/ICdiZy1ibHVlLTEwMCcgOiAnJ31gfVxuICAgICAgICA+XG4gICAgICAgICAgPFJ1bGVyIGNsYXNzTmFtZT1cInctNSBoLTUgbXItMlwiIC8+XG4gICAgICAgICAge2lzTWVhc3VyaW5nID8gJ1N0b3AgTWVhc3VyaW5nJyA6ICdNZWFzdXJlIERpc3RhbmNlJ31cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIFxuICAgICAgICB7LyogQ2xlYXIgTWVhc3VyZW1lbnQgYnV0dG9uIC0gb25seSBzaG93biB3aGVuIG1lYXN1cmluZyBpcyBhY3RpdmUgKi99XG4gICAgICAgIHtpc01lYXN1cmluZyAmJiAoXG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICB0cmFja0V2ZW50KCdtZWFzdXJlbWVudF9jbGVhcmVkJywgeyBwYW5lbDogJ21lYXN1cmVtZW50LWNvbnRyb2xzJyB9KTtcbiAgICAgICAgICAgICAgY2xlYXJNZWFzdXJlbWVudCgpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1hcC1idXR0b24gZmxleCBpdGVtcy1jZW50ZXJcIlxuICAgICAgICAgICAgdGl0bGU9XCJDbGVhciBjdXJyZW50IG1lYXN1cmVtZW50c1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFRyYXNoMiBjbGFzc05hbWU9XCJ3LTUgaC01IG1yLTJcIiAvPlxuICAgICAgICAgICAgQ2xlYXJcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICB7bWVhc3VyZW1lbnQgJiYgbWVhc3VyZW1lbnQucG9pbnRzLmxlbmd0aCA+IDEgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHAtMyByb3VuZGVkLW1kIHNoYWRvdy1tZCB0ZXh0LXNtXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMVwiPlxuICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGRcIj5NZWFzdXJlbWVudDwvaDQ+XG4gICAgICAgICAgICA8WCBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy00IGgtNCBjdXJzb3ItcG9pbnRlciB0ZXh0LWdyYXktNTAwIGhvdmVyOnRleHQtZ3JheS03MDBcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJhY2tFdmVudCgnbWVhc3VyZW1lbnRfY2xlYXJlZCcsIHsgcGFuZWw6ICdtZWFzdXJlbWVudC1jb250cm9scycgfSk7XG4gICAgICAgICAgICAgICAgY2xlYXJNZWFzdXJlbWVudCgpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgIDxkaXY+UG9pbnRzOiB7bWVhc3VyZW1lbnQucG9pbnRzLmxlbmd0aH08L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+VG90YWwgZGlzdGFuY2U6IHsobWVhc3VyZW1lbnQuZGlzdGFuY2UgLyAxMDAwKS50b0ZpeGVkKDIpfSBrbTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNZWFzdXJlbWVudENvbnRyb2xzOyJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZU1lYXN1cmVtZW50IiwiUnVsZXIiLCJYIiwiVHJhc2gyIiwidHJhY2tFdmVudFdpdGhGb3JtIiwidHJhY2tFdmVudCIsIk1lYXN1cmVtZW50Q29udHJvbHMiLCJzdGFydE1lYXN1cmVtZW50Iiwic3RvcE1lYXN1cmVtZW50IiwiY2xlYXJNZWFzdXJlbWVudCIsImlzTWVhc3VyaW5nIiwibWVhc3VyZW1lbnQiLCJoYW5kbGVUb2dnbGVNZWFzdXJlbWVudCIsInBhbmVsIiwiZGl2IiwiY2xhc3NOYW1lIiwiYnV0dG9uIiwib25DbGljayIsInRpdGxlIiwicG9pbnRzIiwibGVuZ3RoIiwiaDQiLCJkaXN0YW5jZSIsInRvRml4ZWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/MeasurementControls.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/Utils/markerPopup.ts":
/*!*****************************************************!*\
  !*** ./src/app/components/Map/Utils/markerPopup.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createMarkerPopup: () => (/* binding */ createMarkerPopup)\n/* harmony export */ });\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mapbox-gl */ \"(ssr)/./node_modules/mapbox-gl/dist/mapbox-gl.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_0__);\n// src/app/utils/markerPopup.ts\n\nfunction createMarkerPopup(markerType, initialElevation, elevationOffset, onDelete, markerId = '', markerIndex = 0, hasMultiple = false // Default to false for backward compatibility\n) {\n    const popupDiv = document.createElement(\"div\");\n    // Define your inline styles here or consider moving to CSS modules\n    const styles = {\n        container: \"padding: 8px; min-width: 200px;\",\n        header: \"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;\",\n        deleteBtn: \"background: #e53e3e; color: white; border: none; padding: 2px 4px; border-radius: 4px; cursor: pointer; font-size: 10px;\",\n        label: \"color: #4a5568; font-size: 12px; display: block; margin-bottom: 4px;\",\n        value: \"color: #1a202c; font-size: 12px; font-weight: 500;\",\n        id: \"color: #4a5568; font-size: 10px; display: block; margin-left: 4px;\"\n    };\n    const markerInfo = {\n        gcs: {\n            icon: \"\",\n            title: \"GCS\"\n        },\n        observer: {\n            icon: \"\",\n            title: \"Observer\"\n        },\n        repeater: {\n            icon: \"\",\n            title: \"Repeater\"\n        }\n    };\n    const { icon, title } = markerInfo[markerType];\n    const stationElevation = initialElevation + elevationOffset;\n    // Add marker index to title if there are multiple markers of this type\n    const markerTitle = hasMultiple ? `${title} #${markerIndex + 1}` : title;\n    popupDiv.innerHTML = `\n    <div class=\"popup-container\" style=\"${styles.container}\">\n      <div style=\"${styles.header}\">\n        <div style=\"display: flex; align-items: center;\">\n          <h5 style=\"font-weight: 600; font-size: 0.875rem; color: #4a5568;\">\n            ${markerTitle} ${icon}\n          </h5>\n          <span style=\"${styles.id}\" title=\"Marker ID\">${markerId.substring(0, 6)}</span>\n        </div>\n        <button id=\"delete-marker-btn\" style=\"${styles.deleteBtn}\">\n          Delete\n        </button>\n      </div>\n      <div style=\"margin-bottom: 8px;\">\n        <label style=\"${styles.label}\">Ground Elevation:</label>\n        <span style=\"${styles.value}\">${initialElevation.toFixed(1)} m ASL</span>\n      </div>\n      <div style=\"margin-bottom: 8px;\">\n        <label style=\"${styles.label}\">Elevation Offset:</label>\n        <span style=\"${styles.value}\">${elevationOffset.toFixed(1)} m</span>\n      </div>\n      <div style=\"margin-bottom: 8px;\">\n        <label style=\"${styles.label}\">Station Elevation:</label>\n        <span style=\"${styles.value}\">${stationElevation.toFixed(1)} m ASL</span>\n      </div>\n    </div>\n  `;\n    // Use a generic button ID since we're passing the callback directly\n    popupDiv.querySelector(`#delete-marker-btn`)?.addEventListener(\"click\", onDelete);\n    return new (mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default().Popup)({\n        closeButton: false\n    }).setDOMContent(popupDiv);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL1V0aWxzL21hcmtlclBvcHVwLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLCtCQUErQjtBQUNFO0FBRTFCLFNBQVNDLGtCQUNkQyxVQUEyQyxFQUMzQ0MsZ0JBQXdCLEVBQ3hCQyxlQUF1QixFQUN2QkMsUUFBb0IsRUFDcEJDLFdBQW1CLEVBQUUsRUFDckJDLGNBQXNCLENBQUMsRUFDdkJDLGNBQXVCLE1BQU0sOENBQThDO0FBQS9DO0lBRTVCLE1BQU1DLFdBQVdDLFNBQVNDLGFBQWEsQ0FBQztJQUV4QyxtRUFBbUU7SUFDbkUsTUFBTUMsU0FBUztRQUNiQyxXQUFXO1FBQ1hDLFFBQ0U7UUFDRkMsV0FDRTtRQUNGQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsSUFBSTtJQUNOO0lBRUEsTUFBTUMsYUFBYTtRQUNqQkMsS0FBSztZQUFFQyxNQUFNO1lBQU1DLE9BQU87UUFBTTtRQUNoQ0MsVUFBVTtZQUFFRixNQUFNO1lBQU1DLE9BQU87UUFBVztRQUMxQ0UsVUFBVTtZQUFFSCxNQUFNO1lBQU1DLE9BQU87UUFBVztJQUM1QztJQUVBLE1BQU0sRUFBRUQsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBR0gsVUFBVSxDQUFDakIsV0FBVztJQUM5QyxNQUFNdUIsbUJBQW1CdEIsbUJBQW1CQztJQUU1Qyx1RUFBdUU7SUFDdkUsTUFBTXNCLGNBQWNsQixjQUFjLEdBQUdjLE1BQU0sRUFBRSxFQUFFZixjQUFjLEdBQUcsR0FBR2U7SUFFbkViLFNBQVNrQixTQUFTLEdBQUcsQ0FBQzt3Q0FDZ0IsRUFBRWYsT0FBT0MsU0FBUyxDQUFDO2tCQUN6QyxFQUFFRCxPQUFPRSxNQUFNLENBQUM7OztZQUd0QixFQUFFWSxZQUFZLENBQUMsRUFBRUwsS0FBSzs7dUJBRVgsRUFBRVQsT0FBT00sRUFBRSxDQUFDLG9CQUFvQixFQUFFWixTQUFTc0IsU0FBUyxDQUFDLEdBQUcsR0FBRzs7OENBRXBDLEVBQUVoQixPQUFPRyxTQUFTLENBQUM7Ozs7O3NCQUszQyxFQUFFSCxPQUFPSSxLQUFLLENBQUM7cUJBQ2hCLEVBQUVKLE9BQU9LLEtBQUssQ0FBQyxFQUFFLEVBQUVkLGlCQUFpQjBCLE9BQU8sQ0FBQyxHQUFHOzs7c0JBRzlDLEVBQUVqQixPQUFPSSxLQUFLLENBQUM7cUJBQ2hCLEVBQUVKLE9BQU9LLEtBQUssQ0FBQyxFQUFFLEVBQUViLGdCQUFnQnlCLE9BQU8sQ0FBQyxHQUFHOzs7c0JBRzdDLEVBQUVqQixPQUFPSSxLQUFLLENBQUM7cUJBQ2hCLEVBQUVKLE9BQU9LLEtBQUssQ0FBQyxFQUFFLEVBQUVRLGlCQUFpQkksT0FBTyxDQUFDLEdBQUc7OztFQUdsRSxDQUFDO0lBRUQsb0VBQW9FO0lBQ3BFcEIsU0FBU3FCLGFBQWEsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEdBQ3ZDQyxpQkFBaUIsU0FBUzFCO0lBRTlCLE9BQU8sSUFBSUwsd0RBQWMsQ0FBQztRQUFFaUMsYUFBYTtJQUFNLEdBQUdDLGFBQWEsQ0FBQ3pCO0FBQ2xFIiwic291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9jb21wb25lbnRzL01hcC9VdGlscy9tYXJrZXJQb3B1cC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYXBwL3V0aWxzL21hcmtlclBvcHVwLnRzXG5pbXBvcnQgbWFwYm94Z2wgZnJvbSAnbWFwYm94LWdsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1hcmtlclBvcHVwKFxuICBtYXJrZXJUeXBlOiAnZ2NzJyB8ICdvYnNlcnZlcicgfCAncmVwZWF0ZXInLFxuICBpbml0aWFsRWxldmF0aW9uOiBudW1iZXIsXG4gIGVsZXZhdGlvbk9mZnNldDogbnVtYmVyLFxuICBvbkRlbGV0ZTogKCkgPT4gdm9pZCxcbiAgbWFya2VySWQ6IHN0cmluZyA9ICcnLCAvLyBEZWZhdWx0IHRvIGVtcHR5IHN0cmluZyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICBtYXJrZXJJbmRleDogbnVtYmVyID0gMCwgLy8gRGVmYXVsdCB0byAwIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gIGhhc011bHRpcGxlOiBib29sZWFuID0gZmFsc2UgLy8gRGVmYXVsdCB0byBmYWxzZSBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuKTogbWFwYm94Z2wuUG9wdXAge1xuICBjb25zdCBwb3B1cERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIFxuICAvLyBEZWZpbmUgeW91ciBpbmxpbmUgc3R5bGVzIGhlcmUgb3IgY29uc2lkZXIgbW92aW5nIHRvIENTUyBtb2R1bGVzXG4gIGNvbnN0IHN0eWxlcyA9IHtcbiAgICBjb250YWluZXI6IFwicGFkZGluZzogOHB4OyBtaW4td2lkdGg6IDIwMHB4O1wiLFxuICAgIGhlYWRlcjpcbiAgICAgIFwiZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiA4cHg7XCIsXG4gICAgZGVsZXRlQnRuOlxuICAgICAgXCJiYWNrZ3JvdW5kOiAjZTUzZTNlOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogMnB4IDRweDsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtc2l6ZTogMTBweDtcIixcbiAgICBsYWJlbDogXCJjb2xvcjogIzRhNTU2ODsgZm9udC1zaXplOiAxMnB4OyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbTogNHB4O1wiLFxuICAgIHZhbHVlOiBcImNvbG9yOiAjMWEyMDJjOyBmb250LXNpemU6IDEycHg7IGZvbnQtd2VpZ2h0OiA1MDA7XCIsXG4gICAgaWQ6IFwiY29sb3I6ICM0YTU1Njg7IGZvbnQtc2l6ZTogMTBweDsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1sZWZ0OiA0cHg7XCIsXG4gIH07XG4gIFxuICBjb25zdCBtYXJrZXJJbmZvID0ge1xuICAgIGdjczogeyBpY29uOiBcIvCfk6FcIiwgdGl0bGU6IFwiR0NTXCIgfSxcbiAgICBvYnNlcnZlcjogeyBpY29uOiBcIvCflK1cIiwgdGl0bGU6IFwiT2JzZXJ2ZXJcIiB9LFxuICAgIHJlcGVhdGVyOiB7IGljb246IFwi4pqh77iPXCIsIHRpdGxlOiBcIlJlcGVhdGVyXCIgfSxcbiAgfTtcbiAgXG4gIGNvbnN0IHsgaWNvbiwgdGl0bGUgfSA9IG1hcmtlckluZm9bbWFya2VyVHlwZV07XG4gIGNvbnN0IHN0YXRpb25FbGV2YXRpb24gPSBpbml0aWFsRWxldmF0aW9uICsgZWxldmF0aW9uT2Zmc2V0O1xuICBcbiAgLy8gQWRkIG1hcmtlciBpbmRleCB0byB0aXRsZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgbWFya2VycyBvZiB0aGlzIHR5cGVcbiAgY29uc3QgbWFya2VyVGl0bGUgPSBoYXNNdWx0aXBsZSA/IGAke3RpdGxlfSAjJHttYXJrZXJJbmRleCArIDF9YCA6IHRpdGxlO1xuICBcbiAgcG9wdXBEaXYuaW5uZXJIVE1MID0gYFxuICAgIDxkaXYgY2xhc3M9XCJwb3B1cC1jb250YWluZXJcIiBzdHlsZT1cIiR7c3R5bGVzLmNvbnRhaW5lcn1cIj5cbiAgICAgIDxkaXYgc3R5bGU9XCIke3N0eWxlcy5oZWFkZXJ9XCI+XG4gICAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyO1wiPlxuICAgICAgICAgIDxoNSBzdHlsZT1cImZvbnQtd2VpZ2h0OiA2MDA7IGZvbnQtc2l6ZTogMC44NzVyZW07IGNvbG9yOiAjNGE1NTY4O1wiPlxuICAgICAgICAgICAgJHttYXJrZXJUaXRsZX0gJHtpY29ufVxuICAgICAgICAgIDwvaDU+XG4gICAgICAgICAgPHNwYW4gc3R5bGU9XCIke3N0eWxlcy5pZH1cIiB0aXRsZT1cIk1hcmtlciBJRFwiPiR7bWFya2VySWQuc3Vic3RyaW5nKDAsIDYpfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxidXR0b24gaWQ9XCJkZWxldGUtbWFya2VyLWJ0blwiIHN0eWxlPVwiJHtzdHlsZXMuZGVsZXRlQnRufVwiPlxuICAgICAgICAgIERlbGV0ZVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDhweDtcIj5cbiAgICAgICAgPGxhYmVsIHN0eWxlPVwiJHtzdHlsZXMubGFiZWx9XCI+R3JvdW5kIEVsZXZhdGlvbjo8L2xhYmVsPlxuICAgICAgICA8c3BhbiBzdHlsZT1cIiR7c3R5bGVzLnZhbHVlfVwiPiR7aW5pdGlhbEVsZXZhdGlvbi50b0ZpeGVkKDEpfSBtIEFTTDwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDhweDtcIj5cbiAgICAgICAgPGxhYmVsIHN0eWxlPVwiJHtzdHlsZXMubGFiZWx9XCI+RWxldmF0aW9uIE9mZnNldDo8L2xhYmVsPlxuICAgICAgICA8c3BhbiBzdHlsZT1cIiR7c3R5bGVzLnZhbHVlfVwiPiR7ZWxldmF0aW9uT2Zmc2V0LnRvRml4ZWQoMSl9IG08L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiA4cHg7XCI+XG4gICAgICAgIDxsYWJlbCBzdHlsZT1cIiR7c3R5bGVzLmxhYmVsfVwiPlN0YXRpb24gRWxldmF0aW9uOjwvbGFiZWw+XG4gICAgICAgIDxzcGFuIHN0eWxlPVwiJHtzdHlsZXMudmFsdWV9XCI+JHtzdGF0aW9uRWxldmF0aW9uLnRvRml4ZWQoMSl9IG0gQVNMPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIGA7XG4gIFxuICAvLyBVc2UgYSBnZW5lcmljIGJ1dHRvbiBJRCBzaW5jZSB3ZSdyZSBwYXNzaW5nIHRoZSBjYWxsYmFjayBkaXJlY3RseVxuICBwb3B1cERpdi5xdWVyeVNlbGVjdG9yKGAjZGVsZXRlLW1hcmtlci1idG5gKVxuICAgID8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uRGVsZXRlKTtcbiAgICBcbiAgcmV0dXJuIG5ldyBtYXBib3hnbC5Qb3B1cCh7IGNsb3NlQnV0dG9uOiBmYWxzZSB9KS5zZXRET01Db250ZW50KHBvcHVwRGl2KTtcbn0iXSwibmFtZXMiOlsibWFwYm94Z2wiLCJjcmVhdGVNYXJrZXJQb3B1cCIsIm1hcmtlclR5cGUiLCJpbml0aWFsRWxldmF0aW9uIiwiZWxldmF0aW9uT2Zmc2V0Iiwib25EZWxldGUiLCJtYXJrZXJJZCIsIm1hcmtlckluZGV4IiwiaGFzTXVsdGlwbGUiLCJwb3B1cERpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlcyIsImNvbnRhaW5lciIsImhlYWRlciIsImRlbGV0ZUJ0biIsImxhYmVsIiwidmFsdWUiLCJpZCIsIm1hcmtlckluZm8iLCJnY3MiLCJpY29uIiwidGl0bGUiLCJvYnNlcnZlciIsInJlcGVhdGVyIiwic3RhdGlvbkVsZXZhdGlvbiIsIm1hcmtlclRpdGxlIiwiaW5uZXJIVE1MIiwic3Vic3RyaW5nIiwidG9GaXhlZCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiUG9wdXAiLCJjbG9zZUJ1dHRvbiIsInNldERPTUNvbnRlbnQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/Utils/markerPopup.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/components/Map/index.tsx":
/*!******************************************!*\
  !*** ./src/app/components/Map/index.tsx ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Hooks_useMap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Hooks/useMap */ \"(ssr)/./src/app/components/Map/Hooks/useMap.ts\");\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _context_FlightPlanContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../context/FlightPlanContext */ \"(ssr)/./src/app/context/FlightPlanContext.tsx\");\n/* harmony import */ var _context_LOSAnalysisContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../context/LOSAnalysisContext */ \"(ssr)/./src/app/context/LOSAnalysisContext.tsx\");\n/* harmony import */ var _context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../context/AreaOfOpsContext */ \"(ssr)/./src/app/context/AreaOfOpsContext.tsx\");\n/* harmony import */ var _Map_Hooks_useFlightPlanProcessor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Map/Hooks/useFlightPlanProcessor */ \"(ssr)/./src/app/components/Map/Hooks/useFlightPlanProcessor.tsx\");\n/* harmony import */ var _Hooks_useMarkers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Hooks/useMarkers */ \"(ssr)/./src/app/components/Map/Hooks/useMarkers.ts\");\n/* harmony import */ var _hooks_useTowerToMarker__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../hooks/useTowerToMarker */ \"(ssr)/./src/app/hooks/useTowerToMarker.ts\");\n/* harmony import */ var _hooks_useLayers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../hooks/useLayers */ \"(ssr)/./src/app/hooks/useLayers.ts\");\n/* harmony import */ var _MarkerControls__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./MarkerControls */ \"(ssr)/./src/app/components/Map/MarkerControls.tsx\");\n/* harmony import */ var _LayerControls__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./LayerControls */ \"(ssr)/./src/app/components/Map/LayerControls.tsx\");\n/* harmony import */ var _MeasurementControls__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./MeasurementControls */ \"(ssr)/./src/app/components/Map/MeasurementControls.tsx\");\n/* harmony import */ var _MapLegend__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./MapLegend */ \"(ssr)/./src/app/components/Map/MapLegend.tsx\");\n/* harmony import */ var _AnalysisStatus__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./AnalysisStatus */ \"(ssr)/./src/app/components/Map/AnalysisStatus.tsx\");\n/* harmony import */ var _FlightPathDisplay__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./FlightPathDisplay */ \"(ssr)/./src/app/components/Map/FlightPathDisplay.tsx\");\n/* harmony import */ var _AO_AODisplay__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../AO/AODisplay */ \"(ssr)/./src/app/components/AO/AODisplay.tsx\");\n/* harmony import */ var _MapboxLayerHandler__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./MapboxLayerHandler */ \"(ssr)/./src/app/components/Map/MapboxLayerHandler.tsx\");\n/* harmony import */ var _DBYDLayerHandler__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./DBYDLayerHandler */ \"(ssr)/./src/app/components/Map/DBYDLayerHandler.tsx\");\n/* harmony import */ var _Analyses_Services_GridAnalysis_GridAnalysisController__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../Analyses/Services/GridAnalysis/GridAnalysisController */ \"(ssr)/./src/app/components/Analyses/Services/GridAnalysis/GridAnalysisController.tsx\");\n/* harmony import */ var _context_AnalysisControllerContext__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../context/AnalysisControllerContext */ \"(ssr)/./src/app/context/AnalysisControllerContext.tsx\");\n/* harmony import */ var _tracking_tracking__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../tracking/tracking */ \"(ssr)/./src/app/components/tracking/tracking.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Map component that renders the Mapbox map and associated controls\n */ const Map = ({ activePanel, togglePanel, flightPlan, setShowUploader })=>{\n    const { setMap, elevationService } = (0,_context_mapcontext__WEBPACK_IMPORTED_MODULE_3__.useMapContext)();\n    const { setFlightPlan, setDistance, setProcessed } = (0,_context_FlightPlanContext__WEBPACK_IMPORTED_MODULE_4__.useFlightPlanContext)();\n    const { isAnalyzing, setIsAnalyzing, setResults, setError, error, resetAnalysis } = (0,_context_LOSAnalysisContext__WEBPACK_IMPORTED_MODULE_5__.useLOSAnalysis)();\n    const { aoGeometry } = (0,_context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_6__.useAreaOfOpsContext)();\n    const mapContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const DBYDLayerHandlerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { gridAnalysisRef } = (0,_context_AnalysisControllerContext__WEBPACK_IMPORTED_MODULE_21__.useAnalysisController)();\n    const hasSetMapRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const { map, terrainLoaded } = (0,_Hooks_useMap__WEBPACK_IMPORTED_MODULE_2__.useMap)('map-container', {\n        style: 'mapbox://styles/intelaero/cm7pqu42s000601svdp7m3h0b',\n        center: [\n            0,\n            0\n        ],\n        zoom: 2.5,\n        projection: 'globe'\n    });\n    const { processFlightPlan } = (0,_Map_Hooks_useFlightPlanProcessor__WEBPACK_IMPORTED_MODULE_7__.useFlightPlanProcessor)();\n    const { markers, updateMarkerPopups } = (0,_Hooks_useMarkers__WEBPACK_IMPORTED_MODULE_8__.useMarkers)({\n        map,\n        terrainLoaded\n    });\n    const { convertTowerToRepeater } = (0,_hooks_useTowerToMarker__WEBPACK_IMPORTED_MODULE_9__.useTowerToMarker)({\n        map,\n        terrainLoaded\n    });\n    const { addFlightPath, resetLayers } = (0,_hooks_useLayers__WEBPACK_IMPORTED_MODULE_10__.useLayers)();\n    /**\n   * Set map instance when map and terrain are loaded\n   */ (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Map.useEffect\": ()=>{\n            if (map && terrainLoaded && !hasSetMapRef.current) {\n                setMap(map, terrainLoaded);\n                hasSetMapRef.current = true;\n                (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_22__.trackEventWithForm)('map_initialized', {\n                    mapLoaded: true\n                });\n            }\n        }\n    }[\"Map.useEffect\"], [\n        map,\n        terrainLoaded,\n        setMap\n    ]);\n    /**\n   * Process flight plan when available\n   */ (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Map.useEffect\": ()=>{\n            if (!flightPlan || flightPlan.properties?.processed || !map || !elevationService) {\n                console.log('Skipping flight plan processing:', {\n                    hasFlightPlan: !!flightPlan,\n                    isProcessed: flightPlan?.properties?.processed,\n                    mapLoaded: !!map,\n                    elevationServiceAvailable: !!elevationService\n                });\n                return;\n            }\n            console.log(`Starting flight plan processing: elevationService=${!!elevationService}, ` + `mapbox-dem loaded=${map?.isSourceLoaded('mapbox-dem') ?? false}`);\n            const handleProcessedPlan = {\n                \"Map.useEffect.handleProcessedPlan\": (processedPlan)=>{\n                    console.log('Flight plan processed:', {\n                        planId: processedPlan.properties?.id || 'unknown',\n                        distance: processedPlan.properties?.totalDistance,\n                        hasFeatures: processedPlan.features?.length > 0\n                    });\n                    if (processedPlan.properties?.totalDistance) {\n                        setDistance(processedPlan.properties.totalDistance);\n                    }\n                    addFlightPath(processedPlan);\n                    (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_22__.trackEventWithForm)('flight_plan_processing_completed', {\n                        planId: processedPlan.properties?.id || 'unknown',\n                        distance: processedPlan.properties?.totalDistance\n                    });\n                }\n            }[\"Map.useEffect.handleProcessedPlan\"];\n            const handleProcessingError = {\n                \"Map.useEffect.handleProcessingError\": (error)=>{\n                    console.error('Failed to process flight plan:', error);\n                    setError('Failed to process flight plan. Please try again.');\n                    (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_22__.trackEventWithForm)('flight_plan_processing_error', {\n                        error: error instanceof Error ? error.message : 'Unknown error'\n                    });\n                }\n            }[\"Map.useEffect.handleProcessingError\"];\n            (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_22__.trackEventWithForm)('flight_plan_processing_started', {\n                planId: flightPlan.properties?.id || 'unknown'\n            });\n            console.time('FlightPlanProcessing');\n            elevationService.ensureTerrainReady().then({\n                \"Map.useEffect\": ()=>{\n                    console.log('Terrain ready');\n                    return elevationService.preloadArea(flightPlan.features[0].geometry.coordinates);\n                }\n            }[\"Map.useEffect\"]).then({\n                \"Map.useEffect\": ()=>{\n                    console.log('Terrain area preloaded');\n                    return processFlightPlan(flightPlan);\n                }\n            }[\"Map.useEffect\"]).then({\n                \"Map.useEffect\": (processedPlan)=>{\n                    console.log('processFlightPlan completed:', processedPlan);\n                    return processedPlan;\n                }\n            }[\"Map.useEffect\"]).then(handleProcessedPlan).catch({\n                \"Map.useEffect\": (error)=>{\n                    console.error('Processing pipeline error:', error);\n                    handleProcessingError(error);\n                }\n            }[\"Map.useEffect\"]).finally({\n                \"Map.useEffect\": ()=>{\n                    console.timeEnd('FlightPlanProcessing');\n                }\n            }[\"Map.useEffect\"]);\n        }\n    }[\"Map.useEffect\"], [\n        flightPlan,\n        map,\n        elevationService,\n        processFlightPlan,\n        setFlightPlan,\n        setDistance,\n        setProcessed,\n        setError,\n        addFlightPath\n    ]);\n    /**\n   * Update marker popups when map or terrain changes\n   */ (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Map.useEffect\": ()=>{\n            if (map && terrainLoaded) {\n                updateMarkerPopups();\n            }\n        }\n    }[\"Map.useEffect\"], [\n        updateMarkerPopups,\n        map,\n        terrainLoaded\n    ]);\n    /**\n   * Run ELOS analysis\n   */ const runElosAnalysis = async ()=>{\n        if (!map || !gridAnalysisRef.current) return;\n        try {\n            setIsAnalyzing(true);\n            setError(null);\n            (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_22__.trackEventWithForm)('elos_analysis_started', {});\n            resetLayers();\n            // Import useAreaOpsProcessor here as a local import if used only in this function\n            const { showAreaOfOperations } = (__webpack_require__(/*! ../AO/Hooks/useAreaOpsProcessor */ \"(ssr)/./src/app/components/AO/Hooks/useAreaOpsProcessor.ts\").useAreaOpsProcessor)();\n            // Show Area of Operations for the analysis\n            showAreaOfOperations();\n            await gridAnalysisRef.current.runFlightPathAnalysis();\n            (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_22__.trackEventWithForm)('elos_analysis_completed', {});\n        } catch (err) {\n            setError(err instanceof Error ? err.message : 'Analysis failed');\n            (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_22__.trackEventWithForm)('elos_analysis_error', {\n                error: err instanceof Error ? err.message : 'Unknown error'\n            });\n        } finally{\n            setIsAnalyzing(false);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                id: \"map-container\",\n                ref: mapContainerRef,\n                className: \"w-full h-screen\"\n            }, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                lineNumber: 191,\n                columnNumber: 7\n            }, undefined),\n            map && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MapboxLayerHandler__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                        map: map\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                        lineNumber: 198,\n                        columnNumber: 11\n                    }, undefined),\n                    aoGeometry && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_DBYDLayerHandler__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n                        ref: DBYDLayerHandlerRef,\n                        map: map\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                        lineNumber: 199,\n                        columnNumber: 26\n                    }, undefined)\n                ]\n            }, void 0, true),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MarkerControls__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {}, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                lineNumber: 202,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute top-4 left-4 z-10 flex flex-col gap-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_LayerControls__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                        onToggleDBYD: ()=>{\n                            if (DBYDLayerHandlerRef.current) {\n                                (0,_tracking_tracking__WEBPACK_IMPORTED_MODULE_22__.trackEventWithForm)('dbyd_powerlines_requested', {});\n                                DBYDLayerHandlerRef.current.fetchLayers();\n                            }\n                        },\n                        activePanel: activePanel,\n                        togglePanel: togglePanel,\n                        flightPlan: flightPlan,\n                        setShowUploader: setShowUploader\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                        lineNumber: 204,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MeasurementControls__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {}, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                        lineNumber: 216,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                lineNumber: 203,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MapLegend__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {}, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                lineNumber: 218,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_AnalysisStatus__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                onStopLOS: ()=>{\n                // LOS analysis cancel logic\n                },\n                onStopObstacle: ()=>{\n                // Any additional logic beyond calling cancelAnalysis\n                }\n            }, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                lineNumber: 219,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_FlightPathDisplay__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {}, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                lineNumber: 229,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_AO_AODisplay__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {}, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                lineNumber: 230,\n                columnNumber: 7\n            }, undefined),\n            error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute bottom-4 left-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                        lineNumber: 233,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"ml-2\",\n                        children: error\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                        lineNumber: 234,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setError(null),\n                        className: \"ml-2 hover:opacity-75\",\n                        children: \"\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                        lineNumber: 235,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                lineNumber: 232,\n                columnNumber: 9\n            }, undefined),\n            map && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Analyses_Services_GridAnalysis_GridAnalysisController__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                ref: gridAnalysisRef,\n                flightPlan: flightPlan?.properties?.processed ? flightPlan : undefined,\n                onProgress: (progress)=>{},\n                onError: (error)=>{\n                    console.error(\"ELOS Analysis error:\", error);\n                    setError(error.message);\n                },\n                onComplete: (result)=>{\n                    console.log(\"ELOS Analysis completed:\", result);\n                    setResults(result);\n                }\n            }, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n                lineNumber: 245,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/Map/index.tsx\",\n        lineNumber: 190,\n        columnNumber: 5\n    }, undefined);\n};\nMap.displayName = 'Map';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Map);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ozs7QUFLVjtBQUVBckYsSUFBSXNGLFdBQVcsR0FBRztBQUVsQixpRUFBZXRGLEdBQUdBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbXBvbmVudHMvTWFwL2luZGV4LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgRkMgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VNYXAgfSBmcm9tICcuL0hvb2tzL3VzZU1hcCc7XG5pbXBvcnQgeyB1c2VNYXBDb250ZXh0IH0gZnJvbSAnLi4vLi4vY29udGV4dC9tYXBjb250ZXh0JztcbmltcG9ydCB7IHVzZUZsaWdodFBsYW5Db250ZXh0IH0gZnJvbSAnLi4vLi4vY29udGV4dC9GbGlnaHRQbGFuQ29udGV4dCc7XG5pbXBvcnQgeyB1c2VMT1NBbmFseXNpcyB9IGZyb20gJy4uLy4uL2NvbnRleHQvTE9TQW5hbHlzaXNDb250ZXh0JztcbmltcG9ydCB7IHVzZUFyZWFPZk9wc0NvbnRleHQgfSBmcm9tICcuLi8uLi9jb250ZXh0L0FyZWFPZk9wc0NvbnRleHQnO1xuaW1wb3J0IHsgdXNlRmxpZ2h0UGxhblByb2Nlc3NvciB9IGZyb20gJy4uL01hcC9Ib29rcy91c2VGbGlnaHRQbGFuUHJvY2Vzc29yJztcbmltcG9ydCB7IHVzZU1hcmtlcnMgfSBmcm9tICcuL0hvb2tzL3VzZU1hcmtlcnMnO1xuaW1wb3J0IHsgdXNlVG93ZXJUb01hcmtlciB9IGZyb20gJy4uLy4uL2hvb2tzL3VzZVRvd2VyVG9NYXJrZXInO1xuaW1wb3J0IHsgdXNlTGF5ZXJzIH0gZnJvbSAnLi4vLi4vaG9va3MvdXNlTGF5ZXJzJztcbmltcG9ydCBtYXBib3hnbCBmcm9tICdtYXBib3gtZ2wnO1xuaW1wb3J0IE1hcmtlckNvbnRyb2xzIGZyb20gJy4vTWFya2VyQ29udHJvbHMnO1xuaW1wb3J0IExheWVyQ29udHJvbHMgZnJvbSAnLi9MYXllckNvbnRyb2xzJztcbmltcG9ydCBNZWFzdXJlbWVudENvbnRyb2xzIGZyb20gJy4vTWVhc3VyZW1lbnRDb250cm9scyc7XG5pbXBvcnQgTWFwTGVnZW5kIGZyb20gJy4vTWFwTGVnZW5kJztcbmltcG9ydCBBbmFseXNpc1N0YXR1cyBmcm9tICcuL0FuYWx5c2lzU3RhdHVzJztcbmltcG9ydCBMT1NNb2RhbCBmcm9tICcuL0xPU01vZGFsJztcbmltcG9ydCBGbGlnaHRQYXRoRGlzcGxheSBmcm9tICcuL0ZsaWdodFBhdGhEaXNwbGF5JztcbmltcG9ydCBBT0Rpc3BsYXkgZnJvbSAnLi4vQU8vQU9EaXNwbGF5JztcbmltcG9ydCBNYXBib3hMYXllckhhbmRsZXIgZnJvbSAnLi9NYXBib3hMYXllckhhbmRsZXInO1xuaW1wb3J0IERCWURMYXllckhhbmRsZXIgZnJvbSAnLi9EQllETGF5ZXJIYW5kbGVyJztcbmltcG9ydCBHcmlkQW5hbHlzaXNDb250cm9sbGVyLCB7IEdyaWRBbmFseXNpc1JlZiB9IGZyb20gJy4uL0FuYWx5c2VzL1NlcnZpY2VzL0dyaWRBbmFseXNpcy9HcmlkQW5hbHlzaXNDb250cm9sbGVyJztcbmltcG9ydCB7IHVzZUFuYWx5c2lzQ29udHJvbGxlciB9IGZyb20gXCIuLi8uLi9jb250ZXh0L0FuYWx5c2lzQ29udHJvbGxlckNvbnRleHRcIjtcbmltcG9ydCB7IHRyYWNrRXZlbnRXaXRoRm9ybSBhcyB0cmFja0V2ZW50IH0gZnJvbSAnLi4vdHJhY2tpbmcvdHJhY2tpbmcnO1xuXG4vKipcbiAqIFByb3BzIGZvciB0aGUgTWFwIGNvbXBvbmVudFxuICovXG5pbnRlcmZhY2UgTWFwUHJvcHMge1xuICBhY3RpdmVQYW5lbD86ICdlbmVyZ3knIHwgJ2xvcycgfCAndGVycmFpbicgfCBudWxsO1xuICB0b2dnbGVQYW5lbD86IChwYW5lbDogJ2VuZXJneScgfCAnbG9zJyB8ICd0ZXJyYWluJykgPT4gdm9pZDtcbiAgZmxpZ2h0UGxhbj86IGFueTtcbiAgc2V0U2hvd1VwbG9hZGVyPzogKHNob3c6IGJvb2xlYW4pID0+IHZvaWQ7XG59XG5cbi8qKlxuICogTWFwIGNvbXBvbmVudCB0aGF0IHJlbmRlcnMgdGhlIE1hcGJveCBtYXAgYW5kIGFzc29jaWF0ZWQgY29udHJvbHNcbiAqL1xuY29uc3QgTWFwOiBGQzxNYXBQcm9wcz4gPSAoeyBhY3RpdmVQYW5lbCwgdG9nZ2xlUGFuZWwsIGZsaWdodFBsYW4sIHNldFNob3dVcGxvYWRlciB9KSA9PiB7XG4gIGNvbnN0IHsgc2V0TWFwLCBlbGV2YXRpb25TZXJ2aWNlIH0gPSB1c2VNYXBDb250ZXh0KCk7XG4gIGNvbnN0IHsgc2V0RmxpZ2h0UGxhbiwgc2V0RGlzdGFuY2UsIHNldFByb2Nlc3NlZCB9ID0gdXNlRmxpZ2h0UGxhbkNvbnRleHQoKTtcbiAgY29uc3QgeyBpc0FuYWx5emluZywgc2V0SXNBbmFseXppbmcsIHNldFJlc3VsdHMsIHNldEVycm9yLCBlcnJvciwgcmVzZXRBbmFseXNpcyB9ID0gdXNlTE9TQW5hbHlzaXMoKTtcbiAgY29uc3QgeyBhb0dlb21ldHJ5IH0gPSB1c2VBcmVhT2ZPcHNDb250ZXh0KCk7XG4gIGNvbnN0IG1hcENvbnRhaW5lclJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IERCWURMYXllckhhbmRsZXJSZWYgPSB1c2VSZWY8eyBmZXRjaExheWVyczogKCkgPT4gdm9pZCB9IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IHsgZ3JpZEFuYWx5c2lzUmVmIH0gPSB1c2VBbmFseXNpc0NvbnRyb2xsZXIoKTtcbiAgY29uc3QgaGFzU2V0TWFwUmVmID0gdXNlUmVmKGZhbHNlKTtcbiAgXG4gIGNvbnN0IHsgbWFwLCB0ZXJyYWluTG9hZGVkIH0gPSB1c2VNYXAoXG4gICAgJ21hcC1jb250YWluZXInLFxuICAgIHtcbiAgICAgIHN0eWxlOiAnbWFwYm94Oi8vc3R5bGVzL2ludGVsYWVyby9jbTdwcXU0MnMwMDA2MDFzdmRwN20zaDBiJyxcbiAgICAgIGNlbnRlcjogWzAsIDBdLFxuICAgICAgem9vbTogMi41LFxuICAgICAgcHJvamVjdGlvbjogJ2dsb2JlJyxcbiAgICB9IGFzIGFueVxuICApO1xuICBcbiAgY29uc3QgeyBwcm9jZXNzRmxpZ2h0UGxhbiB9ID0gdXNlRmxpZ2h0UGxhblByb2Nlc3NvcigpO1xuICBjb25zdCB7IG1hcmtlcnMsIHVwZGF0ZU1hcmtlclBvcHVwcyB9ID0gdXNlTWFya2Vycyh7IG1hcCwgdGVycmFpbkxvYWRlZCB9KTtcbiAgY29uc3QgeyBjb252ZXJ0VG93ZXJUb1JlcGVhdGVyIH0gPSB1c2VUb3dlclRvTWFya2VyKHsgbWFwLCB0ZXJyYWluTG9hZGVkIH0pO1xuICBjb25zdCB7IGFkZEZsaWdodFBhdGgsIHJlc2V0TGF5ZXJzIH0gPSB1c2VMYXllcnMoKTtcblxuICAvKipcbiAgICogU2V0IG1hcCBpbnN0YW5jZSB3aGVuIG1hcCBhbmQgdGVycmFpbiBhcmUgbG9hZGVkXG4gICAqL1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChtYXAgJiYgdGVycmFpbkxvYWRlZCAmJiAhaGFzU2V0TWFwUmVmLmN1cnJlbnQpIHtcbiAgICAgIHNldE1hcChtYXAsIHRlcnJhaW5Mb2FkZWQpO1xuICAgICAgaGFzU2V0TWFwUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgdHJhY2tFdmVudCgnbWFwX2luaXRpYWxpemVkJywgeyBtYXBMb2FkZWQ6IHRydWUgfSk7XG4gICAgfVxuICB9LCBbbWFwLCB0ZXJyYWluTG9hZGVkLCBzZXRNYXBdKTtcblxuICAvKipcbiAgICogUHJvY2VzcyBmbGlnaHQgcGxhbiB3aGVuIGF2YWlsYWJsZVxuICAgKi9cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWZsaWdodFBsYW4gfHwgZmxpZ2h0UGxhbi5wcm9wZXJ0aWVzPy5wcm9jZXNzZWQgfHwgIW1hcCB8fCAhZWxldmF0aW9uU2VydmljZSkge1xuICAgICAgY29uc29sZS5sb2coJ1NraXBwaW5nIGZsaWdodCBwbGFuIHByb2Nlc3Npbmc6Jywge1xuICAgICAgICBoYXNGbGlnaHRQbGFuOiAhIWZsaWdodFBsYW4sXG4gICAgICAgIGlzUHJvY2Vzc2VkOiBmbGlnaHRQbGFuPy5wcm9wZXJ0aWVzPy5wcm9jZXNzZWQsXG4gICAgICAgIG1hcExvYWRlZDogISFtYXAsXG4gICAgICAgIGVsZXZhdGlvblNlcnZpY2VBdmFpbGFibGU6ICEhZWxldmF0aW9uU2VydmljZSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYFN0YXJ0aW5nIGZsaWdodCBwbGFuIHByb2Nlc3Npbmc6IGVsZXZhdGlvblNlcnZpY2U9JHshIWVsZXZhdGlvblNlcnZpY2V9LCBgICtcbiAgICAgIGBtYXBib3gtZGVtIGxvYWRlZD0ke21hcD8uaXNTb3VyY2VMb2FkZWQoJ21hcGJveC1kZW0nKSA/PyBmYWxzZX1gXG4gICAgKTtcblxuICAgIGNvbnN0IGhhbmRsZVByb2Nlc3NlZFBsYW4gPSAocHJvY2Vzc2VkUGxhbjogYW55KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnRmxpZ2h0IHBsYW4gcHJvY2Vzc2VkOicsIHtcbiAgICAgICAgcGxhbklkOiBwcm9jZXNzZWRQbGFuLnByb3BlcnRpZXM/LmlkIHx8ICd1bmtub3duJyxcbiAgICAgICAgZGlzdGFuY2U6IHByb2Nlc3NlZFBsYW4ucHJvcGVydGllcz8udG90YWxEaXN0YW5jZSxcbiAgICAgICAgaGFzRmVhdHVyZXM6IHByb2Nlc3NlZFBsYW4uZmVhdHVyZXM/Lmxlbmd0aCA+IDAsXG4gICAgICB9KTtcblxuICAgICAgaWYgKHByb2Nlc3NlZFBsYW4ucHJvcGVydGllcz8udG90YWxEaXN0YW5jZSkge1xuICAgICAgICBzZXREaXN0YW5jZShwcm9jZXNzZWRQbGFuLnByb3BlcnRpZXMudG90YWxEaXN0YW5jZSk7XG4gICAgICB9XG4gICAgICBhZGRGbGlnaHRQYXRoKHByb2Nlc3NlZFBsYW4pO1xuICAgICAgdHJhY2tFdmVudCgnZmxpZ2h0X3BsYW5fcHJvY2Vzc2luZ19jb21wbGV0ZWQnLCB7XG4gICAgICAgIHBsYW5JZDogcHJvY2Vzc2VkUGxhbi5wcm9wZXJ0aWVzPy5pZCB8fCAndW5rbm93bicsXG4gICAgICAgIGRpc3RhbmNlOiBwcm9jZXNzZWRQbGFuLnByb3BlcnRpZXM/LnRvdGFsRGlzdGFuY2UsXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlUHJvY2Vzc2luZ0Vycm9yID0gKGVycm9yOiB1bmtub3duKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcHJvY2VzcyBmbGlnaHQgcGxhbjonLCBlcnJvcik7XG4gICAgICBzZXRFcnJvcignRmFpbGVkIHRvIHByb2Nlc3MgZmxpZ2h0IHBsYW4uIFBsZWFzZSB0cnkgYWdhaW4uJyk7XG4gICAgICB0cmFja0V2ZW50KCdmbGlnaHRfcGxhbl9wcm9jZXNzaW5nX2Vycm9yJywge1xuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdHJhY2tFdmVudCgnZmxpZ2h0X3BsYW5fcHJvY2Vzc2luZ19zdGFydGVkJywge1xuICAgICAgcGxhbklkOiBmbGlnaHRQbGFuLnByb3BlcnRpZXM/LmlkIHx8ICd1bmtub3duJyxcbiAgICB9KTtcblxuICAgIGNvbnNvbGUudGltZSgnRmxpZ2h0UGxhblByb2Nlc3NpbmcnKTtcbiAgICBlbGV2YXRpb25TZXJ2aWNlXG4gICAgICAuZW5zdXJlVGVycmFpblJlYWR5KClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1RlcnJhaW4gcmVhZHknKTtcbiAgICAgICAgcmV0dXJuIGVsZXZhdGlvblNlcnZpY2UucHJlbG9hZEFyZWEoZmxpZ2h0UGxhbi5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlcyk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnVGVycmFpbiBhcmVhIHByZWxvYWRlZCcpO1xuICAgICAgICByZXR1cm4gcHJvY2Vzc0ZsaWdodFBsYW4oZmxpZ2h0UGxhbik7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKHByb2Nlc3NlZFBsYW4pID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Byb2Nlc3NGbGlnaHRQbGFuIGNvbXBsZXRlZDonLCBwcm9jZXNzZWRQbGFuKTtcbiAgICAgICAgcmV0dXJuIHByb2Nlc3NlZFBsYW47XG4gICAgICB9KVxuICAgICAgLnRoZW4oaGFuZGxlUHJvY2Vzc2VkUGxhbilcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcignUHJvY2Vzc2luZyBwaXBlbGluZSBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgIGhhbmRsZVByb2Nlc3NpbmdFcnJvcihlcnJvcik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBjb25zb2xlLnRpbWVFbmQoJ0ZsaWdodFBsYW5Qcm9jZXNzaW5nJyk7XG4gICAgICB9KTtcbiAgfSwgW2ZsaWdodFBsYW4sIG1hcCwgZWxldmF0aW9uU2VydmljZSwgcHJvY2Vzc0ZsaWdodFBsYW4sIHNldEZsaWdodFBsYW4sIHNldERpc3RhbmNlLCBzZXRQcm9jZXNzZWQsIHNldEVycm9yLCBhZGRGbGlnaHRQYXRoXSk7XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBtYXJrZXIgcG9wdXBzIHdoZW4gbWFwIG9yIHRlcnJhaW4gY2hhbmdlc1xuICAgKi9cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobWFwICYmIHRlcnJhaW5Mb2FkZWQpIHtcbiAgICAgIHVwZGF0ZU1hcmtlclBvcHVwcygpO1xuICAgIH1cbiAgfSwgW3VwZGF0ZU1hcmtlclBvcHVwcywgbWFwLCB0ZXJyYWluTG9hZGVkXSk7XG5cbiAgLyoqXG4gICAqIFJ1biBFTE9TIGFuYWx5c2lzXG4gICAqL1xuICBjb25zdCBydW5FbG9zQW5hbHlzaXMgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFtYXAgfHwgIWdyaWRBbmFseXNpc1JlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgc2V0SXNBbmFseXppbmcodHJ1ZSk7XG4gICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgIHRyYWNrRXZlbnQoJ2Vsb3NfYW5hbHlzaXNfc3RhcnRlZCcsIHt9KTtcblxuICAgICAgcmVzZXRMYXllcnMoKTtcbiAgICAgIC8vIEltcG9ydCB1c2VBcmVhT3BzUHJvY2Vzc29yIGhlcmUgYXMgYSBsb2NhbCBpbXBvcnQgaWYgdXNlZCBvbmx5IGluIHRoaXMgZnVuY3Rpb25cbiAgICAgIGNvbnN0IHsgc2hvd0FyZWFPZk9wZXJhdGlvbnMgfSA9IHJlcXVpcmUoJy4uL0FPL0hvb2tzL3VzZUFyZWFPcHNQcm9jZXNzb3InKS51c2VBcmVhT3BzUHJvY2Vzc29yKCk7XG4gICAgICBcbiAgICAgIC8vIFNob3cgQXJlYSBvZiBPcGVyYXRpb25zIGZvciB0aGUgYW5hbHlzaXNcbiAgICAgIHNob3dBcmVhT2ZPcGVyYXRpb25zKCk7XG5cbiAgICAgIGF3YWl0IGdyaWRBbmFseXNpc1JlZi5jdXJyZW50LnJ1bkZsaWdodFBhdGhBbmFseXNpcygpO1xuXG4gICAgICB0cmFja0V2ZW50KCdlbG9zX2FuYWx5c2lzX2NvbXBsZXRlZCcsIHt9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHNldEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnQW5hbHlzaXMgZmFpbGVkJyk7XG4gICAgICB0cmFja0V2ZW50KCdlbG9zX2FuYWx5c2lzX2Vycm9yJywge1xuICAgICAgICBlcnJvcjogZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgIH0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0FuYWx5emluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgPGRpdlxuICAgICAgICBpZD1cIm1hcC1jb250YWluZXJcIlxuICAgICAgICByZWY9e21hcENvbnRhaW5lclJlZn1cbiAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtc2NyZWVuXCJcbiAgICAgIC8+XG4gICAgICB7bWFwICYmIChcbiAgICAgICAgPD5cbiAgICAgICAgICA8TWFwYm94TGF5ZXJIYW5kbGVyIG1hcD17bWFwfSAvPlxuICAgICAgICAgIHthb0dlb21ldHJ5ICYmIDxEQllETGF5ZXJIYW5kbGVyIHJlZj17REJZRExheWVySGFuZGxlclJlZn0gbWFwPXttYXB9IC8+fVxuICAgICAgICA8Lz5cbiAgICAgICl9XG4gICAgICA8TWFya2VyQ29udHJvbHMgLz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTQgbGVmdC00IHotMTAgZmxleCBmbGV4LWNvbCBnYXAtNFwiPlxuICAgICAgICA8TGF5ZXJDb250cm9sc1xuICAgICAgICAgIG9uVG9nZ2xlREJZRD17KCkgPT4ge1xuICAgICAgICAgICAgaWYgKERCWURMYXllckhhbmRsZXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICB0cmFja0V2ZW50KCdkYnlkX3Bvd2VybGluZXNfcmVxdWVzdGVkJywge30pO1xuICAgICAgICAgICAgICBEQllETGF5ZXJIYW5kbGVyUmVmLmN1cnJlbnQuZmV0Y2hMYXllcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9fVxuICAgICAgICAgIGFjdGl2ZVBhbmVsPXthY3RpdmVQYW5lbH1cbiAgICAgICAgICB0b2dnbGVQYW5lbD17dG9nZ2xlUGFuZWx9XG4gICAgICAgICAgZmxpZ2h0UGxhbj17ZmxpZ2h0UGxhbn1cbiAgICAgICAgICBzZXRTaG93VXBsb2FkZXI9e3NldFNob3dVcGxvYWRlcn1cbiAgICAgICAgLz5cbiAgICAgICAgPE1lYXN1cmVtZW50Q29udHJvbHMgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPE1hcExlZ2VuZCAvPlxuICAgICAgPEFuYWx5c2lzU3RhdHVzIFxuICAgICAgICBvblN0b3BMT1M9eygpID0+IHtcbiAgICAgICAgICAvLyBMT1MgYW5hbHlzaXMgY2FuY2VsIGxvZ2ljXG4gICAgICAgIH19XG4gICAgICAgIG9uU3RvcE9ic3RhY2xlPXsoKSA9PiB7XG4gICAgICAgICAgLy8gQW55IGFkZGl0aW9uYWwgbG9naWMgYmV5b25kIGNhbGxpbmcgY2FuY2VsQW5hbHlzaXNcbiAgICAgICAgfX0gXG4gICAgICAvPlxuICAgICAgey8qIDxMT1NNb2RhbCAvPiBEaXNhYmxlZCBGb3IgTm93IFVudGlsIEkgZml4IGl0LiovfVxuXG4gICAgICA8RmxpZ2h0UGF0aERpc3BsYXkgLz5cbiAgICAgIDxBT0Rpc3BsYXkgLz5cbiAgICAgIHtlcnJvciAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTQgbGVmdC00IGJnLXJlZC01MDAgdGV4dC13aGl0ZSBweC00IHB5LTIgcm91bmRlZC1sZyBzaGFkb3ctbGcgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICA8c3Bhbj7imqDvuI88L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibWwtMlwiPntlcnJvcn08L3NwYW4+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0RXJyb3IobnVsbCl9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJtbC0yIGhvdmVyOm9wYWNpdHktNzVcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIOKclVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHttYXAgJiYgKFxuICAgICAgICA8R3JpZEFuYWx5c2lzQ29udHJvbGxlclxuICAgICAgICAgIHJlZj17Z3JpZEFuYWx5c2lzUmVmfVxuICAgICAgICAgIGZsaWdodFBsYW49e2ZsaWdodFBsYW4/LnByb3BlcnRpZXM/LnByb2Nlc3NlZCA/IGZsaWdodFBsYW4gOiB1bmRlZmluZWR9XG4gICAgICAgICAgb25Qcm9ncmVzcz17KHByb2dyZXNzKSA9PiB7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBvbkVycm9yPXsoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFTE9TIEFuYWx5c2lzIGVycm9yOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uQ29tcGxldGU9eyhyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRUxPUyBBbmFseXNpcyBjb21wbGV0ZWQ6XCIsIHJlc3VsdCk7XG4gICAgICAgICAgICBzZXRSZXN1bHRzKHJlc3VsdCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5NYXAuZGlzcGxheU5hbWUgPSAnTWFwJztcblxuZXhwb3J0IGRlZmF1bHQgTWFwOyJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZU1hcCIsInVzZU1hcENvbnRleHQiLCJ1c2VGbGlnaHRQbGFuQ29udGV4dCIsInVzZUxPU0FuYWx5c2lzIiwidXNlQXJlYU9mT3BzQ29udGV4dCIsInVzZUZsaWdodFBsYW5Qcm9jZXNzb3IiLCJ1c2VNYXJrZXJzIiwidXNlVG93ZXJUb01hcmtlciIsInVzZUxheWVycyIsIk1hcmtlckNvbnRyb2xzIiwiTGF5ZXJDb250cm9scyIsIk1lYXN1cmVtZW50Q29udHJvbHMiLCJNYXBMZWdlbmQiLCJBbmFseXNpc1N0YXR1cyIsIkZsaWdodFBhdGhEaXNwbGF5IiwiQU9EaXNwbGF5IiwiTWFwYm94TGF5ZXJIYW5kbGVyIiwiREJZRExheWVySGFuZGxlciIsIkdyaWRBbmFseXNpc0NvbnRyb2xsZXIiLCJ1c2VBbmFseXNpc0NvbnRyb2xsZXIiLCJ0cmFja0V2ZW50V2l0aEZvcm0iLCJ0cmFja0V2ZW50IiwiTWFwIiwiYWN0aXZlUGFuZWwiLCJ0b2dnbGVQYW5lbCIsImZsaWdodFBsYW4iLCJzZXRTaG93VXBsb2FkZXIiLCJzZXRNYXAiLCJlbGV2YXRpb25TZXJ2aWNlIiwic2V0RmxpZ2h0UGxhbiIsInNldERpc3RhbmNlIiwic2V0UHJvY2Vzc2VkIiwiaXNBbmFseXppbmciLCJzZXRJc0FuYWx5emluZyIsInNldFJlc3VsdHMiLCJzZXRFcnJvciIsImVycm9yIiwicmVzZXRBbmFseXNpcyIsImFvR2VvbWV0cnkiLCJtYXBDb250YWluZXJSZWYiLCJEQllETGF5ZXJIYW5kbGVyUmVmIiwiZ3JpZEFuYWx5c2lzUmVmIiwiaGFzU2V0TWFwUmVmIiwibWFwIiwidGVycmFpbkxvYWRlZCIsInN0eWxlIiwiY2VudGVyIiwiem9vbSIsInByb2plY3Rpb24iLCJwcm9jZXNzRmxpZ2h0UGxhbiIsIm1hcmtlcnMiLCJ1cGRhdGVNYXJrZXJQb3B1cHMiLCJjb252ZXJ0VG93ZXJUb1JlcGVhdGVyIiwiYWRkRmxpZ2h0UGF0aCIsInJlc2V0TGF5ZXJzIiwiY3VycmVudCIsIm1hcExvYWRlZCIsInByb3BlcnRpZXMiLCJwcm9jZXNzZWQiLCJjb25zb2xlIiwibG9nIiwiaGFzRmxpZ2h0UGxhbiIsImlzUHJvY2Vzc2VkIiwiZWxldmF0aW9uU2VydmljZUF2YWlsYWJsZSIsImlzU291cmNlTG9hZGVkIiwiaGFuZGxlUHJvY2Vzc2VkUGxhbiIsInByb2Nlc3NlZFBsYW4iLCJwbGFuSWQiLCJpZCIsImRpc3RhbmNlIiwidG90YWxEaXN0YW5jZSIsImhhc0ZlYXR1cmVzIiwiZmVhdHVyZXMiLCJsZW5ndGgiLCJoYW5kbGVQcm9jZXNzaW5nRXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJ0aW1lIiwiZW5zdXJlVGVycmFpblJlYWR5IiwidGhlbiIsInByZWxvYWRBcmVhIiwiZ2VvbWV0cnkiLCJjb29yZGluYXRlcyIsImNhdGNoIiwiZmluYWxseSIsInRpbWVFbmQiLCJydW5FbG9zQW5hbHlzaXMiLCJzaG93QXJlYU9mT3BlcmF0aW9ucyIsInJlcXVpcmUiLCJ1c2VBcmVhT3BzUHJvY2Vzc29yIiwicnVuRmxpZ2h0UGF0aEFuYWx5c2lzIiwiZXJyIiwiZGl2IiwiY2xhc3NOYW1lIiwicmVmIiwib25Ub2dnbGVEQllEIiwiZmV0Y2hMYXllcnMiLCJvblN0b3BMT1MiLCJvblN0b3BPYnN0YWNsZSIsInNwYW4iLCJidXR0b24iLCJvbkNsaWNrIiwidW5kZWZpbmVkIiwib25Qcm9ncmVzcyIsInByb2dyZXNzIiwib25FcnJvciIsIm9uQ29tcGxldGUiLCJyZXN1bHQiLCJkaXNwbGF5TmFtZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/Map/index.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/UI/Card.tsx":
/*!****************************************!*\
  !*** ./src/app/components/UI/Card.tsx ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n// components/Card.tsx\n\n\nconst Card = ({ children })=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex-1 bg-white shadow-lg p-6 rounded-lg border border-gray-200\",\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/Card.tsx\",\n        lineNumber: 11,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Card);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvVUkvQ2FyZC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxzQkFBc0I7O0FBQ21CO0FBT3pDLE1BQU1DLE9BQTRCLENBQUMsRUFBRUMsUUFBUSxFQUFFO0lBQzdDLHFCQUNFLDhEQUFDQztRQUFJQyxXQUFVO2tCQUNaRjs7Ozs7O0FBR1A7QUFFQSxpRUFBZUQsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvY29tcG9uZW50cy9VSS9DYXJkLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb21wb25lbnRzL0NhcmQudHN4XG5pbXBvcnQgUmVhY3QsIHsgUmVhY3ROb2RlIH0gZnJvbSBcInJlYWN0XCI7XG5cbmludGVyZmFjZSBDYXJkUHJvcHMge1xuICBjaGlsZHJlbjogUmVhY3ROb2RlO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7IFxufVxuXG5jb25zdCBDYXJkOiBSZWFjdC5GQzxDYXJkUHJvcHM+ID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIGJnLXdoaXRlIHNoYWRvdy1sZyBwLTYgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktMjAwXCI+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwiQ2FyZCIsImNoaWxkcmVuIiwiZGl2IiwiY2xhc3NOYW1lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/UI/Card.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/UI/MapSidePanel.tsx":
/*!************************************************!*\
  !*** ./src/app/components/UI/MapSidePanel.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_ChevronRight_lucide_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronRight!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/chevron-right.js\");\n// This component is designed to be used beside the map where you want to show additional information or controls\n// in a side panel that can be toggled open or closed.\n\n\n\nconst MapSidePanel = ({ title, children, className = '', isExpanded, onToggle, icon })=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: `fixed top-0 right-0 h-full w-80 transition-transform duration-300 ease-in-out\n        ${isExpanded ? 'translate-x-0' : 'translate-x-full'}\n        ${className}`,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative bg-white/95 backdrop-blur-sm shadow-xl w-full h-full flex flex-col rounded-l-lg border border-gray-200  overflow-hidden\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"px-4 py-3 bg-gray-50/90 border-b border-gray-200 flex items-center justify-between shadow-sm\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center gap-2\",\n                                children: [\n                                    icon && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-gray-600\",\n                                        children: icon\n                                    }, void 0, false, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/MapSidePanel.tsx\",\n                                        lineNumber: 40,\n                                        columnNumber: 24\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"font-medium text-gray-900\",\n                                        children: title\n                                    }, void 0, false, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/MapSidePanel.tsx\",\n                                        lineNumber: 41,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/MapSidePanel.tsx\",\n                                lineNumber: 39,\n                                columnNumber: 13\n                            }, undefined),\n                            isExpanded && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>{\n                                    console.log(\"Close button clicked\"); // Debug log\n                                    onToggle();\n                                },\n                                className: \"p-1.5 hover:bg-gray-200 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                \"aria-label\": \"Close panel\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronRight_lucide_react__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                    className: \"w-5 h-5 text-gray-600\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/MapSidePanel.tsx\",\n                                    lineNumber: 55,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/MapSidePanel.tsx\",\n                                lineNumber: 46,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/MapSidePanel.tsx\",\n                        lineNumber: 37,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1 p-4 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent hover:scrollbar-thumb-gray-400\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"max-w-full\",\n                            children: children\n                        }, void 0, false, {\n                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/MapSidePanel.tsx\",\n                            lineNumber: 64,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/MapSidePanel.tsx\",\n                        lineNumber: 61,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/MapSidePanel.tsx\",\n                lineNumber: 33,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/MapSidePanel.tsx\",\n            lineNumber: 31,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/MapSidePanel.tsx\",\n        lineNumber: 25,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MapSidePanel);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvVUkvTWFwU2lkZVBhbmVsLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxpSEFBaUg7QUFDakgsc0RBQXNEOztBQUU1QjtBQUNrQjtBQVc1QyxNQUFNRSxlQUE0QyxDQUFDLEVBQ2pEQyxLQUFLLEVBQ0xDLFFBQVEsRUFDUkMsWUFBWSxFQUFFLEVBQ2RDLFVBQVUsRUFDVkMsUUFBUSxFQUNSQyxJQUFJLEVBQ0w7SUFDQyxxQkFDRSw4REFBQ0M7UUFDQ0osV0FBVyxDQUFDO1FBQ1YsRUFBRUMsYUFBYSxrQkFBa0IsbUJBQW1CO1FBQ3BELEVBQUVELFdBQVc7a0JBR2YsNEVBQUNJO1lBQUlKLFdBQVU7c0JBRWIsNEVBQUNJO2dCQUFJSixXQUFVOztrQ0FJYiw4REFBQ0k7d0JBQUlKLFdBQVU7OzBDQUViLDhEQUFDSTtnQ0FBSUosV0FBVTs7b0NBQ1pHLHNCQUFRLDhEQUFDRTt3Q0FBS0wsV0FBVTtrREFBaUJHOzs7Ozs7a0RBQzFDLDhEQUFDRzt3Q0FBR04sV0FBVTtrREFBNkJGOzs7Ozs7Ozs7Ozs7NEJBSTVDRyw0QkFDRCw4REFBQ007Z0NBQ0NDLFNBQVM7b0NBQ1BDLFFBQVFDLEdBQUcsQ0FBQyx5QkFBeUIsWUFBWTtvQ0FDakRSO2dDQUNGO2dDQUNBRixXQUFVO2dDQUVWVyxjQUFXOzBDQUVYLDRFQUFDZix3RkFBWUE7b0NBQUNJLFdBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7O2tDQU01Qiw4REFBQ0k7d0JBQUlKLFdBQVU7a0NBR2IsNEVBQUNJOzRCQUFJSixXQUFVO3NDQUNaRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUWY7QUFFQSxpRUFBZUYsWUFBWUEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvY29tcG9uZW50cy9VSS9NYXBTaWRlUGFuZWwudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgY29tcG9uZW50IGlzIGRlc2lnbmVkIHRvIGJlIHVzZWQgYmVzaWRlIHRoZSBtYXAgd2hlcmUgeW91IHdhbnQgdG8gc2hvdyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIG9yIGNvbnRyb2xzXG4vLyBpbiBhIHNpZGUgcGFuZWwgdGhhdCBjYW4gYmUgdG9nZ2xlZCBvcGVuIG9yIGNsb3NlZC5cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IENoZXZyb25SaWdodCB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5cbmludGVyZmFjZSBNYXBTaWRlUGFuZWxQcm9wcyB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbiAgaXNFeHBhbmRlZDogYm9vbGVhbjtcbiAgb25Ub2dnbGU6ICgpID0+IHZvaWQ7XG4gIGljb24/OiBSZWFjdC5SZWFjdE5vZGU7XG59XG5cbmNvbnN0IE1hcFNpZGVQYW5lbDogUmVhY3QuRkM8TWFwU2lkZVBhbmVsUHJvcHM+ID0gKHtcbiAgdGl0bGUsXG4gIGNoaWxkcmVuLFxuICBjbGFzc05hbWUgPSAnJyxcbiAgaXNFeHBhbmRlZCxcbiAgb25Ub2dnbGUsXG4gIGljb25cbn0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2BmaXhlZCB0b3AtMCByaWdodC0wIGgtZnVsbCB3LTgwIHRyYW5zaXRpb24tdHJhbnNmb3JtIGR1cmF0aW9uLTMwMCBlYXNlLWluLW91dFxuICAgICAgICAke2lzRXhwYW5kZWQgPyAndHJhbnNsYXRlLXgtMCcgOiAndHJhbnNsYXRlLXgtZnVsbCd9XG4gICAgICAgICR7Y2xhc3NOYW1lfWB9XG4gICAgPlxuICAgICAgey8qIE1haW4gUGFuZWwgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtZnVsbFwiPlxuICAgICAgICB7LyogQ29udGVudCBDb250YWluZXIgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgYmctd2hpdGUvOTUgYmFja2Ryb3AtYmx1ci1zbSBzaGFkb3cteGxcbiAgICAgICAgICB3LWZ1bGwgaC1mdWxsIGZsZXggZmxleC1jb2wgcm91bmRlZC1sLWxnIGJvcmRlciBib3JkZXItZ3JheS0yMDAgXG4gICAgICAgICAgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTQgcHktMyBiZy1ncmF5LTUwLzkwIGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMFxuICAgICAgICAgICAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHNoYWRvdy1zbVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICB7aWNvbiAmJiA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNjAwXCI+e2ljb259PC9zcGFuPn1cbiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj57dGl0bGV9PC9oMz5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7LyogQ2xvc2UgYnV0dG9uICovfVxuICAgICAgICAgICAge2lzRXhwYW5kZWQgJiYgKFxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDbG9zZSBidXR0b24gY2xpY2tlZFwiKTsgLy8gRGVidWcgbG9nXG4gICAgICAgICAgICAgICAgb25Ub2dnbGUoKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0xLjUgaG92ZXI6YmctZ3JheS0yMDAgcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tY29sb3JzXG4gICAgICAgICAgICAgICAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwXCJcbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkNsb3NlIHBhbmVsXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPENoZXZyb25SaWdodCBjbGFzc05hbWU9XCJ3LTUgaC01IHRleHQtZ3JheS02MDBcIiAvPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgKX1cblxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHsvKiBDb250ZW50ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIHAtNCBvdmVyZmxvdy15LWF1dG8gb3ZlcnNjcm9sbC1jb250YWluXG4gICAgICAgICAgICBzY3JvbGxiYXItdGhpbiBzY3JvbGxiYXItdGh1bWItZ3JheS0zMDAgc2Nyb2xsYmFyLXRyYWNrLXRyYW5zcGFyZW50XG4gICAgICAgICAgICBob3ZlcjpzY3JvbGxiYXItdGh1bWItZ3JheS00MDBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctZnVsbFwiPlxuICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIFxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTWFwU2lkZVBhbmVsOyJdLCJuYW1lcyI6WyJSZWFjdCIsIkNoZXZyb25SaWdodCIsIk1hcFNpZGVQYW5lbCIsInRpdGxlIiwiY2hpbGRyZW4iLCJjbGFzc05hbWUiLCJpc0V4cGFuZGVkIiwib25Ub2dnbGUiLCJpY29uIiwiZGl2Iiwic3BhbiIsImgzIiwiYnV0dG9uIiwib25DbGljayIsImNvbnNvbGUiLCJsb2ciLCJhcmlhLWxhYmVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/UI/MapSidePanel.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/UI/PremiumButton.tsx":
/*!*************************************************!*\
  !*** ./src/app/components/UI/PremiumButton.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _context_PremiumContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../context/PremiumContext */ \"(ssr)/./src/app/context/PremiumContext.tsx\");\n/* harmony import */ var _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../types/PremiumTypes */ \"(ssr)/./src/app/types/PremiumTypes.ts\");\n/* harmony import */ var _barrel_optimize_names_Sparkles_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Sparkles!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/sparkles.js\");\n/**\n * src/app/components/UI/PremiumButton.tsx\n * \n * Purpose:\n * A permission-aware button component that acts as a drop-in replacement for standard buttons.\n * It checks if the user has access to the specified feature before executing the onClick handler.\n * \n * If the user doesn't have access, it triggers the upgrade flow instead of performing the action.\n * This component maintains the original button styling and behavior for seamless integration.\n */ /**\n * PremiumButton.tsx - Enhanced with subtle premium indicators\n */ \n\n\n\n // Or another icon from your library\nconst PremiumButton = ({ featureId, onClick, children, permissionParams, disabled, className, showIndicator = true, indicatorPosition = 'right', ...props })=>{\n    const { canUseFeature, requestUpgrade, getRequiredTierForFeature, tierLevel } = (0,_context_PremiumContext__WEBPACK_IMPORTED_MODULE_2__.usePremium)();\n    // Check if user has permission to use this feature\n    const hasPermission = canUseFeature(featureId, permissionParams);\n    // Get the tier required for this feature\n    const requiredTier = getRequiredTierForFeature(featureId);\n    // Only show indicator if this is a premium feature and user doesn't have access\n    const shouldShowIndicator = showIndicator && requiredTier > _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_3__.TierLevel.FREE && requiredTier > tierLevel;\n    // Handle button click\n    const handleClick = (e)=>{\n        if (!hasPermission) {\n            requestUpgrade(featureId);\n            return;\n        }\n        if (onClick) {\n            onClick(e);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n        onClick: handleClick,\n        disabled: disabled,\n        className: `relative ${className}`,\n        ...props,\n        children: [\n            shouldShowIndicator && indicatorPosition === 'left' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"inline-flex items-center mr-1.5 text-amber-500\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Sparkles_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                    size: 14\n                }, void 0, false, {\n                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/PremiumButton.tsx\",\n                    lineNumber: 73,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/PremiumButton.tsx\",\n                lineNumber: 72,\n                columnNumber: 9\n            }, undefined),\n            children,\n            shouldShowIndicator && indicatorPosition === 'right' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"inline-flex items-center ml-1.5 text-amber-500\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Sparkles_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                    size: 14\n                }, void 0, false, {\n                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/PremiumButton.tsx\",\n                    lineNumber: 81,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/PremiumButton.tsx\",\n                lineNumber: 80,\n                columnNumber: 9\n            }, undefined),\n            shouldShowIndicator && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"absolute -top-8 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-amber-50  text-amber-800 text-xs rounded shadow-sm opacity-0 group-hover:opacity-100  pointer-events-none transition-opacity whitespace-nowrap border border-amber-200\",\n                children: [\n                    requiredTier === _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_3__.TierLevel.COMMUNITY ? 'Community' : 'Commercial',\n                    \" feature\"\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/PremiumButton.tsx\",\n                lineNumber: 87,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/components/UI/PremiumButton.tsx\",\n        lineNumber: 65,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PremiumButton);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvVUkvUHJlbWl1bUJ1dHRvbi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7O0NBU0MsR0FFRDs7Q0FFQztBQUU4RDtBQUNMO0FBQ007QUFDeEIsQ0FBQyxvQ0FBb0M7QUFXN0UsTUFBTUksZ0JBQThDLENBQUMsRUFDbkRDLFNBQVMsRUFDVEMsT0FBTyxFQUNQQyxRQUFRLEVBQ1JDLGdCQUFnQixFQUNoQkMsUUFBUSxFQUNSQyxTQUFTLEVBQ1RDLGdCQUFnQixJQUFJLEVBQ3BCQyxvQkFBb0IsT0FBTyxFQUMzQixHQUFHQyxPQUNKO0lBQ0MsTUFBTSxFQUFFQyxhQUFhLEVBQUVDLGNBQWMsRUFBRUMseUJBQXlCLEVBQUVDLFNBQVMsRUFBRSxHQUFHaEIsbUVBQVVBO0lBRTFGLG1EQUFtRDtJQUNuRCxNQUFNaUIsZ0JBQWdCSixjQUFjVCxXQUFXRztJQUUvQyx5Q0FBeUM7SUFDekMsTUFBTVcsZUFBZUgsMEJBQTBCWDtJQUUvQyxnRkFBZ0Y7SUFDaEYsTUFBTWUsc0JBQXNCVCxpQkFBa0JRLGVBQWVqQiwwREFBU0EsQ0FBQ21CLElBQUksSUFBTUYsZUFBZUY7SUFFaEcsc0JBQXNCO0lBQ3RCLE1BQU1LLGNBQWMsQ0FBQ0M7UUFDbkIsSUFBSSxDQUFDTCxlQUFlO1lBQ2xCSCxlQUFlVjtZQUNmO1FBQ0Y7UUFFQSxJQUFJQyxTQUFTO1lBQ1hBLFFBQVFpQjtRQUNWO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQ0M7UUFDQ2xCLFNBQVNnQjtRQUNUYixVQUFVQTtRQUNWQyxXQUFXLENBQUMsU0FBUyxFQUFFQSxXQUFXO1FBQ2pDLEdBQUdHLEtBQUs7O1lBRVJPLHVCQUF1QlIsc0JBQXNCLHdCQUM1Qyw4REFBQ2E7Z0JBQUtmLFdBQVU7MEJBQ2QsNEVBQUNQLG9GQUFRQTtvQkFBQ3VCLE1BQU07Ozs7Ozs7Ozs7O1lBSW5CbkI7WUFFQWEsdUJBQXVCUixzQkFBc0IseUJBQzVDLDhEQUFDYTtnQkFBS2YsV0FBVTswQkFDZCw0RUFBQ1Asb0ZBQVFBO29CQUFDdUIsTUFBTTs7Ozs7Ozs7Ozs7WUFLbkJOLHFDQUNDLDhEQUFDSztnQkFBS2YsV0FBVTs7b0JBR2JTLGlCQUFpQmpCLDBEQUFTQSxDQUFDeUIsU0FBUyxHQUFHLGNBQWM7b0JBQWE7Ozs7Ozs7Ozs7Ozs7QUFLN0U7QUFFQSxpRUFBZXZCLGFBQWFBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbXBvbmVudHMvVUkvUHJlbWl1bUJ1dHRvbi50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBzcmMvYXBwL2NvbXBvbmVudHMvVUkvUHJlbWl1bUJ1dHRvbi50c3hcbiAqIFxuICogUHVycG9zZTpcbiAqIEEgcGVybWlzc2lvbi1hd2FyZSBidXR0b24gY29tcG9uZW50IHRoYXQgYWN0cyBhcyBhIGRyb3AtaW4gcmVwbGFjZW1lbnQgZm9yIHN0YW5kYXJkIGJ1dHRvbnMuXG4gKiBJdCBjaGVja3MgaWYgdGhlIHVzZXIgaGFzIGFjY2VzcyB0byB0aGUgc3BlY2lmaWVkIGZlYXR1cmUgYmVmb3JlIGV4ZWN1dGluZyB0aGUgb25DbGljayBoYW5kbGVyLlxuICogXG4gKiBJZiB0aGUgdXNlciBkb2Vzbid0IGhhdmUgYWNjZXNzLCBpdCB0cmlnZ2VycyB0aGUgdXBncmFkZSBmbG93IGluc3RlYWQgb2YgcGVyZm9ybWluZyB0aGUgYWN0aW9uLlxuICogVGhpcyBjb21wb25lbnQgbWFpbnRhaW5zIHRoZSBvcmlnaW5hbCBidXR0b24gc3R5bGluZyBhbmQgYmVoYXZpb3IgZm9yIHNlYW1sZXNzIGludGVncmF0aW9uLlxuICovXG5cbi8qKlxuICogUHJlbWl1bUJ1dHRvbi50c3ggLSBFbmhhbmNlZCB3aXRoIHN1YnRsZSBwcmVtaXVtIGluZGljYXRvcnNcbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHsgQnV0dG9uSFRNTEF0dHJpYnV0ZXMsIFJlYWN0Tm9kZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVByZW1pdW0gfSBmcm9tICcuLi8uLi9jb250ZXh0L1ByZW1pdW1Db250ZXh0JztcbmltcG9ydCB7IEZlYXR1cmVJZCwgVGllckxldmVsIH0gZnJvbSAnLi4vLi4vdHlwZXMvUHJlbWl1bVR5cGVzJztcbmltcG9ydCB7IFNwYXJrbGVzIH0gZnJvbSAnbHVjaWRlLXJlYWN0JzsgLy8gT3IgYW5vdGhlciBpY29uIGZyb20geW91ciBsaWJyYXJ5XG5cbmludGVyZmFjZSBQcmVtaXVtQnV0dG9uUHJvcHMgZXh0ZW5kcyBCdXR0b25IVE1MQXR0cmlidXRlczxIVE1MQnV0dG9uRWxlbWVudD4ge1xuICBmZWF0dXJlSWQ6IEZlYXR1cmVJZDtcbiAgY2hpbGRyZW46IFJlYWN0Tm9kZTtcbiAgcGVybWlzc2lvblBhcmFtcz86IGFueTtcbiAgLy8gTmV3IHByb3BzXG4gIHNob3dJbmRpY2F0b3I/OiBib29sZWFuOyAvLyBXaGV0aGVyIHRvIHNob3cgdGhlIHByZW1pdW0gaW5kaWNhdG9yXG4gIGluZGljYXRvclBvc2l0aW9uPzogJ2xlZnQnIHwgJ3JpZ2h0JzsgLy8gV2hlcmUgdG8gcG9zaXRpb24gdGhlIGluZGljYXRvclxufVxuXG5jb25zdCBQcmVtaXVtQnV0dG9uOiBSZWFjdC5GQzxQcmVtaXVtQnV0dG9uUHJvcHM+ID0gKHtcbiAgZmVhdHVyZUlkLFxuICBvbkNsaWNrLFxuICBjaGlsZHJlbixcbiAgcGVybWlzc2lvblBhcmFtcyxcbiAgZGlzYWJsZWQsXG4gIGNsYXNzTmFtZSxcbiAgc2hvd0luZGljYXRvciA9IHRydWUsXG4gIGluZGljYXRvclBvc2l0aW9uID0gJ3JpZ2h0JyxcbiAgLi4ucHJvcHNcbn0pID0+IHtcbiAgY29uc3QgeyBjYW5Vc2VGZWF0dXJlLCByZXF1ZXN0VXBncmFkZSwgZ2V0UmVxdWlyZWRUaWVyRm9yRmVhdHVyZSwgdGllckxldmVsIH0gPSB1c2VQcmVtaXVtKCk7XG4gIFxuICAvLyBDaGVjayBpZiB1c2VyIGhhcyBwZXJtaXNzaW9uIHRvIHVzZSB0aGlzIGZlYXR1cmVcbiAgY29uc3QgaGFzUGVybWlzc2lvbiA9IGNhblVzZUZlYXR1cmUoZmVhdHVyZUlkLCBwZXJtaXNzaW9uUGFyYW1zKTtcbiAgXG4gIC8vIEdldCB0aGUgdGllciByZXF1aXJlZCBmb3IgdGhpcyBmZWF0dXJlXG4gIGNvbnN0IHJlcXVpcmVkVGllciA9IGdldFJlcXVpcmVkVGllckZvckZlYXR1cmUoZmVhdHVyZUlkKTtcbiAgXG4gIC8vIE9ubHkgc2hvdyBpbmRpY2F0b3IgaWYgdGhpcyBpcyBhIHByZW1pdW0gZmVhdHVyZSBhbmQgdXNlciBkb2Vzbid0IGhhdmUgYWNjZXNzXG4gIGNvbnN0IHNob3VsZFNob3dJbmRpY2F0b3IgPSBzaG93SW5kaWNhdG9yICYmIChyZXF1aXJlZFRpZXIgPiBUaWVyTGV2ZWwuRlJFRSkgJiYgKHJlcXVpcmVkVGllciA+IHRpZXJMZXZlbCk7XG5cbiAgLy8gSGFuZGxlIGJ1dHRvbiBjbGlja1xuICBjb25zdCBoYW5kbGVDbGljayA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxCdXR0b25FbGVtZW50PikgPT4ge1xuICAgIGlmICghaGFzUGVybWlzc2lvbikge1xuICAgICAgcmVxdWVzdFVwZ3JhZGUoZmVhdHVyZUlkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgaWYgKG9uQ2xpY2spIHtcbiAgICAgIG9uQ2xpY2soZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGJ1dHRvblxuICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2t9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBjbGFzc05hbWU9e2ByZWxhdGl2ZSAke2NsYXNzTmFtZX1gfVxuICAgICAgey4uLnByb3BzfVxuICAgID5cbiAgICAgIHtzaG91bGRTaG93SW5kaWNhdG9yICYmIGluZGljYXRvclBvc2l0aW9uID09PSAnbGVmdCcgJiYgKFxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgbXItMS41IHRleHQtYW1iZXItNTAwXCI+XG4gICAgICAgICAgPFNwYXJrbGVzIHNpemU9ezE0fSAvPlxuICAgICAgICA8L3NwYW4+XG4gICAgICApfVxuICAgICAgXG4gICAgICB7Y2hpbGRyZW59XG4gICAgICBcbiAgICAgIHtzaG91bGRTaG93SW5kaWNhdG9yICYmIGluZGljYXRvclBvc2l0aW9uID09PSAncmlnaHQnICYmIChcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIG1sLTEuNSB0ZXh0LWFtYmVyLTUwMFwiPlxuICAgICAgICAgIDxTcGFya2xlcyBzaXplPXsxNH0gLz5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgKX1cbiAgICAgIFxuICAgICAgey8qIE9wdGlvbmFsIHRvb2x0aXAtc3R5bGUgaW5kaWNhdG9yIHRoYXQgYXBwZWFycyBvbiBob3ZlciAqL31cbiAgICAgIHtzaG91bGRTaG93SW5kaWNhdG9yICYmIChcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYWJzb2x1dGUgLXRvcC04IGxlZnQtMS8yIHRyYW5zZm9ybSAtdHJhbnNsYXRlLXgtMS8yIHB4LTIgcHktMSBiZy1hbWJlci01MCBcbiAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbWJlci04MDAgdGV4dC14cyByb3VuZGVkIHNoYWRvdy1zbSBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgXG4gICAgICAgICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzLW5vbmUgdHJhbnNpdGlvbi1vcGFjaXR5IHdoaXRlc3BhY2Utbm93cmFwIGJvcmRlciBib3JkZXItYW1iZXItMjAwXCI+XG4gICAgICAgICAge3JlcXVpcmVkVGllciA9PT0gVGllckxldmVsLkNPTU1VTklUWSA/ICdDb21tdW5pdHknIDogJ0NvbW1lcmNpYWwnfSBmZWF0dXJlXG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICl9XG4gICAgPC9idXR0b24+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQcmVtaXVtQnV0dG9uOyJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVByZW1pdW0iLCJUaWVyTGV2ZWwiLCJTcGFya2xlcyIsIlByZW1pdW1CdXR0b24iLCJmZWF0dXJlSWQiLCJvbkNsaWNrIiwiY2hpbGRyZW4iLCJwZXJtaXNzaW9uUGFyYW1zIiwiZGlzYWJsZWQiLCJjbGFzc05hbWUiLCJzaG93SW5kaWNhdG9yIiwiaW5kaWNhdG9yUG9zaXRpb24iLCJwcm9wcyIsImNhblVzZUZlYXR1cmUiLCJyZXF1ZXN0VXBncmFkZSIsImdldFJlcXVpcmVkVGllckZvckZlYXR1cmUiLCJ0aWVyTGV2ZWwiLCJoYXNQZXJtaXNzaW9uIiwicmVxdWlyZWRUaWVyIiwic2hvdWxkU2hvd0luZGljYXRvciIsIkZSRUUiLCJoYW5kbGVDbGljayIsImUiLCJidXR0b24iLCJzcGFuIiwic2l6ZSIsIkNPTU1VTklUWSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/UI/PremiumButton.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/tracking/tracking.js":
/*!*************************************************!*\
  !*** ./src/app/components/tracking/tracking.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   trackEventWithForm: () => (/* binding */ trackEventWithForm)\n/* harmony export */ });\n// tracking.js\nconst trackEventWithForm = (eventName, additionalData = {})=>{\n    // Replace with your Google Form's \"formResponse\" URL.\n    const formUrl = \"https://docs.google.com/forms/d/e/1FAIpQLSe5Des09Yq8IRnPmTyiIlAjXQPpoauiD1oWfgDHZdogGgwEtw/formResponse\";\n    // Map your data to the form fields using the entry IDs from your pre-filled link.\n    const formData = {\n        \"entry.1568339444\": new Date().toISOString(),\n        \"entry.1539634642\": eventName,\n        \"entry.1014763706\": additionalData.panel || \"\"\n    };\n    // Create (or reuse) a hidden iframe to target the form submission.\n    let iframe = document.getElementById(\"hidden_iframe\");\n    if (!iframe) {\n        iframe = document.createElement(\"iframe\");\n        iframe.name = \"hidden_iframe\";\n        iframe.id = \"hidden_iframe\";\n        iframe.style.display = \"none\";\n        document.body.appendChild(iframe);\n    }\n    // Create a hidden form element.\n    const form = document.createElement(\"form\");\n    form.action = formUrl;\n    form.method = \"POST\";\n    form.target = \"hidden_iframe\";\n    form.style.display = \"none\";\n    // Create hidden input elements for each field.\n    Object.keys(formData).forEach((key)=>{\n        const input = document.createElement(\"input\");\n        input.type = \"hidden\";\n        input.name = key;\n        input.value = formData[key];\n        form.appendChild(input);\n    });\n    // Append the form, submit it, then remove it.\n    document.body.appendChild(form);\n    form.submit();\n    document.body.removeChild(form);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvdHJhY2tpbmcvdHJhY2tpbmcuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGNBQWM7QUFDUCxNQUFNQSxxQkFBcUIsQ0FBQ0MsV0FBV0MsaUJBQWlCLENBQUMsQ0FBQztJQUM3RCxzREFBc0Q7SUFDdEQsTUFBTUMsVUFDSjtJQUVGLGtGQUFrRjtJQUNsRixNQUFNQyxXQUFXO1FBQ2Ysb0JBQW9CLElBQUlDLE9BQU9DLFdBQVc7UUFDMUMsb0JBQW9CTDtRQUNwQixvQkFBb0JDLGVBQWVLLEtBQUssSUFBSTtJQUM5QztJQUVBLG1FQUFtRTtJQUNuRSxJQUFJQyxTQUFTQyxTQUFTQyxjQUFjLENBQUM7SUFDckMsSUFBSSxDQUFDRixRQUFRO1FBQ1hBLFNBQVNDLFNBQVNFLGFBQWEsQ0FBQztRQUNoQ0gsT0FBT0ksSUFBSSxHQUFHO1FBQ2RKLE9BQU9LLEVBQUUsR0FBRztRQUNaTCxPQUFPTSxLQUFLLENBQUNDLE9BQU8sR0FBRztRQUN2Qk4sU0FBU08sSUFBSSxDQUFDQyxXQUFXLENBQUNUO0lBQzVCO0lBRUEsZ0NBQWdDO0lBQ2hDLE1BQU1VLE9BQU9ULFNBQVNFLGFBQWEsQ0FBQztJQUNwQ08sS0FBS0MsTUFBTSxHQUFHaEI7SUFDZGUsS0FBS0UsTUFBTSxHQUFHO0lBQ2RGLEtBQUtHLE1BQU0sR0FBRztJQUNkSCxLQUFLSixLQUFLLENBQUNDLE9BQU8sR0FBRztJQUVyQiwrQ0FBK0M7SUFDL0NPLE9BQU9DLElBQUksQ0FBQ25CLFVBQVVvQixPQUFPLENBQUMsQ0FBQ0M7UUFDN0IsTUFBTUMsUUFBUWpCLFNBQVNFLGFBQWEsQ0FBQztRQUNyQ2UsTUFBTUMsSUFBSSxHQUFHO1FBQ2JELE1BQU1kLElBQUksR0FBR2E7UUFDYkMsTUFBTUUsS0FBSyxHQUFHeEIsUUFBUSxDQUFDcUIsSUFBSTtRQUMzQlAsS0FBS0QsV0FBVyxDQUFDUztJQUNuQjtJQUVBLDhDQUE4QztJQUM5Q2pCLFNBQVNPLElBQUksQ0FBQ0MsV0FBVyxDQUFDQztJQUMxQkEsS0FBS1csTUFBTTtJQUNYcEIsU0FBU08sSUFBSSxDQUFDYyxXQUFXLENBQUNaO0FBQzVCLEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbXBvbmVudHMvdHJhY2tpbmcvdHJhY2tpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdHJhY2tpbmcuanNcbmV4cG9ydCBjb25zdCB0cmFja0V2ZW50V2l0aEZvcm0gPSAoZXZlbnROYW1lLCBhZGRpdGlvbmFsRGF0YSA9IHt9KSA9PiB7XG4gICAgLy8gUmVwbGFjZSB3aXRoIHlvdXIgR29vZ2xlIEZvcm0ncyBcImZvcm1SZXNwb25zZVwiIFVSTC5cbiAgICBjb25zdCBmb3JtVXJsID1cbiAgICAgIFwiaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZm9ybXMvZC9lLzFGQUlwUUxTZTVEZXMwOVlxOElSblBtVHlpSWxBalhRUHBvYXVpRDFvV2ZnREhaZG9nR2d3RXR3L2Zvcm1SZXNwb25zZVwiO1xuICBcbiAgICAvLyBNYXAgeW91ciBkYXRhIHRvIHRoZSBmb3JtIGZpZWxkcyB1c2luZyB0aGUgZW50cnkgSURzIGZyb20geW91ciBwcmUtZmlsbGVkIGxpbmsuXG4gICAgY29uc3QgZm9ybURhdGEgPSB7XG4gICAgICBcImVudHJ5LjE1NjgzMzk0NDRcIjogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCAvLyBUaW1lc3RhbXAgZmllbGRcbiAgICAgIFwiZW50cnkuMTUzOTYzNDY0MlwiOiBldmVudE5hbWUsICAgICAgICAgICAgICAgICAgLy8gRXZlbnQgTmFtZSBmaWVsZFxuICAgICAgXCJlbnRyeS4xMDE0NzYzNzA2XCI6IGFkZGl0aW9uYWxEYXRhLnBhbmVsIHx8IFwiXCIsIC8vIFBhbmVsIGZpZWxkXG4gICAgfTtcbiAgXG4gICAgLy8gQ3JlYXRlIChvciByZXVzZSkgYSBoaWRkZW4gaWZyYW1lIHRvIHRhcmdldCB0aGUgZm9ybSBzdWJtaXNzaW9uLlxuICAgIGxldCBpZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhpZGRlbl9pZnJhbWVcIik7XG4gICAgaWYgKCFpZnJhbWUpIHtcbiAgICAgIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG4gICAgICBpZnJhbWUubmFtZSA9IFwiaGlkZGVuX2lmcmFtZVwiO1xuICAgICAgaWZyYW1lLmlkID0gXCJoaWRkZW5faWZyYW1lXCI7XG4gICAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgIH1cbiAgXG4gICAgLy8gQ3JlYXRlIGEgaGlkZGVuIGZvcm0gZWxlbWVudC5cbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gICAgZm9ybS5hY3Rpb24gPSBmb3JtVXJsO1xuICAgIGZvcm0ubWV0aG9kID0gXCJQT1NUXCI7XG4gICAgZm9ybS50YXJnZXQgPSBcImhpZGRlbl9pZnJhbWVcIjsgXG4gICAgZm9ybS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIFxuICAgIC8vIENyZWF0ZSBoaWRkZW4gaW5wdXQgZWxlbWVudHMgZm9yIGVhY2ggZmllbGQuXG4gICAgT2JqZWN0LmtleXMoZm9ybURhdGEpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICBpbnB1dC50eXBlID0gXCJoaWRkZW5cIjtcbiAgICAgIGlucHV0Lm5hbWUgPSBrZXk7XG4gICAgICBpbnB1dC52YWx1ZSA9IGZvcm1EYXRhW2tleV07XG4gICAgICBmb3JtLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICB9KTtcbiAgXG4gICAgLy8gQXBwZW5kIHRoZSBmb3JtLCBzdWJtaXQgaXQsIHRoZW4gcmVtb3ZlIGl0LlxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gICAgZm9ybS5zdWJtaXQoKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGZvcm0pO1xuICB9O1xuICAiXSwibmFtZXMiOlsidHJhY2tFdmVudFdpdGhGb3JtIiwiZXZlbnROYW1lIiwiYWRkaXRpb25hbERhdGEiLCJmb3JtVXJsIiwiZm9ybURhdGEiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwYW5lbCIsImlmcmFtZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjcmVhdGVFbGVtZW50IiwibmFtZSIsImlkIiwic3R5bGUiLCJkaXNwbGF5IiwiYm9keSIsImFwcGVuZENoaWxkIiwiZm9ybSIsImFjdGlvbiIsIm1ldGhvZCIsInRhcmdldCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwiaW5wdXQiLCJ0eXBlIiwidmFsdWUiLCJzdWJtaXQiLCJyZW1vdmVDaGlsZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/tracking/tracking.js\n");

/***/ }),

/***/ "(ssr)/./src/app/context/AnalysisControllerContext.tsx":
/*!*******************************************************!*\
  !*** ./src/app/context/AnalysisControllerContext.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnalysisControllerProvider: () => (/* binding */ AnalysisControllerProvider),\n/* harmony export */   useAnalysisController: () => (/* binding */ useAnalysisController)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/**\n * src/app/context/AnalysisControllerContext.tsx\n * \n * Purpose:\n * Central controller for managing analysis state and coordination between different analysis tools.\n * Acts as a communication layer between map, analysis panels, and various tools.\n * \n * Features:\n * - Provides shared references to analysis utilities\n * - Manages global UI states like modals that need to be rendered at the app level\n * - Coordinates analysis triggers and results across components\n * \n * Related Files:\n * - page.tsx: Consumes this context to render app-level modals\n * - VisibilityAnalysisDashboard.tsx: Uses this context to trigger modals\n */ \n\n// Create the context with a default value\nconst AnalysisControllerContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nconst AnalysisControllerProvider = ({ children })=>{\n    // Reference to the grid analysis component\n    const gridAnalysisRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // State for controlling marker locations modal visibility\n    const [showMarkerLocationsModal, setShowMarkerLocationsModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Context value\n    const value = {\n        gridAnalysisRef,\n        showMarkerLocationsModal,\n        setShowMarkerLocationsModal\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AnalysisControllerContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/context/AnalysisControllerContext.tsx\",\n        lineNumber: 52,\n        columnNumber: 5\n    }, undefined);\n};\n// Custom hook for using the context\nconst useAnalysisController = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AnalysisControllerContext);\n    if (context === undefined) {\n        throw new Error('useAnalysisController must be used within an AnalysisControllerProvider');\n    }\n    return context;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbnRleHQvQW5hbHlzaXNDb250cm9sbGVyQ29udGV4dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7OztDQWVDO0FBRXFGO0FBVXRGLDBDQUEwQztBQUMxQyxNQUFNSywwQ0FBNEJKLG9EQUFhQSxDQUE0Q0s7QUFPcEYsTUFBTUMsNkJBQXdFLENBQUMsRUFBRUMsUUFBUSxFQUFFO0lBQ2hHLDJDQUEyQztJQUMzQyxNQUFNQyxrQkFBa0JMLDZDQUFNQSxDQUFDO0lBRS9CLDBEQUEwRDtJQUMxRCxNQUFNLENBQUNNLDBCQUEwQkMsNEJBQTRCLEdBQUdSLCtDQUFRQSxDQUFDO0lBRXpFLGdCQUFnQjtJQUNoQixNQUFNUyxRQUFRO1FBQ1pIO1FBQ0FDO1FBQ0FDO0lBRUY7SUFFQSxxQkFDRSw4REFBQ04sMEJBQTBCUSxRQUFRO1FBQUNELE9BQU9BO2tCQUN4Q0o7Ozs7OztBQUdQLEVBQUU7QUFFRixvQ0FBb0M7QUFDN0IsTUFBTU0sd0JBQXdCO0lBQ25DLE1BQU1DLFVBQVViLGlEQUFVQSxDQUFDRztJQUMzQixJQUFJVSxZQUFZVCxXQUFXO1FBQ3pCLE1BQU0sSUFBSVUsTUFBTTtJQUNsQjtJQUNBLE9BQU9EO0FBQ1QsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvY29udGV4dC9BbmFseXNpc0NvbnRyb2xsZXJDb250ZXh0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIHNyYy9hcHAvY29udGV4dC9BbmFseXNpc0NvbnRyb2xsZXJDb250ZXh0LnRzeFxuICogXG4gKiBQdXJwb3NlOlxuICogQ2VudHJhbCBjb250cm9sbGVyIGZvciBtYW5hZ2luZyBhbmFseXNpcyBzdGF0ZSBhbmQgY29vcmRpbmF0aW9uIGJldHdlZW4gZGlmZmVyZW50IGFuYWx5c2lzIHRvb2xzLlxuICogQWN0cyBhcyBhIGNvbW11bmljYXRpb24gbGF5ZXIgYmV0d2VlbiBtYXAsIGFuYWx5c2lzIHBhbmVscywgYW5kIHZhcmlvdXMgdG9vbHMuXG4gKiBcbiAqIEZlYXR1cmVzOlxuICogLSBQcm92aWRlcyBzaGFyZWQgcmVmZXJlbmNlcyB0byBhbmFseXNpcyB1dGlsaXRpZXNcbiAqIC0gTWFuYWdlcyBnbG9iYWwgVUkgc3RhdGVzIGxpa2UgbW9kYWxzIHRoYXQgbmVlZCB0byBiZSByZW5kZXJlZCBhdCB0aGUgYXBwIGxldmVsXG4gKiAtIENvb3JkaW5hdGVzIGFuYWx5c2lzIHRyaWdnZXJzIGFuZCByZXN1bHRzIGFjcm9zcyBjb21wb25lbnRzXG4gKiBcbiAqIFJlbGF0ZWQgRmlsZXM6XG4gKiAtIHBhZ2UudHN4OiBDb25zdW1lcyB0aGlzIGNvbnRleHQgdG8gcmVuZGVyIGFwcC1sZXZlbCBtb2RhbHNcbiAqIC0gVmlzaWJpbGl0eUFuYWx5c2lzRGFzaGJvYXJkLnRzeDogVXNlcyB0aGlzIGNvbnRleHQgdG8gdHJpZ2dlciBtb2RhbHNcbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZVJlZiwgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuXG4vLyBEZWZpbmUgdGhlIHNoYXBlIG9mIHRoZSBjb250ZXh0XG5pbnRlcmZhY2UgQW5hbHlzaXNDb250cm9sbGVyQ29udGV4dFR5cGUge1xuICBncmlkQW5hbHlzaXNSZWY6IFJlYWN0LlJlZk9iamVjdDxhbnk+O1xuICBzaG93TWFya2VyTG9jYXRpb25zTW9kYWw6IGJvb2xlYW47XG4gIHNldFNob3dNYXJrZXJMb2NhdGlvbnNNb2RhbDogUmVhY3QuRGlzcGF0Y2g8UmVhY3QuU2V0U3RhdGVBY3Rpb248Ym9vbGVhbj4+O1xuICAvLyBBZGQgb3RoZXIgYW5hbHlzaXMgY29udHJvbGxlciBzdGF0ZXMgYW5kIG1ldGhvZHMgYXMgbmVlZGVkXG59XG5cbi8vIENyZWF0ZSB0aGUgY29udGV4dCB3aXRoIGEgZGVmYXVsdCB2YWx1ZVxuY29uc3QgQW5hbHlzaXNDb250cm9sbGVyQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8QW5hbHlzaXNDb250cm9sbGVyQ29udGV4dFR5cGUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG5cbi8vIFByb3ZpZGVyIGNvbXBvbmVudFxuaW50ZXJmYWNlIEFuYWx5c2lzQ29udHJvbGxlclByb3ZpZGVyUHJvcHMge1xuICBjaGlsZHJlbjogUmVhY3ROb2RlO1xufVxuXG5leHBvcnQgY29uc3QgQW5hbHlzaXNDb250cm9sbGVyUHJvdmlkZXI6IFJlYWN0LkZDPEFuYWx5c2lzQ29udHJvbGxlclByb3ZpZGVyUHJvcHM+ID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICAvLyBSZWZlcmVuY2UgdG8gdGhlIGdyaWQgYW5hbHlzaXMgY29tcG9uZW50XG4gIGNvbnN0IGdyaWRBbmFseXNpc1JlZiA9IHVzZVJlZihudWxsKTtcbiAgXG4gIC8vIFN0YXRlIGZvciBjb250cm9sbGluZyBtYXJrZXIgbG9jYXRpb25zIG1vZGFsIHZpc2liaWxpdHlcbiAgY29uc3QgW3Nob3dNYXJrZXJMb2NhdGlvbnNNb2RhbCwgc2V0U2hvd01hcmtlckxvY2F0aW9uc01vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAvLyBDb250ZXh0IHZhbHVlXG4gIGNvbnN0IHZhbHVlID0ge1xuICAgIGdyaWRBbmFseXNpc1JlZixcbiAgICBzaG93TWFya2VyTG9jYXRpb25zTW9kYWwsXG4gICAgc2V0U2hvd01hcmtlckxvY2F0aW9uc01vZGFsLFxuICAgIC8vIEFkZCBvdGhlciBjb250cm9sbGVyIHZhbHVlcyBhcyBuZWVkZWRcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxBbmFseXNpc0NvbnRyb2xsZXJDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt2YWx1ZX0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9BbmFseXNpc0NvbnRyb2xsZXJDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcblxuLy8gQ3VzdG9tIGhvb2sgZm9yIHVzaW5nIHRoZSBjb250ZXh0XG5leHBvcnQgY29uc3QgdXNlQW5hbHlzaXNDb250cm9sbGVyID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChBbmFseXNpc0NvbnRyb2xsZXJDb250ZXh0KTtcbiAgaWYgKGNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXNlQW5hbHlzaXNDb250cm9sbGVyIG11c3QgYmUgdXNlZCB3aXRoaW4gYW4gQW5hbHlzaXNDb250cm9sbGVyUHJvdmlkZXInKTtcbiAgfVxuICByZXR1cm4gY29udGV4dDtcbn07Il0sIm5hbWVzIjpbIlJlYWN0IiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VTdGF0ZSIsInVzZVJlZiIsIkFuYWx5c2lzQ29udHJvbGxlckNvbnRleHQiLCJ1bmRlZmluZWQiLCJBbmFseXNpc0NvbnRyb2xsZXJQcm92aWRlciIsImNoaWxkcmVuIiwiZ3JpZEFuYWx5c2lzUmVmIiwic2hvd01hcmtlckxvY2F0aW9uc01vZGFsIiwic2V0U2hvd01hcmtlckxvY2F0aW9uc01vZGFsIiwidmFsdWUiLCJQcm92aWRlciIsInVzZUFuYWx5c2lzQ29udHJvbGxlciIsImNvbnRleHQiLCJFcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/context/AnalysisControllerContext.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/context/AreaOfOpsContext.tsx":
/*!**********************************************!*\
  !*** ./src/app/context/AreaOfOpsContext.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AreaOfOpsProvider: () => (/* binding */ AreaOfOpsProvider),\n/* harmony export */   useAreaOfOpsContext: () => (/* binding */ useAreaOfOpsContext)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _mapcontext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _components_Analyses_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/Analyses/Utils/GridAnalysisCore */ \"(ssr)/./src/app/components/Analyses/Utils/GridAnalysisCore.ts\");\n/* harmony import */ var _AnalysisControllerContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AnalysisControllerContext */ \"(ssr)/./src/app/context/AnalysisControllerContext.tsx\");\n// src/context/AreaOfOpsContext.tsx\n/* __next_internal_client_entry_do_not_use__ AreaOfOpsProvider,useAreaOfOpsContext auto */ \n\n\n\n\nconst AreaOfOpsContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\n// Add this at the top of AreaOfOpsContext.tsx, outside of any component\nconst createError = (message, code, details)=>{\n    const error = new Error(message);\n    error.code = code;\n    error.details = details;\n    return error;\n};\nconst AreaOfOpsProvider = ({ children })=>{\n    const { map, elevationService } = (0,_mapcontext__WEBPACK_IMPORTED_MODULE_2__.useMapContext)();\n    const { gridAnalysisRef } = (0,_AnalysisControllerContext__WEBPACK_IMPORTED_MODULE_4__.useAnalysisController)();\n    // State for AO\n    const [aoGeometry, setAoGeometry] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [aoTerrainGrid, setAoTerrainGrid] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [bufferDistance, setBufferDistance] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(500);\n    // State for terrain analysis\n    const [terrainAnalysisResult, setTerrainAnalysisResult] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isAnalyzing, setIsAnalyzing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [analysisProgress, setAnalysisProgress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [analysisError, setAnalysisError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const abortAnalysisRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    /**\n * Analyzes the AO terrain grid for elevation data\n * Delegates to GridAnalysisController while maintaining compatible interface\n */ const analyzeTerrainElevation = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AreaOfOpsProvider.useCallback[analyzeTerrainElevation]\": async (referenceAltitude = 120)=>{\n            if (!aoTerrainGrid || aoTerrainGrid.length === 0) {\n                setAnalysisError(\"No terrain grid available for analysis\");\n                return null;\n            }\n            if (!gridAnalysisRef.current) {\n                console.warn(\"GridAnalysisController not available, falling back to direct analysis\");\n                // Fall back to original implementation if controller not available\n                try {\n                    setIsAnalyzing(true);\n                    setAnalysisProgress(0);\n                    setAnalysisError(null);\n                    abortAnalysisRef.current = false;\n                    // Use grid analysis core directly as fallback\n                    const result = await (0,_components_Analyses_Utils_GridAnalysisCore__WEBPACK_IMPORTED_MODULE_3__.analyzeTerrainGrid)(aoTerrainGrid, {\n                        batchSize: 1000,\n                        referenceAltitude,\n                        onProgress: {\n                            \"AreaOfOpsProvider.useCallback[analyzeTerrainElevation]\": (progress)=>{\n                                setAnalysisProgress(progress);\n                                return abortAnalysisRef.current;\n                            }\n                        }[\"AreaOfOpsProvider.useCallback[analyzeTerrainElevation]\"]\n                    });\n                    if (abortAnalysisRef.current) return null;\n                    const analysisResult = {\n                        highestElevation: result.highestElevation,\n                        lowestElevation: result.lowestElevation,\n                        averageElevation: result.averageElevation,\n                        elevationDistribution: result.elevationDistribution,\n                        sampleElevations: result.elevations,\n                        gridCellCount: aoTerrainGrid.length,\n                        referenceAltitude\n                    };\n                    setTerrainAnalysisResult(analysisResult);\n                    return analysisResult;\n                } catch (error) {\n                    setAnalysisError(error instanceof Error ? error.message : String(error));\n                    return null;\n                } finally{\n                    setIsAnalyzing(false);\n                    setAnalysisProgress(0);\n                }\n            }\n            try {\n                setIsAnalyzing(true);\n                setAnalysisProgress(0);\n                setAnalysisError(null);\n                abortAnalysisRef.current = false;\n                // Use the controller instead\n                const analysisResults = await gridAnalysisRef.current.analyzeTerrainGrid(aoTerrainGrid, {\n                    referenceAltitude,\n                    onProgress: {\n                        \"AreaOfOpsProvider.useCallback[analyzeTerrainElevation]\": (progress)=>{\n                            setAnalysisProgress(progress);\n                            return abortAnalysisRef.current;\n                        }\n                    }[\"AreaOfOpsProvider.useCallback[analyzeTerrainElevation]\"]\n                });\n                if (abortAnalysisRef.current) return null;\n                // Convert controller results to expected TerrainAnalysisResult format\n                const terrainStats = analysisResults.stats.terrainStats;\n                if (!terrainStats) {\n                    throw new Error(\"Missing terrain statistics in analysis results\");\n                }\n                const analysisResult = {\n                    highestElevation: terrainStats.highestElevation,\n                    lowestElevation: terrainStats.lowestElevation,\n                    averageElevation: terrainStats.averageElevation,\n                    elevationDistribution: terrainStats.elevationDistribution,\n                    sampleElevations: terrainStats.sampleElevations || [],\n                    gridCellCount: aoTerrainGrid.length,\n                    referenceAltitude\n                };\n                setTerrainAnalysisResult(analysisResult);\n                return analysisResult;\n            } catch (error) {\n                setAnalysisError(error instanceof Error ? error.message : String(error));\n                return null;\n            } finally{\n                setIsAnalyzing(false);\n                setAnalysisProgress(0);\n            }\n        }\n    }[\"AreaOfOpsProvider.useCallback[analyzeTerrainElevation]\"], [\n        aoTerrainGrid,\n        gridAnalysisRef\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AreaOfOpsContext.Provider, {\n        value: {\n            aoGeometry,\n            setAoGeometry,\n            aoTerrainGrid,\n            setAoTerrainGrid,\n            bufferDistance,\n            setBufferDistance,\n            // New terrain analysis properties\n            terrainAnalysisResult,\n            analyzeTerrainElevation,\n            isAnalyzing,\n            analysisProgress,\n            analysisError\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/context/AreaOfOpsContext.tsx\",\n        lineNumber: 169,\n        columnNumber: 5\n    }, undefined);\n};\nconst useAreaOfOpsContext = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AreaOfOpsContext);\n    if (!context) {\n        throw new Error(\"useAreaOfOpsContext must be used within an AreaOfOpsProvider\");\n    }\n    return context;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbnRleHQvQXJlYU9mT3BzQ29udGV4dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsbUNBQW1DOztBQUVnRTtBQUN0RDtBQUNzQztBQUNmO0FBa0NwRSxNQUFNUyxpQ0FBbUJSLG9EQUFhQSxDQUFtQ1M7QUFFekUsd0VBQXdFO0FBQ3hFLE1BQU1DLGNBQWMsQ0FBQ0MsU0FBaUJDLE1BQWVDO0lBQ25ELE1BQU1DLFFBQVEsSUFBSUMsTUFBTUo7SUFDdkJHLE1BQWNGLElBQUksR0FBR0E7SUFDckJFLE1BQWNELE9BQU8sR0FBR0E7SUFDekIsT0FBT0M7QUFDVDtBQUVPLE1BQU1FLG9CQUFvQixDQUFDLEVBQUVDLFFBQVEsRUFBMkI7SUFDckUsTUFBTSxFQUFFQyxHQUFHLEVBQUVDLGdCQUFnQixFQUFFLEdBQUdkLDBEQUFhQTtJQUMvQyxNQUFNLEVBQUVlLGVBQWUsRUFBRSxHQUFHYixpRkFBcUJBO0lBRWpELGVBQWU7SUFDZixNQUFNLENBQUNjLFlBQVlDLGNBQWMsR0FBR3BCLCtDQUFRQSxDQUFtQztJQUMvRSxNQUFNLENBQUNxQixlQUFlQyxpQkFBaUIsR0FBR3RCLCtDQUFRQSxDQUFvQjtJQUN0RSxNQUFNLENBQUN1QixnQkFBZ0JDLGtCQUFrQixHQUFHeEIsK0NBQVFBLENBQVM7SUFFN0QsNkJBQTZCO0lBQzdCLE1BQU0sQ0FBQ3lCLHVCQUF1QkMseUJBQXlCLEdBQUcxQiwrQ0FBUUEsQ0FBK0I7SUFDakcsTUFBTSxDQUFDMkIsYUFBYUMsZUFBZSxHQUFHNUIsK0NBQVFBLENBQVU7SUFDeEQsTUFBTSxDQUFDNkIsa0JBQWtCQyxvQkFBb0IsR0FBRzlCLCtDQUFRQSxDQUFTO0lBQ2pFLE1BQU0sQ0FBQytCLGVBQWVDLGlCQUFpQixHQUFHaEMsK0NBQVFBLENBQWdCO0lBQ2xFLE1BQU1pQyxtQkFBbUIvQiw2Q0FBTUEsQ0FBVTtJQUUzQzs7O0NBR0MsR0FDRCxNQUFNZ0MsMEJBQTBCakMsa0RBQVdBO2tFQUFDLE9B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REFBVUEsQ0FBQ087SUFDM0IsSUFBSSxDQUFDcUQsU0FBUztRQUNaLE1BQU0sSUFBSTlDLE1BQU07SUFDbEI7SUFDQSxPQUFPOEM7QUFDVCxFQUFFIiwic291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9jb250ZXh0L0FyZWFPZk9wc0NvbnRleHQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb250ZXh0L0FyZWFPZk9wc0NvbnRleHQudHN4XG5cInVzZSBjbGllbnRcIjtcbmltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgUmVhY3ROb2RlLCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VNYXBDb250ZXh0IH0gZnJvbSBcIi4vbWFwY29udGV4dFwiO1xuaW1wb3J0IHsgYW5hbHl6ZVRlcnJhaW5HcmlkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQW5hbHlzZXMvVXRpbHMvR3JpZEFuYWx5c2lzQ29yZVwiO1xuaW1wb3J0IHsgdXNlQW5hbHlzaXNDb250cm9sbGVyIH0gZnJvbSBcIi4vQW5hbHlzaXNDb250cm9sbGVyQ29udGV4dFwiO1xuXG4vLyBGSVhFRDogSW1wb3J0IEdyaWRDZWxsIGZyb20gdW5pZmllZCBsb2NhdGlvbiAtIHJlbW92ZXMgdHlwZSBjb25mbGljdHNcbmltcG9ydCB7IEdyaWRDZWxsIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQW5hbHlzZXMvVHlwZXMvR3JpZEFuYWx5c2lzVHlwZXNcIjtcblxuLyoqXG4gKiBUZXJyYWluIGFuYWx5c2lzIHJlc3VsdCBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUZXJyYWluQW5hbHlzaXNSZXN1bHQge1xuICBoaWdoZXN0RWxldmF0aW9uOiBudW1iZXI7XG4gIGxvd2VzdEVsZXZhdGlvbjogbnVtYmVyO1xuICBhdmVyYWdlRWxldmF0aW9uOiBudW1iZXI7XG4gIGVsZXZhdGlvbkRpc3RyaWJ1dGlvbjogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgc2FtcGxlRWxldmF0aW9uczogbnVtYmVyW107XG4gIGdyaWRDZWxsQ291bnQ6IG51bWJlcjtcbiAgcmVmZXJlbmNlQWx0aXR1ZGU6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIEFyZWFPZk9wc0NvbnRleHRUeXBlIHtcbiAgYW9HZW9tZXRyeTogR2VvSlNPTi5GZWF0dXJlQ29sbGVjdGlvbiB8IG51bGw7XG4gIHNldEFvR2VvbWV0cnk6IChnZW9tZXRyeTogR2VvSlNPTi5GZWF0dXJlQ29sbGVjdGlvbiB8IG51bGwpID0+IHZvaWQ7XG4gIGFvVGVycmFpbkdyaWQ6IEdyaWRDZWxsW10gfCBudWxsO1xuICBzZXRBb1RlcnJhaW5HcmlkOiAoZ3JpZDogR3JpZENlbGxbXSB8IG51bGwpID0+IHZvaWQ7XG4gIGJ1ZmZlckRpc3RhbmNlOiBudW1iZXI7XG4gIHNldEJ1ZmZlckRpc3RhbmNlOiAoZGlzdGFuY2U6IG51bWJlcikgPT4gdm9pZDtcbiAgXG4gIC8vIE5ldyB0ZXJyYWluIGFuYWx5c2lzIHByb3BlcnRpZXNcbiAgdGVycmFpbkFuYWx5c2lzUmVzdWx0OiBUZXJyYWluQW5hbHlzaXNSZXN1bHQgfCBudWxsO1xuICBhbmFseXplVGVycmFpbkVsZXZhdGlvbjogKHJlZmVyZW5jZUFsdGl0dWRlPzogbnVtYmVyKSA9PiBQcm9taXNlPFRlcnJhaW5BbmFseXNpc1Jlc3VsdCB8IG51bGw+O1xuICBpc0FuYWx5emluZzogYm9vbGVhbjtcbiAgYW5hbHlzaXNQcm9ncmVzczogbnVtYmVyO1xuICBhbmFseXNpc0Vycm9yOiBzdHJpbmcgfCBudWxsO1xufVxuXG5jb25zdCBBcmVhT2ZPcHNDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxBcmVhT2ZPcHNDb250ZXh0VHlwZSB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcblxuLy8gQWRkIHRoaXMgYXQgdGhlIHRvcCBvZiBBcmVhT2ZPcHNDb250ZXh0LnRzeCwgb3V0c2lkZSBvZiBhbnkgY29tcG9uZW50XG5jb25zdCBjcmVhdGVFcnJvciA9IChtZXNzYWdlOiBzdHJpbmcsIGNvZGU/OiBzdHJpbmcsIGRldGFpbHM/OiBhbnkpOiBFcnJvciA9PiB7XG4gIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAoZXJyb3IgYXMgYW55KS5jb2RlID0gY29kZTtcbiAgKGVycm9yIGFzIGFueSkuZGV0YWlscyA9IGRldGFpbHM7XG4gIHJldHVybiBlcnJvcjtcbn07XG5cbmV4cG9ydCBjb25zdCBBcmVhT2ZPcHNQcm92aWRlciA9ICh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0Tm9kZSB9KSA9PiB7XG4gIGNvbnN0IHsgbWFwLCBlbGV2YXRpb25TZXJ2aWNlIH0gPSB1c2VNYXBDb250ZXh0KCk7XG4gIGNvbnN0IHsgZ3JpZEFuYWx5c2lzUmVmIH0gPSB1c2VBbmFseXNpc0NvbnRyb2xsZXIoKTtcbiAgXG4gIC8vIFN0YXRlIGZvciBBT1xuICBjb25zdCBbYW9HZW9tZXRyeSwgc2V0QW9HZW9tZXRyeV0gPSB1c2VTdGF0ZTxHZW9KU09OLkZlYXR1cmVDb2xsZWN0aW9uIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFthb1RlcnJhaW5HcmlkLCBzZXRBb1RlcnJhaW5HcmlkXSA9IHVzZVN0YXRlPEdyaWRDZWxsW10gfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2J1ZmZlckRpc3RhbmNlLCBzZXRCdWZmZXJEaXN0YW5jZV0gPSB1c2VTdGF0ZTxudW1iZXI+KDUwMCk7XG4gIFxuICAvLyBTdGF0ZSBmb3IgdGVycmFpbiBhbmFseXNpc1xuICBjb25zdCBbdGVycmFpbkFuYWx5c2lzUmVzdWx0LCBzZXRUZXJyYWluQW5hbHlzaXNSZXN1bHRdID0gdXNlU3RhdGU8VGVycmFpbkFuYWx5c2lzUmVzdWx0IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0FuYWx5emluZywgc2V0SXNBbmFseXppbmddID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICBjb25zdCBbYW5hbHlzaXNQcm9ncmVzcywgc2V0QW5hbHlzaXNQcm9ncmVzc10gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xuICBjb25zdCBbYW5hbHlzaXNFcnJvciwgc2V0QW5hbHlzaXNFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgYWJvcnRBbmFseXNpc1JlZiA9IHVzZVJlZjxib29sZWFuPihmYWxzZSk7XG5cbi8qKlxuICogQW5hbHl6ZXMgdGhlIEFPIHRlcnJhaW4gZ3JpZCBmb3IgZWxldmF0aW9uIGRhdGFcbiAqIERlbGVnYXRlcyB0byBHcmlkQW5hbHlzaXNDb250cm9sbGVyIHdoaWxlIG1haW50YWluaW5nIGNvbXBhdGlibGUgaW50ZXJmYWNlXG4gKi9cbmNvbnN0IGFuYWx5emVUZXJyYWluRWxldmF0aW9uID0gdXNlQ2FsbGJhY2soYXN5bmMgKHJlZmVyZW5jZUFsdGl0dWRlOiBudW1iZXIgPSAxMjApOiBQcm9taXNlPFRlcnJhaW5BbmFseXNpc1Jlc3VsdCB8IG51bGw+ID0+IHtcbiAgaWYgKCFhb1RlcnJhaW5HcmlkIHx8IGFvVGVycmFpbkdyaWQubGVuZ3RoID09PSAwKSB7XG4gICAgc2V0QW5hbHlzaXNFcnJvcihcIk5vIHRlcnJhaW4gZ3JpZCBhdmFpbGFibGUgZm9yIGFuYWx5c2lzXCIpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIFxuICBpZiAoIWdyaWRBbmFseXNpc1JlZi5jdXJyZW50KSB7XG4gICAgY29uc29sZS53YXJuKFwiR3JpZEFuYWx5c2lzQ29udHJvbGxlciBub3QgYXZhaWxhYmxlLCBmYWxsaW5nIGJhY2sgdG8gZGlyZWN0IGFuYWx5c2lzXCIpO1xuICAgIC8vIEZhbGwgYmFjayB0byBvcmlnaW5hbCBpbXBsZW1lbnRhdGlvbiBpZiBjb250cm9sbGVyIG5vdCBhdmFpbGFibGVcbiAgICB0cnkge1xuICAgICAgc2V0SXNBbmFseXppbmcodHJ1ZSk7XG4gICAgICBzZXRBbmFseXNpc1Byb2dyZXNzKDApO1xuICAgICAgc2V0QW5hbHlzaXNFcnJvcihudWxsKTtcbiAgICAgIGFib3J0QW5hbHlzaXNSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgXG4gICAgICAvLyBVc2UgZ3JpZCBhbmFseXNpcyBjb3JlIGRpcmVjdGx5IGFzIGZhbGxiYWNrXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbmFseXplVGVycmFpbkdyaWQoXG4gICAgICAgIGFvVGVycmFpbkdyaWQsXG4gICAgICAgIHtcbiAgICAgICAgICBiYXRjaFNpemU6IDEwMDAsXG4gICAgICAgICAgcmVmZXJlbmNlQWx0aXR1ZGUsXG4gICAgICAgICAgb25Qcm9ncmVzczogKHByb2dyZXNzOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIHNldEFuYWx5c2lzUHJvZ3Jlc3MocHJvZ3Jlc3MpO1xuICAgICAgICAgICAgcmV0dXJuIGFib3J0QW5hbHlzaXNSZWYuY3VycmVudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmIChhYm9ydEFuYWx5c2lzUmVmLmN1cnJlbnQpIHJldHVybiBudWxsO1xuICAgICAgXG4gICAgICBjb25zdCBhbmFseXNpc1Jlc3VsdDogVGVycmFpbkFuYWx5c2lzUmVzdWx0ID0ge1xuICAgICAgICBoaWdoZXN0RWxldmF0aW9uOiByZXN1bHQuaGlnaGVzdEVsZXZhdGlvbixcbiAgICAgICAgbG93ZXN0RWxldmF0aW9uOiByZXN1bHQubG93ZXN0RWxldmF0aW9uLFxuICAgICAgICBhdmVyYWdlRWxldmF0aW9uOiByZXN1bHQuYXZlcmFnZUVsZXZhdGlvbixcbiAgICAgICAgZWxldmF0aW9uRGlzdHJpYnV0aW9uOiByZXN1bHQuZWxldmF0aW9uRGlzdHJpYnV0aW9uLFxuICAgICAgICBzYW1wbGVFbGV2YXRpb25zOiByZXN1bHQuZWxldmF0aW9ucyxcbiAgICAgICAgZ3JpZENlbGxDb3VudDogYW9UZXJyYWluR3JpZC5sZW5ndGgsXG4gICAgICAgIHJlZmVyZW5jZUFsdGl0dWRlXG4gICAgICB9O1xuICAgICAgXG4gICAgICBzZXRUZXJyYWluQW5hbHlzaXNSZXN1bHQoYW5hbHlzaXNSZXN1bHQpO1xuICAgICAgcmV0dXJuIGFuYWx5c2lzUmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBzZXRBbmFseXNpc0Vycm9yKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNBbmFseXppbmcoZmFsc2UpO1xuICAgICAgc2V0QW5hbHlzaXNQcm9ncmVzcygwKTtcbiAgICB9XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgc2V0SXNBbmFseXppbmcodHJ1ZSk7XG4gICAgc2V0QW5hbHlzaXNQcm9ncmVzcygwKTtcbiAgICBzZXRBbmFseXNpc0Vycm9yKG51bGwpO1xuICAgIGFib3J0QW5hbHlzaXNSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgIFxuICAgIC8vIFVzZSB0aGUgY29udHJvbGxlciBpbnN0ZWFkXG4gICAgY29uc3QgYW5hbHlzaXNSZXN1bHRzID0gYXdhaXQgZ3JpZEFuYWx5c2lzUmVmLmN1cnJlbnQuYW5hbHl6ZVRlcnJhaW5HcmlkKFxuICAgICAgYW9UZXJyYWluR3JpZCxcbiAgICAgIHtcbiAgICAgICAgcmVmZXJlbmNlQWx0aXR1ZGUsXG4gICAgICAgIG9uUHJvZ3Jlc3M6IChwcm9ncmVzczogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgc2V0QW5hbHlzaXNQcm9ncmVzcyhwcm9ncmVzcyk7XG4gICAgICAgICAgcmV0dXJuIGFib3J0QW5hbHlzaXNSZWYuY3VycmVudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gICAgXG4gICAgaWYgKGFib3J0QW5hbHlzaXNSZWYuY3VycmVudCkgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgLy8gQ29udmVydCBjb250cm9sbGVyIHJlc3VsdHMgdG8gZXhwZWN0ZWQgVGVycmFpbkFuYWx5c2lzUmVzdWx0IGZvcm1hdFxuICAgIGNvbnN0IHRlcnJhaW5TdGF0cyA9IGFuYWx5c2lzUmVzdWx0cy5zdGF0cy50ZXJyYWluU3RhdHM7XG4gICAgaWYgKCF0ZXJyYWluU3RhdHMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgdGVycmFpbiBzdGF0aXN0aWNzIGluIGFuYWx5c2lzIHJlc3VsdHNcIik7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGFuYWx5c2lzUmVzdWx0OiBUZXJyYWluQW5hbHlzaXNSZXN1bHQgPSB7XG4gICAgICBoaWdoZXN0RWxldmF0aW9uOiB0ZXJyYWluU3RhdHMuaGlnaGVzdEVsZXZhdGlvbixcbiAgICAgIGxvd2VzdEVsZXZhdGlvbjogdGVycmFpblN0YXRzLmxvd2VzdEVsZXZhdGlvbixcbiAgICAgIGF2ZXJhZ2VFbGV2YXRpb246IHRlcnJhaW5TdGF0cy5hdmVyYWdlRWxldmF0aW9uLFxuICAgICAgZWxldmF0aW9uRGlzdHJpYnV0aW9uOiB0ZXJyYWluU3RhdHMuZWxldmF0aW9uRGlzdHJpYnV0aW9uLFxuICAgICAgc2FtcGxlRWxldmF0aW9uczogdGVycmFpblN0YXRzLnNhbXBsZUVsZXZhdGlvbnMgfHwgW10sXG4gICAgICBncmlkQ2VsbENvdW50OiBhb1RlcnJhaW5HcmlkLmxlbmd0aCxcbiAgICAgIHJlZmVyZW5jZUFsdGl0dWRlXG4gICAgfTtcbiAgICBcbiAgICBzZXRUZXJyYWluQW5hbHlzaXNSZXN1bHQoYW5hbHlzaXNSZXN1bHQpO1xuICAgIHJldHVybiBhbmFseXNpc1Jlc3VsdDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBzZXRBbmFseXNpc0Vycm9yKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZmluYWxseSB7XG4gICAgc2V0SXNBbmFseXppbmcoZmFsc2UpO1xuICAgIHNldEFuYWx5c2lzUHJvZ3Jlc3MoMCk7XG4gIH1cbn0sIFthb1RlcnJhaW5HcmlkLCBncmlkQW5hbHlzaXNSZWZdKTtcblxuICByZXR1cm4gKFxuICAgIDxBcmVhT2ZPcHNDb250ZXh0LlByb3ZpZGVyXG4gICAgICB2YWx1ZT17e1xuICAgICAgICBhb0dlb21ldHJ5LFxuICAgICAgICBzZXRBb0dlb21ldHJ5LFxuICAgICAgICBhb1RlcnJhaW5HcmlkLFxuICAgICAgICBzZXRBb1RlcnJhaW5HcmlkLFxuICAgICAgICBidWZmZXJEaXN0YW5jZSxcbiAgICAgICAgc2V0QnVmZmVyRGlzdGFuY2UsXG4gICAgICAgIFxuICAgICAgICAvLyBOZXcgdGVycmFpbiBhbmFseXNpcyBwcm9wZXJ0aWVzXG4gICAgICAgIHRlcnJhaW5BbmFseXNpc1Jlc3VsdCxcbiAgICAgICAgYW5hbHl6ZVRlcnJhaW5FbGV2YXRpb24sXG4gICAgICAgIGlzQW5hbHl6aW5nLFxuICAgICAgICBhbmFseXNpc1Byb2dyZXNzLFxuICAgICAgICBhbmFseXNpc0Vycm9yLFxuICAgICAgfX1cbiAgICA+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9BcmVhT2ZPcHNDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IHVzZUFyZWFPZk9wc0NvbnRleHQgPSAoKSA9PiB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KEFyZWFPZk9wc0NvbnRleHQpO1xuICBpZiAoIWNvbnRleHQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1c2VBcmVhT2ZPcHNDb250ZXh0IG11c3QgYmUgdXNlZCB3aXRoaW4gYW4gQXJlYU9mT3BzUHJvdmlkZXJcIik7XG4gIH1cbiAgcmV0dXJuIGNvbnRleHQ7XG59OyJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZVJlZiIsInVzZU1hcENvbnRleHQiLCJhbmFseXplVGVycmFpbkdyaWQiLCJ1c2VBbmFseXNpc0NvbnRyb2xsZXIiLCJBcmVhT2ZPcHNDb250ZXh0IiwidW5kZWZpbmVkIiwiY3JlYXRlRXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsImRldGFpbHMiLCJlcnJvciIsIkVycm9yIiwiQXJlYU9mT3BzUHJvdmlkZXIiLCJjaGlsZHJlbiIsIm1hcCIsImVsZXZhdGlvblNlcnZpY2UiLCJncmlkQW5hbHlzaXNSZWYiLCJhb0dlb21ldHJ5Iiwic2V0QW9HZW9tZXRyeSIsImFvVGVycmFpbkdyaWQiLCJzZXRBb1RlcnJhaW5HcmlkIiwiYnVmZmVyRGlzdGFuY2UiLCJzZXRCdWZmZXJEaXN0YW5jZSIsInRlcnJhaW5BbmFseXNpc1Jlc3VsdCIsInNldFRlcnJhaW5BbmFseXNpc1Jlc3VsdCIsImlzQW5hbHl6aW5nIiwic2V0SXNBbmFseXppbmciLCJhbmFseXNpc1Byb2dyZXNzIiwic2V0QW5hbHlzaXNQcm9ncmVzcyIsImFuYWx5c2lzRXJyb3IiLCJzZXRBbmFseXNpc0Vycm9yIiwiYWJvcnRBbmFseXNpc1JlZiIsImFuYWx5emVUZXJyYWluRWxldmF0aW9uIiwicmVmZXJlbmNlQWx0aXR1ZGUiLCJsZW5ndGgiLCJjdXJyZW50IiwiY29uc29sZSIsIndhcm4iLCJyZXN1bHQiLCJiYXRjaFNpemUiLCJvblByb2dyZXNzIiwicHJvZ3Jlc3MiLCJhbmFseXNpc1Jlc3VsdCIsImhpZ2hlc3RFbGV2YXRpb24iLCJsb3dlc3RFbGV2YXRpb24iLCJhdmVyYWdlRWxldmF0aW9uIiwiZWxldmF0aW9uRGlzdHJpYnV0aW9uIiwic2FtcGxlRWxldmF0aW9ucyIsImVsZXZhdGlvbnMiLCJncmlkQ2VsbENvdW50IiwiU3RyaW5nIiwiYW5hbHlzaXNSZXN1bHRzIiwidGVycmFpblN0YXRzIiwic3RhdHMiLCJQcm92aWRlciIsInZhbHVlIiwidXNlQXJlYU9mT3BzQ29udGV4dCIsImNvbnRleHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/context/AreaOfOpsContext.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/context/ChecklistContext.tsx":
/*!**********************************************!*\
  !*** ./src/app/context/ChecklistContext.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChecklistProvider: () => (/* binding */ ChecklistProvider),\n/* harmony export */   useChecklistContext: () => (/* binding */ useChecklistContext)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ ChecklistProvider,useChecklistContext auto */ \n\nconst ChecklistContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\n/**\n * Mapping of analysis IDs to checklist steps\n * Static configuration that doesn't depend on component state\n */ const analysisToChecklistSteps = {\n    terrainProfile: [\n        {\n            label: 'Run Terrain Profile Analysis in AO',\n            action: 'Click the \"Analyse Terrain Profile in AO\" button under Terrain Analysis Tools',\n            target: {\n                component: 'TerrainAnalysisCard',\n                action: 'analyseTerrainInAO'\n            }\n        }\n    ],\n    observerVsTerrain: [\n        {\n            label: 'Place Observer Marker',\n            action: 'Click the \"Add Observer\" button on the map and select a location',\n            target: {\n                component: 'MarkerControls',\n                action: 'addObserver'\n            }\n        },\n        {\n            label: 'Run Observer vs Terrain Analysis',\n            action: 'Click the \"Analyse Terrain Profile in AO\" button under Visibility Analysis Tools with Observer marker placed',\n            target: {\n                component: 'AnalysisDashboard',\n                action: 'analyseObserverVsTerrain'\n            }\n        }\n    ],\n    gcsRepeaterVsTerrain: [\n        {\n            label: 'Place GCS or Repeater Marker',\n            action: 'Click the \"Add Ground Station\" or \"Add Repeater\" button on the map',\n            target: {\n                component: 'MarkerControls',\n                action: 'addGCSorRepeater'\n            }\n        },\n        {\n            label: 'Run GCS/Repeater vs Terrain Analysis',\n            action: 'Click the \"Analyse Terrain Profile in AO\" button under Visibility Analysis Tools with GCS/Repeater marker placed',\n            target: {\n                component: 'AnalysisDashboard',\n                action: 'analyseGCSRepeaterVsTerrain'\n            }\n        }\n    ],\n    powerline: [\n        {\n            label: 'Toggle Powerlines',\n            action: 'Click the \"Show Powerlines\" button under Terrain Analysis Tools',\n            target: {\n                component: 'TerrainAnalysisCard',\n                action: 'togglePowerlines'\n            }\n        }\n    ],\n    airspace: [\n        {\n            label: 'Toggle Airspace Overlay',\n            action: 'Toggle Airspace Overlay',\n            target: {\n                component: 'LayerControls',\n                action: 'toggleAirspace'\n            }\n        }\n    ],\n    observerToDrone: [\n        {\n            label: 'Place Observer Marker',\n            action: 'Click the \"Add Observer\" button on the map and select a location',\n            target: {\n                component: 'MarkerControls',\n                action: 'addObserver'\n            }\n        },\n        {\n            label: 'Run Observer to Drone Analysis',\n            action: 'Click the \"Station Analysis\" section and run the Observer analysis',\n            target: {\n                component: 'AnalysisDashboard',\n                action: 'observerToDrone'\n            }\n        }\n    ],\n    antennaToDrone: [\n        {\n            label: 'Place GCS or Repeater Marker',\n            action: 'Click the \"Add Ground Station\" or \"Add Repeater\" button on the map',\n            target: {\n                component: 'MarkerControls',\n                action: 'addGCSorRepeater'\n            }\n        },\n        {\n            label: 'Run Antenna to Drone Analysis',\n            action: 'Click the \"Station Analysis\" section and run the GCS or Repeater analysis',\n            target: {\n                component: 'AnalysisDashboard',\n                action: 'antennaToDrone'\n            }\n        }\n    ],\n    treeHeights: [\n        {\n            label: 'Show Tree Heights',\n            action: 'Click the \"Toggle Tree Heights\" button under Terrain Analysis Tools',\n            target: {\n                component: 'TerrainAnalysisDashboard',\n                action: 'toggleTreeHeights'\n            }\n        }\n    ],\n    mobileTowerCoverage: [\n        {\n            label: 'Show Mobile Tower Coverage',\n            action: 'Click the \"Toggle Mobile Towers\" button under Visibility Analysis Tools',\n            target: {\n                component: 'VisibilityAnalysisDashboard',\n                action: 'showMobileTowers'\n            }\n        }\n    ],\n    antennaToAntenna: [\n        {\n            label: 'Place Two Markers (GCS/Repeater)',\n            action: 'Click the \"Add Ground Station\" and \"Add Repeater\" buttons on the map',\n            target: {\n                component: 'MarkerControls',\n                action: 'addGCSorRepeater'\n            }\n        },\n        {\n            label: 'Run Antenna to Antenna Analysis',\n            action: 'Click the \"Station-to-Station LOS\" section and run the analysis',\n            target: {\n                component: 'AnalysisDashboard',\n                action: 'antennaToAntenna'\n            }\n        }\n    ]\n};\n/**\n * Mapping of checklist actions to MapSidePanel names\n * Static configuration that doesn't depend on component state\n */ const actionToPanelMap = {\n    analyseTerrainInAO: 'terrain',\n    analyseObserverVsTerrain: 'los',\n    analyseGCSRepeaterVsTerrain: 'los',\n    togglePowerlines: 'terrain',\n    addObserver: null,\n    addGCSorRepeater: null,\n    uploadFlightPlan: 'terrain',\n    openLayerControls: null,\n    toggleAirspace: 'terrain',\n    observerToDrone: 'los',\n    antennaToDrone: 'los',\n    antennaToAntenna: 'los',\n    toggleTreeHeights: 'terrain',\n    showMobileTowers: 'los'\n};\n/**\n * Provides checklist state and methods\n * @param children - React components to render within the provider\n */ const ChecklistProvider = ({ children })=>{\n    const [checks, setChecks] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [guidedTarget, setGuidedTarget] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [highlightMarkers, setHighlightMarkers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    /**\n   * Adds checklist items based on selected analyses\n   * @param analyses - Array of analysis IDs from AnalysisWizard\n   */ const addChecks = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChecklistProvider.useCallback[addChecks]\": (analyses)=>{\n            const newChecks = analyses.filter({\n                \"ChecklistProvider.useCallback[addChecks].newChecks\": (id)=>analysisToChecklistSteps[id]\n            }[\"ChecklistProvider.useCallback[addChecks].newChecks\"]) // Ensure valid analysis IDs\n            .flatMap({\n                \"ChecklistProvider.useCallback[addChecks].newChecks\": (analysisId)=>{\n                    const steps = analysisToChecklistSteps[analysisId];\n                    return steps.map({\n                        \"ChecklistProvider.useCallback[addChecks].newChecks\": (step, index)=>({\n                                id: `${analysisId}-${index}`,\n                                group: analysisId,\n                                ...step,\n                                status: 'pending'\n                            })\n                    }[\"ChecklistProvider.useCallback[addChecks].newChecks\"]);\n                }\n            }[\"ChecklistProvider.useCallback[addChecks].newChecks\"]);\n            setChecks(newChecks);\n            console.log('[ChecklistContext] Added checks:', newChecks);\n        }\n    }[\"ChecklistProvider.useCallback[addChecks]\"], []);\n    /**\n   * Marks a checklist item as completed\n   * @param id - The ID of the check to complete\n   */ const completeCheck = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChecklistProvider.useCallback[completeCheck]\": (id)=>{\n            setChecks({\n                \"ChecklistProvider.useCallback[completeCheck]\": (prev)=>prev.map({\n                        \"ChecklistProvider.useCallback[completeCheck]\": (check)=>check.id === id ? {\n                                ...check,\n                                status: 'completed'\n                            } : check\n                    }[\"ChecklistProvider.useCallback[completeCheck]\"])\n            }[\"ChecklistProvider.useCallback[completeCheck]\"]);\n            console.log(`[ChecklistContext] Completed check: ${id}`);\n        }\n    }[\"ChecklistProvider.useCallback[completeCheck]\"], []);\n    /**\n   * Resets the checklist\n   */ const resetChecks = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChecklistProvider.useCallback[resetChecks]\": ()=>{\n            setChecks([]);\n            setGuidedTarget(null);\n            console.log('[ChecklistContext] Reset checks');\n        }\n    }[\"ChecklistProvider.useCallback[resetChecks]\"], []);\n    const contextValue = {\n        checks,\n        addChecks,\n        completeCheck,\n        resetChecks,\n        guidedTarget,\n        setGuidedTarget,\n        actionToPanelMap,\n        highlightMarkers,\n        setHighlightMarkers\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ChecklistContext.Provider, {\n        value: contextValue,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/context/ChecklistContext.tsx\",\n        lineNumber: 230,\n        columnNumber: 5\n    }, undefined);\n};\n/**\n * Hook to access the ChecklistContext\n * @returns The ChecklistContext properties\n * @throws Error if used outside of ChecklistProvider\n */ const useChecklistContext = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ChecklistContext);\n    if (!context) {\n        throw new Error('useChecklistContext must be used within a ChecklistProvider');\n    }\n    return context;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbnRleHQvQ2hlY2tsaXN0Q29udGV4dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUMyRjtBQXNDM0YsTUFBTUssaUNBQW1CSixvREFBYUEsQ0FBb0NLO0FBRTFFOzs7Q0FHQyxHQUNELE1BQU1DLDJCQUE0RDtJQUNoRUMsZ0JBQWdCO1FBQ2Q7WUFDRUMsT0FBTztZQUNQQyxRQUFRO1lBQ1JDLFFBQVE7Z0JBQUVDLFdBQVc7Z0JBQXVCRixRQUFRO1lBQXFCO1FBQzNFO0tBQ0Q7SUFDREcsbUJBQW1CO1FBQ2pCO1lBQ0VKLE9BQU87WUFDUEMsUUFBUTtZQUNSQyxRQUFRO2dCQUFFQyxXQUFXO2dCQUFrQkYsUUFBUTtZQUFjO1FBQy9EO1FBQ0E7WUFDRUQsT0FBTztZQUNQQyxRQUFRO1lBQ1JDLFFBQVE7Z0JBQUVDLFdBQVc7Z0JBQXFCRixRQUFRO1lBQTJCO1FBQy9FO0tBQ0Q7SUFDREksc0JBQXNCO1FBQ3BCO1lBQ0VMLE9BQU87WUFDUEMsUUFBUTtZQUNSQyxRQUFRO2dCQUFFQyxXQUFXO2dCQUFrQkYsUUFBUTtZQUFtQjtRQUNwRTtRQUNBO1lBQ0VELE9BQU87WUFDUEMsUUFBUTtZQUNSQyxRQUFRO2dCQUFFQyxXQUFXO2dCQUFxQkYsUUFBUTtZQUE4QjtRQUNsRjtLQUNEO0lBQ0RLLFdBQVc7UUFDVDtZQUNFTixPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsUUFBUTtnQkFBRUMsV0FBVztnQkFBdUJGLFFBQVE7WUFBbUI7UUFDekU7S0FDRDtJQUNETSxVQUFVO1FBQ1I7WUFDRVAsT0FBTztZQUNQQyxRQUFRO1lBQ1JDLFFBQVE7Z0JBQUVDLFdBQVc7Z0JBQWlCRixRQUFRO1lBQWlCO1FBQ2pFO0tBQ0Q7SUFDRE8saUJBQWlCO1FBQ2Y7WUFDRVIsT0FBTztZQUNQQyxRQUFRO1lBQ1JDLFFBQVE7Z0JBQUVDLFdBQVc7Z0JBQWtCRixRQUFRO1lBQWM7UUFDL0Q7UUFDQTtZQUNFRCxPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsUUFBUTtnQkFBRUMsV0FBVztnQkFBcUJGLFFBQVE7WUFBa0I7UUFDdEU7S0FDRDtJQUNEUSxnQkFBZ0I7UUFDZDtZQUNFVCxPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsUUFBUTtnQkFBRUMsV0FBVztnQkFBa0JGLFFBQVE7WUFBbUI7UUFDcEU7UUFDQTtZQUNFRCxPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsUUFBUTtnQkFBRUMsV0FBVztnQkFBcUJGLFFBQVE7WUFBaUI7UUFDckU7S0FDRDtJQUNEUyxhQUFhO1FBQ1g7WUFDRVYsT0FBTztZQUNQQyxRQUFRO1lBQ1JDLFFBQVE7Z0JBQUVDLFdBQVc7Z0JBQTRCRixRQUFRO1lBQW9CO1FBQy9FO0tBQ0Q7SUFDRFUscUJBQXFCO1FBQ25CO1lBQ0VYLE9BQU87WUFDUEMsUUFBUTtZQUNSQyxRQUFRO2dCQUFFQyxXQUFXO2dCQUErQkYsUUFBUTtZQUFtQjtRQUNqRjtLQUNEO0lBQ0RXLGtCQUFrQjtRQUNoQjtZQUNFWixPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsUUFBUTtnQkFBRUMsV0FBVztnQkFBa0JGLFFBQVE7WUFBbUI7UUFDcEU7UUFDQTtZQUNFRCxPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsUUFBUTtnQkFBRUMsV0FBVztnQkFBcUJGLFFBQVE7WUFBbUI7UUFDdkU7S0FDRDtBQUNIO0FBRUE7OztDQUdDLEdBQ0QsTUFBTVksbUJBQXdFO0lBQzVFQyxvQkFBb0I7SUFDcEJDLDBCQUEwQjtJQUMxQkMsNkJBQTZCO0lBQzdCQyxrQkFBa0I7SUFDbEJDLGFBQWE7SUFDYkMsa0JBQWtCO0lBQ2xCQyxrQkFBa0I7SUFDbEJDLG1CQUFtQjtJQUNuQkMsZ0JBQWdCO0lBQ2hCZCxpQkFBaUI7SUFDakJDLGdCQUFnQjtJQUNoQkcsa0JBQWtCO0lBQ2xCVyxtQkFBbUI7SUFDbkJDLGtCQUFrQjtBQUNwQjtBQUVBOzs7Q0FHQyxHQUNNLE1BQU1DLG9CQUF1RCxDQUFDLEVBQUVDLFFBQVEsRUFBRTtJQUMvRSxNQUFNLENBQUNDLFFBQVFDLFVBQVUsR0FBR2xDLCtDQUFRQSxDQUFrQixFQUFFO0lBQ3hELE1BQU0sQ0FBQ21DLGNBQWNDLGdCQUFnQixHQUFHcEMsK0NBQVFBLENBQStDO0lBQy9GLE1BQU0sQ0FBQ3FDLGtCQUFrQkMsb0JBQW9CLEdBQUd0QywrQ0FBUUEsQ0FBQztJQUd6RDs7O0dBR0MsR0FDRCxNQUFNdUMsWUFBWXRDLGtEQUFXQTtvREFBQyxDQUFDdUM7WUFDN0IsTUFBTUMsWUFBNkJELFNBQ2hDRSxNQUFNO3NFQUFDLENBQUNDLEtBQU92Qyx3QkFBd0IsQ0FBQ3VDLEdBQUc7cUVBQUUsNEJBQTRCO2FBQ3pFQyxPQUFPO3NFQUFDLENBQUNDO29CQUNSLE1BQU1DLFFBQVExQyx3QkFBd0IsQ0FBQ3lDLFdBQVc7b0JBQ2xELE9BQU9DLE1BQU1DLEdBQUc7OEVBQUMsQ0FBQ0MsTUFBTUMsUUFBVztnQ0FDakNOLElBQUksR0FBR0UsV0FBVyxDQUFDLEVBQUVJLE9BQU87Z0NBQzVCQyxPQUFPTDtnQ0FDUCxHQUFHRyxJQUFJO2dDQUNQRyxRQUFROzRCQUNWOztnQkFDRjs7WUFDRmpCLFVBQVVPO1lBQ1ZXLFFBQVFDLEdBQUcsQ0FBQyxvQ0FBb0NaO1FBQ2xEO21EQUFHLEVBQUU7SUFFTDs7O0dBR0MsR0FDRCxNQUFNYSxnQkFBZ0JyRCxrREFBV0E7d0RBQUMsQ0FBQzBDO1lBQ2pDVDtnRUFBVSxDQUFDcUIsT0FDVEEsS0FBS1IsR0FBRzt3RUFBQyxDQUFDUyxRQUNSQSxNQUFNYixFQUFFLEtBQUtBLEtBQUs7Z0NBQUUsR0FBR2EsS0FBSztnQ0FBRUwsUUFBUTs0QkFBWSxJQUFJSzs7O1lBRzFESixRQUFRQyxHQUFHLENBQUMsQ0FBQyxvQ0FBb0MsRUFBRVYsSUFBSTtRQUN6RDt1REFBRyxFQUFFO0lBRUw7O0dBRUMsR0FDRCxNQUFNYyxjQUFjeEQsa0RBQVdBO3NEQUFDO1lBQzlCaUMsVUFBVSxFQUFFO1lBQ1pFLGdCQUFnQjtZQUNoQmdCLFFBQVFDLEdBQUcsQ0FBQztRQUNkO3FEQUFHLEVBQUU7SUFFTCxNQUFNSyxlQUFzQztRQUMxQ3pCO1FBQ0FNO1FBQ0FlO1FBQ0FHO1FBQ0F0QjtRQUNBQztRQUNBakI7UUFDQWtCO1FBQ0FDO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQ3BDLGlCQUFpQnlELFFBQVE7UUFBQ0MsT0FBT0Y7a0JBQy9CMUI7Ozs7OztBQUdQLEVBQUU7QUFFRjs7OztDQUlDLEdBQ00sTUFBTTZCLHNCQUFzQjtJQUNqQyxNQUFNQyxVQUFVL0QsaURBQVVBLENBQUNHO0lBQzNCLElBQUksQ0FBQzRELFNBQVM7UUFDWixNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFDQSxPQUFPRDtBQUNULEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbnRleHQvQ2hlY2tsaXN0Q29udGV4dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBhIHNpbmdsZSBjaGVja2xpc3Qgc3RlcFxuICovXG5pbnRlcmZhY2UgQ2hlY2tsaXN0U3RlcCB7XG4gIGxhYmVsOiBzdHJpbmc7IC8vIFVzZXItZnJpZW5kbHkgbmFtZSAoZS5nLiwgJ09wZW4gVGVycmFpbiBUb29scycpXG4gIGFjdGlvbjogc3RyaW5nOyAvLyBJbnN0cnVjdGlvbnMgKGUuZy4sICdDbGljayBvbiB0aGUgVGVycmFpbiBBbmFseXNpcyBjYXJkLi4uJylcbiAgdGFyZ2V0OiB7XG4gICAgY29tcG9uZW50OiBzdHJpbmc7IC8vIFRhcmdldCBjb21wb25lbnQgKGUuZy4sICdUb29sc0Rhc2hib2FyZCcpXG4gICAgYWN0aW9uOiBzdHJpbmc7IC8vIEFjdGlvbiBpZGVudGlmaWVyIChlLmcuLCAnb3BlblRlcnJhaW5Ub29scycpXG4gIH07XG59XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBhIHNpbmdsZSBjaGVja2xpc3QgaXRlbVxuICovXG5pbnRlcmZhY2UgQ2hlY2tsaXN0SXRlbSBleHRlbmRzIENoZWNrbGlzdFN0ZXAge1xuICBpZDogc3RyaW5nOyAvLyBVbmlxdWUgSUQgZm9yIHRoZSBzdGVwIChlLmcuLCAndGVycmFpblByb2ZpbGUtMCcpXG4gIHN0YXR1czogJ3BlbmRpbmcnIHwgJ2NvbXBsZXRlZCc7IC8vIENvbXBsZXRpb24gc3RhdHVzXG4gIGdyb3VwOiBzdHJpbmc7IC8vIEFuYWx5c2lzIGdyb3VwIChlLmcuLCAndGVycmFpblByb2ZpbGUnKVxufVxuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgQ2hlY2tsaXN0Q29udGV4dFxuICovXG5pbnRlcmZhY2UgQ2hlY2tsaXN0Q29udGV4dFByb3BzIHtcbiAgY2hlY2tzOiBDaGVja2xpc3RJdGVtW107XG4gIGFkZENoZWNrczogKGFuYWx5c2VzOiBzdHJpbmdbXSkgPT4gdm9pZDtcbiAgY29tcGxldGVDaGVjazogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHJlc2V0Q2hlY2tzOiAoKSA9PiB2b2lkO1xuICBndWlkZWRUYXJnZXQ6IHsgY29tcG9uZW50OiBzdHJpbmc7IGFjdGlvbjogc3RyaW5nIH0gfCBudWxsO1xuICBzZXRHdWlkZWRUYXJnZXQ6ICh0YXJnZXQ6IHsgY29tcG9uZW50OiBzdHJpbmc7IGFjdGlvbjogc3RyaW5nIH0gfCBudWxsKSA9PiB2b2lkO1xuICBhY3Rpb25Ub1BhbmVsTWFwOiBSZWNvcmQ8c3RyaW5nLCAndGVycmFpbicgfCAnbG9zJyB8ICdlbmVyZ3knIHwgbnVsbD47XG4gIGhpZ2hsaWdodE1hcmtlcnM6IGJvb2xlYW47XG4gIHNldEhpZ2hsaWdodE1hcmtlcnM6IChoaWdobGlnaHQ6IGJvb2xlYW4pID0+IHZvaWQ7XG59XG5cbmNvbnN0IENoZWNrbGlzdENvbnRleHQgPSBjcmVhdGVDb250ZXh0PENoZWNrbGlzdENvbnRleHRQcm9wcyB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcblxuLyoqXG4gKiBNYXBwaW5nIG9mIGFuYWx5c2lzIElEcyB0byBjaGVja2xpc3Qgc3RlcHNcbiAqIFN0YXRpYyBjb25maWd1cmF0aW9uIHRoYXQgZG9lc24ndCBkZXBlbmQgb24gY29tcG9uZW50IHN0YXRlXG4gKi9cbmNvbnN0IGFuYWx5c2lzVG9DaGVja2xpc3RTdGVwczogUmVjb3JkPHN0cmluZywgQ2hlY2tsaXN0U3RlcFtdPiA9IHtcbiAgdGVycmFpblByb2ZpbGU6IFtcbiAgICB7XG4gICAgICBsYWJlbDogJ1J1biBUZXJyYWluIFByb2ZpbGUgQW5hbHlzaXMgaW4gQU8nLFxuICAgICAgYWN0aW9uOiAnQ2xpY2sgdGhlIFwiQW5hbHlzZSBUZXJyYWluIFByb2ZpbGUgaW4gQU9cIiBidXR0b24gdW5kZXIgVGVycmFpbiBBbmFseXNpcyBUb29scycsXG4gICAgICB0YXJnZXQ6IHsgY29tcG9uZW50OiAnVGVycmFpbkFuYWx5c2lzQ2FyZCcsIGFjdGlvbjogJ2FuYWx5c2VUZXJyYWluSW5BTycgfSxcbiAgICB9LFxuICBdLFxuICBvYnNlcnZlclZzVGVycmFpbjogW1xuICAgIHtcbiAgICAgIGxhYmVsOiAnUGxhY2UgT2JzZXJ2ZXIgTWFya2VyJyxcbiAgICAgIGFjdGlvbjogJ0NsaWNrIHRoZSBcIkFkZCBPYnNlcnZlclwiIGJ1dHRvbiBvbiB0aGUgbWFwIGFuZCBzZWxlY3QgYSBsb2NhdGlvbicsXG4gICAgICB0YXJnZXQ6IHsgY29tcG9uZW50OiAnTWFya2VyQ29udHJvbHMnLCBhY3Rpb246ICdhZGRPYnNlcnZlcicgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGxhYmVsOiAnUnVuIE9ic2VydmVyIHZzIFRlcnJhaW4gQW5hbHlzaXMnLFxuICAgICAgYWN0aW9uOiAnQ2xpY2sgdGhlIFwiQW5hbHlzZSBUZXJyYWluIFByb2ZpbGUgaW4gQU9cIiBidXR0b24gdW5kZXIgVmlzaWJpbGl0eSBBbmFseXNpcyBUb29scyB3aXRoIE9ic2VydmVyIG1hcmtlciBwbGFjZWQnLFxuICAgICAgdGFyZ2V0OiB7IGNvbXBvbmVudDogJ0FuYWx5c2lzRGFzaGJvYXJkJywgYWN0aW9uOiAnYW5hbHlzZU9ic2VydmVyVnNUZXJyYWluJyB9LFxuICAgIH0sXG4gIF0sXG4gIGdjc1JlcGVhdGVyVnNUZXJyYWluOiBbXG4gICAge1xuICAgICAgbGFiZWw6ICdQbGFjZSBHQ1Mgb3IgUmVwZWF0ZXIgTWFya2VyJyxcbiAgICAgIGFjdGlvbjogJ0NsaWNrIHRoZSBcIkFkZCBHcm91bmQgU3RhdGlvblwiIG9yIFwiQWRkIFJlcGVhdGVyXCIgYnV0dG9uIG9uIHRoZSBtYXAnLFxuICAgICAgdGFyZ2V0OiB7IGNvbXBvbmVudDogJ01hcmtlckNvbnRyb2xzJywgYWN0aW9uOiAnYWRkR0NTb3JSZXBlYXRlcicgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGxhYmVsOiAnUnVuIEdDUy9SZXBlYXRlciB2cyBUZXJyYWluIEFuYWx5c2lzJyxcbiAgICAgIGFjdGlvbjogJ0NsaWNrIHRoZSBcIkFuYWx5c2UgVGVycmFpbiBQcm9maWxlIGluIEFPXCIgYnV0dG9uIHVuZGVyIFZpc2liaWxpdHkgQW5hbHlzaXMgVG9vbHMgd2l0aCBHQ1MvUmVwZWF0ZXIgbWFya2VyIHBsYWNlZCcsXG4gICAgICB0YXJnZXQ6IHsgY29tcG9uZW50OiAnQW5hbHlzaXNEYXNoYm9hcmQnLCBhY3Rpb246ICdhbmFseXNlR0NTUmVwZWF0ZXJWc1RlcnJhaW4nIH0sXG4gICAgfSxcbiAgXSxcbiAgcG93ZXJsaW5lOiBbXG4gICAge1xuICAgICAgbGFiZWw6ICdUb2dnbGUgUG93ZXJsaW5lcycsXG4gICAgICBhY3Rpb246ICdDbGljayB0aGUgXCJTaG93IFBvd2VybGluZXNcIiBidXR0b24gdW5kZXIgVGVycmFpbiBBbmFseXNpcyBUb29scycsXG4gICAgICB0YXJnZXQ6IHsgY29tcG9uZW50OiAnVGVycmFpbkFuYWx5c2lzQ2FyZCcsIGFjdGlvbjogJ3RvZ2dsZVBvd2VybGluZXMnIH0sXG4gICAgfSxcbiAgXSxcbiAgYWlyc3BhY2U6IFtcbiAgICB7XG4gICAgICBsYWJlbDogJ1RvZ2dsZSBBaXJzcGFjZSBPdmVybGF5JyxcbiAgICAgIGFjdGlvbjogJ1RvZ2dsZSBBaXJzcGFjZSBPdmVybGF5JyxcbiAgICAgIHRhcmdldDogeyBjb21wb25lbnQ6ICdMYXllckNvbnRyb2xzJywgYWN0aW9uOiAndG9nZ2xlQWlyc3BhY2UnIH0sXG4gICAgfSxcbiAgXSxcbiAgb2JzZXJ2ZXJUb0Ryb25lOiBbXG4gICAge1xuICAgICAgbGFiZWw6ICdQbGFjZSBPYnNlcnZlciBNYXJrZXInLFxuICAgICAgYWN0aW9uOiAnQ2xpY2sgdGhlIFwiQWRkIE9ic2VydmVyXCIgYnV0dG9uIG9uIHRoZSBtYXAgYW5kIHNlbGVjdCBhIGxvY2F0aW9uJyxcbiAgICAgIHRhcmdldDogeyBjb21wb25lbnQ6ICdNYXJrZXJDb250cm9scycsIGFjdGlvbjogJ2FkZE9ic2VydmVyJyB9LFxuICAgIH0sXG4gICAge1xuICAgICAgbGFiZWw6ICdSdW4gT2JzZXJ2ZXIgdG8gRHJvbmUgQW5hbHlzaXMnLFxuICAgICAgYWN0aW9uOiAnQ2xpY2sgdGhlIFwiU3RhdGlvbiBBbmFseXNpc1wiIHNlY3Rpb24gYW5kIHJ1biB0aGUgT2JzZXJ2ZXIgYW5hbHlzaXMnLFxuICAgICAgdGFyZ2V0OiB7IGNvbXBvbmVudDogJ0FuYWx5c2lzRGFzaGJvYXJkJywgYWN0aW9uOiAnb2JzZXJ2ZXJUb0Ryb25lJyB9LFxuICAgIH0sXG4gIF0sXG4gIGFudGVubmFUb0Ryb25lOiBbXG4gICAge1xuICAgICAgbGFiZWw6ICdQbGFjZSBHQ1Mgb3IgUmVwZWF0ZXIgTWFya2VyJyxcbiAgICAgIGFjdGlvbjogJ0NsaWNrIHRoZSBcIkFkZCBHcm91bmQgU3RhdGlvblwiIG9yIFwiQWRkIFJlcGVhdGVyXCIgYnV0dG9uIG9uIHRoZSBtYXAnLFxuICAgICAgdGFyZ2V0OiB7IGNvbXBvbmVudDogJ01hcmtlckNvbnRyb2xzJywgYWN0aW9uOiAnYWRkR0NTb3JSZXBlYXRlcicgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGxhYmVsOiAnUnVuIEFudGVubmEgdG8gRHJvbmUgQW5hbHlzaXMnLFxuICAgICAgYWN0aW9uOiAnQ2xpY2sgdGhlIFwiU3RhdGlvbiBBbmFseXNpc1wiIHNlY3Rpb24gYW5kIHJ1biB0aGUgR0NTIG9yIFJlcGVhdGVyIGFuYWx5c2lzJyxcbiAgICAgIHRhcmdldDogeyBjb21wb25lbnQ6ICdBbmFseXNpc0Rhc2hib2FyZCcsIGFjdGlvbjogJ2FudGVubmFUb0Ryb25lJyB9LFxuICAgIH0sXG4gIF0sXG4gIHRyZWVIZWlnaHRzOiBbXG4gICAge1xuICAgICAgbGFiZWw6ICdTaG93IFRyZWUgSGVpZ2h0cycsXG4gICAgICBhY3Rpb246ICdDbGljayB0aGUgXCJUb2dnbGUgVHJlZSBIZWlnaHRzXCIgYnV0dG9uIHVuZGVyIFRlcnJhaW4gQW5hbHlzaXMgVG9vbHMnLFxuICAgICAgdGFyZ2V0OiB7IGNvbXBvbmVudDogJ1RlcnJhaW5BbmFseXNpc0Rhc2hib2FyZCcsIGFjdGlvbjogJ3RvZ2dsZVRyZWVIZWlnaHRzJyB9LFxuICAgIH0sXG4gIF0sXG4gIG1vYmlsZVRvd2VyQ292ZXJhZ2U6IFtcbiAgICB7XG4gICAgICBsYWJlbDogJ1Nob3cgTW9iaWxlIFRvd2VyIENvdmVyYWdlJyxcbiAgICAgIGFjdGlvbjogJ0NsaWNrIHRoZSBcIlRvZ2dsZSBNb2JpbGUgVG93ZXJzXCIgYnV0dG9uIHVuZGVyIFZpc2liaWxpdHkgQW5hbHlzaXMgVG9vbHMnLFxuICAgICAgdGFyZ2V0OiB7IGNvbXBvbmVudDogJ1Zpc2liaWxpdHlBbmFseXNpc0Rhc2hib2FyZCcsIGFjdGlvbjogJ3Nob3dNb2JpbGVUb3dlcnMnIH0sXG4gICAgfSxcbiAgXSxcbiAgYW50ZW5uYVRvQW50ZW5uYTogW1xuICAgIHtcbiAgICAgIGxhYmVsOiAnUGxhY2UgVHdvIE1hcmtlcnMgKEdDUy9SZXBlYXRlciknLFxuICAgICAgYWN0aW9uOiAnQ2xpY2sgdGhlIFwiQWRkIEdyb3VuZCBTdGF0aW9uXCIgYW5kIFwiQWRkIFJlcGVhdGVyXCIgYnV0dG9ucyBvbiB0aGUgbWFwJyxcbiAgICAgIHRhcmdldDogeyBjb21wb25lbnQ6ICdNYXJrZXJDb250cm9scycsIGFjdGlvbjogJ2FkZEdDU29yUmVwZWF0ZXInIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICBsYWJlbDogJ1J1biBBbnRlbm5hIHRvIEFudGVubmEgQW5hbHlzaXMnLFxuICAgICAgYWN0aW9uOiAnQ2xpY2sgdGhlIFwiU3RhdGlvbi10by1TdGF0aW9uIExPU1wiIHNlY3Rpb24gYW5kIHJ1biB0aGUgYW5hbHlzaXMnLFxuICAgICAgdGFyZ2V0OiB7IGNvbXBvbmVudDogJ0FuYWx5c2lzRGFzaGJvYXJkJywgYWN0aW9uOiAnYW50ZW5uYVRvQW50ZW5uYScgfSxcbiAgICB9LFxuICBdLFxufTtcblxuLyoqXG4gKiBNYXBwaW5nIG9mIGNoZWNrbGlzdCBhY3Rpb25zIHRvIE1hcFNpZGVQYW5lbCBuYW1lc1xuICogU3RhdGljIGNvbmZpZ3VyYXRpb24gdGhhdCBkb2Vzbid0IGRlcGVuZCBvbiBjb21wb25lbnQgc3RhdGVcbiAqL1xuY29uc3QgYWN0aW9uVG9QYW5lbE1hcDogUmVjb3JkPHN0cmluZywgJ3RlcnJhaW4nIHwgJ2xvcycgfCAnZW5lcmd5JyB8IG51bGw+ID0ge1xuICBhbmFseXNlVGVycmFpbkluQU86ICd0ZXJyYWluJyxcbiAgYW5hbHlzZU9ic2VydmVyVnNUZXJyYWluOiAnbG9zJyxcbiAgYW5hbHlzZUdDU1JlcGVhdGVyVnNUZXJyYWluOiAnbG9zJyxcbiAgdG9nZ2xlUG93ZXJsaW5lczogJ3RlcnJhaW4nLFxuICBhZGRPYnNlcnZlcjogbnVsbCxcbiAgYWRkR0NTb3JSZXBlYXRlcjogbnVsbCxcbiAgdXBsb2FkRmxpZ2h0UGxhbjogJ3RlcnJhaW4nLFxuICBvcGVuTGF5ZXJDb250cm9sczogbnVsbCxcbiAgdG9nZ2xlQWlyc3BhY2U6ICd0ZXJyYWluJyxcbiAgb2JzZXJ2ZXJUb0Ryb25lOiAnbG9zJyxcbiAgYW50ZW5uYVRvRHJvbmU6ICdsb3MnLFxuICBhbnRlbm5hVG9BbnRlbm5hOiAnbG9zJyxcbiAgdG9nZ2xlVHJlZUhlaWdodHM6ICd0ZXJyYWluJyxcbiAgc2hvd01vYmlsZVRvd2VyczogJ2xvcycsXG59O1xuXG4vKipcbiAqIFByb3ZpZGVzIGNoZWNrbGlzdCBzdGF0ZSBhbmQgbWV0aG9kc1xuICogQHBhcmFtIGNoaWxkcmVuIC0gUmVhY3QgY29tcG9uZW50cyB0byByZW5kZXIgd2l0aGluIHRoZSBwcm92aWRlclxuICovXG5leHBvcnQgY29uc3QgQ2hlY2tsaXN0UHJvdmlkZXI6IFJlYWN0LkZDPHsgY2hpbGRyZW46IFJlYWN0Tm9kZSB9PiA9ICh7IGNoaWxkcmVuIH0pID0+IHtcbiAgY29uc3QgW2NoZWNrcywgc2V0Q2hlY2tzXSA9IHVzZVN0YXRlPENoZWNrbGlzdEl0ZW1bXT4oW10pO1xuICBjb25zdCBbZ3VpZGVkVGFyZ2V0LCBzZXRHdWlkZWRUYXJnZXRdID0gdXNlU3RhdGU8eyBjb21wb25lbnQ6IHN0cmluZzsgYWN0aW9uOiBzdHJpbmcgfSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaGlnaGxpZ2h0TWFya2Vycywgc2V0SGlnaGxpZ2h0TWFya2Vyc10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cblxuICAvKipcbiAgICogQWRkcyBjaGVja2xpc3QgaXRlbXMgYmFzZWQgb24gc2VsZWN0ZWQgYW5hbHlzZXNcbiAgICogQHBhcmFtIGFuYWx5c2VzIC0gQXJyYXkgb2YgYW5hbHlzaXMgSURzIGZyb20gQW5hbHlzaXNXaXphcmRcbiAgICovXG4gIGNvbnN0IGFkZENoZWNrcyA9IHVzZUNhbGxiYWNrKChhbmFseXNlczogc3RyaW5nW10pID0+IHtcbiAgICBjb25zdCBuZXdDaGVja3M6IENoZWNrbGlzdEl0ZW1bXSA9IGFuYWx5c2VzXG4gICAgICAuZmlsdGVyKChpZCkgPT4gYW5hbHlzaXNUb0NoZWNrbGlzdFN0ZXBzW2lkXSkgLy8gRW5zdXJlIHZhbGlkIGFuYWx5c2lzIElEc1xuICAgICAgLmZsYXRNYXAoKGFuYWx5c2lzSWQpID0+IHtcbiAgICAgICAgY29uc3Qgc3RlcHMgPSBhbmFseXNpc1RvQ2hlY2tsaXN0U3RlcHNbYW5hbHlzaXNJZF07XG4gICAgICAgIHJldHVybiBzdGVwcy5tYXAoKHN0ZXAsIGluZGV4KSA9PiAoe1xuICAgICAgICAgIGlkOiBgJHthbmFseXNpc0lkfS0ke2luZGV4fWAsXG4gICAgICAgICAgZ3JvdXA6IGFuYWx5c2lzSWQsXG4gICAgICAgICAgLi4uc3RlcCxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyBhcyBjb25zdCxcbiAgICAgICAgfSkpO1xuICAgICAgfSk7XG4gICAgc2V0Q2hlY2tzKG5ld0NoZWNrcyk7XG4gICAgY29uc29sZS5sb2coJ1tDaGVja2xpc3RDb250ZXh0XSBBZGRlZCBjaGVja3M6JywgbmV3Q2hlY2tzKTtcbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiBNYXJrcyBhIGNoZWNrbGlzdCBpdGVtIGFzIGNvbXBsZXRlZFxuICAgKiBAcGFyYW0gaWQgLSBUaGUgSUQgb2YgdGhlIGNoZWNrIHRvIGNvbXBsZXRlXG4gICAqL1xuICBjb25zdCBjb21wbGV0ZUNoZWNrID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHtcbiAgICBzZXRDaGVja3MoKHByZXYpID0+XG4gICAgICBwcmV2Lm1hcCgoY2hlY2spID0+XG4gICAgICAgIGNoZWNrLmlkID09PSBpZCA/IHsgLi4uY2hlY2ssIHN0YXR1czogJ2NvbXBsZXRlZCcgfSA6IGNoZWNrXG4gICAgICApXG4gICAgKTtcbiAgICBjb25zb2xlLmxvZyhgW0NoZWNrbGlzdENvbnRleHRdIENvbXBsZXRlZCBjaGVjazogJHtpZH1gKTtcbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiBSZXNldHMgdGhlIGNoZWNrbGlzdFxuICAgKi9cbiAgY29uc3QgcmVzZXRDaGVja3MgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0Q2hlY2tzKFtdKTtcbiAgICBzZXRHdWlkZWRUYXJnZXQobnVsbCk7XG4gICAgY29uc29sZS5sb2coJ1tDaGVja2xpc3RDb250ZXh0XSBSZXNldCBjaGVja3MnKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGNvbnRleHRWYWx1ZTogQ2hlY2tsaXN0Q29udGV4dFByb3BzID0ge1xuICAgIGNoZWNrcyxcbiAgICBhZGRDaGVja3MsXG4gICAgY29tcGxldGVDaGVjayxcbiAgICByZXNldENoZWNrcyxcbiAgICBndWlkZWRUYXJnZXQsXG4gICAgc2V0R3VpZGVkVGFyZ2V0LFxuICAgIGFjdGlvblRvUGFuZWxNYXAsXG4gICAgaGlnaGxpZ2h0TWFya2VycyxcbiAgICBzZXRIaWdobGlnaHRNYXJrZXJzLFxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPENoZWNrbGlzdENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2NvbnRleHRWYWx1ZX0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9DaGVja2xpc3RDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcblxuLyoqXG4gKiBIb29rIHRvIGFjY2VzcyB0aGUgQ2hlY2tsaXN0Q29udGV4dFxuICogQHJldHVybnMgVGhlIENoZWNrbGlzdENvbnRleHQgcHJvcGVydGllc1xuICogQHRocm93cyBFcnJvciBpZiB1c2VkIG91dHNpZGUgb2YgQ2hlY2tsaXN0UHJvdmlkZXJcbiAqL1xuZXhwb3J0IGNvbnN0IHVzZUNoZWNrbGlzdENvbnRleHQgPSAoKTogQ2hlY2tsaXN0Q29udGV4dFByb3BzID0+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoQ2hlY2tsaXN0Q29udGV4dCk7XG4gIGlmICghY29udGV4dCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXNlQ2hlY2tsaXN0Q29udGV4dCBtdXN0IGJlIHVzZWQgd2l0aGluIGEgQ2hlY2tsaXN0UHJvdmlkZXInKTtcbiAgfVxuICByZXR1cm4gY29udGV4dDtcbn07Il0sIm5hbWVzIjpbIlJlYWN0IiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwiQ2hlY2tsaXN0Q29udGV4dCIsInVuZGVmaW5lZCIsImFuYWx5c2lzVG9DaGVja2xpc3RTdGVwcyIsInRlcnJhaW5Qcm9maWxlIiwibGFiZWwiLCJhY3Rpb24iLCJ0YXJnZXQiLCJjb21wb25lbnQiLCJvYnNlcnZlclZzVGVycmFpbiIsImdjc1JlcGVhdGVyVnNUZXJyYWluIiwicG93ZXJsaW5lIiwiYWlyc3BhY2UiLCJvYnNlcnZlclRvRHJvbmUiLCJhbnRlbm5hVG9Ecm9uZSIsInRyZWVIZWlnaHRzIiwibW9iaWxlVG93ZXJDb3ZlcmFnZSIsImFudGVubmFUb0FudGVubmEiLCJhY3Rpb25Ub1BhbmVsTWFwIiwiYW5hbHlzZVRlcnJhaW5JbkFPIiwiYW5hbHlzZU9ic2VydmVyVnNUZXJyYWluIiwiYW5hbHlzZUdDU1JlcGVhdGVyVnNUZXJyYWluIiwidG9nZ2xlUG93ZXJsaW5lcyIsImFkZE9ic2VydmVyIiwiYWRkR0NTb3JSZXBlYXRlciIsInVwbG9hZEZsaWdodFBsYW4iLCJvcGVuTGF5ZXJDb250cm9scyIsInRvZ2dsZUFpcnNwYWNlIiwidG9nZ2xlVHJlZUhlaWdodHMiLCJzaG93TW9iaWxlVG93ZXJzIiwiQ2hlY2tsaXN0UHJvdmlkZXIiLCJjaGlsZHJlbiIsImNoZWNrcyIsInNldENoZWNrcyIsImd1aWRlZFRhcmdldCIsInNldEd1aWRlZFRhcmdldCIsImhpZ2hsaWdodE1hcmtlcnMiLCJzZXRIaWdobGlnaHRNYXJrZXJzIiwiYWRkQ2hlY2tzIiwiYW5hbHlzZXMiLCJuZXdDaGVja3MiLCJmaWx0ZXIiLCJpZCIsImZsYXRNYXAiLCJhbmFseXNpc0lkIiwic3RlcHMiLCJtYXAiLCJzdGVwIiwiaW5kZXgiLCJncm91cCIsInN0YXR1cyIsImNvbnNvbGUiLCJsb2ciLCJjb21wbGV0ZUNoZWNrIiwicHJldiIsImNoZWNrIiwicmVzZXRDaGVja3MiLCJjb250ZXh0VmFsdWUiLCJQcm92aWRlciIsInZhbHVlIiwidXNlQ2hlY2tsaXN0Q29udGV4dCIsImNvbnRleHQiLCJFcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/context/ChecklistContext.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/context/FlightConfigurationContext.tsx":
/*!********************************************************!*\
  !*** ./src/app/context/FlightConfigurationContext.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FlightConfigurationProvider: () => (/* binding */ FlightConfigurationProvider),\n/* harmony export */   useFlightConfiguration: () => (/* binding */ useFlightConfiguration)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _FlightPlanContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FlightPlanContext */ \"(ssr)/./src/app/context/FlightPlanContext.tsx\");\n/* eslint-disable @typescript-eslint/no-explicit-any */ \n\n\nconst FlightConfigurationContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nconst formatFlightTime = (timeInMinutes)=>{\n    const minutes = Math.floor(timeInMinutes);\n    const seconds = Math.round((timeInMinutes - minutes) * 60);\n    return `${minutes}:${seconds.toString().padStart(2, \"0\")}`;\n};\nconst FlightConfigurationProvider = ({ children })=>{\n    const { distance: flightPlanDistance } = (0,_FlightPlanContext__WEBPACK_IMPORTED_MODULE_2__.useFlightPlanContext)();\n    const [config, setConfig] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        batteryCapacity: \"28000\",\n        dischargeRate: \"700\",\n        assumedSpeed: \"20\",\n        batteryReserveReq: \"20\"\n    });\n    const [metrics, setMetrics] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        flightTime: \"0:00\",\n        maxDistance: 0,\n        batteryReserve: \"0%\",\n        totalEndurance: \"0:00\",\n        isFeasible: false,\n        estimatedDistance: 0,\n        flightPlanEstimatedTime: \"0:00\",\n        expectedBatteryConsumption: 0,\n        numberOfWaypoints: 0,\n        mainAltitudeMode: \"N/A\",\n        availableBatteryCapacity: 0,\n        remainingCapacity: 0,\n        remainingTime: \"0:00\",\n        flightTimeMargin: \"0:00\"\n    });\n    const calculateMetrics = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlightConfigurationProvider.useCallback[calculateMetrics]\": ()=>{\n            // Parse input values\n            const batteryCapacity = parseFloat(config.batteryCapacity) || 0;\n            const dischargeRate = parseFloat(config.dischargeRate) || 0;\n            const assumedSpeed = parseFloat(config.assumedSpeed) || 20;\n            const reservePercentage = parseFloat(config.batteryReserveReq) || 20;\n            // Battery calculations\n            const reserveAmount = batteryCapacity * (reservePercentage / 100);\n            const availableBatteryCapacity = batteryCapacity - reserveAmount;\n            // Time calculations\n            const availableFlightTime = availableBatteryCapacity / dischargeRate || 0;\n            const totalFlightTime = batteryCapacity / dischargeRate || 0;\n            // Distance calculations\n            const maxAvailableDistance = availableFlightTime / 60 * assumedSpeed;\n            // Initialize metrics object\n            const newMetrics = {\n                flightTime: formatFlightTime(availableFlightTime),\n                maxDistance: maxAvailableDistance,\n                batteryReserve: `${reservePercentage}%`,\n                isFeasible: true,\n                estimatedDistance: maxAvailableDistance,\n                totalEndurance: formatFlightTime(totalFlightTime),\n                flightPlanEstimatedTime: \"0:00\",\n                expectedBatteryConsumption: 0,\n                numberOfWaypoints: 0,\n                mainAltitudeMode: \"N/A\",\n                availableBatteryCapacity: Math.round(availableBatteryCapacity),\n                remainingCapacity: Math.round(availableBatteryCapacity),\n                remainingTime: formatFlightTime(availableFlightTime),\n                flightTimeMargin: formatFlightTime(availableFlightTime) // Initial placeholder\n            };\n            // Flight plan specific calculations\n            if (flightPlanDistance) {\n                const flightPlanTimeMinutes = flightPlanDistance / assumedSpeed * 60;\n                const requiredBatteryCapacity = flightPlanTimeMinutes * dischargeRate;\n                newMetrics.isFeasible = requiredBatteryCapacity <= availableBatteryCapacity;\n                newMetrics.flightPlanEstimatedTime = formatFlightTime(flightPlanTimeMinutes);\n                newMetrics.expectedBatteryConsumption = Math.round(requiredBatteryCapacity);\n                // Calculate remaining capacity after flight plan\n                const remainingCapacity = availableBatteryCapacity - requiredBatteryCapacity;\n                newMetrics.remainingCapacity = Math.round(remainingCapacity);\n                // Calculate excess flight time available (in minutes)\n                const extraFlightTimeMinutes = remainingCapacity / dischargeRate;\n                newMetrics.remainingTime = formatFlightTime(extraFlightTimeMinutes);\n                newMetrics.flightTimeMargin = formatFlightTime(extraFlightTimeMinutes);\n            }\n            setMetrics(newMetrics);\n        }\n    }[\"FlightConfigurationProvider.useCallback[calculateMetrics]\"], [\n        config.batteryCapacity,\n        config.dischargeRate,\n        config.assumedSpeed,\n        config.batteryReserveReq,\n        flightPlanDistance\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FlightConfigurationProvider.useEffect\": ()=>{\n            calculateMetrics();\n        }\n    }[\"FlightConfigurationProvider.useEffect\"], [\n        calculateMetrics\n    ]);\n    const updateConfig = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlightConfigurationProvider.useCallback[updateConfig]\": (updates)=>{\n            setConfig({\n                \"FlightConfigurationProvider.useCallback[updateConfig]\": (prev)=>({\n                        ...prev,\n                        ...updates\n                    })\n            }[\"FlightConfigurationProvider.useCallback[updateConfig]\"]);\n        }\n    }[\"FlightConfigurationProvider.useCallback[updateConfig]\"], []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(FlightConfigurationContext.Provider, {\n        value: {\n            config,\n            metrics,\n            updateConfig\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/context/FlightConfigurationContext.tsx\",\n        lineNumber: 144,\n        columnNumber: 5\n    }, undefined);\n};\nconst useFlightConfiguration = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(FlightConfigurationContext);\n    if (!context) {\n        throw new Error('useFlightConfiguration must be used within a FlightConfigurationProvider');\n    }\n    return context;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbnRleHQvRmxpZ2h0Q29uZmlndXJhdGlvbkNvbnRleHQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxxREFBcUQ7QUFDc0M7QUFDaEM7QUFnQzNELE1BQU1PLDJDQUE2Qk4sb0RBQWFBLENBQTZDTztBQUU3RixNQUFNQyxtQkFBbUIsQ0FBQ0M7SUFDeEIsTUFBTUMsVUFBVUMsS0FBS0MsS0FBSyxDQUFDSDtJQUMzQixNQUFNSSxVQUFVRixLQUFLRyxLQUFLLENBQUMsQ0FBQ0wsZ0JBQWdCQyxPQUFNLElBQUs7SUFDdkQsT0FBTyxHQUFHQSxRQUFRLENBQUMsRUFBRUcsUUFBUUUsUUFBUSxHQUFHQyxRQUFRLENBQUMsR0FBRyxNQUFNO0FBQzVEO0FBRU8sTUFBTUMsOEJBQXVFLENBQUMsRUFBRUMsUUFBUSxFQUFFO0lBQy9GLE1BQU0sRUFBRUMsVUFBVUMsa0JBQWtCLEVBQUUsR0FBR2Ysd0VBQW9CQTtJQUU3RCxNQUFNLENBQUNnQixRQUFRQyxVQUFVLEdBQUdwQiwrQ0FBUUEsQ0FBYztRQUNoRHFCLGlCQUFpQjtRQUNqQkMsZUFBZTtRQUNmQyxjQUFjO1FBQ2RDLG1CQUFtQjtJQUNyQjtJQUVBLE1BQU0sQ0FBQ0MsU0FBU0MsV0FBVyxHQUFHMUIsK0NBQVFBLENBQWU7UUFDbkQyQixZQUFZO1FBQ1pDLGFBQWE7UUFDYkMsZ0JBQWdCO1FBQ2hCQyxnQkFBZ0I7UUFDaEJDLFlBQVk7UUFDWkMsbUJBQW1CO1FBQ25CQyx5QkFBeUI7UUFDekJDLDRCQUE0QjtRQUM1QkMsbUJBQW1CO1FBQ25CQyxrQkFBa0I7UUFDbEJDLDBCQUEwQjtRQUMxQkMsbUJBQW1CO1FBQ25CQyxlQUFlO1FBQ2ZDLGtCQUFrQjtJQUN0QjtJQUVBLE1BQU1DLG1CQUFtQnZDLGtEQUFXQTtxRUFBQztZQUNuQyxxQkFBcUI7WUFDckIsTUFBTW1CLGtCQUFrQnFCLFdBQVd2QixPQUFPRSxlQUFlLEtBQUs7WUFDOUQsTUFBTUMsZ0JBQWdCb0IsV0FBV3ZCLE9BQU9HLGFBQWEsS0FBSztZQUMxRCxNQUFNQyxlQUFlbUIsV0FBV3ZCLE9BQU9JLFlBQVksS0FBSztZQUN4RCxNQUFNb0Isb0JBQW9CRCxXQUFXdkIsT0FBT0ssaUJBQWlCLEtBQUs7WUFFbEUsdUJBQXVCO1lBQ3ZCLE1BQU1vQixnQkFBZ0J2QixrQkFBbUJzQixDQUFBQSxvQkFBb0IsR0FBRTtZQUMvRCxNQUFNTiwyQkFBMkJoQixrQkFBa0J1QjtZQUVuRCxvQkFBb0I7WUFDcEIsTUFBTUMsc0JBQXNCUiwyQkFBMkJmLGlCQUFpQjtZQUN4RSxNQUFNd0Isa0JBQWtCekIsa0JBQWtCQyxpQkFBaUI7WUFFM0Qsd0JBQXdCO1lBQ3hCLE1BQU15Qix1QkFBdUIsc0JBQXVCLEtBQU14QjtZQUUxRCw0QkFBNEI7WUFDNUIsTUFBTXlCLGFBQTJCO2dCQUM3QnJCLFlBQVlyQixpQkFBaUJ1QztnQkFDN0JqQixhQUFhbUI7Z0JBQ2JsQixnQkFBZ0IsR0FBR2Msa0JBQWtCLENBQUMsQ0FBQztnQkFDdkNaLFlBQVk7Z0JBQ1pDLG1CQUFtQmU7Z0JBQ25CakIsZ0JBQWdCeEIsaUJBQWlCd0M7Z0JBQ2pDYix5QkFBeUI7Z0JBQ3pCQyw0QkFBNEI7Z0JBQzVCQyxtQkFBbUI7Z0JBQ25CQyxrQkFBa0I7Z0JBQ2xCQywwQkFBMEI1QixLQUFLRyxLQUFLLENBQUN5QjtnQkFDckNDLG1CQUFtQjdCLEtBQUtHLEtBQUssQ0FBQ3lCO2dCQUM5QkUsZUFBZWpDLGlCQUFpQnVDO2dCQUNoQ0wsa0JBQWtCbEMsaUJBQWlCdUMscUJBQXFCLHNCQUFzQjtZQUNsRjtZQUVBLG9DQUFvQztZQUNwQyxJQUFJM0Isb0JBQW9CO2dCQUNwQixNQUFNK0Isd0JBQXdCLHFCQUFzQjFCLGVBQWdCO2dCQUNwRSxNQUFNMkIsMEJBQTBCRCx3QkFBd0IzQjtnQkFFeEQwQixXQUFXakIsVUFBVSxHQUFHbUIsMkJBQTJCYjtnQkFDbkRXLFdBQVdmLHVCQUF1QixHQUFHM0IsaUJBQWlCMkM7Z0JBQ3RERCxXQUFXZCwwQkFBMEIsR0FBR3pCLEtBQUtHLEtBQUssQ0FBQ3NDO2dCQUVuRCxpREFBaUQ7Z0JBQ2pELE1BQU1aLG9CQUFvQkQsMkJBQTJCYTtnQkFDckRGLFdBQVdWLGlCQUFpQixHQUFHN0IsS0FBS0csS0FBSyxDQUFDMEI7Z0JBRTFDLHNEQUFzRDtnQkFDdEQsTUFBTWEseUJBQXlCYixvQkFBb0JoQjtnQkFDbkQwQixXQUFXVCxhQUFhLEdBQUdqQyxpQkFBaUI2QztnQkFDNUNILFdBQVdSLGdCQUFnQixHQUFHbEMsaUJBQWlCNkM7WUFDbkQ7WUFFQXpCLFdBQVdzQjtRQUNiO29FQUFHO1FBQ0Q3QixPQUFPRSxlQUFlO1FBQ3RCRixPQUFPRyxhQUFhO1FBQ3BCSCxPQUFPSSxZQUFZO1FBQ25CSixPQUFPSyxpQkFBaUI7UUFDeEJOO0tBQ0Q7SUFHQ2pCLGdEQUFTQTtpREFBQztZQUNSd0M7UUFDRjtnREFBRztRQUFDQTtLQUFpQjtJQUVyQixNQUFNVyxlQUFlbEQsa0RBQVdBO2lFQUFDLENBQUNtRDtZQUNoQ2pDO3lFQUFVa0MsQ0FBQUEsT0FBUzt3QkFBRSxHQUFHQSxJQUFJO3dCQUFFLEdBQUdELE9BQU87b0JBQUM7O1FBQzNDO2dFQUFHLEVBQUU7SUFFTCxxQkFDRSw4REFBQ2pELDJCQUEyQm1ELFFBQVE7UUFBQ0MsT0FBTztZQUFFckM7WUFBUU07WUFBUzJCO1FBQWE7a0JBQ3pFcEM7Ozs7OztBQUdQLEVBQUU7QUFFSyxNQUFNeUMseUJBQXlCO0lBQ3BDLE1BQU1DLFVBQVUzRCxpREFBVUEsQ0FBQ0s7SUFDM0IsSUFBSSxDQUFDc0QsU0FBUztRQUNaLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUNBLE9BQU9EO0FBQ1QsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvY29udGV4dC9GbGlnaHRDb25maWd1cmF0aW9uQ29udGV4dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlRmxpZ2h0UGxhbkNvbnRleHQgfSBmcm9tICcuL0ZsaWdodFBsYW5Db250ZXh0JztcblxuaW50ZXJmYWNlIENvbmZpZ1N0YXRlIHtcbiAgYmF0dGVyeUNhcGFjaXR5OiBzdHJpbmc7XG4gIGRpc2NoYXJnZVJhdGU6IHN0cmluZztcbiAgYXNzdW1lZFNwZWVkOiBzdHJpbmc7XG4gIGJhdHRlcnlSZXNlcnZlUmVxOiBzdHJpbmc7IFxufVxuXG5pbnRlcmZhY2UgTWV0cmljc1N0YXRlIHtcbiAgZmxpZ2h0VGltZTogc3RyaW5nO1xuICBtYXhEaXN0YW5jZTogbnVtYmVyO1xuICBiYXR0ZXJ5UmVzZXJ2ZTogc3RyaW5nO1xuICBpc0ZlYXNpYmxlOiBib29sZWFuO1xuICBlc3RpbWF0ZWREaXN0YW5jZTogbnVtYmVyO1xuICBmbGlnaHRQbGFuRXN0aW1hdGVkVGltZTogc3RyaW5nO1xuICBleHBlY3RlZEJhdHRlcnlDb25zdW1wdGlvbjogbnVtYmVyO1xuICBudW1iZXJPZldheXBvaW50czogbnVtYmVyO1xuICBtYWluQWx0aXR1ZGVNb2RlOiBzdHJpbmc7XG4gIGF2YWlsYWJsZUJhdHRlcnlDYXBhY2l0eTogbnVtYmVyO1xuICByZW1haW5pbmdDYXBhY2l0eTogbnVtYmVyO1xuICByZW1haW5pbmdUaW1lOiBzdHJpbmc7XG4gIGZsaWdodFRpbWVNYXJnaW46IHN0cmluZztcbiAgdG90YWxFbmR1cmFuY2U6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIEZsaWdodENvbmZpZ3VyYXRpb25Db250ZXh0VHlwZSB7XG4gIGNvbmZpZzogQ29uZmlnU3RhdGU7XG4gIG1ldHJpY3M6IE1ldHJpY3NTdGF0ZTtcbiAgdXBkYXRlQ29uZmlnOiAodXBkYXRlczogUGFydGlhbDxDb25maWdTdGF0ZT4pID0+IHZvaWQ7XG59XG5cbmNvbnN0IEZsaWdodENvbmZpZ3VyYXRpb25Db250ZXh0ID0gY3JlYXRlQ29udGV4dDxGbGlnaHRDb25maWd1cmF0aW9uQ29udGV4dFR5cGUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG5cbmNvbnN0IGZvcm1hdEZsaWdodFRpbWUgPSAodGltZUluTWludXRlczogbnVtYmVyKTogc3RyaW5nID0+IHtcbiAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IodGltZUluTWludXRlcyk7XG4gIGNvbnN0IHNlY29uZHMgPSBNYXRoLnJvdW5kKCh0aW1lSW5NaW51dGVzIC0gbWludXRlcykgKiA2MCk7XG4gIHJldHVybiBgJHttaW51dGVzfToke3NlY29uZHMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YDtcbn07XG5cbmV4cG9ydCBjb25zdCBGbGlnaHRDb25maWd1cmF0aW9uUHJvdmlkZXI6IFJlYWN0LkZDPHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9PiA9ICh7IGNoaWxkcmVuIH0pID0+IHtcbiAgY29uc3QgeyBkaXN0YW5jZTogZmxpZ2h0UGxhbkRpc3RhbmNlIH0gPSB1c2VGbGlnaHRQbGFuQ29udGV4dCgpO1xuICBcbiAgY29uc3QgW2NvbmZpZywgc2V0Q29uZmlnXSA9IHVzZVN0YXRlPENvbmZpZ1N0YXRlPih7XG4gICAgYmF0dGVyeUNhcGFjaXR5OiBcIjI4MDAwXCIsXG4gICAgZGlzY2hhcmdlUmF0ZTogXCI3MDBcIixcbiAgICBhc3N1bWVkU3BlZWQ6IFwiMjBcIixcbiAgICBiYXR0ZXJ5UmVzZXJ2ZVJlcTogXCIyMFwiXG4gIH0pO1xuXG4gIGNvbnN0IFttZXRyaWNzLCBzZXRNZXRyaWNzXSA9IHVzZVN0YXRlPE1ldHJpY3NTdGF0ZT4oe1xuICAgIGZsaWdodFRpbWU6IFwiMDowMFwiLFxuICAgIG1heERpc3RhbmNlOiAwLFxuICAgIGJhdHRlcnlSZXNlcnZlOiBcIjAlXCIsXG4gICAgdG90YWxFbmR1cmFuY2U6IFwiMDowMFwiLFxuICAgIGlzRmVhc2libGU6IGZhbHNlLFxuICAgIGVzdGltYXRlZERpc3RhbmNlOiAwLFxuICAgIGZsaWdodFBsYW5Fc3RpbWF0ZWRUaW1lOiBcIjA6MDBcIixcbiAgICBleHBlY3RlZEJhdHRlcnlDb25zdW1wdGlvbjogMCxcbiAgICBudW1iZXJPZldheXBvaW50czogMCxcbiAgICBtYWluQWx0aXR1ZGVNb2RlOiBcIk4vQVwiLFxuICAgIGF2YWlsYWJsZUJhdHRlcnlDYXBhY2l0eTogMCxcbiAgICByZW1haW5pbmdDYXBhY2l0eTogMCxcbiAgICByZW1haW5pbmdUaW1lOiBcIjA6MDBcIixcbiAgICBmbGlnaHRUaW1lTWFyZ2luOiBcIjA6MDBcIiBcbn0pO1xuXG5jb25zdCBjYWxjdWxhdGVNZXRyaWNzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAvLyBQYXJzZSBpbnB1dCB2YWx1ZXNcbiAgY29uc3QgYmF0dGVyeUNhcGFjaXR5ID0gcGFyc2VGbG9hdChjb25maWcuYmF0dGVyeUNhcGFjaXR5KSB8fCAwO1xuICBjb25zdCBkaXNjaGFyZ2VSYXRlID0gcGFyc2VGbG9hdChjb25maWcuZGlzY2hhcmdlUmF0ZSkgfHwgMDtcbiAgY29uc3QgYXNzdW1lZFNwZWVkID0gcGFyc2VGbG9hdChjb25maWcuYXNzdW1lZFNwZWVkKSB8fCAyMDtcbiAgY29uc3QgcmVzZXJ2ZVBlcmNlbnRhZ2UgPSBwYXJzZUZsb2F0KGNvbmZpZy5iYXR0ZXJ5UmVzZXJ2ZVJlcSkgfHwgMjA7XG5cbiAgLy8gQmF0dGVyeSBjYWxjdWxhdGlvbnNcbiAgY29uc3QgcmVzZXJ2ZUFtb3VudCA9IGJhdHRlcnlDYXBhY2l0eSAqIChyZXNlcnZlUGVyY2VudGFnZSAvIDEwMCk7XG4gIGNvbnN0IGF2YWlsYWJsZUJhdHRlcnlDYXBhY2l0eSA9IGJhdHRlcnlDYXBhY2l0eSAtIHJlc2VydmVBbW91bnQ7XG5cbiAgLy8gVGltZSBjYWxjdWxhdGlvbnNcbiAgY29uc3QgYXZhaWxhYmxlRmxpZ2h0VGltZSA9IGF2YWlsYWJsZUJhdHRlcnlDYXBhY2l0eSAvIGRpc2NoYXJnZVJhdGUgfHwgMDtcbiAgY29uc3QgdG90YWxGbGlnaHRUaW1lID0gYmF0dGVyeUNhcGFjaXR5IC8gZGlzY2hhcmdlUmF0ZSB8fCAwOyBcblxuICAvLyBEaXN0YW5jZSBjYWxjdWxhdGlvbnNcbiAgY29uc3QgbWF4QXZhaWxhYmxlRGlzdGFuY2UgPSAoYXZhaWxhYmxlRmxpZ2h0VGltZSAvIDYwKSAqIGFzc3VtZWRTcGVlZDtcblxuICAvLyBJbml0aWFsaXplIG1ldHJpY3Mgb2JqZWN0XG4gIGNvbnN0IG5ld01ldHJpY3M6IE1ldHJpY3NTdGF0ZSA9IHtcbiAgICAgIGZsaWdodFRpbWU6IGZvcm1hdEZsaWdodFRpbWUoYXZhaWxhYmxlRmxpZ2h0VGltZSksXG4gICAgICBtYXhEaXN0YW5jZTogbWF4QXZhaWxhYmxlRGlzdGFuY2UsXG4gICAgICBiYXR0ZXJ5UmVzZXJ2ZTogYCR7cmVzZXJ2ZVBlcmNlbnRhZ2V9JWAsXG4gICAgICBpc0ZlYXNpYmxlOiB0cnVlLFxuICAgICAgZXN0aW1hdGVkRGlzdGFuY2U6IG1heEF2YWlsYWJsZURpc3RhbmNlLFxuICAgICAgdG90YWxFbmR1cmFuY2U6IGZvcm1hdEZsaWdodFRpbWUodG90YWxGbGlnaHRUaW1lKSxcbiAgICAgIGZsaWdodFBsYW5Fc3RpbWF0ZWRUaW1lOiBcIjA6MDBcIixcbiAgICAgIGV4cGVjdGVkQmF0dGVyeUNvbnN1bXB0aW9uOiAwLFxuICAgICAgbnVtYmVyT2ZXYXlwb2ludHM6IDAsXG4gICAgICBtYWluQWx0aXR1ZGVNb2RlOiBcIk4vQVwiLFxuICAgICAgYXZhaWxhYmxlQmF0dGVyeUNhcGFjaXR5OiBNYXRoLnJvdW5kKGF2YWlsYWJsZUJhdHRlcnlDYXBhY2l0eSksXG4gICAgICByZW1haW5pbmdDYXBhY2l0eTogTWF0aC5yb3VuZChhdmFpbGFibGVCYXR0ZXJ5Q2FwYWNpdHkpLFxuICAgICAgcmVtYWluaW5nVGltZTogZm9ybWF0RmxpZ2h0VGltZShhdmFpbGFibGVGbGlnaHRUaW1lKSxcbiAgICAgIGZsaWdodFRpbWVNYXJnaW46IGZvcm1hdEZsaWdodFRpbWUoYXZhaWxhYmxlRmxpZ2h0VGltZSkgLy8gSW5pdGlhbCBwbGFjZWhvbGRlclxuICB9O1xuXG4gIC8vIEZsaWdodCBwbGFuIHNwZWNpZmljIGNhbGN1bGF0aW9uc1xuICBpZiAoZmxpZ2h0UGxhbkRpc3RhbmNlKSB7XG4gICAgICBjb25zdCBmbGlnaHRQbGFuVGltZU1pbnV0ZXMgPSAoZmxpZ2h0UGxhbkRpc3RhbmNlIC8gYXNzdW1lZFNwZWVkKSAqIDYwO1xuICAgICAgY29uc3QgcmVxdWlyZWRCYXR0ZXJ5Q2FwYWNpdHkgPSBmbGlnaHRQbGFuVGltZU1pbnV0ZXMgKiBkaXNjaGFyZ2VSYXRlO1xuICAgICAgXG4gICAgICBuZXdNZXRyaWNzLmlzRmVhc2libGUgPSByZXF1aXJlZEJhdHRlcnlDYXBhY2l0eSA8PSBhdmFpbGFibGVCYXR0ZXJ5Q2FwYWNpdHk7XG4gICAgICBuZXdNZXRyaWNzLmZsaWdodFBsYW5Fc3RpbWF0ZWRUaW1lID0gZm9ybWF0RmxpZ2h0VGltZShmbGlnaHRQbGFuVGltZU1pbnV0ZXMpO1xuICAgICAgbmV3TWV0cmljcy5leHBlY3RlZEJhdHRlcnlDb25zdW1wdGlvbiA9IE1hdGgucm91bmQocmVxdWlyZWRCYXR0ZXJ5Q2FwYWNpdHkpO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgcmVtYWluaW5nIGNhcGFjaXR5IGFmdGVyIGZsaWdodCBwbGFuXG4gICAgICBjb25zdCByZW1haW5pbmdDYXBhY2l0eSA9IGF2YWlsYWJsZUJhdHRlcnlDYXBhY2l0eSAtIHJlcXVpcmVkQmF0dGVyeUNhcGFjaXR5O1xuICAgICAgbmV3TWV0cmljcy5yZW1haW5pbmdDYXBhY2l0eSA9IE1hdGgucm91bmQocmVtYWluaW5nQ2FwYWNpdHkpO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgZXhjZXNzIGZsaWdodCB0aW1lIGF2YWlsYWJsZSAoaW4gbWludXRlcylcbiAgICAgIGNvbnN0IGV4dHJhRmxpZ2h0VGltZU1pbnV0ZXMgPSByZW1haW5pbmdDYXBhY2l0eSAvIGRpc2NoYXJnZVJhdGU7XG4gICAgICBuZXdNZXRyaWNzLnJlbWFpbmluZ1RpbWUgPSBmb3JtYXRGbGlnaHRUaW1lKGV4dHJhRmxpZ2h0VGltZU1pbnV0ZXMpO1xuICAgICAgbmV3TWV0cmljcy5mbGlnaHRUaW1lTWFyZ2luID0gZm9ybWF0RmxpZ2h0VGltZShleHRyYUZsaWdodFRpbWVNaW51dGVzKTtcbiAgfVxuXG4gIHNldE1ldHJpY3MobmV3TWV0cmljcyk7XG59LCBbXG4gIGNvbmZpZy5iYXR0ZXJ5Q2FwYWNpdHksIFxuICBjb25maWcuZGlzY2hhcmdlUmF0ZSwgXG4gIGNvbmZpZy5hc3N1bWVkU3BlZWQsIFxuICBjb25maWcuYmF0dGVyeVJlc2VydmVSZXEsXG4gIGZsaWdodFBsYW5EaXN0YW5jZSxcbl0pO1xuXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjYWxjdWxhdGVNZXRyaWNzKCk7XG4gIH0sIFtjYWxjdWxhdGVNZXRyaWNzXSk7XG5cbiAgY29uc3QgdXBkYXRlQ29uZmlnID0gdXNlQ2FsbGJhY2soKHVwZGF0ZXM6IFBhcnRpYWw8Q29uZmlnU3RhdGU+KSA9PiB7XG4gICAgc2V0Q29uZmlnKHByZXYgPT4gKHsgLi4ucHJldiwgLi4udXBkYXRlcyB9KSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxGbGlnaHRDb25maWd1cmF0aW9uQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBjb25maWcsIG1ldHJpY3MsIHVwZGF0ZUNvbmZpZyB9fT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0ZsaWdodENvbmZpZ3VyYXRpb25Db250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IHVzZUZsaWdodENvbmZpZ3VyYXRpb24gPSAoKSA9PiB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KEZsaWdodENvbmZpZ3VyYXRpb25Db250ZXh0KTtcbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VGbGlnaHRDb25maWd1cmF0aW9uIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBGbGlnaHRDb25maWd1cmF0aW9uUHJvdmlkZXInKTtcbiAgfVxuICByZXR1cm4gY29udGV4dDtcbn07Il0sIm5hbWVzIjpbIlJlYWN0IiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwidXNlRmxpZ2h0UGxhbkNvbnRleHQiLCJGbGlnaHRDb25maWd1cmF0aW9uQ29udGV4dCIsInVuZGVmaW5lZCIsImZvcm1hdEZsaWdodFRpbWUiLCJ0aW1lSW5NaW51dGVzIiwibWludXRlcyIsIk1hdGgiLCJmbG9vciIsInNlY29uZHMiLCJyb3VuZCIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJGbGlnaHRDb25maWd1cmF0aW9uUHJvdmlkZXIiLCJjaGlsZHJlbiIsImRpc3RhbmNlIiwiZmxpZ2h0UGxhbkRpc3RhbmNlIiwiY29uZmlnIiwic2V0Q29uZmlnIiwiYmF0dGVyeUNhcGFjaXR5IiwiZGlzY2hhcmdlUmF0ZSIsImFzc3VtZWRTcGVlZCIsImJhdHRlcnlSZXNlcnZlUmVxIiwibWV0cmljcyIsInNldE1ldHJpY3MiLCJmbGlnaHRUaW1lIiwibWF4RGlzdGFuY2UiLCJiYXR0ZXJ5UmVzZXJ2ZSIsInRvdGFsRW5kdXJhbmNlIiwiaXNGZWFzaWJsZSIsImVzdGltYXRlZERpc3RhbmNlIiwiZmxpZ2h0UGxhbkVzdGltYXRlZFRpbWUiLCJleHBlY3RlZEJhdHRlcnlDb25zdW1wdGlvbiIsIm51bWJlck9mV2F5cG9pbnRzIiwibWFpbkFsdGl0dWRlTW9kZSIsImF2YWlsYWJsZUJhdHRlcnlDYXBhY2l0eSIsInJlbWFpbmluZ0NhcGFjaXR5IiwicmVtYWluaW5nVGltZSIsImZsaWdodFRpbWVNYXJnaW4iLCJjYWxjdWxhdGVNZXRyaWNzIiwicGFyc2VGbG9hdCIsInJlc2VydmVQZXJjZW50YWdlIiwicmVzZXJ2ZUFtb3VudCIsImF2YWlsYWJsZUZsaWdodFRpbWUiLCJ0b3RhbEZsaWdodFRpbWUiLCJtYXhBdmFpbGFibGVEaXN0YW5jZSIsIm5ld01ldHJpY3MiLCJmbGlnaHRQbGFuVGltZU1pbnV0ZXMiLCJyZXF1aXJlZEJhdHRlcnlDYXBhY2l0eSIsImV4dHJhRmxpZ2h0VGltZU1pbnV0ZXMiLCJ1cGRhdGVDb25maWciLCJ1cGRhdGVzIiwicHJldiIsIlByb3ZpZGVyIiwidmFsdWUiLCJ1c2VGbGlnaHRDb25maWd1cmF0aW9uIiwiY29udGV4dCIsIkVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/context/FlightConfigurationContext.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/context/FlightPlanContext.tsx":
/*!***********************************************!*\
  !*** ./src/app/context/FlightPlanContext.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FlightPlanProvider: () => (/* binding */ FlightPlanProvider),\n/* harmony export */   useFlightPlanContext: () => (/* binding */ useFlightPlanContext)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst FlightPlanContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\n/**\n * Provides flight plan state and methods\n * @param children - React components to render within the provider\n */ const FlightPlanProvider = ({ children })=>{\n    const [flightPlan, setFlightPlanState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [distance, setDistanceState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isProcessed, setProcessedState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const setFlightPlan = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlightPlanProvider.useCallback[setFlightPlan]\": (data)=>{\n            const planId = data.properties?.metadata?.source || data.properties?.metadata?.created?.toString() || 'unknown';\n            console.groupCollapsed(`[FlightPlanContext] setFlightPlan (${planId})`);\n            console.time('[FlightPlanContext]  setFlightPlan');\n            // Add debug log for flight plan data\n            console.log(`[${new Date().toISOString()}] [FlightPlanContext] Flight plan data:`, {\n                featureCount: data.features?.length,\n                geometryType: data.features[0]?.geometry?.type,\n                coordinates: data.features[0]?.geometry?.coordinates,\n                coordinateCount: data.features[0]?.geometry?.coordinates?.length\n            });\n            // Critical summary of incoming data\n            console.log(' Incoming summary', {\n                features: data.features.length,\n                geometry: data.features[0]?.geometry.type,\n                totalDistance: data.properties?.totalDistance,\n                processed: data.properties?.processed\n            });\n            setFlightPlanState({\n                \"FlightPlanProvider.useCallback[setFlightPlan]\": (prev)=>{\n                    const updated = {\n                        ...prev,\n                        ...data,\n                        properties: {\n                            ...prev?.properties,\n                            ...data.properties,\n                            processed: data.properties?.processed ?? prev?.properties?.processed ?? false\n                        }\n                    };\n                    console.log(' Flight plan state prepared');\n                    return updated;\n                }\n            }[\"FlightPlanProvider.useCallback[setFlightPlan]\"]);\n            setDistanceState(data.properties?.totalDistance ?? null);\n            console.log(' Distance state updated ', data.properties?.totalDistance ?? null);\n            setProcessedState(Boolean(data.properties?.processed));\n            console.log(' Processed state updated ', Boolean(data.properties?.processed));\n            console.timeEnd('[FlightPlanContext]  setFlightPlan');\n            console.groupEnd();\n        }\n    }[\"FlightPlanProvider.useCallback[setFlightPlan]\"], []);\n    const setDistance = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlightPlanProvider.useCallback[setDistance]\": (distance)=>{\n            console.log('[FlightPlanContext] setDistance ', distance);\n            setDistanceState(distance);\n        }\n    }[\"FlightPlanProvider.useCallback[setDistance]\"], []);\n    const setProcessed = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlightPlanProvider.useCallback[setProcessed]\": (processed)=>{\n            console.log('[FlightPlanContext] setProcessed ', processed);\n            setProcessedState(processed);\n        }\n    }[\"FlightPlanProvider.useCallback[setProcessed]\"], []);\n    const contextValue = {\n        flightPlan,\n        setFlightPlan,\n        distance,\n        setDistance,\n        isProcessed,\n        setProcessed\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(FlightPlanContext.Provider, {\n        value: contextValue,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/context/FlightPlanContext.tsx\",\n        lineNumber: 165,\n        columnNumber: 10\n    }, undefined);\n};\n/**\n * Hook to access the FlightPlanContext\n * @returns The FlightPlanContext properties\n * @throws Error if used outside of FlightPlanProvider\n */ const useFlightPlanContext = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(FlightPlanContext);\n    if (!context) throw new Error('useFlightPlanContext must be used within a FlightPlanProvider');\n    return context;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbnRleHQvRmxpZ2h0UGxhbkNvbnRleHQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMkY7QUFtRjNGLE1BQU1LLGtDQUFvQkosb0RBQWFBLENBQXFDSztBQUU1RTs7O0NBR0MsR0FDTSxNQUFNQyxxQkFBd0QsQ0FBQyxFQUFFQyxRQUFRLEVBQUU7SUFDaEYsTUFBTSxDQUFDQyxZQUFZQyxtQkFBbUIsR0FBR1AsK0NBQVFBLENBQXdCO0lBQ3pFLE1BQU0sQ0FBQ1EsVUFBVUMsaUJBQWlCLEdBQUdULCtDQUFRQSxDQUFnQjtJQUM3RCxNQUFNLENBQUNVLGFBQWFDLGtCQUFrQixHQUFHWCwrQ0FBUUEsQ0FBQztJQUVsRCxNQUFNWSxnQkFBZ0JYLGtEQUFXQTt5REFBQyxDQUFDWTtZQUNqQyxNQUFNQyxTQUNKRCxLQUFLRSxVQUFVLEVBQUVDLFVBQVVDLFVBQzNCSixLQUFLRSxVQUFVLEVBQUVDLFVBQVVFLFNBQVNDLGNBQ3BDO1lBRUZDLFFBQVFDLGNBQWMsQ0FBQyxDQUFDLG1DQUFtQyxFQUFFUCxPQUFPLENBQUMsQ0FBQztZQUN0RU0sUUFBUUUsSUFBSSxDQUFDO1lBR2IscUNBQXFDO1lBQ3JDRixRQUFRRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSUMsT0FBT0MsV0FBVyxHQUFHLHVDQUF1QyxDQUFDLEVBQUU7Z0JBQ2pGQyxjQUFjYixLQUFLYyxRQUFRLEVBQUVDO2dCQUM3QkMsY0FBY2hCLEtBQUtjLFFBQVEsQ0FBQyxFQUFFLEVBQUVHLFVBQVVDO2dCQUMxQ0MsYUFBYW5CLEtBQUtjLFFBQVEsQ0FBQyxFQUFFLEVBQUVHLFVBQVVFO2dCQUN6Q0MsaUJBQWlCcEIsS0FBS2MsUUFBUSxDQUFDLEVBQUUsRUFBRUcsVUFBVUUsYUFBYUo7WUFDNUQ7WUFFQSxvQ0FBb0M7WUFDcENSLFFBQVFHLEdBQUcsQ0FBQyxzQkFBc0I7Z0JBQ2hDSSxVQUFVZCxLQUFLYyxRQUFRLENBQUNDLE1BQU07Z0JBQzlCRSxVQUFVakIsS0FBS2MsUUFBUSxDQUFDLEVBQUUsRUFBRUcsU0FBU0M7Z0JBQ3JDRyxlQUFlckIsS0FBS0UsVUFBVSxFQUFFbUI7Z0JBQ2hDQyxXQUFXdEIsS0FBS0UsVUFBVSxFQUFFb0I7WUFDOUI7WUFFQTVCO2lFQUFtQjZCLENBQUFBO29CQUNqQixNQUFNQyxVQUFVO3dCQUNkLEdBQUdELElBQUk7d0JBQ1AsR0FBR3ZCLElBQUk7d0JBQ1BFLFlBQVk7NEJBQ1YsR0FBR3FCLE1BQU1yQixVQUFVOzRCQUNuQixHQUFHRixLQUFLRSxVQUFVOzRCQUNsQm9CLFdBQVd0QixLQUFLRSxVQUFVLEVBQUVvQixhQUFhQyxNQUFNckIsWUFBWW9CLGFBQWE7d0JBQzFFO29CQUNGO29CQUNBZixRQUFRRyxHQUFHLENBQUM7b0JBQ1osT0FBT2M7Z0JBQ1Q7O1lBRUE1QixpQkFBaUJJLEtBQUtFLFVBQVUsRUFBRW1CLGlCQUFpQjtZQUNuRGQsUUFBUUcsR0FBRyxDQUFDLCtCQUErQlYsS0FBS0UsVUFBVSxFQUFFbUIsaUJBQWlCO1lBRTdFdkIsa0JBQWtCMkIsUUFBUXpCLEtBQUtFLFVBQVUsRUFBRW9CO1lBQzNDZixRQUFRRyxHQUFHLENBQUMsZ0NBQWdDZSxRQUFRekIsS0FBS0UsVUFBVSxFQUFFb0I7WUFHckVmLFFBQVFtQixPQUFPLENBQUM7WUFDaEJuQixRQUFRb0IsUUFBUTtRQUNsQjt3REFBRyxFQUFFO0lBRUwsTUFBTUMsY0FBY3hDLGtEQUFXQTt1REFBQyxDQUFDTztZQUMvQlksUUFBUUcsR0FBRyxDQUFDLHFDQUFxQ2Y7WUFDakRDLGlCQUFpQkQ7UUFDbkI7c0RBQUcsRUFBRTtJQUVMLE1BQU1rQyxlQUFlekMsa0RBQVdBO3dEQUFDLENBQUNrQztZQUNoQ2YsUUFBUUcsR0FBRyxDQUFDLHNDQUFzQ1k7WUFDbER4QixrQkFBa0J3QjtRQUNwQjt1REFBRyxFQUFFO0lBRUwsTUFBTVEsZUFBdUM7UUFDM0NyQztRQUNBTTtRQUNBSjtRQUNBaUM7UUFDQS9CO1FBQ0FnQztJQUNGO0lBRUEscUJBQU8sOERBQUN4QyxrQkFBa0IwQyxRQUFRO1FBQUNDLE9BQU9GO2tCQUFldEM7Ozs7OztBQUMzRCxFQUFFO0FBRUY7Ozs7Q0FJQyxHQUNNLE1BQU15Qyx1QkFBdUI7SUFDbEMsTUFBTUMsVUFBVWhELGlEQUFVQSxDQUFDRztJQUMzQixJQUFJLENBQUM2QyxTQUFTLE1BQU0sSUFBSUMsTUFBTTtJQUM5QixPQUFPRDtBQUNULEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbnRleHQvRmxpZ2h0UGxhbkNvbnRleHQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIFJlYWN0Tm9kZSB9IGZyb20gJ3JlYWN0JztcblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIHdheXBvaW50IGRhdGFcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBXYXlwb2ludERhdGEge1xuICBpbmRleDogbnVtYmVyO1xuICBhbHRpdHVkZU1vZGU6IFwidGVycmFpblwiIHwgXCJyZWxhdGl2ZVwiIHwgXCJhYnNvbHV0ZVwiO1xuICBvcmlnaW5hbEFsdGl0dWRlOiBudW1iZXI7XG4gIGNvbW1hbmRUeXBlPzogbnVtYmVyO1xuICBmcmFtZT86IG51bWJlcjtcbiAgcGFyYW1zPzogbnVtYmVyW107XG59XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBmbGlnaHQgcGxhbiBjb25maWd1cmF0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmxpZ2h0UGxhbkNvbmZpZyB7XG4gIHRha2VvZmZIZWlnaHQ/OiBudW1iZXI7XG4gIHNwZWVkPzogbnVtYmVyO1xuICBmaW5pc2hBY3Rpb24/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBmbGlnaHQgcGxhbiBtZXRhZGF0YVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZsaWdodFBsYW5NZXRhZGF0YSB7XG4gIGNyZWF0ZWQ/OiBudW1iZXI7XG4gIHVwZGF0ZWQ/OiBudW1iZXI7XG4gIGRpc3RhbmNlPzogbnVtYmVyO1xuICBwcm9jZXNzZWQ6IGJvb2xlYW47XG4gIHNvdXJjZT86IHN0cmluZztcbiAgbWV0YWRhdGE/OiB7IFxuICAgIGZpbGU/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+OyBcbiAgICBzZWdtZW50cz86IFJlY29yZDxzdHJpbmcsIGFueT5bXTtcbiAgICBuYXZpZ2F0aW9uSW5kaWNlcz86IG51bWJlcltdOyAvLyBBRERFRDogTWlzc2luZyBuYXZpZ2F0aW9uIGluZGljZXNcbiAgfTtcbn1cblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIGZsaWdodCBwbGFuIGZlYXR1cmVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGbGlnaHRQbGFuRmVhdHVyZSBleHRlbmRzIEdlb0pTT04uRmVhdHVyZSB7XG4gIHR5cGU6IFwiRmVhdHVyZVwiO1xuICBnZW9tZXRyeToge1xuICAgIHR5cGU6IFwiTGluZVN0cmluZ1wiO1xuICAgIGNvb3JkaW5hdGVzOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXTtcbiAgfTtcbiAgcHJvcGVydGllczoge1xuICAgIHdheXBvaW50czogV2F5cG9pbnREYXRhW107XG4gICAgb3JpZ2luYWxDb29yZGluYXRlcz86IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdO1xuICB9O1xufVxuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgZmxpZ2h0IHBsYW4gZGF0YVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZsaWdodFBsYW5EYXRhIGV4dGVuZHMgR2VvSlNPTi5GZWF0dXJlQ29sbGVjdGlvbiB7XG4gIHByb3BlcnRpZXM6IHtcbiAgICBob21lUG9zaXRpb246IHsgbG9uZ2l0dWRlOiBudW1iZXI7IGxhdGl0dWRlOiBudW1iZXI7IGFsdGl0dWRlOiBudW1iZXIgfTtcbiAgICBjb25maWc/OiBGbGlnaHRQbGFuQ29uZmlnO1xuICAgIG1ldGFkYXRhPzogRmxpZ2h0UGxhbk1ldGFkYXRhO1xuICAgIHRvdGFsRGlzdGFuY2U/OiBudW1iZXI7XG4gICAgcHJvY2Vzc2VkPzogYm9vbGVhbjtcbiAgICBwbGFjZWhvbGRlcj86IGJvb2xlYW47IC8vIEFEREVEOiBNaXNzaW5nIHBsYWNlaG9sZGVyIHByb3BlcnR5XG4gIH07XG4gIGZlYXR1cmVzOiBGbGlnaHRQbGFuRmVhdHVyZVtdO1xuICB3YXlwb2ludERpc3RhbmNlcz86IG51bWJlcltdO1xuICBvcmlnaW5hbFdheXBvaW50RGlzdGFuY2VzPzogbnVtYmVyW107XG59XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBGbGlnaHRQbGFuQ29udGV4dFxuICovXG5pbnRlcmZhY2UgRmxpZ2h0UGxhbkNvbnRleHRQcm9wcyB7XG4gIGZsaWdodFBsYW46IEZsaWdodFBsYW5EYXRhIHwgbnVsbDtcbiAgc2V0RmxpZ2h0UGxhbjogKGRhdGE6IEZsaWdodFBsYW5EYXRhKSA9PiB2b2lkO1xuICBkaXN0YW5jZTogbnVtYmVyIHwgbnVsbDtcbiAgc2V0RGlzdGFuY2U6IChkaXN0YW5jZTogbnVtYmVyKSA9PiB2b2lkO1xuICBpc1Byb2Nlc3NlZDogYm9vbGVhbjtcbiAgc2V0UHJvY2Vzc2VkOiAocHJvY2Vzc2VkOiBib29sZWFuKSA9PiB2b2lkO1xufVxuXG5jb25zdCBGbGlnaHRQbGFuQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8RmxpZ2h0UGxhbkNvbnRleHRQcm9wcyB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcblxuLyoqXG4gKiBQcm92aWRlcyBmbGlnaHQgcGxhbiBzdGF0ZSBhbmQgbWV0aG9kc1xuICogQHBhcmFtIGNoaWxkcmVuIC0gUmVhY3QgY29tcG9uZW50cyB0byByZW5kZXIgd2l0aGluIHRoZSBwcm92aWRlclxuICovXG5leHBvcnQgY29uc3QgRmxpZ2h0UGxhblByb3ZpZGVyOiBSZWFjdC5GQzx7IGNoaWxkcmVuOiBSZWFjdE5vZGUgfT4gPSAoeyBjaGlsZHJlbiB9KSA9PiB7XG4gIGNvbnN0IFtmbGlnaHRQbGFuLCBzZXRGbGlnaHRQbGFuU3RhdGVdID0gdXNlU3RhdGU8RmxpZ2h0UGxhbkRhdGEgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2Rpc3RhbmNlLCBzZXREaXN0YW5jZVN0YXRlXSA9IHVzZVN0YXRlPG51bWJlciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNQcm9jZXNzZWQsIHNldFByb2Nlc3NlZFN0YXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBzZXRGbGlnaHRQbGFuID0gdXNlQ2FsbGJhY2soKGRhdGE6IEZsaWdodFBsYW5EYXRhKSA9PiB7XG4gICAgY29uc3QgcGxhbklkID1cbiAgICAgIGRhdGEucHJvcGVydGllcz8ubWV0YWRhdGE/LnNvdXJjZSB8fFxuICAgICAgZGF0YS5wcm9wZXJ0aWVzPy5tZXRhZGF0YT8uY3JlYXRlZD8udG9TdHJpbmcoKSB8fFxuICAgICAgJ3Vua25vd24nO1xuXG4gICAgY29uc29sZS5ncm91cENvbGxhcHNlZChgW0ZsaWdodFBsYW5Db250ZXh0XSBzZXRGbGlnaHRQbGFuICgke3BsYW5JZH0pYCk7XG4gICAgY29uc29sZS50aW1lKCdbRmxpZ2h0UGxhbkNvbnRleHRdIOKPsSBzZXRGbGlnaHRQbGFuJyk7XG5cblxuICAgIC8vIEFkZCBkZWJ1ZyBsb2cgZm9yIGZsaWdodCBwbGFuIGRhdGFcbiAgICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0ZsaWdodFBsYW5Db250ZXh0XSBGbGlnaHQgcGxhbiBkYXRhOmAsIHtcbiAgICAgIGZlYXR1cmVDb3VudDogZGF0YS5mZWF0dXJlcz8ubGVuZ3RoLFxuICAgICAgZ2VvbWV0cnlUeXBlOiBkYXRhLmZlYXR1cmVzWzBdPy5nZW9tZXRyeT8udHlwZSxcbiAgICAgIGNvb3JkaW5hdGVzOiBkYXRhLmZlYXR1cmVzWzBdPy5nZW9tZXRyeT8uY29vcmRpbmF0ZXMsXG4gICAgICBjb29yZGluYXRlQ291bnQ6IGRhdGEuZmVhdHVyZXNbMF0/Lmdlb21ldHJ5Py5jb29yZGluYXRlcz8ubGVuZ3RoXG4gICAgfSk7XG5cbiAgICAvLyBDcml0aWNhbCBzdW1tYXJ5IG9mIGluY29taW5nIGRhdGFcbiAgICBjb25zb2xlLmxvZygn4pa2IEluY29taW5nIHN1bW1hcnknLCB7XG4gICAgICBmZWF0dXJlczogZGF0YS5mZWF0dXJlcy5sZW5ndGgsXG4gICAgICBnZW9tZXRyeTogZGF0YS5mZWF0dXJlc1swXT8uZ2VvbWV0cnkudHlwZSxcbiAgICAgIHRvdGFsRGlzdGFuY2U6IGRhdGEucHJvcGVydGllcz8udG90YWxEaXN0YW5jZSxcbiAgICAgIHByb2Nlc3NlZDogZGF0YS5wcm9wZXJ0aWVzPy5wcm9jZXNzZWQsXG4gICAgfSk7XG5cbiAgICBzZXRGbGlnaHRQbGFuU3RhdGUocHJldiA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVkID0ge1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgLi4ucHJldj8ucHJvcGVydGllcyxcbiAgICAgICAgICAuLi5kYXRhLnByb3BlcnRpZXMsXG4gICAgICAgICAgcHJvY2Vzc2VkOiBkYXRhLnByb3BlcnRpZXM/LnByb2Nlc3NlZCA/PyBwcmV2Py5wcm9wZXJ0aWVzPy5wcm9jZXNzZWQgPz8gZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9IGFzIEZsaWdodFBsYW5EYXRhO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBGbGlnaHQgcGxhbiBzdGF0ZSBwcmVwYXJlZCcpO1xuICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgfSk7XG5cbiAgICBzZXREaXN0YW5jZVN0YXRlKGRhdGEucHJvcGVydGllcz8udG90YWxEaXN0YW5jZSA/PyBudWxsKTtcbiAgICBjb25zb2xlLmxvZygn4oS577iPIERpc3RhbmNlIHN0YXRlIHVwZGF0ZWQg4oaSJywgZGF0YS5wcm9wZXJ0aWVzPy50b3RhbERpc3RhbmNlID8/IG51bGwpO1xuXG4gICAgc2V0UHJvY2Vzc2VkU3RhdGUoQm9vbGVhbihkYXRhLnByb3BlcnRpZXM/LnByb2Nlc3NlZCkpO1xuICAgIGNvbnNvbGUubG9nKCfihLnvuI8gUHJvY2Vzc2VkIHN0YXRlIHVwZGF0ZWQg4oaSJywgQm9vbGVhbihkYXRhLnByb3BlcnRpZXM/LnByb2Nlc3NlZCkpO1xuXG4gIFxuICAgIGNvbnNvbGUudGltZUVuZCgnW0ZsaWdodFBsYW5Db250ZXh0XSDij7Egc2V0RmxpZ2h0UGxhbicpO1xuICAgIGNvbnNvbGUuZ3JvdXBFbmQoKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHNldERpc3RhbmNlID0gdXNlQ2FsbGJhY2soKGRpc3RhbmNlOiBudW1iZXIpID0+IHtcbiAgICBjb25zb2xlLmxvZygnW0ZsaWdodFBsYW5Db250ZXh0XSBzZXREaXN0YW5jZSDihpInLCBkaXN0YW5jZSk7XG4gICAgc2V0RGlzdGFuY2VTdGF0ZShkaXN0YW5jZSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBzZXRQcm9jZXNzZWQgPSB1c2VDYWxsYmFjaygocHJvY2Vzc2VkOiBib29sZWFuKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1tGbGlnaHRQbGFuQ29udGV4dF0gc2V0UHJvY2Vzc2VkIOKGkicsIHByb2Nlc3NlZCk7XG4gICAgc2V0UHJvY2Vzc2VkU3RhdGUocHJvY2Vzc2VkKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGNvbnRleHRWYWx1ZTogRmxpZ2h0UGxhbkNvbnRleHRQcm9wcyA9IHtcbiAgICBmbGlnaHRQbGFuLFxuICAgIHNldEZsaWdodFBsYW4sXG4gICAgZGlzdGFuY2UsXG4gICAgc2V0RGlzdGFuY2UsXG4gICAgaXNQcm9jZXNzZWQsXG4gICAgc2V0UHJvY2Vzc2VkLFxuICB9O1xuXG4gIHJldHVybiA8RmxpZ2h0UGxhbkNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2NvbnRleHRWYWx1ZX0+e2NoaWxkcmVufTwvRmxpZ2h0UGxhbkNvbnRleHQuUHJvdmlkZXI+O1xufTtcblxuLyoqXG4gKiBIb29rIHRvIGFjY2VzcyB0aGUgRmxpZ2h0UGxhbkNvbnRleHRcbiAqIEByZXR1cm5zIFRoZSBGbGlnaHRQbGFuQ29udGV4dCBwcm9wZXJ0aWVzXG4gKiBAdGhyb3dzIEVycm9yIGlmIHVzZWQgb3V0c2lkZSBvZiBGbGlnaHRQbGFuUHJvdmlkZXJcbiAqL1xuZXhwb3J0IGNvbnN0IHVzZUZsaWdodFBsYW5Db250ZXh0ID0gKCk6IEZsaWdodFBsYW5Db250ZXh0UHJvcHMgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChGbGlnaHRQbGFuQ29udGV4dCk7XG4gIGlmICghY29udGV4dCkgdGhyb3cgbmV3IEVycm9yKCd1c2VGbGlnaHRQbGFuQ29udGV4dCBtdXN0IGJlIHVzZWQgd2l0aGluIGEgRmxpZ2h0UGxhblByb3ZpZGVyJyk7XG4gIHJldHVybiBjb250ZXh0O1xufTsiXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJGbGlnaHRQbGFuQ29udGV4dCIsInVuZGVmaW5lZCIsIkZsaWdodFBsYW5Qcm92aWRlciIsImNoaWxkcmVuIiwiZmxpZ2h0UGxhbiIsInNldEZsaWdodFBsYW5TdGF0ZSIsImRpc3RhbmNlIiwic2V0RGlzdGFuY2VTdGF0ZSIsImlzUHJvY2Vzc2VkIiwic2V0UHJvY2Vzc2VkU3RhdGUiLCJzZXRGbGlnaHRQbGFuIiwiZGF0YSIsInBsYW5JZCIsInByb3BlcnRpZXMiLCJtZXRhZGF0YSIsInNvdXJjZSIsImNyZWF0ZWQiLCJ0b1N0cmluZyIsImNvbnNvbGUiLCJncm91cENvbGxhcHNlZCIsInRpbWUiLCJsb2ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJmZWF0dXJlQ291bnQiLCJmZWF0dXJlcyIsImxlbmd0aCIsImdlb21ldHJ5VHlwZSIsImdlb21ldHJ5IiwidHlwZSIsImNvb3JkaW5hdGVzIiwiY29vcmRpbmF0ZUNvdW50IiwidG90YWxEaXN0YW5jZSIsInByb2Nlc3NlZCIsInByZXYiLCJ1cGRhdGVkIiwiQm9vbGVhbiIsInRpbWVFbmQiLCJncm91cEVuZCIsInNldERpc3RhbmNlIiwic2V0UHJvY2Vzc2VkIiwiY29udGV4dFZhbHVlIiwiUHJvdmlkZXIiLCJ2YWx1ZSIsInVzZUZsaWdodFBsYW5Db250ZXh0IiwiY29udGV4dCIsIkVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/context/FlightPlanContext.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/context/LOSAnalysisContext.tsx":
/*!************************************************!*\
  !*** ./src/app/context/LOSAnalysisContext.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LOSAnalysisProvider: () => (/* binding */ LOSAnalysisProvider),\n/* harmony export */   useLOSAnalysis: () => (/* binding */ useLOSAnalysis)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n// src/context/LOSAnalysisContext.tsx\n/* __next_internal_client_entry_do_not_use__ LOSAnalysisProvider,useLOSAnalysis auto */ \n\n// ======== Default Values ========\nconst DEFAULT_MARKER_CONFIG = {\n    gridRange: 500\n};\nconst DEFAULT_MARKER_CONFIGS = {\n    gcs: {\n        ...DEFAULT_MARKER_CONFIG\n    },\n    observer: {\n        ...DEFAULT_MARKER_CONFIG\n    },\n    repeater: {\n        ...DEFAULT_MARKER_CONFIG\n    }\n};\n// Default sampling resolution (10 meters)\nconst DEFAULT_SAMPLING_RESOLUTION = 10;\n// ======== Context Creation ========\nconst LOSAnalysisContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\n// ======== Provider Component ========\nfunction LOSAnalysisProvider({ children }) {\n    // Configuration State\n    const [gridSize, setGridSize] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(30);\n    const [elosGridRange, setElosGridRange] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1000);\n    const [markerConfigs, setMarkerConfigs] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_MARKER_CONFIGS);\n    // Add sampling resolution state\n    const [samplingResolution, setSamplingResolution] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_SAMPLING_RESOLUTION);\n    // Analysis State\n    const [isAnalyzing, setIsAnalyzing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [results, setResults] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [progress, setProgress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    // Marker Configuration Handler (now only updates gridRange)\n    const handleMarkerConfigUpdate = (markerType, config)=>{\n        setMarkerConfigs((prev)=>({\n                ...prev,\n                [markerType]: {\n                    ...prev[markerType],\n                    ...config\n                }\n            }));\n    };\n    // Analysis Reset Handler\n    const resetAnalysis = ()=>{\n        setResults(null);\n        setError(null);\n        setIsAnalyzing(false);\n        setProgress(0);\n    };\n    const contextValue = {\n        // Configuration State\n        gridSize,\n        elosGridRange,\n        markerConfigs,\n        samplingResolution,\n        // Analysis State\n        isAnalyzing,\n        results,\n        error,\n        progress,\n        setProgress,\n        // Configuration Actions\n        setGridSize,\n        setElosGridRange,\n        setMarkerConfig: handleMarkerConfigUpdate,\n        setSamplingResolution,\n        // Analysis Actions\n        setResults,\n        setIsAnalyzing,\n        setError,\n        resetAnalysis\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(LOSAnalysisContext.Provider, {\n        value: contextValue,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/context/LOSAnalysisContext.tsx\",\n        lineNumber: 180,\n        columnNumber: 5\n    }, this);\n}\n// ======== Custom Hook ========\nfunction useLOSAnalysis() {\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(LOSAnalysisContext);\n    if (context === undefined) {\n        throw new Error('useLOSAnalysis must be used within a LOSAnalysisProvider');\n    }\n    return context;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbnRleHQvTE9TQW5hbHlzaXNDb250ZXh0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxxQ0FBcUM7O0FBRXlDO0FBK0Y5RSxtQ0FBbUM7QUFDbkMsTUFBTUksd0JBQXNDO0lBQzFDQyxXQUFXO0FBQ2I7QUFFQSxNQUFNQyx5QkFBd0M7SUFDNUNDLEtBQUs7UUFBRSxHQUFHSCxxQkFBcUI7SUFBQztJQUNoQ0ksVUFBVTtRQUFFLEdBQUdKLHFCQUFxQjtJQUFDO0lBQ3JDSyxVQUFVO1FBQUUsR0FBR0wscUJBQXFCO0lBQUM7QUFDdkM7QUFFQSwwQ0FBMEM7QUFDMUMsTUFBTU0sOEJBQThCO0FBRXBDLHFDQUFxQztBQUNyQyxNQUFNQyxtQ0FBcUJWLG9EQUFhQSxDQUFxQ1c7QUFFN0UsdUNBQXVDO0FBQ2hDLFNBQVNDLG9CQUFvQixFQUFFQyxRQUFRLEVBQTJCO0lBQ3ZFLHNCQUFzQjtJQUN0QixNQUFNLENBQUNDLFVBQVVDLFlBQVksR0FBR2IsK0NBQVFBLENBQVM7SUFDakQsTUFBTSxDQUFDYyxlQUFlQyxpQkFBaUIsR0FBR2YsK0NBQVFBLENBQVM7SUFDM0QsTUFBTSxDQUFDZ0IsZUFBZUMsaUJBQWlCLEdBQUdqQiwrQ0FBUUEsQ0FBZ0JHO0lBQ2xFLGdDQUFnQztJQUNoQyxNQUFNLENBQUNlLG9CQUFvQkMsc0JBQXNCLEdBQUduQiwrQ0FBUUEsQ0FBU087SUFFckUsaUJBQWlCO0lBQ2pCLE1BQU0sQ0FBQ2EsYUFBYUMsZUFBZSxHQUFHckIsK0NBQVFBLENBQVU7SUFDeEQsTUFBTSxDQUFDc0IsU0FBU0MsV0FBVyxHQUFHdkIsK0NBQVFBLENBQXlCO0lBQy9ELE1BQU0sQ0FBQ3dCLE9BQU9DLFNBQVMsR0FBR3pCLCtDQUFRQSxDQUFnQjtJQUNsRCxNQUFNLENBQUMwQixVQUFVQyxZQUFZLEdBQUczQiwrQ0FBUUEsQ0FBUztJQUVqRCw0REFBNEQ7SUFDNUQsTUFBTTRCLDJCQUEyQixDQUMvQkMsWUFDQUM7UUFFQWIsaUJBQWlCYyxDQUFBQSxPQUFTO2dCQUN4QixHQUFHQSxJQUFJO2dCQUNQLENBQUNGLFdBQVcsRUFBRTtvQkFDWixHQUFHRSxJQUFJLENBQUNGLFdBQVc7b0JBQ25CLEdBQUdDLE1BQU07Z0JBQ1g7WUFDRjtJQUNGO0lBRUEseUJBQXlCO0lBQ3pCLE1BQU1FLGdCQUFnQjtRQUNwQlQsV0FBVztRQUNYRSxTQUFTO1FBQ1RKLGVBQWU7UUFDZk0sWUFBWTtJQUNkO0lBRUEsTUFBTU0sZUFBZTtRQUNuQixzQkFBc0I7UUFDdEJyQjtRQUNBRTtRQUNBRTtRQUNBRTtRQUVBLGlCQUFpQjtRQUNqQkU7UUFDQUU7UUFDQUU7UUFDQUU7UUFDQUM7UUFFQSx3QkFBd0I7UUFDeEJkO1FBQ0FFO1FBQ0FtQixpQkFBaUJOO1FBQ2pCVDtRQUVBLG1CQUFtQjtRQUNuQkk7UUFDQUY7UUFDQUk7UUFDQU87SUFDRjtJQUVBLHFCQUNFLDhEQUFDeEIsbUJBQW1CMkIsUUFBUTtRQUFDQyxPQUFPSDtrQkFDakN0Qjs7Ozs7O0FBR1A7QUFFQSxnQ0FBZ0M7QUFDekIsU0FBUzBCO0lBQ2QsTUFBTUMsVUFBVXZDLGlEQUFVQSxDQUFDUztJQUMzQixJQUFJOEIsWUFBWTdCLFdBQVc7UUFDekIsTUFBTSxJQUFJOEIsTUFBTTtJQUNsQjtJQUNBLE9BQU9EO0FBQ1QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbnRleHQvTE9TQW5hbHlzaXNDb250ZXh0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29udGV4dC9MT1NBbmFseXNpc0NvbnRleHQudHN4XG5cInVzZSBjbGllbnRcIjtcbmltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3RhdGlvbkxPU1Jlc3VsdCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQW5hbHlzZXMvVHlwZXMvR3JpZEFuYWx5c2lzVHlwZXMnO1xuXG4vLyA9PT09PT09PSBUeXBlIERlZmluaXRpb25zID09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JpZENlbGwge1xuICBpZDogc3RyaW5nO1xuICBnZW9tZXRyeTogR2VvSlNPTi5Qb2x5Z29uO1xuICBwcm9wZXJ0aWVzOiB7XG4gICAgdmlzaWJpbGl0eTogbnVtYmVyO1xuICAgIGZ1bGx5VmlzaWJsZTogYm9vbGVhbjtcbiAgICBlbGV2YXRpb24/OiBudW1iZXI7XG4gICAgbGFzdEFuYWx5emVkOiBudW1iZXI7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5hbHlzaXNTdGF0cyB7XG4gIHZpc2libGVDZWxsczogbnVtYmVyO1xuICB0b3RhbENlbGxzOiBudW1iZXI7XG4gIGF2ZXJhZ2VWaXNpYmlsaXR5OiBudW1iZXI7XG4gIGFuYWx5c2lzVGltZTogbnVtYmVyO1xuICAvLyBBZGQgdGVycmFpblN0YXRzIHByb3BlcnR5IGZvciB0ZXJyYWluIGFuYWx5c2lzXG4gIHRlcnJhaW5TdGF0cz86IHtcbiAgICBoaWdoZXN0RWxldmF0aW9uOiBudW1iZXI7XG4gICAgbG93ZXN0RWxldmF0aW9uOiBudW1iZXI7XG4gICAgYXZlcmFnZUVsZXZhdGlvbjogbnVtYmVyO1xuICAgIGVsZXZhdGlvbkRpc3RyaWJ1dGlvbjogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgICBzYW1wbGVFbGV2YXRpb25zPzogbnVtYmVyW107XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5hbHlzaXNSZXN1bHRzIHtcbiAgY2VsbHM6IEdyaWRDZWxsW107XG4gIHN0YXRzOiBBbmFseXNpc1N0YXRzIHwgbnVsbDtcbiAgc3RhdGlvbkxPU1Jlc3VsdD86IFN0YXRpb25MT1NSZXN1bHQ7XG4gIGZsaWdodFBhdGhWaXNpYmlsaXR5PzogRmxpZ2h0UGF0aFZpc2liaWxpdHlSZXN1bHRzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZsaWdodFBhdGhWaXNpYmlsaXR5UmVzdWx0cyB7XG4gIHZpc2libGVMZW5ndGg6IG51bWJlcjtcbiAgdG90YWxMZW5ndGg6IG51bWJlcjtcbiAgY292ZXJhZ2VQZXJjZW50YWdlOiBudW1iZXI7XG4gIHN0YXRpb25TdGF0cz86IEFycmF5PHtcbiAgICBzdGF0aW9uVHlwZTogJ2djcycgfCAnb2JzZXJ2ZXInIHwgJ3JlcGVhdGVyJztcbiAgICB2aXNpYmxlTGVuZ3RoOiBudW1iZXI7XG4gICAgY292ZXJhZ2VQZXJjZW50YWdlOiBudW1iZXI7XG4gIH0+O1xufVxuXG4vLyBNYXJrZXIgQ29uZmlndXJhdGlvbiBUeXBlc1xuLy8gTm90ZTogRWxldmF0aW9uIG9mZnNldCBoYXMgYmVlbiByZW1vdmVkIGZyb20gbWFya2VyIGNvbmZpZ3VyYXRpb25zXG4vLyBiZWNhdXNlIGVsZXZhdGlvbiBpcyBub3cgbWFuYWdlZCB2aWEgTG9jYXRpb25Db250ZXh0LlxuZXhwb3J0IGludGVyZmFjZSBNYXJrZXJDb25maWcge1xuICBncmlkUmFuZ2U6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNYXJrZXJDb25maWdzIHtcbiAgZ2NzOiBNYXJrZXJDb25maWc7XG4gIG9ic2VydmVyOiBNYXJrZXJDb25maWc7XG4gIHJlcGVhdGVyOiBNYXJrZXJDb25maWc7XG59XG5cbi8vID09PT09PT09IENvbnRleHQgSW50ZXJmYWNlID09PT09PT09XG5pbnRlcmZhY2UgTE9TQW5hbHlzaXNDb250ZXh0VHlwZSB7XG4gIC8vIENvbmZpZ3VyYXRpb24gU3RhdGVcbiAgZ3JpZFNpemU6IG51bWJlcjtcbiAgZWxvc0dyaWRSYW5nZTogbnVtYmVyO1xuICBtYXJrZXJDb25maWdzOiBNYXJrZXJDb25maWdzO1xuICAvLyBOZXcgc2FtcGxpbmcgcmVzb2x1dGlvbiBzdGF0ZVxuICBzYW1wbGluZ1Jlc29sdXRpb246IG51bWJlcjtcbiAgXG4gIC8vIEFuYWx5c2lzIFN0YXRlXG4gIGlzQW5hbHl6aW5nOiBib29sZWFuO1xuICByZXN1bHRzOiBBbmFseXNpc1Jlc3VsdHMgfCBudWxsO1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcbiAgcHJvZ3Jlc3M6IG51bWJlcjtcbiAgXG4gIC8vIENvbmZpZ3VyYXRpb24gQWN0aW9uc1xuICBzZXRHcmlkU2l6ZTogKHNpemU6IG51bWJlcikgPT4gdm9pZDtcbiAgc2V0RWxvc0dyaWRSYW5nZTogKHJhbmdlOiBudW1iZXIpID0+IHZvaWQ7XG4gIHNldE1hcmtlckNvbmZpZzogKFxuICAgIG1hcmtlclR5cGU6IGtleW9mIE1hcmtlckNvbmZpZ3MsXG4gICAgY29uZmlnOiBQYXJ0aWFsPE1hcmtlckNvbmZpZz5cbiAgKSA9PiB2b2lkO1xuICAvLyBOZXcgc2V0dGVyIGZvciBzYW1wbGluZyByZXNvbHV0aW9uXG4gIHNldFNhbXBsaW5nUmVzb2x1dGlvbjogKHJlc29sdXRpb246IG51bWJlcikgPT4gdm9pZDtcblxuICAvLyBBbmFseXNpcyBBY3Rpb25zXG4gIHNldFJlc3VsdHM6IChyZXN1bHRzOiBBbmFseXNpc1Jlc3VsdHMgfCBudWxsKSA9PiB2b2lkO1xuICBzZXRJc0FuYWx5emluZzogKGFuYWx5emluZzogYm9vbGVhbikgPT4gdm9pZDtcbiAgc2V0RXJyb3I6IChlcnJvcjogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZDtcbiAgc2V0UHJvZ3Jlc3M6IChwcm9ncmVzczogbnVtYmVyKSA9PiB2b2lkO1xuICByZXNldEFuYWx5c2lzOiAoKSA9PiB2b2lkO1xufVxuXG4vLyA9PT09PT09PSBEZWZhdWx0IFZhbHVlcyA9PT09PT09PVxuY29uc3QgREVGQVVMVF9NQVJLRVJfQ09ORklHOiBNYXJrZXJDb25maWcgPSB7XG4gIGdyaWRSYW5nZTogNTAwLFxufTtcblxuY29uc3QgREVGQVVMVF9NQVJLRVJfQ09ORklHUzogTWFya2VyQ29uZmlncyA9IHtcbiAgZ2NzOiB7IC4uLkRFRkFVTFRfTUFSS0VSX0NPTkZJRyB9LFxuICBvYnNlcnZlcjogeyAuLi5ERUZBVUxUX01BUktFUl9DT05GSUcgfSxcbiAgcmVwZWF0ZXI6IHsgLi4uREVGQVVMVF9NQVJLRVJfQ09ORklHIH0sXG59O1xuXG4vLyBEZWZhdWx0IHNhbXBsaW5nIHJlc29sdXRpb24gKDEwIG1ldGVycylcbmNvbnN0IERFRkFVTFRfU0FNUExJTkdfUkVTT0xVVElPTiA9IDEwO1xuXG4vLyA9PT09PT09PSBDb250ZXh0IENyZWF0aW9uID09PT09PT09XG5jb25zdCBMT1NBbmFseXNpc0NvbnRleHQgPSBjcmVhdGVDb250ZXh0PExPU0FuYWx5c2lzQ29udGV4dFR5cGUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG5cbi8vID09PT09PT09IFByb3ZpZGVyIENvbXBvbmVudCA9PT09PT09PVxuZXhwb3J0IGZ1bmN0aW9uIExPU0FuYWx5c2lzUHJvdmlkZXIoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdE5vZGUgfSkge1xuICAvLyBDb25maWd1cmF0aW9uIFN0YXRlXG4gIGNvbnN0IFtncmlkU2l6ZSwgc2V0R3JpZFNpemVdID0gdXNlU3RhdGU8bnVtYmVyPigzMCk7XG4gIGNvbnN0IFtlbG9zR3JpZFJhbmdlLCBzZXRFbG9zR3JpZFJhbmdlXSA9IHVzZVN0YXRlPG51bWJlcj4oMTAwMCk7XG4gIGNvbnN0IFttYXJrZXJDb25maWdzLCBzZXRNYXJrZXJDb25maWdzXSA9IHVzZVN0YXRlPE1hcmtlckNvbmZpZ3M+KERFRkFVTFRfTUFSS0VSX0NPTkZJR1MpO1xuICAvLyBBZGQgc2FtcGxpbmcgcmVzb2x1dGlvbiBzdGF0ZVxuICBjb25zdCBbc2FtcGxpbmdSZXNvbHV0aW9uLCBzZXRTYW1wbGluZ1Jlc29sdXRpb25dID0gdXNlU3RhdGU8bnVtYmVyPihERUZBVUxUX1NBTVBMSU5HX1JFU09MVVRJT04pO1xuICBcbiAgLy8gQW5hbHlzaXMgU3RhdGVcbiAgY29uc3QgW2lzQW5hbHl6aW5nLCBzZXRJc0FuYWx5emluZ10gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFtyZXN1bHRzLCBzZXRSZXN1bHRzXSA9IHVzZVN0YXRlPEFuYWx5c2lzUmVzdWx0cyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbcHJvZ3Jlc3MsIHNldFByb2dyZXNzXSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XG5cbiAgLy8gTWFya2VyIENvbmZpZ3VyYXRpb24gSGFuZGxlciAobm93IG9ubHkgdXBkYXRlcyBncmlkUmFuZ2UpXG4gIGNvbnN0IGhhbmRsZU1hcmtlckNvbmZpZ1VwZGF0ZSA9IChcbiAgICBtYXJrZXJUeXBlOiBrZXlvZiBNYXJrZXJDb25maWdzLFxuICAgIGNvbmZpZzogUGFydGlhbDxNYXJrZXJDb25maWc+XG4gICkgPT4ge1xuICAgIHNldE1hcmtlckNvbmZpZ3MocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIFttYXJrZXJUeXBlXToge1xuICAgICAgICAuLi5wcmV2W21hcmtlclR5cGVdLFxuICAgICAgICAuLi5jb25maWcsXG4gICAgICB9LFxuICAgIH0pKTtcbiAgfTtcblxuICAvLyBBbmFseXNpcyBSZXNldCBIYW5kbGVyXG4gIGNvbnN0IHJlc2V0QW5hbHlzaXMgPSAoKSA9PiB7XG4gICAgc2V0UmVzdWx0cyhudWxsKTtcbiAgICBzZXRFcnJvcihudWxsKTtcbiAgICBzZXRJc0FuYWx5emluZyhmYWxzZSk7XG4gICAgc2V0UHJvZ3Jlc3MoMCk7XG4gIH07XG5cbiAgY29uc3QgY29udGV4dFZhbHVlID0ge1xuICAgIC8vIENvbmZpZ3VyYXRpb24gU3RhdGVcbiAgICBncmlkU2l6ZSxcbiAgICBlbG9zR3JpZFJhbmdlLFxuICAgIG1hcmtlckNvbmZpZ3MsXG4gICAgc2FtcGxpbmdSZXNvbHV0aW9uLCAvLyBBZGQgdG8gY29udGV4dCB2YWx1ZVxuICAgIFxuICAgIC8vIEFuYWx5c2lzIFN0YXRlXG4gICAgaXNBbmFseXppbmcsXG4gICAgcmVzdWx0cyxcbiAgICBlcnJvcixcbiAgICBwcm9ncmVzcyxcbiAgICBzZXRQcm9ncmVzcyxcbiAgICBcbiAgICAvLyBDb25maWd1cmF0aW9uIEFjdGlvbnNcbiAgICBzZXRHcmlkU2l6ZSxcbiAgICBzZXRFbG9zR3JpZFJhbmdlLFxuICAgIHNldE1hcmtlckNvbmZpZzogaGFuZGxlTWFya2VyQ29uZmlnVXBkYXRlLFxuICAgIHNldFNhbXBsaW5nUmVzb2x1dGlvbiwgLy8gQWRkIHRvIGNvbnRleHQgdmFsdWVcblxuICAgIC8vIEFuYWx5c2lzIEFjdGlvbnNcbiAgICBzZXRSZXN1bHRzLFxuICAgIHNldElzQW5hbHl6aW5nLFxuICAgIHNldEVycm9yLFxuICAgIHJlc2V0QW5hbHlzaXMsXG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8TE9TQW5hbHlzaXNDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjb250ZXh0VmFsdWV9PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvTE9TQW5hbHlzaXNDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufVxuXG4vLyA9PT09PT09PSBDdXN0b20gSG9vayA9PT09PT09PVxuZXhwb3J0IGZ1bmN0aW9uIHVzZUxPU0FuYWx5c2lzKCkge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChMT1NBbmFseXNpc0NvbnRleHQpO1xuICBpZiAoY29udGV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VMT1NBbmFseXNpcyBtdXN0IGJlIHVzZWQgd2l0aGluIGEgTE9TQW5hbHlzaXNQcm92aWRlcicpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufSJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJERUZBVUxUX01BUktFUl9DT05GSUciLCJncmlkUmFuZ2UiLCJERUZBVUxUX01BUktFUl9DT05GSUdTIiwiZ2NzIiwib2JzZXJ2ZXIiLCJyZXBlYXRlciIsIkRFRkFVTFRfU0FNUExJTkdfUkVTT0xVVElPTiIsIkxPU0FuYWx5c2lzQ29udGV4dCIsInVuZGVmaW5lZCIsIkxPU0FuYWx5c2lzUHJvdmlkZXIiLCJjaGlsZHJlbiIsImdyaWRTaXplIiwic2V0R3JpZFNpemUiLCJlbG9zR3JpZFJhbmdlIiwic2V0RWxvc0dyaWRSYW5nZSIsIm1hcmtlckNvbmZpZ3MiLCJzZXRNYXJrZXJDb25maWdzIiwic2FtcGxpbmdSZXNvbHV0aW9uIiwic2V0U2FtcGxpbmdSZXNvbHV0aW9uIiwiaXNBbmFseXppbmciLCJzZXRJc0FuYWx5emluZyIsInJlc3VsdHMiLCJzZXRSZXN1bHRzIiwiZXJyb3IiLCJzZXRFcnJvciIsInByb2dyZXNzIiwic2V0UHJvZ3Jlc3MiLCJoYW5kbGVNYXJrZXJDb25maWdVcGRhdGUiLCJtYXJrZXJUeXBlIiwiY29uZmlnIiwicHJldiIsInJlc2V0QW5hbHlzaXMiLCJjb250ZXh0VmFsdWUiLCJzZXRNYXJrZXJDb25maWciLCJQcm92aWRlciIsInZhbHVlIiwidXNlTE9TQW5hbHlzaXMiLCJjb250ZXh0IiwiRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/context/LOSAnalysisContext.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/context/MarkerContext.tsx":
/*!*******************************************!*\
  !*** ./src/app/context/MarkerContext.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MarkerProvider: () => (/* binding */ MarkerProvider),\n/* harmony export */   useMarkersContext: () => (/* binding */ useMarkersContext)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uuid */ \"(ssr)/../../../node_modules/uuid/dist/esm/v4.js\");\n/* harmony import */ var _PremiumContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PremiumContext */ \"(ssr)/./src/app/context/PremiumContext.tsx\");\n/* harmony import */ var _utils_premiumConfig__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/premiumConfig */ \"(ssr)/./src/app/utils/premiumConfig.ts\");\n// src/app/context/MarkerContext.tsx\n\n\n\n\n // Import TIER_CONFIG directly\nconst MarkerContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\n/**\n * Provider component for marker management\n */ function MarkerProvider({ children }) {\n    // Core state: collection of all markers\n    const [markers, setMarkers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    // Default elevation offsets for each marker type\n    const [defaultElevationOffsets, setDefaultElevationOffsets] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        gcs: 2,\n        observer: 2,\n        repeater: 2\n    });\n    // Get premium context\n    const { tierLevel, getTierName } = (0,_PremiumContext__WEBPACK_IMPORTED_MODULE_2__.usePremium)();\n    /**\n   * Adds a new marker of specified type if allowed by tier limitations\n   * @param type The marker type (gcs, observer, repeater)\n   * @param location The geographic location of the marker\n   * @param towerMetadata Optional metadata if marker is derived from a tower\n   * @returns Object with success status and either marker ID or error message\n   */ const addMarker = (type, location, towerMetadata)=>{\n        // Get current count of markers of this type\n        const typeCount = markers.filter((m)=>m.type === type).length;\n        // Get the maximum allowed for this marker type at current tier\n        const maxAllowed = _utils_premiumConfig__WEBPACK_IMPORTED_MODULE_3__.TIER_CONFIG[tierLevel].maxMarkers[type];\n        // Check if adding this marker is allowed by tier limitations\n        if (typeCount >= maxAllowed) {\n            const tierName = getTierName();\n            // Create a user-friendly error message based on the limitation\n            let errorMessage = '';\n            if (maxAllowed === 0) {\n                // This marker type is not available at this tier\n                errorMessage = `${tierName} tier doesn't support ${type} markers. Upgrade to add this marker type.`;\n            } else {\n                // User has reached their limit for this marker type\n                errorMessage = `${tierName} tier allows only ${maxAllowed} ${type} marker(s). Upgrade to add more.`;\n            }\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n        // If we get here, adding the marker is allowed\n        const id = (0,uuid__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n        const newMarker = {\n            id,\n            type,\n            location,\n            elevationOffset: defaultElevationOffsets[type],\n            // Include tower metadata if provided\n            ...towerMetadata && {\n                towerMetadata\n            }\n        };\n        setMarkers((prev)=>[\n                ...prev,\n                newMarker\n            ]);\n        return {\n            success: true,\n            markerId: id\n        };\n    };\n    // Update an existing marker\n    const updateMarker = (id, updates)=>{\n        setMarkers((prev)=>prev.map((marker)=>{\n                if (marker.id === id) {\n                    // Handle special case for towerMetadata to merge it properly\n                    if (updates.towerMetadata && marker.towerMetadata) {\n                        return {\n                            ...marker,\n                            ...updates,\n                            towerMetadata: {\n                                ...marker.towerMetadata,\n                                ...updates.towerMetadata\n                            }\n                        };\n                    }\n                    return {\n                        ...marker,\n                        ...updates\n                    };\n                }\n                return marker;\n            }));\n    };\n    // Remove a marker by ID\n    const removeMarker = (id)=>{\n        setMarkers((prev)=>prev.filter((marker)=>marker.id !== id));\n    };\n    // Set the default elevation offset for a marker type\n    const setDefaultElevationOffset = (type, offset)=>{\n        setDefaultElevationOffsets((prev)=>({\n                ...prev,\n                [type]: offset\n            }));\n        // Also update any existing markers of this type\n        setMarkers((prev)=>prev.map((marker)=>marker.type === type ? {\n                    ...marker,\n                    elevationOffset: offset\n                } : marker));\n    };\n    // Get markers filtered by type\n    const getMarkersByType = (type)=>{\n        return markers.filter((m)=>m.type === type);\n    };\n    // ADDED: Computed properties for backward compatibility\n    const gcsLocation = markers.find((m)=>m.type === 'gcs')?.location || null;\n    const observerLocation = markers.find((m)=>m.type === 'observer')?.location || null;\n    const repeaterLocation = markers.find((m)=>m.type === 'repeater')?.location || null;\n    const gcsElevationOffset = markers.find((m)=>m.type === 'gcs')?.elevationOffset || defaultElevationOffsets.gcs;\n    const observerElevationOffset = markers.find((m)=>m.type === 'observer')?.elevationOffset || defaultElevationOffsets.observer;\n    const repeaterElevationOffset = markers.find((m)=>m.type === 'repeater')?.elevationOffset || defaultElevationOffsets.repeater;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MarkerContext.Provider, {\n        value: {\n            markers,\n            addMarker,\n            updateMarker,\n            removeMarker,\n            defaultElevationOffsets,\n            setDefaultElevationOffset,\n            getMarkersByType,\n            // ADDED: Computed properties\n            gcsLocation,\n            observerLocation,\n            repeaterLocation,\n            gcsElevationOffset,\n            observerElevationOffset,\n            repeaterElevationOffset\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/context/MarkerContext.tsx\",\n        lineNumber: 202,\n        columnNumber: 5\n    }, this);\n}\n/**\n * Custom hook to access marker context\n */ function useMarkersContext() {\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(MarkerContext);\n    if (context === undefined) {\n        throw new Error('useMarkersContext must be used within a MarkerProvider');\n    }\n    return context;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UztZQUNBbUI7WUFDQUk7WUFDQTlCO1lBQ0ErQjtZQUNBRTtZQUNBLDZCQUE2QjtZQUM3QkM7WUFDQUU7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7UUFDRjtrQkFFQzNDOzs7Ozs7QUFHUDtBQUVBOztDQUVDLEdBQ00sU0FBUzhDO0lBQ2QsTUFBTUMsVUFBVXhELGlEQUFVQSxDQUFDTTtJQUMzQixJQUFJa0QsWUFBWWpELFdBQVc7UUFDekIsTUFBTSxJQUFJa0QsTUFBTTtJQUNsQjtJQUNBLE9BQU9EO0FBQ1QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2NvbnRleHQvTWFya2VyQ29udGV4dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2FwcC9jb250ZXh0L01hcmtlckNvbnRleHQudHN4XG5cbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMb2NhdGlvbkRhdGEgfSBmcm9tICcuLi90eXBlcy9Mb2NhdGlvbkRhdGEnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyB1c2VQcmVtaXVtLCBUaWVyTGV2ZWwgfSBmcm9tICcuL1ByZW1pdW1Db250ZXh0JztcbmltcG9ydCB7IFRJRVJfQ09ORklHIH0gZnJvbSAnLi4vdXRpbHMvcHJlbWl1bUNvbmZpZyc7IC8vIEltcG9ydCBUSUVSX0NPTkZJRyBkaXJlY3RseVxuXG4vLyBEZWZpbmUgbWFya2VyIHR5cGVzIGZvciB0eXBlIHNhZmV0eVxuZXhwb3J0IHR5cGUgTWFya2VyVHlwZSA9ICdnY3MnIHwgJ29ic2VydmVyJyB8ICdyZXBlYXRlcic7XG5cbi8vIERlZmluZSB0b3dlciBtZXRhZGF0YSBpbnRlcmZhY2VcbmV4cG9ydCBpbnRlcmZhY2UgVG93ZXJNZXRhZGF0YSB7XG4gIG9yaWdpbmFsVG93ZXJJZD86IHN0cmluZztcbiAgY2Fycmllcj86IHN0cmluZztcbiAgdGVjaG5vbG9neT86IHN0cmluZztcbiAgZnJlcXVlbmN5Pzogc3RyaW5nO1xuICBoZWlnaHQ/OiBudW1iZXI7XG4gIGF6aW11dGg/OiBudW1iZXI7XG4gIHRpbHQ/OiBudW1iZXI7XG4gIGVpcnA/OiBudW1iZXI7XG4gIGVpcnBfdW5pdD86IHN0cmluZztcbn1cblxuLy8gRXh0ZW5kZWQgaW50ZXJmYWNlIGZvciBtYXJrZXJzIHdpdGggSUQgYW5kIHR5cGVcbmV4cG9ydCBpbnRlcmZhY2UgTWFya2VyIHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogTWFya2VyVHlwZTtcbiAgbG9jYXRpb246IExvY2F0aW9uRGF0YTtcbiAgZWxldmF0aW9uT2Zmc2V0OiBudW1iZXI7XG4gIC8vIEFkZCBvcHRpb25hbCB0b3dlciBtZXRhZGF0YSBmb3IgdG93ZXItZGVyaXZlZCBtYXJrZXJzXG4gIHRvd2VyTWV0YWRhdGE/OiBUb3dlck1ldGFkYXRhO1xufVxuXG4vLyBBZGQgcmV0dXJuIHR5cGUgZm9yIGFkZE1hcmtlclxuaW50ZXJmYWNlIEFkZE1hcmtlclJlc3VsdCB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIG1hcmtlcklkPzogc3RyaW5nO1xuICBlcnJvcj86IHN0cmluZztcbn1cblxuLy8gQ29udGV4dCBpbnRlcmZhY2VcbmludGVyZmFjZSBNYXJrZXJDb250ZXh0VHlwZSB7XG4gIC8vIENvcmUgbWFya2VyIGNvbGxlY3Rpb25cbiAgbWFya2VyczogTWFya2VyW107XG4gIFxuICAvLyBNYXJrZXIgbWFuYWdlbWVudCBmdW5jdGlvbnNcbiAgYWRkTWFya2VyOiAodHlwZTogTWFya2VyVHlwZSwgbG9jYXRpb246IExvY2F0aW9uRGF0YSwgdG93ZXJNZXRhZGF0YT86IFRvd2VyTWV0YWRhdGEpID0+IEFkZE1hcmtlclJlc3VsdDtcbiAgdXBkYXRlTWFya2VyOiAoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxNYXJrZXI+KSA9PiB2b2lkO1xuICByZW1vdmVNYXJrZXI6IChpZDogc3RyaW5nKSA9PiB2b2lkO1xuICBcbiAgLy8gVHlwZS1zcGVjaWZpYyBlbGV2YXRpb24gb2Zmc2V0IGRlZmF1bHRzXG4gIGRlZmF1bHRFbGV2YXRpb25PZmZzZXRzOiBSZWNvcmQ8TWFya2VyVHlwZSwgbnVtYmVyPjtcbiAgc2V0RGVmYXVsdEVsZXZhdGlvbk9mZnNldDogKHR5cGU6IE1hcmtlclR5cGUsIG9mZnNldDogbnVtYmVyKSA9PiB2b2lkO1xuICBcbiAgLy8gSGVscGVyIG1ldGhvZHNcbiAgZ2V0TWFya2Vyc0J5VHlwZTogKHR5cGU6IE1hcmtlclR5cGUpID0+IE1hcmtlcltdO1xuICBcbiAgLy8gQURERUQ6IFByb3BlcnRpZXMgZXhwZWN0ZWQgYnkgdXNlR3JpZEFuYWx5c2lzXG4gIGdjc0xvY2F0aW9uOiBMb2NhdGlvbkRhdGEgfCBudWxsO1xuICBvYnNlcnZlckxvY2F0aW9uOiBMb2NhdGlvbkRhdGEgfCBudWxsO1xuICByZXBlYXRlckxvY2F0aW9uOiBMb2NhdGlvbkRhdGEgfCBudWxsO1xuICBnY3NFbGV2YXRpb25PZmZzZXQ6IG51bWJlcjtcbiAgb2JzZXJ2ZXJFbGV2YXRpb25PZmZzZXQ6IG51bWJlcjtcbiAgcmVwZWF0ZXJFbGV2YXRpb25PZmZzZXQ6IG51bWJlcjtcbn1cblxuY29uc3QgTWFya2VyQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8TWFya2VyQ29udGV4dFR5cGUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG5cbi8qKlxuICogUHJvdmlkZXIgY29tcG9uZW50IGZvciBtYXJrZXIgbWFuYWdlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gTWFya2VyUHJvdmlkZXIoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdE5vZGUgfSkge1xuICAvLyBDb3JlIHN0YXRlOiBjb2xsZWN0aW9uIG9mIGFsbCBtYXJrZXJzXG4gIGNvbnN0IFttYXJrZXJzLCBzZXRNYXJrZXJzXSA9IHVzZVN0YXRlPE1hcmtlcltdPihbXSk7XG4gIFxuICAvLyBEZWZhdWx0IGVsZXZhdGlvbiBvZmZzZXRzIGZvciBlYWNoIG1hcmtlciB0eXBlXG4gIGNvbnN0IFtkZWZhdWx0RWxldmF0aW9uT2Zmc2V0cywgc2V0RGVmYXVsdEVsZXZhdGlvbk9mZnNldHNdID0gdXNlU3RhdGU8UmVjb3JkPE1hcmtlclR5cGUsIG51bWJlcj4+KHtcbiAgICBnY3M6IDIsXG4gICAgb2JzZXJ2ZXI6IDIsXG4gICAgcmVwZWF0ZXI6IDJcbiAgfSk7XG5cbiAgLy8gR2V0IHByZW1pdW0gY29udGV4dFxuICBjb25zdCB7IHRpZXJMZXZlbCwgZ2V0VGllck5hbWUgfSA9IHVzZVByZW1pdW0oKTtcblxuICAvKipcbiAgICogQWRkcyBhIG5ldyBtYXJrZXIgb2Ygc3BlY2lmaWVkIHR5cGUgaWYgYWxsb3dlZCBieSB0aWVyIGxpbWl0YXRpb25zXG4gICAqIEBwYXJhbSB0eXBlIFRoZSBtYXJrZXIgdHlwZSAoZ2NzLCBvYnNlcnZlciwgcmVwZWF0ZXIpXG4gICAqIEBwYXJhbSBsb2NhdGlvbiBUaGUgZ2VvZ3JhcGhpYyBsb2NhdGlvbiBvZiB0aGUgbWFya2VyXG4gICAqIEBwYXJhbSB0b3dlck1ldGFkYXRhIE9wdGlvbmFsIG1ldGFkYXRhIGlmIG1hcmtlciBpcyBkZXJpdmVkIGZyb20gYSB0b3dlclxuICAgKiBAcmV0dXJucyBPYmplY3Qgd2l0aCBzdWNjZXNzIHN0YXR1cyBhbmQgZWl0aGVyIG1hcmtlciBJRCBvciBlcnJvciBtZXNzYWdlXG4gICAqL1xuICBjb25zdCBhZGRNYXJrZXIgPSAoXG4gICAgdHlwZTogTWFya2VyVHlwZSwgXG4gICAgbG9jYXRpb246IExvY2F0aW9uRGF0YSwgXG4gICAgdG93ZXJNZXRhZGF0YT86IFRvd2VyTWV0YWRhdGFcbiAgKTogQWRkTWFya2VyUmVzdWx0ID0+IHtcbiAgICAvLyBHZXQgY3VycmVudCBjb3VudCBvZiBtYXJrZXJzIG9mIHRoaXMgdHlwZVxuICAgIGNvbnN0IHR5cGVDb3VudCA9IG1hcmtlcnMuZmlsdGVyKG0gPT4gbS50eXBlID09PSB0eXBlKS5sZW5ndGg7XG4gICAgXG4gICAgLy8gR2V0IHRoZSBtYXhpbXVtIGFsbG93ZWQgZm9yIHRoaXMgbWFya2VyIHR5cGUgYXQgY3VycmVudCB0aWVyXG4gICAgY29uc3QgbWF4QWxsb3dlZCA9IFRJRVJfQ09ORklHW3RpZXJMZXZlbF0ubWF4TWFya2Vyc1t0eXBlXTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiBhZGRpbmcgdGhpcyBtYXJrZXIgaXMgYWxsb3dlZCBieSB0aWVyIGxpbWl0YXRpb25zXG4gICAgaWYgKHR5cGVDb3VudCA+PSBtYXhBbGxvd2VkKSB7XG4gICAgICBjb25zdCB0aWVyTmFtZSA9IGdldFRpZXJOYW1lKCk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBhIHVzZXItZnJpZW5kbHkgZXJyb3IgbWVzc2FnZSBiYXNlZCBvbiB0aGUgbGltaXRhdGlvblxuICAgICAgbGV0IGVycm9yTWVzc2FnZSA9ICcnO1xuICAgICAgaWYgKG1heEFsbG93ZWQgPT09IDApIHtcbiAgICAgICAgLy8gVGhpcyBtYXJrZXIgdHlwZSBpcyBub3QgYXZhaWxhYmxlIGF0IHRoaXMgdGllclxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBgJHt0aWVyTmFtZX0gdGllciBkb2Vzbid0IHN1cHBvcnQgJHt0eXBlfSBtYXJrZXJzLiBVcGdyYWRlIHRvIGFkZCB0aGlzIG1hcmtlciB0eXBlLmA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVc2VyIGhhcyByZWFjaGVkIHRoZWlyIGxpbWl0IGZvciB0aGlzIG1hcmtlciB0eXBlXG4gICAgICAgIGVycm9yTWVzc2FnZSA9IGAke3RpZXJOYW1lfSB0aWVyIGFsbG93cyBvbmx5ICR7bWF4QWxsb3dlZH0gJHt0eXBlfSBtYXJrZXIocykuIFVwZ3JhZGUgdG8gYWRkIG1vcmUuYDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIElmIHdlIGdldCBoZXJlLCBhZGRpbmcgdGhlIG1hcmtlciBpcyBhbGxvd2VkXG4gICAgY29uc3QgaWQgPSB1dWlkdjQoKTtcbiAgICBjb25zdCBuZXdNYXJrZXI6IE1hcmtlciA9IHtcbiAgICAgIGlkLFxuICAgICAgdHlwZSxcbiAgICAgIGxvY2F0aW9uLFxuICAgICAgZWxldmF0aW9uT2Zmc2V0OiBkZWZhdWx0RWxldmF0aW9uT2Zmc2V0c1t0eXBlXSxcbiAgICAgIC8vIEluY2x1ZGUgdG93ZXIgbWV0YWRhdGEgaWYgcHJvdmlkZWRcbiAgICAgIC4uLih0b3dlck1ldGFkYXRhICYmIHsgdG93ZXJNZXRhZGF0YSB9KVxuICAgIH07XG4gICAgXG4gICAgc2V0TWFya2VycyhwcmV2ID0+IFsuLi5wcmV2LCBuZXdNYXJrZXJdKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1hcmtlcklkOiBpZFxuICAgIH07XG4gIH07XG5cbiAgLy8gVXBkYXRlIGFuIGV4aXN0aW5nIG1hcmtlclxuICBjb25zdCB1cGRhdGVNYXJrZXIgPSAoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxNYXJrZXI+KTogdm9pZCA9PiB7XG4gICAgc2V0TWFya2VycyhwcmV2ID0+IFxuICAgICAgcHJldi5tYXAobWFya2VyID0+IHtcbiAgICAgICAgaWYgKG1hcmtlci5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAvLyBIYW5kbGUgc3BlY2lhbCBjYXNlIGZvciB0b3dlck1ldGFkYXRhIHRvIG1lcmdlIGl0IHByb3Blcmx5XG4gICAgICAgICAgaWYgKHVwZGF0ZXMudG93ZXJNZXRhZGF0YSAmJiBtYXJrZXIudG93ZXJNZXRhZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICAgIC4uLm1hcmtlciwgXG4gICAgICAgICAgICAgIC4uLnVwZGF0ZXMsIFxuICAgICAgICAgICAgICB0b3dlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgLi4ubWFya2VyLnRvd2VyTWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgLi4udXBkYXRlcy50b3dlck1ldGFkYXRhXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7IC4uLm1hcmtlciwgLi4udXBkYXRlcyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgICB9KVxuICAgICk7XG4gIH07XG5cbiAgLy8gUmVtb3ZlIGEgbWFya2VyIGJ5IElEXG4gIGNvbnN0IHJlbW92ZU1hcmtlciA9IChpZDogc3RyaW5nKTogdm9pZCA9PiB7XG4gICAgc2V0TWFya2VycyhwcmV2ID0+IHByZXYuZmlsdGVyKG1hcmtlciA9PiBtYXJrZXIuaWQgIT09IGlkKSk7XG4gIH07XG5cbiAgLy8gU2V0IHRoZSBkZWZhdWx0IGVsZXZhdGlvbiBvZmZzZXQgZm9yIGEgbWFya2VyIHR5cGVcbiAgY29uc3Qgc2V0RGVmYXVsdEVsZXZhdGlvbk9mZnNldCA9ICh0eXBlOiBNYXJrZXJUeXBlLCBvZmZzZXQ6IG51bWJlcik6IHZvaWQgPT4ge1xuICAgIHNldERlZmF1bHRFbGV2YXRpb25PZmZzZXRzKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBbdHlwZV06IG9mZnNldFxuICAgIH0pKTtcbiAgICBcbiAgICAvLyBBbHNvIHVwZGF0ZSBhbnkgZXhpc3RpbmcgbWFya2VycyBvZiB0aGlzIHR5cGVcbiAgICBzZXRNYXJrZXJzKHByZXYgPT4gXG4gICAgICBwcmV2Lm1hcChtYXJrZXIgPT4gXG4gICAgICAgIG1hcmtlci50eXBlID09PSB0eXBlID8geyAuLi5tYXJrZXIsIGVsZXZhdGlvbk9mZnNldDogb2Zmc2V0IH0gOiBtYXJrZXJcbiAgICAgIClcbiAgICApO1xuICB9O1xuXG4gIC8vIEdldCBtYXJrZXJzIGZpbHRlcmVkIGJ5IHR5cGVcbiAgY29uc3QgZ2V0TWFya2Vyc0J5VHlwZSA9ICh0eXBlOiBNYXJrZXJUeXBlKTogTWFya2VyW10gPT4ge1xuICAgIHJldHVybiBtYXJrZXJzLmZpbHRlcihtID0+IG0udHlwZSA9PT0gdHlwZSk7XG4gIH07XG5cbiAgLy8gQURERUQ6IENvbXB1dGVkIHByb3BlcnRpZXMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgY29uc3QgZ2NzTG9jYXRpb24gPSBtYXJrZXJzLmZpbmQobSA9PiBtLnR5cGUgPT09ICdnY3MnKT8ubG9jYXRpb24gfHwgbnVsbDtcbiAgY29uc3Qgb2JzZXJ2ZXJMb2NhdGlvbiA9IG1hcmtlcnMuZmluZChtID0+IG0udHlwZSA9PT0gJ29ic2VydmVyJyk/LmxvY2F0aW9uIHx8IG51bGw7XG4gIGNvbnN0IHJlcGVhdGVyTG9jYXRpb24gPSBtYXJrZXJzLmZpbmQobSA9PiBtLnR5cGUgPT09ICdyZXBlYXRlcicpPy5sb2NhdGlvbiB8fCBudWxsO1xuICBcbiAgY29uc3QgZ2NzRWxldmF0aW9uT2Zmc2V0ID0gbWFya2Vycy5maW5kKG0gPT4gbS50eXBlID09PSAnZ2NzJyk/LmVsZXZhdGlvbk9mZnNldCB8fCBkZWZhdWx0RWxldmF0aW9uT2Zmc2V0cy5nY3M7XG4gIGNvbnN0IG9ic2VydmVyRWxldmF0aW9uT2Zmc2V0ID0gbWFya2Vycy5maW5kKG0gPT4gbS50eXBlID09PSAnb2JzZXJ2ZXInKT8uZWxldmF0aW9uT2Zmc2V0IHx8IGRlZmF1bHRFbGV2YXRpb25PZmZzZXRzLm9ic2VydmVyO1xuICBjb25zdCByZXBlYXRlckVsZXZhdGlvbk9mZnNldCA9IG1hcmtlcnMuZmluZChtID0+IG0udHlwZSA9PT0gJ3JlcGVhdGVyJyk/LmVsZXZhdGlvbk9mZnNldCB8fCBkZWZhdWx0RWxldmF0aW9uT2Zmc2V0cy5yZXBlYXRlcjtcblxuICByZXR1cm4gKFxuICAgIDxNYXJrZXJDb250ZXh0LlByb3ZpZGVyXG4gICAgICB2YWx1ZT17e1xuICAgICAgICBtYXJrZXJzLFxuICAgICAgICBhZGRNYXJrZXIsXG4gICAgICAgIHVwZGF0ZU1hcmtlcixcbiAgICAgICAgcmVtb3ZlTWFya2VyLFxuICAgICAgICBkZWZhdWx0RWxldmF0aW9uT2Zmc2V0cyxcbiAgICAgICAgc2V0RGVmYXVsdEVsZXZhdGlvbk9mZnNldCxcbiAgICAgICAgZ2V0TWFya2Vyc0J5VHlwZSxcbiAgICAgICAgLy8gQURERUQ6IENvbXB1dGVkIHByb3BlcnRpZXNcbiAgICAgICAgZ2NzTG9jYXRpb24sXG4gICAgICAgIG9ic2VydmVyTG9jYXRpb24sXG4gICAgICAgIHJlcGVhdGVyTG9jYXRpb24sXG4gICAgICAgIGdjc0VsZXZhdGlvbk9mZnNldCxcbiAgICAgICAgb2JzZXJ2ZXJFbGV2YXRpb25PZmZzZXQsXG4gICAgICAgIHJlcGVhdGVyRWxldmF0aW9uT2Zmc2V0XG4gICAgICB9fVxuICAgID5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L01hcmtlckNvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59XG5cbi8qKlxuICogQ3VzdG9tIGhvb2sgdG8gYWNjZXNzIG1hcmtlciBjb250ZXh0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VNYXJrZXJzQ29udGV4dCgpIHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoTWFya2VyQ29udGV4dCk7XG4gIGlmIChjb250ZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZU1hcmtlcnNDb250ZXh0IG11c3QgYmUgdXNlZCB3aXRoaW4gYSBNYXJrZXJQcm92aWRlcicpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufSJdLCJuYW1lcyI6WyJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZVN0YXRlIiwidjQiLCJ1dWlkdjQiLCJ1c2VQcmVtaXVtIiwiVElFUl9DT05GSUciLCJNYXJrZXJDb250ZXh0IiwidW5kZWZpbmVkIiwiTWFya2VyUHJvdmlkZXIiLCJjaGlsZHJlbiIsIm1hcmtlcnMiLCJzZXRNYXJrZXJzIiwiZGVmYXVsdEVsZXZhdGlvbk9mZnNldHMiLCJzZXREZWZhdWx0RWxldmF0aW9uT2Zmc2V0cyIsImdjcyIsIm9ic2VydmVyIiwicmVwZWF0ZXIiLCJ0aWVyTGV2ZWwiLCJnZXRUaWVyTmFtZSIsImFkZE1hcmtlciIsInR5cGUiLCJsb2NhdGlvbiIsInRvd2VyTWV0YWRhdGEiLCJ0eXBlQ291bnQiLCJmaWx0ZXIiLCJtIiwibGVuZ3RoIiwibWF4QWxsb3dlZCIsIm1heE1hcmtlcnMiLCJ0aWVyTmFtZSIsImVycm9yTWVzc2FnZSIsInN1Y2Nlc3MiLCJlcnJvciIsImlkIiwibmV3TWFya2VyIiwiZWxldmF0aW9uT2Zmc2V0IiwicHJldiIsIm1hcmtlcklkIiwidXBkYXRlTWFya2VyIiwidXBkYXRlcyIsIm1hcCIsIm1hcmtlciIsInJlbW92ZU1hcmtlciIsInNldERlZmF1bHRFbGV2YXRpb25PZmZzZXQiLCJvZmZzZXQiLCJnZXRNYXJrZXJzQnlUeXBlIiwiZ2NzTG9jYXRpb24iLCJmaW5kIiwib2JzZXJ2ZXJMb2NhdGlvbiIsInJlcGVhdGVyTG9jYXRpb24iLCJnY3NFbGV2YXRpb25PZmZzZXQiLCJvYnNlcnZlckVsZXZhdGlvbk9mZnNldCIsInJlcGVhdGVyRWxldmF0aW9uT2Zmc2V0IiwiUHJvdmlkZXIiLCJ2YWx1ZSIsInVzZU1hcmtlcnNDb250ZXh0IiwiY29udGV4dCIsIkVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/context/MarkerContext.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/context/ObstacleAnalysisContext.tsx":
/*!*****************************************************!*\
  !*** ./src/app/context/ObstacleAnalysisContext.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ObstacleAnalysisProvider: () => (/* binding */ ObstacleAnalysisProvider),\n/* harmony export */   useObstacleAnalysis: () => (/* binding */ useObstacleAnalysis)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _mapcontext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _FlightPlanContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./FlightPlanContext */ \"(ssr)/./src/app/context/FlightPlanContext.tsx\");\n/* harmony import */ var _AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AreaOfOpsContext */ \"(ssr)/./src/app/context/AreaOfOpsContext.tsx\");\n/* harmony import */ var _hooks_useFlightPathSampling__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../hooks/useFlightPathSampling */ \"(ssr)/./src/app/hooks/useFlightPathSampling.ts\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/distance/dist/esm/index.js\");\n/* harmony import */ var _utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/TerrainUtils */ \"(ssr)/./src/app/utils/TerrainUtils.ts\");\n/**\n * ObstacleAnalysisContext.tsx\n * \n * Purpose:\n * Provides a context for obstacle analysis functionality, including state management\n * and methods for running terrain clearance analysis. This context serves as the\n * data layer for the obstacle analysis feature.\n * \n * Related Files:\n * - ObstacleChart.tsx: Visualizes the analysis results\n * - ObstacleAnalysisDashboard.tsx: UI component using this context\n * - ObstacleChartModal.tsx: Modal dialog showing the chart\n * - useFlightPathSampling.ts: Utility for generating sample points\n */ \n\n\n\n\n\n\n\n/**\n * Default analysis options\n */ const defaultAnalysisOptions = {\n    samplingResolution: 10\n};\nconst ObstacleAnalysisContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\n/**\n * Provides obstacle analysis state and methods\n * @param children - React components to render within the provider\n */ const ObstacleAnalysisProvider = ({ children })=>{\n    const { map, elevationService } = (0,_mapcontext__WEBPACK_IMPORTED_MODULE_2__.useMapContext)();\n    const { flightPlan, isProcessed, setFlightPlan } = (0,_FlightPlanContext__WEBPACK_IMPORTED_MODULE_3__.useFlightPlanContext)();\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('idle');\n    const [progress, setProgress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [results, setResults] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [chartData, setChartData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [analysisOptions, setAnalysisOptions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(defaultAnalysisOptions);\n    const cancelAnalysisRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const { aoTerrainGrid } = (0,_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_4__.useAreaOfOpsContext)();\n    /**\n * Converts analysis results to chart data format\n * @param result - The analysis result to convert\n * @returns The formatted chart data\n */ const generateChartData = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ObstacleAnalysisProvider.useCallback[generateChartData]\": (result)=>{\n            const altitudeMode = flightPlan?.features[0]?.properties?.waypoints?.[0]?.altitudeMode ?? 'absolute';\n            console.log(`Generating chart data for altitude mode: ${altitudeMode}`);\n            const distancesInKm = result.distances.map({\n                \"ObstacleAnalysisProvider.useCallback[generateChartData].distancesInKm\": (d)=>d / 1000\n            }[\"ObstacleAnalysisProvider.useCallback[generateChartData].distancesInKm\"]);\n            const highestTerrain = Math.max(...result.terrainElevations);\n            const highestFlight = Math.max(...result.flightAltitudes);\n            const waypoints = [];\n            const pointsOfInterest = [];\n            console.groupCollapsed('[generateChartData] Distance Sources and Units');\n            console.log('Sampled Distances (meters, source: sampleFlightPath via result.distances):', result.distances);\n            console.log('Sampled Distances (km, source: result.distances / 1000):', distancesInKm);\n            if (flightPlan?.features?.[0]?.properties?.waypoints && flightPlan?.originalWaypointDistances) {\n                const waypointData = flightPlan.features[0].properties.waypoints;\n                const waypointDistances = flightPlan.originalWaypointDistances;\n                const navigationIndices = flightPlan.properties.metadata?.metadata?.navigationIndices || [];\n                console.log('Original Waypoints (source: flightPlan.properties.waypoints):', waypointData);\n                console.log('Waypoint Distances (meters, source: flightPlan.originalWaypointDistances):', waypointDistances);\n                console.log('Converted Waypoint Distances (km, source: waypointDistances / 1000):', waypointDistances.map({\n                    \"ObstacleAnalysisProvider.useCallback[generateChartData]\": (d)=>d / 1000\n                }[\"ObstacleAnalysisProvider.useCallback[generateChartData]\"]));\n                console.log('Navigation Indices:', navigationIndices);\n                // Use navigationIndices to select only navigation waypoints\n                navigationIndices.forEach({\n                    \"ObstacleAnalysisProvider.useCallback[generateChartData]\": (navIdx, distIdx)=>{\n                        if (distIdx < waypointDistances.length) {\n                            const wp = waypointData.find({\n                                \"ObstacleAnalysisProvider.useCallback[generateChartData].wp\": (w)=>w.index === navIdx\n                            }[\"ObstacleAnalysisProvider.useCallback[generateChartData].wp\"]);\n                            if (wp) {\n                                const distanceInKm = waypointDistances[distIdx] / 1000;\n                                const label = `WP ${wp.index + 1}`;\n                                const elevation = wp.originalAltitude;\n                                waypoints.push({\n                                    distance: distanceInKm,\n                                    label: label\n                                });\n                                pointsOfInterest.push({\n                                    type: 'waypoint',\n                                    distance: distanceInKm,\n                                    elevation: elevation,\n                                    label: label\n                                });\n                            }\n                        }\n                    }\n                }[\"ObstacleAnalysisProvider.useCallback[generateChartData]\"]);\n            } else {\n                console.warn('Missing waypoints or originalWaypointDistances:', {\n                    hasWaypoints: !!flightPlan?.features?.[0]?.properties?.waypoints,\n                    hasDistances: !!flightPlan?.originalWaypointDistances\n                });\n            }\n            console.groupEnd();\n            if (result.criticalPointDistance !== null) {\n                const criticalIndex = result.distances.findIndex({\n                    \"ObstacleAnalysisProvider.useCallback[generateChartData].criticalIndex\": (d)=>d === result.criticalPointDistance\n                }[\"ObstacleAnalysisProvider.useCallback[generateChartData].criticalIndex\"]);\n                if (criticalIndex >= 0) {\n                    pointsOfInterest.push({\n                        type: 'minimumClearance',\n                        distance: distancesInKm[criticalIndex],\n                        elevation: result.flightAltitudes[criticalIndex],\n                        clearance: result.minimumClearance,\n                        label: 'Min Clearance'\n                    });\n                }\n            }\n            if (result.minimumClearance < 0) {\n                result.distances.forEach({\n                    \"ObstacleAnalysisProvider.useCallback[generateChartData]\": (d, i)=>{\n                        const clearance = result.flightAltitudes[i] - result.terrainElevations[i];\n                        if (clearance < 0) {\n                            pointsOfInterest.push({\n                                type: 'collision',\n                                distance: distancesInKm[i],\n                                elevation: result.flightAltitudes[i],\n                                clearance: clearance,\n                                label: 'Collision'\n                            });\n                        }\n                    }\n                }[\"ObstacleAnalysisProvider.useCallback[generateChartData]\"]);\n            }\n            if (result.pointsOfInterest && result.pointsOfInterest.length > 0) {\n                result.pointsOfInterest.forEach({\n                    \"ObstacleAnalysisProvider.useCallback[generateChartData]\": (poi)=>{\n                        if (poi.type !== 'waypoint') {\n                            pointsOfInterest.push({\n                                ...poi,\n                                distance: poi.distance / 1000,\n                                elevation: poi.elevation || 0\n                            });\n                        }\n                    }\n                }[\"ObstacleAnalysisProvider.useCallback[generateChartData]\"]);\n            }\n            return {\n                distances: distancesInKm,\n                terrainElevations: result.terrainElevations,\n                flightAltitudes: result.flightAltitudes,\n                minimumClearance: result.minimumClearance,\n                criticalPointDistance: result.criticalPointDistance !== null ? result.criticalPointDistance / 1000 : null,\n                highestPoint: {\n                    terrain: highestTerrain,\n                    flight: highestFlight\n                },\n                waypoints,\n                pointsOfInterest\n            };\n        }\n    }[\"ObstacleAnalysisProvider.useCallback[generateChartData]\"], [\n        flightPlan\n    ]);\n    /**\n * Fills terrain elevation data for sample points using TerrainUtils\n * @param pts - Array of sample points to fill with terrain elevation\n * @param onProgress - Optional callback to report progress (returns true to cancel)\n * @returns Promise that resolves when terrain data is filled\n */ const fillTerrain = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ObstacleAnalysisProvider.useCallback[fillTerrain]\": async (pts, onProgress)=>{\n            if (!map) {\n                throw new Error(\"Map not available\");\n            }\n            // For absolute/relative modes with few points, add intermediate points\n            const altitudeMode = flightPlan?.features[0]?.properties?.waypoints?.[0]?.altitudeMode ?? 'absolute';\n            const isNonTerrainMode = altitudeMode !== 'terrain';\n            const hasLimitedPoints = pts.length < 20;\n            let additionalPoints = [];\n            if (isNonTerrainMode && hasLimitedPoints) {\n                for(let i = 0; i < pts.length - 1; i++){\n                    const startPoint = pts[i];\n                    const endPoint = pts[i + 1];\n                    const segmentDistance = endPoint.distanceFromStart - startPoint.distanceFromStart;\n                    if (segmentDistance < 2) continue;\n                    const numPoints = Math.min(Math.floor(segmentDistance / 2), 10);\n                    for(let j = 1; j < numPoints; j++){\n                        const ratio = j / numPoints;\n                        const distance = startPoint.distanceFromStart + ratio * (endPoint.distanceFromStart - startPoint.distanceFromStart);\n                        const lon = startPoint.position[0] + ratio * (endPoint.position[0] - startPoint.position[0]);\n                        const lat = startPoint.position[1] + ratio * (endPoint.position[1] - startPoint.position[1]);\n                        const flightElevation = startPoint.flightElevation + ratio * (endPoint.flightElevation - startPoint.flightElevation);\n                        additionalPoints.push({\n                            position: [\n                                lon,\n                                lat,\n                                flightElevation\n                            ],\n                            distanceFromStart: distance,\n                            flightElevation: flightElevation,\n                            terrainElevation: 0,\n                            clearance: 0\n                        });\n                    }\n                }\n            }\n            // Combine and deduplicate points\n            const allPoints = [\n                ...pts,\n                ...additionalPoints\n            ];\n            const uniquePoints = Array.from(new Map(allPoints.map({\n                \"ObstacleAnalysisProvider.useCallback[fillTerrain].uniquePoints\": (p)=>[\n                        `${p.position[0].toFixed(10)},${p.position[1].toFixed(10)}`,\n                        p\n                    ]\n            }[\"ObstacleAnalysisProvider.useCallback[fillTerrain].uniquePoints\"])).values());\n            uniquePoints.sort({\n                \"ObstacleAnalysisProvider.useCallback[fillTerrain]\": (a, b)=>a.distanceFromStart - b.distanceFromStart\n            }[\"ObstacleAnalysisProvider.useCallback[fillTerrain]\"]);\n            const CHUNK_SIZE = 250;\n            let totalProcessed = 0;\n            const elevationCache = {};\n            for(let i = 0; i < uniquePoints.length; i += CHUNK_SIZE){\n                const chunk = uniquePoints.slice(i, i + CHUNK_SIZE);\n                const pointsToFetch = [];\n                const cachedElevations = [];\n                chunk.forEach({\n                    \"ObstacleAnalysisProvider.useCallback[fillTerrain]\": (p)=>{\n                        const key = `${p.position[0].toFixed(10)},${p.position[1].toFixed(10)}`;\n                        const cachedElev = elevationCache[key];\n                        if (cachedElev !== undefined) {\n                            cachedElevations.push(cachedElev);\n                        } else {\n                            cachedElevations.push(null);\n                            pointsToFetch.push([\n                                p.position[0],\n                                p.position[1]\n                            ]);\n                        }\n                    }\n                }[\"ObstacleAnalysisProvider.useCallback[fillTerrain]\"]);\n                let elevations = [];\n                if (pointsToFetch.length > 0) {\n                    elevations = await (0,_utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_6__.getReliableTerrainElevations)(map, pointsToFetch, {\n                        \"ObstacleAnalysisProvider.useCallback[fillTerrain]\": (chunkProgress)=>{\n                            if (onProgress) {\n                                const chunkFraction = Math.min(CHUNK_SIZE, uniquePoints.length - i) / uniquePoints.length;\n                                const adjustedProgress = (totalProcessed / uniquePoints.length + chunkProgress / 100 * chunkFraction) * 100;\n                                const cappedProgress = Math.min(adjustedProgress, 100);\n                                return onProgress(cappedProgress);\n                            }\n                            return false;\n                        }\n                    }[\"ObstacleAnalysisProvider.useCallback[fillTerrain]\"]);\n                    // Retry negative elevations\n                    for(let j = 0; j < elevations.length; j++){\n                        if (elevations[j] < 0) {\n                            const [lon, lat] = pointsToFetch[j];\n                            await (0,_utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_6__.ensureDEMLoaded)(map);\n                            const retryElevations = await (0,_utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_6__.getReliableTerrainElevations)(map, [\n                                [\n                                    lon,\n                                    lat\n                                ]\n                            ]);\n                            elevations[j] = retryElevations[0];\n                        }\n                    }\n                    // Update cache with new elevations\n                    pointsToFetch.forEach({\n                        \"ObstacleAnalysisProvider.useCallback[fillTerrain]\": (point, idx)=>{\n                            const key = `${point[0].toFixed(10)},${point[1].toFixed(10)}`;\n                            elevationCache[key] = elevations[idx];\n                        }\n                    }[\"ObstacleAnalysisProvider.useCallback[fillTerrain]\"]);\n                }\n                let elevationIndex = 0;\n                chunk.forEach({\n                    \"ObstacleAnalysisProvider.useCallback[fillTerrain]\": (p, j)=>{\n                        let elevation;\n                        if (cachedElevations[j] !== null) {\n                            elevation = cachedElevations[j];\n                        } else {\n                            elevation = elevations[elevationIndex++];\n                        }\n                        p.terrainElevation = elevation;\n                        p.clearance = p.flightElevation - p.terrainElevation;\n                    }\n                }[\"ObstacleAnalysisProvider.useCallback[fillTerrain]\"]);\n                totalProcessed += chunk.length;\n                const progress = Math.min(totalProcessed / uniquePoints.length * 100, 100);\n                if (onProgress && onProgress(progress)) return;\n                await new Promise({\n                    \"ObstacleAnalysisProvider.useCallback[fillTerrain]\": (resolve)=>setTimeout(resolve, 15)\n                }[\"ObstacleAnalysisProvider.useCallback[fillTerrain]\"]);\n            }\n            // Update critical points for non-terrain modes\n            if (additionalPoints.length > 0) {\n                const criticalPoints = additionalPoints.filter({\n                    \"ObstacleAnalysisProvider.useCallback[fillTerrain].criticalPoints\": (p)=>p.clearance < 0 || p.clearance < Math.min(...pts.map({\n                            \"ObstacleAnalysisProvider.useCallback[fillTerrain].criticalPoints\": (op)=>op.clearance\n                        }[\"ObstacleAnalysisProvider.useCallback[fillTerrain].criticalPoints\"])) + 5\n                }[\"ObstacleAnalysisProvider.useCallback[fillTerrain].criticalPoints\"]);\n                if (criticalPoints.length > 0) {\n                    criticalPoints.forEach({\n                        \"ObstacleAnalysisProvider.useCallback[fillTerrain]\": (cp)=>{\n                            const tooClose = pts.some({\n                                \"ObstacleAnalysisProvider.useCallback[fillTerrain].tooClose\": (p)=>Math.abs(p.distanceFromStart - cp.distanceFromStart) < 2\n                            }[\"ObstacleAnalysisProvider.useCallback[fillTerrain].tooClose\"]);\n                            if (!tooClose) {\n                                pts.push(cp);\n                            }\n                        }\n                    }[\"ObstacleAnalysisProvider.useCallback[fillTerrain]\"]);\n                    pts.sort({\n                        \"ObstacleAnalysisProvider.useCallback[fillTerrain]\": (a, b)=>a.distanceFromStart - b.distanceFromStart\n                    }[\"ObstacleAnalysisProvider.useCallback[fillTerrain]\"]);\n                }\n            }\n        }\n    }[\"ObstacleAnalysisProvider.useCallback[fillTerrain]\"], [\n        map,\n        flightPlan\n    ]);\n    /**\n * Runs the obstacle analysis for the flight plan\n * @param options - Optional analysis options to override defaults\n */ const runAnalysis = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ObstacleAnalysisProvider.useCallback[runAnalysis]\": async (options)=>{\n            if (status === 'loading') {\n                return;\n            }\n            const analysisId = Date.now();\n            if (!map || !flightPlan || !isProcessed) {\n                const errorMessage = `Map, flight plan, or processing incomplete (map: ${!!map}, flightPlan: ${!!flightPlan}, isProcessed: ${isProcessed})`;\n                setError(errorMessage);\n                setStatus('error');\n                return;\n            }\n            try {\n                setStatus('loading');\n                setProgress(0);\n                setError(null);\n                cancelAnalysisRef.current = false;\n                await new Promise({\n                    \"ObstacleAnalysisProvider.useCallback[runAnalysis]\": (resolve)=>setTimeout(resolve, 15)\n                }[\"ObstacleAnalysisProvider.useCallback[runAnalysis]\"]);\n                if (cancelAnalysisRef.current) {\n                    console.log(`[${new Date().toISOString()}] [ObstacleAnalysisContext.tsx] Analysis cancelled during initial delay`);\n                    return;\n                }\n                if (options) {\n                    setAnalysisOptions({\n                        \"ObstacleAnalysisProvider.useCallback[runAnalysis]\": (prev)=>({\n                                ...prev,\n                                ...options\n                            })\n                    }[\"ObstacleAnalysisProvider.useCallback[runAnalysis]\"]);\n                }\n                const flightFeature = flightPlan.features[0];\n                if (!flightFeature || flightFeature.geometry.type !== 'LineString') {\n                    throw new Error('Invalid flight plan geometry. Expected LineString.');\n                }\n                const coords = flightFeature.geometry.coordinates;\n                if (!Array.isArray(coords) || coords.length < 2) {\n                    throw new Error('Flight plan must have at least 2 waypoints.');\n                }\n                // Ensure DEM is loaded\n                await (0,_utils_TerrainUtils__WEBPACK_IMPORTED_MODULE_6__.ensureDEMLoaded)(map);\n                const waypoints = flightFeature.properties?.waypoints || [];\n                if (waypoints.length < 2) {\n                    throw new Error('Flight plan must have at least 2 valid waypoints.');\n                }\n                const progressCallback = {\n                    \"ObstacleAnalysisProvider.useCallback[runAnalysis].progressCallback\": (value)=>{\n                        const roundedValue = Math.round(value);\n                        if (roundedValue % 5 === 0 || roundedValue === 100) {\n                            setProgress(roundedValue);\n                        }\n                        return cancelAnalysisRef.current;\n                    }\n                }[\"ObstacleAnalysisProvider.useCallback[runAnalysis].progressCallback\"];\n                const altitudeMode = waypoints[0]?.altitudeMode ?? 'absolute';\n                console.time(\"sampleFlightPath\");\n                let samplePoints = await (0,_hooks_useFlightPathSampling__WEBPACK_IMPORTED_MODULE_5__.sampleFlightPath)(flightFeature.geometry, {\n                    resolution: analysisOptions.samplingResolution,\n                    progressCallback,\n                    isTerrainMode: altitudeMode === 'terrain'\n                });\n                console.timeEnd(\"sampleFlightPath\");\n                if (cancelAnalysisRef.current) {\n                    setStatus('idle');\n                    return;\n                }\n                // Compute waypoint distances\n                let cumulativeDistance = 0;\n                const originalWaypointDistances = [\n                    0\n                ];\n                const waypointCoords = waypoints.map({\n                    \"ObstacleAnalysisProvider.useCallback[runAnalysis].waypointCoords\": (wp, idx)=>{\n                        const coord = flightFeature.geometry.coordinates[idx];\n                        if (!coord || !Array.isArray(coord) || coord.length < 2) {\n                            return null;\n                        }\n                        return coord;\n                    }\n                }[\"ObstacleAnalysisProvider.useCallback[runAnalysis].waypointCoords\"]).filter({\n                    \"ObstacleAnalysisProvider.useCallback[runAnalysis].waypointCoords\": (coord)=>coord !== null\n                }[\"ObstacleAnalysisProvider.useCallback[runAnalysis].waypointCoords\"]);\n                if (waypointCoords.length !== waypoints.length) {\n                    console.warn(`[${new Date().toISOString()}] [ObstacleAnalysisContext.tsx] Coordinate mismatch:`, {\n                        waypointsLength: waypoints.length,\n                        coordsLength: waypointCoords.length\n                    });\n                }\n                for(let i = 1; i < waypointCoords.length; i++){\n                    const prevCoord = waypointCoords[i - 1];\n                    const currCoord = waypointCoords[i];\n                    const segmentDistance = _turf_turf__WEBPACK_IMPORTED_MODULE_7__.distance([\n                        prevCoord[0],\n                        prevCoord[1]\n                    ], [\n                        currCoord[0],\n                        currCoord[1]\n                    ], {\n                        units: 'meters'\n                    });\n                    cumulativeDistance += segmentDistance;\n                    originalWaypointDistances.push(cumulativeDistance);\n                }\n                const totalDistance = flightPlan.properties?.totalDistance ?? cumulativeDistance;\n                if (originalWaypointDistances.length < waypoints.length && totalDistance) {\n                    console.warn(`[${new Date().toISOString()}] [ObstacleAnalysisContext.tsx] Incomplete waypoint distances, interpolating with totalDistance:`, totalDistance);\n                    const factor = totalDistance / (waypoints.length - 1);\n                    originalWaypointDistances.length = 0;\n                    for(let i = 0; i < waypoints.length; i++){\n                        originalWaypointDistances.push(i * factor);\n                    }\n                }\n                const updatedFlightPlan = {\n                    ...flightPlan,\n                    waypointDistances: flightPlan.originalWaypointDistances || flightPlan.waypointDistances\n                };\n                setFlightPlan(updatedFlightPlan);\n                if (altitudeMode !== 'terrain') {\n                    samplePoints.forEach({\n                        \"ObstacleAnalysisProvider.useCallback[runAnalysis]\": (point)=>{\n                            let segmentIndex = 0;\n                            while(segmentIndex < originalWaypointDistances.length - 1 && point.distanceFromStart > originalWaypointDistances[segmentIndex + 1] + Number.EPSILON){\n                                segmentIndex++;\n                            }\n                            point.flightElevation = waypoints[segmentIndex].originalAltitude;\n                        }\n                    }[\"ObstacleAnalysisProvider.useCallback[runAnalysis]\"]);\n                }\n                // Use elevation cache in fillTerrain\n                const elevationCache = {};\n                await fillTerrain(samplePoints, {\n                    \"ObstacleAnalysisProvider.useCallback[runAnalysis]\": (p)=>{\n                        setProgress(60 + Math.round(p * 0.4));\n                        return cancelAnalysisRef.current;\n                    }\n                }[\"ObstacleAnalysisProvider.useCallback[runAnalysis]\"]);\n                if (cancelAnalysisRef.current) {\n                    setStatus('idle');\n                    return;\n                }\n                // Recalculate clearance\n                samplePoints.forEach({\n                    \"ObstacleAnalysisProvider.useCallback[runAnalysis]\": (point)=>{\n                        point.clearance = point.flightElevation - point.terrainElevation;\n                    }\n                }[\"ObstacleAnalysisProvider.useCallback[runAnalysis]\"]);\n                // Compute analysis results\n                const flightAltitudes = samplePoints.map({\n                    \"ObstacleAnalysisProvider.useCallback[runAnalysis].flightAltitudes\": (p)=>p.flightElevation\n                }[\"ObstacleAnalysisProvider.useCallback[runAnalysis].flightAltitudes\"]);\n                const terrainElevations = samplePoints.map({\n                    \"ObstacleAnalysisProvider.useCallback[runAnalysis].terrainElevations\": (p)=>p.terrainElevation\n                }[\"ObstacleAnalysisProvider.useCallback[runAnalysis].terrainElevations\"]);\n                const distances = samplePoints.map({\n                    \"ObstacleAnalysisProvider.useCallback[runAnalysis].distances\": (p)=>p.distanceFromStart\n                }[\"ObstacleAnalysisProvider.useCallback[runAnalysis].distances\"]);\n                const clearances = samplePoints.map({\n                    \"ObstacleAnalysisProvider.useCallback[runAnalysis].clearances\": (p)=>p.clearance\n                }[\"ObstacleAnalysisProvider.useCallback[runAnalysis].clearances\"]);\n                const minimumClearance = Math.min(...clearances);\n                const highestObstacle = Math.max(...terrainElevations);\n                const criticalPointIndex = clearances.indexOf(minimumClearance);\n                const criticalPointDistance = criticalPointIndex >= 0 ? distances[criticalPointIndex] : null;\n                const pointsOfInterest = [];\n                const result = {\n                    samplePoints,\n                    minimumClearance,\n                    criticalPointDistance,\n                    highestObstacle,\n                    flightAltitudes,\n                    terrainElevations,\n                    distances,\n                    pointsOfInterest\n                };\n                setResults(result);\n                setChartData(generateChartData(result));\n                setStatus('success');\n            } catch (err) {\n                console.error(`[${new Date().toISOString()}] [ObstacleAnalysisContext.tsx] Analysis ${analysisId} error:`, err);\n                setError(err instanceof Error ? err.message : String(err));\n                setStatus('error');\n            }\n        }\n    }[\"ObstacleAnalysisProvider.useCallback[runAnalysis]\"], [\n        map,\n        flightPlan,\n        isProcessed,\n        analysisOptions,\n        setError,\n        setStatus,\n        setProgress,\n        setFlightPlan,\n        generateChartData,\n        fillTerrain,\n        status\n    ]);\n    /**\n * Cancels the ongoing analysis\n */ const cancelAnalysis = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ObstacleAnalysisProvider.useCallback[cancelAnalysis]\": ()=>{\n            cancelAnalysisRef.current = true;\n            setStatus('idle');\n            setProgress(0);\n        }\n    }[\"ObstacleAnalysisProvider.useCallback[cancelAnalysis]\"], []);\n    /**\n * Clears analysis results and elevation cache\n */ const clearResults = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ObstacleAnalysisProvider.useCallback[clearResults]\": ()=>{\n            setResults(null);\n            setChartData(null);\n            setStatus('idle');\n            setProgress(0);\n            setError(null);\n        }\n    }[\"ObstacleAnalysisProvider.useCallback[clearResults]\"], []);\n    const value = {\n        status,\n        progress,\n        error,\n        results,\n        chartData,\n        runAnalysis,\n        cancelAnalysis,\n        clearResults\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ObstacleAnalysisContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/context/ObstacleAnalysisContext.tsx\",\n        lineNumber: 624,\n        columnNumber: 8\n    }, undefined);\n};\n/**\n * Hook to access the ObstacleAnalysisContext\n * @returns The ObstacleAnalysisContext properties\n * @throws Error if used outside of ObstacleAnalysisProvider\n */ const useObstacleAnalysis = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ObstacleAnalysisContext);\n    if (!context) throw new Error('useObstacleAnalysis must be used within an ObstacleAnalysisProvider');\n    return context;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbnRleHQvT2JzdGFjbGVBbmFseXNpc0NvbnRleHQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7O0NBYUM7QUFFa0c7QUFDdEQ7QUFDYztBQUNGO0FBQ1M7QUFDL0I7QUFFbUQ7QUE4RnRGOztDQUVDLEdBQ0QsTUFBTWEseUJBQTBDO0lBQzlDQyxvQkFBb0I7QUFDdEI7QUFFQSxNQUFNQyx3Q0FBMEJkLG9EQUFhQSxDQUFzQztBQUVuRjs7O0NBR0MsR0FDTSxNQUFNZSwyQkFBOEQsQ0FBQyxFQUFFQyxRQUFRLEVBQUU7SUFDdEYsTUFBTSxFQUFFQyxHQUFHLEVBQUVDLGdCQUFnQixFQUFFLEdBQUdiLDBEQUFhQTtJQUMvQyxNQUFNLEVBQUVjLFVBQVUsRUFBRUMsV0FBVyxFQUFFQyxhQUFhLEVBQUUsR0FBR2Ysd0VBQW9CQTtJQUN2RSxNQUFNLENBQUNnQixRQUFRQyxVQUFVLEdBQUdyQiwrQ0FBUUEsQ0FBaUI7SUFDckQsTUFBTSxDQUFDc0IsVUFBVUMsWUFBWSxHQUFHdkIsK0NBQVFBLENBQUM7SUFDekMsTUFBTSxDQUFDd0IsT0FBT0MsU0FBUyxHQUFHekIsK0NBQVFBLENBQWdCO0lBQ2xELE1BQU0sQ0FBQzBCLFNBQVNDLFdBQVcsR0FBRzNCLCtDQUFRQSxDQUFnQztJQUN0RSxNQUFNLENBQUM0QixXQUFXQyxhQUFhLEdBQUc3QiwrQ0FBUUEsQ0FBMEI7SUFDcEUsTUFBTSxDQUFDOEIsaUJBQWlCQyxtQkFBbUIsR0FBRy9CLCtDQUFRQSxDQUFrQlU7SUFDeEUsTUFBTXNCLG9CQUFvQjlCLDZDQUFNQSxDQUFDO0lBQ2pDLE1BQU0sRUFBRStCLGFBQWEsRUFBRSxHQUFHNUIsc0VBQW1CQTtJQUUvQzs7OztDQUlDLEdBQ0QsTUFBTTZCLG9CQUFvQmpDLGtEQUFXQTttRUFBQyxDQUFDa0M7WUFDckMsTUFBTUMsZUFBZW5CLFlBQVlvQixRQUFRLENBQUMsRUFBRSxFQUFFQyxZQUFZQyxXQUFX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OlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvY29udGV4dC9PYnN0YWNsZUFuYWx5c2lzQ29udGV4dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBPYnN0YWNsZUFuYWx5c2lzQ29udGV4dC50c3hcbiAqIFxuICogUHVycG9zZTpcbiAqIFByb3ZpZGVzIGEgY29udGV4dCBmb3Igb2JzdGFjbGUgYW5hbHlzaXMgZnVuY3Rpb25hbGl0eSwgaW5jbHVkaW5nIHN0YXRlIG1hbmFnZW1lbnRcbiAqIGFuZCBtZXRob2RzIGZvciBydW5uaW5nIHRlcnJhaW4gY2xlYXJhbmNlIGFuYWx5c2lzLiBUaGlzIGNvbnRleHQgc2VydmVzIGFzIHRoZVxuICogZGF0YSBsYXllciBmb3IgdGhlIG9ic3RhY2xlIGFuYWx5c2lzIGZlYXR1cmUuXG4gKiBcbiAqIFJlbGF0ZWQgRmlsZXM6XG4gKiAtIE9ic3RhY2xlQ2hhcnQudHN4OiBWaXN1YWxpemVzIHRoZSBhbmFseXNpcyByZXN1bHRzXG4gKiAtIE9ic3RhY2xlQW5hbHlzaXNEYXNoYm9hcmQudHN4OiBVSSBjb21wb25lbnQgdXNpbmcgdGhpcyBjb250ZXh0XG4gKiAtIE9ic3RhY2xlQ2hhcnRNb2RhbC50c3g6IE1vZGFsIGRpYWxvZyBzaG93aW5nIHRoZSBjaGFydFxuICogLSB1c2VGbGlnaHRQYXRoU2FtcGxpbmcudHM6IFV0aWxpdHkgZm9yIGdlbmVyYXRpbmcgc2FtcGxlIHBvaW50c1xuICovXG5cbmltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlTWFwQ29udGV4dCB9IGZyb20gJy4vbWFwY29udGV4dCc7XG5pbXBvcnQgeyB1c2VGbGlnaHRQbGFuQ29udGV4dCB9IGZyb20gJy4vRmxpZ2h0UGxhbkNvbnRleHQnO1xuaW1wb3J0IHsgdXNlQXJlYU9mT3BzQ29udGV4dCB9IGZyb20gJy4vQXJlYU9mT3BzQ29udGV4dCc7XG5pbXBvcnQgeyBzYW1wbGVGbGlnaHRQYXRoIH0gZnJvbSAnLi4vaG9va3MvdXNlRmxpZ2h0UGF0aFNhbXBsaW5nJztcbmltcG9ydCAqIGFzIHR1cmYgZnJvbSAnQHR1cmYvdHVyZic7XG5pbXBvcnQgeyBHcmlkQ2VsbCB9IGZyb20gJy4vQXJlYU9mT3BzQ29udGV4dCc7XG5pbXBvcnQgeyBnZXRSZWxpYWJsZVRlcnJhaW5FbGV2YXRpb25zLCBlbnN1cmVERU1Mb2FkZWQgfSBmcm9tICcuLi91dGlscy9UZXJyYWluVXRpbHMnO1xuXG4vKipcbiAqIEludGVyZmFjZSBmb3Igc2FtcGxlIHBvaW50cyB1c2VkIGluIGFuYWx5c2lzXG4gKi9cbmludGVyZmFjZSBTYW1wbGVQb2ludCB7XG4gIHBvc2l0aW9uOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIGRpc3RhbmNlRnJvbVN0YXJ0OiBudW1iZXI7XG4gIGZsaWdodEVsZXZhdGlvbjogbnVtYmVyO1xuICB0ZXJyYWluRWxldmF0aW9uOiBudW1iZXI7XG4gIGNsZWFyYW5jZTogbnVtYmVyO1xufVxuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgYSBwb2ludCBvZiBpbnRlcmVzdCBpbiB0aGUgYW5hbHlzaXNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQb2ludE9mSW50ZXJlc3Qge1xuICB0eXBlOiAnd2F5cG9pbnQnIHwgJ2NvbGxpc2lvbicgfCAnbWluaW11bUNsZWFyYW5jZScgfCAnY3VzdG9tJztcbiAgZGlzdGFuY2U6IG51bWJlcjsgICAgICAgICAgICAgICAgLy8gRGlzdGFuY2UgYWxvbmcgcm91dGUgKGttKVxuICBlbGV2YXRpb246IG51bWJlcjsgICAgICAgICAgICAgICAvLyBFbGV2YXRpb24gKG1ldGVycykgXG4gIGNsZWFyYW5jZT86IG51bWJlcjsgICAgICAgICAgICAgIC8vIE9wdGlvbmFsLCB1c2VkIGZvciBjb2xsaXNpb24gb3IgbWluaW11bUNsZWFyYW5jZVxuICBsYWJlbD86IHN0cmluZzsgICAgICAgICAgICAgICAgICAvLyBPcHRpb25hbCBjdXN0b20gbGFiZWxcbn1cblxuLyoqXG4gKiBXYXlwb2ludCBkYXRhIGZvciBjaGFydCBkaXNwbGF5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgV2F5cG9pbnREYXRhIHtcbiAgZGlzdGFuY2U6IG51bWJlcjsgICAgICAgICAgICAgICAgLy8gRGlzdGFuY2UgYWxvbmcgcm91dGUgKGttKVxuICBsYWJlbDogc3RyaW5nOyAgICAgICAgICAgICAgICAgICAvLyBXYXlwb2ludCBsYWJlbCAoZS5nLiwgXCJXUCAxXCIpXG59XG5cbi8qKlxuICogVW5pZmllZCBpbnRlcmZhY2UgZm9yIHRlcnJhaW4gY2hhcnQgZGF0YVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRlcnJhaW5DaGFydERhdGEge1xuICAvLyBDb3JlIGNoYXJ0IGRhdGFcbiAgZGlzdGFuY2VzOiBudW1iZXJbXTsgICAgICAgICAgICAgLy8gWC1heGlzIHZhbHVlcyAoa20pXG4gIHRlcnJhaW5FbGV2YXRpb25zOiBudW1iZXJbXTsgICAgIC8vIFRlcnJhaW4gWS12YWx1ZXMgKG1ldGVycylcbiAgZmxpZ2h0QWx0aXR1ZGVzOiBudW1iZXJbXTsgICAgICAgLy8gRmxpZ2h0IHBhdGggWS12YWx1ZXMgKG1ldGVycylcbiAgXG4gIC8vIEFuYWx5c2lzIHJlc3VsdHNcbiAgbWluaW11bUNsZWFyYW5jZTogbnVtYmVyOyAgICAgICAgLy8gTWluaW11bSB0ZXJyYWluIGNsZWFyYW5jZSB2YWx1ZSAobWV0ZXJzKVxuICBjcml0aWNhbFBvaW50RGlzdGFuY2U6IG51bWJlciB8IG51bGw7IC8vIERpc3RhbmNlIGF0IHdoaWNoIG1pbmltdW0gY2xlYXJhbmNlIG9jY3VycyAoa20pXG4gIGhpZ2hlc3RQb2ludDogeyAgICAgICAgICAgICAgICAgIC8vIEhpZ2hlc3QgcG9pbnQgaW5mb3JtYXRpb25cbiAgICB0ZXJyYWluOiBudW1iZXI7ICAgICAgICAgICAgICAgLy8gSGlnaGVzdCB0ZXJyYWluIGVsZXZhdGlvblxuICAgIGZsaWdodDogbnVtYmVyOyAgICAgICAgICAgICAgICAvLyBIaWdoZXN0IGZsaWdodCBhbHRpdHVkZVxuICB9O1xuICBcbiAgLy8gT3B0aW9uYWwgdmlzdWFsaXphdGlvbiBlbmhhbmNlbWVudHNcbiAgd2F5cG9pbnRzPzogV2F5cG9pbnREYXRhW107ICAgICAgLy8gV2F5cG9pbnQgbWFya2Vyc1xuICBwb2ludHNPZkludGVyZXN0PzogUG9pbnRPZkludGVyZXN0W107IC8vIFNwZWNpYWwgcG9pbnRzIChjb2xsaXNpb25zLCBldGMuKVxufVxuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgYW5hbHlzaXMgb3B0aW9uc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIEFuYWx5c2lzT3B0aW9ucyB7XG4gIHNhbXBsaW5nUmVzb2x1dGlvbjogbnVtYmVyO1xufVxuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgYW5hbHlzaXMgcmVzdWx0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgT2JzdGFjbGVBbmFseXNpc1Jlc3VsdCB7XG4gIHNhbXBsZVBvaW50czogU2FtcGxlUG9pbnRbXTtcbiAgbWluaW11bUNsZWFyYW5jZTogbnVtYmVyO1xuICBjcml0aWNhbFBvaW50RGlzdGFuY2U6IG51bWJlciB8IG51bGw7XG4gIGhpZ2hlc3RPYnN0YWNsZTogbnVtYmVyO1xuICBmbGlnaHRBbHRpdHVkZXM6IG51bWJlcltdO1xuICB0ZXJyYWluRWxldmF0aW9uczogbnVtYmVyW107XG4gIGRpc3RhbmNlczogbnVtYmVyW107XG4gIHBvaW50c09mSW50ZXJlc3Q6IFBvaW50T2ZJbnRlcmVzdFtdOyBcbn1cblxuLyoqXG4gKiBBbmFseXNpcyBzdGF0dXNcbiAqL1xuZXhwb3J0IHR5cGUgQW5hbHlzaXNTdGF0dXMgPSAnaWRsZScgfCAnbG9hZGluZycgfCAnc3VjY2VzcycgfCAnZXJyb3InO1xuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgT2JzdGFjbGVBbmFseXNpc0NvbnRleHRcbiAqL1xuaW50ZXJmYWNlIE9ic3RhY2xlQW5hbHlzaXNDb250ZXh0UHJvcHMge1xuICBzdGF0dXM6IEFuYWx5c2lzU3RhdHVzO1xuICBwcm9ncmVzczogbnVtYmVyO1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcbiAgcmVzdWx0czogT2JzdGFjbGVBbmFseXNpc1Jlc3VsdCB8IG51bGw7XG4gIGNoYXJ0RGF0YTogVGVycmFpbkNoYXJ0RGF0YSB8IG51bGw7XG4gIHJ1bkFuYWx5c2lzOiAob3B0aW9ucz86IFBhcnRpYWw8QW5hbHlzaXNPcHRpb25zPikgPT4gUHJvbWlzZTx2b2lkPjtcbiAgY2FuY2VsQW5hbHlzaXM6ICgpID0+IHZvaWQ7XG4gIGNsZWFyUmVzdWx0czogKCkgPT4gdm9pZDtcbn1cblxuLyoqXG4gKiBEZWZhdWx0IGFuYWx5c2lzIG9wdGlvbnNcbiAqL1xuY29uc3QgZGVmYXVsdEFuYWx5c2lzT3B0aW9uczogQW5hbHlzaXNPcHRpb25zID0ge1xuICBzYW1wbGluZ1Jlc29sdXRpb246IDEwLFxufTtcblxuY29uc3QgT2JzdGFjbGVBbmFseXNpc0NvbnRleHQgPSBjcmVhdGVDb250ZXh0PE9ic3RhY2xlQW5hbHlzaXNDb250ZXh0UHJvcHMgfCBudWxsPihudWxsKTtcblxuLyoqXG4gKiBQcm92aWRlcyBvYnN0YWNsZSBhbmFseXNpcyBzdGF0ZSBhbmQgbWV0aG9kc1xuICogQHBhcmFtIGNoaWxkcmVuIC0gUmVhY3QgY29tcG9uZW50cyB0byByZW5kZXIgd2l0aGluIHRoZSBwcm92aWRlclxuICovXG5leHBvcnQgY29uc3QgT2JzdGFjbGVBbmFseXNpc1Byb3ZpZGVyOiBSZWFjdC5GQzx7IGNoaWxkcmVuOiBSZWFjdE5vZGUgfT4gPSAoeyBjaGlsZHJlbiB9KSA9PiB7XG4gIGNvbnN0IHsgbWFwLCBlbGV2YXRpb25TZXJ2aWNlIH0gPSB1c2VNYXBDb250ZXh0KCk7XG4gIGNvbnN0IHsgZmxpZ2h0UGxhbiwgaXNQcm9jZXNzZWQsIHNldEZsaWdodFBsYW4gfSA9IHVzZUZsaWdodFBsYW5Db250ZXh0KCk7XG4gIGNvbnN0IFtzdGF0dXMsIHNldFN0YXR1c10gPSB1c2VTdGF0ZTxBbmFseXNpc1N0YXR1cz4oJ2lkbGUnKTtcbiAgY29uc3QgW3Byb2dyZXNzLCBzZXRQcm9ncmVzc10gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3Jlc3VsdHMsIHNldFJlc3VsdHNdID0gdXNlU3RhdGU8T2JzdGFjbGVBbmFseXNpc1Jlc3VsdCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbY2hhcnREYXRhLCBzZXRDaGFydERhdGFdID0gdXNlU3RhdGU8VGVycmFpbkNoYXJ0RGF0YSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbYW5hbHlzaXNPcHRpb25zLCBzZXRBbmFseXNpc09wdGlvbnNdID0gdXNlU3RhdGU8QW5hbHlzaXNPcHRpb25zPihkZWZhdWx0QW5hbHlzaXNPcHRpb25zKTtcbiAgY29uc3QgY2FuY2VsQW5hbHlzaXNSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICBjb25zdCB7IGFvVGVycmFpbkdyaWQgfSA9IHVzZUFyZWFPZk9wc0NvbnRleHQoKTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhbmFseXNpcyByZXN1bHRzIHRvIGNoYXJ0IGRhdGEgZm9ybWF0XG4gKiBAcGFyYW0gcmVzdWx0IC0gVGhlIGFuYWx5c2lzIHJlc3VsdCB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyBUaGUgZm9ybWF0dGVkIGNoYXJ0IGRhdGFcbiAqL1xuY29uc3QgZ2VuZXJhdGVDaGFydERhdGEgPSB1c2VDYWxsYmFjaygocmVzdWx0OiBPYnN0YWNsZUFuYWx5c2lzUmVzdWx0KTogVGVycmFpbkNoYXJ0RGF0YSA9PiB7XG4gIGNvbnN0IGFsdGl0dWRlTW9kZSA9IGZsaWdodFBsYW4/LmZlYXR1cmVzWzBdPy5wcm9wZXJ0aWVzPy53YXlwb2ludHM/LlswXT8uYWx0aXR1ZGVNb2RlID8/ICdhYnNvbHV0ZSc7XG4gIGNvbnNvbGUubG9nKGBHZW5lcmF0aW5nIGNoYXJ0IGRhdGEgZm9yIGFsdGl0dWRlIG1vZGU6ICR7YWx0aXR1ZGVNb2RlfWApO1xuICBcbiAgY29uc3QgZGlzdGFuY2VzSW5LbSA9IHJlc3VsdC5kaXN0YW5jZXMubWFwKGQgPT4gZCAvIDEwMDApO1xuICBjb25zdCBoaWdoZXN0VGVycmFpbiA9IE1hdGgubWF4KC4uLnJlc3VsdC50ZXJyYWluRWxldmF0aW9ucyk7XG4gIGNvbnN0IGhpZ2hlc3RGbGlnaHQgPSBNYXRoLm1heCguLi5yZXN1bHQuZmxpZ2h0QWx0aXR1ZGVzKTtcbiAgXG4gIGNvbnN0IHdheXBvaW50czogV2F5cG9pbnREYXRhW10gPSBbXTtcbiAgY29uc3QgcG9pbnRzT2ZJbnRlcmVzdDogUG9pbnRPZkludGVyZXN0W10gPSBbXTtcblxuICBjb25zb2xlLmdyb3VwQ29sbGFwc2VkKCdbZ2VuZXJhdGVDaGFydERhdGFdIERpc3RhbmNlIFNvdXJjZXMgYW5kIFVuaXRzJyk7XG4gIGNvbnNvbGUubG9nKCdTYW1wbGVkIERpc3RhbmNlcyAobWV0ZXJzLCBzb3VyY2U6IHNhbXBsZUZsaWdodFBhdGggdmlhIHJlc3VsdC5kaXN0YW5jZXMpOicsIHJlc3VsdC5kaXN0YW5jZXMpO1xuICBjb25zb2xlLmxvZygnU2FtcGxlZCBEaXN0YW5jZXMgKGttLCBzb3VyY2U6IHJlc3VsdC5kaXN0YW5jZXMgLyAxMDAwKTonLCBkaXN0YW5jZXNJbkttKTtcblxuICBpZiAoZmxpZ2h0UGxhbj8uZmVhdHVyZXM/LlswXT8ucHJvcGVydGllcz8ud2F5cG9pbnRzICYmIGZsaWdodFBsYW4/Lm9yaWdpbmFsV2F5cG9pbnREaXN0YW5jZXMpIHtcbiAgICBjb25zdCB3YXlwb2ludERhdGEgPSBmbGlnaHRQbGFuLmZlYXR1cmVzWzBdLnByb3BlcnRpZXMud2F5cG9pbnRzO1xuICAgIGNvbnN0IHdheXBvaW50RGlzdGFuY2VzID0gZmxpZ2h0UGxhbi5vcmlnaW5hbFdheXBvaW50RGlzdGFuY2VzO1xuICAgIGNvbnN0IG5hdmlnYXRpb25JbmRpY2VzID0gZmxpZ2h0UGxhbi5wcm9wZXJ0aWVzLm1ldGFkYXRhPy5tZXRhZGF0YT8ubmF2aWdhdGlvbkluZGljZXMgfHwgW107XG5cbiAgICBjb25zb2xlLmxvZygnT3JpZ2luYWwgV2F5cG9pbnRzIChzb3VyY2U6IGZsaWdodFBsYW4ucHJvcGVydGllcy53YXlwb2ludHMpOicsIHdheXBvaW50RGF0YSk7XG4gICAgY29uc29sZS5sb2coJ1dheXBvaW50IERpc3RhbmNlcyAobWV0ZXJzLCBzb3VyY2U6IGZsaWdodFBsYW4ub3JpZ2luYWxXYXlwb2ludERpc3RhbmNlcyk6Jywgd2F5cG9pbnREaXN0YW5jZXMpO1xuICAgIGNvbnNvbGUubG9nKCdDb252ZXJ0ZWQgV2F5cG9pbnQgRGlzdGFuY2VzIChrbSwgc291cmNlOiB3YXlwb2ludERpc3RhbmNlcyAvIDEwMDApOicsIHdheXBvaW50RGlzdGFuY2VzLm1hcChkID0+IGQgLyAxMDAwKSk7XG4gICAgY29uc29sZS5sb2coJ05hdmlnYXRpb24gSW5kaWNlczonLCBuYXZpZ2F0aW9uSW5kaWNlcyk7XG5cbiAgICAvLyBVc2UgbmF2aWdhdGlvbkluZGljZXMgdG8gc2VsZWN0IG9ubHkgbmF2aWdhdGlvbiB3YXlwb2ludHNcbiAgICBuYXZpZ2F0aW9uSW5kaWNlcy5mb3JFYWNoKChuYXZJZHgsIGRpc3RJZHgpID0+IHtcbiAgICAgIGlmIChkaXN0SWR4IDwgd2F5cG9pbnREaXN0YW5jZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHdwID0gd2F5cG9pbnREYXRhLmZpbmQodyA9PiB3LmluZGV4ID09PSBuYXZJZHgpO1xuICAgICAgICBpZiAod3ApIHtcbiAgICAgICAgICBjb25zdCBkaXN0YW5jZUluS20gPSB3YXlwb2ludERpc3RhbmNlc1tkaXN0SWR4XSAvIDEwMDA7XG4gICAgICAgICAgY29uc3QgbGFiZWwgPSBgV1AgJHt3cC5pbmRleCArIDF9YDtcbiAgICAgICAgICBjb25zdCBlbGV2YXRpb24gPSB3cC5vcmlnaW5hbEFsdGl0dWRlO1xuXG4gICAgICAgICAgd2F5cG9pbnRzLnB1c2goe1xuICAgICAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlSW5LbSxcbiAgICAgICAgICAgIGxhYmVsOiBsYWJlbFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcG9pbnRzT2ZJbnRlcmVzdC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICd3YXlwb2ludCcsXG4gICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VJbkttLFxuICAgICAgICAgICAgZWxldmF0aW9uOiBlbGV2YXRpb24sXG4gICAgICAgICAgICBsYWJlbDogbGFiZWxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUud2FybignTWlzc2luZyB3YXlwb2ludHMgb3Igb3JpZ2luYWxXYXlwb2ludERpc3RhbmNlczonLCB7XG4gICAgICBoYXNXYXlwb2ludHM6ICEhZmxpZ2h0UGxhbj8uZmVhdHVyZXM/LlswXT8ucHJvcGVydGllcz8ud2F5cG9pbnRzLFxuICAgICAgaGFzRGlzdGFuY2VzOiAhIWZsaWdodFBsYW4/Lm9yaWdpbmFsV2F5cG9pbnREaXN0YW5jZXNcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnNvbGUuZ3JvdXBFbmQoKTtcbiAgXG4gIGlmIChyZXN1bHQuY3JpdGljYWxQb2ludERpc3RhbmNlICE9PSBudWxsKSB7XG4gICAgY29uc3QgY3JpdGljYWxJbmRleCA9IHJlc3VsdC5kaXN0YW5jZXMuZmluZEluZGV4KGQgPT4gZCA9PT0gcmVzdWx0LmNyaXRpY2FsUG9pbnREaXN0YW5jZSk7XG4gICAgaWYgKGNyaXRpY2FsSW5kZXggPj0gMCkge1xuICAgICAgcG9pbnRzT2ZJbnRlcmVzdC5wdXNoKHtcbiAgICAgICAgdHlwZTogJ21pbmltdW1DbGVhcmFuY2UnLFxuICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2VzSW5LbVtjcml0aWNhbEluZGV4XSxcbiAgICAgICAgZWxldmF0aW9uOiByZXN1bHQuZmxpZ2h0QWx0aXR1ZGVzW2NyaXRpY2FsSW5kZXhdLFxuICAgICAgICBjbGVhcmFuY2U6IHJlc3VsdC5taW5pbXVtQ2xlYXJhbmNlLFxuICAgICAgICBsYWJlbDogJ01pbiBDbGVhcmFuY2UnXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgXG4gIGlmIChyZXN1bHQubWluaW11bUNsZWFyYW5jZSA8IDApIHtcbiAgICByZXN1bHQuZGlzdGFuY2VzLmZvckVhY2goKGQsIGkpID0+IHtcbiAgICAgIGNvbnN0IGNsZWFyYW5jZSA9IHJlc3VsdC5mbGlnaHRBbHRpdHVkZXNbaV0gLSByZXN1bHQudGVycmFpbkVsZXZhdGlvbnNbaV07XG4gICAgICBpZiAoY2xlYXJhbmNlIDwgMCkge1xuICAgICAgICBwb2ludHNPZkludGVyZXN0LnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdjb2xsaXNpb24nLFxuICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZXNJbkttW2ldLFxuICAgICAgICAgIGVsZXZhdGlvbjogcmVzdWx0LmZsaWdodEFsdGl0dWRlc1tpXSxcbiAgICAgICAgICBjbGVhcmFuY2U6IGNsZWFyYW5jZSxcbiAgICAgICAgICBsYWJlbDogJ0NvbGxpc2lvbidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgXG4gIGlmIChyZXN1bHQucG9pbnRzT2ZJbnRlcmVzdCAmJiByZXN1bHQucG9pbnRzT2ZJbnRlcmVzdC5sZW5ndGggPiAwKSB7XG4gICAgcmVzdWx0LnBvaW50c09mSW50ZXJlc3QuZm9yRWFjaChwb2kgPT4ge1xuICAgICAgaWYgKHBvaS50eXBlICE9PSAnd2F5cG9pbnQnKSB7XG4gICAgICAgIHBvaW50c09mSW50ZXJlc3QucHVzaCh7XG4gICAgICAgICAgLi4ucG9pLFxuICAgICAgICAgIGRpc3RhbmNlOiBwb2kuZGlzdGFuY2UgLyAxMDAwLFxuICAgICAgICAgIGVsZXZhdGlvbjogcG9pLmVsZXZhdGlvbiB8fCAwXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIFxuICByZXR1cm4ge1xuICAgIGRpc3RhbmNlczogZGlzdGFuY2VzSW5LbSxcbiAgICB0ZXJyYWluRWxldmF0aW9uczogcmVzdWx0LnRlcnJhaW5FbGV2YXRpb25zLFxuICAgIGZsaWdodEFsdGl0dWRlczogcmVzdWx0LmZsaWdodEFsdGl0dWRlcyxcbiAgICBtaW5pbXVtQ2xlYXJhbmNlOiByZXN1bHQubWluaW11bUNsZWFyYW5jZSxcbiAgICBjcml0aWNhbFBvaW50RGlzdGFuY2U6IHJlc3VsdC5jcml0aWNhbFBvaW50RGlzdGFuY2UgIT09IG51bGwgPyBcbiAgICAgIHJlc3VsdC5jcml0aWNhbFBvaW50RGlzdGFuY2UgLyAxMDAwIDogbnVsbCxcbiAgICBoaWdoZXN0UG9pbnQ6IHtcbiAgICAgIHRlcnJhaW46IGhpZ2hlc3RUZXJyYWluLFxuICAgICAgZmxpZ2h0OiBoaWdoZXN0RmxpZ2h0XG4gICAgfSxcbiAgICB3YXlwb2ludHMsXG4gICAgcG9pbnRzT2ZJbnRlcmVzdFxuICB9O1xufSwgW2ZsaWdodFBsYW5dKTtcblxuLyoqXG4gKiBGaWxscyB0ZXJyYWluIGVsZXZhdGlvbiBkYXRhIGZvciBzYW1wbGUgcG9pbnRzIHVzaW5nIFRlcnJhaW5VdGlsc1xuICogQHBhcmFtIHB0cyAtIEFycmF5IG9mIHNhbXBsZSBwb2ludHMgdG8gZmlsbCB3aXRoIHRlcnJhaW4gZWxldmF0aW9uXG4gKiBAcGFyYW0gb25Qcm9ncmVzcyAtIE9wdGlvbmFsIGNhbGxiYWNrIHRvIHJlcG9ydCBwcm9ncmVzcyAocmV0dXJucyB0cnVlIHRvIGNhbmNlbClcbiAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRlcnJhaW4gZGF0YSBpcyBmaWxsZWRcbiAqL1xuY29uc3QgZmlsbFRlcnJhaW4gPSB1c2VDYWxsYmFjayhhc3luYyAoXG4gIHB0czogU2FtcGxlUG9pbnRbXSxcbiAgb25Qcm9ncmVzcz86IChwZXJjZW50OiBudW1iZXIpID0+IGJvb2xlYW5cbikgPT4ge1xuICBpZiAoIW1hcCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk1hcCBub3QgYXZhaWxhYmxlXCIpO1xuICB9XG5cbiAgLy8gRm9yIGFic29sdXRlL3JlbGF0aXZlIG1vZGVzIHdpdGggZmV3IHBvaW50cywgYWRkIGludGVybWVkaWF0ZSBwb2ludHNcbiAgY29uc3QgYWx0aXR1ZGVNb2RlID0gZmxpZ2h0UGxhbj8uZmVhdHVyZXNbMF0/LnByb3BlcnRpZXM/LndheXBvaW50cz8uWzBdPy5hbHRpdHVkZU1vZGUgPz8gJ2Fic29sdXRlJztcbiAgY29uc3QgaXNOb25UZXJyYWluTW9kZSA9IGFsdGl0dWRlTW9kZSAhPT0gJ3RlcnJhaW4nO1xuICBjb25zdCBoYXNMaW1pdGVkUG9pbnRzID0gcHRzLmxlbmd0aCA8IDIwO1xuXG4gIGxldCBhZGRpdGlvbmFsUG9pbnRzOiBTYW1wbGVQb2ludFtdID0gW107XG5cbiAgaWYgKGlzTm9uVGVycmFpbk1vZGUgJiYgaGFzTGltaXRlZFBvaW50cykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgY29uc3Qgc3RhcnRQb2ludCA9IHB0c1tpXTtcbiAgICAgIGNvbnN0IGVuZFBvaW50ID0gcHRzW2kgKyAxXTtcblxuICAgICAgY29uc3Qgc2VnbWVudERpc3RhbmNlID0gZW5kUG9pbnQuZGlzdGFuY2VGcm9tU3RhcnQgLSBzdGFydFBvaW50LmRpc3RhbmNlRnJvbVN0YXJ0O1xuICAgICAgaWYgKHNlZ21lbnREaXN0YW5jZSA8IDIpIGNvbnRpbnVlO1xuXG4gICAgICBjb25zdCBudW1Qb2ludHMgPSBNYXRoLm1pbihNYXRoLmZsb29yKHNlZ21lbnREaXN0YW5jZSAvIDIpLCAxMCk7XG5cbiAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgbnVtUG9pbnRzOyBqKyspIHtcbiAgICAgICAgY29uc3QgcmF0aW8gPSBqIC8gbnVtUG9pbnRzO1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHN0YXJ0UG9pbnQuZGlzdGFuY2VGcm9tU3RhcnQgKyByYXRpbyAqIChlbmRQb2ludC5kaXN0YW5jZUZyb21TdGFydCAtIHN0YXJ0UG9pbnQuZGlzdGFuY2VGcm9tU3RhcnQpO1xuICAgICAgICBjb25zdCBsb24gPSBzdGFydFBvaW50LnBvc2l0aW9uWzBdICsgcmF0aW8gKiAoZW5kUG9pbnQucG9zaXRpb25bMF0gLSBzdGFydFBvaW50LnBvc2l0aW9uWzBdKTtcbiAgICAgICAgY29uc3QgbGF0ID0gc3RhcnRQb2ludC5wb3NpdGlvblsxXSArIHJhdGlvICogKGVuZFBvaW50LnBvc2l0aW9uWzFdIC0gc3RhcnRQb2ludC5wb3NpdGlvblsxXSk7XG4gICAgICAgIGNvbnN0IGZsaWdodEVsZXZhdGlvbiA9IHN0YXJ0UG9pbnQuZmxpZ2h0RWxldmF0aW9uICsgcmF0aW8gKiAoZW5kUG9pbnQuZmxpZ2h0RWxldmF0aW9uIC0gc3RhcnRQb2ludC5mbGlnaHRFbGV2YXRpb24pO1xuXG4gICAgICAgIGFkZGl0aW9uYWxQb2ludHMucHVzaCh7XG4gICAgICAgICAgcG9zaXRpb246IFtsb24sIGxhdCwgZmxpZ2h0RWxldmF0aW9uXSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gICAgICAgICAgZGlzdGFuY2VGcm9tU3RhcnQ6IGRpc3RhbmNlLFxuICAgICAgICAgIGZsaWdodEVsZXZhdGlvbjogZmxpZ2h0RWxldmF0aW9uLFxuICAgICAgICAgIHRlcnJhaW5FbGV2YXRpb246IDAsXG4gICAgICAgICAgY2xlYXJhbmNlOiAwXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIENvbWJpbmUgYW5kIGRlZHVwbGljYXRlIHBvaW50c1xuICBjb25zdCBhbGxQb2ludHMgPSBbLi4ucHRzLCAuLi5hZGRpdGlvbmFsUG9pbnRzXTtcbiAgY29uc3QgdW5pcXVlUG9pbnRzID0gQXJyYXkuZnJvbShcbiAgICBuZXcgTWFwKFxuICAgICAgYWxsUG9pbnRzLm1hcChwID0+IFtgJHtwLnBvc2l0aW9uWzBdLnRvRml4ZWQoMTApfSwke3AucG9zaXRpb25bMV0udG9GaXhlZCgxMCl9YCwgcF0pXG4gICAgKS52YWx1ZXMoKVxuICApO1xuXG4gIHVuaXF1ZVBvaW50cy5zb3J0KChhLCBiKSA9PiBhLmRpc3RhbmNlRnJvbVN0YXJ0IC0gYi5kaXN0YW5jZUZyb21TdGFydCk7XG5cbiAgY29uc3QgQ0hVTktfU0laRSA9IDI1MDtcbiAgbGV0IHRvdGFsUHJvY2Vzc2VkID0gMDtcbiAgY29uc3QgZWxldmF0aW9uQ2FjaGU6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHVuaXF1ZVBvaW50cy5sZW5ndGg7IGkgKz0gQ0hVTktfU0laRSkge1xuICAgIGNvbnN0IGNodW5rID0gdW5pcXVlUG9pbnRzLnNsaWNlKGksIGkgKyBDSFVOS19TSVpFKTtcbiAgICBjb25zdCBwb2ludHNUb0ZldGNoOiBbbnVtYmVyLCBudW1iZXJdW10gPSBbXTtcbiAgICBjb25zdCBjYWNoZWRFbGV2YXRpb25zOiAobnVtYmVyIHwgbnVsbClbXSA9IFtdO1xuXG4gICAgY2h1bmsuZm9yRWFjaChwID0+IHtcbiAgICAgIGNvbnN0IGtleSA9IGAke3AucG9zaXRpb25bMF0udG9GaXhlZCgxMCl9LCR7cC5wb3NpdGlvblsxXS50b0ZpeGVkKDEwKX1gO1xuICAgICAgY29uc3QgY2FjaGVkRWxldiA9IGVsZXZhdGlvbkNhY2hlW2tleV07XG4gICAgICBpZiAoY2FjaGVkRWxldiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNhY2hlZEVsZXZhdGlvbnMucHVzaChjYWNoZWRFbGV2KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhY2hlZEVsZXZhdGlvbnMucHVzaChudWxsKTtcbiAgICAgICAgcG9pbnRzVG9GZXRjaC5wdXNoKFtwLnBvc2l0aW9uWzBdLCBwLnBvc2l0aW9uWzFdXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsZXQgZWxldmF0aW9uczogbnVtYmVyW10gPSBbXTtcbiAgICBpZiAocG9pbnRzVG9GZXRjaC5sZW5ndGggPiAwKSB7XG4gICAgICBlbGV2YXRpb25zID0gYXdhaXQgZ2V0UmVsaWFibGVUZXJyYWluRWxldmF0aW9ucyhtYXAsIHBvaW50c1RvRmV0Y2gsIChjaHVua1Byb2dyZXNzKSA9PiB7XG4gICAgICAgIGlmIChvblByb2dyZXNzKSB7XG4gICAgICAgICAgY29uc3QgY2h1bmtGcmFjdGlvbiA9IE1hdGgubWluKENIVU5LX1NJWkUsIHVuaXF1ZVBvaW50cy5sZW5ndGggLSBpKSAvIHVuaXF1ZVBvaW50cy5sZW5ndGg7XG4gICAgICAgICAgY29uc3QgYWRqdXN0ZWRQcm9ncmVzcyA9ICh0b3RhbFByb2Nlc3NlZCAvIHVuaXF1ZVBvaW50cy5sZW5ndGggKyAoY2h1bmtQcm9ncmVzcyAvIDEwMCkgKiBjaHVua0ZyYWN0aW9uKSAqIDEwMDtcbiAgICAgICAgICBjb25zdCBjYXBwZWRQcm9ncmVzcyA9IE1hdGgubWluKGFkanVzdGVkUHJvZ3Jlc3MsIDEwMCk7XG4gICAgICAgICAgIHJldHVybiBvblByb2dyZXNzKGNhcHBlZFByb2dyZXNzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcblxuICAgICAgLy8gUmV0cnkgbmVnYXRpdmUgZWxldmF0aW9uc1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBlbGV2YXRpb25zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChlbGV2YXRpb25zW2pdIDwgMCkge1xuICAgICAgICAgIGNvbnN0IFtsb24sIGxhdF0gPSBwb2ludHNUb0ZldGNoW2pdO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZURFTUxvYWRlZChtYXApO1xuICAgICAgICAgIGNvbnN0IHJldHJ5RWxldmF0aW9ucyA9IGF3YWl0IGdldFJlbGlhYmxlVGVycmFpbkVsZXZhdGlvbnMobWFwLCBbW2xvbiwgbGF0XV0pO1xuICAgICAgICAgIGVsZXZhdGlvbnNbal0gPSByZXRyeUVsZXZhdGlvbnNbMF07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIGNhY2hlIHdpdGggbmV3IGVsZXZhdGlvbnNcbiAgICAgIHBvaW50c1RvRmV0Y2guZm9yRWFjaCgocG9pbnQsIGlkeCkgPT4ge1xuICAgICAgICBjb25zdCBrZXkgPSBgJHtwb2ludFswXS50b0ZpeGVkKDEwKX0sJHtwb2ludFsxXS50b0ZpeGVkKDEwKX1gO1xuICAgICAgICBlbGV2YXRpb25DYWNoZVtrZXldID0gZWxldmF0aW9uc1tpZHhdO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgbGV0IGVsZXZhdGlvbkluZGV4ID0gMDtcbiAgICBjaHVuay5mb3JFYWNoKChwLCBqKSA9PiB7XG4gICAgICBsZXQgZWxldmF0aW9uOiBudW1iZXI7XG4gICAgICBpZiAoY2FjaGVkRWxldmF0aW9uc1tqXSAhPT0gbnVsbCkge1xuICAgICAgICBlbGV2YXRpb24gPSBjYWNoZWRFbGV2YXRpb25zW2pdITtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZXZhdGlvbiA9IGVsZXZhdGlvbnNbZWxldmF0aW9uSW5kZXgrK107XG4gICAgICB9XG4gICAgICBwLnRlcnJhaW5FbGV2YXRpb24gPSBlbGV2YXRpb247XG4gICAgICBwLmNsZWFyYW5jZSA9IHAuZmxpZ2h0RWxldmF0aW9uIC0gcC50ZXJyYWluRWxldmF0aW9uO1xuICAgIH0pO1xuXG4gICAgdG90YWxQcm9jZXNzZWQgKz0gY2h1bmsubGVuZ3RoO1xuICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4oKHRvdGFsUHJvY2Vzc2VkIC8gdW5pcXVlUG9pbnRzLmxlbmd0aCkgKiAxMDAsIDEwMCk7XG4gICAgaWYgKG9uUHJvZ3Jlc3MgJiYgb25Qcm9ncmVzcyhwcm9ncmVzcykpIHJldHVybjtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTUpKTtcbiAgfVxuXG4gIC8vIFVwZGF0ZSBjcml0aWNhbCBwb2ludHMgZm9yIG5vbi10ZXJyYWluIG1vZGVzXG4gIGlmIChhZGRpdGlvbmFsUG9pbnRzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBjcml0aWNhbFBvaW50cyA9IGFkZGl0aW9uYWxQb2ludHMuZmlsdGVyKHAgPT5cbiAgICAgIHAuY2xlYXJhbmNlIDwgMCB8fFxuICAgICAgcC5jbGVhcmFuY2UgPCBNYXRoLm1pbiguLi5wdHMubWFwKG9wID0+IG9wLmNsZWFyYW5jZSkpICsgNVxuICAgICk7XG5cbiAgICBpZiAoY3JpdGljYWxQb2ludHMubGVuZ3RoID4gMCkge1xuICAgICAgY3JpdGljYWxQb2ludHMuZm9yRWFjaChjcCA9PiB7XG4gICAgICAgIGNvbnN0IHRvb0Nsb3NlID0gcHRzLnNvbWUocCA9PiBNYXRoLmFicyhwLmRpc3RhbmNlRnJvbVN0YXJ0IC0gY3AuZGlzdGFuY2VGcm9tU3RhcnQpIDwgMik7XG4gICAgICAgIGlmICghdG9vQ2xvc2UpIHtcbiAgICAgICAgICBwdHMucHVzaChjcCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBwdHMuc29ydCgoYSwgYikgPT4gYS5kaXN0YW5jZUZyb21TdGFydCAtIGIuZGlzdGFuY2VGcm9tU3RhcnQpO1xuICAgIH1cbiAgfVxufSwgW21hcCwgZmxpZ2h0UGxhbl0pO1xuXG4vKipcbiAqIFJ1bnMgdGhlIG9ic3RhY2xlIGFuYWx5c2lzIGZvciB0aGUgZmxpZ2h0IHBsYW5cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgYW5hbHlzaXMgb3B0aW9ucyB0byBvdmVycmlkZSBkZWZhdWx0c1xuICovXG5jb25zdCBydW5BbmFseXNpcyA9IHVzZUNhbGxiYWNrKGFzeW5jIChvcHRpb25zPzogUGFydGlhbDxBbmFseXNpc09wdGlvbnM+KSA9PiB7XG4gIGlmIChzdGF0dXMgPT09ICdsb2FkaW5nJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGFuYWx5c2lzSWQgPSBEYXRlLm5vdygpO1xuIFxuICBpZiAoIW1hcCB8fCAhZmxpZ2h0UGxhbiB8fCAhaXNQcm9jZXNzZWQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBgTWFwLCBmbGlnaHQgcGxhbiwgb3IgcHJvY2Vzc2luZyBpbmNvbXBsZXRlIChtYXA6ICR7ISFtYXB9LCBmbGlnaHRQbGFuOiAkeyEhZmxpZ2h0UGxhbn0sIGlzUHJvY2Vzc2VkOiAke2lzUHJvY2Vzc2VkfSlgO1xuICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgc2V0U3RhdHVzKCdlcnJvcicpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgc2V0U3RhdHVzKCdsb2FkaW5nJyk7XG4gICAgc2V0UHJvZ3Jlc3MoMCk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gICAgY2FuY2VsQW5hbHlzaXNSZWYuY3VycmVudCA9IGZhbHNlO1xuXG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDE1KSk7XG5cbiAgICBpZiAoY2FuY2VsQW5hbHlzaXNSZWYuY3VycmVudCkge1xuICAgICAgY29uc29sZS5sb2coYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtPYnN0YWNsZUFuYWx5c2lzQ29udGV4dC50c3hdIEFuYWx5c2lzIGNhbmNlbGxlZCBkdXJpbmcgaW5pdGlhbCBkZWxheWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICBzZXRBbmFseXNpc09wdGlvbnMocHJldiA9PiAoeyAuLi5wcmV2LCAuLi5vcHRpb25zIH0pKTtcbiAgICB9XG5cbiAgICBjb25zdCBmbGlnaHRGZWF0dXJlID0gZmxpZ2h0UGxhbi5mZWF0dXJlc1swXTtcbiAgICBpZiAoIWZsaWdodEZlYXR1cmUgfHwgZmxpZ2h0RmVhdHVyZS5nZW9tZXRyeS50eXBlICE9PSAnTGluZVN0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBmbGlnaHQgcGxhbiBnZW9tZXRyeS4gRXhwZWN0ZWQgTGluZVN0cmluZy4nKTtcbiAgICB9XG4gICAgY29uc3QgY29vcmRzID0gZmxpZ2h0RmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlcyBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29vcmRzKSB8fCBjb29yZHMubGVuZ3RoIDwgMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGbGlnaHQgcGxhbiBtdXN0IGhhdmUgYXQgbGVhc3QgMiB3YXlwb2ludHMuJyk7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIERFTSBpcyBsb2FkZWRcbiAgICBhd2FpdCBlbnN1cmVERU1Mb2FkZWQobWFwKTtcblxuICAgIGNvbnN0IHdheXBvaW50cyA9IGZsaWdodEZlYXR1cmUucHJvcGVydGllcz8ud2F5cG9pbnRzIHx8IFtdO1xuICAgIGlmICh3YXlwb2ludHMubGVuZ3RoIDwgMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGbGlnaHQgcGxhbiBtdXN0IGhhdmUgYXQgbGVhc3QgMiB2YWxpZCB3YXlwb2ludHMuJyk7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvZ3Jlc3NDYWxsYmFjayA9ICh2YWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgICBjb25zdCByb3VuZGVkVmFsdWUgPSBNYXRoLnJvdW5kKHZhbHVlKTtcbiAgICAgIGlmIChyb3VuZGVkVmFsdWUgJSA1ID09PSAwIHx8IHJvdW5kZWRWYWx1ZSA9PT0gMTAwKSB7XG4gICAgICAgICBzZXRQcm9ncmVzcyhyb3VuZGVkVmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbmNlbEFuYWx5c2lzUmVmLmN1cnJlbnQ7XG4gICAgfTtcblxuICAgIGNvbnN0IGFsdGl0dWRlTW9kZSA9IHdheXBvaW50c1swXT8uYWx0aXR1ZGVNb2RlID8/ICdhYnNvbHV0ZSc7XG4gICBcbiAgICBjb25zb2xlLnRpbWUoXCJzYW1wbGVGbGlnaHRQYXRoXCIpO1xuICAgIGxldCBzYW1wbGVQb2ludHM6IFNhbXBsZVBvaW50W10gPSBhd2FpdCBzYW1wbGVGbGlnaHRQYXRoKFxuICAgICAgZmxpZ2h0RmVhdHVyZS5nZW9tZXRyeSBhcyBHZW9KU09OLkxpbmVTdHJpbmcsXG4gICAgICB7XG4gICAgICAgIHJlc29sdXRpb246IGFuYWx5c2lzT3B0aW9ucy5zYW1wbGluZ1Jlc29sdXRpb24sXG4gICAgICAgIHByb2dyZXNzQ2FsbGJhY2ssXG4gICAgICAgIGlzVGVycmFpbk1vZGU6IGFsdGl0dWRlTW9kZSA9PT0gJ3RlcnJhaW4nXG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zb2xlLnRpbWVFbmQoXCJzYW1wbGVGbGlnaHRQYXRoXCIpO1xuXG4gICAgaWYgKGNhbmNlbEFuYWx5c2lzUmVmLmN1cnJlbnQpIHtcbiAgICAgIHNldFN0YXR1cygnaWRsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENvbXB1dGUgd2F5cG9pbnQgZGlzdGFuY2VzXG4gICAgbGV0IGN1bXVsYXRpdmVEaXN0YW5jZSA9IDA7XG4gICAgY29uc3Qgb3JpZ2luYWxXYXlwb2ludERpc3RhbmNlczogbnVtYmVyW10gPSBbMF07XG4gICAgY29uc3Qgd2F5cG9pbnRDb29yZHMgPSB3YXlwb2ludHMubWFwKCh3cCwgaWR4KSA9PiB7XG4gICAgICBjb25zdCBjb29yZCA9IGZsaWdodEZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbaWR4XTtcbiAgICAgIGlmICghY29vcmQgfHwgIUFycmF5LmlzQXJyYXkoY29vcmQpIHx8IGNvb3JkLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvb3JkO1xuICAgIH0pLmZpbHRlcihjb29yZCA9PiBjb29yZCAhPT0gbnVsbCkgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXJdW107XG5cbiAgICBpZiAod2F5cG9pbnRDb29yZHMubGVuZ3RoICE9PSB3YXlwb2ludHMubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtPYnN0YWNsZUFuYWx5c2lzQ29udGV4dC50c3hdIENvb3JkaW5hdGUgbWlzbWF0Y2g6YCwge1xuICAgICAgICB3YXlwb2ludHNMZW5ndGg6IHdheXBvaW50cy5sZW5ndGgsXG4gICAgICAgIGNvb3Jkc0xlbmd0aDogd2F5cG9pbnRDb29yZHMubGVuZ3RoXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHdheXBvaW50Q29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwcmV2Q29vcmQgPSB3YXlwb2ludENvb3Jkc1tpIC0gMV07XG4gICAgICBjb25zdCBjdXJyQ29vcmQgPSB3YXlwb2ludENvb3Jkc1tpXTtcbiAgICAgIGNvbnN0IHNlZ21lbnREaXN0YW5jZSA9IHR1cmYuZGlzdGFuY2UoXG4gICAgICAgIFtwcmV2Q29vcmRbMF0sIHByZXZDb29yZFsxXV0sXG4gICAgICAgIFtjdXJyQ29vcmRbMF0sIGN1cnJDb29yZFsxXV0sXG4gICAgICAgIHsgdW5pdHM6ICdtZXRlcnMnIH1cbiAgICAgICk7XG4gICAgICBjdW11bGF0aXZlRGlzdGFuY2UgKz0gc2VnbWVudERpc3RhbmNlO1xuICAgICAgb3JpZ2luYWxXYXlwb2ludERpc3RhbmNlcy5wdXNoKGN1bXVsYXRpdmVEaXN0YW5jZSk7XG4gICAgfVxuXG4gICAgY29uc3QgdG90YWxEaXN0YW5jZSA9IGZsaWdodFBsYW4ucHJvcGVydGllcz8udG90YWxEaXN0YW5jZSA/PyBjdW11bGF0aXZlRGlzdGFuY2U7XG4gICAgaWYgKG9yaWdpbmFsV2F5cG9pbnREaXN0YW5jZXMubGVuZ3RoIDwgd2F5cG9pbnRzLmxlbmd0aCAmJiB0b3RhbERpc3RhbmNlKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtPYnN0YWNsZUFuYWx5c2lzQ29udGV4dC50c3hdIEluY29tcGxldGUgd2F5cG9pbnQgZGlzdGFuY2VzLCBpbnRlcnBvbGF0aW5nIHdpdGggdG90YWxEaXN0YW5jZTpgLCB0b3RhbERpc3RhbmNlKTtcbiAgICAgIGNvbnN0IGZhY3RvciA9IHRvdGFsRGlzdGFuY2UgLyAod2F5cG9pbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgb3JpZ2luYWxXYXlwb2ludERpc3RhbmNlcy5sZW5ndGggPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3YXlwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgb3JpZ2luYWxXYXlwb2ludERpc3RhbmNlcy5wdXNoKGkgKiBmYWN0b3IpO1xuICAgICAgfVxuICAgIH1cbiAgXG4gICAgY29uc3QgdXBkYXRlZEZsaWdodFBsYW4gPSB7XG4gICAgICAuLi5mbGlnaHRQbGFuLFxuICAgICAgd2F5cG9pbnREaXN0YW5jZXM6IGZsaWdodFBsYW4ub3JpZ2luYWxXYXlwb2ludERpc3RhbmNlcyB8fCBmbGlnaHRQbGFuLndheXBvaW50RGlzdGFuY2VzXG4gICAgfTtcbiAgICBzZXRGbGlnaHRQbGFuKHVwZGF0ZWRGbGlnaHRQbGFuKTtcblxuICAgIGlmIChhbHRpdHVkZU1vZGUgIT09ICd0ZXJyYWluJykge1xuICAgICAgc2FtcGxlUG9pbnRzLmZvckVhY2gocG9pbnQgPT4ge1xuICAgICAgICBsZXQgc2VnbWVudEluZGV4ID0gMDtcbiAgICAgICAgd2hpbGUgKFxuICAgICAgICAgIHNlZ21lbnRJbmRleCA8IG9yaWdpbmFsV2F5cG9pbnREaXN0YW5jZXMubGVuZ3RoIC0gMSAmJlxuICAgICAgICAgIHBvaW50LmRpc3RhbmNlRnJvbVN0YXJ0ID4gb3JpZ2luYWxXYXlwb2ludERpc3RhbmNlc1tzZWdtZW50SW5kZXggKyAxXSArIE51bWJlci5FUFNJTE9OXG4gICAgICAgICkge1xuICAgICAgICAgIHNlZ21lbnRJbmRleCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgcG9pbnQuZmxpZ2h0RWxldmF0aW9uID0gd2F5cG9pbnRzW3NlZ21lbnRJbmRleF0ub3JpZ2luYWxBbHRpdHVkZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFVzZSBlbGV2YXRpb24gY2FjaGUgaW4gZmlsbFRlcnJhaW5cbiAgICBjb25zdCBlbGV2YXRpb25DYWNoZTogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xuICAgIGF3YWl0IGZpbGxUZXJyYWluKHNhbXBsZVBvaW50cywgKHApID0+IHtcbiAgICAgIHNldFByb2dyZXNzKDYwICsgTWF0aC5yb3VuZChwICogMC40KSk7XG4gICAgICByZXR1cm4gY2FuY2VsQW5hbHlzaXNSZWYuY3VycmVudDtcbiAgICB9KTtcblxuICAgIGlmIChjYW5jZWxBbmFseXNpc1JlZi5jdXJyZW50KSB7XG4gICAgICBzZXRTdGF0dXMoJ2lkbGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZWNhbGN1bGF0ZSBjbGVhcmFuY2VcbiAgICBzYW1wbGVQb2ludHMuZm9yRWFjaChwb2ludCA9PiB7XG4gICAgICBwb2ludC5jbGVhcmFuY2UgPSBwb2ludC5mbGlnaHRFbGV2YXRpb24gLSBwb2ludC50ZXJyYWluRWxldmF0aW9uO1xuICAgIH0pO1xuXG4gICAgLy8gQ29tcHV0ZSBhbmFseXNpcyByZXN1bHRzXG4gICAgY29uc3QgZmxpZ2h0QWx0aXR1ZGVzID0gc2FtcGxlUG9pbnRzLm1hcChwID0+IHAuZmxpZ2h0RWxldmF0aW9uKTtcbiAgICBjb25zdCB0ZXJyYWluRWxldmF0aW9ucyA9IHNhbXBsZVBvaW50cy5tYXAocCA9PiBwLnRlcnJhaW5FbGV2YXRpb24pO1xuICAgIGNvbnN0IGRpc3RhbmNlcyA9IHNhbXBsZVBvaW50cy5tYXAocCA9PiBwLmRpc3RhbmNlRnJvbVN0YXJ0KTtcbiAgICBjb25zdCBjbGVhcmFuY2VzID0gc2FtcGxlUG9pbnRzLm1hcChwID0+IHAuY2xlYXJhbmNlKTtcbiAgICBjb25zdCBtaW5pbXVtQ2xlYXJhbmNlID0gTWF0aC5taW4oLi4uY2xlYXJhbmNlcyk7XG4gICAgY29uc3QgaGlnaGVzdE9ic3RhY2xlID0gTWF0aC5tYXgoLi4udGVycmFpbkVsZXZhdGlvbnMpO1xuICAgIGNvbnN0IGNyaXRpY2FsUG9pbnRJbmRleCA9IGNsZWFyYW5jZXMuaW5kZXhPZihtaW5pbXVtQ2xlYXJhbmNlKTtcbiAgICBjb25zdCBjcml0aWNhbFBvaW50RGlzdGFuY2UgPSBjcml0aWNhbFBvaW50SW5kZXggPj0gMCA/IGRpc3RhbmNlc1tjcml0aWNhbFBvaW50SW5kZXhdIDogbnVsbDtcblxuICAgIGNvbnN0IHBvaW50c09mSW50ZXJlc3Q6IFBvaW50T2ZJbnRlcmVzdFtdID0gW107XG5cbiAgICBjb25zdCByZXN1bHQ6IE9ic3RhY2xlQW5hbHlzaXNSZXN1bHQgPSB7XG4gICAgICBzYW1wbGVQb2ludHMsXG4gICAgICBtaW5pbXVtQ2xlYXJhbmNlLFxuICAgICAgY3JpdGljYWxQb2ludERpc3RhbmNlLFxuICAgICAgaGlnaGVzdE9ic3RhY2xlLFxuICAgICAgZmxpZ2h0QWx0aXR1ZGVzLFxuICAgICAgdGVycmFpbkVsZXZhdGlvbnMsXG4gICAgICBkaXN0YW5jZXMsXG4gICAgICBwb2ludHNPZkludGVyZXN0LFxuICAgIH07XG5cbiAgICBzZXRSZXN1bHRzKHJlc3VsdCk7XG4gICAgc2V0Q2hhcnREYXRhKGdlbmVyYXRlQ2hhcnREYXRhKHJlc3VsdCkpO1xuXG4gICAgc2V0U3RhdHVzKCdzdWNjZXNzJyk7XG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcihgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW09ic3RhY2xlQW5hbHlzaXNDb250ZXh0LnRzeF0gQW5hbHlzaXMgJHthbmFseXNpc0lkfSBlcnJvcjpgLCBlcnIpO1xuICAgIHNldEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBTdHJpbmcoZXJyKSk7XG4gICAgc2V0U3RhdHVzKCdlcnJvcicpO1xuICB9fSwgW21hcCwgZmxpZ2h0UGxhbiwgaXNQcm9jZXNzZWQsIGFuYWx5c2lzT3B0aW9ucywgc2V0RXJyb3IsIHNldFN0YXR1cywgc2V0UHJvZ3Jlc3MsIHNldEZsaWdodFBsYW4sIGdlbmVyYXRlQ2hhcnREYXRhLCBmaWxsVGVycmFpbiwgc3RhdHVzXSk7XG4vKipcbiAqIENhbmNlbHMgdGhlIG9uZ29pbmcgYW5hbHlzaXNcbiAqL1xuY29uc3QgY2FuY2VsQW5hbHlzaXMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gIGNhbmNlbEFuYWx5c2lzUmVmLmN1cnJlbnQgPSB0cnVlO1xuICBzZXRTdGF0dXMoJ2lkbGUnKTtcbiAgc2V0UHJvZ3Jlc3MoMCk7XG59LCBbXSk7XG5cbi8qKlxuICogQ2xlYXJzIGFuYWx5c2lzIHJlc3VsdHMgYW5kIGVsZXZhdGlvbiBjYWNoZVxuICovXG5jb25zdCBjbGVhclJlc3VsdHMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gIHNldFJlc3VsdHMobnVsbCk7XG4gIHNldENoYXJ0RGF0YShudWxsKTtcbiAgc2V0U3RhdHVzKCdpZGxlJyk7XG4gIHNldFByb2dyZXNzKDApO1xuICBzZXRFcnJvcihudWxsKTtcbn0sIFtdKTtcblxuY29uc3QgdmFsdWUgPSB7XG4gIHN0YXR1cyxcbiAgcHJvZ3Jlc3MsXG4gIGVycm9yLFxuICByZXN1bHRzLFxuICBjaGFydERhdGEsXG4gIHJ1bkFuYWx5c2lzLFxuICBjYW5jZWxBbmFseXNpcyxcbiAgY2xlYXJSZXN1bHRzLFxufTtcblxucmV0dXJuIDxPYnN0YWNsZUFuYWx5c2lzQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17dmFsdWV9PntjaGlsZHJlbn08L09ic3RhY2xlQW5hbHlzaXNDb250ZXh0LlByb3ZpZGVyPjtcbn07XG5cbi8qKlxuICogSG9vayB0byBhY2Nlc3MgdGhlIE9ic3RhY2xlQW5hbHlzaXNDb250ZXh0XG4gKiBAcmV0dXJucyBUaGUgT2JzdGFjbGVBbmFseXNpc0NvbnRleHQgcHJvcGVydGllc1xuICogQHRocm93cyBFcnJvciBpZiB1c2VkIG91dHNpZGUgb2YgT2JzdGFjbGVBbmFseXNpc1Byb3ZpZGVyXG4gKi9cbmV4cG9ydCBjb25zdCB1c2VPYnN0YWNsZUFuYWx5c2lzID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChPYnN0YWNsZUFuYWx5c2lzQ29udGV4dCk7XG4gIGlmICghY29udGV4dCkgdGhyb3cgbmV3IEVycm9yKCd1c2VPYnN0YWNsZUFuYWx5c2lzIG11c3QgYmUgdXNlZCB3aXRoaW4gYW4gT2JzdGFjbGVBbmFseXNpc1Byb3ZpZGVyJyk7XG4gIHJldHVybiBjb250ZXh0O1xufTsiXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJ1c2VSZWYiLCJ1c2VNYXBDb250ZXh0IiwidXNlRmxpZ2h0UGxhbkNvbnRleHQiLCJ1c2VBcmVhT2ZPcHNDb250ZXh0Iiwic2FtcGxlRmxpZ2h0UGF0aCIsInR1cmYiLCJnZXRSZWxpYWJsZVRlcnJhaW5FbGV2YXRpb25zIiwiZW5zdXJlREVNTG9hZGVkIiwiZGVmYXVsdEFuYWx5c2lzT3B0aW9ucyIsInNhbXBsaW5nUmVzb2x1dGlvbiIsIk9ic3RhY2xlQW5hbHlzaXNDb250ZXh0IiwiT2JzdGFjbGVBbmFseXNpc1Byb3ZpZGVyIiwiY2hpbGRyZW4iLCJtYXAiLCJlbGV2YXRpb25TZXJ2aWNlIiwiZmxpZ2h0UGxhbiIsImlzUHJvY2Vzc2VkIiwic2V0RmxpZ2h0UGxhbiIsInN0YXR1cyIsInNldFN0YXR1cyIsInByb2dyZXNzIiwic2V0UHJvZ3Jlc3MiLCJlcnJvciIsInNldEVycm9yIiwicmVzdWx0cyIsInNldFJlc3VsdHMiLCJjaGFydERhdGEiLCJzZXRDaGFydERhdGEiLCJhbmFseXNpc09wdGlvbnMiLCJzZXRBbmFseXNpc09wdGlvbnMiLCJjYW5jZWxBbmFseXNpc1JlZiIsImFvVGVycmFpbkdyaWQiLCJnZW5lcmF0ZUNoYXJ0RGF0YSIsInJlc3VsdCIsImFsdGl0dWRlTW9kZSIsImZlYXR1cmVzIiwicHJvcGVydGllcyIsIndheXBvaW50cyIsImNvbnNvbGUiLCJsb2ciLCJkaXN0YW5jZXNJbkttIiwiZGlzdGFuY2VzIiwiZCIsImhpZ2hlc3RUZXJyYWluIiwiTWF0aCIsIm1heCIsInRlcnJhaW5FbGV2YXRpb25zIiwiaGlnaGVzdEZsaWdodCIsImZsaWdodEFsdGl0dWRlcyIsInBvaW50c09mSW50ZXJlc3QiLCJncm91cENvbGxhcHNlZCIsIm9yaWdpbmFsV2F5cG9pbnREaXN0YW5jZXMiLCJ3YXlwb2ludERhdGEiLCJ3YXlwb2ludERpc3RhbmNlcyIsIm5hdmlnYXRpb25JbmRpY2VzIiwibWV0YWRhdGEiLCJmb3JFYWNoIiwibmF2SWR4IiwiZGlzdElkeCIsImxlbmd0aCIsIndwIiwiZmluZCIsInciLCJpbmRleCIsImRpc3RhbmNlSW5LbSIsImxhYmVsIiwiZWxldmF0aW9uIiwib3JpZ2luYWxBbHRpdHVkZSIsInB1c2giLCJkaXN0YW5jZSIsInR5cGUiLCJ3YXJuIiwiaGFzV2F5cG9pbnRzIiwiaGFzRGlzdGFuY2VzIiwiZ3JvdXBFbmQiLCJjcml0aWNhbFBvaW50RGlzdGFuY2UiLCJjcml0aWNhbEluZGV4IiwiZmluZEluZGV4IiwiY2xlYXJhbmNlIiwibWluaW11bUNsZWFyYW5jZSIsImkiLCJwb2kiLCJoaWdoZXN0UG9pbnQiLCJ0ZXJyYWluIiwiZmxpZ2h0IiwiZmlsbFRlcnJhaW4iLCJwdHMiLCJvblByb2dyZXNzIiwiRXJyb3IiLCJpc05vblRlcnJhaW5Nb2RlIiwiaGFzTGltaXRlZFBvaW50cyIsImFkZGl0aW9uYWxQb2ludHMiLCJzdGFydFBvaW50IiwiZW5kUG9pbnQiLCJzZWdtZW50RGlzdGFuY2UiLCJkaXN0YW5jZUZyb21TdGFydCIsIm51bVBvaW50cyIsIm1pbiIsImZsb29yIiwiaiIsInJhdGlvIiwibG9uIiwicG9zaXRpb24iLCJsYXQiLCJmbGlnaHRFbGV2YXRpb24iLCJ0ZXJyYWluRWxldmF0aW9uIiwiYWxsUG9pbnRzIiwidW5pcXVlUG9pbnRzIiwiQXJyYXkiLCJmcm9tIiwiTWFwIiwicCIsInRvRml4ZWQiLCJ2YWx1ZXMiLCJzb3J0IiwiYSIsImIiLCJDSFVOS19TSVpFIiwidG90YWxQcm9jZXNzZWQiLCJlbGV2YXRpb25DYWNoZSIsImNodW5rIiwic2xpY2UiLCJwb2ludHNUb0ZldGNoIiwiY2FjaGVkRWxldmF0aW9ucyIsImtleSIsImNhY2hlZEVsZXYiLCJ1bmRlZmluZWQiLCJlbGV2YXRpb25zIiwiY2h1bmtQcm9ncmVzcyIsImNodW5rRnJhY3Rpb24iLCJhZGp1c3RlZFByb2dyZXNzIiwiY2FwcGVkUHJvZ3Jlc3MiLCJyZXRyeUVsZXZhdGlvbnMiLCJwb2ludCIsImlkeCIsImVsZXZhdGlvbkluZGV4IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiY3JpdGljYWxQb2ludHMiLCJmaWx0ZXIiLCJvcCIsImNwIiwidG9vQ2xvc2UiLCJzb21lIiwiYWJzIiwicnVuQW5hbHlzaXMiLCJvcHRpb25zIiwiYW5hbHlzaXNJZCIsIkRhdGUiLCJub3ciLCJlcnJvck1lc3NhZ2UiLCJjdXJyZW50IiwidG9JU09TdHJpbmciLCJwcmV2IiwiZmxpZ2h0RmVhdHVyZSIsImdlb21ldHJ5IiwiY29vcmRzIiwiY29vcmRpbmF0ZXMiLCJpc0FycmF5IiwicHJvZ3Jlc3NDYWxsYmFjayIsInZhbHVlIiwicm91bmRlZFZhbHVlIiwicm91bmQiLCJ0aW1lIiwic2FtcGxlUG9pbnRzIiwicmVzb2x1dGlvbiIsImlzVGVycmFpbk1vZGUiLCJ0aW1lRW5kIiwiY3VtdWxhdGl2ZURpc3RhbmNlIiwid2F5cG9pbnRDb29yZHMiLCJjb29yZCIsIndheXBvaW50c0xlbmd0aCIsImNvb3Jkc0xlbmd0aCIsInByZXZDb29yZCIsImN1cnJDb29yZCIsInVuaXRzIiwidG90YWxEaXN0YW5jZSIsImZhY3RvciIsInVwZGF0ZWRGbGlnaHRQbGFuIiwic2VnbWVudEluZGV4IiwiTnVtYmVyIiwiRVBTSUxPTiIsImNsZWFyYW5jZXMiLCJoaWdoZXN0T2JzdGFjbGUiLCJjcml0aWNhbFBvaW50SW5kZXgiLCJpbmRleE9mIiwiZXJyIiwibWVzc2FnZSIsIlN0cmluZyIsImNhbmNlbEFuYWx5c2lzIiwiY2xlYXJSZXN1bHRzIiwiUHJvdmlkZXIiLCJ1c2VPYnN0YWNsZUFuYWx5c2lzIiwiY29udGV4dCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/context/ObstacleAnalysisContext.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/context/PremiumContext.tsx":
/*!********************************************!*\
  !*** ./src/app/context/PremiumContext.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PremiumProvider: () => (/* binding */ PremiumProvider),\n/* harmony export */   TierLevel: () => (/* reexport safe */ _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_2__.TierLevel),\n/* harmony export */   getParameterLimits: () => (/* binding */ getParameterLimits),\n/* harmony export */   usePremium: () => (/* binding */ usePremium)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../types/PremiumTypes */ \"(ssr)/./src/app/types/PremiumTypes.ts\");\n/* harmony import */ var _utils_premiumConfig__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/premiumConfig */ \"(ssr)/./src/app/utils/premiumConfig.ts\");\n/**\n * src/app/context/PremiumContext.tsx\n * \n * Purpose:\n * Provides centralized premium feature access management throughout the application.\n */ /* __next_internal_client_entry_do_not_use__ TierLevel,PremiumProvider,usePremium,getParameterLimits auto */ \n\n// Import shared types\n\n// Import from premiumConfig.ts\n\n// Context creation\nconst PremiumContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\n// Re-export TierLevel and FeatureId for backward compatibility\n\n// Storage keys\nconst STORAGE_KEYS = {\n    TIER_LEVEL: 'intel_aero_tier_level',\n    TIER_EXPIRATION: 'intel_aero_tier_expiration'\n};\n// Provider component\nconst PremiumProvider = ({ children })=>{\n    // State initialization\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        tierLevel: _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_2__.TierLevel.FREE,\n        tierExpiration: null,\n        isModalOpen: false,\n        attemptedFeature: null,\n        validationLoading: false,\n        validationError: null\n    });\n    // Load tier status from localStorage on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PremiumProvider.useEffect\": ()=>{\n            if (false) {}\n        }\n    }[\"PremiumProvider.useEffect\"], []);\n    // Check if user can use a specific feature - Using FEATURE_TIER_REQUIREMENTS from premiumConfig\n    const canUseFeature = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PremiumProvider.useCallback[canUseFeature]\": (featureId, params)=>{\n            // Check if the feature ID is marker-related\n            const isMarkerFeature = featureId.startsWith('add_');\n            if (isMarkerFeature) {\n                const markerType = featureId.replace('add_', '');\n                const currentCount = params?.currentCount || 0;\n                // Check marker limits for current tier\n                const maxAllowed = _utils_premiumConfig__WEBPACK_IMPORTED_MODULE_3__.TIER_CONFIG[state.tierLevel].maxMarkers[markerType];\n                // If no markers of this type are allowed, or we've reached the limit\n                if (maxAllowed === 0 || currentCount >= maxAllowed) {\n                    return false;\n                }\n                return true;\n            } else {\n                // For non-marker features, check the feature map directly\n                const availableInTier = _utils_premiumConfig__WEBPACK_IMPORTED_MODULE_3__.TIER_CONFIG[state.tierLevel].features[featureId];\n                return !!availableInTier;\n            }\n        }\n    }[\"PremiumProvider.useCallback[canUseFeature]\"], [\n        state.tierLevel\n    ]);\n    // Unified function to determine required tier level\n    const getRequiredTierForFeature = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PremiumProvider.useCallback[getRequiredTierForFeature]\": (featureId, params)=>{\n            // For marker features with current count\n            if (featureId.startsWith('add_') && params?.currentCount !== undefined) {\n                const markerType = featureId.replace('add_', '');\n                const currentCount = params.currentCount;\n                // Find the lowest tier that allows this many markers of this type\n                for(let tier = _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_2__.TierLevel.FREE; tier <= _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_2__.TierLevel.COMMERCIAL; tier++){\n                    const maxAllowed = _utils_premiumConfig__WEBPACK_IMPORTED_MODULE_3__.TIER_CONFIG[tier].maxMarkers[markerType];\n                    if (maxAllowed > currentCount) {\n                        return tier;\n                    }\n                }\n                // Default to commercial if no tier is sufficient\n                return _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_2__.TierLevel.COMMERCIAL;\n            }\n            // For basic feature access, return from the requirements map\n            return _utils_premiumConfig__WEBPACK_IMPORTED_MODULE_3__.FEATURE_TIER_REQUIREMENTS[featureId] || _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_2__.TierLevel.COMMERCIAL;\n        }\n    }[\"PremiumProvider.useCallback[getRequiredTierForFeature]\"], []);\n    // Check if user can add a marker of a specific type\n    const canAddMarker = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PremiumProvider.useCallback[canAddMarker]\": (markerType, currentCount)=>{\n            const maxAllowed = _utils_premiumConfig__WEBPACK_IMPORTED_MODULE_3__.TIER_CONFIG[state.tierLevel].maxMarkers[markerType];\n            return currentCount < maxAllowed;\n        }\n    }[\"PremiumProvider.useCallback[canAddMarker]\"], [\n        state.tierLevel\n    ]);\n    // Get parameter limits for current tier\n    const getParameterLimits = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PremiumProvider.useCallback[getParameterLimits]\": (parameterType)=>{\n            return _utils_premiumConfig__WEBPACK_IMPORTED_MODULE_3__.TIER_CONFIG[state.tierLevel].parameters[parameterType];\n        }\n    }[\"PremiumProvider.useCallback[getParameterLimits]\"], [\n        state.tierLevel\n    ]);\n    // Open upgrade modal when attempting to use premium feature\n    const requestUpgrade = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PremiumProvider.useCallback[requestUpgrade]\": (featureId)=>{\n            setState({\n                \"PremiumProvider.useCallback[requestUpgrade]\": (prev)=>({\n                        ...prev,\n                        isModalOpen: true,\n                        attemptedFeature: featureId\n                    })\n            }[\"PremiumProvider.useCallback[requestUpgrade]\"]);\n        }\n    }[\"PremiumProvider.useCallback[requestUpgrade]\"], []);\n    // Close upgrade modal\n    const closeModal = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PremiumProvider.useCallback[closeModal]\": ()=>{\n            setState({\n                \"PremiumProvider.useCallback[closeModal]\": (prev)=>({\n                        ...prev,\n                        isModalOpen: false,\n                        attemptedFeature: null,\n                        validationError: null\n                    })\n            }[\"PremiumProvider.useCallback[closeModal]\"]);\n        }\n    }[\"PremiumProvider.useCallback[closeModal]\"], []);\n    // Validate access code\n    const validateAccessCode = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PremiumProvider.useCallback[validateAccessCode]\": async (code)=>{\n            setState({\n                \"PremiumProvider.useCallback[validateAccessCode]\": (prev)=>({\n                        ...prev,\n                        validationLoading: true,\n                        validationError: null\n                    })\n            }[\"PremiumProvider.useCallback[validateAccessCode]\"]);\n            try {\n                // API call to validate code\n                const response = await fetch('/api/validate-code', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        code\n                    })\n                });\n                if (!response.ok) {\n                    throw new Error('Failed to validate code');\n                }\n                const data = await response.json();\n                if (!data.valid) {\n                    setState({\n                        \"PremiumProvider.useCallback[validateAccessCode]\": (prev)=>({\n                                ...prev,\n                                validationLoading: false,\n                                validationError: data.message || 'Invalid access code'\n                            })\n                    }[\"PremiumProvider.useCallback[validateAccessCode]\"]);\n                    return false;\n                }\n                // Valid code - update tier level\n                const newTierLevel = data.tierLevel || _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_2__.TierLevel.COMMUNITY;\n                const expirationDate = data.expiresAt ? new Date(data.expiresAt) : null;\n                // Update localStorage\n                localStorage.setItem(STORAGE_KEYS.TIER_LEVEL, newTierLevel.toString());\n                if (expirationDate) {\n                    localStorage.setItem(STORAGE_KEYS.TIER_EXPIRATION, expirationDate.toISOString());\n                }\n                // Update state\n                setState({\n                    \"PremiumProvider.useCallback[validateAccessCode]\": (prev)=>({\n                            ...prev,\n                            tierLevel: newTierLevel,\n                            tierExpiration: expirationDate,\n                            validationLoading: false,\n                            isModalOpen: false\n                        })\n                }[\"PremiumProvider.useCallback[validateAccessCode]\"]);\n                return true;\n            } catch (error) {\n                console.error('Error validating access code:', error);\n                setState({\n                    \"PremiumProvider.useCallback[validateAccessCode]\": (prev)=>({\n                            ...prev,\n                            validationLoading: false,\n                            validationError: 'Error validating code. Please try again.'\n                        })\n                }[\"PremiumProvider.useCallback[validateAccessCode]\"]);\n                return false;\n            }\n        }\n    }[\"PremiumProvider.useCallback[validateAccessCode]\"], []);\n    // Get tier name\n    const getTierName = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PremiumProvider.useCallback[getTierName]\": (level)=>{\n            // If a specific level is provided, use that; otherwise use the current user's tier\n            const tierToDisplay = level !== undefined ? level : state.tierLevel;\n            return _utils_premiumConfig__WEBPACK_IMPORTED_MODULE_3__.TIER_CONFIG[tierToDisplay].name;\n        }\n    }[\"PremiumProvider.useCallback[getTierName]\"], [\n        state.tierLevel\n    ]);\n    // Get remaining days for subscription\n    const getRemainingDays = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"PremiumProvider.useCallback[getRemainingDays]\": ()=>{\n            if (!state.tierExpiration) return null;\n            const now = new Date();\n            const diff = state.tierExpiration.getTime() - now.getTime();\n            const days = Math.ceil(diff / (1000 * 60 * 60 * 24));\n            return Math.max(0, days);\n        }\n    }[\"PremiumProvider.useCallback[getRemainingDays]\"], [\n        state.tierExpiration\n    ]);\n    // Context value\n    const contextValue = {\n        ...state,\n        canUseFeature,\n        canAddMarker,\n        requestUpgrade,\n        closeModal,\n        validateAccessCode,\n        getTierName,\n        getRequiredTierForFeature,\n        getRemainingDays,\n        getParameterLimits\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PremiumContext.Provider, {\n        value: contextValue,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/context/PremiumContext.tsx\",\n        lineNumber: 298,\n        columnNumber: 5\n    }, undefined);\n};\n// Custom hook for using premium context\nconst usePremium = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(PremiumContext);\n    if (context === undefined) {\n        throw new Error('usePremium must be used within a PremiumProvider');\n    }\n    return context;\n};\n// Helper function for external use\nconst getParameterLimits = (parameterType, userTier)=>{\n    return _utils_premiumConfig__WEBPACK_IMPORTED_MODULE_3__.PARAMETER_LIMITS[userTier][parameterType];\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbnRleHQvUHJlbWl1bUNvbnRleHQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Q0FLQztBQUlxRztBQUN0RyxzQkFBc0I7QUFDdUM7QUFDN0QsK0JBQStCO0FBQ21FO0FBbUNsRyxtQkFBbUI7QUFDbkIsTUFBTVUsK0JBQWlCVCxvREFBYUEsQ0FBa0NVO0FBRXRFLCtEQUErRDtBQUMxQztBQUdyQixlQUFlO0FBQ2YsTUFBTUMsZUFBZTtJQUNuQkMsWUFBWTtJQUNaQyxpQkFBaUI7QUFDbkI7QUFFQSxxQkFBcUI7QUFDZCxNQUFNQyxrQkFBcUQsQ0FBQyxFQUFFQyxRQUFRLEVBQUU7SUFDN0UsdUJBQXVCO0lBQ3ZCLE1BQU0sQ0FBQ0MsT0FBT0MsU0FBUyxHQUFHZiwrQ0FBUUEsQ0FBc0I7UUFDdERnQixXQUFXYiwwREFBU0EsQ0FBQ2MsSUFBSTtRQUN6QkMsZ0JBQWdCO1FBQ2hCQyxhQUFhO1FBQ2JDLGtCQUFrQjtRQUNsQkMsbUJBQW1CO1FBQ25CQyxpQkFBaUI7SUFDbkI7SUFFQSw4Q0FBOEM7SUFDOUNyQixnREFBU0E7cUNBQUM7WUFDUixJQUFJLEtBQTZCLEVBQUUsRUEyQ2xDO1FBQ0g7b0NBQUcsRUFBRTtJQUVMLGdHQUFnRztJQUNoRyxNQUFNa0MsZ0JBQWdCakMsa0RBQVdBO3NEQUFDLENBQUNrQyxXQUFzQkM7WUFDdkQsNENBQTRDO1lBQzVDLE1BQU1DLGtCQUFrQkYsVUFBVUcsVUFBVSxDQUFDO1lBRTdDLElBQUlELGlCQUFpQjtnQkFDbkIsTUFBTUUsYUFBYUosVUFBVUssT0FBTyxDQUFDLFFBQVE7Z0JBQzdDLE1BQU1DLGVBQWVMLFFBQVFLLGdCQUFnQjtnQkFFN0MsdUNBQXVDO2dCQUN2QyxNQUFNQyxhQUFhdEMsNkRBQVcsQ0FBQ1MsTUFBTUUsU0FBUyxDQUFDLENBQUM0QixVQUFVLENBQUNKLFdBQVc7Z0JBRXRFLHFFQUFxRTtnQkFDckUsSUFBSUcsZUFBZSxLQUFLRCxnQkFBZ0JDLFlB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O0tBQUM7SUFFcEIsc0NBQXNDO0lBQ3RDLE1BQU1pRSxtQkFBbUIvRSxrREFBV0E7eURBQUM7WUFDbkMsSUFBSSxDQUFDWSxNQUFNSSxjQUFjLEVBQUUsT0FBTztZQUVsQyxNQUFNZ0UsTUFBTSxJQUFJcEQ7WUFDaEIsTUFBTXFELE9BQU9yRSxNQUFNSSxjQUFjLENBQUNrRSxPQUFPLEtBQUtGLElBQUlFLE9BQU87WUFDekQsTUFBTUMsT0FBT0MsS0FBS0MsSUFBSSxDQUFDSixPQUFRLFFBQU8sS0FBSyxLQUFLLEVBQUM7WUFDakQsT0FBT0csS0FBS0UsR0FBRyxDQUFDLEdBQUdIO1FBQ3JCO3dEQUFHO1FBQUN2RSxNQUFNSSxjQUFjO0tBQUM7SUFFekIsZ0JBQWdCO0lBQ2hCLE1BQU11RSxlQUFvQztRQUN4QyxHQUFHM0UsS0FBSztRQUNScUI7UUFDQWU7UUFDQUk7UUFDQUM7UUFDQUM7UUFDQXFCO1FBQ0E5QjtRQUNBa0M7UUFDQTlCO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQzVDLGVBQWVtRixRQUFRO1FBQUNDLE9BQU9GO2tCQUM3QjVFOzs7Ozs7QUFHUCxFQUFFO0FBRUYsd0NBQXdDO0FBQ2pDLE1BQU0rRSxhQUFhO0lBQ3hCLE1BQU1DLFVBQVU5RixpREFBVUEsQ0FBQ1E7SUFDM0IsSUFBSXNGLFlBQVlyRixXQUFXO1FBQ3pCLE1BQU0sSUFBSTBELE1BQU07SUFDbEI7SUFDQSxPQUFPMkI7QUFDVCxFQUFFO0FBRUYsbUNBQW1DO0FBQzVCLE1BQU0xQyxxQkFBcUIsQ0FDaENDLGVBQ0EwQztJQUVBLE9BQU94RixrRUFBZ0IsQ0FBQ3dGLFNBQVMsQ0FBQzFDLGNBQWM7QUFDbEQsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvY29udGV4dC9QcmVtaXVtQ29udGV4dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBzcmMvYXBwL2NvbnRleHQvUHJlbWl1bUNvbnRleHQudHN4XG4gKiBcbiAqIFB1cnBvc2U6XG4gKiBQcm92aWRlcyBjZW50cmFsaXplZCBwcmVtaXVtIGZlYXR1cmUgYWNjZXNzIG1hbmFnZW1lbnQgdGhyb3VnaG91dCB0aGUgYXBwbGljYXRpb24uXG4gKi9cblxuXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCBSZWFjdE5vZGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuLy8gSW1wb3J0IHNoYXJlZCB0eXBlc1xuaW1wb3J0IHsgVGllckxldmVsLCBGZWF0dXJlSWQgfSBmcm9tICcuLi90eXBlcy9QcmVtaXVtVHlwZXMnO1xuLy8gSW1wb3J0IGZyb20gcHJlbWl1bUNvbmZpZy50c1xuaW1wb3J0IHsgRkVBVFVSRV9USUVSX1JFUVVJUkVNRU5UUywgVElFUl9DT05GSUcsIFBBUkFNRVRFUl9MSU1JVFMgfSBmcm9tICcuLi91dGlscy9wcmVtaXVtQ29uZmlnJztcblxuLy8gQWNjZXNzIGNvZGUgdmFsaWRhdGlvbiByZXNwb25zZVxuaW50ZXJmYWNlIENvZGVWYWxpZGF0aW9uUmVzcG9uc2Uge1xuICB2YWxpZDogYm9vbGVhbjtcbiAgdGllckxldmVsPzogVGllckxldmVsO1xuICBleHBpcmVzQXQ/OiBzdHJpbmc7IC8vIElTTyBkYXRlIHN0cmluZ1xuICBtZXNzYWdlPzogc3RyaW5nO1xufVxuXG4vLyBQcmVtaXVtIGNvbnRleHQgc3RhdGVcbmludGVyZmFjZSBQcmVtaXVtQ29udGV4dFN0YXRlIHtcbiAgdGllckxldmVsOiBUaWVyTGV2ZWw7XG4gIHRpZXJFeHBpcmF0aW9uOiBEYXRlIHwgbnVsbDtcbiAgaXNNb2RhbE9wZW46IGJvb2xlYW47XG4gIGF0dGVtcHRlZEZlYXR1cmU6IEZlYXR1cmVJZCB8IG51bGw7XG4gIHZhbGlkYXRpb25Mb2FkaW5nOiBib29sZWFuO1xuICB2YWxpZGF0aW9uRXJyb3I6IHN0cmluZyB8IG51bGw7XG59XG5cbi8vIFByZW1pdW0gY29udGV4dCB2YWx1ZSBleHBvc2VkIHRvIGNvbXBvbmVudHNcbmludGVyZmFjZSBQcmVtaXVtQ29udGV4dFZhbHVlIGV4dGVuZHMgUHJlbWl1bUNvbnRleHRTdGF0ZSB7XG4gIGNhblVzZUZlYXR1cmU6IChmZWF0dXJlSWQ6IEZlYXR1cmVJZCwgcGFyYW1zPzogYW55KSA9PiBib29sZWFuO1xuICBjYW5BZGRNYXJrZXI6IChtYXJrZXJUeXBlOiAnZ2NzJyB8ICdvYnNlcnZlcicgfCAncmVwZWF0ZXInLCBjdXJyZW50Q291bnQ6IG51bWJlcikgPT4gYm9vbGVhbjtcbiAgcmVxdWVzdFVwZ3JhZGU6IChmZWF0dXJlSWQ6IEZlYXR1cmVJZCkgPT4gdm9pZDtcbiAgY2xvc2VNb2RhbDogKCkgPT4gdm9pZDtcbiAgdmFsaWRhdGVBY2Nlc3NDb2RlOiAoY29kZTogc3RyaW5nKSA9PiBQcm9taXNlPGJvb2xlYW4+O1xuICBnZXRUaWVyTmFtZTogKGxldmVsPzogVGllckxldmVsKSA9PiBzdHJpbmc7XG4gIGdldFJlcXVpcmVkVGllckZvckZlYXR1cmU6IChmZWF0dXJlSWQ6IEZlYXR1cmVJZCwgcGFyYW1zPzogYW55KSA9PiBUaWVyTGV2ZWw7XG4gIGdldFJlbWFpbmluZ0RheXM6ICgpID0+IG51bWJlciB8IG51bGw7XG4gIGdldFBhcmFtZXRlckxpbWl0czogKFxuICAgIHBhcmFtZXRlclR5cGU6ICdncmlkUmFuZ2UnIHwgJ2dyaWRTaXplJyB8ICdzdGF0aW9uQ291bnQnXG4gICkgPT4geyBtaW46IG51bWJlcjsgbWF4OiBudW1iZXIgfTtcbn1cblxuLy8gQ29udGV4dCBjcmVhdGlvblxuY29uc3QgUHJlbWl1bUNvbnRleHQgPSBjcmVhdGVDb250ZXh0PFByZW1pdW1Db250ZXh0VmFsdWUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG5cbi8vIFJlLWV4cG9ydCBUaWVyTGV2ZWwgYW5kIEZlYXR1cmVJZCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuZXhwb3J0IHsgVGllckxldmVsIH07XG5leHBvcnQgdHlwZSB7IEZlYXR1cmVJZCB9O1xuXG4vLyBTdG9yYWdlIGtleXNcbmNvbnN0IFNUT1JBR0VfS0VZUyA9IHtcbiAgVElFUl9MRVZFTDogJ2ludGVsX2Flcm9fdGllcl9sZXZlbCcsXG4gIFRJRVJfRVhQSVJBVElPTjogJ2ludGVsX2Flcm9fdGllcl9leHBpcmF0aW9uJ1xufTtcblxuLy8gUHJvdmlkZXIgY29tcG9uZW50XG5leHBvcnQgY29uc3QgUHJlbWl1bVByb3ZpZGVyOiBSZWFjdC5GQzx7IGNoaWxkcmVuOiBSZWFjdE5vZGUgfT4gPSAoeyBjaGlsZHJlbiB9KSA9PiB7XG4gIC8vIFN0YXRlIGluaXRpYWxpemF0aW9uXG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGU8UHJlbWl1bUNvbnRleHRTdGF0ZT4oe1xuICAgIHRpZXJMZXZlbDogVGllckxldmVsLkZSRUUsXG4gICAgdGllckV4cGlyYXRpb246IG51bGwsXG4gICAgaXNNb2RhbE9wZW46IGZhbHNlLFxuICAgIGF0dGVtcHRlZEZlYXR1cmU6IG51bGwsXG4gICAgdmFsaWRhdGlvbkxvYWRpbmc6IGZhbHNlLFxuICAgIHZhbGlkYXRpb25FcnJvcjogbnVsbFxuICB9KTtcblxuICAvLyBMb2FkIHRpZXIgc3RhdHVzIGZyb20gbG9jYWxTdG9yYWdlIG9uIG1vdW50XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBHZXQgdGllciBsZXZlbFxuICAgICAgICBjb25zdCBzdG9yZWRUaWVyTGV2ZWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWVMuVElFUl9MRVZFTCk7XG4gICAgICAgIGNvbnN0IHBhcnNlZFRpZXJMZXZlbCA9IHN0b3JlZFRpZXJMZXZlbCA/IHBhcnNlSW50KHN0b3JlZFRpZXJMZXZlbCwgMTApIDogVGllckxldmVsLkZSRUU7XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgZXhwaXJhdGlvbiBkYXRlXG4gICAgICAgIGNvbnN0IHN0b3JlZEV4cGlyYXRpb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWVMuVElFUl9FWFBJUkFUSU9OKTtcbiAgICAgICAgbGV0IGV4cGlyYXRpb25EYXRlOiBEYXRlIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIFxuICAgICAgICBpZiAoc3RvcmVkRXhwaXJhdGlvbikge1xuICAgICAgICAgIGV4cGlyYXRpb25EYXRlID0gbmV3IERhdGUoc3RvcmVkRXhwaXJhdGlvbik7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgZXhwaXJlZFxuICAgICAgICAgIGlmIChleHBpcmF0aW9uRGF0ZSAmJiBleHBpcmF0aW9uRGF0ZSA8IG5ldyBEYXRlKCkpIHtcbiAgICAgICAgICAgIC8vIFJlc2V0IHRvIGZyZWUgdGllciBpZiBleHBpcmVkXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShTVE9SQUdFX0tFWVMuVElFUl9MRVZFTCk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShTVE9SQUdFX0tFWVMuVElFUl9FWFBJUkFUSU9OKTtcbiAgICAgICAgICAgIGV4cGlyYXRpb25EYXRlID0gbnVsbDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgICB0aWVyTGV2ZWw6IFRpZXJMZXZlbC5GUkVFLFxuICAgICAgICAgICAgICB0aWVyRXhwaXJhdGlvbjogbnVsbFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTZXQgdmFsaWQgdGllclxuICAgICAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgICB0aWVyTGV2ZWw6IHBhcnNlZFRpZXJMZXZlbCBhcyBUaWVyTGV2ZWwsXG4gICAgICAgICAgICAgIHRpZXJFeHBpcmF0aW9uOiBleHBpcmF0aW9uRGF0ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChwYXJzZWRUaWVyTGV2ZWwgIT09IFRpZXJMZXZlbC5GUkVFKSB7XG4gICAgICAgICAgLy8gU2V0IHRpZXIgd2l0aG91dCBleHBpcmF0aW9uXG4gICAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIHRpZXJMZXZlbDogcGFyc2VkVGllckxldmVsIGFzIFRpZXJMZXZlbFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBwcmVtaXVtIHN0YXR1czonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gQ2hlY2sgaWYgdXNlciBjYW4gdXNlIGEgc3BlY2lmaWMgZmVhdHVyZSAtIFVzaW5nIEZFQVRVUkVfVElFUl9SRVFVSVJFTUVOVFMgZnJvbSBwcmVtaXVtQ29uZmlnXG4gIGNvbnN0IGNhblVzZUZlYXR1cmUgPSB1c2VDYWxsYmFjaygoZmVhdHVyZUlkOiBGZWF0dXJlSWQsIHBhcmFtcz86IGFueSk6IGJvb2xlYW4gPT4ge1xuICAgIC8vIENoZWNrIGlmIHRoZSBmZWF0dXJlIElEIGlzIG1hcmtlci1yZWxhdGVkXG4gICAgY29uc3QgaXNNYXJrZXJGZWF0dXJlID0gZmVhdHVyZUlkLnN0YXJ0c1dpdGgoJ2FkZF8nKTtcbiAgICBcbiAgICBpZiAoaXNNYXJrZXJGZWF0dXJlKSB7XG4gICAgICBjb25zdCBtYXJrZXJUeXBlID0gZmVhdHVyZUlkLnJlcGxhY2UoJ2FkZF8nLCAnJykgYXMgJ2djcycgfCAnb2JzZXJ2ZXInIHwgJ3JlcGVhdGVyJztcbiAgICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IHBhcmFtcz8uY3VycmVudENvdW50IHx8IDA7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIG1hcmtlciBsaW1pdHMgZm9yIGN1cnJlbnQgdGllclxuICAgICAgY29uc3QgbWF4QWxsb3dlZCA9IFRJRVJfQ09ORklHW3N0YXRlLnRpZXJMZXZlbF0ubWF4TWFya2Vyc1ttYXJrZXJUeXBlXTtcbiAgICAgIFxuICAgICAgLy8gSWYgbm8gbWFya2VycyBvZiB0aGlzIHR5cGUgYXJlIGFsbG93ZWQsIG9yIHdlJ3ZlIHJlYWNoZWQgdGhlIGxpbWl0XG4gICAgICBpZiAobWF4QWxsb3dlZCA9PT0gMCB8fCBjdXJyZW50Q291bnQgPj0gbWF4QWxsb3dlZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGb3Igbm9uLW1hcmtlciBmZWF0dXJlcywgY2hlY2sgdGhlIGZlYXR1cmUgbWFwIGRpcmVjdGx5XG4gICAgICBjb25zdCBhdmFpbGFibGVJblRpZXIgPSBUSUVSX0NPTkZJR1tzdGF0ZS50aWVyTGV2ZWxdLmZlYXR1cmVzW2ZlYXR1cmVJZF07XG4gICAgICByZXR1cm4gISFhdmFpbGFibGVJblRpZXI7XG4gICAgfVxuICB9LCBbc3RhdGUudGllckxldmVsXSk7XG5cbiAgLy8gVW5pZmllZCBmdW5jdGlvbiB0byBkZXRlcm1pbmUgcmVxdWlyZWQgdGllciBsZXZlbFxuICBjb25zdCBnZXRSZXF1aXJlZFRpZXJGb3JGZWF0dXJlID0gdXNlQ2FsbGJhY2soKGZlYXR1cmVJZDogRmVhdHVyZUlkLCBwYXJhbXM/OiBhbnkpOiBUaWVyTGV2ZWwgPT4ge1xuICAgIC8vIEZvciBtYXJrZXIgZmVhdHVyZXMgd2l0aCBjdXJyZW50IGNvdW50XG4gICAgaWYgKGZlYXR1cmVJZC5zdGFydHNXaXRoKCdhZGRfJykgJiYgcGFyYW1zPy5jdXJyZW50Q291bnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgbWFya2VyVHlwZSA9IGZlYXR1cmVJZC5yZXBsYWNlKCdhZGRfJywgJycpIGFzICdnY3MnIHwgJ29ic2VydmVyJyB8ICdyZXBlYXRlcic7XG4gICAgICBjb25zdCBjdXJyZW50Q291bnQgPSBwYXJhbXMuY3VycmVudENvdW50O1xuICAgICAgXG4gICAgICAvLyBGaW5kIHRoZSBsb3dlc3QgdGllciB0aGF0IGFsbG93cyB0aGlzIG1hbnkgbWFya2VycyBvZiB0aGlzIHR5cGVcbiAgICAgIGZvciAobGV0IHRpZXIgPSBUaWVyTGV2ZWwuRlJFRTsgdGllciA8PSBUaWVyTGV2ZWwuQ09NTUVSQ0lBTDsgdGllcisrKSB7XG4gICAgICAgIGNvbnN0IG1heEFsbG93ZWQgPSBUSUVSX0NPTkZJR1t0aWVyXS5tYXhNYXJrZXJzW21hcmtlclR5cGVdO1xuICAgICAgICBpZiAobWF4QWxsb3dlZCA+IGN1cnJlbnRDb3VudCkge1xuICAgICAgICAgIHJldHVybiB0aWVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIERlZmF1bHQgdG8gY29tbWVyY2lhbCBpZiBubyB0aWVyIGlzIHN1ZmZpY2llbnRcbiAgICAgIHJldHVybiBUaWVyTGV2ZWwuQ09NTUVSQ0lBTDtcbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIGJhc2ljIGZlYXR1cmUgYWNjZXNzLCByZXR1cm4gZnJvbSB0aGUgcmVxdWlyZW1lbnRzIG1hcFxuICAgIHJldHVybiBGRUFUVVJFX1RJRVJfUkVRVUlSRU1FTlRTW2ZlYXR1cmVJZF0gfHwgVGllckxldmVsLkNPTU1FUkNJQUw7XG4gIH0sIFtdKTtcblxuICAvLyBDaGVjayBpZiB1c2VyIGNhbiBhZGQgYSBtYXJrZXIgb2YgYSBzcGVjaWZpYyB0eXBlXG4gIGNvbnN0IGNhbkFkZE1hcmtlciA9IHVzZUNhbGxiYWNrKChtYXJrZXJUeXBlOiAnZ2NzJyB8ICdvYnNlcnZlcicgfCAncmVwZWF0ZXInLCBjdXJyZW50Q291bnQ6IG51bWJlcik6IGJvb2xlYW4gPT4ge1xuICAgIGNvbnN0IG1heEFsbG93ZWQgPSBUSUVSX0NPTkZJR1tzdGF0ZS50aWVyTGV2ZWxdLm1heE1hcmtlcnNbbWFya2VyVHlwZV07XG4gICAgcmV0dXJuIGN1cnJlbnRDb3VudCA8IG1heEFsbG93ZWQ7XG4gIH0sIFtzdGF0ZS50aWVyTGV2ZWxdKTtcblxuICAvLyBHZXQgcGFyYW1ldGVyIGxpbWl0cyBmb3IgY3VycmVudCB0aWVyXG4gIGNvbnN0IGdldFBhcmFtZXRlckxpbWl0cyA9IHVzZUNhbGxiYWNrKChcbiAgICBwYXJhbWV0ZXJUeXBlOiAnZ3JpZFJhbmdlJyB8ICdncmlkU2l6ZScgfCAnc3RhdGlvbkNvdW50J1xuICApOiB7IG1pbjogbnVtYmVyOyBtYXg6IG51bWJlciB9ID0+IHtcbiAgICByZXR1cm4gVElFUl9DT05GSUdbc3RhdGUudGllckxldmVsXS5wYXJhbWV0ZXJzW3BhcmFtZXRlclR5cGVdO1xuICB9LCBbc3RhdGUudGllckxldmVsXSk7XG5cbiAgLy8gT3BlbiB1cGdyYWRlIG1vZGFsIHdoZW4gYXR0ZW1wdGluZyB0byB1c2UgcHJlbWl1bSBmZWF0dXJlXG4gIGNvbnN0IHJlcXVlc3RVcGdyYWRlID0gdXNlQ2FsbGJhY2soKGZlYXR1cmVJZDogRmVhdHVyZUlkKSA9PiB7XG4gICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIGlzTW9kYWxPcGVuOiB0cnVlLFxuICAgICAgYXR0ZW1wdGVkRmVhdHVyZTogZmVhdHVyZUlkXG4gICAgfSkpO1xuICB9LCBbXSk7XG5cbiAgLy8gQ2xvc2UgdXBncmFkZSBtb2RhbFxuICBjb25zdCBjbG9zZU1vZGFsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBpc01vZGFsT3BlbjogZmFsc2UsXG4gICAgICBhdHRlbXB0ZWRGZWF0dXJlOiBudWxsLFxuICAgICAgdmFsaWRhdGlvbkVycm9yOiBudWxsXG4gICAgfSkpO1xuICB9LCBbXSk7XG5cbiAgLy8gVmFsaWRhdGUgYWNjZXNzIGNvZGVcbiAgY29uc3QgdmFsaWRhdGVBY2Nlc3NDb2RlID0gdXNlQ2FsbGJhY2soYXN5bmMgKGNvZGU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICB2YWxpZGF0aW9uTG9hZGluZzogdHJ1ZSxcbiAgICAgIHZhbGlkYXRpb25FcnJvcjogbnVsbFxuICAgIH0pKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBBUEkgY2FsbCB0byB2YWxpZGF0ZSBjb2RlXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3ZhbGlkYXRlLWNvZGUnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGNvZGUgfSlcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHZhbGlkYXRlIGNvZGUnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YTogQ29kZVZhbGlkYXRpb25SZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgaWYgKCFkYXRhLnZhbGlkKSB7XG4gICAgICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIHZhbGlkYXRpb25Mb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I6IGRhdGEubWVzc2FnZSB8fCAnSW52YWxpZCBhY2Nlc3MgY29kZSdcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkIGNvZGUgLSB1cGRhdGUgdGllciBsZXZlbFxuICAgICAgY29uc3QgbmV3VGllckxldmVsID0gZGF0YS50aWVyTGV2ZWwgfHwgVGllckxldmVsLkNPTU1VTklUWTtcbiAgICAgIGNvbnN0IGV4cGlyYXRpb25EYXRlID0gZGF0YS5leHBpcmVzQXQgPyBuZXcgRGF0ZShkYXRhLmV4cGlyZXNBdCkgOiBudWxsO1xuXG4gICAgICAvLyBVcGRhdGUgbG9jYWxTdG9yYWdlXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWVMuVElFUl9MRVZFTCwgbmV3VGllckxldmVsLnRvU3RyaW5nKCkpO1xuICAgICAgaWYgKGV4cGlyYXRpb25EYXRlKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZUy5USUVSX0VYUElSQVRJT04sIGV4cGlyYXRpb25EYXRlLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgc3RhdGVcbiAgICAgIHNldFN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgdGllckxldmVsOiBuZXdUaWVyTGV2ZWwsXG4gICAgICAgIHRpZXJFeHBpcmF0aW9uOiBleHBpcmF0aW9uRGF0ZSxcbiAgICAgICAgdmFsaWRhdGlvbkxvYWRpbmc6IGZhbHNlLFxuICAgICAgICBpc01vZGFsT3BlbjogZmFsc2VcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZhbGlkYXRpbmcgYWNjZXNzIGNvZGU6JywgZXJyb3IpO1xuICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICB2YWxpZGF0aW9uTG9hZGluZzogZmFsc2UsXG4gICAgICAgIHZhbGlkYXRpb25FcnJvcjogJ0Vycm9yIHZhbGlkYXRpbmcgY29kZS4gUGxlYXNlIHRyeSBhZ2Fpbi4nXG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gR2V0IHRpZXIgbmFtZVxuICBjb25zdCBnZXRUaWVyTmFtZSA9IHVzZUNhbGxiYWNrKChsZXZlbD86IFRpZXJMZXZlbCk6IHN0cmluZyA9PiB7XG4gICAgLy8gSWYgYSBzcGVjaWZpYyBsZXZlbCBpcyBwcm92aWRlZCwgdXNlIHRoYXQ7IG90aGVyd2lzZSB1c2UgdGhlIGN1cnJlbnQgdXNlcidzIHRpZXJcbiAgICBjb25zdCB0aWVyVG9EaXNwbGF5ID0gbGV2ZWwgIT09IHVuZGVmaW5lZCA/IGxldmVsIDogc3RhdGUudGllckxldmVsO1xuICAgIHJldHVybiBUSUVSX0NPTkZJR1t0aWVyVG9EaXNwbGF5XS5uYW1lO1xuICB9LCBbc3RhdGUudGllckxldmVsXSk7XG5cbiAgLy8gR2V0IHJlbWFpbmluZyBkYXlzIGZvciBzdWJzY3JpcHRpb25cbiAgY29uc3QgZ2V0UmVtYWluaW5nRGF5cyA9IHVzZUNhbGxiYWNrKCgpOiBudW1iZXIgfCBudWxsID0+IHtcbiAgICBpZiAoIXN0YXRlLnRpZXJFeHBpcmF0aW9uKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGRpZmYgPSBzdGF0ZS50aWVyRXhwaXJhdGlvbi5nZXRUaW1lKCkgLSBub3cuZ2V0VGltZSgpO1xuICAgIGNvbnN0IGRheXMgPSBNYXRoLmNlaWwoZGlmZiAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIGRheXMpO1xuICB9LCBbc3RhdGUudGllckV4cGlyYXRpb25dKTtcblxuICAvLyBDb250ZXh0IHZhbHVlXG4gIGNvbnN0IGNvbnRleHRWYWx1ZTogUHJlbWl1bUNvbnRleHRWYWx1ZSA9IHtcbiAgICAuLi5zdGF0ZSxcbiAgICBjYW5Vc2VGZWF0dXJlLFxuICAgIGNhbkFkZE1hcmtlcixcbiAgICByZXF1ZXN0VXBncmFkZSxcbiAgICBjbG9zZU1vZGFsLFxuICAgIHZhbGlkYXRlQWNjZXNzQ29kZSxcbiAgICBnZXRUaWVyTmFtZSxcbiAgICBnZXRSZXF1aXJlZFRpZXJGb3JGZWF0dXJlLFxuICAgIGdldFJlbWFpbmluZ0RheXMsXG4gICAgZ2V0UGFyYW1ldGVyTGltaXRzXG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8UHJlbWl1bUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2NvbnRleHRWYWx1ZX0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9QcmVtaXVtQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn07XG5cbi8vIEN1c3RvbSBob29rIGZvciB1c2luZyBwcmVtaXVtIGNvbnRleHRcbmV4cG9ydCBjb25zdCB1c2VQcmVtaXVtID0gKCk6IFByZW1pdW1Db250ZXh0VmFsdWUgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChQcmVtaXVtQ29udGV4dCk7XG4gIGlmIChjb250ZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZVByZW1pdW0gbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFByZW1pdW1Qcm92aWRlcicpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIGZvciBleHRlcm5hbCB1c2VcbmV4cG9ydCBjb25zdCBnZXRQYXJhbWV0ZXJMaW1pdHMgPSAoXG4gIHBhcmFtZXRlclR5cGU6ICdncmlkUmFuZ2UnIHwgJ2dyaWRTaXplJyB8ICdzdGF0aW9uQ291bnQnLFxuICB1c2VyVGllcjogVGllckxldmVsXG4pOiB7IG1pbjogbnVtYmVyOyBtYXg6IG51bWJlciB9ID0+IHtcbiAgcmV0dXJuIFBBUkFNRVRFUl9MSU1JVFNbdXNlclRpZXJdW3BhcmFtZXRlclR5cGVdO1xufTsiXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlQ2FsbGJhY2siLCJUaWVyTGV2ZWwiLCJGRUFUVVJFX1RJRVJfUkVRVUlSRU1FTlRTIiwiVElFUl9DT05GSUciLCJQQVJBTUVURVJfTElNSVRTIiwiUHJlbWl1bUNvbnRleHQiLCJ1bmRlZmluZWQiLCJTVE9SQUdFX0tFWVMiLCJUSUVSX0xFVkVMIiwiVElFUl9FWFBJUkFUSU9OIiwiUHJlbWl1bVByb3ZpZGVyIiwiY2hpbGRyZW4iLCJzdGF0ZSIsInNldFN0YXRlIiwidGllckxldmVsIiwiRlJFRSIsInRpZXJFeHBpcmF0aW9uIiwiaXNNb2RhbE9wZW4iLCJhdHRlbXB0ZWRGZWF0dXJlIiwidmFsaWRhdGlvbkxvYWRpbmciLCJ2YWxpZGF0aW9uRXJyb3IiLCJzdG9yZWRUaWVyTGV2ZWwiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2VkVGllckxldmVsIiwicGFyc2VJbnQiLCJzdG9yZWRFeHBpcmF0aW9uIiwiZXhwaXJhdGlvbkRhdGUiLCJEYXRlIiwicmVtb3ZlSXRlbSIsInByZXYiLCJlcnJvciIsImNvbnNvbGUiLCJjYW5Vc2VGZWF0dXJlIiwiZmVhdHVyZUlkIiwicGFyYW1zIiwiaXNNYXJrZXJGZWF0dXJlIiwic3RhcnRzV2l0aCIsIm1hcmtlclR5cGUiLCJyZXBsYWNlIiwiY3VycmVudENvdW50IiwibWF4QWxsb3dlZCIsIm1heE1hcmtlcnMiLCJhdmFpbGFibGVJblRpZXIiLCJmZWF0dXJlcyIsImdldFJlcXVpcmVkVGllckZvckZlYXR1cmUiLCJ0aWVyIiwiQ09NTUVSQ0lBTCIsImNhbkFkZE1hcmtlciIsImdldFBhcmFtZXRlckxpbWl0cyIsInBhcmFtZXRlclR5cGUiLCJwYXJhbWV0ZXJzIiwicmVxdWVzdFVwZ3JhZGUiLCJjbG9zZU1vZGFsIiwidmFsaWRhdGVBY2Nlc3NDb2RlIiwiY29kZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsIkVycm9yIiwiZGF0YSIsImpzb24iLCJ2YWxpZCIsIm1lc3NhZ2UiLCJuZXdUaWVyTGV2ZWwiLCJDT01NVU5JVFkiLCJleHBpcmVzQXQiLCJzZXRJdGVtIiwidG9TdHJpbmciLCJ0b0lTT1N0cmluZyIsImdldFRpZXJOYW1lIiwibGV2ZWwiLCJ0aWVyVG9EaXNwbGF5IiwibmFtZSIsImdldFJlbWFpbmluZ0RheXMiLCJub3ciLCJkaWZmIiwiZ2V0VGltZSIsImRheXMiLCJNYXRoIiwiY2VpbCIsIm1heCIsImNvbnRleHRWYWx1ZSIsIlByb3ZpZGVyIiwidmFsdWUiLCJ1c2VQcmVtaXVtIiwiY29udGV4dCIsInVzZXJUaWVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/context/PremiumContext.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/context/mapcontext.tsx":
/*!****************************************!*\
  !*** ./src/app/context/mapcontext.tsx ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MapProvider: () => (/* binding */ MapProvider),\n/* harmony export */   useMapContext: () => (/* binding */ useMapContext)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/LayerManager */ \"(ssr)/./src/app/services/LayerManager.ts\");\n/* harmony import */ var _services_ElevationService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/ElevationService */ \"(ssr)/./src/app/services/ElevationService.ts\");\n// src/app/context/MapContext.tsx\n\n\n\n\nconst initialLayerState = Object.values(_services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS).reduce((acc, layerId)=>({\n        ...acc,\n        [layerId]: false\n    }), {});\nconst MapContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\n/**\n * Provides map-related state and services to the application.\n * @param children - React components to render within the provider.\n */ const MapProvider = ({ children })=>{\n    const [map, setMapInstance] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [terrainLoaded, setTerrainLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [elevationService, setElevationService] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [layerVisibility, setLayerVisibility] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialLayerState);\n    /**\n   * Sets the map instance and initializes related services.\n   * @param mapInstance - The Mapbox map instance or null.\n   * @param newTerrainLoaded - Indicates if the terrain source is loaded.\n   */ const setMap = (mapInstance, newTerrainLoaded)=>{\n        if (mapInstance === map && newTerrainLoaded === terrainLoaded) return;\n        if (mapInstance) {\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.setMap(mapInstance);\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.registerKnownLayers();\n            const layerState = _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.getLayerState();\n            setLayerVisibility(layerState);\n            const elevService = new _services_ElevationService__WEBPACK_IMPORTED_MODULE_3__.ElevationService(mapInstance);\n            setElevationService(elevService);\n        } else {\n            setElevationService(null);\n        }\n        setMapInstance(mapInstance);\n        setTerrainLoaded(newTerrainLoaded);\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MapProvider.useEffect\": ()=>{\n            if (!map) return undefined; // Explicitly return undefined for cleanup\n            const cleanup = _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.addEventListener({\n                \"MapProvider.useEffect.cleanup\": (event, layerId, visible)=>{\n                    if (event === 'visibilityChange' && visible !== undefined) {\n                        setLayerVisibility({\n                            \"MapProvider.useEffect.cleanup\": (prev)=>({\n                                    ...prev,\n                                    [layerId]: visible\n                                })\n                        }[\"MapProvider.useEffect.cleanup\"]);\n                    } else if (event === 'layerRemoved') {\n                        setLayerVisibility({\n                            \"MapProvider.useEffect.cleanup\": (prev)=>({\n                                    ...prev,\n                                    [layerId]: false\n                                })\n                        }[\"MapProvider.useEffect.cleanup\"]);\n                    }\n                }\n            }[\"MapProvider.useEffect.cleanup\"]);\n            return cleanup; // Return the cleanup function\n        }\n    }[\"MapProvider.useEffect\"], [\n        map\n    ]);\n    const toggleLayer = (layerId)=>{\n        if (map) {\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.toggleLayerVisibility(layerId);\n        }\n    };\n    const setLayerVisibilityValue = (layerId, visible)=>{\n        if (map) {\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.setLayerVisibility(layerId, visible);\n        }\n    };\n    const resetLayers = ()=>{\n        if (map) {\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.resetLayers();\n        }\n    };\n    const value = {\n        map,\n        terrainLoaded,\n        elevationService,\n        layerVisibility,\n        setMap,\n        toggleLayer,\n        setLayerVisibility: setLayerVisibilityValue,\n        resetLayers\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MapContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/context/mapcontext.tsx\",\n        lineNumber: 111,\n        columnNumber: 10\n    }, undefined);\n};\n/**\n * Hook to access the MapContext.\n * @returns The MapContext properties.\n * @throws Error if used outside of MapProvider.\n */ const useMapContext = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(MapContext);\n    if (!context) throw new Error('useMapContext must be used within a MapProvider');\n    return context;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9jb250ZXh0L21hcGNvbnRleHQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9hcHAvY29udGV4dC9NYXBDb250ZXh0LnRzeFxuaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QsIFJlYWN0Tm9kZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBtYXBib3hnbCBmcm9tICdtYXBib3gtZ2wnO1xuaW1wb3J0IHsgbGF5ZXJNYW5hZ2VyLCBNQVBfTEFZRVJTLCBMYXllclZpc2liaWxpdHlNYXAsIExheWVyRXZlbnRUeXBlIH0gZnJvbSAnLi4vc2VydmljZXMvTGF5ZXJNYW5hZ2VyJztcbmltcG9ydCB7IEVsZXZhdGlvblNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9FbGV2YXRpb25TZXJ2aWNlJztcblxuLyoqXG4gKiBEZWZpbmVzIHRoZSBwcm9wZXJ0aWVzIGF2YWlsYWJsZSBpbiB0aGUgTWFwQ29udGV4dC5cbiAqL1xuaW50ZXJmYWNlIE1hcENvbnRleHRQcm9wcyB7XG4gIG1hcDogbWFwYm94Z2wuTWFwIHwgbnVsbDtcbiAgdGVycmFpbkxvYWRlZDogYm9vbGVhbjtcbiAgZWxldmF0aW9uU2VydmljZTogRWxldmF0aW9uU2VydmljZSB8IG51bGw7XG4gIGxheWVyVmlzaWJpbGl0eTogTGF5ZXJWaXNpYmlsaXR5TWFwO1xuICBzZXRNYXA6IChtYXA6IG1hcGJveGdsLk1hcCB8IG51bGwsIHRlcnJhaW5Mb2FkZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHRvZ2dsZUxheWVyOiAobGF5ZXJJZDogc3RyaW5nKSA9PiB2b2lkO1xuICBzZXRMYXllclZpc2liaWxpdHk6IChsYXllcklkOiBzdHJpbmcsIHZpc2libGU6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHJlc2V0TGF5ZXJzOiAoKSA9PiB2b2lkO1xufVxuXG5jb25zdCBpbml0aWFsTGF5ZXJTdGF0ZSA9IE9iamVjdC52YWx1ZXMoTUFQX0xBWUVSUykucmVkdWNlKFxuICAoYWNjLCBsYXllcklkKSA9PiAoe1xuICAgIC4uLmFjYyxcbiAgICBbbGF5ZXJJZF06IGZhbHNlLFxuICB9KSxcbiAge31cbikgYXMgTGF5ZXJWaXNpYmlsaXR5TWFwO1xuXG5jb25zdCBNYXBDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxNYXBDb250ZXh0UHJvcHMgfCBudWxsPihudWxsKTtcblxuLyoqXG4gKiBQcm92aWRlcyBtYXAtcmVsYXRlZCBzdGF0ZSBhbmQgc2VydmljZXMgdG8gdGhlIGFwcGxpY2F0aW9uLlxuICogQHBhcmFtIGNoaWxkcmVuIC0gUmVhY3QgY29tcG9uZW50cyB0byByZW5kZXIgd2l0aGluIHRoZSBwcm92aWRlci5cbiAqL1xuZXhwb3J0IGNvbnN0IE1hcFByb3ZpZGVyOiBSZWFjdC5GQzx7IGNoaWxkcmVuOiBSZWFjdE5vZGUgfT4gPSAoeyBjaGlsZHJlbiB9KSA9PiB7XG4gIGNvbnN0IFttYXAsIHNldE1hcEluc3RhbmNlXSA9IHVzZVN0YXRlPG1hcGJveGdsLk1hcCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbdGVycmFpbkxvYWRlZCwgc2V0VGVycmFpbkxvYWRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlbGV2YXRpb25TZXJ2aWNlLCBzZXRFbGV2YXRpb25TZXJ2aWNlXSA9IHVzZVN0YXRlPEVsZXZhdGlvblNlcnZpY2UgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2xheWVyVmlzaWJpbGl0eSwgc2V0TGF5ZXJWaXNpYmlsaXR5XSA9IHVzZVN0YXRlPExheWVyVmlzaWJpbGl0eU1hcD4oaW5pdGlhbExheWVyU3RhdGUpO1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBtYXAgaW5zdGFuY2UgYW5kIGluaXRpYWxpemVzIHJlbGF0ZWQgc2VydmljZXMuXG4gICAqIEBwYXJhbSBtYXBJbnN0YW5jZSAtIFRoZSBNYXBib3ggbWFwIGluc3RhbmNlIG9yIG51bGwuXG4gICAqIEBwYXJhbSBuZXdUZXJyYWluTG9hZGVkIC0gSW5kaWNhdGVzIGlmIHRoZSB0ZXJyYWluIHNvdXJjZSBpcyBsb2FkZWQuXG4gICAqL1xuICBjb25zdCBzZXRNYXAgPSAobWFwSW5zdGFuY2U6IG1hcGJveGdsLk1hcCB8IG51bGwsIG5ld1RlcnJhaW5Mb2FkZWQ6IGJvb2xlYW4pID0+IHtcblxuICAgIGlmIChtYXBJbnN0YW5jZSA9PT0gbWFwICYmIG5ld1RlcnJhaW5Mb2FkZWQgPT09IHRlcnJhaW5Mb2FkZWQpIHJldHVybjtcblxuICAgIGlmIChtYXBJbnN0YW5jZSkge1xuICAgICAgbGF5ZXJNYW5hZ2VyLnNldE1hcChtYXBJbnN0YW5jZSk7XG4gICAgICBsYXllck1hbmFnZXIucmVnaXN0ZXJLbm93bkxheWVycygpO1xuICAgICAgY29uc3QgbGF5ZXJTdGF0ZSA9IGxheWVyTWFuYWdlci5nZXRMYXllclN0YXRlKCk7XG4gICAgICBzZXRMYXllclZpc2liaWxpdHkobGF5ZXJTdGF0ZSk7XG4gICAgICBjb25zdCBlbGV2U2VydmljZSA9IG5ldyBFbGV2YXRpb25TZXJ2aWNlKG1hcEluc3RhbmNlKTtcbiAgICAgIHNldEVsZXZhdGlvblNlcnZpY2UoZWxldlNlcnZpY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRFbGV2YXRpb25TZXJ2aWNlKG51bGwpO1xuXG4gICAgfVxuXG4gICAgc2V0TWFwSW5zdGFuY2UobWFwSW5zdGFuY2UpO1xuICAgIHNldFRlcnJhaW5Mb2FkZWQobmV3VGVycmFpbkxvYWRlZCk7XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW1hcCkgcmV0dXJuIHVuZGVmaW5lZDsgLy8gRXhwbGljaXRseSByZXR1cm4gdW5kZWZpbmVkIGZvciBjbGVhbnVwXG5cbiAgICBjb25zdCBjbGVhbnVwID0gbGF5ZXJNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAoZXZlbnQ6IExheWVyRXZlbnRUeXBlLCBsYXllcklkOiBzdHJpbmcsIHZpc2libGU/OiBib29sZWFuKSA9PiB7XG4gICAgICAgIGlmIChldmVudCA9PT0gJ3Zpc2liaWxpdHlDaGFuZ2UnICYmIHZpc2libGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNldExheWVyVmlzaWJpbGl0eSgocHJldikgPT4gKHsgLi4ucHJldiwgW2xheWVySWRdOiB2aXNpYmxlIH0pKTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudCA9PT0gJ2xheWVyUmVtb3ZlZCcpIHtcbiAgICAgICAgICBzZXRMYXllclZpc2liaWxpdHkoKHByZXYpID0+ICh7IC4uLnByZXYsIFtsYXllcklkXTogZmFsc2UgfSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcblxuICAgIHJldHVybiBjbGVhbnVwOyAvLyBSZXR1cm4gdGhlIGNsZWFudXAgZnVuY3Rpb25cbiAgfSwgW21hcF0pO1xuXG4gIGNvbnN0IHRvZ2dsZUxheWVyID0gKGxheWVySWQ6IHN0cmluZykgPT4ge1xuICAgIGlmIChtYXApIHtcbiAgICAgIGxheWVyTWFuYWdlci50b2dnbGVMYXllclZpc2liaWxpdHkobGF5ZXJJZCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNldExheWVyVmlzaWJpbGl0eVZhbHVlID0gKGxheWVySWQ6IHN0cmluZywgdmlzaWJsZTogYm9vbGVhbikgPT4ge1xuICAgIGlmIChtYXApIHtcbiAgICAgIGxheWVyTWFuYWdlci5zZXRMYXllclZpc2liaWxpdHkobGF5ZXJJZCwgdmlzaWJsZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlc2V0TGF5ZXJzID0gKCkgPT4ge1xuICAgIGlmIChtYXApIHtcbiAgICAgIGxheWVyTWFuYWdlci5yZXNldExheWVycygpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCB2YWx1ZSA9IHtcbiAgICBtYXAsXG4gICAgdGVycmFpbkxvYWRlZCxcbiAgICBlbGV2YXRpb25TZXJ2aWNlLFxuICAgIGxheWVyVmlzaWJpbGl0eSxcbiAgICBzZXRNYXAsXG4gICAgdG9nZ2xlTGF5ZXIsXG4gICAgc2V0TGF5ZXJWaXNpYmlsaXR5OiBzZXRMYXllclZpc2liaWxpdHlWYWx1ZSxcbiAgICByZXNldExheWVycyxcbiAgfTtcblxuICByZXR1cm4gPE1hcENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3ZhbHVlfT57Y2hpbGRyZW59PC9NYXBDb250ZXh0LlByb3ZpZGVyPjtcbn07XG5cbi8qKlxuICogSG9vayB0byBhY2Nlc3MgdGhlIE1hcENvbnRleHQuXG4gKiBAcmV0dXJucyBUaGUgTWFwQ29udGV4dCBwcm9wZXJ0aWVzLlxuICogQHRocm93cyBFcnJvciBpZiB1c2VkIG91dHNpZGUgb2YgTWFwUHJvdmlkZXIuXG4gKi9cbmV4cG9ydCBjb25zdCB1c2VNYXBDb250ZXh0ID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChNYXBDb250ZXh0KTtcbiAgaWYgKCFjb250ZXh0KSB0aHJvdyBuZXcgRXJyb3IoJ3VzZU1hcENvbnRleHQgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIE1hcFByb3ZpZGVyJyk7XG4gIHJldHVybiBjb250ZXh0O1xufTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJsYXllck1hbmFnZXIiLCJNQVBfTEFZRVJTIiwiRWxldmF0aW9uU2VydmljZSIsImluaXRpYWxMYXllclN0YXRlIiwiT2JqZWN0IiwidmFsdWVzIiwicmVkdWNlIiwiYWNjIiwibGF5ZXJJZCIsIk1hcENvbnRleHQiLCJNYXBQcm92aWRlciIsImNoaWxkcmVuIiwibWFwIiwic2V0TWFwSW5zdGFuY2UiLCJ0ZXJyYWluTG9hZGVkIiwic2V0VGVycmFpbkxvYWRlZCIsImVsZXZhdGlvblNlcnZpY2UiLCJzZXRFbGV2YXRpb25TZXJ2aWNlIiwibGF5ZXJWaXNpYmlsaXR5Iiwic2V0TGF5ZXJWaXNpYmlsaXR5Iiwic2V0TWFwIiwibWFwSW5zdGFuY2UiLCJuZXdUZXJyYWluTG9hZGVkIiwicmVnaXN0ZXJLbm93bkxheWVycyIsImxheWVyU3RhdGUiLCJnZXRMYXllclN0YXRlIiwiZWxldlNlcnZpY2UiLCJ1bmRlZmluZWQiLCJjbGVhbnVwIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidmlzaWJsZSIsInByZXYiLCJ0b2dnbGVMYXllciIsInRvZ2dsZUxheWVyVmlzaWJpbGl0eSIsInNldExheWVyVmlzaWJpbGl0eVZhbHVlIiwicmVzZXRMYXllcnMiLCJ2YWx1ZSIsIlByb3ZpZGVyIiwidXNlTWFwQ29udGV4dCIsImNvbnRleHQiLCJFcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/context/mapcontext.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/hooks/useFlightPathSampling.ts":
/*!************************************************!*\
  !*** ./src/app/hooks/useFlightPathSampling.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sampleFlightPath: () => (/* binding */ sampleFlightPath),\n/* harmony export */   useFlightPathSampling: () => (/* binding */ useFlightPathSampling)\n/* harmony export */ });\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/distance/dist/esm/index.js\");\n\n/**\n * Interpolates a 3D LineString at a fixed step size.\n *\n * NOTE: The heavy work  querying terrain  is *not* performed here;\n *       we only calculate the geometrical skeleton. That keeps this\n *       function pure and unit-testable.\n */ async function sampleFlightPath(line, { resolution = 10, progressCallback, isTerrainMode = false }) {\n    const coords3d = line.coordinates;\n    if (coords3d.length < 2) throw new Error(\"LineString must contain 2 points\");\n    const segments = [];\n    let cumulative = 0;\n    for(let i = 0; i < coords3d.length - 1; i++){\n        const [sx, sy] = coords3d[i];\n        const [ex, ey] = coords3d[i + 1];\n        const len = _turf_turf__WEBPACK_IMPORTED_MODULE_0__.distance([\n            sx,\n            sy\n        ], [\n            ex,\n            ey\n        ], {\n            units: \"meters\"\n        });\n        segments.push({\n            start: cumulative,\n            len,\n            a0: coords3d[i][2],\n            a1: coords3d[i + 1][2]\n        });\n        cumulative += len;\n    }\n    const totalLen = cumulative; // metres\n    const totalSteps = Math.floor(totalLen / resolution);\n    /*  2. Sampling loop (O(n))  */ const samples = [];\n    let segIdx = 0;\n    for(let step = 0; step <= totalSteps; step++){\n        const dist = step * resolution; // metres from start\n        // Advance segment pointer lazily (monotonically)\n        while(segIdx < segments.length - 1 && dist > segments[segIdx].start + segments[segIdx].len + Number.EPSILON){\n            segIdx++;\n        }\n        const seg = segments[segIdx];\n        // Fraction along current segment, clamped [0,1]\n        const t = Math.min(Math.max((dist - seg.start) / seg.len, 0), 1);\n        const flightElev = seg.a0 + t * (seg.a1 - seg.a0);\n        // Interpolate lon/lat linearly  cheap and good enough at 10m steps\n        const [sx, sy] = coords3d[segIdx];\n        const [ex, ey] = coords3d[segIdx + 1];\n        const lon = sx + t * (ex - sx);\n        const lat = sy + t * (ey - sy);\n        samples.push({\n            position: [\n                lon,\n                lat,\n                flightElev\n            ],\n            distanceFromStart: dist,\n            flightElevation: flightElev,\n            terrainElevation: 0,\n            clearance: 0\n        });\n        /*  progress callback every ~5% (cheap)  */ if (progressCallback && step % Math.max(1, Math.floor(totalSteps / 20)) === 0) {\n            if (progressCallback(step / totalSteps * 100)) {\n                // user requested cancellation\n                return [];\n            }\n        }\n    }\n    // force 100% when done\n    progressCallback?.(100);\n    return samples;\n}\n/**\n * Hook to access the sampleFlightPath function\n * @returns Object containing the sampleFlightPath function\n */ const useFlightPathSampling = ()=>{\n    return {\n        sampleFlightPath\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2hvb2tzL3VzZUZsaWdodFBhdGhTYW1wbGluZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUM7QUE4Qm5DOzs7Ozs7Q0FNQyxHQUNNLGVBQWVDLGlCQUNwQkMsSUFBd0IsRUFDeEIsRUFDRUMsYUFBYSxFQUFFLEVBQ2ZDLGdCQUFnQixFQUNoQkMsZ0JBQWdCLEtBQUssRUFDTDtJQUVsQixNQUFNQyxXQUFXSixLQUFLSyxXQUFXO0lBQ2pDLElBQUlELFNBQVNFLE1BQU0sR0FBRyxHQUFHLE1BQU0sSUFBSUMsTUFBTTtJQVN6QyxNQUFNQyxXQUEwQixFQUFFO0lBQ2xDLElBQUlDLGFBQWE7SUFFakIsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlOLFNBQVNFLE1BQU0sR0FBRyxHQUFHSSxJQUFLO1FBQzVDLE1BQU0sQ0FBQ0MsSUFBSUMsR0FBRyxHQUFHUixRQUFRLENBQUNNLEVBQUU7UUFDNUIsTUFBTSxDQUFDRyxJQUFJQyxHQUFHLEdBQUdWLFFBQVEsQ0FBQ00sSUFBSSxFQUFFO1FBQ2hDLE1BQU1LLE1BQU1qQixnREFBYSxDQUFDO1lBQUNhO1lBQUlDO1NBQUcsRUFBRTtZQUFDQztZQUFJQztTQUFHLEVBQUU7WUFBRUcsT0FBTztRQUFTO1FBQ2hFVCxTQUFTVSxJQUFJLENBQUM7WUFBRUMsT0FBT1Y7WUFBWU07WUFBS0ssSUFBSWhCLFFBQVEsQ0FBQ00sRUFBRSxDQUFDLEVBQUU7WUFBRVcsSUFBSWpCLFFBQVEsQ0FBQ00sSUFBSSxFQUFFLENBQUMsRUFBRTtRQUFDO1FBQ25GRCxjQUFjTTtJQUNoQjtJQUVBLE1BQU1PLFdBQVdiLFlBQVksU0FBUztJQUN0QyxNQUFNYyxhQUFhQyxLQUFLQyxLQUFLLENBQUNILFdBQVdyQjtJQUV6QywwRUFBMEUsR0FDMUUsTUFBTXlCLFVBQXlCLEVBQUU7SUFDakMsSUFBSUMsU0FBUztJQUViLElBQUssSUFBSUMsT0FBTyxHQUFHQSxRQUFRTCxZQUFZSyxPQUFRO1FBQzdDLE1BQU1DLE9BQU9ELE9BQU8zQixZQUFZLG9CQUFvQjtRQUVwRCxpREFBaUQ7UUFDakQsTUFDRTBCLFNBQVNuQixTQUFTRixNQUFNLEdBQUcsS0FDM0J1QixPQUFPckIsUUFBUSxDQUFDbUIsT0FBTyxDQUFDUixLQUFLLEdBQUdYLFFBQVEsQ0FBQ21CLE9BQU8sQ0FBQ1osR0FBRyxHQUFHZSxPQUFPQyxPQUFPLENBQ3JFO1lBQ0FKO1FBQ0Y7UUFFQSxNQUFNSyxNQUFNeEIsUUFBUSxDQUFDbUIsT0FBTztRQUU1QixnREFBZ0Q7UUFDaEQsTUFBTU0sSUFBSVQsS0FBS1UsR0FBRyxDQUFDVixLQUFLVyxHQUFHLENBQUMsQ0FBQ04sT0FBT0csSUFBSWIsS0FBSyxJQUFJYSxJQUFJakIsR0FBRyxFQUFFLElBQUk7UUFDOUQsTUFBTXFCLGFBQWFKLElBQUlaLEVBQUUsR0FBR2EsSUFBS0QsQ0FBQUEsSUFBSVgsRUFBRSxHQUFHVyxJQUFJWixFQUFFO1FBRWhELHNFQUFzRTtRQUN0RSxNQUFNLENBQUNULElBQUlDLEdBQUcsR0FBR1IsUUFBUSxDQUFDdUIsT0FBTztRQUNqQyxNQUFNLENBQUNkLElBQUlDLEdBQUcsR0FBR1YsUUFBUSxDQUFDdUIsU0FBUyxFQUFFO1FBQ3JDLE1BQU1VLE1BQU0xQixLQUFLc0IsSUFBS3BCLENBQUFBLEtBQUtGLEVBQUM7UUFDNUIsTUFBTTJCLE1BQU0xQixLQUFLcUIsSUFBS25CLENBQUFBLEtBQUtGLEVBQUM7UUFFNUJjLFFBQVFSLElBQUksQ0FBQztZQUNYcUIsVUFBVTtnQkFBQ0Y7Z0JBQUtDO2dCQUFLRjthQUFXO1lBQ2hDSSxtQkFBbUJYO1lBQ25CWSxpQkFBaUJMO1lBQ2pCTSxrQkFBa0I7WUFDbEJDLFdBQVc7UUFDYjtRQUVBLDhDQUE4QyxHQUM5QyxJQUFJekMsb0JBQW9CMEIsT0FBT0osS0FBS1csR0FBRyxDQUFDLEdBQUdYLEtBQUtDLEtBQUssQ0FBQ0YsYUFBYSxTQUFTLEdBQUc7WUFDN0UsSUFBSXJCLGlCQUFpQixPQUFRcUIsYUFBYyxNQUFNO2dCQUMvQyw4QkFBOEI7Z0JBQzlCLE9BQU8sRUFBRTtZQUNYO1FBQ0Y7SUFDRjtJQUVBLHdCQUF3QjtJQUN4QnJCLG1CQUFtQjtJQUVuQixPQUFPd0I7QUFDVDtBQUVBOzs7Q0FHQyxHQUNNLE1BQU1rQix3QkFBd0I7SUFDbkMsT0FBTztRQUFFN0M7SUFBaUI7QUFDNUIsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvaG9va3MvdXNlRmxpZ2h0UGF0aFNhbXBsaW5nLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHR1cmYgZnJvbSBcIkB0dXJmL3R1cmZcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTYW1wbGVQb2ludCB7XG4gIC8qKiBbbG9uLCBsYXQsIGFsdF0gKi9cbiAgcG9zaXRpb246IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgLyoqIG1ldHJlcyAqL1xuICBkaXN0YW5jZUZyb21TdGFydDogbnVtYmVyO1xuICAvKiogbWV0cmVzIEFNU0wgKi9cbiAgZmxpZ2h0RWxldmF0aW9uOiBudW1iZXI7XG4gIC8qKiBtZXRyZXMgQU1TTCDigJMgY2FsbGVyIG11c3QgZmlsbCAqL1xuICB0ZXJyYWluRWxldmF0aW9uOiBudW1iZXI7XG4gIC8qKiBmbGlnaHRFbGV2YXRpb24g4oCTIHRlcnJhaW5FbGV2YXRpb24gKi9cbiAgY2xlYXJhbmNlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2FtcGxpbmdPcHRpb25zIHtcbiAgLyoqIFNwYWNpbmcgYmV0d2VlbiBzYW1wbGVzIGluICptZXRyZXMqICovXG4gIHJlc29sdXRpb246IG51bWJlcjtcbiAgLyoqXG4gICAqIENhbGxiYWNrIGludm9rZWQgd2l0aCAqcGVyY2VudGFnZSogKDDigJMxMDApLiBJZiBpdCByZXR1cm5zIHRydWUgdGhlXG4gICAqIHNhbXBsaW5nIGFib3J0cyBlYXJseSAodXNlZCBmb3IgQ2FuY2VsIGJ1dHRvbnMpLlxuICAgKi9cbiAgcHJvZ3Jlc3NDYWxsYmFjaz86IChwcm9ncmVzc1BlcmNlbnQ6IG51bWJlcikgPT4gYm9vbGVhbjtcbiAgLyoqXG4gICAqIElmIHRoZSBmbGlnaHQgcGxhbiBpcyBhbHJlYWR5IGluIHRlcnJhaW4tZm9sbG93aW5nIG1vZGUgd2UgY2FuIHNraXBcbiAgICogcXVlcnlpbmcgdGVycmFpbiBpbiB0aGUgY2FsbGVyLlxuICAgKi9cbiAgaXNUZXJyYWluTW9kZT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogSW50ZXJwb2xhdGVzIGEgM+KAkUQgTGluZVN0cmluZyBhdCBhIGZpeGVkIHN0ZXAgc2l6ZS5cbiAqXG4gKiBOT1RFOiBUaGUgaGVhdnkgd29yayDigJMgcXVlcnlpbmcgdGVycmFpbiDigJMgaXMgKm5vdCogcGVyZm9ybWVkIGhlcmU7XG4gKiAgICAgICB3ZSBvbmx5IGNhbGN1bGF0ZSB0aGUgZ2VvbWV0cmljYWwgc2tlbGV0b24uIFRoYXQga2VlcHMgdGhpc1xuICogICAgICAgZnVuY3Rpb24gcHVyZSBhbmQgdW5pdC10ZXN0YWJsZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhbXBsZUZsaWdodFBhdGgoXG4gIGxpbmU6IEdlb0pTT04uTGluZVN0cmluZyxcbiAge1xuICAgIHJlc29sdXRpb24gPSAxMCxcbiAgICBwcm9ncmVzc0NhbGxiYWNrLFxuICAgIGlzVGVycmFpbk1vZGUgPSBmYWxzZSxcbiAgfTogU2FtcGxpbmdPcHRpb25zXG4pOiBQcm9taXNlPFNhbXBsZVBvaW50W10+IHtcbiAgY29uc3QgY29vcmRzM2QgPSBsaW5lLmNvb3JkaW5hdGVzIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdO1xuICBpZiAoY29vcmRzM2QubGVuZ3RoIDwgMikgdGhyb3cgbmV3IEVycm9yKFwiTGluZVN0cmluZyBtdXN0IGNvbnRhaW4g4omlMiBwb2ludHNcIik7XG5cbiAgLyog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIDEuIEJ1aWxkIGZsYXQgc2VnbWVudCB0YWJsZSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAgKi9cbiAgaW50ZXJmYWNlIFNlZ21lbnRNZXRhIHtcbiAgICBzdGFydDogbnVtYmVyOyAvLyBjdW11bGF0aXZlIGRpc3RhbmNlIGZyb20gb3JpZ2luIChtZXRyZXMpXG4gICAgbGVuOiBudW1iZXI7IC8vIHNlZ21lbnQgbGVuZ3RoIChtZXRyZXMpXG4gICAgYTA6IG51bWJlcjsgLy8gc3RhcnQgYWx0aXR1ZGUgKG0pXG4gICAgYTE6IG51bWJlcjsgLy8gZW5kIGFsdGl0dWRlIChtKVxuICB9XG4gIGNvbnN0IHNlZ21lbnRzOiBTZWdtZW50TWV0YVtdID0gW107XG4gIGxldCBjdW11bGF0aXZlID0gMDtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvb3JkczNkLmxlbmd0aCAtIDE7IGkrKykge1xuICAgIGNvbnN0IFtzeCwgc3ldID0gY29vcmRzM2RbaV07XG4gICAgY29uc3QgW2V4LCBleV0gPSBjb29yZHMzZFtpICsgMV07XG4gICAgY29uc3QgbGVuID0gdHVyZi5kaXN0YW5jZShbc3gsIHN5XSwgW2V4LCBleV0sIHsgdW5pdHM6IFwibWV0ZXJzXCIgfSk7XG4gICAgc2VnbWVudHMucHVzaCh7IHN0YXJ0OiBjdW11bGF0aXZlLCBsZW4sIGEwOiBjb29yZHMzZFtpXVsyXSwgYTE6IGNvb3JkczNkW2kgKyAxXVsyXSB9KTtcbiAgICBjdW11bGF0aXZlICs9IGxlbjtcbiAgfVxuXG4gIGNvbnN0IHRvdGFsTGVuID0gY3VtdWxhdGl2ZTsgLy8gbWV0cmVzXG4gIGNvbnN0IHRvdGFsU3RlcHMgPSBNYXRoLmZsb29yKHRvdGFsTGVuIC8gcmVzb2x1dGlvbik7XG5cbiAgLyog4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIDIuIFNhbXBsaW5nIGxvb3AgKE8obikpIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgCAqL1xuICBjb25zdCBzYW1wbGVzOiBTYW1wbGVQb2ludFtdID0gW107XG4gIGxldCBzZWdJZHggPSAwO1xuXG4gIGZvciAobGV0IHN0ZXAgPSAwOyBzdGVwIDw9IHRvdGFsU3RlcHM7IHN0ZXArKykge1xuICAgIGNvbnN0IGRpc3QgPSBzdGVwICogcmVzb2x1dGlvbjsgLy8gbWV0cmVzIGZyb20gc3RhcnRcblxuICAgIC8vIEFkdmFuY2Ugc2VnbWVudCBwb2ludGVyIGxhemlseSAobW9ub3RvbmljYWxseSlcbiAgICB3aGlsZSAoXG4gICAgICBzZWdJZHggPCBzZWdtZW50cy5sZW5ndGggLSAxICYmXG4gICAgICBkaXN0ID4gc2VnbWVudHNbc2VnSWR4XS5zdGFydCArIHNlZ21lbnRzW3NlZ0lkeF0ubGVuICsgTnVtYmVyLkVQU0lMT05cbiAgICApIHtcbiAgICAgIHNlZ0lkeCsrO1xuICAgIH1cblxuICAgIGNvbnN0IHNlZyA9IHNlZ21lbnRzW3NlZ0lkeF07XG5cbiAgICAvLyBGcmFjdGlvbiBhbG9uZyBjdXJyZW50IHNlZ21lbnQsIGNsYW1wZWQgWzAsMV1cbiAgICBjb25zdCB0ID0gTWF0aC5taW4oTWF0aC5tYXgoKGRpc3QgLSBzZWcuc3RhcnQpIC8gc2VnLmxlbiwgMCksIDEpO1xuICAgIGNvbnN0IGZsaWdodEVsZXYgPSBzZWcuYTAgKyB0ICogKHNlZy5hMSAtIHNlZy5hMCk7XG5cbiAgICAvLyBJbnRlcnBvbGF0ZSBsb24vbGF0IGxpbmVhcmx5IOKAkyBjaGVhcCBhbmQgZ29vZCBlbm91Z2ggYXQg4omkMTDigK9tIHN0ZXBzXG4gICAgY29uc3QgW3N4LCBzeV0gPSBjb29yZHMzZFtzZWdJZHhdO1xuICAgIGNvbnN0IFtleCwgZXldID0gY29vcmRzM2Rbc2VnSWR4ICsgMV07XG4gICAgY29uc3QgbG9uID0gc3ggKyB0ICogKGV4IC0gc3gpO1xuICAgIGNvbnN0IGxhdCA9IHN5ICsgdCAqIChleSAtIHN5KTtcblxuICAgIHNhbXBsZXMucHVzaCh7XG4gICAgICBwb3NpdGlvbjogW2xvbiwgbGF0LCBmbGlnaHRFbGV2XSxcbiAgICAgIGRpc3RhbmNlRnJvbVN0YXJ0OiBkaXN0LFxuICAgICAgZmxpZ2h0RWxldmF0aW9uOiBmbGlnaHRFbGV2LFxuICAgICAgdGVycmFpbkVsZXZhdGlvbjogMCwgLy8gd2lsbCBiZSBmaWxsZWQgd2l0aCBERU0gaW4gdGhlIGFuYWx5c2lzIHN0ZXBcbiAgICAgIGNsZWFyYW5jZTogMCxcbiAgICB9KTtcblxuICAgIC8qIOKUgOKUgCBwcm9ncmVzcyBjYWxsYmFjayBldmVyeSB+NeKAryUgKGNoZWFwKSDilIDilIAgKi9cbiAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjayAmJiBzdGVwICUgTWF0aC5tYXgoMSwgTWF0aC5mbG9vcih0b3RhbFN0ZXBzIC8gMjApKSA9PT0gMCkge1xuICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2soKHN0ZXAgLyB0b3RhbFN0ZXBzKSAqIDEwMCkpIHtcbiAgICAgICAgLy8gdXNlciByZXF1ZXN0ZWQgY2FuY2VsbGF0aW9uXG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBmb3JjZSAxMDDigK8lIHdoZW4gZG9uZVxuICBwcm9ncmVzc0NhbGxiYWNrPy4oMTAwKTtcblxuICByZXR1cm4gc2FtcGxlcztcbn1cblxuLyoqXG4gKiBIb29rIHRvIGFjY2VzcyB0aGUgc2FtcGxlRmxpZ2h0UGF0aCBmdW5jdGlvblxuICogQHJldHVybnMgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIHNhbXBsZUZsaWdodFBhdGggZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGNvbnN0IHVzZUZsaWdodFBhdGhTYW1wbGluZyA9ICgpID0+IHtcbiAgcmV0dXJuIHsgc2FtcGxlRmxpZ2h0UGF0aCB9O1xufTsiXSwibmFtZXMiOlsidHVyZiIsInNhbXBsZUZsaWdodFBhdGgiLCJsaW5lIiwicmVzb2x1dGlvbiIsInByb2dyZXNzQ2FsbGJhY2siLCJpc1RlcnJhaW5Nb2RlIiwiY29vcmRzM2QiLCJjb29yZGluYXRlcyIsImxlbmd0aCIsIkVycm9yIiwic2VnbWVudHMiLCJjdW11bGF0aXZlIiwiaSIsInN4Iiwic3kiLCJleCIsImV5IiwibGVuIiwiZGlzdGFuY2UiLCJ1bml0cyIsInB1c2giLCJzdGFydCIsImEwIiwiYTEiLCJ0b3RhbExlbiIsInRvdGFsU3RlcHMiLCJNYXRoIiwiZmxvb3IiLCJzYW1wbGVzIiwic2VnSWR4Iiwic3RlcCIsImRpc3QiLCJOdW1iZXIiLCJFUFNJTE9OIiwic2VnIiwidCIsIm1pbiIsIm1heCIsImZsaWdodEVsZXYiLCJsb24iLCJsYXQiLCJwb3NpdGlvbiIsImRpc3RhbmNlRnJvbVN0YXJ0IiwiZmxpZ2h0RWxldmF0aW9uIiwidGVycmFpbkVsZXZhdGlvbiIsImNsZWFyYW5jZSIsInVzZUZsaWdodFBhdGhTYW1wbGluZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/hooks/useFlightPathSampling.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/hooks/useLayers.ts":
/*!************************************!*\
  !*** ./src/app/hooks/useLayers.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useLayers: () => (/* binding */ useLayers)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/LayerManager */ \"(ssr)/./src/app/services/LayerManager.ts\");\n/* harmony import */ var _context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context/AreaOfOpsContext */ \"(ssr)/./src/app/context/AreaOfOpsContext.tsx\");\n/* harmony import */ var _components_AO_Hooks_useAreaOpsProcessor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/AO/Hooks/useAreaOpsProcessor */ \"(ssr)/./src/app/components/AO/Hooks/useAreaOpsProcessor.ts\");\n/* harmony import */ var _services_BYDAService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../services/BYDAService */ \"(ssr)/./src/app/services/BYDAService.ts\");\n/* harmony import */ var _services_MobileTowerService__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../services/MobileTowerService */ \"(ssr)/./src/app/services/MobileTowerService.ts\");\n\n\n\n\n\n\n\nfunction useLayers() {\n    const { map, toggleLayer, setLayerVisibility } = (0,_context_mapcontext__WEBPACK_IMPORTED_MODULE_1__.useMapContext)();\n    const { aoGeometry } = (0,_context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_3__.useAreaOfOpsContext)();\n    const { showAreaOfOperations } = (0,_components_AO_Hooks_useAreaOpsProcessor__WEBPACK_IMPORTED_MODULE_4__.useAreaOpsProcessor)();\n    /**\n   * Add a flight plan to the map\n   */ const addFlightPath = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLayers.useCallback[addFlightPath]\": (geojson)=>{\n            console.log('addFlightPath: entry', {\n                timestamp: new Date().toISOString(),\n                hasMap: !!map,\n                geojsonFeatureCount: geojson.features?.length || 0,\n                message: 'Starting flight path addition'\n            });\n            if (!map) {\n                console.log('addFlightPath: no map', {\n                    timestamp: new Date().toISOString(),\n                    message: 'Map not available, exiting'\n                });\n                return false;\n            }\n            // Create source data\n            const source = {\n                type: 'geojson',\n                data: geojson,\n                lineMetrics: true\n            };\n            console.log('addFlightPath: source created', {\n                timestamp: new Date().toISOString(),\n                sourceType: source.type,\n                featureCount: source.data.features.length,\n                message: 'GeoJSON source prepared'\n            });\n            // Create layer config\n            const layerConfig = {\n                id: _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.FLIGHT_PATH,\n                type: 'line',\n                source: _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.FLIGHT_PATH,\n                layout: {\n                    'line-join': 'round',\n                    'line-cap': 'round'\n                },\n                paint: {\n                    'line-width': 2,\n                    'line-color': '#FFFF00',\n                    'line-opacity': 1\n                }\n            };\n            console.log('addFlightPath: layer config', {\n                timestamp: new Date().toISOString(),\n                layerId: layerConfig.id,\n                layerType: layerConfig.type,\n                message: 'Layer configuration prepared'\n            });\n            // Add the layer using the layer manager\n            let success = false;\n            try {\n                success = _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.addLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.FLIGHT_PATH, source, layerConfig, undefined, true // Make visible initially\n                );\n                console.log('addFlightPath: layerManager.addLayer', {\n                    timestamp: new Date().toISOString(),\n                    layerId: _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.FLIGHT_PATH,\n                    success,\n                    message: success ? 'Layer added successfully' : 'Failed to add layer'\n                });\n            } catch (error) {\n                console.error('addFlightPath: layerManager error', {\n                    timestamp: new Date().toISOString(),\n                    layerId: _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.FLIGHT_PATH,\n                    error: error instanceof Error ? error.message : String(error),\n                    message: 'Error adding layer via layerManager'\n                });\n                return false;\n            }\n            if (success) {\n                // Check geometry type before accessing coordinates\n                const feature = geojson.features[0];\n                const geometryType = feature?.geometry?.type;\n                console.log('addFlightPath: geometry check', {\n                    timestamp: new Date().toISOString(),\n                    geometryType,\n                    hasFeature: !!feature,\n                    message: 'Checking feature geometry type'\n                });\n                if (geometryType !== 'LineString' && geometryType !== 'MultiLineString') {\n                    console.error('addFlightPath: invalid geometry', {\n                        timestamp: new Date().toISOString(),\n                        geometryType,\n                        message: 'Expected LineString or MultiLineString, cannot calculate bounds'\n                    });\n                    return true; // Layer was added, but bounds calculation is skipped\n                }\n                const coordinates = feature.geometry.coordinates;\n                console.log('addFlightPath: coordinates', {\n                    timestamp: new Date().toISOString(),\n                    coordinateCount: coordinates.length,\n                    firstCoord: coordinates[0] ? `[${coordinates[0][0]},${coordinates[0][1]}]` : null,\n                    message: 'Extracted coordinates for bounds calculation'\n                });\n                // Calculate bounds\n                const bounds = coordinates.reduce({\n                    \"useLayers.useCallback[addFlightPath].bounds\": (acc, coord)=>{\n                        const [lng, lat] = coord;\n                        acc[0] = Math.min(acc[0], lng);\n                        acc[1] = Math.min(acc[1], lat);\n                        acc[2] = Math.max(acc[2], lng);\n                        acc[3] = Math.max(acc[3], lat);\n                        return acc;\n                    }\n                }[\"useLayers.useCallback[addFlightPath].bounds\"], [\n                    Infinity,\n                    Infinity,\n                    -Infinity,\n                    -Infinity\n                ]);\n                console.log('addFlightPath: bounds calculated', {\n                    timestamp: new Date().toISOString(),\n                    bounds,\n                    isValid: bounds.every({\n                        \"useLayers.useCallback[addFlightPath]\": (b)=>isFinite(b)\n                    }[\"useLayers.useCallback[addFlightPath]\"]),\n                    message: 'Bounds calculated from coordinates'\n                });\n                // Fit map to bounds with animation\n                try {\n                    map.fitBounds(bounds, {\n                        padding: 50,\n                        duration: 500,\n                        pitch: 70,\n                        zoom: 10.5\n                    });\n                    console.log('addFlightPath: map.fitBounds', {\n                        timestamp: new Date().toISOString(),\n                        bounds,\n                        options: {\n                            padding: 50,\n                            duration: 500,\n                            pitch: 70,\n                            zoom: 10.5\n                        },\n                        message: 'Map view adjusted to fit bounds'\n                    });\n                } catch (error) {\n                    console.error('addFlightPath: fitBounds error', {\n                        timestamp: new Date().toISOString(),\n                        bounds,\n                        error: error instanceof Error ? error.message : String(error),\n                        message: 'Error adjusting map bounds'\n                    });\n                }\n            }\n            console.log('addFlightPath: complete', {\n                timestamp: new Date().toISOString(),\n                success,\n                message: 'Flight path addition completed'\n            });\n            return success;\n        }\n    }[\"useLayers.useCallback[addFlightPath]\"], [\n        map\n    ]);\n    /**\n   * Toggle high-voltage powerlines layer\n   * @returns {boolean} Success status\n   */ const togglePowerlines = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLayers.useCallback[togglePowerlines]\": ()=>{\n            toggleLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.POWERLINES);\n            toggleLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.POWERLINES_HITBOX);\n            console.log('togglePowerlines: toggled', {\n                timestamp: new Date().toISOString(),\n                layers: [\n                    _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.POWERLINES,\n                    _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.POWERLINES_HITBOX\n                ],\n                message: 'HV powerlines layers toggled'\n            });\n            return true;\n        }\n    }[\"useLayers.useCallback[togglePowerlines]\"], [\n        toggleLayer\n    ]);\n    /**\n   * Toggle DBYD (Dial Before You Dig) powerlines layers\n   * @returns {Promise<boolean>} Success status\n   */ const toggleDBYDPowerlines = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLayers.useCallback[toggleDBYDPowerlines]\": async ()=>{\n            if (!map) {\n                console.warn('toggleDBYDPowerlines: Map not available', {\n                    timestamp: new Date().toISOString(),\n                    message: 'Cannot toggle DBYD powerlines'\n                });\n                return false;\n            }\n            if (!aoGeometry) {\n                console.warn('toggleDBYDPowerlines: AO geometry not available', {\n                    timestamp: new Date().toISOString(),\n                    message: 'Cannot fetch DBYD powerlines without AO'\n                });\n                return false;\n            }\n            try {\n                // Ensure AO is visible\n                showAreaOfOperations();\n                // Fetch and update DBYD layers\n                const success = await (0,_services_BYDAService__WEBPACK_IMPORTED_MODULE_5__.fetchBYDALayers)(map, aoGeometry, setLayerVisibility);\n                if (success) {\n                    console.log('toggleDBYDPowerlines: success', {\n                        timestamp: new Date().toISOString(),\n                        layers: [\n                            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.BYDA_HV,\n                            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.BYDA_LV,\n                            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.BYDA_SWER,\n                            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.BYDA_OTHER,\n                            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.BYDA_DEVICE\n                        ],\n                        message: 'DBYD powerlines layers toggled'\n                    });\n                } else {\n                    console.error('toggleDBYDPowerlines: failed to fetch layers', {\n                        timestamp: new Date().toISOString(),\n                        message: 'Failed to fetch DBYD powerlines data'\n                    });\n                }\n                return success;\n            } catch (error) {\n                console.error('toggleDBYDPowerlines: error', {\n                    timestamp: new Date().toISOString(),\n                    error: error instanceof Error ? error.message : String(error),\n                    message: 'Error toggling DBYD powerlines'\n                });\n                return false;\n            }\n        }\n    }[\"useLayers.useCallback[toggleDBYDPowerlines]\"], [\n        map,\n        aoGeometry,\n        showAreaOfOperations,\n        setLayerVisibility\n    ]);\n    /**\n   * Toggle airspace layers\n   * @returns {boolean} Success status\n   */ const toggleAirspace = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLayers.useCallback[toggleAirspace]\": ()=>{\n            if (!map) {\n                console.warn('toggleAirspace: Map not available', {\n                    timestamp: new Date().toISOString(),\n                    message: 'Cannot toggle airspace layers'\n                });\n                return false;\n            }\n            try {\n                toggleLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.AIRFIELDS);\n                toggleLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.AIRFIELDS_LABELS);\n                console.log('toggleAirspace: toggled', {\n                    timestamp: new Date().toISOString(),\n                    layers: [\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.AIRFIELDS,\n                        _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.AIRFIELDS_LABELS\n                    ],\n                    message: 'Airspace layers toggled'\n                });\n                return true;\n            } catch (error) {\n                console.error('toggleAirspace: error', {\n                    timestamp: new Date().toISOString(),\n                    error: error instanceof Error ? error.message : String(error),\n                    message: 'Error toggling airspace layers'\n                });\n                return false;\n            }\n        }\n    }[\"useLayers.useCallback[toggleAirspace]\"], [\n        map,\n        toggleLayer\n    ]);\n    /**\n   * Toggle mobile towers layer\n   * @returns {Promise<boolean>} Success status\n   */ const toggleMobileTowers = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLayers.useCallback[toggleMobileTowers]\": async ()=>{\n            if (!map) {\n                console.warn('toggleMobileTowers: Map not available');\n                return false;\n            }\n            if (!aoGeometry) {\n                console.warn('toggleMobileTowers: AO geometry not available');\n                return false;\n            }\n            try {\n                // Ensure AO is visible\n                showAreaOfOperations();\n                // Check if layers already exist\n                const towerLayerExists = !!map.getLayer('mobile-towers-unclustered-point');\n                if (towerLayerExists) {\n                    // Just toggle visibility if already loaded\n                    const isVisible = map.getLayoutProperty('mobile-towers-unclustered-point', 'visibility') === 'visible';\n                    if (isVisible) {\n                        map.setLayoutProperty('mobile-towers-unclustered-point', 'visibility', 'none');\n                        if (map.getLayer('mobile-towers-labels')) {\n                            map.setLayoutProperty('mobile-towers-labels', 'visibility', 'none');\n                        }\n                    } else {\n                        map.setLayoutProperty('mobile-towers-unclustered-point', 'visibility', 'visible');\n                    // Labels depend on zoom level, so we don't need to set them visible here\n                    }\n                    return true;\n                } else {\n                    // Display towers with the new implementation\n                    const success = await (0,_services_MobileTowerService__WEBPACK_IMPORTED_MODULE_6__.displayMobileTowers)(map, aoGeometry, setLayerVisibility);\n                    return success;\n                }\n            } catch (error) {\n                console.error('toggleMobileTowers: error', error);\n                return false;\n            }\n        }\n    }[\"useLayers.useCallback[toggleMobileTowers]\"], [\n        map,\n        aoGeometry,\n        showAreaOfOperations,\n        setLayerVisibility\n    ]);\n    /**\n   * Filter mobile towers by carrier, technology, and frequency band\n   * @param {MobileTowerFilters} filters Filter criteria\n   * @returns {boolean} Success status\n   */ const filterMobileTowersLayer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLayers.useCallback[filterMobileTowersLayer]\": (filters)=>{\n            if (!map || !map.getLayer('mobile-towers-unclustered-point')) {\n                return false;\n            }\n            return (0,_services_MobileTowerService__WEBPACK_IMPORTED_MODULE_6__.filterMobileTowers)(map, filters);\n        }\n    }[\"useLayers.useCallback[filterMobileTowersLayer]\"], [\n        map\n    ]);\n    /**\n   * Toggle tree height raw data visualization\n   * Calls the custom toggle function exposed by MapboxLayerHandler\n   */ const toggleTreeHeights = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLayers.useCallback[toggleTreeHeights]\": ()=>{\n            if (!map) {\n                console.warn('toggleTreeHeights: Map not available');\n                return;\n            }\n            // Call the custom toggle function we exposed from MapboxLayerHandler\n            if (map.toggleTreeHeights) {\n                map.toggleTreeHeights();\n                console.log('toggleTreeHeights: Raw data visualization toggled');\n            } else {\n                console.warn('toggleTreeHeights: Tree height system not initialized');\n            }\n        }\n    }[\"useLayers.useCallback[toggleTreeHeights]\"], [\n        map\n    ]);\n    /**\n   * Reset all layers\n   */ const resetLayers = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useLayers.useCallback[resetLayers]\": ()=>{\n            // Reset analysis layers\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.ELOS_GRID);\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.GCS_GRID);\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.OBSERVER_GRID);\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.REPEATER_GRID);\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.MERGED_VISIBILITY);\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.removeLayer(_services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.MAP_LAYERS.FLIGHT_PATH_VISIBILITY);\n            return true;\n        }\n    }[\"useLayers.useCallback[resetLayers]\"], []);\n    return {\n        addFlightPath,\n        resetLayers,\n        toggleLayer,\n        togglePowerlines,\n        toggleDBYDPowerlines,\n        toggleAirspace,\n        toggleMobileTowers,\n        filterMobileTowersLayer,\n        toggleTreeHeights\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU1xRixvQkFBb0IvRixrREFBV0E7b0RBQUM7WUFDcEMsSUFBSSxDQUFDVSxLQUFLO2dCQUNSTyxRQUFRNkQsSUFBSSxDQUFDO2dCQUNiO1lBQ0Y7WUFFQSxxRUFBcUU7WUFDckUsSUFBSSxJQUFhaUIsaUJBQWlCLEVBQUU7Z0JBQ2pDckYsSUFBWXFGLGlCQUFpQjtnQkFDOUI5RSxRQUFRQyxHQUFHLENBQUM7WUFDZCxPQUFPO2dCQUNMRCxRQUFRNkQsSUFBSSxDQUFDO1lBQ2Y7UUFDRjttREFBRztRQUFDcEU7S0FBSTtJQUVSOztHQUVDLEdBQ0QsTUFBTXNGLGNBQWNoRyxrREFBV0E7OENBQUM7WUFDOUIsd0JBQXdCO1lBQ3hCRSxnRUFBWUEsQ0FBQytGLFdBQVcsQ0FBQzlGLDhEQUFVQSxDQUFDK0YsU0FBUztZQUM3Q2hHLGdFQUFZQSxDQUFDK0YsV0FBVyxDQUFDOUYsOERBQVVBLENBQUNnRyxRQUFRO1lBQzVDakcsZ0VBQVlBLENBQUMrRixXQUFXLENBQUM5Riw4REFBVUEsQ0FBQ2lHLGFBQWE7WUFDakRsRyxnRUFBWUEsQ0FBQytGLFdBQVcsQ0FBQzlGLDhEQUFVQSxDQUFDa0csYUFBYTtZQUNqRG5HLGdFQUFZQSxDQUFDK0YsV0FBVyxDQUFDOUYsOERBQVVBLENBQUNtRyxpQkFBaUI7WUFDckRwRyxnRUFBWUEsQ0FBQytGLFdBQVcsQ0FBQzlGLDhEQUFVQSxDQUFDb0csc0JBQXNCO1lBQzFELE9BQU87UUFDVDs2Q0FBRyxFQUFFO0lBRUwsT0FBTztRQUNMeEY7UUFDQWlGO1FBQ0FyRjtRQUNBOEQ7UUFDQUk7UUFDQU87UUFDQUc7UUFDQU07UUFDQUU7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9ob29rcy91c2VMYXllcnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VNYXBDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dC9tYXBjb250ZXh0JztcbmltcG9ydCB7IGxheWVyTWFuYWdlciwgTUFQX0xBWUVSUyB9IGZyb20gJy4uL3NlcnZpY2VzL0xheWVyTWFuYWdlcic7XG5pbXBvcnQgeyB1c2VBcmVhT2ZPcHNDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dC9BcmVhT2ZPcHNDb250ZXh0JztcbmltcG9ydCB7IHVzZUFyZWFPcHNQcm9jZXNzb3IgfSBmcm9tICcuLi9jb21wb25lbnRzL0FPL0hvb2tzL3VzZUFyZWFPcHNQcm9jZXNzb3InO1xuaW1wb3J0IHsgZmV0Y2hCWURBTGF5ZXJzIH0gZnJvbSAnLi4vc2VydmljZXMvQllEQVNlcnZpY2UnO1xuaW1wb3J0IHsgZGlzcGxheU1vYmlsZVRvd2VycywgZmlsdGVyTW9iaWxlVG93ZXJzIH0gZnJvbSAnLi4vc2VydmljZXMvTW9iaWxlVG93ZXJTZXJ2aWNlJztcbmltcG9ydCB7IE1vYmlsZVRvd2VyRmlsdGVycyB9IGZyb20gJy4uL3R5cGVzL21vYmlsZVRvd2Vycyc7XG5pbXBvcnQgdHlwZSB7IEdlb0pTT04gfSBmcm9tICdnZW9qc29uJztcbmltcG9ydCAqIGFzIHR1cmYgZnJvbSAnQHR1cmYvdHVyZic7XG5pbXBvcnQgbWFwYm94Z2wgZnJvbSAnbWFwYm94LWdsJztcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUxheWVycygpIHtcbiAgY29uc3QgeyBtYXAsIHRvZ2dsZUxheWVyLCBzZXRMYXllclZpc2liaWxpdHkgfSA9IHVzZU1hcENvbnRleHQoKTtcbiAgY29uc3QgeyBhb0dlb21ldHJ5IH0gPSB1c2VBcmVhT2ZPcHNDb250ZXh0KCk7XG4gIGNvbnN0IHsgc2hvd0FyZWFPZk9wZXJhdGlvbnMgfSA9IHVzZUFyZWFPcHNQcm9jZXNzb3IoKTtcblxuICAvKipcbiAgICogQWRkIGEgZmxpZ2h0IHBsYW4gdG8gdGhlIG1hcFxuICAgKi9cbiAgY29uc3QgYWRkRmxpZ2h0UGF0aCA9IHVzZUNhbGxiYWNrKFxuICAgIChnZW9qc29uOiBHZW9KU09OLkZlYXR1cmVDb2xsZWN0aW9uKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnYWRkRmxpZ2h0UGF0aDogZW50cnknLCB7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBoYXNNYXA6ICEhbWFwLFxuICAgICAgICBnZW9qc29uRmVhdHVyZUNvdW50OiBnZW9qc29uLmZlYXR1cmVzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgbWVzc2FnZTogJ1N0YXJ0aW5nIGZsaWdodCBwYXRoIGFkZGl0aW9uJ1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghbWFwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdhZGRGbGlnaHRQYXRoOiBubyBtYXAnLCB7XG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgbWVzc2FnZTogJ01hcCBub3QgYXZhaWxhYmxlLCBleGl0aW5nJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgc291cmNlIGRhdGFcbiAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2dlb2pzb24nIGFzIGNvbnN0LFxuICAgICAgICBkYXRhOiBnZW9qc29uLFxuICAgICAgICBsaW5lTWV0cmljczogdHJ1ZSxcbiAgICAgIH07XG4gICAgICBjb25zb2xlLmxvZygnYWRkRmxpZ2h0UGF0aDogc291cmNlIGNyZWF0ZWQnLCB7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzb3VyY2VUeXBlOiBzb3VyY2UudHlwZSxcbiAgICAgICAgZmVhdHVyZUNvdW50OiAoc291cmNlLmRhdGEgYXMgR2VvSlNPTi5GZWF0dXJlQ29sbGVjdGlvbikuZmVhdHVyZXMubGVuZ3RoLFxuICAgICAgICBtZXNzYWdlOiAnR2VvSlNPTiBzb3VyY2UgcHJlcGFyZWQnXG4gICAgICB9KTtcblxuICAgICAgLy8gQ3JlYXRlIGxheWVyIGNvbmZpZ1xuICAgICAgY29uc3QgbGF5ZXJDb25maWcgPSB7XG4gICAgICAgIGlkOiBNQVBfTEFZRVJTLkZMSUdIVF9QQVRILFxuICAgICAgICB0eXBlOiAnbGluZScgYXMgY29uc3QsXG4gICAgICAgIHNvdXJjZTogTUFQX0xBWUVSUy5GTElHSFRfUEFUSCxcbiAgICAgICAgbGF5b3V0OiB7XG4gICAgICAgICAgJ2xpbmUtam9pbic6ICdyb3VuZCcsXG4gICAgICAgICAgJ2xpbmUtY2FwJzogJ3JvdW5kJyxcbiAgICAgICAgfSxcbiAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAnbGluZS13aWR0aCc6IDIsXG4gICAgICAgICAgJ2xpbmUtY29sb3InOiAnI0ZGRkYwMCcsXG4gICAgICAgICAgJ2xpbmUtb3BhY2l0eSc6IDEsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgICAgY29uc29sZS5sb2coJ2FkZEZsaWdodFBhdGg6IGxheWVyIGNvbmZpZycsIHtcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIGxheWVySWQ6IGxheWVyQ29uZmlnLmlkLFxuICAgICAgICBsYXllclR5cGU6IGxheWVyQ29uZmlnLnR5cGUsXG4gICAgICAgIG1lc3NhZ2U6ICdMYXllciBjb25maWd1cmF0aW9uIHByZXBhcmVkJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEFkZCB0aGUgbGF5ZXIgdXNpbmcgdGhlIGxheWVyIG1hbmFnZXJcbiAgICAgIGxldCBzdWNjZXNzID0gZmFsc2U7XG4gICAgICB0cnkge1xuICAgICAgICBzdWNjZXNzID0gbGF5ZXJNYW5hZ2VyLmFkZExheWVyKFxuICAgICAgICAgIE1BUF9MQVlFUlMuRkxJR0hUX1BBVEgsXG4gICAgICAgICAgc291cmNlLFxuICAgICAgICAgIGxheWVyQ29uZmlnLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB0cnVlIC8vIE1ha2UgdmlzaWJsZSBpbml0aWFsbHlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2FkZEZsaWdodFBhdGg6IGxheWVyTWFuYWdlci5hZGRMYXllcicsIHtcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICBsYXllcklkOiBNQVBfTEFZRVJTLkZMSUdIVF9QQVRILFxuICAgICAgICAgIHN1Y2Nlc3MsXG4gICAgICAgICAgbWVzc2FnZTogc3VjY2VzcyA/ICdMYXllciBhZGRlZCBzdWNjZXNzZnVsbHknIDogJ0ZhaWxlZCB0byBhZGQgbGF5ZXInXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignYWRkRmxpZ2h0UGF0aDogbGF5ZXJNYW5hZ2VyIGVycm9yJywge1xuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIGxheWVySWQ6IE1BUF9MQVlFUlMuRkxJR0hUX1BBVEgsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgYWRkaW5nIGxheWVyIHZpYSBsYXllck1hbmFnZXInXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgIC8vIENoZWNrIGdlb21ldHJ5IHR5cGUgYmVmb3JlIGFjY2Vzc2luZyBjb29yZGluYXRlc1xuICAgICAgICBjb25zdCBmZWF0dXJlID0gZ2VvanNvbi5mZWF0dXJlc1swXTtcbiAgICAgICAgY29uc3QgZ2VvbWV0cnlUeXBlID0gZmVhdHVyZT8uZ2VvbWV0cnk/LnR5cGU7XG4gICAgICAgIGNvbnNvbGUubG9nKCdhZGRGbGlnaHRQYXRoOiBnZW9tZXRyeSBjaGVjaycsIHtcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICBnZW9tZXRyeVR5cGUsXG4gICAgICAgICAgaGFzRmVhdHVyZTogISFmZWF0dXJlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdDaGVja2luZyBmZWF0dXJlIGdlb21ldHJ5IHR5cGUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChnZW9tZXRyeVR5cGUgIT09ICdMaW5lU3RyaW5nJyAmJiBnZW9tZXRyeVR5cGUgIT09ICdNdWx0aUxpbmVTdHJpbmcnKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignYWRkRmxpZ2h0UGF0aDogaW52YWxpZCBnZW9tZXRyeScsIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgZ2VvbWV0cnlUeXBlLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0V4cGVjdGVkIExpbmVTdHJpbmcgb3IgTXVsdGlMaW5lU3RyaW5nLCBjYW5ub3QgY2FsY3VsYXRlIGJvdW5kcydcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gTGF5ZXIgd2FzIGFkZGVkLCBidXQgYm91bmRzIGNhbGN1bGF0aW9uIGlzIHNraXBwZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gKGZlYXR1cmUuZ2VvbWV0cnkgYXMgR2VvSlNPTi5MaW5lU3RyaW5nKS5jb29yZGluYXRlcztcbiAgICAgICAgY29uc29sZS5sb2coJ2FkZEZsaWdodFBhdGg6IGNvb3JkaW5hdGVzJywge1xuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIGNvb3JkaW5hdGVDb3VudDogY29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgICAgICAgIGZpcnN0Q29vcmQ6IGNvb3JkaW5hdGVzWzBdID8gYFske2Nvb3JkaW5hdGVzWzBdWzBdfSwke2Nvb3JkaW5hdGVzWzBdWzFdfV1gIDogbnVsbCxcbiAgICAgICAgICBtZXNzYWdlOiAnRXh0cmFjdGVkIGNvb3JkaW5hdGVzIGZvciBib3VuZHMgY2FsY3VsYXRpb24nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENhbGN1bGF0ZSBib3VuZHNcbiAgICAgICAgY29uc3QgYm91bmRzID0gY29vcmRpbmF0ZXMucmVkdWNlKFxuICAgICAgICAgIChhY2MsIGNvb3JkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbbG5nLCBsYXRdID0gY29vcmQ7XG4gICAgICAgICAgICBhY2NbMF0gPSBNYXRoLm1pbihhY2NbMF0sIGxuZyk7XG4gICAgICAgICAgICBhY2NbMV0gPSBNYXRoLm1pbihhY2NbMV0sIGxhdCk7XG4gICAgICAgICAgICBhY2NbMl0gPSBNYXRoLm1heChhY2NbMl0sIGxuZyk7XG4gICAgICAgICAgICBhY2NbM10gPSBNYXRoLm1heChhY2NbM10sIGxhdCk7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgW0luZmluaXR5LCBJbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHldIGFzIG51bWJlcltdXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdhZGRGbGlnaHRQYXRoOiBib3VuZHMgY2FsY3VsYXRlZCcsIHtcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICBib3VuZHMsXG4gICAgICAgICAgaXNWYWxpZDogYm91bmRzLmV2ZXJ5KGIgPT4gaXNGaW5pdGUoYikpLFxuICAgICAgICAgIG1lc3NhZ2U6ICdCb3VuZHMgY2FsY3VsYXRlZCBmcm9tIGNvb3JkaW5hdGVzJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBGaXQgbWFwIHRvIGJvdW5kcyB3aXRoIGFuaW1hdGlvblxuICAgICAgICB0cnkge1xuICAgICAgICAgIG1hcC5maXRCb3VuZHMoXG4gICAgICAgICAgICBib3VuZHMgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDUwLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgICAgICAgICBwaXRjaDogNzAsXG4gICAgICAgICAgICAgIHpvb206IDEwLjUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnYWRkRmxpZ2h0UGF0aDogbWFwLmZpdEJvdW5kcycsIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgYm91bmRzLFxuICAgICAgICAgICAgb3B0aW9uczogeyBwYWRkaW5nOiA1MCwgZHVyYXRpb246IDUwMCwgcGl0Y2g6IDcwLCB6b29tOiAxMC41IH0sXG4gICAgICAgICAgICBtZXNzYWdlOiAnTWFwIHZpZXcgYWRqdXN0ZWQgdG8gZml0IGJvdW5kcydcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdhZGRGbGlnaHRQYXRoOiBmaXRCb3VuZHMgZXJyb3InLCB7XG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGJvdW5kcyxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgYWRqdXN0aW5nIG1hcCBib3VuZHMnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ2FkZEZsaWdodFBhdGg6IGNvbXBsZXRlJywge1xuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgc3VjY2VzcyxcbiAgICAgICAgbWVzc2FnZTogJ0ZsaWdodCBwYXRoIGFkZGl0aW9uIGNvbXBsZXRlZCdcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgfSxcbiAgICBbbWFwXVxuICApO1xuXG4gIC8qKlxuICAgKiBUb2dnbGUgaGlnaC12b2x0YWdlIHBvd2VybGluZXMgbGF5ZXJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IFN1Y2Nlc3Mgc3RhdHVzXG4gICAqL1xuICBjb25zdCB0b2dnbGVQb3dlcmxpbmVzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHRvZ2dsZUxheWVyKE1BUF9MQVlFUlMuUE9XRVJMSU5FUyk7XG4gICAgdG9nZ2xlTGF5ZXIoTUFQX0xBWUVSUy5QT1dFUkxJTkVTX0hJVEJPWCk7XG4gICAgY29uc29sZS5sb2coJ3RvZ2dsZVBvd2VybGluZXM6IHRvZ2dsZWQnLCB7XG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGxheWVyczogW01BUF9MQVlFUlMuUE9XRVJMSU5FUywgTUFQX0xBWUVSUy5QT1dFUkxJTkVTX0hJVEJPWF0sXG4gICAgICBtZXNzYWdlOiAnSFYgcG93ZXJsaW5lcyBsYXllcnMgdG9nZ2xlZCdcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSwgW3RvZ2dsZUxheWVyXSk7XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBEQllEIChEaWFsIEJlZm9yZSBZb3UgRGlnKSBwb3dlcmxpbmVzIGxheWVyc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gU3VjY2VzcyBzdGF0dXNcbiAgICovXG4gIGNvbnN0IHRvZ2dsZURCWURQb3dlcmxpbmVzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghbWFwKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ3RvZ2dsZURCWURQb3dlcmxpbmVzOiBNYXAgbm90IGF2YWlsYWJsZScsIHtcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIG1lc3NhZ2U6ICdDYW5ub3QgdG9nZ2xlIERCWUQgcG93ZXJsaW5lcydcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIWFvR2VvbWV0cnkpIHtcbiAgICAgIGNvbnNvbGUud2FybigndG9nZ2xlREJZRFBvd2VybGluZXM6IEFPIGdlb21ldHJ5IG5vdCBhdmFpbGFibGUnLCB7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBtZXNzYWdlOiAnQ2Fubm90IGZldGNoIERCWUQgcG93ZXJsaW5lcyB3aXRob3V0IEFPJ1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEVuc3VyZSBBTyBpcyB2aXNpYmxlXG4gICAgICBzaG93QXJlYU9mT3BlcmF0aW9ucygpO1xuXG4gICAgICAvLyBGZXRjaCBhbmQgdXBkYXRlIERCWUQgbGF5ZXJzXG4gICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgZmV0Y2hCWURBTGF5ZXJzKG1hcCwgYW9HZW9tZXRyeSwgc2V0TGF5ZXJWaXNpYmlsaXR5KTtcblxuICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3RvZ2dsZURCWURQb3dlcmxpbmVzOiBzdWNjZXNzJywge1xuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIGxheWVyczogW1xuICAgICAgICAgICAgTUFQX0xBWUVSUy5CWURBX0hWLFxuICAgICAgICAgICAgTUFQX0xBWUVSUy5CWURBX0xWLFxuICAgICAgICAgICAgTUFQX0xBWUVSUy5CWURBX1NXRVIsXG4gICAgICAgICAgICBNQVBfTEFZRVJTLkJZREFfT1RIRVIsXG4gICAgICAgICAgICBNQVBfTEFZRVJTLkJZREFfREVWSUNFLFxuICAgICAgICAgIF0sXG4gICAgICAgICAgbWVzc2FnZTogJ0RCWUQgcG93ZXJsaW5lcyBsYXllcnMgdG9nZ2xlZCdcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCd0b2dnbGVEQllEUG93ZXJsaW5lczogZmFpbGVkIHRvIGZldGNoIGxheWVycycsIHtcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIERCWUQgcG93ZXJsaW5lcyBkYXRhJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ3RvZ2dsZURCWURQb3dlcmxpbmVzOiBlcnJvcicsIHtcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIG1lc3NhZ2U6ICdFcnJvciB0b2dnbGluZyBEQllEIHBvd2VybGluZXMnXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIFttYXAsIGFvR2VvbWV0cnksIHNob3dBcmVhT2ZPcGVyYXRpb25zLCBzZXRMYXllclZpc2liaWxpdHldKTtcblxuICAvKipcbiAgICogVG9nZ2xlIGFpcnNwYWNlIGxheWVyc1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gU3VjY2VzcyBzdGF0dXNcbiAgICovXG4gIGNvbnN0IHRvZ2dsZUFpcnNwYWNlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghbWFwKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ3RvZ2dsZUFpcnNwYWNlOiBNYXAgbm90IGF2YWlsYWJsZScsIHtcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIG1lc3NhZ2U6ICdDYW5ub3QgdG9nZ2xlIGFpcnNwYWNlIGxheWVycydcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICB0b2dnbGVMYXllcihNQVBfTEFZRVJTLkFJUkZJRUxEUyk7XG4gICAgICB0b2dnbGVMYXllcihNQVBfTEFZRVJTLkFJUkZJRUxEU19MQUJFTFMpO1xuICAgICAgY29uc29sZS5sb2coJ3RvZ2dsZUFpcnNwYWNlOiB0b2dnbGVkJywge1xuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgbGF5ZXJzOiBbTUFQX0xBWUVSUy5BSVJGSUVMRFMsIE1BUF9MQVlFUlMuQUlSRklFTERTX0xBQkVMU10sXG4gICAgICAgIG1lc3NhZ2U6ICdBaXJzcGFjZSBsYXllcnMgdG9nZ2xlZCdcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ3RvZ2dsZUFpcnNwYWNlOiBlcnJvcicsIHtcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIG1lc3NhZ2U6ICdFcnJvciB0b2dnbGluZyBhaXJzcGFjZSBsYXllcnMnXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIFttYXAsIHRvZ2dsZUxheWVyXSk7XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBtb2JpbGUgdG93ZXJzIGxheWVyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSBTdWNjZXNzIHN0YXR1c1xuICAgKi9cbiAgY29uc3QgdG9nZ2xlTW9iaWxlVG93ZXJzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghbWFwKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ3RvZ2dsZU1vYmlsZVRvd2VyczogTWFwIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFhb0dlb21ldHJ5KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ3RvZ2dsZU1vYmlsZVRvd2VyczogQU8gZ2VvbWV0cnkgbm90IGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBFbnN1cmUgQU8gaXMgdmlzaWJsZVxuICAgICAgc2hvd0FyZWFPZk9wZXJhdGlvbnMoKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgbGF5ZXJzIGFscmVhZHkgZXhpc3RcbiAgICAgIGNvbnN0IHRvd2VyTGF5ZXJFeGlzdHMgPSAhIW1hcC5nZXRMYXllcignbW9iaWxlLXRvd2Vycy11bmNsdXN0ZXJlZC1wb2ludCcpO1xuICAgICAgXG4gICAgICBpZiAodG93ZXJMYXllckV4aXN0cykge1xuICAgICAgICAvLyBKdXN0IHRvZ2dsZSB2aXNpYmlsaXR5IGlmIGFscmVhZHkgbG9hZGVkXG4gICAgICAgIGNvbnN0IGlzVmlzaWJsZSA9IG1hcC5nZXRMYXlvdXRQcm9wZXJ0eSgnbW9iaWxlLXRvd2Vycy11bmNsdXN0ZXJlZC1wb2ludCcsICd2aXNpYmlsaXR5JykgPT09ICd2aXNpYmxlJztcbiAgICAgICAgXG4gICAgICAgIGlmIChpc1Zpc2libGUpIHtcbiAgICAgICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoJ21vYmlsZS10b3dlcnMtdW5jbHVzdGVyZWQtcG9pbnQnLCAndmlzaWJpbGl0eScsICdub25lJyk7XG4gICAgICAgICAgaWYgKG1hcC5nZXRMYXllcignbW9iaWxlLXRvd2Vycy1sYWJlbHMnKSkge1xuICAgICAgICAgICAgbWFwLnNldExheW91dFByb3BlcnR5KCdtb2JpbGUtdG93ZXJzLWxhYmVscycsICd2aXNpYmlsaXR5JywgJ25vbmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWFwLnNldExheW91dFByb3BlcnR5KCdtb2JpbGUtdG93ZXJzLXVuY2x1c3RlcmVkLXBvaW50JywgJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgICAgICAgIC8vIExhYmVscyBkZXBlbmQgb24gem9vbSBsZXZlbCwgc28gd2UgZG9uJ3QgbmVlZCB0byBzZXQgdGhlbSB2aXNpYmxlIGhlcmVcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEaXNwbGF5IHRvd2VycyB3aXRoIHRoZSBuZXcgaW1wbGVtZW50YXRpb25cbiAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IGRpc3BsYXlNb2JpbGVUb3dlcnMobWFwLCBhb0dlb21ldHJ5LCBzZXRMYXllclZpc2liaWxpdHkpO1xuICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcigndG9nZ2xlTW9iaWxlVG93ZXJzOiBlcnJvcicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIFttYXAsIGFvR2VvbWV0cnksIHNob3dBcmVhT2ZPcGVyYXRpb25zLCBzZXRMYXllclZpc2liaWxpdHldKTtcblxuICAvKipcbiAgICogRmlsdGVyIG1vYmlsZSB0b3dlcnMgYnkgY2FycmllciwgdGVjaG5vbG9neSwgYW5kIGZyZXF1ZW5jeSBiYW5kXG4gICAqIEBwYXJhbSB7TW9iaWxlVG93ZXJGaWx0ZXJzfSBmaWx0ZXJzIEZpbHRlciBjcml0ZXJpYVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gU3VjY2VzcyBzdGF0dXNcbiAgICovXG4gIGNvbnN0IGZpbHRlck1vYmlsZVRvd2Vyc0xheWVyID0gdXNlQ2FsbGJhY2soKGZpbHRlcnM6IE1vYmlsZVRvd2VyRmlsdGVycykgPT4ge1xuICAgIGlmICghbWFwIHx8ICFtYXAuZ2V0TGF5ZXIoJ21vYmlsZS10b3dlcnMtdW5jbHVzdGVyZWQtcG9pbnQnKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmlsdGVyTW9iaWxlVG93ZXJzKG1hcCwgZmlsdGVycyk7XG4gIH0sIFttYXBdKTtcblxuICAvKipcbiAgICogVG9nZ2xlIHRyZWUgaGVpZ2h0IHJhdyBkYXRhIHZpc3VhbGl6YXRpb25cbiAgICogQ2FsbHMgdGhlIGN1c3RvbSB0b2dnbGUgZnVuY3Rpb24gZXhwb3NlZCBieSBNYXBib3hMYXllckhhbmRsZXJcbiAgICovXG4gIGNvbnN0IHRvZ2dsZVRyZWVIZWlnaHRzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghbWFwKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ3RvZ2dsZVRyZWVIZWlnaHRzOiBNYXAgbm90IGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBDYWxsIHRoZSBjdXN0b20gdG9nZ2xlIGZ1bmN0aW9uIHdlIGV4cG9zZWQgZnJvbSBNYXBib3hMYXllckhhbmRsZXJcbiAgICBpZiAoKG1hcCBhcyBhbnkpLnRvZ2dsZVRyZWVIZWlnaHRzKSB7XG4gICAgICAobWFwIGFzIGFueSkudG9nZ2xlVHJlZUhlaWdodHMoKTtcbiAgICAgIGNvbnNvbGUubG9nKCd0b2dnbGVUcmVlSGVpZ2h0czogUmF3IGRhdGEgdmlzdWFsaXphdGlvbiB0b2dnbGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybigndG9nZ2xlVHJlZUhlaWdodHM6IFRyZWUgaGVpZ2h0IHN5c3RlbSBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG4gIH0sIFttYXBdKTtcblxuICAvKipcbiAgICogUmVzZXQgYWxsIGxheWVyc1xuICAgKi9cbiAgY29uc3QgcmVzZXRMYXllcnMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgLy8gUmVzZXQgYW5hbHlzaXMgbGF5ZXJzXG4gICAgbGF5ZXJNYW5hZ2VyLnJlbW92ZUxheWVyKE1BUF9MQVlFUlMuRUxPU19HUklEKTtcbiAgICBsYXllck1hbmFnZXIucmVtb3ZlTGF5ZXIoTUFQX0xBWUVSUy5HQ1NfR1JJRCk7XG4gICAgbGF5ZXJNYW5hZ2VyLnJlbW92ZUxheWVyKE1BUF9MQVlFUlMuT0JTRVJWRVJfR1JJRCk7XG4gICAgbGF5ZXJNYW5hZ2VyLnJlbW92ZUxheWVyKE1BUF9MQVlFUlMuUkVQRUFURVJfR1JJRCk7XG4gICAgbGF5ZXJNYW5hZ2VyLnJlbW92ZUxheWVyKE1BUF9MQVlFUlMuTUVSR0VEX1ZJU0lCSUxJVFkpO1xuICAgIGxheWVyTWFuYWdlci5yZW1vdmVMYXllcihNQVBfTEFZRVJTLkZMSUdIVF9QQVRIX1ZJU0lCSUxJVFkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBhZGRGbGlnaHRQYXRoLFxuICAgIHJlc2V0TGF5ZXJzLFxuICAgIHRvZ2dsZUxheWVyLFxuICAgIHRvZ2dsZVBvd2VybGluZXMsXG4gICAgdG9nZ2xlREJZRFBvd2VybGluZXMsXG4gICAgdG9nZ2xlQWlyc3BhY2UsXG4gICAgdG9nZ2xlTW9iaWxlVG93ZXJzLFxuICAgIGZpbHRlck1vYmlsZVRvd2Vyc0xheWVyLFxuICAgIHRvZ2dsZVRyZWVIZWlnaHRzLFxuICB9O1xufSJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZU1hcENvbnRleHQiLCJsYXllck1hbmFnZXIiLCJNQVBfTEFZRVJTIiwidXNlQXJlYU9mT3BzQ29udGV4dCIsInVzZUFyZWFPcHNQcm9jZXNzb3IiLCJmZXRjaEJZREFMYXllcnMiLCJkaXNwbGF5TW9iaWxlVG93ZXJzIiwiZmlsdGVyTW9iaWxlVG93ZXJzIiwidXNlTGF5ZXJzIiwibWFwIiwidG9nZ2xlTGF5ZXIiLCJzZXRMYXllclZpc2liaWxpdHkiLCJhb0dlb21ldHJ5Iiwic2hvd0FyZWFPZk9wZXJhdGlvbnMiLCJhZGRGbGlnaHRQYXRoIiwiZ2VvanNvbiIsImNvbnNvbGUiLCJsb2ciLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJoYXNNYXAiLCJnZW9qc29uRmVhdHVyZUNvdW50IiwiZmVhdHVyZXMiLCJsZW5ndGgiLCJtZXNzYWdlIiwic291cmNlIiwidHlwZSIsImRhdGEiLCJsaW5lTWV0cmljcyIsInNvdXJjZVR5cGUiLCJmZWF0dXJlQ291bnQiLCJsYXllckNvbmZpZyIsImlkIiwiRkxJR0hUX1BBVEgiLCJsYXlvdXQiLCJwYWludCIsImxheWVySWQiLCJsYXllclR5cGUiLCJzdWNjZXNzIiwiYWRkTGF5ZXIiLCJ1bmRlZmluZWQiLCJlcnJvciIsIkVycm9yIiwiU3RyaW5nIiwiZmVhdHVyZSIsImdlb21ldHJ5VHlwZSIsImdlb21ldHJ5IiwiaGFzRmVhdHVyZSIsImNvb3JkaW5hdGVzIiwiY29vcmRpbmF0ZUNvdW50IiwiZmlyc3RDb29yZCIsImJvdW5kcyIsInJlZHVjZSIsImFjYyIsImNvb3JkIiwibG5nIiwibGF0IiwiTWF0aCIsIm1pbiIsIm1heCIsIkluZmluaXR5IiwiaXNWYWxpZCIsImV2ZXJ5IiwiYiIsImlzRmluaXRlIiwiZml0Qm91bmRzIiwicGFkZGluZyIsImR1cmF0aW9uIiwicGl0Y2giLCJ6b29tIiwib3B0aW9ucyIsInRvZ2dsZVBvd2VybGluZXMiLCJQT1dFUkxJTkVTIiwiUE9XRVJMSU5FU19ISVRCT1giLCJsYXllcnMiLCJ0b2dnbGVEQllEUG93ZXJsaW5lcyIsIndhcm4iLCJCWURBX0hWIiwiQllEQV9MViIsIkJZREFfU1dFUiIsIkJZREFfT1RIRVIiLCJCWURBX0RFVklDRSIsInRvZ2dsZUFpcnNwYWNlIiwiQUlSRklFTERTIiwiQUlSRklFTERTX0xBQkVMUyIsInRvZ2dsZU1vYmlsZVRvd2VycyIsInRvd2VyTGF5ZXJFeGlzdHMiLCJnZXRMYXllciIsImlzVmlzaWJsZSIsImdldExheW91dFByb3BlcnR5Iiwic2V0TGF5b3V0UHJvcGVydHkiLCJmaWx0ZXJNb2JpbGVUb3dlcnNMYXllciIsImZpbHRlcnMiLCJ0b2dnbGVUcmVlSGVpZ2h0cyIsInJlc2V0TGF5ZXJzIiwicmVtb3ZlTGF5ZXIiLCJFTE9TX0dSSUQiLCJHQ1NfR1JJRCIsIk9CU0VSVkVSX0dSSUQiLCJSRVBFQVRFUl9HUklEIiwiTUVSR0VEX1ZJU0lCSUxJVFkiLCJGTElHSFRfUEFUSF9WSVNJQklMSVRZIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/hooks/useLayers.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/hooks/useTowerToMarker.ts":
/*!*******************************************!*\
  !*** ./src/app/hooks/useTowerToMarker.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useTowerToMarker: () => (/* binding */ useTowerToMarker)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"(ssr)/./node_modules/mapbox-gl/dist/mapbox-gl.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _context_MarkerContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../context/MarkerContext */ \"(ssr)/./src/app/context/MarkerContext.tsx\");\n/* harmony import */ var _components_Map_Utils_markerPopup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/Map/Utils/markerPopup */ \"(ssr)/./src/app/components/Map/Utils/markerPopup.ts\");\n/* harmony import */ var _components_tracking_tracking__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/tracking/tracking */ \"(ssr)/./src/app/components/tracking/tracking.js\");\n// src/app/hooks/useTowerToMarker.ts\n/**\n * useTowerToMarker.ts\n * \n * Purpose:\n * Provides functionality to convert mobile towers into repeater markers\n * with tower-specific metadata preserved. This hook bridges the gap between\n * the tower display system and the marker management system.\n * \n * Features:\n * - Converts mobile towers to repeater markers\n * - Preserves tower metadata (carrier, technology, frequency)\n * - Uses the same marker management approach as useMarkers\n * - Queries terrain elevation from the map for consistency\n */ \n\n\n\n\nfunction useTowerToMarker({ map, terrainLoaded }) {\n    const { markers, addMarker, updateMarker, removeMarker, defaultElevationOffsets } = (0,_context_MarkerContext__WEBPACK_IMPORTED_MODULE_2__.useMarkersContext)();\n    /**\n   * Helper to create a marker label element\n   */ const createMarkerLabel = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useTowerToMarker.useCallback[createMarkerLabel]\": (index, markerType)=>{\n            const el = document.createElement('div');\n            el.className = 'marker-label';\n            el.textContent = `${index + 1}`;\n            // Style the label based on marker type\n            el.style.cssText = `\n      position: absolute;\n      bottom: 0;\n      right: -5px;\n      width: 16px;\n      height: 16px;\n      background-color: white;\n      color: black;\n      border-radius: 50%;\n      text-align: center;\n      font-size: 10px;\n      font-weight: bold;\n      line-height: 16px;\n      border: 1px solid ${markerType === 'gcs' ? 'blue' : markerType === 'observer' ? 'green' : 'red'};\n    `;\n            return el;\n        }\n    }[\"useTowerToMarker.useCallback[createMarkerLabel]\"], []);\n    /**\n   * Query terrain elevation - matches the pattern in useMarkers\n   * This is crucial for consistency with other markers\n   */ const queryTerrainElevation = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useTowerToMarker.useCallback[queryTerrainElevation]\": async (coordinates, retryCount = 3)=>{\n            if (!map) {\n                throw new Error(\"Map not initialized\");\n            }\n            try {\n                const elevation = map.queryTerrainElevation(coordinates);\n                if (elevation !== null && elevation !== undefined) {\n                    return elevation;\n                }\n                throw new Error(\"Invalid elevation value\");\n            } catch (error) {\n                console.warn(\"Primary terrain query failed, trying fallback:\", error);\n                if (retryCount > 0) {\n                    try {\n                        const fallbackElevation = await fetchTerrainElevation(coordinates[0], coordinates[1]);\n                        return fallbackElevation;\n                    } catch (fallbackError) {\n                        if (retryCount > 1) {\n                            console.warn(\"Fallback failed, retrying:\", fallbackError);\n                            return queryTerrainElevation(coordinates, retryCount - 1);\n                        }\n                        throw fallbackError;\n                    }\n                }\n                throw error;\n            }\n        }\n    }[\"useTowerToMarker.useCallback[queryTerrainElevation]\"], [\n        map\n    ]);\n    /**\n   * Fallback function for elevation queries - copied from useMarkers\n   */ const fetchTerrainElevation = async (lng, lat)=>{\n        try {\n            const tileSize = 512;\n            const zoom = 15;\n            const scale = Math.pow(2, zoom);\n            const latRad = lat * Math.PI / 180;\n            const tileX = Math.floor((lng + 180) / 360 * scale);\n            const tileY = Math.floor((1 - Math.log(Math.tan(latRad) + 1 / Math.cos(latRad)) / Math.PI) / 2 * scale);\n            const pixelX = Math.floor(((lng + 180) / 360 * scale - tileX) * tileSize);\n            const pixelY = Math.floor(((1 - Math.log(Math.tan(latRad) + 1 / Math.cos(latRad)) / Math.PI) / 2 * scale - tileY) * tileSize);\n            const tileURL = `https://api.mapbox.com/v4/mapbox.terrain-rgb/${zoom}/${tileX}/${tileY}@2x.pngraw?access_token=${\"pk.eyJ1IjoiaW50ZWxhZXJvIiwiYSI6ImNtM2EwZzY3ODB5bDgyam9yOTZ1ajE2YWsifQ.b9w33legWjEDzezOZx1N4g\"}`;\n            const response = await fetch(tileURL);\n            const blob = await response.blob();\n            const imageBitmap = await createImageBitmap(blob);\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = tileSize;\n            canvas.height = tileSize;\n            const context = canvas.getContext(\"2d\");\n            if (!context) throw new Error(\"Failed to create canvas context\");\n            context.drawImage(imageBitmap, 0, 0);\n            const imageData = context.getImageData(0, 0, tileSize, tileSize);\n            const idx = (pixelY * tileSize + pixelX) * 4;\n            const [r, g, b] = [\n                imageData.data[idx],\n                imageData.data[idx + 1],\n                imageData.data[idx + 2]\n            ];\n            return -10000 + (r * 256 * 256 + g * 256 + b) * 0.1;\n        } catch (error) {\n            console.error(\"RGB elevation error:\", error);\n            return 0;\n        }\n    };\n    /**\n   * Converts a tower to a repeater marker\n   */ const convertTowerToRepeater = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useTowerToMarker.useCallback[convertTowerToRepeater]\": async (towerData)=>{\n            if (!map || !terrainLoaded) {\n                console.error('Map or terrain not initialized');\n                return false;\n            }\n            console.log('Converting tower to repeater:', towerData);\n            try {\n                // Query terrain elevation at tower location - this gets the map's ground elevation\n                const mapElevation = await queryTerrainElevation([\n                    towerData.lng,\n                    towerData.lat\n                ]);\n                console.log('Map terrain elevation at tower location:', mapElevation);\n                // Create location data from tower using the map's elevation\n                const location = {\n                    lng: towerData.lng,\n                    lat: towerData.lat,\n                    elevation: mapElevation\n                };\n                // Create tower metadata\n                const towerMetadata = {\n                    originalTowerId: towerData.id,\n                    carrier: towerData.carrier,\n                    technology: towerData.technology,\n                    frequency: towerData.frequency,\n                    height: towerData.height,\n                    azimuth: towerData.azimuth,\n                    tilt: towerData.tilt,\n                    eirp: towerData.eirp,\n                    eirp_unit: towerData.eirp_unit\n                };\n                // Add marker to context and check result for premium tier restrictions\n                const result = addMarker('repeater', location, towerMetadata);\n                // If failed due to premium tier restrictions, show error and return\n                if (!result.success) {\n                    console.error(`Failed to add repeater marker:`, result.error);\n                    return false;\n                }\n                // Get the marker ID\n                const markerId = result.markerId;\n                // Get markers of this type to determine index\n                const sameTypeMarkers = markers.filter({\n                    \"useTowerToMarker.useCallback[convertTowerToRepeater].sameTypeMarkers\": (m)=>m.type === 'repeater'\n                }[\"useTowerToMarker.useCallback[convertTowerToRepeater].sameTypeMarkers\"]);\n                const markerIndex = sameTypeMarkers.length - 1;\n                const hasMultiple = sameTypeMarkers.length > 1;\n                // Use the tower height as elevation offset\n                const elevationOffset = towerData.height || defaultElevationOffsets.repeater;\n                updateMarker(markerId, {\n                    elevationOffset\n                });\n                // Create the visual Mapbox marker with red color (for repeater)\n                const newMarker = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Marker)({\n                    color: \"red\",\n                    draggable: true,\n                    // Force high z-index to stay on top of other layers\n                    offset: [\n                        0,\n                        0\n                    ]\n                }).setLngLat([\n                    location.lng,\n                    location.lat\n                ]).addTo(map);\n                // Set high z-index to ensure visibility\n                const markerElement = newMarker.getElement();\n                markerElement.style.zIndex = '1000';\n                // Add label if multiple markers exist\n                if (hasMultiple) {\n                    // Create label element\n                    const label = createMarkerLabel(markerIndex, 'repeater');\n                    // Append label to marker element\n                    markerElement.appendChild(label);\n                }\n                // Create and set popup\n                const popup = (0,_components_Map_Utils_markerPopup__WEBPACK_IMPORTED_MODULE_3__.createMarkerPopup)('repeater', location.elevation, elevationOffset, {\n                    \"useTowerToMarker.useCallback[convertTowerToRepeater].popup\": ()=>{\n                        // Delete marker callback\n                        newMarker.remove();\n                        removeMarker(markerId);\n                    }\n                }[\"useTowerToMarker.useCallback[convertTowerToRepeater].popup\"], markerId, markerIndex, hasMultiple);\n                newMarker.setPopup(popup).togglePopup();\n                // Handle marker drag events - same as in useMarkers\n                newMarker.on(\"dragend\", {\n                    \"useTowerToMarker.useCallback[convertTowerToRepeater]\": async ()=>{\n                        const lngLat = newMarker.getLngLat();\n                        try {\n                            // Query new elevation at drag position\n                            const newElevation = await queryTerrainElevation([\n                                lngLat.lng,\n                                lngLat.lat\n                            ]);\n                            const updatedLocation = {\n                                lng: lngLat.lng,\n                                lat: lngLat.lat,\n                                elevation: newElevation\n                            };\n                            // Update marker in context\n                            updateMarker(markerId, {\n                                location: updatedLocation\n                            });\n                            // Get current markers of same type for indexing\n                            const currentSameTypeMarkers = markers.filter({\n                                \"useTowerToMarker.useCallback[convertTowerToRepeater].currentSameTypeMarkers\": (m)=>m.type === 'repeater'\n                            }[\"useTowerToMarker.useCallback[convertTowerToRepeater].currentSameTypeMarkers\"]);\n                            const currentMarkerIndex = currentSameTypeMarkers.findIndex({\n                                \"useTowerToMarker.useCallback[convertTowerToRepeater].currentMarkerIndex\": (m)=>m.id === markerId\n                            }[\"useTowerToMarker.useCallback[convertTowerToRepeater].currentMarkerIndex\"]);\n                            const hasMultipleNow = currentSameTypeMarkers.length > 1;\n                            // Recreate popup with updated elevation\n                            const newPopup = (0,_components_Map_Utils_markerPopup__WEBPACK_IMPORTED_MODULE_3__.createMarkerPopup)('repeater', newElevation, elevationOffset, {\n                                \"useTowerToMarker.useCallback[convertTowerToRepeater].newPopup\": ()=>{\n                                    newMarker.remove();\n                                    removeMarker(markerId);\n                                }\n                            }[\"useTowerToMarker.useCallback[convertTowerToRepeater].newPopup\"], markerId, currentMarkerIndex, hasMultipleNow);\n                            newMarker.setPopup(newPopup).togglePopup();\n                        } catch (error) {\n                            console.error(`Error updating repeater elevation:`, error);\n                        }\n                    }\n                }[\"useTowerToMarker.useCallback[convertTowerToRepeater]\"]);\n                // Track conversion event\n                (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_4__.trackEventWithForm)('convert_tower_to_repeater', {\n                    carrier: towerData.carrier,\n                    technology: towerData.technology,\n                    action: 'single_conversion'\n                });\n                console.log('Successfully created repeater from tower:', markerId);\n                return true;\n            } catch (error) {\n                console.error('Error converting tower to repeater:', error);\n                return false;\n            }\n        }\n    }[\"useTowerToMarker.useCallback[convertTowerToRepeater]\"], [\n        map,\n        terrainLoaded,\n        addMarker,\n        updateMarker,\n        removeMarker,\n        markers,\n        defaultElevationOffsets,\n        createMarkerLabel,\n        queryTerrainElevation\n    ]);\n    /**\n   * Listen for tower conversion events dispatched from tower popups\n   */ (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useTowerToMarker.useEffect\": ()=>{\n            const handleTowerConversion = {\n                \"useTowerToMarker.useEffect.handleTowerConversion\": (event)=>{\n                    // Process conversion request\n                    convertTowerToRepeater(event.detail);\n                }\n            }[\"useTowerToMarker.useEffect.handleTowerConversion\"];\n            // Add event listener\n            window.addEventListener('tower:createRepeater', handleTowerConversion);\n            // Cleanup\n            return ({\n                \"useTowerToMarker.useEffect\": ()=>{\n                    window.removeEventListener('tower:createRepeater', handleTowerConversion);\n                }\n            })[\"useTowerToMarker.useEffect\"];\n        }\n    }[\"useTowerToMarker.useEffect\"], [\n        convertTowerToRepeater\n    ]);\n    return {\n        convertTowerToRepeater\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2hvb2tzL3VzZVRvd2VyVG9NYXJrZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxvQ0FBb0M7QUFFcEM7Ozs7Ozs7Ozs7Ozs7Q0FhQyxHQUU4QztBQUNkO0FBQ3VEO0FBRWhCO0FBQ1c7QUE2QjVFLFNBQVNPLGlCQUFpQixFQUMvQkMsR0FBRyxFQUNIQyxhQUFhLEVBQ1M7SUFDdEIsTUFBTSxFQUNKQyxPQUFPLEVBQ1BDLFNBQVMsRUFDVEMsWUFBWSxFQUNaQyxZQUFZLEVBQ1pDLHVCQUF1QixFQUN4QixHQUFHWCx5RUFBaUJBO0lBRXJCOztHQUVDLEdBQ0QsTUFBTVksb0JBQW9CZixrREFBV0E7MkRBQUMsQ0FBQ2dCLE9BQWVDO1lBQ3BELE1BQU1DLEtBQUtDLFNBQVNDLGFBQWEsQ0FBQztZQUNsQ0YsR0FBR0csU0FBUyxHQUFHO1lBQ2ZILEdBQUdJLFdBQVcsR0FBRyxHQUFHTixRQUFRLEdBQUc7WUFFL0IsdUNBQXVDO1lBQ3ZDRSxHQUFHSyxLQUFLLENBQUNDLE9BQU8sR0FBRyxDQUFDOzs7Ozs7Ozs7Ozs7O3dCQWFBLEVBQUVQLGVBQWUsUUFBUSxTQUFTQSxlQUFlLGFBQWEsVUFBVSxNQUFNO0lBQ2xHLENBQUM7WUFFRCxPQUFPQztRQUNUOzBEQUFHLEVBQUU7SUFFTDs7O0dBR0MsR0FDRCxNQUFNTyx3QkFBd0J6QixrREFBV0E7K0RBQ3ZDLE9BQU8wQixhQUErQkMsYUFBYSxDQUFDO1lBQ2xELElBQUksQ0FBQ25CLEtBQUs7Z0JBQ1IsTUFBTSxJQUFJb0IsTUFBTTtZQUNsQjtZQUVBLElBQUk7Z0JBQ0YsTUFBTUMsWUFBWXJCLElBQUlpQixxQkFBcUIsQ0FBQ0M7Z0JBQzVDLElBQUlHLGNBQWMsUUFBUUEsY0FBY0MsV0FBVztvQkFDakQsT0FBT0Q7Z0JBQ1Q7Z0JBQ0EsTUFBTSxJQUFJRCxNQUFNO1lBQ2xCLEVBQUUsT0FBT0csT0FBTztnQkFDZEMsUUFBUUMsSUFBSSxDQUFDLGtEQUFrREY7Z0JBQy9ELElBQUlK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MUk7O0dBRUMsR0FDRHhCLGdEQUFTQTtzQ0FBQztZQUNSLE1BQU1nSTtvRUFBd0IsQ0FBQ0M7b0JBQzdCLDZCQUE2QjtvQkFDN0J0RCx1QkFBdUJzRCxNQUFNQyxNQUFNO2dCQUNyQzs7WUFFQSxxQkFBcUI7WUFDckJDLE9BQU9DLGdCQUFnQixDQUFDLHdCQUErQko7WUFFdkQsVUFBVTtZQUNWOzhDQUFPO29CQUNMRyxPQUFPRSxtQkFBbUIsQ0FBQyx3QkFBK0JMO2dCQUM1RDs7UUFDRjtxQ0FBRztRQUFDckQ7S0FBdUI7SUFFM0IsT0FBTztRQUNMQTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2hvb2tzL3VzZVRvd2VyVG9NYXJrZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2FwcC9ob29rcy91c2VUb3dlclRvTWFya2VyLnRzXG5cbi8qKlxuICogdXNlVG93ZXJUb01hcmtlci50c1xuICogXG4gKiBQdXJwb3NlOlxuICogUHJvdmlkZXMgZnVuY3Rpb25hbGl0eSB0byBjb252ZXJ0IG1vYmlsZSB0b3dlcnMgaW50byByZXBlYXRlciBtYXJrZXJzXG4gKiB3aXRoIHRvd2VyLXNwZWNpZmljIG1ldGFkYXRhIHByZXNlcnZlZC4gVGhpcyBob29rIGJyaWRnZXMgdGhlIGdhcCBiZXR3ZWVuXG4gKiB0aGUgdG93ZXIgZGlzcGxheSBzeXN0ZW0gYW5kIHRoZSBtYXJrZXIgbWFuYWdlbWVudCBzeXN0ZW0uXG4gKiBcbiAqIEZlYXR1cmVzOlxuICogLSBDb252ZXJ0cyBtb2JpbGUgdG93ZXJzIHRvIHJlcGVhdGVyIG1hcmtlcnNcbiAqIC0gUHJlc2VydmVzIHRvd2VyIG1ldGFkYXRhIChjYXJyaWVyLCB0ZWNobm9sb2d5LCBmcmVxdWVuY3kpXG4gKiAtIFVzZXMgdGhlIHNhbWUgbWFya2VyIG1hbmFnZW1lbnQgYXBwcm9hY2ggYXMgdXNlTWFya2Vyc1xuICogLSBRdWVyaWVzIHRlcnJhaW4gZWxldmF0aW9uIGZyb20gdGhlIG1hcCBmb3IgY29uc2lzdGVuY3lcbiAqL1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IG1hcGJveGdsIGZyb20gJ21hcGJveC1nbCc7XG5pbXBvcnQgeyB1c2VNYXJrZXJzQ29udGV4dCwgVG93ZXJNZXRhZGF0YSwgTWFya2VyVHlwZSB9IGZyb20gJy4uL2NvbnRleHQvTWFya2VyQ29udGV4dCc7XG5pbXBvcnQgeyBMb2NhdGlvbkRhdGEgfSBmcm9tICcuLi90eXBlcy9Mb2NhdGlvbkRhdGEnO1xuaW1wb3J0IHsgY3JlYXRlTWFya2VyUG9wdXAgfSBmcm9tICcuLi9jb21wb25lbnRzL01hcC9VdGlscy9tYXJrZXJQb3B1cCc7XG5pbXBvcnQgeyB0cmFja0V2ZW50V2l0aEZvcm0gYXMgdHJhY2tFdmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvdHJhY2tpbmcvdHJhY2tpbmcnO1xuXG4vLyBUaGlzIG5lZWRzIHRvIG1hdGNoIHRoZSBNYXJrZXJSZWYgaW50ZXJmYWNlIGluIHVzZU1hcmtlcnMudHNcbmludGVyZmFjZSBNYXJrZXJSZWYge1xuICBpZDogc3RyaW5nO1xuICBtYXJrZXI6IG1hcGJveGdsLk1hcmtlcjtcbiAgdHlwZTogTWFya2VyVHlwZTtcbn1cblxuaW50ZXJmYWNlIFRvd2VyRGF0YSB7XG4gIGlkPzogc3RyaW5nO1xuICBsbmc6IG51bWJlcjtcbiAgbGF0OiBudW1iZXI7XG4gIGVsZXZhdGlvbjogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgY2Fycmllcj86IHN0cmluZztcbiAgdGVjaG5vbG9neT86IHN0cmluZztcbiAgZnJlcXVlbmN5Pzogc3RyaW5nO1xuICBhemltdXRoPzogbnVtYmVyO1xuICB0aWx0PzogbnVtYmVyO1xuICBlaXJwPzogbnVtYmVyO1xuICBlaXJwX3VuaXQ/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBVc2VUb3dlclRvTWFya2VyUHJvcHMge1xuICBtYXA6IG1hcGJveGdsLk1hcCB8IG51bGw7XG4gIHRlcnJhaW5Mb2FkZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VUb3dlclRvTWFya2VyKHsgXG4gIG1hcCwgXG4gIHRlcnJhaW5Mb2FkZWRcbn06IFVzZVRvd2VyVG9NYXJrZXJQcm9wcykge1xuICBjb25zdCB7XG4gICAgbWFya2VycyxcbiAgICBhZGRNYXJrZXIsXG4gICAgdXBkYXRlTWFya2VyLFxuICAgIHJlbW92ZU1hcmtlcixcbiAgICBkZWZhdWx0RWxldmF0aW9uT2Zmc2V0c1xuICB9ID0gdXNlTWFya2Vyc0NvbnRleHQoKTtcblxuICAvKipcbiAgICogSGVscGVyIHRvIGNyZWF0ZSBhIG1hcmtlciBsYWJlbCBlbGVtZW50XG4gICAqL1xuICBjb25zdCBjcmVhdGVNYXJrZXJMYWJlbCA9IHVzZUNhbGxiYWNrKChpbmRleDogbnVtYmVyLCBtYXJrZXJUeXBlOiBNYXJrZXJUeXBlKTogSFRNTEVsZW1lbnQgPT4ge1xuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWwuY2xhc3NOYW1lID0gJ21hcmtlci1sYWJlbCc7XG4gICAgZWwudGV4dENvbnRlbnQgPSBgJHtpbmRleCArIDF9YDtcbiAgICBcbiAgICAvLyBTdHlsZSB0aGUgbGFiZWwgYmFzZWQgb24gbWFya2VyIHR5cGVcbiAgICBlbC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgYm90dG9tOiAwO1xuICAgICAgcmlnaHQ6IC01cHg7XG4gICAgICB3aWR0aDogMTZweDtcbiAgICAgIGhlaWdodDogMTZweDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgICAgY29sb3I6IGJsYWNrO1xuICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICR7bWFya2VyVHlwZSA9PT0gJ2djcycgPyAnYmx1ZScgOiBtYXJrZXJUeXBlID09PSAnb2JzZXJ2ZXInID8gJ2dyZWVuJyA6ICdyZWQnfTtcbiAgICBgO1xuICAgIFxuICAgIHJldHVybiBlbDtcbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiBRdWVyeSB0ZXJyYWluIGVsZXZhdGlvbiAtIG1hdGNoZXMgdGhlIHBhdHRlcm4gaW4gdXNlTWFya2Vyc1xuICAgKiBUaGlzIGlzIGNydWNpYWwgZm9yIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgbWFya2Vyc1xuICAgKi9cbiAgY29uc3QgcXVlcnlUZXJyYWluRWxldmF0aW9uID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKGNvb3JkaW5hdGVzOiBbbnVtYmVyLCBudW1iZXJdLCByZXRyeUNvdW50ID0gMyk6IFByb21pc2U8bnVtYmVyPiA9PiB7XG4gICAgICBpZiAoIW1hcCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYXAgbm90IGluaXRpYWxpemVkXCIpO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBlbGV2YXRpb24gPSBtYXAucXVlcnlUZXJyYWluRWxldmF0aW9uKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgaWYgKGVsZXZhdGlvbiAhPT0gbnVsbCAmJiBlbGV2YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybiBlbGV2YXRpb247XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBlbGV2YXRpb24gdmFsdWVcIik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJQcmltYXJ5IHRlcnJhaW4gcXVlcnkgZmFpbGVkLCB0cnlpbmcgZmFsbGJhY2s6XCIsIGVycm9yKTtcbiAgICAgICAgaWYgKHJldHJ5Q291bnQgPiAwKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrRWxldmF0aW9uID0gYXdhaXQgZmV0Y2hUZXJyYWluRWxldmF0aW9uKFxuICAgICAgICAgICAgICBjb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgICAgY29vcmRpbmF0ZXNbMV1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gZmFsbGJhY2tFbGV2YXRpb247XG4gICAgICAgICAgfSBjYXRjaCAoZmFsbGJhY2tFcnJvcikge1xuICAgICAgICAgICAgaWYgKHJldHJ5Q291bnQgPiAxKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhbGxiYWNrIGZhaWxlZCwgcmV0cnlpbmc6XCIsIGZhbGxiYWNrRXJyb3IpO1xuICAgICAgICAgICAgICByZXR1cm4gcXVlcnlUZXJyYWluRWxldmF0aW9uKGNvb3JkaW5hdGVzLCByZXRyeUNvdW50IC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBmYWxsYmFja0Vycm9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9LFxuICAgIFttYXBdXG4gICk7XG5cbiAgLyoqXG4gICAqIEZhbGxiYWNrIGZ1bmN0aW9uIGZvciBlbGV2YXRpb24gcXVlcmllcyAtIGNvcGllZCBmcm9tIHVzZU1hcmtlcnNcbiAgICovXG4gIGNvbnN0IGZldGNoVGVycmFpbkVsZXZhdGlvbiA9IGFzeW5jIChcbiAgICBsbmc6IG51bWJlcixcbiAgICBsYXQ6IG51bWJlclxuICApOiBQcm9taXNlPG51bWJlcj4gPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0aWxlU2l6ZSA9IDUxMjtcbiAgICAgIGNvbnN0IHpvb20gPSAxNTtcbiAgICAgIGNvbnN0IHNjYWxlID0gTWF0aC5wb3coMiwgem9vbSk7XG4gICAgICBjb25zdCBsYXRSYWQgPSAobGF0ICogTWF0aC5QSSkgLyAxODA7XG4gICAgICBjb25zdCB0aWxlWCA9IE1hdGguZmxvb3IoKChsbmcgKyAxODApIC8gMzYwKSAqIHNjYWxlKTtcbiAgICAgIGNvbnN0IHRpbGVZID0gTWF0aC5mbG9vcihcbiAgICAgICAgKCgxIC0gTWF0aC5sb2coTWF0aC50YW4obGF0UmFkKSArIDEgLyBNYXRoLmNvcyhsYXRSYWQpKSAvIE1hdGguUEkpIC8gMikgKiBzY2FsZVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHBpeGVsWCA9IE1hdGguZmxvb3IoKCgobG5nICsgMTgwKSAvIDM2MCkgKiBzY2FsZSAtIHRpbGVYKSAqIHRpbGVTaXplKTtcbiAgICAgIGNvbnN0IHBpeGVsWSA9IE1hdGguZmxvb3IoXG4gICAgICAgICgoKCgxIC0gTWF0aC5sb2coTWF0aC50YW4obGF0UmFkKSArIDEgLyBNYXRoLmNvcyhsYXRSYWQpKSAvIE1hdGguUEkpIC8gMikgKlxuICAgICAgICAgIHNjYWxlIC1cbiAgICAgICAgICB0aWxlWSkgKlxuICAgICAgICAgIHRpbGVTaXplKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRpbGVVUkwgPSBgaHR0cHM6Ly9hcGkubWFwYm94LmNvbS92NC9tYXBib3gudGVycmFpbi1yZ2IvJHt6b29tfS8ke3RpbGVYfS8ke3RpbGVZfUAyeC5wbmdyYXc/YWNjZXNzX3Rva2VuPSR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfTUFQQk9YX0FDQ0VTU19UT0tFTn1gO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aWxlVVJMKTtcbiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICBjb25zdCBpbWFnZUJpdG1hcCA9IGF3YWl0IGNyZWF0ZUltYWdlQml0bWFwKGJsb2IpO1xuICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgIGNhbnZhcy53aWR0aCA9IHRpbGVTaXplO1xuICAgICAgY2FudmFzLmhlaWdodCA9IHRpbGVTaXplO1xuICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICBpZiAoIWNvbnRleHQpIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgY2FudmFzIGNvbnRleHRcIik7XG4gICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZUJpdG1hcCwgMCwgMCk7XG4gICAgICBjb25zdCBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB0aWxlU2l6ZSwgdGlsZVNpemUpO1xuICAgICAgY29uc3QgaWR4ID0gKHBpeGVsWSAqIHRpbGVTaXplICsgcGl4ZWxYKSAqIDQ7XG4gICAgICBjb25zdCBbciwgZywgYl0gPSBbXG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2lkeF0sXG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2lkeCArIDFdLFxuICAgICAgICBpbWFnZURhdGEuZGF0YVtpZHggKyAyXSxcbiAgICAgIF07XG4gICAgICByZXR1cm4gLTEwMDAwICsgKHIgKiAyNTYgKiAyNTYgKyBnICogMjU2ICsgYikgKiAwLjE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJSR0IgZWxldmF0aW9uIGVycm9yOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGEgdG93ZXIgdG8gYSByZXBlYXRlciBtYXJrZXJcbiAgICovXG4gIGNvbnN0IGNvbnZlcnRUb3dlclRvUmVwZWF0ZXIgPSB1c2VDYWxsYmFjayhhc3luYyAodG93ZXJEYXRhOiBUb3dlckRhdGEpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICBpZiAoIW1hcCB8fCAhdGVycmFpbkxvYWRlZCkge1xuICAgICAgY29uc29sZS5lcnJvcignTWFwIG9yIHRlcnJhaW4gbm90IGluaXRpYWxpemVkJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdDb252ZXJ0aW5nIHRvd2VyIHRvIHJlcGVhdGVyOicsIHRvd2VyRGF0YSk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIFF1ZXJ5IHRlcnJhaW4gZWxldmF0aW9uIGF0IHRvd2VyIGxvY2F0aW9uIC0gdGhpcyBnZXRzIHRoZSBtYXAncyBncm91bmQgZWxldmF0aW9uXG4gICAgICBjb25zdCBtYXBFbGV2YXRpb24gPSBhd2FpdCBxdWVyeVRlcnJhaW5FbGV2YXRpb24oW3Rvd2VyRGF0YS5sbmcsIHRvd2VyRGF0YS5sYXRdKTtcbiAgICAgIGNvbnNvbGUubG9nKCdNYXAgdGVycmFpbiBlbGV2YXRpb24gYXQgdG93ZXIgbG9jYXRpb246JywgbWFwRWxldmF0aW9uKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGxvY2F0aW9uIGRhdGEgZnJvbSB0b3dlciB1c2luZyB0aGUgbWFwJ3MgZWxldmF0aW9uXG4gICAgICBjb25zdCBsb2NhdGlvbjogTG9jYXRpb25EYXRhID0ge1xuICAgICAgICBsbmc6IHRvd2VyRGF0YS5sbmcsXG4gICAgICAgIGxhdDogdG93ZXJEYXRhLmxhdCxcbiAgICAgICAgZWxldmF0aW9uOiBtYXBFbGV2YXRpb24sIC8vIFVzZSBtYXAgZWxldmF0aW9uLCBub3QgdG93ZXIuZWxldmF0aW9uXG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgdG93ZXIgbWV0YWRhdGFcbiAgICAgIGNvbnN0IHRvd2VyTWV0YWRhdGE6IFRvd2VyTWV0YWRhdGEgPSB7XG4gICAgICAgIG9yaWdpbmFsVG93ZXJJZDogdG93ZXJEYXRhLmlkLFxuICAgICAgICBjYXJyaWVyOiB0b3dlckRhdGEuY2FycmllcixcbiAgICAgICAgdGVjaG5vbG9neTogdG93ZXJEYXRhLnRlY2hub2xvZ3ksXG4gICAgICAgIGZyZXF1ZW5jeTogdG93ZXJEYXRhLmZyZXF1ZW5jeSxcbiAgICAgICAgaGVpZ2h0OiB0b3dlckRhdGEuaGVpZ2h0LFxuICAgICAgICBhemltdXRoOiB0b3dlckRhdGEuYXppbXV0aCxcbiAgICAgICAgdGlsdDogdG93ZXJEYXRhLnRpbHQsXG4gICAgICAgIGVpcnA6IHRvd2VyRGF0YS5laXJwLFxuICAgICAgICBlaXJwX3VuaXQ6IHRvd2VyRGF0YS5laXJwX3VuaXRcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIEFkZCBtYXJrZXIgdG8gY29udGV4dCBhbmQgY2hlY2sgcmVzdWx0IGZvciBwcmVtaXVtIHRpZXIgcmVzdHJpY3Rpb25zXG4gICAgICBjb25zdCByZXN1bHQgPSBhZGRNYXJrZXIoJ3JlcGVhdGVyJywgbG9jYXRpb24sIHRvd2VyTWV0YWRhdGEpO1xuICAgICAgXG4gICAgICAvLyBJZiBmYWlsZWQgZHVlIHRvIHByZW1pdW0gdGllciByZXN0cmljdGlvbnMsIHNob3cgZXJyb3IgYW5kIHJldHVyblxuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gYWRkIHJlcGVhdGVyIG1hcmtlcjpgLCByZXN1bHQuZXJyb3IpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdldCB0aGUgbWFya2VyIElEXG4gICAgICBjb25zdCBtYXJrZXJJZCA9IHJlc3VsdC5tYXJrZXJJZCBhcyBzdHJpbmc7XG4gICAgICBcbiAgICAgIC8vIEdldCBtYXJrZXJzIG9mIHRoaXMgdHlwZSB0byBkZXRlcm1pbmUgaW5kZXhcbiAgICAgIGNvbnN0IHNhbWVUeXBlTWFya2VycyA9IG1hcmtlcnMuZmlsdGVyKG0gPT4gbS50eXBlID09PSAncmVwZWF0ZXInKTtcbiAgICAgIGNvbnN0IG1hcmtlckluZGV4ID0gc2FtZVR5cGVNYXJrZXJzLmxlbmd0aCAtIDE7XG4gICAgICBjb25zdCBoYXNNdWx0aXBsZSA9IHNhbWVUeXBlTWFya2Vycy5sZW5ndGggPiAxO1xuICAgICAgXG4gICAgICAvLyBVc2UgdGhlIHRvd2VyIGhlaWdodCBhcyBlbGV2YXRpb24gb2Zmc2V0XG4gICAgICBjb25zdCBlbGV2YXRpb25PZmZzZXQgPSB0b3dlckRhdGEuaGVpZ2h0IHx8IGRlZmF1bHRFbGV2YXRpb25PZmZzZXRzLnJlcGVhdGVyO1xuICAgICAgdXBkYXRlTWFya2VyKG1hcmtlcklkLCB7IGVsZXZhdGlvbk9mZnNldCB9KTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHRoZSB2aXN1YWwgTWFwYm94IG1hcmtlciB3aXRoIHJlZCBjb2xvciAoZm9yIHJlcGVhdGVyKVxuICAgICAgY29uc3QgbmV3TWFya2VyID0gbmV3IG1hcGJveGdsLk1hcmtlcih7IFxuICAgICAgICBjb2xvcjogXCJyZWRcIiwgXG4gICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgICAgLy8gRm9yY2UgaGlnaCB6LWluZGV4IHRvIHN0YXkgb24gdG9wIG9mIG90aGVyIGxheWVyc1xuICAgICAgICBvZmZzZXQ6IFswLCAwXVxuICAgICAgfSkuc2V0TG5nTGF0KFtsb2NhdGlvbi5sbmcsIGxvY2F0aW9uLmxhdF0pLmFkZFRvKG1hcCk7XG4gICAgICBcbiAgICAgIC8vIFNldCBoaWdoIHotaW5kZXggdG8gZW5zdXJlIHZpc2liaWxpdHlcbiAgICAgIGNvbnN0IG1hcmtlckVsZW1lbnQgPSBuZXdNYXJrZXIuZ2V0RWxlbWVudCgpO1xuICAgICAgbWFya2VyRWxlbWVudC5zdHlsZS56SW5kZXggPSAnMTAwMCc7XG4gICAgICBcbiAgICAgIC8vIEFkZCBsYWJlbCBpZiBtdWx0aXBsZSBtYXJrZXJzIGV4aXN0XG4gICAgICBpZiAoaGFzTXVsdGlwbGUpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGxhYmVsIGVsZW1lbnRcbiAgICAgICAgY29uc3QgbGFiZWwgPSBjcmVhdGVNYXJrZXJMYWJlbChtYXJrZXJJbmRleCwgJ3JlcGVhdGVyJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBBcHBlbmQgbGFiZWwgdG8gbWFya2VyIGVsZW1lbnRcbiAgICAgICAgbWFya2VyRWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBhbmQgc2V0IHBvcHVwXG4gICAgICBjb25zdCBwb3B1cCA9IGNyZWF0ZU1hcmtlclBvcHVwKFxuICAgICAgICAncmVwZWF0ZXInLFxuICAgICAgICBsb2NhdGlvbi5lbGV2YXRpb24sIC8vIE1hcCBlbGV2YXRpb25cbiAgICAgICAgZWxldmF0aW9uT2Zmc2V0LCAgICAvLyBUb3dlciBoZWlnaHRcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIC8vIERlbGV0ZSBtYXJrZXIgY2FsbGJhY2tcbiAgICAgICAgICBuZXdNYXJrZXIucmVtb3ZlKCk7XG4gICAgICAgICAgcmVtb3ZlTWFya2VyKG1hcmtlcklkKTtcbiAgICAgICAgfSxcbiAgICAgICAgbWFya2VySWQsXG4gICAgICAgIG1hcmtlckluZGV4LFxuICAgICAgICBoYXNNdWx0aXBsZVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgbmV3TWFya2VyLnNldFBvcHVwKHBvcHVwKS50b2dnbGVQb3B1cCgpO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgbWFya2VyIGRyYWcgZXZlbnRzIC0gc2FtZSBhcyBpbiB1c2VNYXJrZXJzXG4gICAgICBuZXdNYXJrZXIub24oXCJkcmFnZW5kXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgbG5nTGF0ID0gbmV3TWFya2VyLmdldExuZ0xhdCgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFF1ZXJ5IG5ldyBlbGV2YXRpb24gYXQgZHJhZyBwb3NpdGlvblxuICAgICAgICAgIGNvbnN0IG5ld0VsZXZhdGlvbiA9IGF3YWl0IHF1ZXJ5VGVycmFpbkVsZXZhdGlvbihbbG5nTGF0LmxuZywgbG5nTGF0LmxhdF0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRMb2NhdGlvbjogTG9jYXRpb25EYXRhID0ge1xuICAgICAgICAgICAgbG5nOiBsbmdMYXQubG5nLFxuICAgICAgICAgICAgbGF0OiBsbmdMYXQubGF0LFxuICAgICAgICAgICAgZWxldmF0aW9uOiBuZXdFbGV2YXRpb24sXG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVcGRhdGUgbWFya2VyIGluIGNvbnRleHRcbiAgICAgICAgICB1cGRhdGVNYXJrZXIobWFya2VySWQsIHsgbG9jYXRpb246IHVwZGF0ZWRMb2NhdGlvbiB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBHZXQgY3VycmVudCBtYXJrZXJzIG9mIHNhbWUgdHlwZSBmb3IgaW5kZXhpbmdcbiAgICAgICAgICBjb25zdCBjdXJyZW50U2FtZVR5cGVNYXJrZXJzID0gbWFya2Vycy5maWx0ZXIobSA9PiBtLnR5cGUgPT09ICdyZXBlYXRlcicpO1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRNYXJrZXJJbmRleCA9IGN1cnJlbnRTYW1lVHlwZU1hcmtlcnMuZmluZEluZGV4KG0gPT4gbS5pZCA9PT0gbWFya2VySWQpO1xuICAgICAgICAgIGNvbnN0IGhhc011bHRpcGxlTm93ID0gY3VycmVudFNhbWVUeXBlTWFya2Vycy5sZW5ndGggPiAxO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFJlY3JlYXRlIHBvcHVwIHdpdGggdXBkYXRlZCBlbGV2YXRpb25cbiAgICAgICAgICBjb25zdCBuZXdQb3B1cCA9IGNyZWF0ZU1hcmtlclBvcHVwKFxuICAgICAgICAgICAgJ3JlcGVhdGVyJyxcbiAgICAgICAgICAgIG5ld0VsZXZhdGlvbixcbiAgICAgICAgICAgIGVsZXZhdGlvbk9mZnNldCxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgbmV3TWFya2VyLnJlbW92ZSgpO1xuICAgICAgICAgICAgICByZW1vdmVNYXJrZXIobWFya2VySWQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1hcmtlcklkLFxuICAgICAgICAgICAgY3VycmVudE1hcmtlckluZGV4LFxuICAgICAgICAgICAgaGFzTXVsdGlwbGVOb3dcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIG5ld01hcmtlci5zZXRQb3B1cChuZXdQb3B1cCkudG9nZ2xlUG9wdXAoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciB1cGRhdGluZyByZXBlYXRlciBlbGV2YXRpb246YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gVHJhY2sgY29udmVyc2lvbiBldmVudFxuICAgICAgdHJhY2tFdmVudCgnY29udmVydF90b3dlcl90b19yZXBlYXRlcicsIHtcbiAgICAgICAgY2FycmllcjogdG93ZXJEYXRhLmNhcnJpZXIsXG4gICAgICAgIHRlY2hub2xvZ3k6IHRvd2VyRGF0YS50ZWNobm9sb2d5LFxuICAgICAgICBhY3Rpb246ICdzaW5nbGVfY29udmVyc2lvbidcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGNyZWF0ZWQgcmVwZWF0ZXIgZnJvbSB0b3dlcjonLCBtYXJrZXJJZCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY29udmVydGluZyB0b3dlciB0byByZXBlYXRlcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCBbbWFwLCB0ZXJyYWluTG9hZGVkLCBhZGRNYXJrZXIsIHVwZGF0ZU1hcmtlciwgcmVtb3ZlTWFya2VyLCBtYXJrZXJzLCBkZWZhdWx0RWxldmF0aW9uT2Zmc2V0cywgY3JlYXRlTWFya2VyTGFiZWwsIHF1ZXJ5VGVycmFpbkVsZXZhdGlvbl0pO1xuXG4gIC8qKlxuICAgKiBMaXN0ZW4gZm9yIHRvd2VyIGNvbnZlcnNpb24gZXZlbnRzIGRpc3BhdGNoZWQgZnJvbSB0b3dlciBwb3B1cHNcbiAgICovXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlVG93ZXJDb252ZXJzaW9uID0gKGV2ZW50OiBDdXN0b21FdmVudDxUb3dlckRhdGE+KSA9PiB7XG4gICAgICAvLyBQcm9jZXNzIGNvbnZlcnNpb24gcmVxdWVzdFxuICAgICAgY29udmVydFRvd2VyVG9SZXBlYXRlcihldmVudC5kZXRhaWwpO1xuICAgIH07XG4gICAgXG4gICAgLy8gQWRkIGV2ZW50IGxpc3RlbmVyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rvd2VyOmNyZWF0ZVJlcGVhdGVyJyBhcyBhbnksIGhhbmRsZVRvd2VyQ29udmVyc2lvbiBhcyBFdmVudExpc3RlbmVyKTtcbiAgICBcbiAgICAvLyBDbGVhbnVwXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3dlcjpjcmVhdGVSZXBlYXRlcicgYXMgYW55LCBoYW5kbGVUb3dlckNvbnZlcnNpb24gYXMgRXZlbnRMaXN0ZW5lcik7XG4gICAgfTtcbiAgfSwgW2NvbnZlcnRUb3dlclRvUmVwZWF0ZXJdKTtcblxuICByZXR1cm4ge1xuICAgIGNvbnZlcnRUb3dlclRvUmVwZWF0ZXJcbiAgfTtcbn0iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJtYXBib3hnbCIsInVzZU1hcmtlcnNDb250ZXh0IiwiY3JlYXRlTWFya2VyUG9wdXAiLCJ0cmFja0V2ZW50V2l0aEZvcm0iLCJ0cmFja0V2ZW50IiwidXNlVG93ZXJUb01hcmtlciIsIm1hcCIsInRlcnJhaW5Mb2FkZWQiLCJtYXJrZXJzIiwiYWRkTWFya2VyIiwidXBkYXRlTWFya2VyIiwicmVtb3ZlTWFya2VyIiwiZGVmYXVsdEVsZXZhdGlvbk9mZnNldHMiLCJjcmVhdGVNYXJrZXJMYWJlbCIsImluZGV4IiwibWFya2VyVHlwZSIsImVsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwidGV4dENvbnRlbnQiLCJzdHlsZSIsImNzc1RleHQiLCJxdWVyeVRlcnJhaW5FbGV2YXRpb24iLCJjb29yZGluYXRlcyIsInJldHJ5Q291bnQiLCJFcnJvciIsImVsZXZhdGlvbiIsInVuZGVmaW5lZCIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJmYWxsYmFja0VsZXZhdGlvbiIsImZldGNoVGVycmFpbkVsZXZhdGlvbiIsImZhbGxiYWNrRXJyb3IiLCJsbmciLCJsYXQiLCJ0aWxlU2l6ZSIsInpvb20iLCJzY2FsZSIsIk1hdGgiLCJwb3ciLCJsYXRSYWQiLCJQSSIsInRpbGVYIiwiZmxvb3IiLCJ0aWxlWSIsImxvZyIsInRhbiIsImNvcyIsInBpeGVsWCIsInBpeGVsWSIsInRpbGVVUkwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfTUFQQk9YX0FDQ0VTU19UT0tFTiIsInJlc3BvbnNlIiwiZmV0Y2giLCJibG9iIiwiaW1hZ2VCaXRtYXAiLCJjcmVhdGVJbWFnZUJpdG1hcCIsImNhbnZhcyIsIndpZHRoIiwiaGVpZ2h0IiwiY29udGV4dCIsImdldENvbnRleHQiLCJkcmF3SW1hZ2UiLCJpbWFnZURhdGEiLCJnZXRJbWFnZURhdGEiLCJpZHgiLCJyIiwiZyIsImIiLCJkYXRhIiwiY29udmVydFRvd2VyVG9SZXBlYXRlciIsInRvd2VyRGF0YSIsIm1hcEVsZXZhdGlvbiIsImxvY2F0aW9uIiwidG93ZXJNZXRhZGF0YSIsIm9yaWdpbmFsVG93ZXJJZCIsImlkIiwiY2FycmllciIsInRlY2hub2xvZ3kiLCJmcmVxdWVuY3kiLCJhemltdXRoIiwidGlsdCIsImVpcnAiLCJlaXJwX3VuaXQiLCJyZXN1bHQiLCJzdWNjZXNzIiwibWFya2VySWQiLCJzYW1lVHlwZU1hcmtlcnMiLCJmaWx0ZXIiLCJtIiwidHlwZSIsIm1hcmtlckluZGV4IiwibGVuZ3RoIiwiaGFzTXVsdGlwbGUiLCJlbGV2YXRpb25PZmZzZXQiLCJyZXBlYXRlciIsIm5ld01hcmtlciIsIk1hcmtlciIsImNvbG9yIiwiZHJhZ2dhYmxlIiwib2Zmc2V0Iiwic2V0TG5nTGF0IiwiYWRkVG8iLCJtYXJrZXJFbGVtZW50IiwiZ2V0RWxlbWVudCIsInpJbmRleCIsImxhYmVsIiwiYXBwZW5kQ2hpbGQiLCJwb3B1cCIsInJlbW92ZSIsInNldFBvcHVwIiwidG9nZ2xlUG9wdXAiLCJvbiIsImxuZ0xhdCIsImdldExuZ0xhdCIsIm5ld0VsZXZhdGlvbiIsInVwZGF0ZWRMb2NhdGlvbiIsImN1cnJlbnRTYW1lVHlwZU1hcmtlcnMiLCJjdXJyZW50TWFya2VySW5kZXgiLCJmaW5kSW5kZXgiLCJoYXNNdWx0aXBsZU5vdyIsIm5ld1BvcHVwIiwiYWN0aW9uIiwiaGFuZGxlVG93ZXJDb252ZXJzaW9uIiwiZXZlbnQiLCJkZXRhaWwiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/hooks/useTowerToMarker.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/hooks/useTreeHeights.ts":
/*!*****************************************!*\
  !*** ./src/app/hooks/useTreeHeights.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useTreeHeights: () => (/* binding */ useTreeHeights)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../context/AreaOfOpsContext */ \"(ssr)/./src/app/context/AreaOfOpsContext.tsx\");\n/* harmony import */ var _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/LayerManager */ \"(ssr)/./src/app/services/LayerManager.ts\");\n/* harmony import */ var _services_TreeHeightSystem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/TreeHeightSystem */ \"(ssr)/./src/app/services/TreeHeightSystem.tsx\");\n/* harmony import */ var _services_TreeHeightCanvas__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services/TreeHeightCanvas */ \"(ssr)/./src/app/services/TreeHeightCanvas.tsx\");\n/**\n * useTreeHeights.ts\n * \n * Purpose:\n * React hook that integrates the tree height visualization system with Mapbox.\n * Uses LAZY INITIALIZATION - systems only initialize when user first activates them.\n * \n * This hook:\n * - Manages tree height visibility state\n * - Provides toggle functionality for UI components\n * - Handles click interactions with subtle tooltip\n * - Coordinates with Area of Operations boundaries\n * - Manages canvas lifecycle and cleanup\n * - Integrates with LayerManager for state tracking\n * \n * Related Files:\n * - TreeHeightSystem.ts: Core rendering and tile management\n * - TreeHeightCanvas.ts: Canvas DOM management\n * - AreaOfOpsContext.tsx: AO boundary integration\n * - LayerManager.ts: Layer state management\n */ \n\n\n\n\nfunction useTreeHeights(map) {\n    // State management\n    const treeHeightVisibleRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const isRenderingRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const renderTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const [isInitialized, setIsInitialized] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Lazy initialization refs - systems only created when needed\n    const systemsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        canvas: null,\n        systemInitialized: false\n    });\n    const { aoGeometry } = (0,_context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_1__.useAreaOfOpsContext)();\n    // Check if point is within Area of Operations\n    const isPointInAO = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useTreeHeights.useCallback[isPointInAO]\": (lng, lat)=>{\n            if (!aoGeometry || !aoGeometry.features || aoGeometry.features.length === 0) {\n                return true;\n            }\n            try {\n                let minLng = Infinity, maxLng = -Infinity;\n                let minLat = Infinity, maxLat = -Infinity;\n                aoGeometry.features.forEach({\n                    \"useTreeHeights.useCallback[isPointInAO]\": (feature)=>{\n                        if (feature.geometry.type === 'Polygon') {\n                            feature.geometry.coordinates[0].forEach({\n                                \"useTreeHeights.useCallback[isPointInAO]\": (coord)=>{\n                                    minLng = Math.min(minLng, coord[0]);\n                                    maxLng = Math.max(maxLng, coord[0]);\n                                    minLat = Math.min(minLat, coord[1]);\n                                    maxLat = Math.max(maxLat, coord[1]);\n                                }\n                            }[\"useTreeHeights.useCallback[isPointInAO]\"]);\n                        }\n                    }\n                }[\"useTreeHeights.useCallback[isPointInAO]\"]);\n                return lng >= minLng && lng <= maxLng && lat >= minLat && lat <= maxLat;\n            } catch (error) {\n                console.warn('Error checking point in AO:', error);\n                return true;\n            }\n        }\n    }[\"useTreeHeights.useCallback[isPointInAO]\"], [\n        aoGeometry\n    ]);\n    // Lazy initialization - only create systems when first needed\n    const ensureSystemsInitialized = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useTreeHeights.useCallback[ensureSystemsInitialized]\": ()=>{\n            if (!map || systemsRef.current.systemInitialized) return;\n            _services_TreeHeightSystem__WEBPACK_IMPORTED_MODULE_3__.treeHeightSystem.initialize(map);\n            systemsRef.current.canvas = new _services_TreeHeightCanvas__WEBPACK_IMPORTED_MODULE_4__.TreeHeightCanvas(map);\n            systemsRef.current.systemInitialized = true;\n        }\n    }[\"useTreeHeights.useCallback[ensureSystemsInitialized]\"], [\n        map\n    ]);\n    // Debounced render function\n    const triggerRender = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useTreeHeights.useCallback[triggerRender]\": ()=>{\n            if (!map || !treeHeightVisibleRef.current || isRenderingRef.current) return;\n            if (renderTimeoutRef.current) {\n                clearTimeout(renderTimeoutRef.current);\n            }\n            renderTimeoutRef.current = setTimeout({\n                \"useTreeHeights.useCallback[triggerRender]\": async ()=>{\n                    if (!treeHeightVisibleRef.current || isRenderingRef.current) return;\n                    isRenderingRef.current = true;\n                    try {\n                        await _services_TreeHeightSystem__WEBPACK_IMPORTED_MODULE_3__.treeHeightSystem.renderTreeHeights({\n                            isPointInAO,\n                            onProgress: {\n                                \"useTreeHeights.useCallback[triggerRender]\": (progress)=>{\n                                // Optional: Log progress for debugging\n                                }\n                            }[\"useTreeHeights.useCallback[triggerRender]\"]\n                        });\n                    } catch (error) {\n                        console.error(\"Tree height render error:\", error);\n                    } finally{\n                        isRenderingRef.current = false;\n                    }\n                }\n            }[\"useTreeHeights.useCallback[triggerRender]\"], 300);\n        }\n    }[\"useTreeHeights.useCallback[triggerRender]\"], [\n        map,\n        isPointInAO\n    ]);\n    // Lightweight initialization - only register layer capability\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useTreeHeights.useEffect\": ()=>{\n            if (!map) return;\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.registerLayer(\"tree-height-raster\", false);\n            setIsInitialized(true);\n            return ({\n                \"useTreeHeights.useEffect\": ()=>{\n                    if (systemsRef.current.canvas) {\n                        systemsRef.current.canvas.destroy();\n                        systemsRef.current.canvas = null;\n                    }\n                    if (systemsRef.current.systemInitialized) {\n                        _services_TreeHeightSystem__WEBPACK_IMPORTED_MODULE_3__.treeHeightSystem.cleanup();\n                        systemsRef.current.systemInitialized = false;\n                    }\n                    setIsInitialized(false);\n                }\n            })[\"useTreeHeights.useEffect\"];\n        }\n    }[\"useTreeHeights.useEffect\"], [\n        map\n    ]);\n    // Toggle tree heights visibility\n    const toggleTreeHeights = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useTreeHeights.useCallback[toggleTreeHeights]\": ()=>{\n            if (!map) {\n                console.warn(\"Map not available\");\n                return;\n            }\n            // Lazy initialization on first use\n            ensureSystemsInitialized();\n            if (!systemsRef.current.canvas) {\n                console.error(\"Failed to initialize tree height systems\");\n                return;\n            }\n            treeHeightVisibleRef.current = !treeHeightVisibleRef.current;\n            const newState = treeHeightVisibleRef.current;\n            systemsRef.current.canvas.setVisible(newState);\n            _services_LayerManager__WEBPACK_IMPORTED_MODULE_2__.layerManager.setLayerVisibility(\"tree-height-raster\", newState);\n            if (newState) {\n                triggerRender();\n            } else {\n                systemsRef.current.canvas.clear();\n            }\n        }\n    }[\"useTreeHeights.useCallback[toggleTreeHeights]\"], [\n        map,\n        ensureSystemsInitialized,\n        triggerRender\n    ]);\n    // Helper function to show subtle tooltip\n    const showSubtleTooltip = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useTreeHeights.useCallback[showSubtleTooltip]\": (content)=>{\n            if (!map) return;\n            const mapContainer = map.getContainer();\n            // Remove existing tooltip\n            const existingTooltip = mapContainer.querySelector('[data-tree-tooltip]');\n            if (existingTooltip) {\n                existingTooltip.remove();\n            }\n            // Create subtle corner tooltip\n            const tooltip = document.createElement('div');\n            tooltip.setAttribute('data-tree-tooltip', 'true');\n            tooltip.innerHTML = content;\n            Object.assign(tooltip.style, {\n                position: 'absolute',\n                bottom: '20px',\n                right: '20px',\n                background: 'rgba(0, 0, 0, 0.8)',\n                color: 'white',\n                padding: '8px 12px',\n                borderRadius: '6px',\n                fontSize: '12px',\n                fontFamily: 'system-ui, sans-serif',\n                zIndex: '1000',\n                maxWidth: '200px',\n                boxShadow: '0 2px 8px rgba(0,0,0,0.3)',\n                pointerEvents: 'none',\n                transition: 'opacity 0.2s ease',\n                opacity: '0'\n            });\n            mapContainer.appendChild(tooltip);\n            // Fade in\n            requestAnimationFrame({\n                \"useTreeHeights.useCallback[showSubtleTooltip]\": ()=>{\n                    tooltip.style.opacity = '1';\n                }\n            }[\"useTreeHeights.useCallback[showSubtleTooltip]\"]);\n            // Auto-dismiss after 3 seconds\n            setTimeout({\n                \"useTreeHeights.useCallback[showSubtleTooltip]\": ()=>{\n                    if (tooltip.parentNode) {\n                        tooltip.style.opacity = '0';\n                        setTimeout({\n                            \"useTreeHeights.useCallback[showSubtleTooltip]\": ()=>{\n                                if (tooltip.parentNode) {\n                                    tooltip.parentNode.removeChild(tooltip);\n                                }\n                            }\n                        }[\"useTreeHeights.useCallback[showSubtleTooltip]\"], 200);\n                    }\n                }\n            }[\"useTreeHeights.useCallback[showSubtleTooltip]\"], 3000);\n        }\n    }[\"useTreeHeights.useCallback[showSubtleTooltip]\"], [\n        map\n    ]);\n    // Manual re-render function\n    const rerenderTreeHeights = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useTreeHeights.useCallback[rerenderTreeHeights]\": ()=>{\n            if (treeHeightVisibleRef.current) {\n                triggerRender();\n            }\n        }\n    }[\"useTreeHeights.useCallback[rerenderTreeHeights]\"], [\n        triggerRender\n    ]);\n    // Handle tree height clicks\n    const handleTreeHeightClick = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useTreeHeights.useCallback[handleTreeHeightClick]\": (e)=>{\n            if (!map || !treeHeightVisibleRef.current || !systemsRef.current.canvas) return;\n            try {\n                const heightValue = systemsRef.current.canvas.getHeightAtPoint(e.point.x, e.point.y);\n                const inAO = isPointInAO(e.lngLat.lng, e.lngLat.lat);\n                let tooltipContent;\n                if (!inAO) {\n                    tooltipContent = `\n          <div>\n            <strong> Outside Area</strong><br/>\n            ${e.lngLat.lng.toFixed(4)}, ${e.lngLat.lat.toFixed(4)}\n          </div>\n        `;\n                } else if (heightValue !== null && heightValue > 0) {\n                    tooltipContent = `\n          <div>\n            <strong> Tree Height: ${heightValue}m</strong><br/>\n            ${e.lngLat.lng.toFixed(4)}, ${e.lngLat.lat.toFixed(4)}\n          </div>\n        `;\n                } else {\n                    tooltipContent = `\n          <div>\n            <strong> No Trees</strong><br/>\n            ${e.lngLat.lng.toFixed(4)}, ${e.lngLat.lat.toFixed(4)}\n          </div>\n        `;\n                }\n                showSubtleTooltip(tooltipContent);\n            } catch (clickError) {\n                console.error('Tree height click error:', clickError);\n                showSubtleTooltip(`\n        <div>\n          <strong> Error</strong><br/>\n          ${clickError instanceof Error ? clickError.message : 'Unknown error'}\n        </div>\n      `);\n            }\n        }\n    }[\"useTreeHeights.useCallback[handleTreeHeightClick]\"], [\n        map,\n        isPointInAO,\n        showSubtleTooltip\n    ]);\n    // Cleanup function\n    const cleanup = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useTreeHeights.useCallback[cleanup]\": ()=>{\n            if (renderTimeoutRef.current) {\n                clearTimeout(renderTimeoutRef.current);\n                renderTimeoutRef.current = null;\n            }\n            treeHeightVisibleRef.current = false;\n            isRenderingRef.current = false;\n            if (systemsRef.current.canvas) {\n                systemsRef.current.canvas.destroy();\n                systemsRef.current.canvas = null;\n            }\n            // Clean up tooltip\n            const mapContainer = map?.getContainer();\n            if (mapContainer) {\n                const tooltip = mapContainer.querySelector('[data-tree-tooltip]');\n                if (tooltip) {\n                    tooltip.remove();\n                }\n            }\n            if (systemsRef.current.systemInitialized) {\n                _services_TreeHeightSystem__WEBPACK_IMPORTED_MODULE_3__.treeHeightSystem.cleanup();\n                systemsRef.current.systemInitialized = false;\n            }\n        }\n    }[\"useTreeHeights.useCallback[cleanup]\"], [\n        map\n    ]);\n    return {\n        toggleTreeHeights,\n        rerenderTreeHeights,\n        handleTreeHeightClick: map ? handleTreeHeightClick : null,\n        cleanup,\n        isInitialized\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1hBLFFBQVFELE1BQU07Z0JBQ2hCO1lBQ0Y7WUFFQSxJQUFJakQsV0FBVzJCLE9BQU8sQ0FBQ3pCLGlCQUFpQixFQUFFO2dCQUN4Q1gsd0VBQWdCQSxDQUFDOEMsT0FBTztnQkFDeEJyQyxXQUFXMkIsT0FBTyxDQUFDekIsaUJBQWlCLEdBQUc7WUFDekM7UUFDRjs4Q0FBRztRQUFDUjtLQUFJO0lBRVIsT0FBTztRQUNMNEM7UUFDQXVDO1FBQ0FDLHVCQUF1QnBGLE1BQU1vRix3QkFBd0I7UUFDckR6QztRQUNBdkM7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9ob29rcy91c2VUcmVlSGVpZ2h0cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIHVzZVRyZWVIZWlnaHRzLnRzXG4gKiBcbiAqIFB1cnBvc2U6XG4gKiBSZWFjdCBob29rIHRoYXQgaW50ZWdyYXRlcyB0aGUgdHJlZSBoZWlnaHQgdmlzdWFsaXphdGlvbiBzeXN0ZW0gd2l0aCBNYXBib3guXG4gKiBVc2VzIExBWlkgSU5JVElBTElaQVRJT04gLSBzeXN0ZW1zIG9ubHkgaW5pdGlhbGl6ZSB3aGVuIHVzZXIgZmlyc3QgYWN0aXZhdGVzIHRoZW0uXG4gKiBcbiAqIFRoaXMgaG9vazpcbiAqIC0gTWFuYWdlcyB0cmVlIGhlaWdodCB2aXNpYmlsaXR5IHN0YXRlXG4gKiAtIFByb3ZpZGVzIHRvZ2dsZSBmdW5jdGlvbmFsaXR5IGZvciBVSSBjb21wb25lbnRzXG4gKiAtIEhhbmRsZXMgY2xpY2sgaW50ZXJhY3Rpb25zIHdpdGggc3VidGxlIHRvb2x0aXBcbiAqIC0gQ29vcmRpbmF0ZXMgd2l0aCBBcmVhIG9mIE9wZXJhdGlvbnMgYm91bmRhcmllc1xuICogLSBNYW5hZ2VzIGNhbnZhcyBsaWZlY3ljbGUgYW5kIGNsZWFudXBcbiAqIC0gSW50ZWdyYXRlcyB3aXRoIExheWVyTWFuYWdlciBmb3Igc3RhdGUgdHJhY2tpbmdcbiAqIFxuICogUmVsYXRlZCBGaWxlczpcbiAqIC0gVHJlZUhlaWdodFN5c3RlbS50czogQ29yZSByZW5kZXJpbmcgYW5kIHRpbGUgbWFuYWdlbWVudFxuICogLSBUcmVlSGVpZ2h0Q2FudmFzLnRzOiBDYW52YXMgRE9NIG1hbmFnZW1lbnRcbiAqIC0gQXJlYU9mT3BzQ29udGV4dC50c3g6IEFPIGJvdW5kYXJ5IGludGVncmF0aW9uXG4gKiAtIExheWVyTWFuYWdlci50czogTGF5ZXIgc3RhdGUgbWFuYWdlbWVudFxuICovXG5cbmltcG9ydCB7IHVzZVJlZiwgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdHlwZSBtYXBib3hnbCBmcm9tICdtYXBib3gtZ2wnO1xuaW1wb3J0IHsgdXNlQXJlYU9mT3BzQ29udGV4dCB9IGZyb20gJy4uL2NvbnRleHQvQXJlYU9mT3BzQ29udGV4dCc7XG5pbXBvcnQgeyBsYXllck1hbmFnZXIgfSBmcm9tICcuLi9zZXJ2aWNlcy9MYXllck1hbmFnZXInO1xuaW1wb3J0IHsgdHJlZUhlaWdodFN5c3RlbSB9IGZyb20gJy4uL3NlcnZpY2VzL1RyZWVIZWlnaHRTeXN0ZW0nO1xuaW1wb3J0IHsgVHJlZUhlaWdodENhbnZhcyB9IGZyb20gJy4uL3NlcnZpY2VzL1RyZWVIZWlnaHRDYW52YXMnO1xuXG5pbnRlcmZhY2UgVXNlVHJlZUhlaWdodHNSZXR1cm4ge1xuICB0b2dnbGVUcmVlSGVpZ2h0czogKCkgPT4gdm9pZDtcbiAgcmVyZW5kZXJUcmVlSGVpZ2h0czogKCkgPT4gdm9pZDtcbiAgaGFuZGxlVHJlZUhlaWdodENsaWNrOiAoKGU6IG1hcGJveGdsLk1hcE1vdXNlRXZlbnQpID0+IHZvaWQpIHwgbnVsbDtcbiAgY2xlYW51cDogKCkgPT4gdm9pZDtcbiAgaXNJbml0aWFsaXplZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVRyZWVIZWlnaHRzKG1hcDogbWFwYm94Z2wuTWFwIHwgbnVsbCk6IFVzZVRyZWVIZWlnaHRzUmV0dXJuIHtcbiAgLy8gU3RhdGUgbWFuYWdlbWVudFxuICBjb25zdCB0cmVlSGVpZ2h0VmlzaWJsZVJlZiA9IHVzZVJlZjxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IGlzUmVuZGVyaW5nUmVmID0gdXNlUmVmPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgcmVuZGVyVGltZW91dFJlZiA9IHVzZVJlZjxOb2RlSlMuVGltZW91dCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNJbml0aWFsaXplZCwgc2V0SXNJbml0aWFsaXplZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICAvLyBMYXp5IGluaXRpYWxpemF0aW9uIHJlZnMgLSBzeXN0ZW1zIG9ubHkgY3JlYXRlZCB3aGVuIG5lZWRlZFxuICBjb25zdCBzeXN0ZW1zUmVmID0gdXNlUmVmPHtcbiAgICBjYW52YXM6IFRyZWVIZWlnaHRDYW52YXMgfCBudWxsO1xuICAgIHN5c3RlbUluaXRpYWxpemVkOiBib29sZWFuO1xuICB9Pih7XG4gICAgY2FudmFzOiBudWxsLFxuICAgIHN5c3RlbUluaXRpYWxpemVkOiBmYWxzZVxuICB9KTtcbiAgXG4gIGNvbnN0IHsgYW9HZW9tZXRyeSB9ID0gdXNlQXJlYU9mT3BzQ29udGV4dCgpO1xuXG4gIC8vIENoZWNrIGlmIHBvaW50IGlzIHdpdGhpbiBBcmVhIG9mIE9wZXJhdGlvbnNcbiAgY29uc3QgaXNQb2ludEluQU8gPSB1c2VDYWxsYmFjaygobG5nOiBudW1iZXIsIGxhdDogbnVtYmVyKTogYm9vbGVhbiA9PiB7XG4gICAgaWYgKCFhb0dlb21ldHJ5IHx8ICFhb0dlb21ldHJ5LmZlYXR1cmVzIHx8IGFvR2VvbWV0cnkuZmVhdHVyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGxldCBtaW5MbmcgPSBJbmZpbml0eSwgbWF4TG5nID0gLUluZmluaXR5O1xuICAgICAgbGV0IG1pbkxhdCA9IEluZmluaXR5LCBtYXhMYXQgPSAtSW5maW5pdHk7XG4gICAgICBcbiAgICAgIGFvR2VvbWV0cnkuZmVhdHVyZXMuZm9yRWFjaChmZWF0dXJlID0+IHtcbiAgICAgICAgaWYgKGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ1BvbHlnb24nKSB7XG4gICAgICAgICAgZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlc1swXS5mb3JFYWNoKGNvb3JkID0+IHtcbiAgICAgICAgICAgIG1pbkxuZyA9IE1hdGgubWluKG1pbkxuZywgY29vcmRbMF0pO1xuICAgICAgICAgICAgbWF4TG5nID0gTWF0aC5tYXgobWF4TG5nLCBjb29yZFswXSk7XG4gICAgICAgICAgICBtaW5MYXQgPSBNYXRoLm1pbihtaW5MYXQsIGNvb3JkWzFdKTtcbiAgICAgICAgICAgIG1heExhdCA9IE1hdGgubWF4KG1heExhdCwgY29vcmRbMV0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGxuZyA+PSBtaW5MbmcgJiYgbG5nIDw9IG1heExuZyAmJiBsYXQgPj0gbWluTGF0ICYmIGxhdCA8PSBtYXhMYXQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRXJyb3IgY2hlY2tpbmcgcG9pbnQgaW4gQU86JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9LCBbYW9HZW9tZXRyeV0pO1xuXG4gIC8vIExhenkgaW5pdGlhbGl6YXRpb24gLSBvbmx5IGNyZWF0ZSBzeXN0ZW1zIHdoZW4gZmlyc3QgbmVlZGVkXG4gIGNvbnN0IGVuc3VyZVN5c3RlbXNJbml0aWFsaXplZCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIW1hcCB8fCBzeXN0ZW1zUmVmLmN1cnJlbnQuc3lzdGVtSW5pdGlhbGl6ZWQpIHJldHVybjtcbiAgICBcbiAgICB0cmVlSGVpZ2h0U3lzdGVtLmluaXRpYWxpemUobWFwKTtcbiAgICBzeXN0ZW1zUmVmLmN1cnJlbnQuY2FudmFzID0gbmV3IFRyZWVIZWlnaHRDYW52YXMobWFwKTtcbiAgICBzeXN0ZW1zUmVmLmN1cnJlbnQuc3lzdGVtSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICB9LCBbbWFwXSk7XG5cbiAgLy8gRGVib3VuY2VkIHJlbmRlciBmdW5jdGlvblxuICBjb25zdCB0cmlnZ2VyUmVuZGVyID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghbWFwIHx8ICF0cmVlSGVpZ2h0VmlzaWJsZVJlZi5jdXJyZW50IHx8IGlzUmVuZGVyaW5nUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBcbiAgICBpZiAocmVuZGVyVGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICBjbGVhclRpbWVvdXQocmVuZGVyVGltZW91dFJlZi5jdXJyZW50KTtcbiAgICB9XG4gICAgXG4gICAgcmVuZGVyVGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIXRyZWVIZWlnaHRWaXNpYmxlUmVmLmN1cnJlbnQgfHwgaXNSZW5kZXJpbmdSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgXG4gICAgICBpc1JlbmRlcmluZ1JlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdHJlZUhlaWdodFN5c3RlbS5yZW5kZXJUcmVlSGVpZ2h0cyh7XG4gICAgICAgICAgaXNQb2ludEluQU8sXG4gICAgICAgICAgb25Qcm9ncmVzczogKHByb2dyZXNzKSA9PiB7XG4gICAgICAgICAgICAvLyBPcHRpb25hbDogTG9nIHByb2dyZXNzIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlRyZWUgaGVpZ2h0IHJlbmRlciBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaXNSZW5kZXJpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0sIDMwMCk7XG4gIH0sIFttYXAsIGlzUG9pbnRJbkFPXSk7XG5cbiAgLy8gTGlnaHR3ZWlnaHQgaW5pdGlhbGl6YXRpb24gLSBvbmx5IHJlZ2lzdGVyIGxheWVyIGNhcGFiaWxpdHlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW1hcCkgcmV0dXJuO1xuXG4gICAgbGF5ZXJNYW5hZ2VyLnJlZ2lzdGVyTGF5ZXIoXCJ0cmVlLWhlaWdodC1yYXN0ZXJcIiwgZmFsc2UpO1xuICAgIHNldElzSW5pdGlhbGl6ZWQodHJ1ZSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHN5c3RlbXNSZWYuY3VycmVudC5jYW52YXMpIHtcbiAgICAgICAgc3lzdGVtc1JlZi5jdXJyZW50LmNhbnZhcy5kZXN0cm95KCk7XG4gICAgICAgIHN5c3RlbXNSZWYuY3VycmVudC5jYW52YXMgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHN5c3RlbXNSZWYuY3VycmVudC5zeXN0ZW1Jbml0aWFsaXplZCkge1xuICAgICAgICB0cmVlSGVpZ2h0U3lzdGVtLmNsZWFudXAoKTtcbiAgICAgICAgc3lzdGVtc1JlZi5jdXJyZW50LnN5c3RlbUluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBzZXRJc0luaXRpYWxpemVkKGZhbHNlKTtcbiAgICB9O1xuICB9LCBbbWFwXSk7XG5cbiAgLy8gVG9nZ2xlIHRyZWUgaGVpZ2h0cyB2aXNpYmlsaXR5XG4gIGNvbnN0IHRvZ2dsZVRyZWVIZWlnaHRzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghbWFwKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJNYXAgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gTGF6eSBpbml0aWFsaXphdGlvbiBvbiBmaXJzdCB1c2VcbiAgICBlbnN1cmVTeXN0ZW1zSW5pdGlhbGl6ZWQoKTtcbiAgICBcbiAgICBpZiAoIXN5c3RlbXNSZWYuY3VycmVudC5jYW52YXMpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gaW5pdGlhbGl6ZSB0cmVlIGhlaWdodCBzeXN0ZW1zXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICB0cmVlSGVpZ2h0VmlzaWJsZVJlZi5jdXJyZW50ID0gIXRyZWVIZWlnaHRWaXNpYmxlUmVmLmN1cnJlbnQ7XG4gICAgY29uc3QgbmV3U3RhdGUgPSB0cmVlSGVpZ2h0VmlzaWJsZVJlZi5jdXJyZW50O1xuICAgIFxuICAgIHN5c3RlbXNSZWYuY3VycmVudC5jYW52YXMuc2V0VmlzaWJsZShuZXdTdGF0ZSk7XG4gICAgbGF5ZXJNYW5hZ2VyLnNldExheWVyVmlzaWJpbGl0eShcInRyZWUtaGVpZ2h0LXJhc3RlclwiLCBuZXdTdGF0ZSk7XG4gICAgXG4gICAgaWYgKG5ld1N0YXRlKSB7XG4gICAgICB0cmlnZ2VyUmVuZGVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN5c3RlbXNSZWYuY3VycmVudC5jYW52YXMuY2xlYXIoKTtcbiAgICB9XG4gIH0sIFttYXAsIGVuc3VyZVN5c3RlbXNJbml0aWFsaXplZCwgdHJpZ2dlclJlbmRlcl0pO1xuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBzaG93IHN1YnRsZSB0b29sdGlwXG4gIGNvbnN0IHNob3dTdWJ0bGVUb29sdGlwID0gdXNlQ2FsbGJhY2soKGNvbnRlbnQ6IHN0cmluZykgPT4ge1xuICAgIGlmICghbWFwKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgbWFwQ29udGFpbmVyID0gbWFwLmdldENvbnRhaW5lcigpO1xuICAgIFxuICAgIC8vIFJlbW92ZSBleGlzdGluZyB0b29sdGlwXG4gICAgY29uc3QgZXhpc3RpbmdUb29sdGlwID0gbWFwQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRyZWUtdG9vbHRpcF0nKTtcbiAgICBpZiAoZXhpc3RpbmdUb29sdGlwKSB7XG4gICAgICBleGlzdGluZ1Rvb2x0aXAucmVtb3ZlKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBzdWJ0bGUgY29ybmVyIHRvb2x0aXBcbiAgICBjb25zdCB0b29sdGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdG9vbHRpcC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdHJlZS10b29sdGlwJywgJ3RydWUnKTtcbiAgICB0b29sdGlwLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgXG4gICAgT2JqZWN0LmFzc2lnbih0b29sdGlwLnN0eWxlLCB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIGJvdHRvbTogJzIwcHgnLFxuICAgICAgcmlnaHQ6ICcyMHB4JyxcbiAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsIDAsIDAsIDAuOCknLFxuICAgICAgY29sb3I6ICd3aGl0ZScsXG4gICAgICBwYWRkaW5nOiAnOHB4IDEycHgnLFxuICAgICAgYm9yZGVyUmFkaXVzOiAnNnB4JyxcbiAgICAgIGZvbnRTaXplOiAnMTJweCcsXG4gICAgICBmb250RmFtaWx5OiAnc3lzdGVtLXVpLCBzYW5zLXNlcmlmJyxcbiAgICAgIHpJbmRleDogJzEwMDAnLFxuICAgICAgbWF4V2lkdGg6ICcyMDBweCcsXG4gICAgICBib3hTaGFkb3c6ICcwIDJweCA4cHggcmdiYSgwLDAsMCwwLjMpJyxcbiAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICAgIHRyYW5zaXRpb246ICdvcGFjaXR5IDAuMnMgZWFzZScsXG4gICAgICBvcGFjaXR5OiAnMCdcbiAgICB9KTtcbiAgICBcbiAgICBtYXBDb250YWluZXIuYXBwZW5kQ2hpbGQodG9vbHRpcCk7XG4gICAgXG4gICAgLy8gRmFkZSBpblxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICB0b29sdGlwLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQXV0by1kaXNtaXNzIGFmdGVyIDMgc2Vjb25kc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRvb2x0aXAucGFyZW50Tm9kZSkge1xuICAgICAgICB0b29sdGlwLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmICh0b29sdGlwLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIHRvb2x0aXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0b29sdGlwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDIwMCk7XG4gICAgICB9XG4gICAgfSwgMzAwMCk7XG4gIH0sIFttYXBdKTtcblxuICAvLyBNYW51YWwgcmUtcmVuZGVyIGZ1bmN0aW9uXG4gIGNvbnN0IHJlcmVuZGVyVHJlZUhlaWdodHMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHRyZWVIZWlnaHRWaXNpYmxlUmVmLmN1cnJlbnQpIHtcbiAgICAgIHRyaWdnZXJSZW5kZXIoKTtcbiAgICB9XG4gIH0sIFt0cmlnZ2VyUmVuZGVyXSk7XG5cbiAgLy8gSGFuZGxlIHRyZWUgaGVpZ2h0IGNsaWNrc1xuICBjb25zdCBoYW5kbGVUcmVlSGVpZ2h0Q2xpY2sgPSB1c2VDYWxsYmFjaygoZTogbWFwYm94Z2wuTWFwTW91c2VFdmVudCkgPT4ge1xuICAgIGlmICghbWFwIHx8ICF0cmVlSGVpZ2h0VmlzaWJsZVJlZi5jdXJyZW50IHx8ICFzeXN0ZW1zUmVmLmN1cnJlbnQuY2FudmFzKSByZXR1cm47XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhlaWdodFZhbHVlID0gc3lzdGVtc1JlZi5jdXJyZW50LmNhbnZhcy5nZXRIZWlnaHRBdFBvaW50KGUucG9pbnQueCwgZS5wb2ludC55KTtcbiAgICAgIGNvbnN0IGluQU8gPSBpc1BvaW50SW5BTyhlLmxuZ0xhdC5sbmcsIGUubG5nTGF0LmxhdCk7XG4gICAgICBcbiAgICAgIGxldCB0b29sdGlwQ29udGVudDogc3RyaW5nO1xuICAgICAgXG4gICAgICBpZiAoIWluQU8pIHtcbiAgICAgICAgdG9vbHRpcENvbnRlbnQgPSBgXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxzdHJvbmc+8J+MsiBPdXRzaWRlIEFyZWE8L3N0cm9uZz48YnIvPlxuICAgICAgICAgICAgJHtlLmxuZ0xhdC5sbmcudG9GaXhlZCg0KX0sICR7ZS5sbmdMYXQubGF0LnRvRml4ZWQoNCl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgICB9IGVsc2UgaWYgKGhlaWdodFZhbHVlICE9PSBudWxsICYmIGhlaWdodFZhbHVlID4gMCkge1xuICAgICAgICB0b29sdGlwQ29udGVudCA9IGBcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPHN0cm9uZz7wn4yyIFRyZWUgSGVpZ2h0OiAke2hlaWdodFZhbHVlfW08L3N0cm9uZz48YnIvPlxuICAgICAgICAgICAgJHtlLmxuZ0xhdC5sbmcudG9GaXhlZCg0KX0sICR7ZS5sbmdMYXQubGF0LnRvRml4ZWQoNCl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b29sdGlwQ29udGVudCA9IGBcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPHN0cm9uZz7wn4yyIE5vIFRyZWVzPC9zdHJvbmc+PGJyLz5cbiAgICAgICAgICAgICR7ZS5sbmdMYXQubG5nLnRvRml4ZWQoNCl9LCAke2UubG5nTGF0LmxhdC50b0ZpeGVkKDQpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgfVxuICAgICAgXG4gICAgICBzaG93U3VidGxlVG9vbHRpcCh0b29sdGlwQ29udGVudCk7XG4gICAgICBcbiAgICB9IGNhdGNoIChjbGlja0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdUcmVlIGhlaWdodCBjbGljayBlcnJvcjonLCBjbGlja0Vycm9yKTtcbiAgICAgIHNob3dTdWJ0bGVUb29sdGlwKGBcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8c3Ryb25nPvCfjLIgRXJyb3I8L3N0cm9uZz48YnIvPlxuICAgICAgICAgICR7Y2xpY2tFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gY2xpY2tFcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIGApO1xuICAgIH1cbiAgfSwgW21hcCwgaXNQb2ludEluQU8sIHNob3dTdWJ0bGVUb29sdGlwXSk7XG5cbiAgLy8gQ2xlYW51cCBmdW5jdGlvblxuICBjb25zdCBjbGVhbnVwID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChyZW5kZXJUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFyVGltZW91dChyZW5kZXJUaW1lb3V0UmVmLmN1cnJlbnQpO1xuICAgICAgcmVuZGVyVGltZW91dFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgdHJlZUhlaWdodFZpc2libGVSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgIGlzUmVuZGVyaW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICBcbiAgICBpZiAoc3lzdGVtc1JlZi5jdXJyZW50LmNhbnZhcykge1xuICAgICAgc3lzdGVtc1JlZi5jdXJyZW50LmNhbnZhcy5kZXN0cm95KCk7XG4gICAgICBzeXN0ZW1zUmVmLmN1cnJlbnQuY2FudmFzID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBDbGVhbiB1cCB0b29sdGlwXG4gICAgY29uc3QgbWFwQ29udGFpbmVyID0gbWFwPy5nZXRDb250YWluZXIoKTtcbiAgICBpZiAobWFwQ29udGFpbmVyKSB7XG4gICAgICBjb25zdCB0b29sdGlwID0gbWFwQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRyZWUtdG9vbHRpcF0nKTtcbiAgICAgIGlmICh0b29sdGlwKSB7XG4gICAgICAgIHRvb2x0aXAucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChzeXN0ZW1zUmVmLmN1cnJlbnQuc3lzdGVtSW5pdGlhbGl6ZWQpIHtcbiAgICAgIHRyZWVIZWlnaHRTeXN0ZW0uY2xlYW51cCgpO1xuICAgICAgc3lzdGVtc1JlZi5jdXJyZW50LnN5c3RlbUluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgfVxuICB9LCBbbWFwXSk7XG5cbiAgcmV0dXJuIHtcbiAgICB0b2dnbGVUcmVlSGVpZ2h0cyxcbiAgICByZXJlbmRlclRyZWVIZWlnaHRzLFxuICAgIGhhbmRsZVRyZWVIZWlnaHRDbGljazogbWFwID8gaGFuZGxlVHJlZUhlaWdodENsaWNrIDogbnVsbCxcbiAgICBjbGVhbnVwLFxuICAgIGlzSW5pdGlhbGl6ZWQsXG4gIH07XG59Il0sIm5hbWVzIjpbInVzZVJlZiIsInVzZUNhbGxiYWNrIiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VBcmVhT2ZPcHNDb250ZXh0IiwibGF5ZXJNYW5hZ2VyIiwidHJlZUhlaWdodFN5c3RlbSIsIlRyZWVIZWlnaHRDYW52YXMiLCJ1c2VUcmVlSGVpZ2h0cyIsIm1hcCIsInRyZWVIZWlnaHRWaXNpYmxlUmVmIiwiaXNSZW5kZXJpbmdSZWYiLCJyZW5kZXJUaW1lb3V0UmVmIiwiaXNJbml0aWFsaXplZCIsInNldElzSW5pdGlhbGl6ZWQiLCJzeXN0ZW1zUmVmIiwiY2FudmFzIiwic3lzdGVtSW5pdGlhbGl6ZWQiLCJhb0dlb21ldHJ5IiwiaXNQb2ludEluQU8iLCJsbmciLCJsYXQiLCJmZWF0dXJlcyIsImxlbmd0aCIsIm1pbkxuZyIsIkluZmluaXR5IiwibWF4TG5nIiwibWluTGF0IiwibWF4TGF0IiwiZm9yRWFjaCIsImZlYXR1cmUiLCJnZW9tZXRyeSIsInR5cGUiLCJjb29yZGluYXRlcyIsImNvb3JkIiwiTWF0aCIsIm1pbiIsIm1heCIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJlbnN1cmVTeXN0ZW1zSW5pdGlhbGl6ZWQiLCJjdXJyZW50IiwiaW5pdGlhbGl6ZSIsInRyaWdnZXJSZW5kZXIiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwicmVuZGVyVHJlZUhlaWdodHMiLCJvblByb2dyZXNzIiwicHJvZ3Jlc3MiLCJyZWdpc3RlckxheWVyIiwiZGVzdHJveSIsImNsZWFudXAiLCJ0b2dnbGVUcmVlSGVpZ2h0cyIsIm5ld1N0YXRlIiwic2V0VmlzaWJsZSIsInNldExheWVyVmlzaWJpbGl0eSIsImNsZWFyIiwic2hvd1N1YnRsZVRvb2x0aXAiLCJjb250ZW50IiwibWFwQ29udGFpbmVyIiwiZ2V0Q29udGFpbmVyIiwiZXhpc3RpbmdUb29sdGlwIiwicXVlcnlTZWxlY3RvciIsInJlbW92ZSIsInRvb2x0aXAiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJPYmplY3QiLCJhc3NpZ24iLCJzdHlsZSIsInBvc2l0aW9uIiwiYm90dG9tIiwicmlnaHQiLCJiYWNrZ3JvdW5kIiwiY29sb3IiLCJwYWRkaW5nIiwiYm9yZGVyUmFkaXVzIiwiZm9udFNpemUiLCJmb250RmFtaWx5IiwiekluZGV4IiwibWF4V2lkdGgiLCJib3hTaGFkb3ciLCJwb2ludGVyRXZlbnRzIiwidHJhbnNpdGlvbiIsIm9wYWNpdHkiLCJhcHBlbmRDaGlsZCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInJlcmVuZGVyVHJlZUhlaWdodHMiLCJoYW5kbGVUcmVlSGVpZ2h0Q2xpY2siLCJlIiwiaGVpZ2h0VmFsdWUiLCJnZXRIZWlnaHRBdFBvaW50IiwicG9pbnQiLCJ4IiwieSIsImluQU8iLCJsbmdMYXQiLCJ0b29sdGlwQ29udGVudCIsInRvRml4ZWQiLCJjbGlja0Vycm9yIiwiRXJyb3IiLCJtZXNzYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/hooks/useTreeHeights.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/page.tsx":
/*!**************************!*\
  !*** ./src/app/page.tsx ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Home)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_Map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/Map */ \"(ssr)/./src/app/components/Map/index.tsx\");\n/* harmony import */ var _context_FlightPlanContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./context/FlightPlanContext */ \"(ssr)/./src/app/context/FlightPlanContext.tsx\");\n/* harmony import */ var _context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./context/AreaOfOpsContext */ \"(ssr)/./src/app/context/AreaOfOpsContext.tsx\");\n/* harmony import */ var _context_MarkerContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./context/MarkerContext */ \"(ssr)/./src/app/context/MarkerContext.tsx\");\n/* harmony import */ var _context_LOSAnalysisContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./context/LOSAnalysisContext */ \"(ssr)/./src/app/context/LOSAnalysisContext.tsx\");\n/* harmony import */ var _context_FlightConfigurationContext__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./context/FlightConfigurationContext */ \"(ssr)/./src/app/context/FlightConfigurationContext.tsx\");\n/* harmony import */ var _context_ChecklistContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./context/ChecklistContext */ \"(ssr)/./src/app/context/ChecklistContext.tsx\");\n/* harmony import */ var _components_UI_Card__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components/UI/Card */ \"(ssr)/./src/app/components/UI/Card.tsx\");\n/* harmony import */ var _context_ObstacleAnalysisContext__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./context/ObstacleAnalysisContext */ \"(ssr)/./src/app/context/ObstacleAnalysisContext.tsx\");\n/* harmony import */ var _components_UI_MapSidePanel__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components/UI/MapSidePanel */ \"(ssr)/./src/app/components/UI/MapSidePanel.tsx\");\n/* harmony import */ var _barrel_optimize_names_Battery_Loader2_MapPin_Mountain_Radio_Search_lucide_react__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! __barrel_optimize__?names=Battery,Loader2,MapPin,Mountain,Radio,Search!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_Battery_Loader2_MapPin_Mountain_Radio_Search_lucide_react__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! __barrel_optimize__?names=Battery,Loader2,MapPin,Mountain,Radio,Search!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/map-pin.js\");\n/* harmony import */ var _barrel_optimize_names_Battery_Loader2_MapPin_Mountain_Radio_Search_lucide_react__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! __barrel_optimize__?names=Battery,Loader2,MapPin,Mountain,Radio,Search!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/search.js\");\n/* harmony import */ var _barrel_optimize_names_Battery_Loader2_MapPin_Mountain_Radio_Search_lucide_react__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! __barrel_optimize__?names=Battery,Loader2,MapPin,Mountain,Radio,Search!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/battery.js\");\n/* harmony import */ var _barrel_optimize_names_Battery_Loader2_MapPin_Mountain_Radio_Search_lucide_react__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! __barrel_optimize__?names=Battery,Loader2,MapPin,Mountain,Radio,Search!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/radio.js\");\n/* harmony import */ var _barrel_optimize_names_Battery_Loader2_MapPin_Mountain_Radio_Search_lucide_react__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! __barrel_optimize__?names=Battery,Loader2,MapPin,Mountain,Radio,Search!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/mountain.js\");\n/* harmony import */ var _components_tracking_tracking__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./components/tracking/tracking */ \"(ssr)/./src/app/components/tracking/tracking.js\");\n/* harmony import */ var _context_mapcontext__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./context/mapcontext */ \"(ssr)/./src/app/context/mapcontext.tsx\");\n/* harmony import */ var _context_AnalysisControllerContext__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./context/AnalysisControllerContext */ \"(ssr)/./src/app/context/AnalysisControllerContext.tsx\");\n/* harmony import */ var mapbox_gl_dist_mapbox_gl_css__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! mapbox-gl/dist/mapbox-gl.css */ \"(ssr)/./node_modules/mapbox-gl/dist/mapbox-gl.css\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! next/image */ \"(ssr)/./node_modules/next/dist/api/image.js\");\n/* harmony import */ var _context_PremiumContext__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./context/PremiumContext */ \"(ssr)/./src/app/context/PremiumContext.tsx\");\n/**\n * page.tsx - OPTIMIZED VERSION WITH LAZY LOADING\n * \n * Purpose:\n * Main entry point for the application, orchestrating the layout and state management\n * for map, analysis panels, and verification tools. Wraps content with necessary providers.\n * \n * Optimizations:\n * - Lazy loaded heavy analysis components to reduce initial bundle size\n * - Lazy loaded modal components that aren't immediately needed\n * - Added Suspense boundaries with loading states\n * - Kept core map and context providers in main bundle for immediate availability\n */ /* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//payment and premium access\n\n// ========================================\n// LAZY LOADED COMPONENTS\n// ========================================\n// Heavy analysis components - only loaded when panels are opened\nconst ObstacleAnalysisDashboard = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/lucide-react\"), __webpack_require__.e(\"_ssr_src_app_components_Analyses_ObstacleAnalysis_TerrainAnalysisDashboard_tsx\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./components/Analyses/ObstacleAnalysis/TerrainAnalysisDashboard */ \"(ssr)/./src/app/components/Analyses/ObstacleAnalysis/TerrainAnalysisDashboard.tsx\")));\nconst AnalysisDashboard = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/lucide-react\"), __webpack_require__.e(\"vendor-chunks/chart.js\"), __webpack_require__.e(\"vendor-chunks/@kurkle\"), __webpack_require__.e(\"vendor-chunks/react-chartjs-2\"), __webpack_require__.e(\"_ssr_src_app_components_Analyses_LOSAnalyses_UI_VisibilityAnalysisDashboard_tsx\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./components/Analyses/LOSAnalyses/UI/VisibilityAnalysisDashboard */ \"(ssr)/./src/app/components/Analyses/LOSAnalyses/UI/VisibilityAnalysisDashboard.tsx\")));\nconst Calculator = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>__webpack_require__.e(/*! import() */ \"_ssr_src_app_components_Calculator_tsx\").then(__webpack_require__.bind(__webpack_require__, /*! ./components/Calculator */ \"(ssr)/./src/app/components/Calculator.tsx\")));\n// Modal/overlay components - only loaded when needed\nconst AnalysisWizard = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/lucide-react\"), __webpack_require__.e(\"vendor-chunks/next\"), __webpack_require__.e(\"vendor-chunks/file-selector\"), __webpack_require__.e(\"vendor-chunks/react-dropzone\"), __webpack_require__.e(\"vendor-chunks/prop-types\"), __webpack_require__.e(\"vendor-chunks/tslib\"), __webpack_require__.e(\"vendor-chunks/react-is\"), __webpack_require__.e(\"vendor-chunks/object-assign\"), __webpack_require__.e(\"vendor-chunks/attr-accept\"), __webpack_require__.e(\"vendor-chunks/pako\"), __webpack_require__.e(\"vendor-chunks/jszip\"), __webpack_require__.e(\"vendor-chunks/@xmldom\"), __webpack_require__.e(\"vendor-chunks/@mapbox\"), __webpack_require__.e(\"vendor-chunks/lie\"), __webpack_require__.e(\"vendor-chunks/core-util-is\"), __webpack_require__.e(\"vendor-chunks/immediate\"), __webpack_require__.e(\"vendor-chunks/process-nextick-args\"), __webpack_require__.e(\"vendor-chunks/inherits\"), __webpack_require__.e(\"vendor-chunks/isarray\"), __webpack_require__.e(\"vendor-chunks/util-deprecate\"), __webpack_require__.e(\"_ssr_src_app_components_AnalysisWizard_tsx\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./components/AnalysisWizard */ \"(ssr)/./src/app/components/AnalysisWizard.tsx\")));\nconst FlightPlanUploader = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/lucide-react\"), __webpack_require__.e(\"vendor-chunks/next\"), __webpack_require__.e(\"vendor-chunks/file-selector\"), __webpack_require__.e(\"vendor-chunks/react-dropzone\"), __webpack_require__.e(\"vendor-chunks/prop-types\"), __webpack_require__.e(\"vendor-chunks/tslib\"), __webpack_require__.e(\"vendor-chunks/react-is\"), __webpack_require__.e(\"vendor-chunks/object-assign\"), __webpack_require__.e(\"vendor-chunks/attr-accept\"), __webpack_require__.e(\"vendor-chunks/pako\"), __webpack_require__.e(\"vendor-chunks/jszip\"), __webpack_require__.e(\"vendor-chunks/@xmldom\"), __webpack_require__.e(\"vendor-chunks/@mapbox\"), __webpack_require__.e(\"vendor-chunks/lie\"), __webpack_require__.e(\"vendor-chunks/core-util-is\"), __webpack_require__.e(\"vendor-chunks/immediate\"), __webpack_require__.e(\"vendor-chunks/process-nextick-args\"), __webpack_require__.e(\"vendor-chunks/inherits\"), __webpack_require__.e(\"vendor-chunks/isarray\"), __webpack_require__.e(\"vendor-chunks/util-deprecate\"), __webpack_require__.e(\"_ssr_src_app_components_FlightPlanUploader_tsx\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./components/FlightPlanUploader */ \"(ssr)/./src/app/components/FlightPlanUploader.tsx\")));\nconst AreaOpsUploader = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/lucide-react\"), __webpack_require__.e(\"vendor-chunks/file-selector\"), __webpack_require__.e(\"vendor-chunks/react-dropzone\"), __webpack_require__.e(\"vendor-chunks/prop-types\"), __webpack_require__.e(\"vendor-chunks/tslib\"), __webpack_require__.e(\"vendor-chunks/react-is\"), __webpack_require__.e(\"vendor-chunks/object-assign\"), __webpack_require__.e(\"vendor-chunks/attr-accept\"), __webpack_require__.e(\"_ssr_src_app_components_AO_AreaOpsUploader_tsx\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./components/AO/AreaOpsUploader */ \"(ssr)/./src/app/components/AO/AreaOpsUploader.tsx\")));\nconst UpgradeModal = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/lucide-react\"), __webpack_require__.e(\"_ssr_src_app_components_UI_UpgradeModal_tsx\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./components/UI/UpgradeModal */ \"(ssr)/./src/app/components/UI/UpgradeModal.tsx\")));\nconst MarkerLocationsModal = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/lucide-react\"), __webpack_require__.e(\"_ssr_src_app_components_UI_MarkerLocationsModal_tsx\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./components/UI/MarkerLocationsModal */ \"(ssr)/./src/app/components/UI/MarkerLocationsModal.tsx\")));\n// Conditional UI components\nconst ChecklistComponent = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/lucide-react\"), __webpack_require__.e(\"_ssr_src_app_components_ChecklistComponent_tsx\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./components/ChecklistComponent */ \"(ssr)/./src/app/components/ChecklistComponent.tsx\")));\nconst WelcomeMessage = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>__webpack_require__.e(/*! import() */ \"_ssr_src_app_components_WelcomeMessage_tsx\").then(__webpack_require__.bind(__webpack_require__, /*! ./components/WelcomeMessage */ \"(ssr)/./src/app/components/WelcomeMessage.tsx\")));\nconst MapSelectionPanel = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/lucide-react\"), __webpack_require__.e(\"_ssr_src_app_components_AO_MapSelectionPanel_tsx\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./components/AO/MapSelectionPanel */ \"(ssr)/./src/app/components/AO/MapSelectionPanel.tsx\")));\nconst ToolsDashboard = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/lucide-react\"), __webpack_require__.e(\"vendor-chunks/next\"), __webpack_require__.e(\"_ssr_src_app_components_VerificationToolbar_ToolsDashboard_tsx\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./components/VerificationToolbar/ToolsDashboard */ \"(ssr)/./src/app/components/VerificationToolbar/ToolsDashboard.tsx\")));\n// Heavy sub-components within ToolsDashboard that can be preloaded\nconst CompactDisclaimerWidget = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/lucide-react\"), __webpack_require__.e(\"_ssr_src_app_components_CompactDisclaimerWidget_tsx\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./components/CompactDisclaimerWidget */ \"(ssr)/./src/app/components/CompactDisclaimerWidget.tsx\")));\n// ========================================\n// LOADING COMPONENTS\n// ========================================\n/**\n * Loading spinner for analysis panels\n */ const AnalysisLoadingSpinner = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex items-center justify-center p-8\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col items-center gap-2\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Battery_Loader2_MapPin_Mountain_Radio_Search_lucide_react__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                    className: \"w-6 h-6 animate-spin text-blue-600\"\n                }, void 0, false, {\n                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                    lineNumber: 75,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"text-sm text-gray-600\",\n                    children: \"Loading analysis tools...\"\n                }, void 0, false, {\n                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                    lineNumber: 76,\n                    columnNumber: 7\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n            lineNumber: 74,\n            columnNumber: 5\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n        lineNumber: 73,\n        columnNumber: 3\n    }, undefined);\n/**\n * Loading placeholder for modals\n */ const ModalLoadingPlaceholder = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-black/50 flex items-center justify-center z-50\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white p-4 rounded-lg\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Battery_Loader2_MapPin_Mountain_Radio_Search_lucide_react__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                className: \"w-6 h-6 animate-spin text-blue-600\"\n            }, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                lineNumber: 87,\n                columnNumber: 7\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n            lineNumber: 86,\n            columnNumber: 5\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n        lineNumber: 85,\n        columnNumber: 3\n    }, undefined);\n/**\n * Main content component for the home page, managing UI layout and uploader/wizard overlays\n */ const HomeContent = ()=>{\n    const [activePanel, setActivePanel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [initialSection, setInitialSection] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showUploader, setShowUploader] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showAreaOpsUploader, setShowAreaOpsUploader] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showWizard, setShowWizard] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showWelcomeMessage, setShowWelcomeMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [showChecklist, setShowChecklist] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const { flightPlan, setFlightPlan } = (0,_context_FlightPlanContext__WEBPACK_IMPORTED_MODULE_3__.useFlightPlanContext)();\n    const { aoGeometry } = (0,_context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_4__.useAreaOfOpsContext)();\n    const { showMarkerLocationsModal, setShowMarkerLocationsModal } = (0,_context_AnalysisControllerContext__WEBPACK_IMPORTED_MODULE_14__.useAnalysisController)();\n    const [isMapSelectionMode, setIsMapSelectionMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [mapSelectionMode, setMapSelectionMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"map\");\n    /**\n   * Toggles the active analysis panel and sets initial section\n   * @param panel - The panel to toggle\n   * @param section - Optional section to expand in AnalysisDashboard\n   */ const togglePanel = (panel, section)=>{\n        setActivePanel((prev)=>prev === panel ? null : panel);\n        setInitialSection(panel === 'los' ? section || null : null);\n        (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_12__.trackEventWithForm)(\"toggle_analysis_panel\", {\n            panel,\n            section\n        });\n    };\n    /**\n   * Handles opening the Area of Operations uploader\n   */ const handleAreaOps = ()=>{\n        setShowAreaOpsUploader(true);\n        (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_12__.trackEventWithForm)('area_ops_uploader_opened', {});\n    };\n    /**\n   * Handles opening the wizard\n   */ const handleWizard = ()=>{\n        setShowWizard(true);\n        setShowWelcomeMessage(false);\n        (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_12__.trackEventWithForm)('wizard_opened', {});\n    };\n    /**\n   * Closes the checklist overlay\n   */ const handleCloseChecklist = ()=>{\n        setShowChecklist(false);\n    };\n    /**\n   * Effect to show checklist when wizard closes and upload is complete\n   */ (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"HomeContent.useEffect\": ()=>{\n            if ((flightPlan || aoGeometry) && !showWizard && !showUploader && !showAreaOpsUploader) {\n                setShowChecklist(true);\n            } else {\n                setShowChecklist(false);\n            }\n        }\n    }[\"HomeContent.useEffect\"], [\n        flightPlan,\n        aoGeometry,\n        showWizard,\n        showUploader,\n        showAreaOpsUploader\n    ]);\n    // Add handlers for map selection\n    /**\n   * Starts map selection mode\n   */ const handleStartMapSelection = (mode)=>{\n        setIsMapSelectionMode(true);\n        setMapSelectionMode(mode);\n        setShowWizard(false);\n        (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_12__.trackEventWithForm)('map_selection_started', {\n            mode\n        });\n    };\n    /**\n   * Completes map selection\n   */ const handleMapSelectionComplete = ()=>{\n        setIsMapSelectionMode(false);\n        (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_12__.trackEventWithForm)('map_selection_completed', {});\n    };\n    /**\n   * Cancels map selection\n   */ const handleMapSelectionCancel = ()=>{\n        setIsMapSelectionMode(false);\n        setShowWizard(true);\n        (0,_components_tracking_tracking__WEBPACK_IMPORTED_MODULE_12__.trackEventWithForm)('map_selection_cancelled', {});\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen flex flex-col bg-white overflow-x-hidden\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex-1 w-full h-full\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-row h-full relative\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-grow relative h-full\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"relative h-full rounded-r-lg overflow-hidden\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Map__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                    activePanel: activePanel,\n                                    togglePanel: togglePanel,\n                                    flightPlan: flightPlan,\n                                    setShowUploader: setShowUploader\n                                }, void 0, false, {\n                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                    lineNumber: 192,\n                                    columnNumber: 15\n                                }, undefined),\n                                !showUploader && !showAreaOpsUploader && !showWizard && showWelcomeMessage && !flightPlan && !aoGeometry && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"absolute inset-0 bg-black/50 flex items-center justify-center z-20 p-2\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n                                        fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ModalLoadingPlaceholder, {}, void 0, false, {\n                                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                            lineNumber: 201,\n                                            columnNumber: 39\n                                        }, void 0),\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(WelcomeMessage, {\n                                            onGetStarted: handleWizard,\n                                            onClose: ()=>setShowWelcomeMessage(false)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                            lineNumber: 202,\n                                            columnNumber: 21\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                        lineNumber: 201,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                    lineNumber: 200,\n                                    columnNumber: 17\n                                }, undefined),\n                                !showUploader && !showAreaOpsUploader && showWizard && !flightPlan && !aoGeometry && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"absolute inset-0 bg-black/50 flex items-start justify-center z-20 p-4 overflow-y-auto\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-white p-2 rounded-lg shadow-lg w-full max-w-3xl\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center mx-4 mt-4 gap-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                                                        src: \"/Logonobackgrnd.png\",\n                                                        alt: \"Intel.Aero Name Logo\",\n                                                        width: 60,\n                                                        height: 24,\n                                                        style: {\n                                                            objectFit: \"contain\"\n                                                        }\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                        lineNumber: 214,\n                                                        columnNumber: 25\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                        className: \"text-xl font-semibold\",\n                                                        children: \"Start Here\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                        lineNumber: 221,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                lineNumber: 213,\n                                                columnNumber: 21\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n                                                fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AnalysisLoadingSpinner, {}, void 0, false, {\n                                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                    lineNumber: 224,\n                                                    columnNumber: 41\n                                                }, void 0),\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AnalysisWizard, {\n                                                    onClose: ()=>setShowWizard(false),\n                                                    onStartMapSelection: handleStartMapSelection,\n                                                    onShowAreaOpsUploader: ()=>setShowAreaOpsUploader(true)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                    lineNumber: 225,\n                                                    columnNumber: 23\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                lineNumber: 224,\n                                                columnNumber: 21\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                        lineNumber: 212,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                    lineNumber: 211,\n                                    columnNumber: 17\n                                }, undefined),\n                                showUploader && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"absolute inset-0 bg-black/50 flex items-center justify-center z-20 p-2\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-white p-2 rounded-lg shadow-lg w-full max-w-5xl\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                className: \"text-xl font-semibold mb-2\",\n                                                children: \"Flight Plan Upload\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                lineNumber: 237,\n                                                columnNumber: 21\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n                                                fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AnalysisLoadingSpinner, {}, void 0, false, {\n                                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                    lineNumber: 238,\n                                                    columnNumber: 41\n                                                }, void 0),\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(FlightPlanUploader, {\n                                                    onClose: ()=>setShowUploader(false),\n                                                    onPlanUploaded: (flightData)=>{\n                                                        setShowUploader(false);\n                                                    }\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                    lineNumber: 239,\n                                                    columnNumber: 23\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                lineNumber: 238,\n                                                columnNumber: 21\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                        lineNumber: 236,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                    lineNumber: 235,\n                                    columnNumber: 17\n                                }, undefined),\n                                showAreaOpsUploader && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"absolute inset-0 bg-black/50 flex items-center justify-center z-20 p-2\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-white p-2 rounded-lg shadow-lg w-full max-w-5xl\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                className: \"text-xl font-semibold mb-2\",\n                                                children: \"Area of Operations Upload\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                lineNumber: 252,\n                                                columnNumber: 21\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n                                                fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AnalysisLoadingSpinner, {}, void 0, false, {\n                                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                    lineNumber: 253,\n                                                    columnNumber: 41\n                                                }, void 0),\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AreaOpsUploader, {\n                                                    onClose: ()=>setShowAreaOpsUploader(false)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                    lineNumber: 254,\n                                                    columnNumber: 23\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                lineNumber: 253,\n                                                columnNumber: 21\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                        lineNumber: 251,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                    lineNumber: 250,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                            lineNumber: 191,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                        lineNumber: 190,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-80 h-full shrink-0 max-h-screen overflow-y-auto flex p-1 mr-2 flex-col gap-4 pb-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-full z-0\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_UI_Card__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                    className: \"w-full rounded-l-xl\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"space-y-4 h-full flex flex-col\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                className: \"text-lg font-medium text-gray-900\",\n                                                children: \"Terrain and Visibility Toolbar\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                lineNumber: 270,\n                                                columnNumber: 19\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex-1 overflow-y-auto\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n                                                    fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AnalysisLoadingSpinner, {}, void 0, false, {\n                                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                        lineNumber: 272,\n                                                        columnNumber: 41\n                                                    }, void 0),\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ToolsDashboard, {\n                                                        onTogglePanel: togglePanel\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                        lineNumber: 273,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                    lineNumber: 272,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                lineNumber: 271,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                        lineNumber: 269,\n                                        columnNumber: 17\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                    lineNumber: 268,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                lineNumber: 267,\n                                columnNumber: 13\n                            }, undefined),\n                            isMapSelectionMode && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-full z-10\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_UI_Card__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                    className: \"w-full rounded-l-xl\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"space-y-3 h-full flex flex-col\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                className: \"text-lg font-medium text-gray-900 flex items-center gap-2\",\n                                                children: mapSelectionMode === \"map\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Battery_Loader2_MapPin_Mountain_Radio_Search_lucide_react__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n                                                            className: \"w-5 h-5 text-blue-600\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                            lineNumber: 288,\n                                                            columnNumber: 27\n                                                        }, undefined),\n                                                        \"Select Area on Map\"\n                                                    ]\n                                                }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Battery_Loader2_MapPin_Mountain_Radio_Search_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                                                            className: \"w-5 h-5 text-blue-600\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                            lineNumber: 293,\n                                                            columnNumber: 27\n                                                        }, undefined),\n                                                        \"Search Location\"\n                                                    ]\n                                                }, void 0, true)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                lineNumber: 285,\n                                                columnNumber: 21\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex-1 overflow-y-auto\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n                                                    fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AnalysisLoadingSpinner, {}, void 0, false, {\n                                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                        lineNumber: 299,\n                                                        columnNumber: 43\n                                                    }, void 0),\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MapSelectionPanel, {\n                                                        mode: mapSelectionMode,\n                                                        onComplete: handleMapSelectionComplete,\n                                                        onCancel: handleMapSelectionCancel\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                        lineNumber: 300,\n                                                        columnNumber: 25\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                    lineNumber: 299,\n                                                    columnNumber: 23\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                lineNumber: 298,\n                                                columnNumber: 21\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                        lineNumber: 284,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                    lineNumber: 283,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                lineNumber: 282,\n                                columnNumber: 15\n                            }, undefined),\n                            (flightPlan || aoGeometry) && !showWizard && !showUploader && !showAreaOpsUploader && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-full relative z-10\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n                                    fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AnalysisLoadingSpinner, {}, void 0, false, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                        lineNumber: 315,\n                                        columnNumber: 37\n                                    }, void 0),\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ChecklistComponent, {\n                                        className: \"relative\",\n                                        togglePanel: togglePanel\n                                    }, void 0, false, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                        lineNumber: 316,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                    lineNumber: 315,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                lineNumber: 314,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                        lineNumber: 265,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_UI_MapSidePanel__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                        title: \"Energy Analysis\",\n                        icon: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Battery_Loader2_MapPin_Mountain_Radio_Search_lucide_react__WEBPACK_IMPORTED_MODULE_21__[\"default\"], {\n                            className: \"w-5 h-5\"\n                        }, void 0, false, {\n                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                            lineNumber: 325,\n                            columnNumber: 19\n                        }, void 0),\n                        isExpanded: activePanel === \"energy\",\n                        onToggle: ()=>togglePanel(\"energy\"),\n                        className: \"z-30\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n                            fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AnalysisLoadingSpinner, {}, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                lineNumber: 330,\n                                columnNumber: 33\n                            }, void 0),\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Calculator, {}, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                lineNumber: 331,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                            lineNumber: 330,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                        lineNumber: 323,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_UI_MapSidePanel__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                        title: \"Visibility and Comms Tools\",\n                        icon: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Battery_Loader2_MapPin_Mountain_Radio_Search_lucide_react__WEBPACK_IMPORTED_MODULE_22__[\"default\"], {\n                            className: \"w-5 h-5\"\n                        }, void 0, false, {\n                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                            lineNumber: 337,\n                            columnNumber: 19\n                        }, void 0),\n                        isExpanded: activePanel === \"los\",\n                        onToggle: ()=>togglePanel(\"los\"),\n                        className: \"z-30\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n                            fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AnalysisLoadingSpinner, {}, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                lineNumber: 342,\n                                columnNumber: 33\n                            }, void 0),\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AnalysisDashboard, {\n                                initialSection: initialSection\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                lineNumber: 343,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                            lineNumber: 342,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                        lineNumber: 335,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_UI_MapSidePanel__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                        title: \"Terrain Analysis Tools\",\n                        icon: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Battery_Loader2_MapPin_Mountain_Radio_Search_lucide_react__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n                            className: \"w-5 h-5\"\n                        }, void 0, false, {\n                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                            lineNumber: 349,\n                            columnNumber: 19\n                        }, void 0),\n                        isExpanded: activePanel === \"terrain\",\n                        onToggle: ()=>togglePanel(\"terrain\"),\n                        className: \"z-30\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n                            fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AnalysisLoadingSpinner, {}, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                lineNumber: 354,\n                                columnNumber: 33\n                            }, void 0),\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ObstacleAnalysisDashboard, {}, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                lineNumber: 355,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                            lineNumber: 354,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                        lineNumber: 347,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                lineNumber: 188,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n            lineNumber: 187,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n        lineNumber: 185,\n        columnNumber: 5\n    }, undefined);\n};\n/**\n * Wrapper component for the MarkerLocationsModal - WITH LAZY LOADING\n * This ensures the modal has access to all necessary context\n * and is rendered at the application level\n */ const MarkerLocationsModalWrapper = ()=>{\n    const { showMarkerLocationsModal, setShowMarkerLocationsModal } = (0,_context_AnalysisControllerContext__WEBPACK_IMPORTED_MODULE_14__.useAnalysisController)();\n    if (!showMarkerLocationsModal) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n        fallback: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ModalLoadingPlaceholder, {}, void 0, false, {\n            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n            lineNumber: 375,\n            columnNumber: 25\n        }, void 0),\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MarkerLocationsModal, {\n            isOpen: showMarkerLocationsModal,\n            onClose: ()=>setShowMarkerLocationsModal(false)\n        }, void 0, false, {\n            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n            lineNumber: 376,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n        lineNumber: 375,\n        columnNumber: 5\n    }, undefined);\n};\n/**\n * Lazy-loaded UpgradeModal wrapper\n */ const UpgradeModalWrapper = ()=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n        fallback: null,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(UpgradeModal, {}, void 0, false, {\n            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n            lineNumber: 390,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n        lineNumber: 389,\n        columnNumber: 5\n    }, undefined);\n};\n/**\n * Home page component, wrapping content with necessary providers\n */ function Home() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_mapcontext__WEBPACK_IMPORTED_MODULE_13__.MapProvider, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_AnalysisControllerContext__WEBPACK_IMPORTED_MODULE_14__.AnalysisControllerProvider, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_AreaOfOpsContext__WEBPACK_IMPORTED_MODULE_4__.AreaOfOpsProvider, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_FlightPlanContext__WEBPACK_IMPORTED_MODULE_3__.FlightPlanProvider, {\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_FlightConfigurationContext__WEBPACK_IMPORTED_MODULE_7__.FlightConfigurationProvider, {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_PremiumContext__WEBPACK_IMPORTED_MODULE_17__.PremiumProvider, {\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_MarkerContext__WEBPACK_IMPORTED_MODULE_5__.MarkerProvider, {\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_LOSAnalysisContext__WEBPACK_IMPORTED_MODULE_6__.LOSAnalysisProvider, {\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_ObstacleAnalysisContext__WEBPACK_IMPORTED_MODULE_10__.ObstacleAnalysisProvider, {\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_ChecklistContext__WEBPACK_IMPORTED_MODULE_8__.ChecklistProvider, {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(HomeContent, {}, void 0, false, {\n                                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                    lineNumber: 410,\n                                                    columnNumber: 25\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(UpgradeModalWrapper, {}, void 0, false, {\n                                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                    lineNumber: 411,\n                                                    columnNumber: 25\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MarkerLocationsModalWrapper, {}, void 0, false, {\n                                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                                    lineNumber: 412,\n                                                    columnNumber: 25\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                            lineNumber: 409,\n                                            columnNumber: 23\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                        lineNumber: 408,\n                                        columnNumber: 21\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                    lineNumber: 407,\n                                    columnNumber: 19\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                                lineNumber: 406,\n                                columnNumber: 17\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                            lineNumber: 405,\n                            columnNumber: 15\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                        lineNumber: 404,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                    lineNumber: 403,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n                lineNumber: 402,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n            lineNumber: 401,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n        lineNumber: 400,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGLHdFQUFpQkE7OzhEQUNoQiw4REFBQ21DOzs7Ozs4REFDRCw4REFBQzBEOzs7Ozs4REFDRCw4REFBQ0Y7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBWXpCIiwic291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9wYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIHBhZ2UudHN4IC0gT1BUSU1JWkVEIFZFUlNJT04gV0lUSCBMQVpZIExPQURJTkdcbiAqIFxuICogUHVycG9zZTpcbiAqIE1haW4gZW50cnkgcG9pbnQgZm9yIHRoZSBhcHBsaWNhdGlvbiwgb3JjaGVzdHJhdGluZyB0aGUgbGF5b3V0IGFuZCBzdGF0ZSBtYW5hZ2VtZW50XG4gKiBmb3IgbWFwLCBhbmFseXNpcyBwYW5lbHMsIGFuZCB2ZXJpZmljYXRpb24gdG9vbHMuIFdyYXBzIGNvbnRlbnQgd2l0aCBuZWNlc3NhcnkgcHJvdmlkZXJzLlxuICogXG4gKiBPcHRpbWl6YXRpb25zOlxuICogLSBMYXp5IGxvYWRlZCBoZWF2eSBhbmFseXNpcyBjb21wb25lbnRzIHRvIHJlZHVjZSBpbml0aWFsIGJ1bmRsZSBzaXplXG4gKiAtIExhenkgbG9hZGVkIG1vZGFsIGNvbXBvbmVudHMgdGhhdCBhcmVuJ3QgaW1tZWRpYXRlbHkgbmVlZGVkXG4gKiAtIEFkZGVkIFN1c3BlbnNlIGJvdW5kYXJpZXMgd2l0aCBsb2FkaW5nIHN0YXRlc1xuICogLSBLZXB0IGNvcmUgbWFwIGFuZCBjb250ZXh0IHByb3ZpZGVycyBpbiBtYWluIGJ1bmRsZSBmb3IgaW1tZWRpYXRlIGF2YWlsYWJpbGl0eVxuICovXG5cblwidXNlIGNsaWVudFwiO1xuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCBSZWFjdE5vZGUsIHVzZUVmZmVjdCwgU3VzcGVuc2UsIGxhenkgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBNYXAgZnJvbSBcIi4vY29tcG9uZW50cy9NYXBcIjtcbmltcG9ydCB7XG4gIEZsaWdodFBsYW5Qcm92aWRlcixcbiAgdXNlRmxpZ2h0UGxhbkNvbnRleHQsXG59IGZyb20gXCIuL2NvbnRleHQvRmxpZ2h0UGxhbkNvbnRleHRcIjtcbmltcG9ydCB7IHVzZUFyZWFPZk9wc0NvbnRleHQgfSBmcm9tIFwiLi9jb250ZXh0L0FyZWFPZk9wc0NvbnRleHRcIjtcbmltcG9ydCB7IE1hcmtlclByb3ZpZGVyIH0gZnJvbSBcIi4vY29udGV4dC9NYXJrZXJDb250ZXh0XCI7XG5pbXBvcnQgeyBMT1NBbmFseXNpc1Byb3ZpZGVyIH0gZnJvbSBcIi4vY29udGV4dC9MT1NBbmFseXNpc0NvbnRleHRcIjtcbmltcG9ydCB7IEZsaWdodENvbmZpZ3VyYXRpb25Qcm92aWRlciB9IGZyb20gXCIuL2NvbnRleHQvRmxpZ2h0Q29uZmlndXJhdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7IEFyZWFPZk9wc1Byb3ZpZGVyIH0gZnJvbSBcIi4vY29udGV4dC9BcmVhT2ZPcHNDb250ZXh0XCI7XG5pbXBvcnQgeyBDaGVja2xpc3RQcm92aWRlciB9IGZyb20gXCIuL2NvbnRleHQvQ2hlY2tsaXN0Q29udGV4dFwiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4vY29tcG9uZW50cy9VSS9DYXJkXCI7XG5pbXBvcnQgeyBPYnN0YWNsZUFuYWx5c2lzUHJvdmlkZXIgfSBmcm9tIFwiLi9jb250ZXh0L09ic3RhY2xlQW5hbHlzaXNDb250ZXh0XCI7XG5pbXBvcnQgTWFwU2lkZVBhbmVsIGZyb20gXCIuL2NvbXBvbmVudHMvVUkvTWFwU2lkZVBhbmVsXCI7XG5pbXBvcnQgeyBCYXR0ZXJ5LCBSYWRpbywgTW91bnRhaW4sIE1hcFBpbiwgU2VhcmNoLCBMb2FkZXIyIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuaW1wb3J0IHsgdHJhY2tFdmVudFdpdGhGb3JtIGFzIHRyYWNrRXZlbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL3RyYWNraW5nL3RyYWNraW5nXCI7XG5pbXBvcnQgeyBNYXBQcm92aWRlciB9IGZyb20gXCIuL2NvbnRleHQvbWFwY29udGV4dFwiO1xuaW1wb3J0IHsgQW5hbHlzaXNDb250cm9sbGVyUHJvdmlkZXIsIHVzZUFuYWx5c2lzQ29udHJvbGxlciB9IGZyb20gXCIuL2NvbnRleHQvQW5hbHlzaXNDb250cm9sbGVyQ29udGV4dFwiO1xuaW1wb3J0ICdtYXBib3gtZ2wvZGlzdC9tYXBib3gtZ2wuY3NzJztcbmltcG9ydCBJbWFnZSBmcm9tIFwibmV4dC9pbWFnZVwiO1xuaW1wb3J0IFJlbG9hZEJ1dHRvbiBmcm9tIFwiLi9jb21wb25lbnRzL1VJL1JlbG9hZEJ1dHRvblwiO1xuXG4vL3BheW1lbnQgYW5kIHByZW1pdW0gYWNjZXNzXG5pbXBvcnQgeyBQcmVtaXVtUHJvdmlkZXIgfSBmcm9tIFwiLi9jb250ZXh0L1ByZW1pdW1Db250ZXh0XCI7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIExBWlkgTE9BREVEIENPTVBPTkVOVFNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhlYXZ5IGFuYWx5c2lzIGNvbXBvbmVudHMgLSBvbmx5IGxvYWRlZCB3aGVuIHBhbmVscyBhcmUgb3BlbmVkXG5jb25zdCBPYnN0YWNsZUFuYWx5c2lzRGFzaGJvYXJkID0gbGF6eSgoKSA9PiBpbXBvcnQoXCIuL2NvbXBvbmVudHMvQW5hbHlzZXMvT2JzdGFjbGVBbmFseXNpcy9UZXJyYWluQW5hbHlzaXNEYXNoYm9hcmRcIikpO1xuY29uc3QgQW5hbHlzaXNEYXNoYm9hcmQgPSBsYXp5KCgpID0+IGltcG9ydChcIi4vY29tcG9uZW50cy9BbmFseXNlcy9MT1NBbmFseXNlcy9VSS9WaXNpYmlsaXR5QW5hbHlzaXNEYXNoYm9hcmRcIikpO1xuY29uc3QgQ2FsY3VsYXRvciA9IGxhenkoKCkgPT4gaW1wb3J0KFwiLi9jb21wb25lbnRzL0NhbGN1bGF0b3JcIikpO1xuXG4vLyBNb2RhbC9vdmVybGF5IGNvbXBvbmVudHMgLSBvbmx5IGxvYWRlZCB3aGVuIG5lZWRlZFxuY29uc3QgQW5hbHlzaXNXaXphcmQgPSBsYXp5KCgpID0+IGltcG9ydChcIi4vY29tcG9uZW50cy9BbmFseXNpc1dpemFyZFwiKSk7XG5jb25zdCBGbGlnaHRQbGFuVXBsb2FkZXIgPSBsYXp5KCgpID0+IGltcG9ydChcIi4vY29tcG9uZW50cy9GbGlnaHRQbGFuVXBsb2FkZXJcIikpO1xuY29uc3QgQXJlYU9wc1VwbG9hZGVyID0gbGF6eSgoKSA9PiBpbXBvcnQoXCIuL2NvbXBvbmVudHMvQU8vQXJlYU9wc1VwbG9hZGVyXCIpKTtcbmNvbnN0IFVwZ3JhZGVNb2RhbCA9IGxhenkoKCkgPT4gaW1wb3J0KFwiLi9jb21wb25lbnRzL1VJL1VwZ3JhZGVNb2RhbFwiKSk7XG5jb25zdCBNYXJrZXJMb2NhdGlvbnNNb2RhbCA9IGxhenkoKCkgPT4gaW1wb3J0KFwiLi9jb21wb25lbnRzL1VJL01hcmtlckxvY2F0aW9uc01vZGFsXCIpKTtcblxuLy8gQ29uZGl0aW9uYWwgVUkgY29tcG9uZW50c1xuY29uc3QgQ2hlY2tsaXN0Q29tcG9uZW50ID0gbGF6eSgoKSA9PiBpbXBvcnQoXCIuL2NvbXBvbmVudHMvQ2hlY2tsaXN0Q29tcG9uZW50XCIpKTtcbmNvbnN0IFdlbGNvbWVNZXNzYWdlID0gbGF6eSgoKSA9PiBpbXBvcnQoXCIuL2NvbXBvbmVudHMvV2VsY29tZU1lc3NhZ2VcIikpO1xuY29uc3QgTWFwU2VsZWN0aW9uUGFuZWwgPSBsYXp5KCgpID0+IGltcG9ydChcIi4vY29tcG9uZW50cy9BTy9NYXBTZWxlY3Rpb25QYW5lbFwiKSk7XG5jb25zdCBUb29sc0Rhc2hib2FyZCA9IGxhenkoKCkgPT4gaW1wb3J0KFwiLi9jb21wb25lbnRzL1ZlcmlmaWNhdGlvblRvb2xiYXIvVG9vbHNEYXNoYm9hcmRcIikpO1xuXG4vLyBIZWF2eSBzdWItY29tcG9uZW50cyB3aXRoaW4gVG9vbHNEYXNoYm9hcmQgdGhhdCBjYW4gYmUgcHJlbG9hZGVkXG5jb25zdCBDb21wYWN0RGlzY2xhaW1lcldpZGdldCA9IGxhenkoKCkgPT4gaW1wb3J0KFwiLi9jb21wb25lbnRzL0NvbXBhY3REaXNjbGFpbWVyV2lkZ2V0XCIpKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTE9BRElORyBDT01QT05FTlRTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vKipcbiAqIExvYWRpbmcgc3Bpbm5lciBmb3IgYW5hbHlzaXMgcGFuZWxzXG4gKi9cbmNvbnN0IEFuYWx5c2lzTG9hZGluZ1NwaW5uZXI6IFJlYWN0LkZDID0gKCkgPT4gKFxuICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtOFwiPlxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cInctNiBoLTYgYW5pbWF0ZS1zcGluIHRleHQtYmx1ZS02MDBcIiAvPlxuICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwXCI+TG9hZGluZyBhbmFseXNpcyB0b29scy4uLjwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4pO1xuXG4vKipcbiAqIExvYWRpbmcgcGxhY2Vob2xkZXIgZm9yIG1vZGFsc1xuICovXG5jb25zdCBNb2RhbExvYWRpbmdQbGFjZWhvbGRlcjogUmVhY3QuRkMgPSAoKSA9PiAoXG4gIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCBiZy1ibGFjay81MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB6LTUwXCI+XG4gICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBwLTQgcm91bmRlZC1sZ1wiPlxuICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwidy02IGgtNiBhbmltYXRlLXNwaW4gdGV4dC1ibHVlLTYwMFwiIC8+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuKTtcblxuLyoqXG4gKiBNYWluIGNvbnRlbnQgY29tcG9uZW50IGZvciB0aGUgaG9tZSBwYWdlLCBtYW5hZ2luZyBVSSBsYXlvdXQgYW5kIHVwbG9hZGVyL3dpemFyZCBvdmVybGF5c1xuICovXG5jb25zdCBIb21lQ29udGVudCA9ICgpID0+IHtcbiAgY29uc3QgW2FjdGl2ZVBhbmVsLCBzZXRBY3RpdmVQYW5lbF0gPSB1c2VTdGF0ZTxcImVuZXJneVwiIHwgXCJsb3NcIiB8IFwidGVycmFpblwiIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpbml0aWFsU2VjdGlvbiwgc2V0SW5pdGlhbFNlY3Rpb25dID0gdXNlU3RhdGU8J2ZsaWdodCcgfCAnc3RhdGlvbicgfCAnbWVyZ2VkJyB8ICdzdGF0aW9uTE9TJyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2hvd1VwbG9hZGVyLCBzZXRTaG93VXBsb2FkZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0FyZWFPcHNVcGxvYWRlciwgc2V0U2hvd0FyZWFPcHNVcGxvYWRlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93V2l6YXJkLCBzZXRTaG93V2l6YXJkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dXZWxjb21lTWVzc2FnZSwgc2V0U2hvd1dlbGNvbWVNZXNzYWdlXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbc2hvd0NoZWNrbGlzdCwgc2V0U2hvd0NoZWNrbGlzdF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHsgZmxpZ2h0UGxhbiwgc2V0RmxpZ2h0UGxhbiB9ID0gdXNlRmxpZ2h0UGxhbkNvbnRleHQoKTtcbiAgY29uc3QgeyBhb0dlb21ldHJ5IH0gPSB1c2VBcmVhT2ZPcHNDb250ZXh0KCk7XG4gIGNvbnN0IHsgc2hvd01hcmtlckxvY2F0aW9uc01vZGFsLCBzZXRTaG93TWFya2VyTG9jYXRpb25zTW9kYWwgfSA9IHVzZUFuYWx5c2lzQ29udHJvbGxlcigpO1xuXG4gIGNvbnN0IFtpc01hcFNlbGVjdGlvbk1vZGUsIHNldElzTWFwU2VsZWN0aW9uTW9kZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFttYXBTZWxlY3Rpb25Nb2RlLCBzZXRNYXBTZWxlY3Rpb25Nb2RlXSA9IHVzZVN0YXRlPFwibWFwXCIgfCBcInNlYXJjaFwiPihcIm1hcFwiKTtcblxuICAvKipcbiAgICogVG9nZ2xlcyB0aGUgYWN0aXZlIGFuYWx5c2lzIHBhbmVsIGFuZCBzZXRzIGluaXRpYWwgc2VjdGlvblxuICAgKiBAcGFyYW0gcGFuZWwgLSBUaGUgcGFuZWwgdG8gdG9nZ2xlXG4gICAqIEBwYXJhbSBzZWN0aW9uIC0gT3B0aW9uYWwgc2VjdGlvbiB0byBleHBhbmQgaW4gQW5hbHlzaXNEYXNoYm9hcmRcbiAgICovXG4gIGNvbnN0IHRvZ2dsZVBhbmVsID0gKHBhbmVsOiBcImVuZXJneVwiIHwgXCJsb3NcIiB8IFwidGVycmFpblwiIHwgbnVsbCwgc2VjdGlvbj86ICdmbGlnaHQnIHwgJ3N0YXRpb24nIHwgJ21lcmdlZCcgfCAnc3RhdGlvbkxPUycgfCBudWxsKSA9PiB7XG4gICAgc2V0QWN0aXZlUGFuZWwoKHByZXYpID0+IChwcmV2ID09PSBwYW5lbCA/IG51bGwgOiBwYW5lbCkpO1xuICAgIHNldEluaXRpYWxTZWN0aW9uKHBhbmVsID09PSAnbG9zJyA/IHNlY3Rpb24gfHwgbnVsbCA6IG51bGwpO1xuICAgIHRyYWNrRXZlbnQoXCJ0b2dnbGVfYW5hbHlzaXNfcGFuZWxcIiwgeyBwYW5lbCwgc2VjdGlvbiB9KTtcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlcyBvcGVuaW5nIHRoZSBBcmVhIG9mIE9wZXJhdGlvbnMgdXBsb2FkZXJcbiAgICovXG4gIGNvbnN0IGhhbmRsZUFyZWFPcHMgPSAoKSA9PiB7XG4gICAgc2V0U2hvd0FyZWFPcHNVcGxvYWRlcih0cnVlKTtcbiAgICB0cmFja0V2ZW50KCdhcmVhX29wc191cGxvYWRlcl9vcGVuZWQnLCB7fSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgb3BlbmluZyB0aGUgd2l6YXJkXG4gICAqL1xuICBjb25zdCBoYW5kbGVXaXphcmQgPSAoKSA9PiB7XG4gICAgc2V0U2hvd1dpemFyZCh0cnVlKTtcbiAgICBzZXRTaG93V2VsY29tZU1lc3NhZ2UoZmFsc2UpO1xuICAgIHRyYWNrRXZlbnQoJ3dpemFyZF9vcGVuZWQnLCB7fSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgY2hlY2tsaXN0IG92ZXJsYXlcbiAgICovXG4gIGNvbnN0IGhhbmRsZUNsb3NlQ2hlY2tsaXN0ID0gKCkgPT4ge1xuICAgIHNldFNob3dDaGVja2xpc3QoZmFsc2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFZmZlY3QgdG8gc2hvdyBjaGVja2xpc3Qgd2hlbiB3aXphcmQgY2xvc2VzIGFuZCB1cGxvYWQgaXMgY29tcGxldGVcbiAgICovXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKChmbGlnaHRQbGFuIHx8IGFvR2VvbWV0cnkpICYmICFzaG93V2l6YXJkICYmICFzaG93VXBsb2FkZXIgJiYgIXNob3dBcmVhT3BzVXBsb2FkZXIpIHtcbiAgICAgIHNldFNob3dDaGVja2xpc3QodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFNob3dDaGVja2xpc3QoZmFsc2UpO1xuICAgIH1cbiAgfSwgW2ZsaWdodFBsYW4sIGFvR2VvbWV0cnksIHNob3dXaXphcmQsIHNob3dVcGxvYWRlciwgc2hvd0FyZWFPcHNVcGxvYWRlcl0pO1xuXG4gIC8vIEFkZCBoYW5kbGVycyBmb3IgbWFwIHNlbGVjdGlvblxuICAvKipcbiAgICogU3RhcnRzIG1hcCBzZWxlY3Rpb24gbW9kZVxuICAgKi9cbiAgY29uc3QgaGFuZGxlU3RhcnRNYXBTZWxlY3Rpb24gPSAobW9kZTogXCJtYXBcIiB8IFwic2VhcmNoXCIpID0+IHtcbiAgICBzZXRJc01hcFNlbGVjdGlvbk1vZGUodHJ1ZSk7XG4gICAgc2V0TWFwU2VsZWN0aW9uTW9kZShtb2RlKTtcbiAgICBzZXRTaG93V2l6YXJkKGZhbHNlKTtcbiAgICB0cmFja0V2ZW50KCdtYXBfc2VsZWN0aW9uX3N0YXJ0ZWQnLCB7IG1vZGUgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbXBsZXRlcyBtYXAgc2VsZWN0aW9uXG4gICAqL1xuICBjb25zdCBoYW5kbGVNYXBTZWxlY3Rpb25Db21wbGV0ZSA9ICgpID0+IHtcbiAgICBzZXRJc01hcFNlbGVjdGlvbk1vZGUoZmFsc2UpO1xuICAgIHRyYWNrRXZlbnQoJ21hcF9zZWxlY3Rpb25fY29tcGxldGVkJywge30pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYW5jZWxzIG1hcCBzZWxlY3Rpb25cbiAgICovXG4gIGNvbnN0IGhhbmRsZU1hcFNlbGVjdGlvbkNhbmNlbCA9ICgpID0+IHtcbiAgICBzZXRJc01hcFNlbGVjdGlvbk1vZGUoZmFsc2UpO1xuICAgIHNldFNob3dXaXphcmQodHJ1ZSk7XG4gICAgdHJhY2tFdmVudCgnbWFwX3NlbGVjdGlvbl9jYW5jZWxsZWQnLCB7fSk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBmbGV4IGZsZXgtY29sIGJnLXdoaXRlIG92ZXJmbG93LXgtaGlkZGVuXCI+XG4gICAgICB7LyogTWFpbiBDb250ZW50IEFyZWEgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSB3LWZ1bGwgaC1mdWxsXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXJvdyBoLWZ1bGwgcmVsYXRpdmVcIj5cbiAgICAgICAgICB7LyogTWFwIFNlY3Rpb24gKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LWdyb3cgcmVsYXRpdmUgaC1mdWxsXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGgtZnVsbCByb3VuZGVkLXItbGcgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgIDxNYXBcbiAgICAgICAgICAgICAgICBhY3RpdmVQYW5lbD17YWN0aXZlUGFuZWx9XG4gICAgICAgICAgICAgICAgdG9nZ2xlUGFuZWw9e3RvZ2dsZVBhbmVsfVxuICAgICAgICAgICAgICAgIGZsaWdodFBsYW49e2ZsaWdodFBsYW59XG4gICAgICAgICAgICAgICAgc2V0U2hvd1VwbG9hZGVyPXtzZXRTaG93VXBsb2FkZXJ9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIHsvKiBXZWxjb21lIE1lc3NhZ2UgT3ZlcmxheSAqL31cbiAgICAgICAgICAgICAgeyghc2hvd1VwbG9hZGVyICYmICFzaG93QXJlYU9wc1VwbG9hZGVyICYmICFzaG93V2l6YXJkICYmIHNob3dXZWxjb21lTWVzc2FnZSAmJiAhZmxpZ2h0UGxhbiAmJiAhYW9HZW9tZXRyeSkgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy1ibGFjay81MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB6LTIwIHAtMlwiPlxuICAgICAgICAgICAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8TW9kYWxMb2FkaW5nUGxhY2Vob2xkZXIgLz59PlxuICAgICAgICAgICAgICAgICAgICA8V2VsY29tZU1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICBvbkdldFN0YXJ0ZWQ9e2hhbmRsZVdpemFyZH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRTaG93V2VsY29tZU1lc3NhZ2UoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9TdXNwZW5zZT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgey8qIFdpemFyZCBPdmVybGF5ICovfVxuICAgICAgICAgICAgICB7KCFzaG93VXBsb2FkZXIgJiYgIXNob3dBcmVhT3BzVXBsb2FkZXIgJiYgc2hvd1dpemFyZCAmJiAhZmxpZ2h0UGxhbiAmJiAhYW9HZW9tZXRyeSkgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy1ibGFjay81MCBmbGV4IGl0ZW1zLXN0YXJ0IGp1c3RpZnktY2VudGVyIHotMjAgcC00IG92ZXJmbG93LXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBwLTIgcm91bmRlZC1sZyBzaGFkb3ctbGcgdy1mdWxsIG1heC13LTN4bFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG14LTQgbXQtNCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmM9XCIvTG9nb25vYmFja2dybmQucG5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsdD1cIkludGVsLkFlcm8gTmFtZSBMb2dvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXs2MH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17MjR9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBvYmplY3RGaXQ6IFwiY29udGFpblwiIH19XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkXCI+U3RhcnQgSGVyZTwvaDM+XG5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PEFuYWx5c2lzTG9hZGluZ1NwaW5uZXIgLz59PlxuICAgICAgICAgICAgICAgICAgICAgIDxBbmFseXNpc1dpemFyZCBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNob3dXaXphcmQoZmFsc2UpfSBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhcnRNYXBTZWxlY3Rpb249e2hhbmRsZVN0YXJ0TWFwU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgb25TaG93QXJlYU9wc1VwbG9hZGVyPXsoKSA9PiBzZXRTaG93QXJlYU9wc1VwbG9hZGVyKHRydWUpfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvU3VzcGVuc2U+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge3Nob3dVcGxvYWRlciAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLWJsYWNrLzUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotMjAgcC0yXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHAtMiByb3VuZGVkLWxnIHNoYWRvdy1sZyB3LWZ1bGwgbWF4LXctNXhsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItMlwiPkZsaWdodCBQbGFuIFVwbG9hZDwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PEFuYWx5c2lzTG9hZGluZ1NwaW5uZXIgLz59PlxuICAgICAgICAgICAgICAgICAgICAgIDxGbGlnaHRQbGFuVXBsb2FkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNob3dVcGxvYWRlcihmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblBsYW5VcGxvYWRlZD17KGZsaWdodERhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2hvd1VwbG9hZGVyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9TdXNwZW5zZT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7c2hvd0FyZWFPcHNVcGxvYWRlciAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLWJsYWNrLzUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotMjAgcC0yXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHAtMiByb3VuZGVkLWxnIHNoYWRvdy1sZyB3LWZ1bGwgbWF4LXctNXhsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItMlwiPkFyZWEgb2YgT3BlcmF0aW9ucyBVcGxvYWQ8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8U3VzcGVuc2UgZmFsbGJhY2s9ezxBbmFseXNpc0xvYWRpbmdTcGlubmVyIC8+fT5cbiAgICAgICAgICAgICAgICAgICAgICA8QXJlYU9wc1VwbG9hZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRTaG93QXJlYU9wc1VwbG9hZGVyKGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L1N1c3BlbnNlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBSaWdodCBTaWRlYmFyOiBDaGVja2xpc3QgYW5kIFBsYW4gVmVyaWZpY2F0aW9uICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy04MCBoLWZ1bGwgc2hyaW5rLTAgbWF4LWgtc2NyZWVuIG92ZXJmbG93LXktYXV0byBmbGV4IHAtMSBtci0yIGZsZXgtY29sIGdhcC00IHBiLTRcIj5cbiAgICAgICAgICAgIHsvKiBQbGFuIFZlcmlmaWNhdGlvbiBTZWN0aW9uICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgei0wXCI+XG4gICAgICAgICAgICAgIDxDYXJkIGNsYXNzTmFtZT1cInctZnVsbCByb3VuZGVkLWwteGxcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNCBoLWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPlRlcnJhaW4gYW5kIFZpc2liaWxpdHkgVG9vbGJhcjwvaDM+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8QW5hbHlzaXNMb2FkaW5nU3Bpbm5lciAvPn0+XG4gICAgICAgICAgICAgICAgICAgICAgPFRvb2xzRGFzaGJvYXJkIG9uVG9nZ2xlUGFuZWw9e3RvZ2dsZVBhbmVsfSAvPlxuICAgICAgICAgICAgICAgICAgICA8L1N1c3BlbnNlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7LyogTWFwIFNlbGVjdGlvbiBQYW5lbCAtIE9ubHkgc2hvd24gd2hlbiBpbiBtYXAgc2VsZWN0aW9uIG1vZGUgKi99XG4gICAgICAgICAgICB7aXNNYXBTZWxlY3Rpb25Nb2RlICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgei0xMFwiPlxuICAgICAgICAgICAgICAgIDxDYXJkIGNsYXNzTmFtZT1cInctZnVsbCByb3VuZGVkLWwteGxcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zIGgtZnVsbCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7bWFwU2VsZWN0aW9uTW9kZSA9PT0gXCJtYXBcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxNYXBQaW4gY2xhc3NOYW1lPVwidy01IGgtNSB0ZXh0LWJsdWUtNjAwXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0IEFyZWEgb24gTWFwXG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlYXJjaCBjbGFzc05hbWU9XCJ3LTUgaC01IHRleHQtYmx1ZS02MDBcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBTZWFyY2ggTG9jYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PEFuYWx5c2lzTG9hZGluZ1NwaW5uZXIgLz59PlxuICAgICAgICAgICAgICAgICAgICAgICAgPE1hcFNlbGVjdGlvblBhbmVsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlPXttYXBTZWxlY3Rpb25Nb2RlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlPXtoYW5kbGVNYXBTZWxlY3Rpb25Db21wbGV0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DYW5jZWw9e2hhbmRsZU1hcFNlbGVjdGlvbkNhbmNlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9TdXNwZW5zZT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgey8qIENoZWNrbGlzdCBTZWN0aW9uICovfVxuICAgICAgICAgICAgeyhmbGlnaHRQbGFuIHx8IGFvR2VvbWV0cnkpICYmICFzaG93V2l6YXJkICYmICFzaG93VXBsb2FkZXIgJiYgIXNob3dBcmVhT3BzVXBsb2FkZXIgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCByZWxhdGl2ZSB6LTEwXCI+XG4gICAgICAgICAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8QW5hbHlzaXNMb2FkaW5nU3Bpbm5lciAvPn0+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tsaXN0Q29tcG9uZW50IGNsYXNzTmFtZT1cInJlbGF0aXZlXCIgdG9nZ2xlUGFuZWw9e3RvZ2dsZVBhbmVsfSAvPlxuICAgICAgICAgICAgICAgIDwvU3VzcGVuc2U+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX0gICAgICAgICAgICBcbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBBbmFseXNpcyBQYW5lbHMgLSBXSVRIIExBWlkgTE9BRElORyAqL31cbiAgICAgICAgICA8TWFwU2lkZVBhbmVsXG4gICAgICAgICAgICB0aXRsZT1cIkVuZXJneSBBbmFseXNpc1wiXG4gICAgICAgICAgICBpY29uPXs8QmF0dGVyeSBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz59XG4gICAgICAgICAgICBpc0V4cGFuZGVkPXthY3RpdmVQYW5lbCA9PT0gXCJlbmVyZ3lcIn1cbiAgICAgICAgICAgIG9uVG9nZ2xlPXsoKSA9PiB0b2dnbGVQYW5lbChcImVuZXJneVwiKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInotMzBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PEFuYWx5c2lzTG9hZGluZ1NwaW5uZXIgLz59PlxuICAgICAgICAgICAgICA8Q2FsY3VsYXRvciAvPlxuICAgICAgICAgICAgPC9TdXNwZW5zZT5cbiAgICAgICAgICA8L01hcFNpZGVQYW5lbD5cblxuICAgICAgICAgIDxNYXBTaWRlUGFuZWxcbiAgICAgICAgICAgIHRpdGxlPVwiVmlzaWJpbGl0eSBhbmQgQ29tbXMgVG9vbHNcIlxuICAgICAgICAgICAgaWNvbj17PFJhZGlvIGNsYXNzTmFtZT1cInctNSBoLTVcIiAvPn1cbiAgICAgICAgICAgIGlzRXhwYW5kZWQ9e2FjdGl2ZVBhbmVsID09PSBcImxvc1wifVxuICAgICAgICAgICAgb25Ub2dnbGU9eygpID0+IHRvZ2dsZVBhbmVsKFwibG9zXCIpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiei0zMFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8QW5hbHlzaXNMb2FkaW5nU3Bpbm5lciAvPn0+XG4gICAgICAgICAgICAgIDxBbmFseXNpc0Rhc2hib2FyZCBpbml0aWFsU2VjdGlvbj17aW5pdGlhbFNlY3Rpb259IC8+XG4gICAgICAgICAgICA8L1N1c3BlbnNlPlxuICAgICAgICAgIDwvTWFwU2lkZVBhbmVsPlxuXG4gICAgICAgICAgPE1hcFNpZGVQYW5lbFxuICAgICAgICAgICAgdGl0bGU9XCJUZXJyYWluIEFuYWx5c2lzIFRvb2xzXCJcbiAgICAgICAgICAgIGljb249ezxNb3VudGFpbiBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz59XG4gICAgICAgICAgICBpc0V4cGFuZGVkPXthY3RpdmVQYW5lbCA9PT0gXCJ0ZXJyYWluXCJ9XG4gICAgICAgICAgICBvblRvZ2dsZT17KCkgPT4gdG9nZ2xlUGFuZWwoXCJ0ZXJyYWluXCIpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiei0zMFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8QW5hbHlzaXNMb2FkaW5nU3Bpbm5lciAvPn0+XG4gICAgICAgICAgICAgIDxPYnN0YWNsZUFuYWx5c2lzRGFzaGJvYXJkIC8+XG4gICAgICAgICAgICA8L1N1c3BlbnNlPlxuICAgICAgICAgIDwvTWFwU2lkZVBhbmVsPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuLyoqXG4gKiBXcmFwcGVyIGNvbXBvbmVudCBmb3IgdGhlIE1hcmtlckxvY2F0aW9uc01vZGFsIC0gV0lUSCBMQVpZIExPQURJTkdcbiAqIFRoaXMgZW5zdXJlcyB0aGUgbW9kYWwgaGFzIGFjY2VzcyB0byBhbGwgbmVjZXNzYXJ5IGNvbnRleHRcbiAqIGFuZCBpcyByZW5kZXJlZCBhdCB0aGUgYXBwbGljYXRpb24gbGV2ZWxcbiAqL1xuY29uc3QgTWFya2VyTG9jYXRpb25zTW9kYWxXcmFwcGVyOiBSZWFjdC5GQyA9ICgpID0+IHtcbiAgY29uc3QgeyBzaG93TWFya2VyTG9jYXRpb25zTW9kYWwsIHNldFNob3dNYXJrZXJMb2NhdGlvbnNNb2RhbCB9ID0gdXNlQW5hbHlzaXNDb250cm9sbGVyKCk7XG4gIFxuICBpZiAoIXNob3dNYXJrZXJMb2NhdGlvbnNNb2RhbCkgcmV0dXJuIG51bGw7XG4gIFxuICByZXR1cm4gKFxuICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PE1vZGFsTG9hZGluZ1BsYWNlaG9sZGVyIC8+fT5cbiAgICAgIDxNYXJrZXJMb2NhdGlvbnNNb2RhbFxuICAgICAgICBpc09wZW49e3Nob3dNYXJrZXJMb2NhdGlvbnNNb2RhbH1cbiAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0U2hvd01hcmtlckxvY2F0aW9uc01vZGFsKGZhbHNlKX1cbiAgICAgIC8+XG4gICAgPC9TdXNwZW5zZT5cbiAgKTtcbn07XG5cbi8qKlxuICogTGF6eS1sb2FkZWQgVXBncmFkZU1vZGFsIHdyYXBwZXJcbiAqL1xuY29uc3QgVXBncmFkZU1vZGFsV3JhcHBlcjogUmVhY3QuRkMgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgPFN1c3BlbnNlIGZhbGxiYWNrPXtudWxsfT5cbiAgICAgIDxVcGdyYWRlTW9kYWwgLz5cbiAgICA8L1N1c3BlbnNlPlxuICApO1xufTtcblxuLyoqXG4gKiBIb21lIHBhZ2UgY29tcG9uZW50LCB3cmFwcGluZyBjb250ZW50IHdpdGggbmVjZXNzYXJ5IHByb3ZpZGVyc1xuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIb21lKCkge1xuICByZXR1cm4gKFxuICAgIDxNYXBQcm92aWRlcj5cbiAgICAgIDxBbmFseXNpc0NvbnRyb2xsZXJQcm92aWRlcj4gXG4gICAgICAgIDxBcmVhT2ZPcHNQcm92aWRlcj5cbiAgICAgICAgICA8RmxpZ2h0UGxhblByb3ZpZGVyPlxuICAgICAgICAgICAgPEZsaWdodENvbmZpZ3VyYXRpb25Qcm92aWRlcj5cbiAgICAgICAgICAgICAgPFByZW1pdW1Qcm92aWRlcj5cbiAgICAgICAgICAgICAgICA8TWFya2VyUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgICA8TE9TQW5hbHlzaXNQcm92aWRlcj5cbiAgICAgICAgICAgICAgICAgICAgPE9ic3RhY2xlQW5hbHlzaXNQcm92aWRlcj5cbiAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tsaXN0UHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SG9tZUNvbnRlbnQgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxVcGdyYWRlTW9kYWxXcmFwcGVyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TWFya2VyTG9jYXRpb25zTW9kYWxXcmFwcGVyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9DaGVja2xpc3RQcm92aWRlcj5cbiAgICAgICAgICAgICAgICAgICAgPC9PYnN0YWNsZUFuYWx5c2lzUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgICA8L0xPU0FuYWx5c2lzUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgPC9NYXJrZXJQcm92aWRlcj5cbiAgICAgICAgICAgICAgPC9QcmVtaXVtUHJvdmlkZXI+XG4gICAgICAgICAgICA8L0ZsaWdodENvbmZpZ3VyYXRpb25Qcm92aWRlcj5cbiAgICAgICAgICA8L0ZsaWdodFBsYW5Qcm92aWRlcj5cbiAgICAgICAgPC9BcmVhT2ZPcHNQcm92aWRlcj5cbiAgICAgIDwvQW5hbHlzaXNDb250cm9sbGVyUHJvdmlkZXI+XG4gICAgPC9NYXBQcm92aWRlcj5cbiAgKTtcbn0iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsIlN1c3BlbnNlIiwibGF6eSIsIk1hcCIsIkZsaWdodFBsYW5Qcm92aWRlciIsInVzZUZsaWdodFBsYW5Db250ZXh0IiwidXNlQXJlYU9mT3BzQ29udGV4dCIsIk1hcmtlclByb3ZpZGVyIiwiTE9TQW5hbHlzaXNQcm92aWRlciIsIkZsaWdodENvbmZpZ3VyYXRpb25Qcm92aWRlciIsIkFyZWFPZk9wc1Byb3ZpZGVyIiwiQ2hlY2tsaXN0UHJvdmlkZXIiLCJDYXJkIiwiT2JzdGFjbGVBbmFseXNpc1Byb3ZpZGVyIiwiTWFwU2lkZVBhbmVsIiwiQmF0dGVyeSIsIlJhZGlvIiwiTW91bnRhaW4iLCJNYXBQaW4iLCJTZWFyY2giLCJMb2FkZXIyIiwidHJhY2tFdmVudFdpdGhGb3JtIiwidHJhY2tFdmVudCIsIk1hcFByb3ZpZGVyIiwiQW5hbHlzaXNDb250cm9sbGVyUHJvdmlkZXIiLCJ1c2VBbmFseXNpc0NvbnRyb2xsZXIiLCJJbWFnZSIsIlByZW1pdW1Qcm92aWRlciIsIk9ic3RhY2xlQW5hbHlzaXNEYXNoYm9hcmQiLCJBbmFseXNpc0Rhc2hib2FyZCIsIkNhbGN1bGF0b3IiLCJBbmFseXNpc1dpemFyZCIsIkZsaWdodFBsYW5VcGxvYWRlciIsIkFyZWFPcHNVcGxvYWRlciIsIlVwZ3JhZGVNb2RhbCIsIk1hcmtlckxvY2F0aW9uc01vZGFsIiwiQ2hlY2tsaXN0Q29tcG9uZW50IiwiV2VsY29tZU1lc3NhZ2UiLCJNYXBTZWxlY3Rpb25QYW5lbCIsIlRvb2xzRGFzaGJvYXJkIiwiQ29tcGFjdERpc2NsYWltZXJXaWRnZXQiLCJBbmFseXNpc0xvYWRpbmdTcGlubmVyIiwiZGl2IiwiY2xhc3NOYW1lIiwic3BhbiIsIk1vZGFsTG9hZGluZ1BsYWNlaG9sZGVyIiwiSG9tZUNvbnRlbnQiLCJhY3RpdmVQYW5lbCIsInNldEFjdGl2ZVBhbmVsIiwiaW5pdGlhbFNlY3Rpb24iLCJzZXRJbml0aWFsU2VjdGlvbiIsInNob3dVcGxvYWRlciIsInNldFNob3dVcGxvYWRlciIsInNob3dBcmVhT3BzVXBsb2FkZXIiLCJzZXRTaG93QXJlYU9wc1VwbG9hZGVyIiwic2hvd1dpemFyZCIsInNldFNob3dXaXphcmQiLCJzaG93V2VsY29tZU1lc3NhZ2UiLCJzZXRTaG93V2VsY29tZU1lc3NhZ2UiLCJzaG93Q2hlY2tsaXN0Iiwic2V0U2hvd0NoZWNrbGlzdCIsImZsaWdodFBsYW4iLCJzZXRGbGlnaHRQbGFuIiwiYW9HZW9tZXRyeSIsInNob3dNYXJrZXJMb2NhdGlvbnNNb2RhbCIsInNldFNob3dNYXJrZXJMb2NhdGlvbnNNb2RhbCIsImlzTWFwU2VsZWN0aW9uTW9kZSIsInNldElzTWFwU2VsZWN0aW9uTW9kZSIsIm1hcFNlbGVjdGlvbk1vZGUiLCJzZXRNYXBTZWxlY3Rpb25Nb2RlIiwidG9nZ2xlUGFuZWwiLCJwYW5lbCIsInNlY3Rpb24iLCJwcmV2IiwiaGFuZGxlQXJlYU9wcyIsImhhbmRsZVdpemFyZCIsImhhbmRsZUNsb3NlQ2hlY2tsaXN0IiwiaGFuZGxlU3RhcnRNYXBTZWxlY3Rpb24iLCJtb2RlIiwiaGFuZGxlTWFwU2VsZWN0aW9uQ29tcGxldGUiLCJoYW5kbGVNYXBTZWxlY3Rpb25DYW5jZWwiLCJmYWxsYmFjayIsIm9uR2V0U3RhcnRlZCIsIm9uQ2xvc2UiLCJzcmMiLCJhbHQiLCJ3aWR0aCIsImhlaWdodCIsInN0eWxlIiwib2JqZWN0Rml0IiwiaDMiLCJvblN0YXJ0TWFwU2VsZWN0aW9uIiwib25TaG93QXJlYU9wc1VwbG9hZGVyIiwib25QbGFuVXBsb2FkZWQiLCJmbGlnaHREYXRhIiwib25Ub2dnbGVQYW5lbCIsIm9uQ29tcGxldGUiLCJvbkNhbmNlbCIsInRpdGxlIiwiaWNvbiIsImlzRXhwYW5kZWQiLCJvblRvZ2dsZSIsIk1hcmtlckxvY2F0aW9uc01vZGFsV3JhcHBlciIsImlzT3BlbiIsIlVwZ3JhZGVNb2RhbFdyYXBwZXIiLCJIb21lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/page.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/services/BYDAService.ts":
/*!*****************************************!*\
  !*** ./src/app/services/BYDAService.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchBYDALayers: () => (/* binding */ fetchBYDALayers)\n/* harmony export */ });\n/**\n * BYDAService.ts\n * \n * Purpose:\n * Encapsulates logic for fetching DBYD (Dial Before You Dig) powerline data from ArcGIS services.\n * Provides a reusable function to fetch and update map layers, ensuring DRY and Maintainability.\n * \n * Dependencies:\n * - mapbox-gl: For map instance and GeoJSON sources.\n * - @turf/turf: For bounding box calculations.\n * \n * Usage:\n * Imported in useLayers.ts to support toggleDBYDPowerlines.\n */ /**\n * Fetches DBYD powerline data and updates map layers.\n * @param map - Mapbox map instance.\n * @param aoGeometry - Area of Operations geometry for bounding box.\n * @param setLayerVisibility - Function to set layer visibility.\n * @returns Promise resolving to true on success, false on failure.\n */ async function fetchBYDALayers(map, aoGeometry, setLayerVisibility) {\n    const services = [\n        'LUAL_Network_HV_Feature_Public',\n        'LUAL_Network_LV_Feature_Public',\n        'LUAL_Network_SWER_Feature_Public',\n        'LUAL_Network_Other_Feature_Public',\n        'LUAL_Network_Device_Feature_View'\n    ];\n    const serviceLayerMapping = {\n        LUAL_Network_HV_Feature_Public: {\n            sourceId: 'byda-hv-source',\n            layerId: 'byda-hv-layer',\n            color: '#ff0000'\n        },\n        LUAL_Network_LV_Feature_Public: {\n            sourceId: 'byda-lv-source',\n            layerId: 'byda-lv-layer',\n            color: '#ff0000'\n        },\n        LUAL_Network_SWER_Feature_Public: {\n            sourceId: 'byda-swer-source',\n            layerId: 'byda-swer-layer',\n            color: '#ff0000'\n        },\n        LUAL_Network_Other_Feature_Public: {\n            sourceId: 'byda-other-source',\n            layerId: 'byda-other-layer',\n            color: '#ff0000'\n        },\n        LUAL_Network_Device_Feature_View: {\n            sourceId: 'byda-device-source',\n            layerId: 'byda-device-layer',\n            color: '#ff0000'\n        }\n    };\n    const baseUrl = 'https://services-ap1.arcgis.com/ug6sGLFkytbXYo4f/ArcGIS/rest/services';\n    const serviceQueryParams = {\n        LUAL_Network_HV_Feature_Public: {\n            where: \"ASSET_TYPE IN ('US','OH')\",\n            outFields: 'OPERATING_VOLTAGE,OWNER'\n        },\n        LUAL_Network_LV_Feature_Public: {\n            where: \"ASSET_TYPE IN ('US','OH')\",\n            outFields: 'OPERATING_VOLTAGE,OWNER'\n        },\n        LUAL_Network_SWER_Feature_Public: {\n            where: \"ASSET_TYPE IN ('US','OH')\",\n            outFields: 'OWNER,OPERATING_VOLTAGE'\n        },\n        LUAL_Network_Other_Feature_Public: {\n            where: \"ASSET_TYPE IN ('US','OH')\",\n            outFields: 'OWNER,OPERATING_VOLTAGE'\n        },\n        LUAL_Network_Device_Feature_View: {\n            where: '1=1',\n            outFields: 'OWNER,ASSET_TYPE'\n        }\n    };\n    const geometryType = 'esriGeometryEnvelope';\n    const inSR = '4326';\n    const spatialRel = 'esriSpatialRelIntersects';\n    const f = 'geojson';\n    try {\n        // Calculate bounding box from AO geometry\n        const turf = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@turf\"), __webpack_require__.e(\"vendor-chunks/topojson-server\"), __webpack_require__.e(\"vendor-chunks/topojson-client\"), __webpack_require__.e(\"vendor-chunks/d3-voronoi\"), __webpack_require__.e(\"vendor-chunks/skmeans\"), __webpack_require__.e(\"vendor-chunks/point-in-polygon\"), __webpack_require__.e(\"vendor-chunks/rbush\"), __webpack_require__.e(\"vendor-chunks/splaytree-ts\"), __webpack_require__.e(\"vendor-chunks/polyclip-ts\"), __webpack_require__.e(\"vendor-chunks/geojson-equality-ts\"), __webpack_require__.e(\"vendor-chunks/bignumber.js\"), __webpack_require__.e(\"vendor-chunks/tinyqueue\"), __webpack_require__.e(\"vendor-chunks/sweepline-intersections\"), __webpack_require__.e(\"vendor-chunks/robust-predicates\"), __webpack_require__.e(\"vendor-chunks/marchingsquares\"), __webpack_require__.e(\"vendor-chunks/fast-deep-equal\"), __webpack_require__.e(\"vendor-chunks/earcut\"), __webpack_require__.e(\"vendor-chunks/concaveman\")]).then(__webpack_require__.bind(__webpack_require__, /*! @turf/turf */ \"(ssr)/./node_modules/@turf/turf/dist/esm/index.js\"));\n        const boundingBox = turf.bbox(aoGeometry);\n        const geometry = boundingBox.join(',');\n        // Fetch data for each service\n        const fetchPromises = services.map(async (service)=>{\n            const params = serviceQueryParams[service];\n            const queryParams = new URLSearchParams({\n                where: params.where,\n                geometry,\n                geometryType,\n                inSR,\n                spatialRel,\n                outFields: params.outFields,\n                returnGeometry: 'true',\n                f\n            });\n            const queryUrl = `${baseUrl}/${service}/FeatureServer/0/query?${queryParams.toString()}`;\n            try {\n                const res = await fetch(queryUrl);\n                const data = await res.json();\n                const { sourceId, layerId } = serviceLayerMapping[service];\n                // Ensure source exists\n                if (!map.getSource(sourceId)) {\n                    map.addSource(sourceId, {\n                        type: 'geojson',\n                        data: {\n                            type: 'FeatureCollection',\n                            features: []\n                        }\n                    });\n                }\n                // Update source data\n                const existingSource = map.getSource(sourceId);\n                if (existingSource) {\n                    existingSource.setData(data.features && data.features.length > 0 ? data : {\n                        type: 'FeatureCollection',\n                        features: []\n                    });\n                    setLayerVisibility(layerId, data.features && data.features.length > 0);\n                } else {\n                    console.warn(`[BYDAService] Source \"${sourceId}\" not found after adding.`);\n                }\n            } catch (error) {\n                console.error(`[BYDAService] Error fetching ${service}:`, error);\n                throw error;\n            }\n        });\n        await Promise.all(fetchPromises);\n        console.log('[BYDAService] All DBYD layers fetched successfully');\n        return true;\n    } catch (error) {\n        console.error('[BYDAService] Failed to fetch DBYD layers:', error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL3NlcnZpY2VzL0JZREFTZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Ozs7Ozs7Ozs7OztDQWFDLEdBRUQ7Ozs7OztDQU1DLEdBQ00sZUFBZUEsZ0JBQ2xCQyxHQUFpQixFQUNqQkMsVUFBcUMsRUFDckNDLGtCQUErRDtJQUUvRCxNQUFNQyxXQUFXO1FBQ2Y7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBRUQsTUFBTUMsc0JBR0Y7UUFDRkMsZ0NBQWdDO1lBQzlCQyxVQUFVO1lBQ1ZDLFNBQVM7WUFDVEMsT0FBTztRQUNUO1FBQ0FDLGdDQUFnQztZQUM5QkgsVUFBVTtZQUNWQyxTQUFTO1lBQ1RDLE9BQU87UUFDVDtRQUNBRSxrQ0FBa0M7WUFDaENKLFVBQVU7WUFDVkMsU0FBUztZQUNUQyxPQUFPO1FBQ1Q7UUFDQUcsbUNBQW1DO1lBQ2pDTCxVQUFVO1lBQ1ZDLFNBQVM7WUFDVEMsT0FBTztRQUNUO1FBQ0FJLGtDQUFrQztZQUNoQ04sVUFBVTtZQUNWQyxTQUFTO1lBQ1RDLE9BQU87UUFDVDtJQUNGO0lBRUEsTUFBTUssVUFBVTtJQUVoQixNQUFNQyxxQkFBMkU7UUFDL0VULGdDQUFnQztZQUM5QlUsT0FBTztZQUNQQyxXQUFXO1FBQ2I7UUFDQVAsZ0NBQWdDO1lBQzlCTSxPQUFPO1lBQ1BDLFdBQVc7UUFDYjtRQUNBTixrQ0FBa0M7WUFDaENLLE9BQU87WUFDUEMsV0FBVztRQUNiO1FBQ0FMLG1DQUFtQztZQUNqQ0ksT0FBTztZQUNQQyxXQUFXO1FBQ2I7UUFDQUosa0NBQWtDO1lBQ2hDRyxPQUFPO1lBQ1BDLFdBQVc7UUFDYjtJQUNGO0lBRUEsTUFBTUMsZUFBZTtJQUNyQixNQUFNQyxPQUFPO0lBQ2IsTUFBTUMsYUFBYTtJQUNuQixNQUFNQyxJQUFJO0lBRVYsSUFBSTtRQUNGLDBDQUEwQztRQUMxQyxNQUFNQyxPQUFPLE1BQU0sdWxDQUFvQjtRQUN2QyxNQUFNQyxjQUFjRCxLQUFLRSxJQUFJLENBQUN0QjtRQUM5QixNQUFNdUIsV0FBV0YsWUFBWUcsSUFBSSxDQUFDO1FBRWxDLDhCQUE4QjtRQUM5QixNQUFNQyxnQkFBZ0J2QixTQUFTSCxHQUFHLENBQUMsT0FBTzJCO1lBQ3hDLE1BQU1DLFNBQVNkLGtCQUFrQixDQUFDYSxRQUFRO1lBQzFDLE1BQU1FLGNBQWMsSUFBSUMsZ0JBQWdCO2dCQUN0Q2YsT0FBT2EsT0FBT2IsS0FBSztnQkFDbkJTO2dCQUNBUDtnQkFDQUM7Z0JBQ0FDO2dCQUNBSCxXQUFXWSxPQUFPWixTQUFTO2dCQUMzQmUsZ0JBQWdCO2dCQUNoQlg7WUFDRjtZQUNBLE1BQU1ZLFdBQVcsR0FBR25CLFFBQVEsQ0FBQyxFQUFFYyxRQUFRLHVCQUF1QixFQUFFRSxZQUFZSSxRQUFRLElBQUk7WUFFeEYsSUFBSTtnQkFDRixNQUFNQyxNQUFNLE1BQU1DLE1BQU1IO2dCQUN4QixNQUFNSSxPQUFPLE1BQU1GLElBQUlHLElBQUk7Z0JBQzNCLE1BQU0sRUFBRS9CLFFBQVEsRUFBRUMsT0FBTyxFQUFFLEdBQUdILG1CQUFtQixDQUFDdUIsUUFBUTtnQkFFMUQsdUJBQXVCO2dCQUN2QixJQUFJLENBQUMzQixJQUFJc0MsU0FBUyxDQUFDaEMsV0FBVztvQkFDNUJOLElBQUl1QyxTQUFTLENBQUNqQyxVQUFVO3dCQUN0QmtDLE1BQU07d0JBQ05KLE1BQU07NEJBQUVJLE1BQU07NEJBQXFCQyxVQUFVLEVBQUU7d0JBQUM7b0JBQ2xEO2dCQUNGO2dCQUVBLHFCQUFxQjtnQkFDckIsTUFBTUMsaUJBQWlCMUMsSUFBSXNDLFNBQVMsQ0FBQ2hDO2dCQUNyQyxJQUFJb0MsZ0JBQWdCO29CQUNsQkEsZUFBZUMsT0FBTyxDQUNwQlAsS0FBS0ssUUFBUSxJQUFJTCxLQUFLSyxRQUFRLENBQUNHLE1BQU0sR0FBRyxJQUNwQ1IsT0FDQTt3QkFBRUksTUFBTTt3QkFBcUJDLFVBQVUsRUFBRTtvQkFBQztvQkFFaER2QyxtQkFBbUJLLFNBQVM2QixLQUFLSyxRQUFRLElBQUlMLEtBQUtLLFFBQVEsQ0FBQ0csTUFBTSxHQUFHO2dCQUN0RSxPQUFPO29CQUNMQyxRQUFRQyxJQUFJLENBQUMsQ0FBQyxzQkFBc0IsRUFBRXhDLFNBQVMseUJBQXlCLENBQUM7Z0JBQzNFO1lBQ0YsRUFBRSxPQUFPeUMsT0FBTztnQkFDZEYsUUFBUUUsS0FBSyxDQUFDLENBQUMsNkJBQTZCLEVBQUVwQixRQUFRLENBQUMsQ0FBQyxFQUFFb0I7Z0JBQzFELE1BQU1BO1lBQ1I7UUFDRjtRQUVBLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ3ZCO1FBQ2xCbUIsUUFBUUssR0FBRyxDQUFDO1FBQ1osT0FBTztJQUNULEVBQUUsT0FBT0gsT0FBTztRQUNkRixRQUFRRSxLQUFLLENBQUMsOENBQThDQTtRQUM1RCxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvc2VydmljZXMvQllEQVNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBCWURBU2VydmljZS50c1xuICogXG4gKiBQdXJwb3NlOlxuICogRW5jYXBzdWxhdGVzIGxvZ2ljIGZvciBmZXRjaGluZyBEQllEIChEaWFsIEJlZm9yZSBZb3UgRGlnKSBwb3dlcmxpbmUgZGF0YSBmcm9tIEFyY0dJUyBzZXJ2aWNlcy5cbiAqIFByb3ZpZGVzIGEgcmV1c2FibGUgZnVuY3Rpb24gdG8gZmV0Y2ggYW5kIHVwZGF0ZSBtYXAgbGF5ZXJzLCBlbnN1cmluZyBEUlkgYW5kIE1haW50YWluYWJpbGl0eS5cbiAqIFxuICogRGVwZW5kZW5jaWVzOlxuICogLSBtYXBib3gtZ2w6IEZvciBtYXAgaW5zdGFuY2UgYW5kIEdlb0pTT04gc291cmNlcy5cbiAqIC0gQHR1cmYvdHVyZjogRm9yIGJvdW5kaW5nIGJveCBjYWxjdWxhdGlvbnMuXG4gKiBcbiAqIFVzYWdlOlxuICogSW1wb3J0ZWQgaW4gdXNlTGF5ZXJzLnRzIHRvIHN1cHBvcnQgdG9nZ2xlREJZRFBvd2VybGluZXMuXG4gKi9cblxuLyoqXG4gKiBGZXRjaGVzIERCWUQgcG93ZXJsaW5lIGRhdGEgYW5kIHVwZGF0ZXMgbWFwIGxheWVycy5cbiAqIEBwYXJhbSBtYXAgLSBNYXBib3ggbWFwIGluc3RhbmNlLlxuICogQHBhcmFtIGFvR2VvbWV0cnkgLSBBcmVhIG9mIE9wZXJhdGlvbnMgZ2VvbWV0cnkgZm9yIGJvdW5kaW5nIGJveC5cbiAqIEBwYXJhbSBzZXRMYXllclZpc2liaWxpdHkgLSBGdW5jdGlvbiB0byBzZXQgbGF5ZXIgdmlzaWJpbGl0eS5cbiAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIHRydWUgb24gc3VjY2VzcywgZmFsc2Ugb24gZmFpbHVyZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQllEQUxheWVycyhcbiAgICBtYXA6IG1hcGJveGdsLk1hcCxcbiAgICBhb0dlb21ldHJ5OiBHZW9KU09OLkZlYXR1cmVDb2xsZWN0aW9uLFxuICAgIHNldExheWVyVmlzaWJpbGl0eTogKGxheWVySWQ6IHN0cmluZywgdmlzaWJsZTogYm9vbGVhbikgPT4gdm9pZFxuICApOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBzZXJ2aWNlcyA9IFtcbiAgICAgICdMVUFMX05ldHdvcmtfSFZfRmVhdHVyZV9QdWJsaWMnLFxuICAgICAgJ0xVQUxfTmV0d29ya19MVl9GZWF0dXJlX1B1YmxpYycsXG4gICAgICAnTFVBTF9OZXR3b3JrX1NXRVJfRmVhdHVyZV9QdWJsaWMnLFxuICAgICAgJ0xVQUxfTmV0d29ya19PdGhlcl9GZWF0dXJlX1B1YmxpYycsXG4gICAgICAnTFVBTF9OZXR3b3JrX0RldmljZV9GZWF0dXJlX1ZpZXcnLFxuICAgIF07XG4gIFxuICAgIGNvbnN0IHNlcnZpY2VMYXllck1hcHBpbmc6IFJlY29yZDxcbiAgICAgIHN0cmluZyxcbiAgICAgIHsgc291cmNlSWQ6IHN0cmluZzsgbGF5ZXJJZDogc3RyaW5nOyBjb2xvcjogc3RyaW5nIH1cbiAgICA+ID0ge1xuICAgICAgTFVBTF9OZXR3b3JrX0hWX0ZlYXR1cmVfUHVibGljOiB7XG4gICAgICAgIHNvdXJjZUlkOiAnYnlkYS1odi1zb3VyY2UnLFxuICAgICAgICBsYXllcklkOiAnYnlkYS1odi1sYXllcicsXG4gICAgICAgIGNvbG9yOiAnI2ZmMDAwMCcsXG4gICAgICB9LFxuICAgICAgTFVBTF9OZXR3b3JrX0xWX0ZlYXR1cmVfUHVibGljOiB7XG4gICAgICAgIHNvdXJjZUlkOiAnYnlkYS1sdi1zb3VyY2UnLFxuICAgICAgICBsYXllcklkOiAnYnlkYS1sdi1sYXllcicsXG4gICAgICAgIGNvbG9yOiAnI2ZmMDAwMCcsXG4gICAgICB9LFxuICAgICAgTFVBTF9OZXR3b3JrX1NXRVJfRmVhdHVyZV9QdWJsaWM6IHtcbiAgICAgICAgc291cmNlSWQ6ICdieWRhLXN3ZXItc291cmNlJyxcbiAgICAgICAgbGF5ZXJJZDogJ2J5ZGEtc3dlci1sYXllcicsXG4gICAgICAgIGNvbG9yOiAnI2ZmMDAwMCcsXG4gICAgICB9LFxuICAgICAgTFVBTF9OZXR3b3JrX090aGVyX0ZlYXR1cmVfUHVibGljOiB7XG4gICAgICAgIHNvdXJjZUlkOiAnYnlkYS1vdGhlci1zb3VyY2UnLFxuICAgICAgICBsYXllcklkOiAnYnlkYS1vdGhlci1sYXllcicsXG4gICAgICAgIGNvbG9yOiAnI2ZmMDAwMCcsXG4gICAgICB9LFxuICAgICAgTFVBTF9OZXR3b3JrX0RldmljZV9GZWF0dXJlX1ZpZXc6IHtcbiAgICAgICAgc291cmNlSWQ6ICdieWRhLWRldmljZS1zb3VyY2UnLFxuICAgICAgICBsYXllcklkOiAnYnlkYS1kZXZpY2UtbGF5ZXInLFxuICAgICAgICBjb2xvcjogJyNmZjAwMDAnLFxuICAgICAgfSxcbiAgICB9O1xuICBcbiAgICBjb25zdCBiYXNlVXJsID0gJ2h0dHBzOi8vc2VydmljZXMtYXAxLmFyY2dpcy5jb20vdWc2c0dMRmt5dGJYWW80Zi9BcmNHSVMvcmVzdC9zZXJ2aWNlcyc7XG4gIFxuICAgIGNvbnN0IHNlcnZpY2VRdWVyeVBhcmFtczogUmVjb3JkPHN0cmluZywgeyB3aGVyZTogc3RyaW5nOyBvdXRGaWVsZHM6IHN0cmluZyB9PiA9IHtcbiAgICAgIExVQUxfTmV0d29ya19IVl9GZWF0dXJlX1B1YmxpYzoge1xuICAgICAgICB3aGVyZTogXCJBU1NFVF9UWVBFIElOICgnVVMnLCdPSCcpXCIsXG4gICAgICAgIG91dEZpZWxkczogJ09QRVJBVElOR19WT0xUQUdFLE9XTkVSJyxcbiAgICAgIH0sXG4gICAgICBMVUFMX05ldHdvcmtfTFZfRmVhdHVyZV9QdWJsaWM6IHtcbiAgICAgICAgd2hlcmU6IFwiQVNTRVRfVFlQRSBJTiAoJ1VTJywnT0gnKVwiLFxuICAgICAgICBvdXRGaWVsZHM6ICdPUEVSQVRJTkdfVk9MVEFHRSxPV05FUicsXG4gICAgICB9LFxuICAgICAgTFVBTF9OZXR3b3JrX1NXRVJfRmVhdHVyZV9QdWJsaWM6IHtcbiAgICAgICAgd2hlcmU6IFwiQVNTRVRfVFlQRSBJTiAoJ1VTJywnT0gnKVwiLFxuICAgICAgICBvdXRGaWVsZHM6ICdPV05FUixPUEVSQVRJTkdfVk9MVEFHRScsXG4gICAgICB9LFxuICAgICAgTFVBTF9OZXR3b3JrX090aGVyX0ZlYXR1cmVfUHVibGljOiB7XG4gICAgICAgIHdoZXJlOiBcIkFTU0VUX1RZUEUgSU4gKCdVUycsJ09IJylcIixcbiAgICAgICAgb3V0RmllbGRzOiAnT1dORVIsT1BFUkFUSU5HX1ZPTFRBR0UnLFxuICAgICAgfSxcbiAgICAgIExVQUxfTmV0d29ya19EZXZpY2VfRmVhdHVyZV9WaWV3OiB7XG4gICAgICAgIHdoZXJlOiAnMT0xJyxcbiAgICAgICAgb3V0RmllbGRzOiAnT1dORVIsQVNTRVRfVFlQRScsXG4gICAgICB9LFxuICAgIH07XG4gIFxuICAgIGNvbnN0IGdlb21ldHJ5VHlwZSA9ICdlc3JpR2VvbWV0cnlFbnZlbG9wZSc7XG4gICAgY29uc3QgaW5TUiA9ICc0MzI2JztcbiAgICBjb25zdCBzcGF0aWFsUmVsID0gJ2VzcmlTcGF0aWFsUmVsSW50ZXJzZWN0cyc7XG4gICAgY29uc3QgZiA9ICdnZW9qc29uJztcbiAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIENhbGN1bGF0ZSBib3VuZGluZyBib3ggZnJvbSBBTyBnZW9tZXRyeVxuICAgICAgY29uc3QgdHVyZiA9IGF3YWl0IGltcG9ydCgnQHR1cmYvdHVyZicpO1xuICAgICAgY29uc3QgYm91bmRpbmdCb3ggPSB0dXJmLmJib3goYW9HZW9tZXRyeSkgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gICAgICBjb25zdCBnZW9tZXRyeSA9IGJvdW5kaW5nQm94LmpvaW4oJywnKTtcbiAgXG4gICAgICAvLyBGZXRjaCBkYXRhIGZvciBlYWNoIHNlcnZpY2VcbiAgICAgIGNvbnN0IGZldGNoUHJvbWlzZXMgPSBzZXJ2aWNlcy5tYXAoYXN5bmMgKHNlcnZpY2UpID0+IHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gc2VydmljZVF1ZXJ5UGFyYW1zW3NlcnZpY2VdO1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgIHdoZXJlOiBwYXJhbXMud2hlcmUsXG4gICAgICAgICAgZ2VvbWV0cnksXG4gICAgICAgICAgZ2VvbWV0cnlUeXBlLFxuICAgICAgICAgIGluU1IsXG4gICAgICAgICAgc3BhdGlhbFJlbCxcbiAgICAgICAgICBvdXRGaWVsZHM6IHBhcmFtcy5vdXRGaWVsZHMsXG4gICAgICAgICAgcmV0dXJuR2VvbWV0cnk6ICd0cnVlJyxcbiAgICAgICAgICBmLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcXVlcnlVcmwgPSBgJHtiYXNlVXJsfS8ke3NlcnZpY2V9L0ZlYXR1cmVTZXJ2ZXIvMC9xdWVyeT8ke3F1ZXJ5UGFyYW1zLnRvU3RyaW5nKCl9YDtcbiAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2gocXVlcnlVcmwpO1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICAgIGNvbnN0IHsgc291cmNlSWQsIGxheWVySWQgfSA9IHNlcnZpY2VMYXllck1hcHBpbmdbc2VydmljZV07XG4gIFxuICAgICAgICAgIC8vIEVuc3VyZSBzb3VyY2UgZXhpc3RzXG4gICAgICAgICAgaWYgKCFtYXAuZ2V0U291cmNlKHNvdXJjZUlkKSkge1xuICAgICAgICAgICAgbWFwLmFkZFNvdXJjZShzb3VyY2VJZCwge1xuICAgICAgICAgICAgICB0eXBlOiAnZ2VvanNvbicsXG4gICAgICAgICAgICAgIGRhdGE6IHsgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywgZmVhdHVyZXM6IFtdIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIC8vIFVwZGF0ZSBzb3VyY2UgZGF0YVxuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU291cmNlID0gbWFwLmdldFNvdXJjZShzb3VyY2VJZCkgYXMgbWFwYm94Z2wuR2VvSlNPTlNvdXJjZTtcbiAgICAgICAgICBpZiAoZXhpc3RpbmdTb3VyY2UpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nU291cmNlLnNldERhdGEoXG4gICAgICAgICAgICAgIGRhdGEuZmVhdHVyZXMgJiYgZGF0YS5mZWF0dXJlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyBkYXRhXG4gICAgICAgICAgICAgICAgOiB7IHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsIGZlYXR1cmVzOiBbXSB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgc2V0TGF5ZXJWaXNpYmlsaXR5KGxheWVySWQsIGRhdGEuZmVhdHVyZXMgJiYgZGF0YS5mZWF0dXJlcy5sZW5ndGggPiAwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbQllEQVNlcnZpY2VdIFNvdXJjZSBcIiR7c291cmNlSWR9XCIgbm90IGZvdW5kIGFmdGVyIGFkZGluZy5gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW0JZREFTZXJ2aWNlXSBFcnJvciBmZXRjaGluZyAke3NlcnZpY2V9OmAsIGVycm9yKTtcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIFxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoZmV0Y2hQcm9taXNlcyk7XG4gICAgICBjb25zb2xlLmxvZygnW0JZREFTZXJ2aWNlXSBBbGwgREJZRCBsYXllcnMgZmV0Y2hlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQllEQVNlcnZpY2VdIEZhaWxlZCB0byBmZXRjaCBEQllEIGxheWVyczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9Il0sIm5hbWVzIjpbImZldGNoQllEQUxheWVycyIsIm1hcCIsImFvR2VvbWV0cnkiLCJzZXRMYXllclZpc2liaWxpdHkiLCJzZXJ2aWNlcyIsInNlcnZpY2VMYXllck1hcHBpbmciLCJMVUFMX05ldHdvcmtfSFZfRmVhdHVyZV9QdWJsaWMiLCJzb3VyY2VJZCIsImxheWVySWQiLCJjb2xvciIsIkxVQUxfTmV0d29ya19MVl9GZWF0dXJlX1B1YmxpYyIsIkxVQUxfTmV0d29ya19TV0VSX0ZlYXR1cmVfUHVibGljIiwiTFVBTF9OZXR3b3JrX090aGVyX0ZlYXR1cmVfUHVibGljIiwiTFVBTF9OZXR3b3JrX0RldmljZV9GZWF0dXJlX1ZpZXciLCJiYXNlVXJsIiwic2VydmljZVF1ZXJ5UGFyYW1zIiwid2hlcmUiLCJvdXRGaWVsZHMiLCJnZW9tZXRyeVR5cGUiLCJpblNSIiwic3BhdGlhbFJlbCIsImYiLCJ0dXJmIiwiYm91bmRpbmdCb3giLCJiYm94IiwiZ2VvbWV0cnkiLCJqb2luIiwiZmV0Y2hQcm9taXNlcyIsInNlcnZpY2UiLCJwYXJhbXMiLCJxdWVyeVBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInJldHVybkdlb21ldHJ5IiwicXVlcnlVcmwiLCJ0b1N0cmluZyIsInJlcyIsImZldGNoIiwiZGF0YSIsImpzb24iLCJnZXRTb3VyY2UiLCJhZGRTb3VyY2UiLCJ0eXBlIiwiZmVhdHVyZXMiLCJleGlzdGluZ1NvdXJjZSIsInNldERhdGEiLCJsZW5ndGgiLCJjb25zb2xlIiwid2FybiIsImVycm9yIiwiUHJvbWlzZSIsImFsbCIsImxvZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/services/BYDAService.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/services/ElevationService.ts":
/*!**********************************************!*\
  !*** ./src/app/services/ElevationService.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ElevationService: () => (/* binding */ ElevationService)\n/* harmony export */ });\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/helpers/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/bbox/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/point-grid/dist/esm/index.js\");\n/**\n * ElevationService.ts\n * \n * Optimized service for terrain elevation data access.\n * Provides caching, batch queries, preloading, and efficient fallback mechanisms\n * with minimal overhead. Replaces and enhances TerrainUtils functionality.\n */ \nclass ElevationService {\n    constructor(map){\n        this.cache = new Map();\n        this.MAX_CACHE_SIZE = 10000;\n        this.terrainReady = false;\n        this.isPreloading = false;\n        this.map = map;\n        this.ensureTerrainReady();\n    }\n    /**\n   * Creates cache key from coordinates\n   */ key(lon, lat) {\n        return `${lon.toFixed(4)}|${lat.toFixed(4)}`;\n    }\n    /**\n   * Ensures terrain layer is ready for queries with enhanced reliability\n   */ async ensureTerrainReady() {\n        if (this.terrainReady) return;\n        if (!this.map.getSource(\"mapbox-dem\")) {\n            console.log(`[${new Date().toISOString()}] [ElevationService] Adding DEM source`);\n            this.map.addSource(\"mapbox-dem\", {\n                type: \"raster-dem\",\n                url: \"mapbox://mapbox.mapbox-terrain-dem-v1\",\n                tileSize: 512,\n                maxzoom: 15\n            });\n            this.map.setTerrain({\n                source: \"mapbox-dem\",\n                exaggeration: 1.0\n            });\n        }\n        // Enhanced reliability: Wait for source to be loaded with timeout and retry\n        if (!this.map.isSourceLoaded(\"mapbox-dem\")) {\n            const maxRetries = 3;\n            let retries = 0;\n            while(retries < maxRetries){\n                try {\n                    await new Promise((resolve, reject)=>{\n                        const checkDEM = ()=>{\n                            if (this.map.isSourceLoaded(\"mapbox-dem\")) {\n                                this.map.off(\"sourcedata\", checkDEM);\n                                resolve();\n                            }\n                        };\n                        this.map.on(\"sourcedata\", checkDEM);\n                        // Initial check in case it's already loaded\n                        if (this.map.isSourceLoaded(\"mapbox-dem\")) {\n                            this.map.off(\"sourcedata\", checkDEM);\n                            resolve();\n                        }\n                        // Timeout safety\n                        setTimeout(()=>{\n                            this.map.off(\"sourcedata\", checkDEM);\n                            reject(new Error(\"DEM source loading timeout\"));\n                        }, 5000);\n                    });\n                    break;\n                } catch (error) {\n                    retries++;\n                    console.warn(`[${new Date().toISOString()}] [ElevationService] DEM loading retry ${retries}/${maxRetries}`);\n                    // Last retry failed, continue anyway\n                    if (retries >= maxRetries) {\n                        console.warn(`[${new Date().toISOString()}] [ElevationService] Max retries reached, proceeding with warning`);\n                    }\n                }\n            }\n        }\n        // Validate DEM with sample queries\n        await this.validateDEM();\n        this.terrainReady = true;\n        console.log(`[${new Date().toISOString()}] [ElevationService] Terrain ready`);\n    }\n    /**\n   * Validates that DEM data is available using sample points\n   */ async validateDEM() {\n        const center = this.map.getCenter();\n        const testPoints = [\n            [\n                center.lng,\n                center.lat\n            ],\n            [\n                center.lng + 0.01,\n                center.lat\n            ],\n            [\n                center.lng,\n                center.lat + 0.01\n            ]\n        ];\n        const elevations = await Promise.all(testPoints.map((point)=>this.map.queryTerrainElevation(point)));\n        const validElevations = elevations.filter((e)=>e !== null && e !== 0);\n        const isValid = validElevations.length > 0;\n        if (!isValid) {\n            console.warn(`[${new Date().toISOString()}] [ElevationService] DEM validation failed:`, elevations.map((e, i)=>`[${testPoints[i]}]: ${e !== null ? e : 'null'}m`).join(', '));\n        } else {\n            console.log(`[${new Date().toISOString()}] [ElevationService] DEM validation successful:`, validElevations.map((v, i)=>`[${testPoints[i]}]: ${v}m`).join(', '));\n        }\n        return isValid;\n    }\n    /**\n   * Preloads elevation data for an area of interest based on coordinates.\n   * Replaces TerrainUtils.preloadTiles with more efficient implementation.\n   */ async preloadArea(coordinates) {\n        if (this.isPreloading || !coordinates.length) return;\n        try {\n            this.isPreloading = true;\n            await this.ensureTerrainReady();\n            console.log(`[${new Date().toISOString()}] [ElevationService] Preloading terrain for ${coordinates.length} coordinates`);\n            // Create a bounding box around coordinates\n            const points = coordinates.map((coord)=>_turf_turf__WEBPACK_IMPORTED_MODULE_0__.point([\n                    coord[0],\n                    coord[1]\n                ]));\n            const featureCollection = _turf_turf__WEBPACK_IMPORTED_MODULE_0__.featureCollection(points);\n            const bbox = _turf_turf__WEBPACK_IMPORTED_MODULE_1__.bbox(featureCollection);\n            // Generate sample points within the bbox for more efficient coverage\n            const samplePoints = _turf_turf__WEBPACK_IMPORTED_MODULE_2__.pointGrid(bbox, 100, {\n                units: 'meters'\n            }).features.map((f)=>f.geometry.coordinates).slice(0, 100); // Limit number of sample points\n            // Query sample points to load tiles\n            const BATCH_SIZE = 20;\n            for(let i = 0; i < samplePoints.length; i += BATCH_SIZE){\n                const batch = samplePoints.slice(i, i + BATCH_SIZE);\n                await Promise.all(batch.map(([lon, lat])=>this.map.queryTerrainElevation([\n                        lon,\n                        lat\n                    ])));\n                await new Promise((resolve)=>setTimeout(resolve, 10)); // Smaller delay for efficiency\n            }\n            // Also query original coordinates to ensure they're loaded\n            const waypoints = coordinates.map((coord)=>[\n                    coord[0],\n                    coord[1]\n                ]);\n            await this.batchGetElevations(waypoints, true);\n            console.log(`[${new Date().toISOString()}] [ElevationService] Terrain preloading completed`);\n        } catch (error) {\n            console.warn(`[${new Date().toISOString()}] [ElevationService] Preloading error:`, error);\n        } finally{\n            this.isPreloading = false;\n        }\n    }\n    /**\n   * Gets elevation for a single coordinate with optimized caching\n   */ async getElevation(lon, lat) {\n        const cacheKey = this.key(lon, lat);\n        if (this.cache.has(cacheKey)) {\n            return this.cache.get(cacheKey);\n        }\n        await this.ensureTerrainReady();\n        try {\n            const elev = this.map.queryTerrainElevation([\n                lon,\n                lat\n            ]);\n            if (elev !== null && elev !== undefined) {\n                // Cache all valid elevation values, including zero\n                // Zero is a valid elevation (e.g., sea level, water bodies)\n                this.cache.set(cacheKey, elev);\n                // Simple LRU cache management\n                if (this.cache.size > this.MAX_CACHE_SIZE) {\n                    const firstKey = this.cache.keys().next().value;\n                    this.cache.delete(firstKey);\n                }\n                return elev;\n            }\n        } catch (error) {\n            console.warn(`[${new Date().toISOString()}] [ElevationService] Terrain query error at [${lon}, ${lat}]:`, error);\n        }\n        // Enhanced fallback: Only use when we got null or undefined (not for zero)\n        try {\n            const gridSize = 0.0002; // Small grid for neighboring points\n            const neighbors = [\n                [\n                    lon + gridSize,\n                    lat\n                ],\n                [\n                    lon - gridSize,\n                    lat\n                ],\n                [\n                    lon,\n                    lat + gridSize\n                ],\n                [\n                    lon,\n                    lat - gridSize\n                ]\n            ];\n            const elevations = await Promise.all(neighbors.map(([nlon, nlat])=>this.map.queryTerrainElevation([\n                    nlon,\n                    nlat\n                ])));\n            const validElevations = elevations.filter((e)=>e !== null && e !== undefined);\n            if (validElevations.length > 0) {\n                const avgElev = validElevations.reduce((sum, e)=>sum + e, 0) / validElevations.length;\n                this.cache.set(cacheKey, avgElev);\n                return avgElev;\n            }\n        } catch (error) {\n            console.warn(`[${new Date().toISOString()}] [ElevationService] Fallback query error:`, error);\n        }\n        return 0; // Final fallback\n    }\n    /**\n   * Batch query for multiple coordinates with optimized processing\n   * Replaces and enhances TerrainUtils.getReliableTerrainElevations\n   */ async batchGetElevations(points, skipPreload = false, progressCallback) {\n        if (!skipPreload) {\n            const coords = points.map((p)=>[\n                    ...p,\n                    0\n                ]);\n            await this.preloadArea(coords);\n        }\n        console.log(`[${new Date().toISOString()}] [ElevationService] Batch querying elevations for ${points.length} points`);\n        // Process in batches for better performance\n        const BATCH_SIZE = 100;\n        const results = [];\n        for(let i = 0; i < points.length; i += BATCH_SIZE){\n            const batch = points.slice(i, i + BATCH_SIZE);\n            const batchResults = await Promise.all(batch.map(async ([lon, lat])=>{\n                const cacheKey = this.key(lon, lat);\n                if (this.cache.has(cacheKey)) {\n                    return this.cache.get(cacheKey);\n                }\n                try {\n                    const elevation = this.map.queryTerrainElevation([\n                        lon,\n                        lat\n                    ]);\n                    if (elevation !== null && elevation !== undefined) {\n                        // Cache all valid elevation values, including zero (sea level)\n                        this.cache.set(cacheKey, elevation);\n                        return elevation;\n                    }\n                } catch (e) {\n                // Silent fail and continue to fallback\n                }\n                // Try fallback with nearby points ONLY when we got null/undefined (not for zero)\n                try {\n                    const offset = 0.0002;\n                    const neighbors = [\n                        [\n                            lon + offset,\n                            lat\n                        ],\n                        [\n                            lon - offset,\n                            lat\n                        ],\n                        [\n                            lon,\n                            lat + offset\n                        ],\n                        [\n                            lon,\n                            lat - offset\n                        ]\n                    ];\n                    const neighborElevations = await Promise.all(neighbors.map(([nlon, nlat])=>this.map.queryTerrainElevation([\n                            nlon,\n                            nlat\n                        ])));\n                    const validElevations = neighborElevations.filter((e)=>e !== null && e !== undefined);\n                    if (validElevations.length > 0) {\n                        const avgElev = validElevations.reduce((sum, e)=>sum + e, 0) / validElevations.length;\n                        this.cache.set(cacheKey, avgElev);\n                        return avgElev;\n                    }\n                } catch (e) {\n                // Silent fail and return 0\n                }\n                return 0;\n            }));\n            results.push(...batchResults);\n            // Report progress if callback provided\n            if (progressCallback) {\n                const progress = Math.min(100, Math.round((i + BATCH_SIZE) / points.length * 100));\n                progressCallback(progress);\n            }\n            // Allow UI thread to breathe between large batches\n            if (i + BATCH_SIZE < points.length) {\n                await new Promise((resolve)=>setTimeout(resolve, 0));\n            }\n        }\n        return results;\n    }\n    /**\n   * Gets reliable terrain elevations with enhanced fallback mechanisms.\n   * Direct replacement for TerrainUtils.getReliableTerrainElevations.\n   */ async getReliableTerrainElevations(coordinates, progressCallback) {\n        return this.batchGetElevations(coordinates, false, progressCallback);\n    }\n    /**\n   * Ensures DEM data is loaded and validated.\n   * Direct replacement for TerrainUtils.ensureDEMLoaded.\n   */ async ensureDEM() {\n        await this.ensureTerrainReady();\n    }\n    /**\n   * Preloads DEM tiles for a set of coordinates.\n   * Direct replacement for TerrainUtils.preloadTiles.\n   */ async preloadTiles(coordinates) {\n        await this.preloadArea(coordinates);\n    }\n    /**\n   * Clear cache to free memory\n   */ clearCache() {\n        console.log(`[${new Date().toISOString()}] [ElevationService] Clearing elevation cache with ${this.cache.size} entries`);\n        this.cache.clear();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL3NlcnZpY2VzL0VsZXZhdGlvblNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Ozs7Q0FNQyxHQUVrQztBQUU1QixNQUFNQztJQU9YQyxZQUFZQyxHQUFpQixDQUFFO2FBTHZCQyxRQUE2QixJQUFJQzthQUN4QkMsaUJBQWlCO2FBQzFCQyxlQUFlO2FBQ2ZDLGVBQWU7UUFHckIsSUFBSSxDQUFDTCxHQUFHLEdBQUdBO1FBQ1gsSUFBSSxDQUFDTSxrQkFBa0I7SUFDekI7SUFFQTs7R0FFQyxHQUNELElBQVlFLEdBQVcsRUFBRUMsR0FBVyxFQUFVO1FBQzVDLE9BQU8sR0FBR0QsSUFBSUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFRCxJQUFJQyxPQUFPLENBQUMsSUFBSTtJQUM5QztJQUVBOztHQUVDLEdBQ0QsTUFBTUoscUJBQW9DO1FBQ3hDLElBQUksSUFBSSxDQUFDRixZQUFZLEVBQUU7UUFFdkIsSUFBSSxDQUFDLElBQUksQ0FBQ0osR0FBRyxDQUFDVyxTQUFTLENBQUMsZUFBZTtZQUNyQ0MsUUFBUUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUlDLE9BQU9DLFdBQVcsR0FBRyxzQ0FBc0MsQ0FBQztZQUNoRixJQUFJLENBQUNmLEdBQUcsQ0FBQ2dCLFNBQVMsQ0FBQyxjQUFjO2dCQUMvQkMsTUFBTTtnQkFDTkMsS0FBSztnQkFDTEMsVUFBVTtnQkFDVkMsU0FBUztZQUNYO1lBQ0EsSUFBSSxDQUFDcEIsR0FBRyxDQUFDcUIsVUFBVSxDQUFDO2dCQUFFQyxRQUFRO2dCQUFjQyxjQUFjO1lBQUk7UUFDaEU7UUFFQSw0RUFBNEU7UUFDNUUsSUFBSSxDQUFDLElBQUksQ0FBQ3ZCLEdBQUcsQ0FBQ3dCLGNBQWMsQ0FBQyxlQUFlO1lBQzFDLE1BQU1DLGFBQWE7WUFDbkIsSUFBSUMsVUFBVTtZQUVkLE1BQU9BLFVBQVVELFdBQVk7Z0JBQzNCLElBQUk7b0JBQ0YsTUFBTSxJQUFJRSxRQUFjLENBQUNDLFNBQVND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LFFBQVFLLElBQUksSUFBSUo7WUFFaEIsdUNBQXVDO1lBQ3ZDLElBQUlKLGtCQUFrQjtnQkFDcEIsTUFBTVMsV0FBV0MsS0FBS0MsR0FBRyxDQUFDLEtBQUtELEtBQUtFLEtBQUssQ0FBQyxDQUFFckQsSUFBSWdCLFVBQVMsSUFBS1gsT0FBT04sTUFBTSxHQUFJO2dCQUMvRTBDLGlCQUFpQlM7WUFDbkI7WUFFQSxtREFBbUQ7WUFDbkQsSUFBSWxELElBQUlnQixhQUFhWCxPQUFPTixNQUFNLEVBQUU7Z0JBQ2xDLE1BQU0sSUFBSXZCLFFBQVFDLENBQUFBLFVBQVdLLFdBQVdMLFNBQVM7WUFDbkQ7UUFDRjtRQUVBLE9BQU9tRTtJQUNUO0lBRUE7OztHQUdDLEdBQ0QsTUFBTVUsNkJBQ0psRCxXQUErQixFQUMvQnFDLGdCQUE0QyxFQUN6QjtRQUNuQixPQUFPLElBQUksQ0FBQ3RCLGtCQUFrQixDQUFDZixhQUFhLE9BQU9xQztJQUNyRDtJQUVBOzs7R0FHQyxHQUNELE1BQU1jLFlBQTJCO1FBQy9CLE1BQU0sSUFBSSxDQUFDcEcsa0JBQWtCO0lBQy9CO0lBRUE7OztHQUdDLEdBQ0QsTUFBTXFHLGFBQWFwRCxXQUErQixFQUFpQjtRQUNqRSxNQUFNLElBQUksQ0FBQ0QsV0FBVyxDQUFDQztJQUN6QjtJQUVBOztHQUVDLEdBQ0RxRCxhQUFtQjtRQUNqQmhHLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJQyxPQUFPQyxXQUFXLEdBQUcsbURBQW1ELEVBQUUsSUFBSSxDQUFDZCxLQUFLLENBQUM2RSxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ3ZILElBQUksQ0FBQzdFLEtBQUssQ0FBQzRHLEtBQUs7SUFDbEI7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvc2VydmljZXMvRWxldmF0aW9uU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVsZXZhdGlvblNlcnZpY2UudHNcbiAqIFxuICogT3B0aW1pemVkIHNlcnZpY2UgZm9yIHRlcnJhaW4gZWxldmF0aW9uIGRhdGEgYWNjZXNzLlxuICogUHJvdmlkZXMgY2FjaGluZywgYmF0Y2ggcXVlcmllcywgcHJlbG9hZGluZywgYW5kIGVmZmljaWVudCBmYWxsYmFjayBtZWNoYW5pc21zXG4gKiB3aXRoIG1pbmltYWwgb3ZlcmhlYWQuIFJlcGxhY2VzIGFuZCBlbmhhbmNlcyBUZXJyYWluVXRpbHMgZnVuY3Rpb25hbGl0eS5cbiAqL1xuXG5pbXBvcnQgKiBhcyB0dXJmIGZyb20gJ0B0dXJmL3R1cmYnO1xuXG5leHBvcnQgY2xhc3MgRWxldmF0aW9uU2VydmljZSB7XG4gIHByaXZhdGUgbWFwOiBtYXBib3hnbC5NYXA7XG4gIHByaXZhdGUgY2FjaGU6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgTUFYX0NBQ0hFX1NJWkUgPSAxMDAwMDtcbiAgcHJpdmF0ZSB0ZXJyYWluUmVhZHkgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc1ByZWxvYWRpbmcgPSBmYWxzZTtcbiAgXG4gIGNvbnN0cnVjdG9yKG1hcDogbWFwYm94Z2wuTWFwKSB7XG4gICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgdGhpcy5lbnN1cmVUZXJyYWluUmVhZHkoKTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENyZWF0ZXMgY2FjaGUga2V5IGZyb20gY29vcmRpbmF0ZXNcbiAgICovXG4gIHByaXZhdGUga2V5KGxvbjogbnVtYmVyLCBsYXQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke2xvbi50b0ZpeGVkKDQpfXwke2xhdC50b0ZpeGVkKDQpfWA7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBFbnN1cmVzIHRlcnJhaW4gbGF5ZXIgaXMgcmVhZHkgZm9yIHF1ZXJpZXMgd2l0aCBlbmhhbmNlZCByZWxpYWJpbGl0eVxuICAgKi9cbiAgYXN5bmMgZW5zdXJlVGVycmFpblJlYWR5KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLnRlcnJhaW5SZWFkeSkgcmV0dXJuO1xuICBcbiAgICBpZiAoIXRoaXMubWFwLmdldFNvdXJjZShcIm1hcGJveC1kZW1cIikpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBbRWxldmF0aW9uU2VydmljZV0gQWRkaW5nIERFTSBzb3VyY2VgKTtcbiAgICAgIHRoaXMubWFwLmFkZFNvdXJjZShcIm1hcGJveC1kZW1cIiwge1xuICAgICAgICB0eXBlOiBcInJhc3Rlci1kZW1cIixcbiAgICAgICAgdXJsOiBcIm1hcGJveDovL21hcGJveC5tYXBib3gtdGVycmFpbi1kZW0tdjFcIixcbiAgICAgICAgdGlsZVNpemU6IDUxMixcbiAgICAgICAgbWF4em9vbTogMTUsXG4gICAgICB9KTtcbiAgICAgIHRoaXMubWFwLnNldFRlcnJhaW4oeyBzb3VyY2U6IFwibWFwYm94LWRlbVwiLCBleGFnZ2VyYXRpb246IDEuMCB9KTtcbiAgICB9XG4gIFxuICAgIC8vIEVuaGFuY2VkIHJlbGlhYmlsaXR5OiBXYWl0IGZvciBzb3VyY2UgdG8gYmUgbG9hZGVkIHdpdGggdGltZW91dCBhbmQgcmV0cnlcbiAgICBpZiAoIXRoaXMubWFwLmlzU291cmNlTG9hZGVkKFwibWFwYm94LWRlbVwiKSkge1xuICAgICAgY29uc3QgbWF4UmV0cmllcyA9IDM7XG4gICAgICBsZXQgcmV0cmllcyA9IDA7XG4gICAgICBcbiAgICAgIHdoaWxlIChyZXRyaWVzIDwgbWF4UmV0cmllcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrREVNID0gKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAodGhpcy5tYXAuaXNTb3VyY2VMb2FkZWQoXCJtYXBib3gtZGVtXCIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXAub2ZmKFwic291cmNlZGF0YVwiLCBjaGVja0RFTSk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm1hcC5vbihcInNvdXJjZWRhdGFcIiwgY2hlY2tERU0pO1xuICAgICAgICAgICAgLy8gSW5pdGlhbCBjaGVjayBpbiBjYXNlIGl0J3MgYWxyZWFkeSBsb2FkZWRcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcC5pc1NvdXJjZUxvYWRlZChcIm1hcGJveC1kZW1cIikpIHtcbiAgICAgICAgICAgICAgdGhpcy5tYXAub2ZmKFwic291cmNlZGF0YVwiLCBjaGVja0RFTSk7XG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVGltZW91dCBzYWZldHlcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLm1hcC5vZmYoXCJzb3VyY2VkYXRhXCIsIGNoZWNrREVNKTtcbiAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIkRFTSBzb3VyY2UgbG9hZGluZyB0aW1lb3V0XCIpKTtcbiAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIHdlIGdldCBoZXJlLCBsb2FkaW5nIHdhcyBzdWNjZXNzZnVsXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0cmllcysrO1xuICAgICAgICAgIGNvbnNvbGUud2FybihgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0VsZXZhdGlvblNlcnZpY2VdIERFTSBsb2FkaW5nIHJldHJ5ICR7cmV0cmllc30vJHttYXhSZXRyaWVzfWApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIExhc3QgcmV0cnkgZmFpbGVkLCBjb250aW51ZSBhbnl3YXlcbiAgICAgICAgICBpZiAocmV0cmllcyA+PSBtYXhSZXRyaWVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtFbGV2YXRpb25TZXJ2aWNlXSBNYXggcmV0cmllcyByZWFjaGVkLCBwcm9jZWVkaW5nIHdpdGggd2FybmluZ2ApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBERU0gd2l0aCBzYW1wbGUgcXVlcmllc1xuICAgIGF3YWl0IHRoaXMudmFsaWRhdGVERU0oKTtcbiAgICBcbiAgICB0aGlzLnRlcnJhaW5SZWFkeSA9IHRydWU7XG4gICAgY29uc29sZS5sb2coYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtFbGV2YXRpb25TZXJ2aWNlXSBUZXJyYWluIHJlYWR5YCk7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGVzIHRoYXQgREVNIGRhdGEgaXMgYXZhaWxhYmxlIHVzaW5nIHNhbXBsZSBwb2ludHNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgdmFsaWRhdGVERU0oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgY2VudGVyID0gdGhpcy5tYXAuZ2V0Q2VudGVyKCk7XG4gICAgY29uc3QgdGVzdFBvaW50cyA9IFtcbiAgICAgIFtjZW50ZXIubG5nLCBjZW50ZXIubGF0XSxcbiAgICAgIFtjZW50ZXIubG5nICsgMC4wMSwgY2VudGVyLmxhdF0sXG4gICAgICBbY2VudGVyLmxuZywgY2VudGVyLmxhdCArIDAuMDFdXG4gICAgXTtcbiAgICBcbiAgICBjb25zdCBlbGV2YXRpb25zID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICB0ZXN0UG9pbnRzLm1hcChwb2ludCA9PiB0aGlzLm1hcC5xdWVyeVRlcnJhaW5FbGV2YXRpb24ocG9pbnQpKVxuICAgICk7XG4gICAgXG4gICAgY29uc3QgdmFsaWRFbGV2YXRpb25zID0gZWxldmF0aW9ucy5maWx0ZXIoZSA9PiBlICE9PSBudWxsICYmIGUgIT09IDApO1xuICAgIGNvbnN0IGlzVmFsaWQgPSB2YWxpZEVsZXZhdGlvbnMubGVuZ3RoID4gMDtcbiAgICBcbiAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgIGNvbnNvbGUud2FybihgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0VsZXZhdGlvblNlcnZpY2VdIERFTSB2YWxpZGF0aW9uIGZhaWxlZDpgLFxuICAgICAgICBlbGV2YXRpb25zLm1hcCgoZSwgaSkgPT4gYFske3Rlc3RQb2ludHNbaV19XTogJHtlICE9PSBudWxsID8gZSA6ICdudWxsJ31tYCkuam9pbignLCAnKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtFbGV2YXRpb25TZXJ2aWNlXSBERU0gdmFsaWRhdGlvbiBzdWNjZXNzZnVsOmAsIFxuICAgICAgICB2YWxpZEVsZXZhdGlvbnMubWFwKCh2LCBpKSA9PiBgWyR7dGVzdFBvaW50c1tpXX1dOiAke3Z9bWApLmpvaW4oJywgJylcbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBpc1ZhbGlkO1xuICB9XG5cbiAgLyoqXG4gICAqIFByZWxvYWRzIGVsZXZhdGlvbiBkYXRhIGZvciBhbiBhcmVhIG9mIGludGVyZXN0IGJhc2VkIG9uIGNvb3JkaW5hdGVzLlxuICAgKiBSZXBsYWNlcyBUZXJyYWluVXRpbHMucHJlbG9hZFRpbGVzIHdpdGggbW9yZSBlZmZpY2llbnQgaW1wbGVtZW50YXRpb24uXG4gICAqL1xuICBhc3luYyBwcmVsb2FkQXJlYShjb29yZGluYXRlczogW251bWJlciwgbnVtYmVyXVtdIHwgW251bWJlciwgbnVtYmVyLCBudW1iZXJdW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5pc1ByZWxvYWRpbmcgfHwgIWNvb3JkaW5hdGVzLmxlbmd0aCkgcmV0dXJuO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICB0aGlzLmlzUHJlbG9hZGluZyA9IHRydWU7XG4gICAgICBhd2FpdCB0aGlzLmVuc3VyZVRlcnJhaW5SZWFkeSgpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0VsZXZhdGlvblNlcnZpY2VdIFByZWxvYWRpbmcgdGVycmFpbiBmb3IgJHtjb29yZGluYXRlcy5sZW5ndGh9IGNvb3JkaW5hdGVzYCk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBhIGJvdW5kaW5nIGJveCBhcm91bmQgY29vcmRpbmF0ZXNcbiAgICAgIGNvbnN0IHBvaW50cyA9IGNvb3JkaW5hdGVzLm1hcChjb29yZCA9PiB0dXJmLnBvaW50KFtjb29yZFswXSwgY29vcmRbMV1dKSk7XG4gICAgICBjb25zdCBmZWF0dXJlQ29sbGVjdGlvbiA9IHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24ocG9pbnRzKTtcbiAgICAgIGNvbnN0IGJib3ggPSB0dXJmLmJib3goZmVhdHVyZUNvbGxlY3Rpb24pO1xuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSBzYW1wbGUgcG9pbnRzIHdpdGhpbiB0aGUgYmJveCBmb3IgbW9yZSBlZmZpY2llbnQgY292ZXJhZ2VcbiAgICAgIGNvbnN0IHNhbXBsZVBvaW50cyA9IHR1cmYucG9pbnRHcmlkKGJib3gsIDEwMCwgeyB1bml0czogJ21ldGVycycgfSkuZmVhdHVyZXNcbiAgICAgICAgLm1hcChmID0+IGYuZ2VvbWV0cnkuY29vcmRpbmF0ZXMgYXMgW251bWJlciwgbnVtYmVyXSlcbiAgICAgICAgLnNsaWNlKDAsIDEwMCk7IC8vIExpbWl0IG51bWJlciBvZiBzYW1wbGUgcG9pbnRzXG4gICAgICBcbiAgICAgIC8vIFF1ZXJ5IHNhbXBsZSBwb2ludHMgdG8gbG9hZCB0aWxlc1xuICAgICAgY29uc3QgQkFUQ0hfU0laRSA9IDIwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzYW1wbGVQb2ludHMubGVuZ3RoOyBpICs9IEJBVENIX1NJWkUpIHtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSBzYW1wbGVQb2ludHMuc2xpY2UoaSwgaSArIEJBVENIX1NJWkUpO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChiYXRjaC5tYXAoKFtsb24sIGxhdF0pID0+IHRoaXMubWFwLnF1ZXJ5VGVycmFpbkVsZXZhdGlvbihbbG9uLCBsYXRdKSkpO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTsgLy8gU21hbGxlciBkZWxheSBmb3IgZWZmaWNpZW5jeVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBbHNvIHF1ZXJ5IG9yaWdpbmFsIGNvb3JkaW5hdGVzIHRvIGVuc3VyZSB0aGV5J3JlIGxvYWRlZFxuICAgICAgY29uc3Qgd2F5cG9pbnRzID0gY29vcmRpbmF0ZXMubWFwKGNvb3JkID0+IFtjb29yZFswXSwgY29vcmRbMV1dKTtcbiAgICAgIGF3YWl0IHRoaXMuYmF0Y2hHZXRFbGV2YXRpb25zKHdheXBvaW50cyBhcyBbbnVtYmVyLCBudW1iZXJdW10sIHRydWUpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0VsZXZhdGlvblNlcnZpY2VdIFRlcnJhaW4gcHJlbG9hZGluZyBjb21wbGV0ZWRgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKGBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBbRWxldmF0aW9uU2VydmljZV0gUHJlbG9hZGluZyBlcnJvcjpgLCBlcnJvcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNQcmVsb2FkaW5nID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgZWxldmF0aW9uIGZvciBhIHNpbmdsZSBjb29yZGluYXRlIHdpdGggb3B0aW1pemVkIGNhY2hpbmdcbiAgICovXG4gIGFzeW5jIGdldEVsZXZhdGlvbihsb246IG51bWJlciwgbGF0OiBudW1iZXIpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gdGhpcy5rZXkobG9uLCBsYXQpO1xuICAgIGlmICh0aGlzLmNhY2hlLmhhcyhjYWNoZUtleSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChjYWNoZUtleSkhO1xuICAgIH1cbiAgXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVUZXJyYWluUmVhZHkoKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgZWxldiA9IHRoaXMubWFwLnF1ZXJ5VGVycmFpbkVsZXZhdGlvbihbbG9uLCBsYXRdKTtcbiAgICAgIGlmIChlbGV2ICE9PSBudWxsICYmIGVsZXYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBDYWNoZSBhbGwgdmFsaWQgZWxldmF0aW9uIHZhbHVlcywgaW5jbHVkaW5nIHplcm9cbiAgICAgICAgLy8gWmVybyBpcyBhIHZhbGlkIGVsZXZhdGlvbiAoZS5nLiwgc2VhIGxldmVsLCB3YXRlciBib2RpZXMpXG4gICAgICAgIHRoaXMuY2FjaGUuc2V0KGNhY2hlS2V5LCBlbGV2KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNpbXBsZSBMUlUgY2FjaGUgbWFuYWdlbWVudFxuICAgICAgICBpZiAodGhpcy5jYWNoZS5zaXplID4gdGhpcy5NQVhfQ0FDSEVfU0laRSkge1xuICAgICAgICAgIGNvbnN0IGZpcnN0S2V5ID0gdGhpcy5jYWNoZS5rZXlzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGZpcnN0S2V5KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGVsZXY7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0VsZXZhdGlvblNlcnZpY2VdIFRlcnJhaW4gcXVlcnkgZXJyb3IgYXQgWyR7bG9ufSwgJHtsYXR9XTpgLCBlcnJvcik7XG4gICAgfVxuICBcbiAgICAvLyBFbmhhbmNlZCBmYWxsYmFjazogT25seSB1c2Ugd2hlbiB3ZSBnb3QgbnVsbCBvciB1bmRlZmluZWQgKG5vdCBmb3IgemVybylcbiAgICB0cnkge1xuICAgICAgY29uc3QgZ3JpZFNpemUgPSAwLjAwMDI7IC8vIFNtYWxsIGdyaWQgZm9yIG5laWdoYm9yaW5nIHBvaW50c1xuICAgICAgY29uc3QgbmVpZ2hib3JzID0gW1xuICAgICAgICBbbG9uICsgZ3JpZFNpemUsIGxhdF0sXG4gICAgICAgIFtsb24gLSBncmlkU2l6ZSwgbGF0XSxcbiAgICAgICAgW2xvbiwgbGF0ICsgZ3JpZFNpemVdLFxuICAgICAgICBbbG9uLCBsYXQgLSBncmlkU2l6ZV1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIGNvbnN0IGVsZXZhdGlvbnMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgbmVpZ2hib3JzLm1hcCgoW25sb24sIG5sYXRdKSA9PiB0aGlzLm1hcC5xdWVyeVRlcnJhaW5FbGV2YXRpb24oW25sb24sIG5sYXRdKSlcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IHZhbGlkRWxldmF0aW9ucyA9IGVsZXZhdGlvbnMuZmlsdGVyKGUgPT4gZSAhPT0gbnVsbCAmJiBlICE9PSB1bmRlZmluZWQpO1xuICAgICAgaWYgKHZhbGlkRWxldmF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGF2Z0VsZXYgPSB2YWxpZEVsZXZhdGlvbnMucmVkdWNlKChzdW0sIGUpID0+IHN1bSArIGUhLCAwKSAvIHZhbGlkRWxldmF0aW9ucy5sZW5ndGg7XG4gICAgICAgIHRoaXMuY2FjaGUuc2V0KGNhY2hlS2V5LCBhdmdFbGV2KTtcbiAgICAgICAgcmV0dXJuIGF2Z0VsZXY7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0VsZXZhdGlvblNlcnZpY2VdIEZhbGxiYWNrIHF1ZXJ5IGVycm9yOmAsIGVycm9yKTtcbiAgICB9XG4gIFxuICAgIHJldHVybiAwOyAvLyBGaW5hbCBmYWxsYmFja1xuICB9XG5cbiAgLyoqXG4gICAqIEJhdGNoIHF1ZXJ5IGZvciBtdWx0aXBsZSBjb29yZGluYXRlcyB3aXRoIG9wdGltaXplZCBwcm9jZXNzaW5nXG4gICAqIFJlcGxhY2VzIGFuZCBlbmhhbmNlcyBUZXJyYWluVXRpbHMuZ2V0UmVsaWFibGVUZXJyYWluRWxldmF0aW9uc1xuICAgKi9cbiAgYXN5bmMgYmF0Y2hHZXRFbGV2YXRpb25zKFxuICAgIHBvaW50czogW251bWJlciwgbnVtYmVyXVtdLFxuICAgIHNraXBQcmVsb2FkOiBib29sZWFuID0gZmFsc2UsXG4gICAgcHJvZ3Jlc3NDYWxsYmFjaz86IChwZXJjZW50OiBudW1iZXIpID0+IHZvaWRcbiAgKTogUHJvbWlzZTxudW1iZXJbXT4ge1xuICAgIGlmICghc2tpcFByZWxvYWQpIHtcbiAgICAgIGNvbnN0IGNvb3JkcyA9IHBvaW50cy5tYXAocCA9PiBbLi4ucCwgMF0gYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXJdKTtcbiAgICAgIGF3YWl0IHRoaXMucHJlbG9hZEFyZWEoY29vcmRzKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW0VsZXZhdGlvblNlcnZpY2VdIEJhdGNoIHF1ZXJ5aW5nIGVsZXZhdGlvbnMgZm9yICR7cG9pbnRzLmxlbmd0aH0gcG9pbnRzYCk7XG4gICAgXG4gICAgLy8gUHJvY2VzcyBpbiBiYXRjaGVzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgICBjb25zdCBCQVRDSF9TSVpFID0gMTAwO1xuICAgIGNvbnN0IHJlc3VsdHM6IG51bWJlcltdID0gW107XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpICs9IEJBVENIX1NJWkUpIHtcbiAgICAgIGNvbnN0IGJhdGNoID0gcG9pbnRzLnNsaWNlKGksIGkgKyBCQVRDSF9TSVpFKTtcbiAgICAgIFxuICAgICAgY29uc3QgYmF0Y2hSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIGJhdGNoLm1hcChhc3luYyAoW2xvbiwgbGF0XSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gdGhpcy5rZXkobG9uLCBsYXQpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICh0aGlzLmNhY2hlLmhhcyhjYWNoZUtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChjYWNoZUtleSkhO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZWxldmF0aW9uID0gdGhpcy5tYXAucXVlcnlUZXJyYWluRWxldmF0aW9uKFtsb24sIGxhdF0pO1xuICAgICAgICAgICAgaWYgKGVsZXZhdGlvbiAhPT0gbnVsbCAmJiBlbGV2YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAvLyBDYWNoZSBhbGwgdmFsaWQgZWxldmF0aW9uIHZhbHVlcywgaW5jbHVkaW5nIHplcm8gKHNlYSBsZXZlbClcbiAgICAgICAgICAgICAgdGhpcy5jYWNoZS5zZXQoY2FjaGVLZXksIGVsZXZhdGlvbik7XG4gICAgICAgICAgICAgIHJldHVybiBlbGV2YXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gU2lsZW50IGZhaWwgYW5kIGNvbnRpbnVlIHRvIGZhbGxiYWNrXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFRyeSBmYWxsYmFjayB3aXRoIG5lYXJieSBwb2ludHMgT05MWSB3aGVuIHdlIGdvdCBudWxsL3VuZGVmaW5lZCAobm90IGZvciB6ZXJvKVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSAwLjAwMDI7XG4gICAgICAgICAgICBjb25zdCBuZWlnaGJvcnMgPSBbXG4gICAgICAgICAgICAgIFtsb24gKyBvZmZzZXQsIGxhdF0sXG4gICAgICAgICAgICAgIFtsb24gLSBvZmZzZXQsIGxhdF0sXG4gICAgICAgICAgICAgIFtsb24sIGxhdCArIG9mZnNldF0sXG4gICAgICAgICAgICAgIFtsb24sIGxhdCAtIG9mZnNldF1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG5laWdoYm9yRWxldmF0aW9ucyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgICBuZWlnaGJvcnMubWFwKChbbmxvbiwgbmxhdF0pID0+IHRoaXMubWFwLnF1ZXJ5VGVycmFpbkVsZXZhdGlvbihbbmxvbiwgbmxhdF0pKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdmFsaWRFbGV2YXRpb25zID0gbmVpZ2hib3JFbGV2YXRpb25zLmZpbHRlcihlID0+IGUgIT09IG51bGwgJiYgZSAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGlmICh2YWxpZEVsZXZhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBjb25zdCBhdmdFbGV2ID0gdmFsaWRFbGV2YXRpb25zLnJlZHVjZSgoc3VtLCBlKSA9PiBzdW0gKyBlISwgMCkgLyB2YWxpZEVsZXZhdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgICB0aGlzLmNhY2hlLnNldChjYWNoZUtleSwgYXZnRWxldik7XG4gICAgICAgICAgICAgIHJldHVybiBhdmdFbGV2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIFNpbGVudCBmYWlsIGFuZCByZXR1cm4gMFxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBcbiAgICAgIHJlc3VsdHMucHVzaCguLi5iYXRjaFJlc3VsdHMpO1xuICAgICAgXG4gICAgICAvLyBSZXBvcnQgcHJvZ3Jlc3MgaWYgY2FsbGJhY2sgcHJvdmlkZWRcbiAgICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4oMTAwLCBNYXRoLnJvdW5kKCgoaSArIEJBVENIX1NJWkUpIC8gcG9pbnRzLmxlbmd0aCkgKiAxMDApKTtcbiAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhwcm9ncmVzcyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFsbG93IFVJIHRocmVhZCB0byBicmVhdGhlIGJldHdlZW4gbGFyZ2UgYmF0Y2hlc1xuICAgICAgaWYgKGkgKyBCQVRDSF9TSVpFIDwgcG9pbnRzLmxlbmd0aCkge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHJlbGlhYmxlIHRlcnJhaW4gZWxldmF0aW9ucyB3aXRoIGVuaGFuY2VkIGZhbGxiYWNrIG1lY2hhbmlzbXMuXG4gICAqIERpcmVjdCByZXBsYWNlbWVudCBmb3IgVGVycmFpblV0aWxzLmdldFJlbGlhYmxlVGVycmFpbkVsZXZhdGlvbnMuXG4gICAqL1xuICBhc3luYyBnZXRSZWxpYWJsZVRlcnJhaW5FbGV2YXRpb25zKFxuICAgIGNvb3JkaW5hdGVzOiBbbnVtYmVyLCBudW1iZXJdW10sXG4gICAgcHJvZ3Jlc3NDYWxsYmFjaz86IChwZXJjZW50OiBudW1iZXIpID0+IHZvaWRcbiAgKTogUHJvbWlzZTxudW1iZXJbXT4ge1xuICAgIHJldHVybiB0aGlzLmJhdGNoR2V0RWxldmF0aW9ucyhjb29yZGluYXRlcywgZmFsc2UsIHByb2dyZXNzQ2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuc3VyZXMgREVNIGRhdGEgaXMgbG9hZGVkIGFuZCB2YWxpZGF0ZWQuXG4gICAqIERpcmVjdCByZXBsYWNlbWVudCBmb3IgVGVycmFpblV0aWxzLmVuc3VyZURFTUxvYWRlZC5cbiAgICovXG4gIGFzeW5jIGVuc3VyZURFTSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZVRlcnJhaW5SZWFkeSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByZWxvYWRzIERFTSB0aWxlcyBmb3IgYSBzZXQgb2YgY29vcmRpbmF0ZXMuXG4gICAqIERpcmVjdCByZXBsYWNlbWVudCBmb3IgVGVycmFpblV0aWxzLnByZWxvYWRUaWxlcy5cbiAgICovXG4gIGFzeW5jIHByZWxvYWRUaWxlcyhjb29yZGluYXRlczogW251bWJlciwgbnVtYmVyXVtdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5wcmVsb2FkQXJlYShjb29yZGluYXRlcyk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgY2FjaGUgdG8gZnJlZSBtZW1vcnlcbiAgICovXG4gIGNsZWFyQ2FjaGUoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtFbGV2YXRpb25TZXJ2aWNlXSBDbGVhcmluZyBlbGV2YXRpb24gY2FjaGUgd2l0aCAke3RoaXMuY2FjaGUuc2l6ZX0gZW50cmllc2ApO1xuICAgIHRoaXMuY2FjaGUuY2xlYXIoKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJ0dXJmIiwiRWxldmF0aW9uU2VydmljZSIsImNvbnN0cnVjdG9yIiwibWFwIiwiY2FjaGUiLCJNYXAiLCJNQVhfQ0FDSEVfU0laRSIsInRlcnJhaW5SZWFkeSIsImlzUHJlbG9hZGluZyIsImVuc3VyZVRlcnJhaW5SZWFkeSIsImtleSIsImxvbiIsImxhdCIsInRvRml4ZWQiLCJnZXRTb3VyY2UiLCJjb25zb2xlIiwibG9nIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiYWRkU291cmNlIiwidHlwZSIsInVybCIsInRpbGVTaXplIiwibWF4em9vbSIsInNldFRlcnJhaW4iLCJzb3VyY2UiLCJleGFnZ2VyYXRpb24iLCJpc1NvdXJjZUxvYWRlZCIsIm1heFJldHJpZXMiLCJyZXRyaWVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjaGVja0RFTSIsIm9mZiIsIm9uIiwic2V0VGltZW91dCIsIkVycm9yIiwiZXJyb3IiLCJ3YXJuIiwidmFsaWRhdGVERU0iLCJjZW50ZXIiLCJnZXRDZW50ZXIiLCJ0ZXN0UG9pbnRzIiwibG5nIiwiZWxldmF0aW9ucyIsImFsbCIsInBvaW50IiwicXVlcnlUZXJyYWluRWxldmF0aW9uIiwidmFsaWRFbGV2YXRpb25zIiwiZmlsdGVyIiwiZSIsImlzVmFsaWQiLCJsZW5ndGgiLCJpIiwiam9pbiIsInYiLCJwcmVsb2FkQXJlYSIsImNvb3JkaW5hdGVzIiwicG9pbnRzIiwiY29vcmQiLCJmZWF0dXJlQ29sbGVjdGlvbiIsImJib3giLCJzYW1wbGVQb2ludHMiLCJwb2ludEdyaWQiLCJ1bml0cyIsImZlYXR1cmVzIiwiZiIsImdlb21ldHJ5Iiwic2xpY2UiLCJCQVRDSF9TSVpFIiwiYmF0Y2giLCJ3YXlwb2ludHMiLCJiYXRjaEdldEVsZXZhdGlvbnMiLCJnZXRFbGV2YXRpb24iLCJjYWNoZUtleSIsImhhcyIsImdldCIsImVsZXYiLCJ1bmRlZmluZWQiLCJzZXQiLCJzaXplIiwiZmlyc3RLZXkiLCJrZXlzIiwibmV4dCIsInZhbHVlIiwiZGVsZXRlIiwiZ3JpZFNpemUiLCJuZWlnaGJvcnMiLCJubG9uIiwibmxhdCIsImF2Z0VsZXYiLCJyZWR1Y2UiLCJzdW0iLCJza2lwUHJlbG9hZCIsInByb2dyZXNzQ2FsbGJhY2siLCJjb29yZHMiLCJwIiwicmVzdWx0cyIsImJhdGNoUmVzdWx0cyIsImVsZXZhdGlvbiIsIm9mZnNldCIsIm5laWdoYm9yRWxldmF0aW9ucyIsInB1c2giLCJwcm9ncmVzcyIsIk1hdGgiLCJtaW4iLCJyb3VuZCIsImdldFJlbGlhYmxlVGVycmFpbkVsZXZhdGlvbnMiLCJlbnN1cmVERU0iLCJwcmVsb2FkVGlsZXMiLCJjbGVhckNhY2hlIiwiY2xlYXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/services/ElevationService.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/services/LayerManager.ts":
/*!******************************************!*\
  !*** ./src/app/services/LayerManager.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MAP_LAYERS: () => (/* binding */ MAP_LAYERS),\n/* harmony export */   layerManager: () => (/* binding */ layerManager)\n/* harmony export */ });\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/bbox/dist/esm/index.js\");\n//LayerManager.ts  (new - in services folder)\n// src/services/LayerManager.ts\n\nconst MAP_LAYERS = {\n    ELOS_GRID: 'elos-grid-layer',\n    FLIGHT_PATH: 'flight-path-layer',\n    FLIGHT_PATH_VISIBILITY: 'flight-path-visibility-layer',\n    TERRAIN: 'terrain-layer',\n    GCS_GRID: 'gcs-grid-layer',\n    OBSERVER_GRID: 'observer-grid-layer',\n    REPEATER_GRID: 'repeater-grid-layer',\n    MERGED_VISIBILITY: 'merged-visibility-layer',\n    AOTERRAIN_GRID: \"AOterrain-grid-layer\",\n    AREA_OF_OPERATIONS_FILL: \"area-of-operations-fill\",\n    AREA_OF_OPERATIONS_OUTLINE: \"area-of-operations-outline\",\n    POWERLINES: \"Electricity Transmission Lines\",\n    POWERLINES_HITBOX: \"Electricity Transmission Lines Hitbox\",\n    AIRFIELDS: \"Airfields\",\n    AIRFIELDS_LABELS: \"Airfields Labels\",\n    BYDA_HV: \"byda-hv-layer\",\n    BYDA_LV: \"byda-lv-layer\",\n    BYDA_SWER: \"byda-swer-layer\",\n    BYDA_OTHER: \"byda-other-layer\",\n    BYDA_DEVICE: \"byda-device-layer\",\n    MOBILE_TOWERS: \"mobile-towers-layer\",\n    TREE_HEIGHTS: 'tree-height-raster'\n};\n/**\n * Manages map layers with an event system for React integration\n */ class LayerManager {\n    /**\n   * Set the map instance\n   */ setMap(map) {\n        this.map = map;\n        return this;\n    }\n    /**\n   * Add an event listener for layer changes\n   */ addEventListener(listener) {\n        this.listeners.add(listener);\n        return ()=>this.listeners.delete(listener); // Return cleanup function\n    }\n    /**\n   * Notify all listeners of an event\n   */ notifyListeners(event, layerId, visible) {\n        this.listeners.forEach((listener)=>listener(event, layerId, visible));\n    }\n    /**\n   * Register a layer for tracking\n   */ registerLayer(layerId, initialVisibility = false) {\n        this.layers.set(layerId, initialVisibility);\n        this.notifyListeners('layerAdded', layerId, initialVisibility);\n        return this;\n    }\n    /**\n   * Register all predefined layers\n   */ registerKnownLayers() {\n        Object.values(MAP_LAYERS).forEach((layerId)=>{\n            this.registerLayer(layerId, false);\n        });\n        return this;\n    }\n    /**\n   * Toggle a layer's visibility\n   */ toggleLayerVisibility(layerId) {\n        if (!this.ensureMap()) return false;\n        try {\n            if (!this.map.getLayer(layerId)) {\n                console.warn(`Layer ${layerId} does not exist in the map`);\n                return false;\n            }\n            const currentVisibility = this.map.getLayoutProperty(layerId, 'visibility');\n            const newVisibility = currentVisibility === 'visible' ? 'none' : 'visible';\n            this.map.setLayoutProperty(layerId, 'visibility', newVisibility);\n            const isVisible = newVisibility === 'visible';\n            this.layers.set(layerId, isVisible);\n            this.notifyListeners('visibilityChange', layerId, isVisible);\n            return true;\n        } catch (error) {\n            console.error(`Error toggling layer ${layerId}:`, error);\n            return false;\n        }\n    }\n    /**\n   * Set a layer's visibility directly\n   */ setLayerVisibility(layerId, visible) {\n        if (!this.ensureMap()) return false;\n        try {\n            if (!this.map.getLayer(layerId)) {\n                console.warn(`Layer ${layerId} does not exist in the map`);\n                return false;\n            }\n            const newVisibility = visible ? 'visible' : 'none';\n            this.map.setLayoutProperty(layerId, 'visibility', newVisibility);\n            this.layers.set(layerId, visible);\n            this.notifyListeners('visibilityChange', layerId, visible);\n            return true;\n        } catch (error) {\n            console.error(`Error setting layer ${layerId} visibility:`, error);\n            return false;\n        }\n    }\n    /**\n   * Remove a layer and its source\n   */ removeLayer(layerId) {\n        if (!this.ensureMap()) return false;\n        try {\n            if (this.map.getLayer(layerId)) {\n                this.map.removeLayer(layerId);\n            }\n            if (this.map.getSource(layerId)) {\n                this.map.removeSource(layerId);\n            }\n            this.layers.delete(layerId);\n            this.notifyListeners('layerRemoved', layerId);\n            return true;\n        } catch (error) {\n            console.error(`Error removing layer ${layerId}:`, error);\n            return false;\n        }\n    }\n    /**\n   * Check if a layer is visible\n   */ isLayerVisible(layerId) {\n        if (!this.map?.getLayer(layerId)) return false;\n        return this.map.getLayoutProperty(layerId, 'visibility') === 'visible';\n    }\n    /**\n   * Add a layer to the map\n   */ addLayer(layerId, source, layerConfig, sourceId, initialVisibility = true) {\n        if (!this.ensureMap()) return false;\n        const effectiveSourceId = sourceId || layerId;\n        try {\n            // Add source if it doesn't exist\n            if (!this.map.getSource(effectiveSourceId)) {\n                this.map.addSource(effectiveSourceId, source);\n            }\n            // Remove layer if it already exists\n            if (this.map.getLayer(layerId)) {\n                this.map.removeLayer(layerId);\n            }\n            // Add the layer\n            this.map.addLayer({\n                ...layerConfig,\n                id: layerId,\n                source: effectiveSourceId,\n                layout: {\n                    ...layerConfig.layout,\n                    visibility: initialVisibility ? 'visible' : 'none'\n                }\n            });\n            // Register and notify\n            this.registerLayer(layerId, initialVisibility);\n            return true;\n        } catch (error) {\n            console.error(`Error adding layer ${layerId}:`, error);\n            return false;\n        }\n    }\n    /**\n   * Get the current layer visibility state\n   */ getLayerState() {\n        const state = {};\n        // First add all tracked layers\n        for (const [layerId, isVisible] of this.layers.entries()){\n            state[layerId] = isVisible;\n        }\n        // Then check actual map state for layers that exist\n        if (this.map) {\n            for (const layerId of Object.values(MAP_LAYERS)){\n                if (this.map.getLayer(layerId)) {\n                    const visible = this.map.getLayoutProperty(layerId, 'visibility') === 'visible';\n                    state[layerId] = visible;\n                }\n            }\n        }\n        return state;\n    }\n    /**\n   * Adds or updates an Area of Operations to the map\n   */ addAreaOfOperations(geometry) {\n        if (!this.ensureMap()) return false;\n        try {\n            // Remove existing layers if present\n            this.removeLayer(MAP_LAYERS.AREA_OF_OPERATIONS_OUTLINE);\n            this.removeLayer(MAP_LAYERS.AREA_OF_OPERATIONS_FILL);\n            // Add outline layer\n            this.addLayer(MAP_LAYERS.AREA_OF_OPERATIONS_OUTLINE, {\n                type: \"geojson\",\n                data: geometry\n            }, {\n                id: MAP_LAYERS.AREA_OF_OPERATIONS_OUTLINE,\n                type: \"line\",\n                source: MAP_LAYERS.AREA_OF_OPERATIONS_OUTLINE,\n                layout: {\n                    visibility: \"visible\"\n                },\n                paint: {\n                    \"line-color\": \"#0000FF\",\n                    \"line-width\": 3,\n                    \"line-opacity\": 0.9,\n                    \"line-dasharray\": [\n                        2,\n                        2\n                    ]\n                }\n            }, undefined, true // Make visible initially\n            );\n            // Add fill layer\n            this.addLayer(MAP_LAYERS.AREA_OF_OPERATIONS_FILL, {\n                type: \"geojson\",\n                data: geometry\n            }, {\n                id: MAP_LAYERS.AREA_OF_OPERATIONS_FILL,\n                type: \"fill\",\n                source: MAP_LAYERS.AREA_OF_OPERATIONS_FILL,\n                layout: {\n                    visibility: \"visible\"\n                },\n                paint: {\n                    \"fill-color\": \"#ADD8E6\",\n                    \"fill-opacity\": 0.2\n                }\n            }, undefined, true // Make visible initially\n            );\n            // Notify listeners\n            this.notifyListeners('layerAdded', MAP_LAYERS.AREA_OF_OPERATIONS_OUTLINE, true);\n            this.notifyListeners('layerAdded', MAP_LAYERS.AREA_OF_OPERATIONS_FILL, true);\n            return true;\n        } catch (error) {\n            console.error(\"Error adding AO layers:\", error);\n            return false;\n        }\n    }\n    /**\n   * Adds or updates an AO terrain grid to the map with sampling for visualization\n   * while preserving complete dataset for analysis\n   */ addAreaOfOperationsTerrain(gridCells) {\n        if (!this.ensureMap()) return false;\n        try {\n            // Remove existing terrain grid if present\n            this.removeLayer(MAP_LAYERS.AOTERRAIN_GRID);\n            if (!gridCells || gridCells.length === 0) {\n                console.warn(\"Empty grid cells provided to addAreaOfOperationsTerrain\");\n                return false;\n            }\n            console.log(`Processing ${gridCells.length} terrain grid cells for visualization`);\n            // RENDERING OPTIMIZATION: Use a sampling approach for visualization only\n            // This doesn't affect analysis, only how many cells we display on the map\n            if (gridCells.length > 20000) {\n                console.warn(`Rendering a very large number of cells (${gridCells.length}). Consider reducing buffer size if performance issues occur.`);\n            }\n            // Use all cells for visualization\n            const visualizationCells = gridCells;\n            // Calculate elevation range for color scaling using ALL cells for accurate representation\n            let minElevation = Infinity;\n            let maxElevation = -Infinity;\n            for (const cell of gridCells){\n                const elevation = cell.properties.elevation;\n                if (elevation < minElevation) minElevation = elevation;\n                if (elevation > maxElevation) maxElevation = elevation;\n            }\n            // Convert the SAMPLED grid cells to GeoJSON for visualization\n            const features = visualizationCells.map((cell)=>({\n                    type: \"Feature\",\n                    geometry: cell.geometry,\n                    properties: {\n                        elevation: cell.properties.elevation\n                    }\n                }));\n            const gridFeatureCollection = {\n                type: \"FeatureCollection\",\n                features\n            };\n            // First add the source safely\n            const sourceId = MAP_LAYERS.AOTERRAIN_GRID;\n            if (this.map.getSource(sourceId)) {\n                try {\n                    this.map.getSource(sourceId).setData(gridFeatureCollection);\n                } catch (sourceError) {\n                    console.warn(\"Error updating source, removing and recreating:\", sourceError);\n                    this.map.removeSource(sourceId);\n                    this.map.addSource(sourceId, {\n                        type: \"geojson\",\n                        data: gridFeatureCollection\n                    });\n                }\n            } else {\n                this.map.addSource(sourceId, {\n                    type: \"geojson\",\n                    data: gridFeatureCollection\n                });\n            }\n            // Then add the layer with ENHANCED COLOR MAPPING\n            try {\n                if (this.map.getLayer(sourceId)) {\n                    this.map.removeLayer(sourceId);\n                }\n                // Determine the best color scale approach based on elevation range\n                const elevationRange = maxElevation - minElevation;\n                const medianElevation = this.calculateMedianElevation(gridCells);\n                const useEnhancedScale = elevationRange > 300; // For areas with large elevation differences\n                // Create color expression based on distribution\n                let colorExpression;\n                if (useEnhancedScale) {\n                    // Enhanced scale for large elevation differences\n                    // This uses quantiles rather than linear interpolation\n                    const quartile1 = minElevation + (medianElevation - minElevation) * 0.5;\n                    const quartile3 = medianElevation + (maxElevation - medianElevation) * 0.5;\n                    const highPoint = medianElevation + (maxElevation - medianElevation) * 0.8;\n                    colorExpression = [\n                        \"interpolate\",\n                        [\n                            \"linear\"\n                        ],\n                        [\n                            \"get\",\n                            \"elevation\"\n                        ],\n                        minElevation,\n                        \"#0000FF\",\n                        quartile1,\n                        \"#00AAFF\",\n                        medianElevation,\n                        \"#00FF00\",\n                        quartile3,\n                        \"#FFFF00\",\n                        highPoint,\n                        \"#FF0000\",\n                        maxElevation,\n                        \"#800080\" // Highest elevation (Purple)\n                    ];\n                } else {\n                    // Standard linear scale for areas with moderate elevation change\n                    colorExpression = [\n                        \"interpolate\",\n                        [\n                            \"linear\"\n                        ],\n                        [\n                            \"get\",\n                            \"elevation\"\n                        ],\n                        minElevation,\n                        \"#0000FF\",\n                        minElevation + (maxElevation - minElevation) * 0.2,\n                        \"#00AAFF\",\n                        minElevation + (maxElevation - minElevation) * 0.4,\n                        \"#00FF00\",\n                        minElevation + (maxElevation - minElevation) * 0.6,\n                        \"#FFFF00\",\n                        minElevation + (maxElevation - minElevation) * 0.8,\n                        \"#FF0000\",\n                        maxElevation,\n                        \"#800080\" // 100% (Purple)\n                    ];\n                }\n                // Add the layer with improved color mapping\n                this.map.addLayer({\n                    id: sourceId,\n                    type: \"fill\",\n                    source: sourceId,\n                    layout: {\n                        visibility: \"visible\"\n                    },\n                    paint: {\n                        \"fill-color\": colorExpression,\n                        \"fill-opacity\": 0.7,\n                        \"fill-outline-color\": [\n                            \"interpolate\",\n                            [\n                                \"linear\"\n                            ],\n                            [\n                                \"get\",\n                                \"elevation\"\n                            ],\n                            minElevation,\n                            \"#0000AA\",\n                            maxElevation,\n                            \"#550055\" // Dark purple for high elevations\n                        ]\n                    }\n                });\n                // Notify listeners\n                this.notifyListeners('layerAdded', sourceId, true);\n                return true;\n            } catch (layerError) {\n                console.error(\"Error adding terrain grid layer:\", layerError);\n                return false;\n            }\n        } catch (error) {\n            console.error(\"Error adding AO terrain grid:\", error);\n            return false;\n        }\n    }\n    /**\n   * Helper method to calculate median elevation from grid cells\n   * @private\n   */ calculateMedianElevation(cells) {\n        // Extract all elevations and sort them\n        const elevations = cells.map((cell)=>cell.properties.elevation).sort((a, b)=>a - b);\n        // Get the middle value\n        const mid = Math.floor(elevations.length / 2);\n        if (elevations.length % 2 === 0) {\n            // Even number of elements - take the average of the two middle values\n            return (elevations[mid - 1] + elevations[mid]) / 2;\n        } else {\n            // Odd number of elements - take the middle value\n            return elevations[mid];\n        }\n    }\n    /**\n   * Fit the map to AO bounds\n   */ fitToAreaOfOperations(geometry) {\n        if (!this.ensureMap()) return false;\n        try {\n            if (!geometry || !geometry.features || geometry.features.length === 0) {\n                console.warn(\"Empty geometry provided to fitToAreaOfOperations\");\n                return false;\n            }\n            // Calculate bounds manually without turf as a fallback\n            let minLng = Infinity;\n            let minLat = Infinity;\n            let maxLng = -Infinity;\n            let maxLat = -Infinity;\n            try {\n                // First try with turf\n                const bbox = _turf_turf__WEBPACK_IMPORTED_MODULE_0__.bbox(geometry);\n                this.map.fitBounds([\n                    [\n                        bbox[0],\n                        bbox[1]\n                    ],\n                    [\n                        bbox[2],\n                        bbox[3]\n                    ]\n                ], {\n                    padding: 50,\n                    duration: 200\n                });\n                return true;\n            } catch (turfError) {\n                console.warn(\"Turf bbox calculation failed, using manual calculation:\", turfError);\n                // Manual calculation as fallback\n                geometry.features.forEach((feature)=>{\n                    if (feature.geometry.type === 'Polygon') {\n                        const coordinates = feature.geometry.coordinates[0];\n                        coordinates.forEach((coord)=>{\n                            minLng = Math.min(minLng, coord[0]);\n                            minLat = Math.min(minLat, coord[1]);\n                            maxLng = Math.max(maxLng, coord[0]);\n                            maxLat = Math.max(maxLat, coord[1]);\n                        });\n                    }\n                });\n                if (minLng !== Infinity && minLat !== Infinity && maxLng !== -Infinity && maxLat !== -Infinity) {\n                    this.map.fitBounds([\n                        [\n                            minLng,\n                            minLat\n                        ],\n                        [\n                            maxLng,\n                            maxLat\n                        ]\n                    ], {\n                        padding: 50,\n                        duration: 200\n                    });\n                    return true;\n                }\n            }\n            return false;\n        } catch (error) {\n            console.error(\"Error fitting to AO bounds:\", error);\n            return false;\n        }\n    }\n    /**\n   * Reset all layers\n   */ resetLayers() {\n        if (!this.ensureMap()) return false;\n        try {\n            for (const layerId of this.layers.keys()){\n                this.removeLayer(layerId);\n            }\n            this.layers.clear();\n            return true;\n        } catch (error) {\n            console.error('Error resetting layers:', error);\n            return false;\n        }\n    }\n    /**\n   * Ensure map is initialized\n   */ ensureMap() {\n        if (!this.map) {\n            console.warn('Map not initialized');\n            return false;\n        }\n        return true;\n    }\n    constructor(){\n        this.map = null;\n        this.layers = new Map();\n        this.listeners = new Set();\n        this.MAP_LAYERS = MAP_LAYERS;\n    }\n}\n// Singleton instance\nconst layerManager = new LayerManager();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1Q7O2FBbGhCUXRCLE1BQTJCO2FBQzNCYSxTQUErQixJQUFJeUY7YUFDbkNuRyxZQUFxQyxJQUFJb0c7YUFDakNoSSxhQUFhQTs7QUFnaEIvQjtBQUVBLHFCQUFxQjtBQUNkLE1BQU1pSSxlQUFlLElBQUkxRyxlQUFlIiwic291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9zZXJ2aWNlcy9MYXllck1hbmFnZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9MYXllck1hbmFnZXIudHMgIChuZXcgLSBpbiBzZXJ2aWNlcyBmb2xkZXIpXG4vLyBzcmMvc2VydmljZXMvTGF5ZXJNYW5hZ2VyLnRzXG5pbXBvcnQgbWFwYm94Z2wgZnJvbSAnbWFwYm94LWdsJztcbmltcG9ydCAqIGFzIHR1cmYgZnJvbSAnQHR1cmYvdHVyZic7XG5pbXBvcnQgeyBHcmlkQ2VsbCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQW5hbHlzZXMvVHlwZXMvR3JpZEFuYWx5c2lzVHlwZXMnO1xuXG5leHBvcnQgY29uc3QgTUFQX0xBWUVSUyA9IHtcbiAgRUxPU19HUklEOiAnZWxvcy1ncmlkLWxheWVyJyxcbiAgRkxJR0hUX1BBVEg6ICdmbGlnaHQtcGF0aC1sYXllcicsXG4gIEZMSUdIVF9QQVRIX1ZJU0lCSUxJVFk6ICdmbGlnaHQtcGF0aC12aXNpYmlsaXR5LWxheWVyJyxcbiAgVEVSUkFJTjogJ3RlcnJhaW4tbGF5ZXInLFxuICBHQ1NfR1JJRDogJ2djcy1ncmlkLWxheWVyJyxcbiAgT0JTRVJWRVJfR1JJRDogJ29ic2VydmVyLWdyaWQtbGF5ZXInLFxuICBSRVBFQVRFUl9HUklEOiAncmVwZWF0ZXItZ3JpZC1sYXllcicsXG4gIE1FUkdFRF9WSVNJQklMSVRZOiAnbWVyZ2VkLXZpc2liaWxpdHktbGF5ZXInLFxuICBBT1RFUlJBSU5fR1JJRDogXCJBT3RlcnJhaW4tZ3JpZC1sYXllclwiLFxuICBBUkVBX09GX09QRVJBVElPTlNfRklMTDogXCJhcmVhLW9mLW9wZXJhdGlvbnMtZmlsbFwiLFxuICBBUkVBX09GX09QRVJBVElPTlNfT1VUTElORTogXCJhcmVhLW9mLW9wZXJhdGlvbnMtb3V0bGluZVwiLFxuICBQT1dFUkxJTkVTOiBcIkVsZWN0cmljaXR5IFRyYW5zbWlzc2lvbiBMaW5lc1wiLFxuICBQT1dFUkxJTkVTX0hJVEJPWDogXCJFbGVjdHJpY2l0eSBUcmFuc21pc3Npb24gTGluZXMgSGl0Ym94XCIsXG4gIEFJUkZJRUxEUzogXCJBaXJmaWVsZHNcIixcbiAgQUlSRklFTERTX0xBQkVMUzogXCJBaXJmaWVsZHMgTGFiZWxzXCIsXG4gIEJZREFfSFY6IFwiYnlkYS1odi1sYXllclwiLFxuICBCWURBX0xWOiBcImJ5ZGEtbHYtbGF5ZXJcIixcbiAgQllEQV9TV0VSOiBcImJ5ZGEtc3dlci1sYXllclwiLFxuICBCWURBX09USEVSOiBcImJ5ZGEtb3RoZXItbGF5ZXJcIixcbiAgQllEQV9ERVZJQ0U6IFwiYnlkYS1kZXZpY2UtbGF5ZXJcIixcbiAgTU9CSUxFX1RPV0VSUzogXCJtb2JpbGUtdG93ZXJzLWxheWVyXCIsXG4gIFRSRUVfSEVJR0hUUzogJ3RyZWUtaGVpZ2h0LXJhc3RlcicsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBMYXllcklkID0gdHlwZW9mIE1BUF9MQVlFUlNba2V5b2YgdHlwZW9mIE1BUF9MQVlFUlNdO1xuZXhwb3J0IHR5cGUgTGF5ZXJWaXNpYmlsaXR5TWFwID0gUmVjb3JkPExheWVySWQsIGJvb2xlYW4+O1xuXG4vLyBMYXllciBldmVudHNcbmV4cG9ydCB0eXBlIExheWVyRXZlbnRUeXBlID0gJ3Zpc2liaWxpdHlDaGFuZ2UnIHwgJ2xheWVyQWRkZWQnIHwgJ2xheWVyUmVtb3ZlZCc7XG5leHBvcnQgdHlwZSBMYXllckV2ZW50TGlzdGVuZXIgPSAoZXZlbnQ6IExheWVyRXZlbnRUeXBlLCBsYXllcklkOiBzdHJpbmcsIHZpc2libGU/OiBib29sZWFuKSA9PiB2b2lkO1xuXG4vKipcbiAqIE1hbmFnZXMgbWFwIGxheWVycyB3aXRoIGFuIGV2ZW50IHN5c3RlbSBmb3IgUmVhY3QgaW50ZWdyYXRpb25cbiAqL1xuY2xhc3MgTGF5ZXJNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBtYXA6IG1hcGJveGdsLk1hcCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGxheWVyczogTWFwPHN0cmluZywgYm9vbGVhbj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgbGlzdGVuZXJzOiBTZXQ8TGF5ZXJFdmVudExpc3RlbmVyPiA9IG5ldyBTZXQoKTtcbiAgcHVibGljIHJlYWRvbmx5IE1BUF9MQVlFUlMgPSBNQVBfTEFZRVJTO1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG1hcCBpbnN0YW5jZVxuICAgKi9cbiAgc2V0TWFwKG1hcDogbWFwYm94Z2wuTWFwKSB7XG4gICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyIGZvciBsYXllciBjaGFuZ2VzXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVyKGxpc3RlbmVyOiBMYXllckV2ZW50TGlzdGVuZXIpIHtcbiAgICB0aGlzLmxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiB0aGlzLmxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpOyAvLyBSZXR1cm4gY2xlYW51cCBmdW5jdGlvblxuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmeSBhbGwgbGlzdGVuZXJzIG9mIGFuIGV2ZW50XG4gICAqL1xuICBwcml2YXRlIG5vdGlmeUxpc3RlbmVycyhldmVudDogTGF5ZXJFdmVudFR5cGUsIGxheWVySWQ6IHN0cmluZywgdmlzaWJsZT86IGJvb2xlYW4pIHtcbiAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKGV2ZW50LCBsYXllcklkLCB2aXNpYmxlKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBsYXllciBmb3IgdHJhY2tpbmdcbiAgICovXG4gIHJlZ2lzdGVyTGF5ZXIobGF5ZXJJZDogc3RyaW5nLCBpbml0aWFsVmlzaWJpbGl0eTogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgdGhpcy5sYXllcnMuc2V0KGxheWVySWQsIGluaXRpYWxWaXNpYmlsaXR5KTtcbiAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygnbGF5ZXJBZGRlZCcsIGxheWVySWQsIGluaXRpYWxWaXNpYmlsaXR5KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhbGwgcHJlZGVmaW5lZCBsYXllcnNcbiAgICovXG4gIHJlZ2lzdGVyS25vd25MYXllcnMoKSB7XG4gICAgT2JqZWN0LnZhbHVlcyhNQVBfTEFZRVJTKS5mb3JFYWNoKGxheWVySWQgPT4ge1xuICAgICAgdGhpcy5yZWdpc3RlckxheWVyKGxheWVySWQsIGZhbHNlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgYSBsYXllcidzIHZpc2liaWxpdHlcbiAgICovXG4gIHRvZ2dsZUxheWVyVmlzaWJpbGl0eShsYXllcklkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuZW5zdXJlTWFwKCkpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgaWYgKCF0aGlzLm1hcCEuZ2V0TGF5ZXIobGF5ZXJJZCkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBMYXllciAke2xheWVySWR9IGRvZXMgbm90IGV4aXN0IGluIHRoZSBtYXBgKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBjdXJyZW50VmlzaWJpbGl0eSA9IHRoaXMubWFwIS5nZXRMYXlvdXRQcm9wZXJ0eShsYXllcklkLCAndmlzaWJpbGl0eScpO1xuICAgICAgY29uc3QgbmV3VmlzaWJpbGl0eSA9IGN1cnJlbnRWaXNpYmlsaXR5ID09PSAndmlzaWJsZScgPyAnbm9uZScgOiAndmlzaWJsZSc7XG4gICAgICB0aGlzLm1hcCEuc2V0TGF5b3V0UHJvcGVydHkobGF5ZXJJZCwgJ3Zpc2liaWxpdHknLCBuZXdWaXNpYmlsaXR5KTtcbiAgICAgIFxuICAgICAgY29uc3QgaXNWaXNpYmxlID0gbmV3VmlzaWJpbGl0eSA9PT0gJ3Zpc2libGUnO1xuICAgICAgdGhpcy5sYXllcnMuc2V0KGxheWVySWQsIGlzVmlzaWJsZSk7XG4gICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygndmlzaWJpbGl0eUNoYW5nZScsIGxheWVySWQsIGlzVmlzaWJsZSk7XG4gICAgICBcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciB0b2dnbGluZyBsYXllciAke2xheWVySWR9OmAsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgbGF5ZXIncyB2aXNpYmlsaXR5IGRpcmVjdGx5XG4gICAqL1xuICBzZXRMYXllclZpc2liaWxpdHkobGF5ZXJJZDogc3RyaW5nLCB2aXNpYmxlOiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmVuc3VyZU1hcCgpKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5tYXAhLmdldExheWVyKGxheWVySWQpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgTGF5ZXIgJHtsYXllcklkfSBkb2VzIG5vdCBleGlzdCBpbiB0aGUgbWFwYCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgbmV3VmlzaWJpbGl0eSA9IHZpc2libGUgPyAndmlzaWJsZScgOiAnbm9uZSc7XG4gICAgICB0aGlzLm1hcCEuc2V0TGF5b3V0UHJvcGVydHkobGF5ZXJJZCwgJ3Zpc2liaWxpdHknLCBuZXdWaXNpYmlsaXR5KTtcbiAgICAgIFxuICAgICAgdGhpcy5sYXllcnMuc2V0KGxheWVySWQsIHZpc2libGUpO1xuICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoJ3Zpc2liaWxpdHlDaGFuZ2UnLCBsYXllcklkLCB2aXNpYmxlKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHNldHRpbmcgbGF5ZXIgJHtsYXllcklkfSB2aXNpYmlsaXR5OmAsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGEgbGF5ZXIgYW5kIGl0cyBzb3VyY2VcbiAgICovXG4gIHJlbW92ZUxheWVyKGxheWVySWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5lbnN1cmVNYXAoKSkgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5tYXAhLmdldExheWVyKGxheWVySWQpKSB7XG4gICAgICAgIHRoaXMubWFwIS5yZW1vdmVMYXllcihsYXllcklkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHRoaXMubWFwIS5nZXRTb3VyY2UobGF5ZXJJZCkpIHtcbiAgICAgICAgdGhpcy5tYXAhLnJlbW92ZVNvdXJjZShsYXllcklkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5sYXllcnMuZGVsZXRlKGxheWVySWQpO1xuICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoJ2xheWVyUmVtb3ZlZCcsIGxheWVySWQpO1xuICAgICAgXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcmVtb3ZpbmcgbGF5ZXIgJHtsYXllcklkfTpgLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgbGF5ZXIgaXMgdmlzaWJsZVxuICAgKi9cbiAgaXNMYXllclZpc2libGUobGF5ZXJJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLm1hcD8uZ2V0TGF5ZXIobGF5ZXJJZCkpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5tYXAuZ2V0TGF5b3V0UHJvcGVydHkobGF5ZXJJZCwgJ3Zpc2liaWxpdHknKSA9PT0gJ3Zpc2libGUnO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGxheWVyIHRvIHRoZSBtYXBcbiAgICovXG4gIGFkZExheWVyKFxuICAgIGxheWVySWQ6IHN0cmluZyxcbiAgICBzb3VyY2U6IG1hcGJveGdsLkFueVNvdXJjZURhdGEsXG4gICAgbGF5ZXJDb25maWc6IG1hcGJveGdsLkFueUxheWVyLFxuICAgIHNvdXJjZUlkPzogc3RyaW5nLFxuICAgIGluaXRpYWxWaXNpYmlsaXR5OiBib29sZWFuID0gdHJ1ZVxuICApOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuZW5zdXJlTWFwKCkpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICBjb25zdCBlZmZlY3RpdmVTb3VyY2VJZCA9IHNvdXJjZUlkIHx8IGxheWVySWQ7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEFkZCBzb3VyY2UgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgaWYgKCF0aGlzLm1hcCEuZ2V0U291cmNlKGVmZmVjdGl2ZVNvdXJjZUlkKSkge1xuICAgICAgICB0aGlzLm1hcCEuYWRkU291cmNlKGVmZmVjdGl2ZVNvdXJjZUlkLCBzb3VyY2UpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBSZW1vdmUgbGF5ZXIgaWYgaXQgYWxyZWFkeSBleGlzdHNcbiAgICAgIGlmICh0aGlzLm1hcCEuZ2V0TGF5ZXIobGF5ZXJJZCkpIHtcbiAgICAgICAgdGhpcy5tYXAhLnJlbW92ZUxheWVyKGxheWVySWQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBZGQgdGhlIGxheWVyXG4gICAgICB0aGlzLm1hcCEuYWRkTGF5ZXIoe1xuICAgICAgICAuLi5sYXllckNvbmZpZyxcbiAgICAgICAgaWQ6IGxheWVySWQsXG4gICAgICAgIHNvdXJjZTogZWZmZWN0aXZlU291cmNlSWQsXG4gICAgICAgIGxheW91dDoge1xuICAgICAgICAgIC4uLmxheWVyQ29uZmlnLmxheW91dCxcbiAgICAgICAgICB2aXNpYmlsaXR5OiBpbml0aWFsVmlzaWJpbGl0eSA/ICd2aXNpYmxlJyA6ICdub25lJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gUmVnaXN0ZXIgYW5kIG5vdGlmeVxuICAgICAgdGhpcy5yZWdpc3RlckxheWVyKGxheWVySWQsIGluaXRpYWxWaXNpYmlsaXR5KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFkZGluZyBsYXllciAke2xheWVySWR9OmAsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IGxheWVyIHZpc2liaWxpdHkgc3RhdGVcbiAgICovXG4gIGdldExheWVyU3RhdGUoKTogTGF5ZXJWaXNpYmlsaXR5TWFwIHtcbiAgICBjb25zdCBzdGF0ZTogUGFydGlhbDxMYXllclZpc2liaWxpdHlNYXA+ID0ge307XG4gICAgXG4gICAgLy8gRmlyc3QgYWRkIGFsbCB0cmFja2VkIGxheWVyc1xuICAgIGZvciAoY29uc3QgW2xheWVySWQsIGlzVmlzaWJsZV0gb2YgdGhpcy5sYXllcnMuZW50cmllcygpKSB7XG4gICAgICBzdGF0ZVtsYXllcklkIGFzIExheWVySWRdID0gaXNWaXNpYmxlO1xuICAgIH1cbiAgICBcbiAgICAvLyBUaGVuIGNoZWNrIGFjdHVhbCBtYXAgc3RhdGUgZm9yIGxheWVycyB0aGF0IGV4aXN0XG4gICAgaWYgKHRoaXMubWFwKSB7XG4gICAgICBmb3IgKGNvbnN0IGxheWVySWQgb2YgT2JqZWN0LnZhbHVlcyhNQVBfTEFZRVJTKSkge1xuICAgICAgICBpZiAodGhpcy5tYXAuZ2V0TGF5ZXIobGF5ZXJJZCkpIHtcbiAgICAgICAgICBjb25zdCB2aXNpYmxlID0gdGhpcy5tYXAuZ2V0TGF5b3V0UHJvcGVydHkobGF5ZXJJZCwgJ3Zpc2liaWxpdHknKSA9PT0gJ3Zpc2libGUnO1xuICAgICAgICAgIHN0YXRlW2xheWVySWRdID0gdmlzaWJsZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gc3RhdGUgYXMgTGF5ZXJWaXNpYmlsaXR5TWFwO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgb3IgdXBkYXRlcyBhbiBBcmVhIG9mIE9wZXJhdGlvbnMgdG8gdGhlIG1hcFxuICAgKi9cbiAgYWRkQXJlYU9mT3BlcmF0aW9ucyhnZW9tZXRyeTogR2VvSlNPTi5GZWF0dXJlQ29sbGVjdGlvbik6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5lbnN1cmVNYXAoKSkgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBSZW1vdmUgZXhpc3RpbmcgbGF5ZXJzIGlmIHByZXNlbnRcbiAgICAgIHRoaXMucmVtb3ZlTGF5ZXIoTUFQX0xBWUVSUy5BUkVBX09GX09QRVJBVElPTlNfT1VUTElORSk7XG4gICAgICB0aGlzLnJlbW92ZUxheWVyKE1BUF9MQVlFUlMuQVJFQV9PRl9PUEVSQVRJT05TX0ZJTEwpO1xuICAgICAgXG4gICAgICAvLyBBZGQgb3V0bGluZSBsYXllclxuICAgICAgdGhpcy5hZGRMYXllcihcbiAgICAgICAgTUFQX0xBWUVSUy5BUkVBX09GX09QRVJBVElPTlNfT1VUTElORSxcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IFwiZ2VvanNvblwiLFxuICAgICAgICAgIGRhdGE6IGdlb21ldHJ5XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogTUFQX0xBWUVSUy5BUkVBX09GX09QRVJBVElPTlNfT1VUTElORSxcbiAgICAgICAgICB0eXBlOiBcImxpbmVcIixcbiAgICAgICAgICBzb3VyY2U6IE1BUF9MQVlFUlMuQVJFQV9PRl9PUEVSQVRJT05TX09VVExJTkUsXG4gICAgICAgICAgbGF5b3V0OiB7IHZpc2liaWxpdHk6IFwidmlzaWJsZVwiIH0sXG4gICAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAgIFwibGluZS1jb2xvclwiOiBcIiMwMDAwRkZcIixcbiAgICAgICAgICAgIFwibGluZS13aWR0aFwiOiAzLFxuICAgICAgICAgICAgXCJsaW5lLW9wYWNpdHlcIjogMC45LFxuICAgICAgICAgICAgXCJsaW5lLWRhc2hhcnJheVwiOiBbMiwgMl1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdHJ1ZSAvLyBNYWtlIHZpc2libGUgaW5pdGlhbGx5XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBBZGQgZmlsbCBsYXllclxuICAgICAgdGhpcy5hZGRMYXllcihcbiAgICAgICAgTUFQX0xBWUVSUy5BUkVBX09GX09QRVJBVElPTlNfRklMTCxcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IFwiZ2VvanNvblwiLFxuICAgICAgICAgIGRhdGE6IGdlb21ldHJ5XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogTUFQX0xBWUVSUy5BUkVBX09GX09QRVJBVElPTlNfRklMTCxcbiAgICAgICAgICB0eXBlOiBcImZpbGxcIixcbiAgICAgICAgICBzb3VyY2U6IE1BUF9MQVlFUlMuQVJFQV9PRl9PUEVSQVRJT05TX0ZJTEwsXG4gICAgICAgICAgbGF5b3V0OiB7IHZpc2liaWxpdHk6IFwidmlzaWJsZVwiIH0sXG4gICAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAgIFwiZmlsbC1jb2xvclwiOiBcIiNBREQ4RTZcIixcbiAgICAgICAgICAgIFwiZmlsbC1vcGFjaXR5XCI6IDAuMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB0cnVlIC8vIE1ha2UgdmlzaWJsZSBpbml0aWFsbHlcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIE5vdGlmeSBsaXN0ZW5lcnNcbiAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCdsYXllckFkZGVkJywgTUFQX0xBWUVSUy5BUkVBX09GX09QRVJBVElPTlNfT1VUTElORSwgdHJ1ZSk7XG4gICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygnbGF5ZXJBZGRlZCcsIE1BUF9MQVlFUlMuQVJFQV9PRl9PUEVSQVRJT05TX0ZJTEwsIHRydWUpO1xuICAgICAgXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFkZGluZyBBTyBsYXllcnM6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBvciB1cGRhdGVzIGFuIEFPIHRlcnJhaW4gZ3JpZCB0byB0aGUgbWFwIHdpdGggc2FtcGxpbmcgZm9yIHZpc3VhbGl6YXRpb25cbiAgICogd2hpbGUgcHJlc2VydmluZyBjb21wbGV0ZSBkYXRhc2V0IGZvciBhbmFseXNpc1xuICAgKi9cbiAgYWRkQXJlYU9mT3BlcmF0aW9uc1RlcnJhaW4oZ3JpZENlbGxzOiBHcmlkQ2VsbFtdKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmVuc3VyZU1hcCgpKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIFJlbW92ZSBleGlzdGluZyB0ZXJyYWluIGdyaWQgaWYgcHJlc2VudFxuICAgICAgdGhpcy5yZW1vdmVMYXllcihNQVBfTEFZRVJTLkFPVEVSUkFJTl9HUklEKTtcbiAgICAgIFxuICAgICAgaWYgKCFncmlkQ2VsbHMgfHwgZ3JpZENlbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJFbXB0eSBncmlkIGNlbGxzIHByb3ZpZGVkIHRvIGFkZEFyZWFPZk9wZXJhdGlvbnNUZXJyYWluXCIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nICR7Z3JpZENlbGxzLmxlbmd0aH0gdGVycmFpbiBncmlkIGNlbGxzIGZvciB2aXN1YWxpemF0aW9uYCk7XG4gICAgICBcbiAgICAgIC8vIFJFTkRFUklORyBPUFRJTUlaQVRJT046IFVzZSBhIHNhbXBsaW5nIGFwcHJvYWNoIGZvciB2aXN1YWxpemF0aW9uIG9ubHlcbiAgICAgIC8vIFRoaXMgZG9lc24ndCBhZmZlY3QgYW5hbHlzaXMsIG9ubHkgaG93IG1hbnkgY2VsbHMgd2UgZGlzcGxheSBvbiB0aGUgbWFwXG4gICAgICBpZiAoZ3JpZENlbGxzLmxlbmd0aCA+IDIwMDAwKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgUmVuZGVyaW5nIGEgdmVyeSBsYXJnZSBudW1iZXIgb2YgY2VsbHMgKCR7Z3JpZENlbGxzLmxlbmd0aH0pLiBDb25zaWRlciByZWR1Y2luZyBidWZmZXIgc2l6ZSBpZiBwZXJmb3JtYW5jZSBpc3N1ZXMgb2NjdXIuYCk7XG4gICAgICB9XG4gICAgICAvLyBVc2UgYWxsIGNlbGxzIGZvciB2aXN1YWxpemF0aW9uXG4gICAgICBjb25zdCB2aXN1YWxpemF0aW9uQ2VsbHMgPSBncmlkQ2VsbHM7XG4gICAgICBcbiAgICAgIC8vIENhbGN1bGF0ZSBlbGV2YXRpb24gcmFuZ2UgZm9yIGNvbG9yIHNjYWxpbmcgdXNpbmcgQUxMIGNlbGxzIGZvciBhY2N1cmF0ZSByZXByZXNlbnRhdGlvblxuICAgICAgbGV0IG1pbkVsZXZhdGlvbiA9IEluZmluaXR5O1xuICAgICAgbGV0IG1heEVsZXZhdGlvbiA9IC1JbmZpbml0eTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBjZWxsIG9mIGdyaWRDZWxscykge1xuICAgICAgICBjb25zdCBlbGV2YXRpb24gPSBjZWxsLnByb3BlcnRpZXMuZWxldmF0aW9uO1xuICAgICAgICBpZiAoZWxldmF0aW9uIDwgbWluRWxldmF0aW9uKSBtaW5FbGV2YXRpb24gPSBlbGV2YXRpb247XG4gICAgICAgIGlmIChlbGV2YXRpb24gPiBtYXhFbGV2YXRpb24pIG1heEVsZXZhdGlvbiA9IGVsZXZhdGlvbjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ29udmVydCB0aGUgU0FNUExFRCBncmlkIGNlbGxzIHRvIEdlb0pTT04gZm9yIHZpc3VhbGl6YXRpb25cbiAgICAgIGNvbnN0IGZlYXR1cmVzID0gdmlzdWFsaXphdGlvbkNlbGxzLm1hcChjZWxsID0+ICh7XG4gICAgICAgIHR5cGU6IFwiRmVhdHVyZVwiIGFzIGNvbnN0LFxuICAgICAgICBnZW9tZXRyeTogY2VsbC5nZW9tZXRyeSxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGVsZXZhdGlvbjogY2VsbC5wcm9wZXJ0aWVzLmVsZXZhdGlvblxuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGdyaWRGZWF0dXJlQ29sbGVjdGlvbiA9IHtcbiAgICAgICAgdHlwZTogXCJGZWF0dXJlQ29sbGVjdGlvblwiIGFzIGNvbnN0LFxuICAgICAgICBmZWF0dXJlc1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gRmlyc3QgYWRkIHRoZSBzb3VyY2Ugc2FmZWx5XG4gICAgICBjb25zdCBzb3VyY2VJZCA9IE1BUF9MQVlFUlMuQU9URVJSQUlOX0dSSUQ7XG4gICAgICBcbiAgICAgIGlmICh0aGlzLm1hcCEuZ2V0U291cmNlKHNvdXJjZUlkKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICh0aGlzLm1hcCEuZ2V0U291cmNlKHNvdXJjZUlkKSBhcyBtYXBib3hnbC5HZW9KU09OU291cmNlKS5zZXREYXRhKGdyaWRGZWF0dXJlQ29sbGVjdGlvbik7XG4gICAgICAgIH0gY2F0Y2ggKHNvdXJjZUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgdXBkYXRpbmcgc291cmNlLCByZW1vdmluZyBhbmQgcmVjcmVhdGluZzpcIiwgc291cmNlRXJyb3IpO1xuICAgICAgICAgIHRoaXMubWFwIS5yZW1vdmVTb3VyY2Uoc291cmNlSWQpO1xuICAgICAgICAgIHRoaXMubWFwIS5hZGRTb3VyY2Uoc291cmNlSWQsIHtcbiAgICAgICAgICAgIHR5cGU6IFwiZ2VvanNvblwiLFxuICAgICAgICAgICAgZGF0YTogZ3JpZEZlYXR1cmVDb2xsZWN0aW9uXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubWFwIS5hZGRTb3VyY2Uoc291cmNlSWQsIHtcbiAgICAgICAgICB0eXBlOiBcImdlb2pzb25cIixcbiAgICAgICAgICBkYXRhOiBncmlkRmVhdHVyZUNvbGxlY3Rpb25cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFRoZW4gYWRkIHRoZSBsYXllciB3aXRoIEVOSEFOQ0VEIENPTE9SIE1BUFBJTkdcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0aGlzLm1hcCEuZ2V0TGF5ZXIoc291cmNlSWQpKSB7XG4gICAgICAgICAgdGhpcy5tYXAhLnJlbW92ZUxheWVyKHNvdXJjZUlkKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBiZXN0IGNvbG9yIHNjYWxlIGFwcHJvYWNoIGJhc2VkIG9uIGVsZXZhdGlvbiByYW5nZVxuICAgICAgICBjb25zdCBlbGV2YXRpb25SYW5nZSA9IG1heEVsZXZhdGlvbiAtIG1pbkVsZXZhdGlvbjtcbiAgICAgICAgY29uc3QgbWVkaWFuRWxldmF0aW9uID0gdGhpcy5jYWxjdWxhdGVNZWRpYW5FbGV2YXRpb24oZ3JpZENlbGxzKTtcbiAgICAgICAgY29uc3QgdXNlRW5oYW5jZWRTY2FsZSA9IGVsZXZhdGlvblJhbmdlID4gMzAwOyAvLyBGb3IgYXJlYXMgd2l0aCBsYXJnZSBlbGV2YXRpb24gZGlmZmVyZW5jZXNcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBjb2xvciBleHByZXNzaW9uIGJhc2VkIG9uIGRpc3RyaWJ1dGlvblxuICAgICAgICBsZXQgY29sb3JFeHByZXNzaW9uO1xuICAgICAgICBpZiAodXNlRW5oYW5jZWRTY2FsZSkge1xuICAgICAgICAgIC8vIEVuaGFuY2VkIHNjYWxlIGZvciBsYXJnZSBlbGV2YXRpb24gZGlmZmVyZW5jZXNcbiAgICAgICAgICAvLyBUaGlzIHVzZXMgcXVhbnRpbGVzIHJhdGhlciB0aGFuIGxpbmVhciBpbnRlcnBvbGF0aW9uXG4gICAgICAgICAgY29uc3QgcXVhcnRpbGUxID0gbWluRWxldmF0aW9uICsgKG1lZGlhbkVsZXZhdGlvbiAtIG1pbkVsZXZhdGlvbikgKiAwLjU7XG4gICAgICAgICAgY29uc3QgcXVhcnRpbGUzID0gbWVkaWFuRWxldmF0aW9uICsgKG1heEVsZXZhdGlvbiAtIG1lZGlhbkVsZXZhdGlvbikgKiAwLjU7XG4gICAgICAgICAgY29uc3QgaGlnaFBvaW50ID0gbWVkaWFuRWxldmF0aW9uICsgKG1heEVsZXZhdGlvbiAtIG1lZGlhbkVsZXZhdGlvbikgKiAwLjg7XG4gICAgICAgICAgXG4gICAgICAgICAgY29sb3JFeHByZXNzaW9uID0gW1xuICAgICAgICAgICAgXCJpbnRlcnBvbGF0ZVwiLFxuICAgICAgICAgICAgW1wibGluZWFyXCJdLFxuICAgICAgICAgICAgW1wiZ2V0XCIsIFwiZWxldmF0aW9uXCJdLFxuICAgICAgICAgICAgbWluRWxldmF0aW9uLCBcIiMwMDAwRkZcIiwgICAgIC8vIExvd2VzdCBlbGV2YXRpb24gKEJsdWUpXG4gICAgICAgICAgICBxdWFydGlsZTEsIFwiIzAwQUFGRlwiLCAgICAgICAgLy8gMXN0IHF1YXJ0aWxlIChMaWdodCBCbHVlKVxuICAgICAgICAgICAgbWVkaWFuRWxldmF0aW9uLCBcIiMwMEZGMDBcIiwgIC8vIE1lZGlhbiBlbGV2YXRpb24gKEdyZWVuKVxuICAgICAgICAgICAgcXVhcnRpbGUzLCBcIiNGRkZGMDBcIiwgICAgICAgIC8vIDNyZCBxdWFydGlsZSAoWWVsbG93KVxuICAgICAgICAgICAgaGlnaFBvaW50LCBcIiNGRjAwMDBcIiwgICAgICAgIC8vIEhpZ2ggZWxldmF0aW9uIChSZWQpXG4gICAgICAgICAgICBtYXhFbGV2YXRpb24sIFwiIzgwMDA4MFwiICAgICAgLy8gSGlnaGVzdCBlbGV2YXRpb24gKFB1cnBsZSlcbiAgICAgICAgICBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFN0YW5kYXJkIGxpbmVhciBzY2FsZSBmb3IgYXJlYXMgd2l0aCBtb2RlcmF0ZSBlbGV2YXRpb24gY2hhbmdlXG4gICAgICAgICAgY29sb3JFeHByZXNzaW9uID0gW1xuICAgICAgICAgICAgXCJpbnRlcnBvbGF0ZVwiLFxuICAgICAgICAgICAgW1wibGluZWFyXCJdLFxuICAgICAgICAgICAgW1wiZ2V0XCIsIFwiZWxldmF0aW9uXCJdLFxuICAgICAgICAgICAgbWluRWxldmF0aW9uLCBcIiMwMDAwRkZcIiwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMb3dlc3QgKEJsdWUpXG4gICAgICAgICAgICBtaW5FbGV2YXRpb24gKyAobWF4RWxldmF0aW9uIC0gbWluRWxldmF0aW9uKSAqIDAuMiwgXCIjMDBBQUZGXCIsICAgICAgIC8vIDIwJSAoTGlnaHQgQmx1ZSlcbiAgICAgICAgICAgIG1pbkVsZXZhdGlvbiArIChtYXhFbGV2YXRpb24gLSBtaW5FbGV2YXRpb24pICogMC40LCBcIiMwMEZGMDBcIiwgICAgICAgLy8gNDAlIChHcmVlbilcbiAgICAgICAgICAgIG1pbkVsZXZhdGlvbiArIChtYXhFbGV2YXRpb24gLSBtaW5FbGV2YXRpb24pICogMC42LCBcIiNGRkZGMDBcIiwgICAgICAgLy8gNjAlIChZZWxsb3cpXG4gICAgICAgICAgICBtaW5FbGV2YXRpb24gKyAobWF4RWxldmF0aW9uIC0gbWluRWxldmF0aW9uKSAqIDAuOCwgXCIjRkYwMDAwXCIsICAgICAgIC8vIDgwJSAoUmVkKVxuICAgICAgICAgICAgbWF4RWxldmF0aW9uLCBcIiM4MDAwODBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxMDAlIChQdXJwbGUpXG4gICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHRoZSBsYXllciB3aXRoIGltcHJvdmVkIGNvbG9yIG1hcHBpbmdcbiAgICAgICAgdGhpcy5tYXAhLmFkZExheWVyKHtcbiAgICAgICAgICBpZDogc291cmNlSWQsXG4gICAgICAgICAgdHlwZTogXCJmaWxsXCIsXG4gICAgICAgICAgc291cmNlOiBzb3VyY2VJZCxcbiAgICAgICAgICBsYXlvdXQ6IHsgdmlzaWJpbGl0eTogXCJ2aXNpYmxlXCIgfSxcbiAgICAgICAgICBwYWludDoge1xuICAgICAgICAgICAgXCJmaWxsLWNvbG9yXCI6IGNvbG9yRXhwcmVzc2lvbixcbiAgICAgICAgICAgIFwiZmlsbC1vcGFjaXR5XCI6IDAuNywgIC8vIEluY3JlYXNlZCBvcGFjaXR5IGZvciBiZXR0ZXIgdmlzaWJpbGl0eVxuICAgICAgICAgICAgXCJmaWxsLW91dGxpbmUtY29sb3JcIjogWyAgLy8gQWRkIG91dGxpbmUgY29sb3IgZm9yIGJldHRlciBjZWxsIGNvbm5lY3Rpb25cbiAgICAgICAgICAgICAgXCJpbnRlcnBvbGF0ZVwiLFxuICAgICAgICAgICAgICBbXCJsaW5lYXJcIl0sXG4gICAgICAgICAgICAgIFtcImdldFwiLCBcImVsZXZhdGlvblwiXSxcbiAgICAgICAgICAgICAgbWluRWxldmF0aW9uLCBcIiMwMDAwQUFcIiwgIC8vIERhcmsgYmx1ZSBmb3IgbG93IGVsZXZhdGlvbnNcbiAgICAgICAgICAgICAgbWF4RWxldmF0aW9uLCBcIiM1NTAwNTVcIiAgIC8vIERhcmsgcHVycGxlIGZvciBoaWdoIGVsZXZhdGlvbnNcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIH0pOyBcblxuICAgICAgICBcbiAgICAgICAgLy8gTm90aWZ5IGxpc3RlbmVyc1xuICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygnbGF5ZXJBZGRlZCcsIHNvdXJjZUlkLCB0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBjYXRjaCAobGF5ZXJFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWRkaW5nIHRlcnJhaW4gZ3JpZCBsYXllcjpcIiwgbGF5ZXJFcnJvcik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFkZGluZyBBTyB0ZXJyYWluIGdyaWQ6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAgIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIGNhbGN1bGF0ZSBtZWRpYW4gZWxldmF0aW9uIGZyb20gZ3JpZCBjZWxsc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVNZWRpYW5FbGV2YXRpb24oY2VsbHM6IEdyaWRDZWxsW10pOiBudW1iZXIge1xuICAgIC8vIEV4dHJhY3QgYWxsIGVsZXZhdGlvbnMgYW5kIHNvcnQgdGhlbVxuICAgIGNvbnN0IGVsZXZhdGlvbnMgPSBjZWxscy5tYXAoY2VsbCA9PiBjZWxsLnByb3BlcnRpZXMuZWxldmF0aW9uKS5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgXG4gICAgLy8gR2V0IHRoZSBtaWRkbGUgdmFsdWVcbiAgICBjb25zdCBtaWQgPSBNYXRoLmZsb29yKGVsZXZhdGlvbnMubGVuZ3RoIC8gMik7XG4gICAgaWYgKGVsZXZhdGlvbnMubGVuZ3RoICUgMiA9PT0gMCkge1xuICAgICAgLy8gRXZlbiBudW1iZXIgb2YgZWxlbWVudHMgLSB0YWtlIHRoZSBhdmVyYWdlIG9mIHRoZSB0d28gbWlkZGxlIHZhbHVlc1xuICAgICAgcmV0dXJuIChlbGV2YXRpb25zW21pZCAtIDFdICsgZWxldmF0aW9uc1ttaWRdKSAvIDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9kZCBudW1iZXIgb2YgZWxlbWVudHMgLSB0YWtlIHRoZSBtaWRkbGUgdmFsdWVcbiAgICAgIHJldHVybiBlbGV2YXRpb25zW21pZF07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpdCB0aGUgbWFwIHRvIEFPIGJvdW5kc1xuICAgKi9cbiAgZml0VG9BcmVhT2ZPcGVyYXRpb25zKGdlb21ldHJ5OiBHZW9KU09OLkZlYXR1cmVDb2xsZWN0aW9uKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmVuc3VyZU1hcCgpKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGlmICghZ2VvbWV0cnkgfHwgIWdlb21ldHJ5LmZlYXR1cmVzIHx8IGdlb21ldHJ5LmZlYXR1cmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJFbXB0eSBnZW9tZXRyeSBwcm92aWRlZCB0byBmaXRUb0FyZWFPZk9wZXJhdGlvbnNcIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIGJvdW5kcyBtYW51YWxseSB3aXRob3V0IHR1cmYgYXMgYSBmYWxsYmFja1xuICAgICAgbGV0IG1pbkxuZyA9IEluZmluaXR5O1xuICAgICAgbGV0IG1pbkxhdCA9IEluZmluaXR5O1xuICAgICAgbGV0IG1heExuZyA9IC1JbmZpbml0eTtcbiAgICAgIGxldCBtYXhMYXQgPSAtSW5maW5pdHk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEZpcnN0IHRyeSB3aXRoIHR1cmZcbiAgICAgICAgY29uc3QgYmJveCA9IHR1cmYuYmJveChnZW9tZXRyeSk7XG4gICAgICAgIHRoaXMubWFwIS5maXRCb3VuZHMoXG4gICAgICAgICAgW1xuICAgICAgICAgICAgW2Jib3hbMF0sIGJib3hbMV1dLFxuICAgICAgICAgICAgW2Jib3hbMl0sIGJib3hbM11dXG4gICAgICAgICAgXSxcbiAgICAgICAgICB7IHBhZGRpbmc6IDUwLCBkdXJhdGlvbjogMjAwIH1cbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGNhdGNoICh0dXJmRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiVHVyZiBiYm94IGNhbGN1bGF0aW9uIGZhaWxlZCwgdXNpbmcgbWFudWFsIGNhbGN1bGF0aW9uOlwiLCB0dXJmRXJyb3IpO1xuICAgICAgICBcbiAgICAgICAgLy8gTWFudWFsIGNhbGN1bGF0aW9uIGFzIGZhbGxiYWNrXG4gICAgICAgIGdlb21ldHJ5LmZlYXR1cmVzLmZvckVhY2goZmVhdHVyZSA9PiB7XG4gICAgICAgICAgaWYgKGZlYXR1cmUuZ2VvbWV0cnkudHlwZSA9PT0gJ1BvbHlnb24nKSB7XG4gICAgICAgICAgICBjb25zdCBjb29yZGluYXRlcyA9IGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF07XG4gICAgICAgICAgICBjb29yZGluYXRlcy5mb3JFYWNoKGNvb3JkID0+IHtcbiAgICAgICAgICAgICAgbWluTG5nID0gTWF0aC5taW4obWluTG5nLCBjb29yZFswXSk7XG4gICAgICAgICAgICAgIG1pbkxhdCA9IE1hdGgubWluKG1pbkxhdCwgY29vcmRbMV0pO1xuICAgICAgICAgICAgICBtYXhMbmcgPSBNYXRoLm1heChtYXhMbmcsIGNvb3JkWzBdKTtcbiAgICAgICAgICAgICAgbWF4TGF0ID0gTWF0aC5tYXgobWF4TGF0LCBjb29yZFsxXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKG1pbkxuZyAhPT0gSW5maW5pdHkgJiYgbWluTGF0ICE9PSBJbmZpbml0eSAmJiBtYXhMbmcgIT09IC1JbmZpbml0eSAmJiBtYXhMYXQgIT09IC1JbmZpbml0eSkge1xuICAgICAgICAgIHRoaXMubWFwIS5maXRCb3VuZHMoXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgIFttaW5MbmcsIG1pbkxhdF0sXG4gICAgICAgICAgICAgIFttYXhMbmcsIG1heExhdF1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB7IHBhZGRpbmc6IDUwLCBkdXJhdGlvbjogMjAwIH1cbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZpdHRpbmcgdG8gQU8gYm91bmRzOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IGFsbCBsYXllcnNcbiAgICovXG4gIHJlc2V0TGF5ZXJzKCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5lbnN1cmVNYXAoKSkgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IGxheWVySWQgb2YgdGhpcy5sYXllcnMua2V5cygpKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTGF5ZXIobGF5ZXJJZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMubGF5ZXJzLmNsZWFyKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVzZXR0aW5nIGxheWVyczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuc3VyZSBtYXAgaXMgaW5pdGlhbGl6ZWRcbiAgICovXG4gIHByaXZhdGUgZW5zdXJlTWFwKCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5tYXApIHtcbiAgICAgIGNvbnNvbGUud2FybignTWFwIG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG4vLyBTaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBsYXllck1hbmFnZXIgPSBuZXcgTGF5ZXJNYW5hZ2VyKCk7Il0sIm5hbWVzIjpbInR1cmYiLCJNQVBfTEFZRVJTIiwiRUxPU19HUklEIiwiRkxJR0hUX1BBVEgiLCJGTElHSFRfUEFUSF9WSVNJQklMSVRZIiwiVEVSUkFJTiIsIkdDU19HUklEIiwiT0JTRVJWRVJfR1JJRCIsIlJFUEVBVEVSX0dSSUQiLCJNRVJHRURfVklTSUJJTElUWSIsIkFPVEVSUkFJTl9HUklEIiwiQVJFQV9PRl9PUEVSQVRJT05TX0ZJTEwiLCJBUkVBX09GX09QRVJBVElPTlNfT1VUTElORSIsIlBPV0VSTElORVMiLCJQT1dFUkxJTkVTX0hJVEJPWCIsIkFJUkZJRUxEUyIsIkFJUkZJRUxEU19MQUJFTFMiLCJCWURBX0hWIiwiQllEQV9MViIsIkJZREFfU1dFUiIsIkJZREFfT1RIRVIiLCJCWURBX0RFVklDRSIsIk1PQklMRV9UT1dFUlMiLCJUUkVFX0hFSUdIVFMiLCJMYXllck1hbmFnZXIiLCJzZXRNYXAiLCJtYXAiLCJhZGRFdmVudExpc3RlbmVyIiwibGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJhZGQiLCJkZWxldGUiLCJub3RpZnlMaXN0ZW5lcnMiLCJldmVudCIsImxheWVySWQiLCJ2aXNpYmxlIiwiZm9yRWFjaCIsInJlZ2lzdGVyTGF5ZXIiLCJpbml0aWFsVmlzaWJpbGl0eSIsImxheWVycyIsInNldCIsInJlZ2lzdGVyS25vd25MYXllcnMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJ0b2dnbGVMYXllclZpc2liaWxpdHkiLCJlbnN1cmVNYXAiLCJnZXRMYXllciIsImNvbnNvbGUiLCJ3YXJuIiwiY3VycmVudFZpc2liaWxpdHkiLCJnZXRMYXlvdXRQcm9wZXJ0eSIsIm5ld1Zpc2liaWxpdHkiLCJzZXRMYXlvdXRQcm9wZXJ0eSIsImlzVmlzaWJsZSIsImVycm9yIiwic2V0TGF5ZXJWaXNpYmlsaXR5IiwicmVtb3ZlTGF5ZXIiLCJnZXRTb3VyY2UiLCJyZW1vdmVTb3VyY2UiLCJpc0xheWVyVmlzaWJsZSIsImFkZExheWVyIiwic291cmNlIiwibGF5ZXJDb25maWciLCJzb3VyY2VJZCIsImVmZmVjdGl2ZVNvdXJjZUlkIiwiYWRkU291cmNlIiwiaWQiLCJsYXlvdXQiLCJ2aXNpYmlsaXR5IiwiZ2V0TGF5ZXJTdGF0ZSIsInN0YXRlIiwiZW50cmllcyIsImFkZEFyZWFPZk9wZXJhdGlvbnMiLCJnZW9tZXRyeSIsInR5cGUiLCJkYXRhIiwicGFpbnQiLCJ1bmRlZmluZWQiLCJhZGRBcmVhT2ZPcGVyYXRpb25zVGVycmFpbiIsImdyaWRDZWxscyIsImxlbmd0aCIsImxvZyIsInZpc3VhbGl6YXRpb25DZWxscyIsIm1pbkVsZXZhdGlvbiIsIkluZmluaXR5IiwibWF4RWxldmF0aW9uIiwiY2VsbCIsImVsZXZhdGlvbiIsInByb3BlcnRpZXMiLCJmZWF0dXJlcyIsImdyaWRGZWF0dXJlQ29sbGVjdGlvbiIsInNldERhdGEiLCJzb3VyY2VFcnJvciIsImVsZXZhdGlvblJhbmdlIiwibWVkaWFuRWxldmF0aW9uIiwiY2FsY3VsYXRlTWVkaWFuRWxldmF0aW9uIiwidXNlRW5oYW5jZWRTY2FsZSIsImNvbG9yRXhwcmVzc2lvbiIsInF1YXJ0aWxlMSIsInF1YXJ0aWxlMyIsImhpZ2hQb2ludCIsImxheWVyRXJyb3IiLCJjZWxscyIsImVsZXZhdGlvbnMiLCJzb3J0IiwiYSIsImIiLCJtaWQiLCJNYXRoIiwiZmxvb3IiLCJmaXRUb0FyZWFPZk9wZXJhdGlvbnMiLCJtaW5MbmciLCJtaW5MYXQiLCJtYXhMbmciLCJtYXhMYXQiLCJiYm94IiwiZml0Qm91bmRzIiwicGFkZGluZyIsImR1cmF0aW9uIiwidHVyZkVycm9yIiwiZmVhdHVyZSIsImNvb3JkaW5hdGVzIiwiY29vcmQiLCJtaW4iLCJtYXgiLCJyZXNldExheWVycyIsImtleXMiLCJjbGVhciIsIk1hcCIsIlNldCIsImxheWVyTWFuYWdlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/services/LayerManager.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/services/MobileTowerService.ts":
/*!************************************************!*\
  !*** ./src/app/services/MobileTowerService.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FREQUENCY_BANDS: () => (/* binding */ FREQUENCY_BANDS),\n/* harmony export */   displayMobileTowers: () => (/* binding */ displayMobileTowers),\n/* harmony export */   filterMobileTowers: () => (/* binding */ filterMobileTowers),\n/* harmony export */   getFrequencyBandLabel: () => (/* binding */ getFrequencyBandLabel)\n/* harmony export */ });\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mapbox-gl */ \"(ssr)/./node_modules/mapbox-gl/dist/mapbox-gl.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * MobileTowerService.ts\n * \n * Purpose:\n * Provides functionality to display and interact with mobile tower data from\n * Mapbox tilesets, with filtering and styling capabilities.\n * \n * This service:\n * - Loads mobile tower data from Mapbox tilesets\n * - Creates and manages map layers for towers and clusters\n * - Handles styling based on carrier (Telstra, Optus, Vodafone) and technology (3G, 4G, 5G)\n * - Implements zoom-responsive sizing for better performance at different zoom levels\n * - Provides filtering by carrier, technology, and frequency bands\n * - Manages interactive elements like popups and hover states\n */ \n// Constants for styling and filtering\n// Replace with your actual Mapbox tileset URL after uploading the data\nconst MAPBOX_SOURCE_URL = 'mapbox://intelaero.3zahha0o';\nconst MAPBOX_SOURCE_LAYER = 'mobile_towers-cniu5j'; // The source layer name in your tileset\n// Frequency bands for filtering (in MHz)\nconst FREQUENCY_BANDS = {\n    LOW_BAND: {\n        min: 700,\n        max: 900,\n        label: 'Low Band (700-900 MHz)'\n    },\n    MID_BAND_1: {\n        min: 1800,\n        max: 2100,\n        label: 'Mid Band (1800-2100 MHz)'\n    },\n    MID_BAND_2: {\n        min: 2300,\n        max: 2600,\n        label: 'Mid Band (2300-2600 MHz)'\n    },\n    HIGH_BAND: {\n        min: 3300,\n        max: 3800,\n        label: 'High Band (3.5 GHz)'\n    },\n    MMWAVE: {\n        min: 24000,\n        max: 40000,\n        label: 'mmWave (>24 GHz)'\n    }\n};\n// Layer and source IDs\nconst TOWER_SOURCE_ID = 'mobile-towers-source';\nconst TOWER_LAYER_ID = 'mobile-towers-unclustered-point';\nconst TOWER_LABELS_LAYER_ID = 'mobile-towers-labels';\n/**\n * Main function to display mobile towers on the map using Mapbox tilesets\n * \n * @param map Mapbox map instance\n * @param aoGeometry Area of Operations GeoJSON\n * @param setLayerVisibility Function to control layer visibility\n * @returns Promise<boolean> Success status\n */ async function displayMobileTowers(map, aoGeometry, setLayerVisibility) {\n    console.log('displayMobileTowers: starting', {\n        timestamp: new Date().toISOString(),\n        message: 'Setting up mobile tower display using Mapbox tilesets'\n    });\n    try {\n        // If layers already exist, just make them visible\n        if (map.getLayer(TOWER_LAYER_ID)) {\n            setLayerVisibility(TOWER_LAYER_ID, true);\n            if (map.getLayer(TOWER_LABELS_LAYER_ID)) {\n                setLayerVisibility(TOWER_LABELS_LAYER_ID, true);\n            }\n            console.log('displayMobileTowers: toggling existing layers', {\n                timestamp: new Date().toISOString(),\n                message: 'Showing existing tower layers'\n            });\n            return true;\n        }\n        // Add Mapbox vector tile source\n        if (!map.getSource(TOWER_SOURCE_ID)) {\n            map.addSource(TOWER_SOURCE_ID, {\n                type: 'vector',\n                url: MAPBOX_SOURCE_URL\n            });\n            console.log('displayMobileTowers: added Mapbox vector tile source', {\n                timestamp: new Date().toISOString(),\n                sourceId: TOWER_SOURCE_ID,\n                url: MAPBOX_SOURCE_URL,\n                message: 'Added Mapbox vector tile source for mobile towers'\n            });\n        }\n        // Add layer for individual towers with zoom-based sizing\n        if (!map.getLayer(TOWER_LAYER_ID)) {\n            map.addLayer({\n                id: TOWER_LAYER_ID,\n                type: 'circle',\n                source: TOWER_SOURCE_ID,\n                'source-layer': MAPBOX_SOURCE_LAYER,\n                paint: {\n                    // Style based on technology and zoom level\n                    'circle-radius': [\n                        'interpolate',\n                        [\n                            'linear'\n                        ],\n                        [\n                            'zoom'\n                        ],\n                        6,\n                        1,\n                        8,\n                        2,\n                        10,\n                        [\n                            'case',\n                            [\n                                '==',\n                                [\n                                    'get',\n                                    'technology'\n                                ],\n                                '5g'\n                            ],\n                            6,\n                            [\n                                '==',\n                                [\n                                    'get',\n                                    'technology'\n                                ],\n                                '4g'\n                            ],\n                            4,\n                            [\n                                '==',\n                                [\n                                    'get',\n                                    'technology'\n                                ],\n                                '3g'\n                            ],\n                            3,\n                            3 // Default for unknown\n                        ],\n                        14,\n                        [\n                            'case',\n                            [\n                                '==',\n                                [\n                                    'get',\n                                    'technology'\n                                ],\n                                '5g'\n                            ],\n                            10,\n                            [\n                                '==',\n                                [\n                                    'get',\n                                    'technology'\n                                ],\n                                '4g'\n                            ],\n                            8,\n                            [\n                                '==',\n                                [\n                                    'get',\n                                    'technology'\n                                ],\n                                '3g'\n                            ],\n                            6,\n                            6 // Default for unknown\n                        ]\n                    ],\n                    'circle-color': [\n                        'case',\n                        [\n                            '==',\n                            [\n                                'get',\n                                'technology'\n                            ],\n                            '5g'\n                        ],\n                        '#9932CC',\n                        [\n                            '==',\n                            [\n                                'get',\n                                'technology'\n                            ],\n                            '4g'\n                        ],\n                        '#4682B4',\n                        [\n                            '==',\n                            [\n                                'get',\n                                'technology'\n                            ],\n                            '3g'\n                        ],\n                        '#FFA500',\n                        '#888888' // Gray for unknown\n                    ],\n                    // Opacity based on zoom level\n                    'circle-opacity': [\n                        'interpolate',\n                        [\n                            'linear'\n                        ],\n                        [\n                            'zoom'\n                        ],\n                        6,\n                        0.5,\n                        10,\n                        0.8 // More opaque at high zoom\n                    ],\n                    'circle-stroke-width': [\n                        'interpolate',\n                        [\n                            'linear'\n                        ],\n                        [\n                            'zoom'\n                        ],\n                        8,\n                        0.5,\n                        12,\n                        2 // Thicker stroke at high zoom\n                    ],\n                    'circle-stroke-color': [\n                        'case',\n                        [\n                            '==',\n                            [\n                                'get',\n                                'carrier'\n                            ],\n                            'telstra'\n                        ],\n                        '#0066CC',\n                        [\n                            '==',\n                            [\n                                'get',\n                                'carrier'\n                            ],\n                            'optus'\n                        ],\n                        '#00CC00',\n                        [\n                            '==',\n                            [\n                                'get',\n                                'carrier'\n                            ],\n                            'vodafone'\n                        ],\n                        '#FF0000',\n                        '#FFFFFF' // White for others\n                    ]\n                }\n            });\n            console.log('displayMobileTowers: added tower layer', {\n                timestamp: new Date().toISOString(),\n                layerId: TOWER_LAYER_ID,\n                message: 'Added tower point layer with zoom-based sizing'\n            });\n        }\n        // Add tower labels layer (shown only when zoomed in)\n        if (!map.getLayer(TOWER_LABELS_LAYER_ID)) {\n            map.addLayer({\n                id: TOWER_LABELS_LAYER_ID,\n                type: 'symbol',\n                source: TOWER_SOURCE_ID,\n                'source-layer': MAPBOX_SOURCE_LAYER,\n                layout: {\n                    'text-field': [\n                        'concat',\n                        [\n                            'get',\n                            'name'\n                        ],\n                        '\\n',\n                        [\n                            'get',\n                            'technology'\n                        ],\n                        ' - ',\n                        [\n                            'get',\n                            'carrier'\n                        ]\n                    ],\n                    'text-font': [\n                        'DIN Offc Pro Medium',\n                        'Arial Unicode MS Bold'\n                    ],\n                    'text-size': 11,\n                    'text-offset': [\n                        0,\n                        1.5\n                    ],\n                    'text-anchor': 'top',\n                    'visibility': 'none' // Hidden by default, toggled based on zoom\n                },\n                paint: {\n                    'text-color': '#333',\n                    'text-halo-color': '#fff',\n                    'text-halo-width': 1\n                }\n            });\n            console.log('displayMobileTowers: added label layer', {\n                timestamp: new Date().toISOString(),\n                layerId: TOWER_LABELS_LAYER_ID,\n                message: 'Added tower label layer'\n            });\n        }\n        // Show labels only when zoomed in\n        map.on('zoom', ()=>{\n            const zoom = map.getZoom();\n            if (zoom > 12) {\n                if (map.getLayer(TOWER_LABELS_LAYER_ID)) {\n                    map.setLayoutProperty(TOWER_LABELS_LAYER_ID, 'visibility', 'visible');\n                }\n            } else {\n                if (map.getLayer(TOWER_LABELS_LAYER_ID)) {\n                    map.setLayoutProperty(TOWER_LABELS_LAYER_ID, 'visibility', 'none');\n                }\n            }\n        });\n        // Set up click handler for tower popups\n        map.on('click', TOWER_LAYER_ID, handleTowerClick);\n        // Change cursor to pointer when hovering over interactive elements\n        map.on('mouseenter', TOWER_LAYER_ID, ()=>{\n            map.getCanvas().style.cursor = 'pointer';\n        });\n        map.on('mouseleave', TOWER_LAYER_ID, ()=>{\n            map.getCanvas().style.cursor = '';\n        });\n        // Ensure all layers are visible\n        setLayerVisibility(TOWER_LAYER_ID, true);\n        console.log('displayMobileTowers: layers added and configured', {\n            timestamp: new Date().toISOString(),\n            layers: [\n                TOWER_LAYER_ID,\n                TOWER_LABELS_LAYER_ID\n            ],\n            message: 'Successfully added tower layers to map'\n        });\n        return true;\n    } catch (error) {\n        console.error('displayMobileTowers: error', {\n            timestamp: new Date().toISOString(),\n            error: error instanceof Error ? error.message : String(error),\n            message: 'Failed to display mobile tower data'\n        });\n        return false;\n    }\n}\n/**\n * Handle click on an individual tower\n */ function handleTowerClick(e) {\n    if (!e.features || e.features.length === 0) return;\n    const map = e.target;\n    const feature = e.features[0];\n    const props = feature.properties;\n    if (!props) return;\n    // Use the click event's coordinates instead of properties\n    // Vector tiles don't store coordinates in properties\n    const coordinates = e.lngLat;\n    // Calculate frequency in MHz for display (converting from Hz)\n    const frequency = props.frequency / 1000000;\n    const frequencyBand = getFrequencyBandLabel(props.frequency);\n    // Create popup content with detailed information\n    const content = `\n    <div class=\"text-xs p-1 max-w-xs\">\n      <h3 class=\"font-bold text-base\">${props.name || 'Unknown Site'}</h3>\n      <div class=\"grid grid-cols-2 gap-x-2 gap-y-1 mt-2\">\n        <div class=\"font-semibold\">Carrier:</div>\n        <div>${capitalizeFirstLetter(props.carrier)}</div>\n        \n        <div class=\"font-semibold\">Technology:</div>\n        <div>${props.technology.toUpperCase()}</div>\n        \n        <div class=\"font-semibold\">Frequency:</div>\n        <div>${frequency.toFixed(1)} MHz</div>\n        \n        <div class=\"font-semibold\">Band:</div>\n        <div>${frequencyBand}</div>\n        \n        ${props.height ? `\n          <div class=\"font-semibold\">Height:</div>\n          <div>${props.height} m</div>\n        ` : ''}\n        \n        ${props.azimuth ? `\n          <div class=\"font-semibold\">Azimuth:</div>\n          <div>${props.azimuth}</div>\n        ` : ''}\n        \n        ${props.tilt ? `\n          <div class=\"font-semibold\">Tilt:</div>\n          <div>${props.tilt}</div>\n        ` : ''}\n        \n        ${props.eirp ? `\n          <div class=\"font-semibold\">Power (EIRP):</div>\n          <div>${props.eirp} ${props.eirp_unit || 'W'}</div>\n        ` : ''}\n        \n        ${props.elevation ? `\n          <div class=\"font-semibold\">Elevation:</div>\n          <div>${props.elevation} m</div>\n        ` : ''}\n        \n        ${props.state ? `\n          <div class=\"font-semibold\">State:</div>\n          <div>${props.state}</div>\n        ` : ''}\n      </div>\n      \n      <!-- Add Create Repeater Button -->\n      <div class=\"mt-3 pt-2 border-t border-gray-200\">\n        <button \n          id=\"create-repeater-btn\" \n          class=\"w-full bg-purple-600 hover:bg-purple-700 text-white py-1 px-3 rounded text-xs font-medium flex items-center justify-center\"\n          data-tower-id=\"${props.id || ''}\"\n          data-tower-lng=\"${coordinates.lng}\"\n          data-tower-lat=\"${coordinates.lat}\"\n          data-tower-elevation=\"${props.elevation || 0}\"\n          data-tower-height=\"${props.height || 2}\"\n          data-tower-carrier=\"${props.carrier || ''}\"\n          data-tower-technology=\"${props.technology || ''}\"\n          data-tower-frequency=\"${frequency.toFixed(1)}\"\n          data-tower-azimuth=\"${props.azimuth || ''}\"\n          data-tower-tilt=\"${props.tilt || ''}\"\n          data-tower-eirp=\"${props.eirp || ''}\"\n          data-tower-eirp-unit=\"${props.eirp_unit || ''}\"\n        >\n          <span class=\"mr-1\"></span> Create Repeater From Tower\n        </button>\n      </div>\n    </div>\n  `;\n    // Create and display popup at the event's coordinates\n    const popup = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_0___default().Popup)().setLngLat(coordinates).setHTML(content).addTo(map);\n    // Add event listener to the button after popup is added to the map\n    setTimeout(()=>{\n        const createRepeaterBtn = document.getElementById('create-repeater-btn');\n        if (createRepeaterBtn) {\n            createRepeaterBtn.addEventListener('click', (clickEvent)=>{\n                const target = clickEvent.currentTarget;\n                const towerData = {\n                    id: target.dataset.towerId,\n                    lng: parseFloat(target.dataset.towerLng || '0'),\n                    lat: parseFloat(target.dataset.towerLat || '0'),\n                    elevation: parseFloat(target.dataset.towerElevation || '0'),\n                    height: parseFloat(target.dataset.towerHeight || '2'),\n                    carrier: target.dataset.towerCarrier,\n                    technology: target.dataset.towerTechnology,\n                    frequency: target.dataset.towerFrequency,\n                    azimuth: target.dataset.towerAzimuth ? parseFloat(target.dataset.towerAzimuth) : undefined,\n                    tilt: target.dataset.towerTilt ? parseFloat(target.dataset.towerTilt) : undefined,\n                    eirp: target.dataset.towerEirp ? parseFloat(target.dataset.towerEirp) : undefined,\n                    eirp_unit: target.dataset.towerEirpUnit\n                };\n                // Dispatch custom event to be caught by the useTowerToMarker hook\n                // Fixed: Changed variable name to avoid conflict with the event parameter\n                const customEvent = new CustomEvent('tower:createRepeater', {\n                    detail: towerData\n                });\n                window.dispatchEvent(customEvent);\n                // Close the popup\n                popup.remove();\n            });\n        }\n    }, 100); // Small timeout to ensure DOM is ready\n}\n/**\n * Apply filters to the mobile towers layers\n * \n * @param map Mapbox map instance\n * @param filters Tower filter criteria\n * @returns Success status\n */ function filterMobileTowers(map, filters) {\n    console.log('filterMobileTowers: applying filters', {\n        timestamp: new Date().toISOString(),\n        filters,\n        message: 'Applying filters to mobile tower layers'\n    });\n    // Find all tower-related layers that need filtering\n    const towerLayers = [\n        TOWER_LAYER_ID,\n        TOWER_LABELS_LAYER_ID\n    ];\n    try {\n        // Build filter expression\n        let filterParts = [\n            'all'\n        ];\n        // Add carrier filter if specified\n        if (filters.carriers && filters.carriers.length > 0) {\n            // Use 'match' expression for better performance\n            filterParts.push([\n                'match',\n                [\n                    'get',\n                    'carrier'\n                ],\n                filters.carriers,\n                true,\n                false\n            ]);\n        }\n        // Add technology filter if specified\n        if (filters.technologies && filters.technologies.length > 0) {\n            // Use 'match' expression for better performance\n            filterParts.push([\n                'match',\n                [\n                    'get',\n                    'technology'\n                ],\n                filters.technologies,\n                true,\n                false\n            ]);\n        }\n        // Add frequency band filter if specified\n        if (filters.frequencyBands && filters.frequencyBands.length > 0) {\n            const frequencyFilter = [\n                'any'\n            ];\n            for (const band of filters.frequencyBands){\n                const bandRange = FREQUENCY_BANDS[band];\n                if (bandRange) {\n                    frequencyFilter.push([\n                        'all',\n                        [\n                            '>=',\n                            [\n                                '/',\n                                [\n                                    'get',\n                                    'frequency'\n                                ],\n                                1000000\n                            ],\n                            bandRange.min\n                        ],\n                        [\n                            '<=',\n                            [\n                                '/',\n                                [\n                                    'get',\n                                    'frequency'\n                                ],\n                                1000000\n                            ],\n                            bandRange.max\n                        ]\n                    ]);\n                }\n            }\n            filterParts.push(frequencyFilter);\n        }\n        console.log('filterMobileTowers: filter expression', {\n            timestamp: new Date().toISOString(),\n            expression: JSON.stringify(filterParts),\n            message: 'Created filter expression'\n        });\n        // Apply filter to all tower layers\n        for (const layerId of towerLayers){\n            if (map.getLayer(layerId)) {\n                map.setFilter(layerId, filterParts);\n            }\n        }\n        return true;\n    } catch (error) {\n        console.error('filterMobileTowers: error', {\n            timestamp: new Date().toISOString(),\n            error: error instanceof Error ? error.message : String(error),\n            message: 'Failed to apply filters to tower layers'\n        });\n        return false;\n    }\n}\n/**\n * Get the frequency band label for a given frequency\n * \n * @param frequency Frequency in Hz\n * @returns Frequency band label\n */ function getFrequencyBandLabel(frequency) {\n    // Convert to MHz for comparison\n    const freqMHz = frequency / 1000000;\n    for (const [band, range] of Object.entries(FREQUENCY_BANDS)){\n        if (freqMHz >= range.min && freqMHz <= range.max) {\n            return range.label;\n        }\n    }\n    return 'Other';\n}\n/**\n * Utility function to capitalize the first letter of a string\n */ function capitalizeFirstLetter(string) {\n    if (!string) return '';\n    return string.charAt(0).toUpperCase() + string.slice(1);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL3NlcnZpY2VzL01vYmlsZVRvd2VyU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Q0FjQyxHQUdnQztBQUdqQyxzQ0FBc0M7QUFDdEMsdUVBQXVFO0FBQ3ZFLE1BQU1DLG9CQUFvQjtBQUMxQixNQUFNQyxzQkFBc0Isd0JBQXdCLHdDQUF3QztBQUU1Rix5Q0FBeUM7QUFDbEMsTUFBTUMsa0JBQXNGO0lBQ2pHQyxVQUFVO1FBQUVDLEtBQUs7UUFBS0MsS0FBSztRQUFLQyxPQUFPO0lBQXlCO0lBQ2hFQyxZQUFZO1FBQUVILEtBQUs7UUFBTUMsS0FBSztRQUFNQyxPQUFPO0lBQTJCO0lBQ3RFRSxZQUFZO1FBQUVKLEtBQUs7UUFBTUMsS0FBSztRQUFNQyxPQUFPO0lBQTJCO0lBQ3RFRyxXQUFXO1FBQUVMLEtBQUs7UUFBTUMsS0FBSztRQUFNQyxPQUFPO0lBQXNCO0lBQ2hFSSxRQUFRO1FBQUVOLEtBQUs7UUFBT0MsS0FBSztRQUFPQyxPQUFPO0lBQW1CO0FBQzlELEVBQUU7QUFFRix1QkFBdUI7QUFDdkIsTUFBTUssa0JBQWtCO0FBQ3hCLE1BQU1DLGlCQUFpQjtBQUN2QixNQUFNQyx3QkFBd0I7QUFFOUI7Ozs7Ozs7Q0FPQyxHQUNNLGVBQWVDLG9CQUNwQkMsR0FBaUIsRUFDakJDLFVBQXFDLEVBQ3JDQyxrQkFBK0Q7SUFFL0RDLFFBQVFDLEdBQUcsQ0FBQyxpQ0FBaUM7UUFDM0NDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNqQ0MsU0FBUztJQUNYO0lBRUEsSUFBSTtRQUNGLGtEQUFrRDtRQUNsRCxJQUFJUixJQUFJUyxRQUFRLENBQUNaLGlCQUFpQjtZQUNoQ0ssbUJBQW1CTCxnQkFBZ0I7WUFDbkMsSUFBSUcsSUFBSVMsUUFBUSxDQUFDWCx3QkFBd0I7Z0JBQ3ZDSSxtQkFBbUJKLHVCQUF1QjtZQUM1QztZQUVBSyxRQUFRQyxHQUFHLENBQUMsaURBQWlEO2dCQUMzREMsV0FBVyxJQUFJ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aUI7SUFDckQsZ0NBQWdDO0lBQ2hDLE1BQU1vRSxVQUFVcEUsWUFBWTtJQUU1QixLQUFLLE1BQU0sQ0FBQzhELE1BQU1PLE1BQU0sSUFBSUMsT0FBT0MsT0FBTyxDQUFDOUgsaUJBQWtCO1FBQzNELElBQUkySCxXQUFXQyxNQUFNMUgsR0FBRyxJQUFJeUgsV0FBV0MsTUFBTXpILEdBQUcsRUFBRTtZQUNoRCxPQUFPeUgsTUFBTXhILEtBQUs7UUFDcEI7SUFDRjtJQUNBLE9BQU87QUFDVDtBQUVBOztDQUVDLEdBQ0QsU0FBU3dELHNCQUFzQm1FLE1BQWM7SUFDM0MsSUFBSSxDQUFDQSxRQUFRLE9BQU87SUFDcEIsT0FBT0EsT0FBT0MsTUFBTSxDQUFDLEdBQUdqRSxXQUFXLEtBQUtnRSxPQUFPRSxLQUFLLENBQUM7QUFDdkQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL3NlcnZpY2VzL01vYmlsZVRvd2VyU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE1vYmlsZVRvd2VyU2VydmljZS50c1xuICogXG4gKiBQdXJwb3NlOlxuICogUHJvdmlkZXMgZnVuY3Rpb25hbGl0eSB0byBkaXNwbGF5IGFuZCBpbnRlcmFjdCB3aXRoIG1vYmlsZSB0b3dlciBkYXRhIGZyb21cbiAqIE1hcGJveCB0aWxlc2V0cywgd2l0aCBmaWx0ZXJpbmcgYW5kIHN0eWxpbmcgY2FwYWJpbGl0aWVzLlxuICogXG4gKiBUaGlzIHNlcnZpY2U6XG4gKiAtIExvYWRzIG1vYmlsZSB0b3dlciBkYXRhIGZyb20gTWFwYm94IHRpbGVzZXRzXG4gKiAtIENyZWF0ZXMgYW5kIG1hbmFnZXMgbWFwIGxheWVycyBmb3IgdG93ZXJzIGFuZCBjbHVzdGVyc1xuICogLSBIYW5kbGVzIHN0eWxpbmcgYmFzZWQgb24gY2FycmllciAoVGVsc3RyYSwgT3B0dXMsIFZvZGFmb25lKSBhbmQgdGVjaG5vbG9neSAoM0csIDRHLCA1RylcbiAqIC0gSW1wbGVtZW50cyB6b29tLXJlc3BvbnNpdmUgc2l6aW5nIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UgYXQgZGlmZmVyZW50IHpvb20gbGV2ZWxzXG4gKiAtIFByb3ZpZGVzIGZpbHRlcmluZyBieSBjYXJyaWVyLCB0ZWNobm9sb2d5LCBhbmQgZnJlcXVlbmN5IGJhbmRzXG4gKiAtIE1hbmFnZXMgaW50ZXJhY3RpdmUgZWxlbWVudHMgbGlrZSBwb3B1cHMgYW5kIGhvdmVyIHN0YXRlc1xuICovXG5cbmltcG9ydCAqIGFzIHR1cmYgZnJvbSAnQHR1cmYvdHVyZic7XG5pbXBvcnQgbWFwYm94Z2wgZnJvbSAnbWFwYm94LWdsJztcbmltcG9ydCB7IE1vYmlsZVRvd2VyRmlsdGVycywgRnJlcXVlbmN5QmFuZCB9IGZyb20gJy4uL3R5cGVzL21vYmlsZVRvd2Vycyc7XG5cbi8vIENvbnN0YW50cyBmb3Igc3R5bGluZyBhbmQgZmlsdGVyaW5nXG4vLyBSZXBsYWNlIHdpdGggeW91ciBhY3R1YWwgTWFwYm94IHRpbGVzZXQgVVJMIGFmdGVyIHVwbG9hZGluZyB0aGUgZGF0YVxuY29uc3QgTUFQQk9YX1NPVVJDRV9VUkwgPSAnbWFwYm94Oi8vaW50ZWxhZXJvLjN6YWhoYTBvJztcbmNvbnN0IE1BUEJPWF9TT1VSQ0VfTEFZRVIgPSAnbW9iaWxlX3Rvd2Vycy1jbml1NWonOyAvLyBUaGUgc291cmNlIGxheWVyIG5hbWUgaW4geW91ciB0aWxlc2V0XG5cbi8vIEZyZXF1ZW5jeSBiYW5kcyBmb3IgZmlsdGVyaW5nIChpbiBNSHopXG5leHBvcnQgY29uc3QgRlJFUVVFTkNZX0JBTkRTOiBSZWNvcmQ8RnJlcXVlbmN5QmFuZCwgeyBtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIGxhYmVsOiBzdHJpbmcgfT4gPSB7XG4gIExPV19CQU5EOiB7IG1pbjogNzAwLCBtYXg6IDkwMCwgbGFiZWw6ICdMb3cgQmFuZCAoNzAwLTkwMCBNSHopJyB9LFxuICBNSURfQkFORF8xOiB7IG1pbjogMTgwMCwgbWF4OiAyMTAwLCBsYWJlbDogJ01pZCBCYW5kICgxODAwLTIxMDAgTUh6KScgfSxcbiAgTUlEX0JBTkRfMjogeyBtaW46IDIzMDAsIG1heDogMjYwMCwgbGFiZWw6ICdNaWQgQmFuZCAoMjMwMC0yNjAwIE1IeiknIH0sXG4gIEhJR0hfQkFORDogeyBtaW46IDMzMDAsIG1heDogMzgwMCwgbGFiZWw6ICdIaWdoIEJhbmQgKDMuNSBHSHopJyB9LFxuICBNTVdBVkU6IHsgbWluOiAyNDAwMCwgbWF4OiA0MDAwMCwgbGFiZWw6ICdtbVdhdmUgKD4yNCBHSHopJyB9LFxufTtcblxuLy8gTGF5ZXIgYW5kIHNvdXJjZSBJRHNcbmNvbnN0IFRPV0VSX1NPVVJDRV9JRCA9ICdtb2JpbGUtdG93ZXJzLXNvdXJjZSc7XG5jb25zdCBUT1dFUl9MQVlFUl9JRCA9ICdtb2JpbGUtdG93ZXJzLXVuY2x1c3RlcmVkLXBvaW50JztcbmNvbnN0IFRPV0VSX0xBQkVMU19MQVlFUl9JRCA9ICdtb2JpbGUtdG93ZXJzLWxhYmVscyc7XG5cbi8qKlxuICogTWFpbiBmdW5jdGlvbiB0byBkaXNwbGF5IG1vYmlsZSB0b3dlcnMgb24gdGhlIG1hcCB1c2luZyBNYXBib3ggdGlsZXNldHNcbiAqIFxuICogQHBhcmFtIG1hcCBNYXBib3ggbWFwIGluc3RhbmNlXG4gKiBAcGFyYW0gYW9HZW9tZXRyeSBBcmVhIG9mIE9wZXJhdGlvbnMgR2VvSlNPTlxuICogQHBhcmFtIHNldExheWVyVmlzaWJpbGl0eSBGdW5jdGlvbiB0byBjb250cm9sIGxheWVyIHZpc2liaWxpdHlcbiAqIEByZXR1cm5zIFByb21pc2U8Ym9vbGVhbj4gU3VjY2VzcyBzdGF0dXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRpc3BsYXlNb2JpbGVUb3dlcnMoXG4gIG1hcDogbWFwYm94Z2wuTWFwLFxuICBhb0dlb21ldHJ5OiBHZW9KU09OLkZlYXR1cmVDb2xsZWN0aW9uLFxuICBzZXRMYXllclZpc2liaWxpdHk6IChsYXllcklkOiBzdHJpbmcsIHZpc2libGU6IGJvb2xlYW4pID0+IHZvaWRcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zb2xlLmxvZygnZGlzcGxheU1vYmlsZVRvd2Vyczogc3RhcnRpbmcnLCB7XG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgbWVzc2FnZTogJ1NldHRpbmcgdXAgbW9iaWxlIHRvd2VyIGRpc3BsYXkgdXNpbmcgTWFwYm94IHRpbGVzZXRzJ1xuICB9KTtcblxuICB0cnkge1xuICAgIC8vIElmIGxheWVycyBhbHJlYWR5IGV4aXN0LCBqdXN0IG1ha2UgdGhlbSB2aXNpYmxlXG4gICAgaWYgKG1hcC5nZXRMYXllcihUT1dFUl9MQVlFUl9JRCkpIHtcbiAgICAgIHNldExheWVyVmlzaWJpbGl0eShUT1dFUl9MQVlFUl9JRCwgdHJ1ZSk7XG4gICAgICBpZiAobWFwLmdldExheWVyKFRPV0VSX0xBQkVMU19MQVlFUl9JRCkpIHtcbiAgICAgICAgc2V0TGF5ZXJWaXNpYmlsaXR5KFRPV0VSX0xBQkVMU19MQVlFUl9JRCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdkaXNwbGF5TW9iaWxlVG93ZXJzOiB0b2dnbGluZyBleGlzdGluZyBsYXllcnMnLCB7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBtZXNzYWdlOiAnU2hvd2luZyBleGlzdGluZyB0b3dlciBsYXllcnMnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCBNYXBib3ggdmVjdG9yIHRpbGUgc291cmNlXG4gICAgaWYgKCFtYXAuZ2V0U291cmNlKFRPV0VSX1NPVVJDRV9JRCkpIHtcbiAgICAgIG1hcC5hZGRTb3VyY2UoVE9XRVJfU09VUkNFX0lELCB7XG4gICAgICAgIHR5cGU6ICd2ZWN0b3InLFxuICAgICAgICB1cmw6IE1BUEJPWF9TT1VSQ0VfVVJMXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ2Rpc3BsYXlNb2JpbGVUb3dlcnM6IGFkZGVkIE1hcGJveCB2ZWN0b3IgdGlsZSBzb3VyY2UnLCB7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzb3VyY2VJZDogVE9XRVJfU09VUkNFX0lELFxuICAgICAgICB1cmw6IE1BUEJPWF9TT1VSQ0VfVVJMLFxuICAgICAgICBtZXNzYWdlOiAnQWRkZWQgTWFwYm94IHZlY3RvciB0aWxlIHNvdXJjZSBmb3IgbW9iaWxlIHRvd2VycydcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBBZGQgbGF5ZXIgZm9yIGluZGl2aWR1YWwgdG93ZXJzIHdpdGggem9vbS1iYXNlZCBzaXppbmdcbiAgICBpZiAoIW1hcC5nZXRMYXllcihUT1dFUl9MQVlFUl9JRCkpIHtcbiAgICAgIG1hcC5hZGRMYXllcih7XG4gICAgICAgIGlkOiBUT1dFUl9MQVlFUl9JRCxcbiAgICAgICAgdHlwZTogJ2NpcmNsZScsXG4gICAgICAgIHNvdXJjZTogVE9XRVJfU09VUkNFX0lELFxuICAgICAgICAnc291cmNlLWxheWVyJzogTUFQQk9YX1NPVVJDRV9MQVlFUixcbiAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAvLyBTdHlsZSBiYXNlZCBvbiB0ZWNobm9sb2d5IGFuZCB6b29tIGxldmVsXG4gICAgICAgICAgJ2NpcmNsZS1yYWRpdXMnOiBbXG4gICAgICAgICAgICAnaW50ZXJwb2xhdGUnLFxuICAgICAgICAgICAgWydsaW5lYXInXSxcbiAgICAgICAgICAgIFsnem9vbSddLFxuICAgICAgICAgICAgNiwgMSwgIC8vIFZlcnkgc21hbGwgYXQgem9vbSBsZXZlbCA2XG4gICAgICAgICAgICA4LCAyLCAgLy8gU21hbGwgYXQgem9vbSBsZXZlbCA4XG4gICAgICAgICAgICAxMCwgWyAgLy8gTWVkaXVtIGF0IHpvb20gbGV2ZWwgMTBcbiAgICAgICAgICAgICAgJ2Nhc2UnLFxuICAgICAgICAgICAgICBbJz09JywgWydnZXQnLCAndGVjaG5vbG9neSddLCAnNWcnXSwgNixcbiAgICAgICAgICAgICAgWyc9PScsIFsnZ2V0JywgJ3RlY2hub2xvZ3knXSwgJzRnJ10sIDQsXG4gICAgICAgICAgICAgIFsnPT0nLCBbJ2dldCcsICd0ZWNobm9sb2d5J10sICczZyddLCAzLFxuICAgICAgICAgICAgICAzIC8vIERlZmF1bHQgZm9yIHVua25vd25cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAxNCwgWyAgLy8gRnVsbCBzaXplIGF0IHpvb20gbGV2ZWwgMTQrXG4gICAgICAgICAgICAgICdjYXNlJyxcbiAgICAgICAgICAgICAgWyc9PScsIFsnZ2V0JywgJ3RlY2hub2xvZ3knXSwgJzVnJ10sIDEwLFxuICAgICAgICAgICAgICBbJz09JywgWydnZXQnLCAndGVjaG5vbG9neSddLCAnNGcnXSwgOCxcbiAgICAgICAgICAgICAgWyc9PScsIFsnZ2V0JywgJ3RlY2hub2xvZ3knXSwgJzNnJ10sIDYsXG4gICAgICAgICAgICAgIDYgLy8gRGVmYXVsdCBmb3IgdW5rbm93blxuICAgICAgICAgICAgXVxuICAgICAgICAgIF0sXG4gICAgICAgICAgJ2NpcmNsZS1jb2xvcic6IFtcbiAgICAgICAgICAgICdjYXNlJyxcbiAgICAgICAgICAgIFsnPT0nLCBbJ2dldCcsICd0ZWNobm9sb2d5J10sICc1ZyddLCAnIzk5MzJDQycsIC8vIFB1cnBsZSBmb3IgNUdcbiAgICAgICAgICAgIFsnPT0nLCBbJ2dldCcsICd0ZWNobm9sb2d5J10sICc0ZyddLCAnIzQ2ODJCNCcsIC8vIEJsdWUgZm9yIDRHXG4gICAgICAgICAgICBbJz09JywgWydnZXQnLCAndGVjaG5vbG9neSddLCAnM2cnXSwgJyNGRkE1MDAnLCAvLyBPcmFuZ2UgZm9yIDNHXG4gICAgICAgICAgICAnIzg4ODg4OCcgLy8gR3JheSBmb3IgdW5rbm93blxuICAgICAgICAgIF0sXG4gICAgICAgICAgLy8gT3BhY2l0eSBiYXNlZCBvbiB6b29tIGxldmVsXG4gICAgICAgICAgJ2NpcmNsZS1vcGFjaXR5JzogW1xuICAgICAgICAgICAgJ2ludGVycG9sYXRlJyxcbiAgICAgICAgICAgIFsnbGluZWFyJ10sXG4gICAgICAgICAgICBbJ3pvb20nXSxcbiAgICAgICAgICAgIDYsIDAuNSwgIC8vIE1vcmUgdHJhbnNwYXJlbnQgYXQgbG93IHpvb21cbiAgICAgICAgICAgIDEwLCAwLjggICAvLyBNb3JlIG9wYXF1ZSBhdCBoaWdoIHpvb21cbiAgICAgICAgICBdLFxuICAgICAgICAgICdjaXJjbGUtc3Ryb2tlLXdpZHRoJzogW1xuICAgICAgICAgICAgJ2ludGVycG9sYXRlJyxcbiAgICAgICAgICAgIFsnbGluZWFyJ10sXG4gICAgICAgICAgICBbJ3pvb20nXSxcbiAgICAgICAgICAgIDgsIDAuNSwgIC8vIFRoaW5uZXIgc3Ryb2tlIGF0IGxvdyB6b29tXG4gICAgICAgICAgICAxMiwgMiAgICAvLyBUaGlja2VyIHN0cm9rZSBhdCBoaWdoIHpvb21cbiAgICAgICAgICBdLFxuICAgICAgICAgICdjaXJjbGUtc3Ryb2tlLWNvbG9yJzogW1xuICAgICAgICAgICAgJ2Nhc2UnLFxuICAgICAgICAgICAgWyc9PScsIFsnZ2V0JywgJ2NhcnJpZXInXSwgJ3RlbHN0cmEnXSwgJyMwMDY2Q0MnLCAvLyBUZWxzdHJhIGJsdWVcbiAgICAgICAgICAgIFsnPT0nLCBbJ2dldCcsICdjYXJyaWVyJ10sICdvcHR1cyddLCAnIzAwQ0MwMCcsIC8vIE9wdHVzIGdyZWVuXG4gICAgICAgICAgICBbJz09JywgWydnZXQnLCAnY2FycmllciddLCAndm9kYWZvbmUnXSwgJyNGRjAwMDAnLCAvLyBWb2RhZm9uZSByZWRcbiAgICAgICAgICAgICcjRkZGRkZGJyAvLyBXaGl0ZSBmb3Igb3RoZXJzXG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ2Rpc3BsYXlNb2JpbGVUb3dlcnM6IGFkZGVkIHRvd2VyIGxheWVyJywge1xuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgbGF5ZXJJZDogVE9XRVJfTEFZRVJfSUQsXG4gICAgICAgIG1lc3NhZ2U6ICdBZGRlZCB0b3dlciBwb2ludCBsYXllciB3aXRoIHpvb20tYmFzZWQgc2l6aW5nJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCB0b3dlciBsYWJlbHMgbGF5ZXIgKHNob3duIG9ubHkgd2hlbiB6b29tZWQgaW4pXG4gICAgaWYgKCFtYXAuZ2V0TGF5ZXIoVE9XRVJfTEFCRUxTX0xBWUVSX0lEKSkge1xuICAgICAgbWFwLmFkZExheWVyKHtcbiAgICAgICAgaWQ6IFRPV0VSX0xBQkVMU19MQVlFUl9JRCxcbiAgICAgICAgdHlwZTogJ3N5bWJvbCcsXG4gICAgICAgIHNvdXJjZTogVE9XRVJfU09VUkNFX0lELFxuICAgICAgICAnc291cmNlLWxheWVyJzogTUFQQk9YX1NPVVJDRV9MQVlFUixcbiAgICAgICAgbGF5b3V0OiB7XG4gICAgICAgICAgJ3RleHQtZmllbGQnOiBbXG4gICAgICAgICAgICAnY29uY2F0JyxcbiAgICAgICAgICAgIFsnZ2V0JywgJ25hbWUnXSxcbiAgICAgICAgICAgICdcXG4nLFxuICAgICAgICAgICAgWydnZXQnLCAndGVjaG5vbG9neSddLFxuICAgICAgICAgICAgJyAtICcsXG4gICAgICAgICAgICBbJ2dldCcsICdjYXJyaWVyJ11cbiAgICAgICAgICBdLFxuICAgICAgICAgICd0ZXh0LWZvbnQnOiBbJ0RJTiBPZmZjIFBybyBNZWRpdW0nLCAnQXJpYWwgVW5pY29kZSBNUyBCb2xkJ10sXG4gICAgICAgICAgJ3RleHQtc2l6ZSc6IDExLFxuICAgICAgICAgICd0ZXh0LW9mZnNldCc6IFswLCAxLjVdLFxuICAgICAgICAgICd0ZXh0LWFuY2hvcic6ICd0b3AnLFxuICAgICAgICAgICd2aXNpYmlsaXR5JzogJ25vbmUnIC8vIEhpZGRlbiBieSBkZWZhdWx0LCB0b2dnbGVkIGJhc2VkIG9uIHpvb21cbiAgICAgICAgfSxcbiAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAndGV4dC1jb2xvcic6ICcjMzMzJyxcbiAgICAgICAgICAndGV4dC1oYWxvLWNvbG9yJzogJyNmZmYnLFxuICAgICAgICAgICd0ZXh0LWhhbG8td2lkdGgnOiAxXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnZGlzcGxheU1vYmlsZVRvd2VyczogYWRkZWQgbGFiZWwgbGF5ZXInLCB7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBsYXllcklkOiBUT1dFUl9MQUJFTFNfTEFZRVJfSUQsXG4gICAgICAgIG1lc3NhZ2U6ICdBZGRlZCB0b3dlciBsYWJlbCBsYXllcidcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBTaG93IGxhYmVscyBvbmx5IHdoZW4gem9vbWVkIGluXG4gICAgbWFwLm9uKCd6b29tJywgKCkgPT4ge1xuICAgICAgY29uc3Qgem9vbSA9IG1hcC5nZXRab29tKCk7XG4gICAgICBpZiAoem9vbSA+IDEyKSB7XG4gICAgICAgIGlmIChtYXAuZ2V0TGF5ZXIoVE9XRVJfTEFCRUxTX0xBWUVSX0lEKSkge1xuICAgICAgICAgIG1hcC5zZXRMYXlvdXRQcm9wZXJ0eShUT1dFUl9MQUJFTFNfTEFZRVJfSUQsICd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG1hcC5nZXRMYXllcihUT1dFUl9MQUJFTFNfTEFZRVJfSUQpKSB7XG4gICAgICAgICAgbWFwLnNldExheW91dFByb3BlcnR5KFRPV0VSX0xBQkVMU19MQVlFUl9JRCwgJ3Zpc2liaWxpdHknLCAnbm9uZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gU2V0IHVwIGNsaWNrIGhhbmRsZXIgZm9yIHRvd2VyIHBvcHVwc1xuICAgIG1hcC5vbignY2xpY2snLCBUT1dFUl9MQVlFUl9JRCwgaGFuZGxlVG93ZXJDbGljayk7XG4gICAgXG4gICAgLy8gQ2hhbmdlIGN1cnNvciB0byBwb2ludGVyIHdoZW4gaG92ZXJpbmcgb3ZlciBpbnRlcmFjdGl2ZSBlbGVtZW50c1xuICAgIG1hcC5vbignbW91c2VlbnRlcicsIFRPV0VSX0xBWUVSX0lELCAoKSA9PiB7XG4gICAgICBtYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgIH0pO1xuICAgIFxuICAgIG1hcC5vbignbW91c2VsZWF2ZScsIFRPV0VSX0xBWUVSX0lELCAoKSA9PiB7XG4gICAgICBtYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gRW5zdXJlIGFsbCBsYXllcnMgYXJlIHZpc2libGVcbiAgICBzZXRMYXllclZpc2liaWxpdHkoVE9XRVJfTEFZRVJfSUQsIHRydWUpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdkaXNwbGF5TW9iaWxlVG93ZXJzOiBsYXllcnMgYWRkZWQgYW5kIGNvbmZpZ3VyZWQnLCB7XG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGxheWVyczogW1RPV0VSX0xBWUVSX0lELCBUT1dFUl9MQUJFTFNfTEFZRVJfSURdLFxuICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBhZGRlZCB0b3dlciBsYXllcnMgdG8gbWFwJ1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ2Rpc3BsYXlNb2JpbGVUb3dlcnM6IGVycm9yJywge1xuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBkaXNwbGF5IG1vYmlsZSB0b3dlciBkYXRhJ1xuICAgIH0pO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIEhhbmRsZSBjbGljayBvbiBhbiBpbmRpdmlkdWFsIHRvd2VyXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZVRvd2VyQ2xpY2soZTogbWFwYm94Z2wuTWFwTW91c2VFdmVudCAmIHsgZmVhdHVyZXM/OiBtYXBib3hnbC5NYXBib3hHZW9KU09ORmVhdHVyZVtdIH0pIHtcbiAgaWYgKCFlLmZlYXR1cmVzIHx8IGUuZmVhdHVyZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gIFxuICBjb25zdCBtYXAgPSBlLnRhcmdldDtcbiAgY29uc3QgZmVhdHVyZSA9IGUuZmVhdHVyZXNbMF07XG4gIGNvbnN0IHByb3BzID0gZmVhdHVyZS5wcm9wZXJ0aWVzO1xuICBcbiAgaWYgKCFwcm9wcykgcmV0dXJuO1xuICBcbiAgLy8gVXNlIHRoZSBjbGljayBldmVudCdzIGNvb3JkaW5hdGVzIGluc3RlYWQgb2YgcHJvcGVydGllc1xuICAvLyBWZWN0b3IgdGlsZXMgZG9uJ3Qgc3RvcmUgY29vcmRpbmF0ZXMgaW4gcHJvcGVydGllc1xuICBjb25zdCBjb29yZGluYXRlcyA9IGUubG5nTGF0O1xuICBcbiAgLy8gQ2FsY3VsYXRlIGZyZXF1ZW5jeSBpbiBNSHogZm9yIGRpc3BsYXkgKGNvbnZlcnRpbmcgZnJvbSBIeilcbiAgY29uc3QgZnJlcXVlbmN5ID0gcHJvcHMuZnJlcXVlbmN5IC8gMTAwMDAwMDtcbiAgY29uc3QgZnJlcXVlbmN5QmFuZCA9IGdldEZyZXF1ZW5jeUJhbmRMYWJlbChwcm9wcy5mcmVxdWVuY3kpO1xuICBcbiAgLy8gQ3JlYXRlIHBvcHVwIGNvbnRlbnQgd2l0aCBkZXRhaWxlZCBpbmZvcm1hdGlvblxuICBjb25zdCBjb250ZW50ID0gYFxuICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXhzIHAtMSBtYXgtdy14c1wiPlxuICAgICAgPGgzIGNsYXNzPVwiZm9udC1ib2xkIHRleHQtYmFzZVwiPiR7cHJvcHMubmFtZSB8fCAnVW5rbm93biBTaXRlJ308L2gzPlxuICAgICAgPGRpdiBjbGFzcz1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLXgtMiBnYXAteS0xIG10LTJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZvbnQtc2VtaWJvbGRcIj5DYXJyaWVyOjwvZGl2PlxuICAgICAgICA8ZGl2PiR7Y2FwaXRhbGl6ZUZpcnN0TGV0dGVyKHByb3BzLmNhcnJpZXIpfTwvZGl2PlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvbnQtc2VtaWJvbGRcIj5UZWNobm9sb2d5OjwvZGl2PlxuICAgICAgICA8ZGl2PiR7cHJvcHMudGVjaG5vbG9neS50b1VwcGVyQ2FzZSgpfTwvZGl2PlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvbnQtc2VtaWJvbGRcIj5GcmVxdWVuY3k6PC9kaXY+XG4gICAgICAgIDxkaXY+JHtmcmVxdWVuY3kudG9GaXhlZCgxKX0gTUh6PC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9udC1zZW1pYm9sZFwiPkJhbmQ6PC9kaXY+XG4gICAgICAgIDxkaXY+JHtmcmVxdWVuY3lCYW5kfTwvZGl2PlxuICAgICAgICBcbiAgICAgICAgJHtwcm9wcy5oZWlnaHQgPyBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvbnQtc2VtaWJvbGRcIj5IZWlnaHQ6PC9kaXY+XG4gICAgICAgICAgPGRpdj4ke3Byb3BzLmhlaWdodH0gbTwvZGl2PlxuICAgICAgICBgIDogJyd9XG4gICAgICAgIFxuICAgICAgICAke3Byb3BzLmF6aW11dGggPyBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvbnQtc2VtaWJvbGRcIj5BemltdXRoOjwvZGl2PlxuICAgICAgICAgIDxkaXY+JHtwcm9wcy5hemltdXRofcKwPC9kaXY+XG4gICAgICAgIGAgOiAnJ31cbiAgICAgICAgXG4gICAgICAgICR7cHJvcHMudGlsdCA/IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9udC1zZW1pYm9sZFwiPlRpbHQ6PC9kaXY+XG4gICAgICAgICAgPGRpdj4ke3Byb3BzLnRpbHR9wrA8L2Rpdj5cbiAgICAgICAgYCA6ICcnfVxuICAgICAgICBcbiAgICAgICAgJHtwcm9wcy5laXJwID8gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb250LXNlbWlib2xkXCI+UG93ZXIgKEVJUlApOjwvZGl2PlxuICAgICAgICAgIDxkaXY+JHtwcm9wcy5laXJwfSAke3Byb3BzLmVpcnBfdW5pdCB8fCAnVyd9PC9kaXY+XG4gICAgICAgIGAgOiAnJ31cbiAgICAgICAgXG4gICAgICAgICR7cHJvcHMuZWxldmF0aW9uID8gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb250LXNlbWlib2xkXCI+RWxldmF0aW9uOjwvZGl2PlxuICAgICAgICAgIDxkaXY+JHtwcm9wcy5lbGV2YXRpb259IG08L2Rpdj5cbiAgICAgICAgYCA6ICcnfVxuICAgICAgICBcbiAgICAgICAgJHtwcm9wcy5zdGF0ZSA/IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9udC1zZW1pYm9sZFwiPlN0YXRlOjwvZGl2PlxuICAgICAgICAgIDxkaXY+JHtwcm9wcy5zdGF0ZX08L2Rpdj5cbiAgICAgICAgYCA6ICcnfVxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIDwhLS0gQWRkIENyZWF0ZSBSZXBlYXRlciBCdXR0b24gLS0+XG4gICAgICA8ZGl2IGNsYXNzPVwibXQtMyBwdC0yIGJvcmRlci10IGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIGlkPVwiY3JlYXRlLXJlcGVhdGVyLWJ0blwiIFxuICAgICAgICAgIGNsYXNzPVwidy1mdWxsIGJnLXB1cnBsZS02MDAgaG92ZXI6YmctcHVycGxlLTcwMCB0ZXh0LXdoaXRlIHB5LTEgcHgtMyByb3VuZGVkIHRleHQteHMgZm9udC1tZWRpdW0gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIlxuICAgICAgICAgIGRhdGEtdG93ZXItaWQ9XCIke3Byb3BzLmlkIHx8ICcnfVwiXG4gICAgICAgICAgZGF0YS10b3dlci1sbmc9XCIke2Nvb3JkaW5hdGVzLmxuZ31cIlxuICAgICAgICAgIGRhdGEtdG93ZXItbGF0PVwiJHtjb29yZGluYXRlcy5sYXR9XCJcbiAgICAgICAgICBkYXRhLXRvd2VyLWVsZXZhdGlvbj1cIiR7cHJvcHMuZWxldmF0aW9uIHx8IDB9XCJcbiAgICAgICAgICBkYXRhLXRvd2VyLWhlaWdodD1cIiR7cHJvcHMuaGVpZ2h0IHx8IDJ9XCJcbiAgICAgICAgICBkYXRhLXRvd2VyLWNhcnJpZXI9XCIke3Byb3BzLmNhcnJpZXIgfHwgJyd9XCJcbiAgICAgICAgICBkYXRhLXRvd2VyLXRlY2hub2xvZ3k9XCIke3Byb3BzLnRlY2hub2xvZ3kgfHwgJyd9XCJcbiAgICAgICAgICBkYXRhLXRvd2VyLWZyZXF1ZW5jeT1cIiR7ZnJlcXVlbmN5LnRvRml4ZWQoMSl9XCJcbiAgICAgICAgICBkYXRhLXRvd2VyLWF6aW11dGg9XCIke3Byb3BzLmF6aW11dGggfHwgJyd9XCJcbiAgICAgICAgICBkYXRhLXRvd2VyLXRpbHQ9XCIke3Byb3BzLnRpbHQgfHwgJyd9XCJcbiAgICAgICAgICBkYXRhLXRvd2VyLWVpcnA9XCIke3Byb3BzLmVpcnAgfHwgJyd9XCJcbiAgICAgICAgICBkYXRhLXRvd2VyLWVpcnAtdW5pdD1cIiR7cHJvcHMuZWlycF91bml0IHx8ICcnfVwiXG4gICAgICAgID5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1yLTFcIj7imqHvuI88L3NwYW4+IENyZWF0ZSBSZXBlYXRlciBGcm9tIFRvd2VyXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIGA7XG4gIFxuICAvLyBDcmVhdGUgYW5kIGRpc3BsYXkgcG9wdXAgYXQgdGhlIGV2ZW50J3MgY29vcmRpbmF0ZXNcbiAgY29uc3QgcG9wdXAgPSBuZXcgbWFwYm94Z2wuUG9wdXAoKVxuICAgIC5zZXRMbmdMYXQoY29vcmRpbmF0ZXMpXG4gICAgLnNldEhUTUwoY29udGVudClcbiAgICAuYWRkVG8obWFwKTtcbiAgICBcbiAgLy8gQWRkIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBidXR0b24gYWZ0ZXIgcG9wdXAgaXMgYWRkZWQgdG8gdGhlIG1hcFxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBjb25zdCBjcmVhdGVSZXBlYXRlckJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcmVhdGUtcmVwZWF0ZXItYnRuJyk7XG4gICAgaWYgKGNyZWF0ZVJlcGVhdGVyQnRuKSB7XG4gICAgICBjcmVhdGVSZXBlYXRlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChjbGlja0V2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGNsaWNrRXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgY29uc3QgdG93ZXJEYXRhID0ge1xuICAgICAgICAgIGlkOiB0YXJnZXQuZGF0YXNldC50b3dlcklkLFxuICAgICAgICAgIGxuZzogcGFyc2VGbG9hdCh0YXJnZXQuZGF0YXNldC50b3dlckxuZyB8fCAnMCcpLFxuICAgICAgICAgIGxhdDogcGFyc2VGbG9hdCh0YXJnZXQuZGF0YXNldC50b3dlckxhdCB8fCAnMCcpLFxuICAgICAgICAgIGVsZXZhdGlvbjogcGFyc2VGbG9hdCh0YXJnZXQuZGF0YXNldC50b3dlckVsZXZhdGlvbiB8fCAnMCcpLFxuICAgICAgICAgIGhlaWdodDogcGFyc2VGbG9hdCh0YXJnZXQuZGF0YXNldC50b3dlckhlaWdodCB8fCAnMicpLFxuICAgICAgICAgIGNhcnJpZXI6IHRhcmdldC5kYXRhc2V0LnRvd2VyQ2FycmllcixcbiAgICAgICAgICB0ZWNobm9sb2d5OiB0YXJnZXQuZGF0YXNldC50b3dlclRlY2hub2xvZ3ksXG4gICAgICAgICAgZnJlcXVlbmN5OiB0YXJnZXQuZGF0YXNldC50b3dlckZyZXF1ZW5jeSxcbiAgICAgICAgICBhemltdXRoOiB0YXJnZXQuZGF0YXNldC50b3dlckF6aW11dGggPyBwYXJzZUZsb2F0KHRhcmdldC5kYXRhc2V0LnRvd2VyQXppbXV0aCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgdGlsdDogdGFyZ2V0LmRhdGFzZXQudG93ZXJUaWx0ID8gcGFyc2VGbG9hdCh0YXJnZXQuZGF0YXNldC50b3dlclRpbHQpIDogdW5kZWZpbmVkLFxuICAgICAgICAgIGVpcnA6IHRhcmdldC5kYXRhc2V0LnRvd2VyRWlycCA/IHBhcnNlRmxvYXQodGFyZ2V0LmRhdGFzZXQudG93ZXJFaXJwKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBlaXJwX3VuaXQ6IHRhcmdldC5kYXRhc2V0LnRvd2VyRWlycFVuaXRcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIERpc3BhdGNoIGN1c3RvbSBldmVudCB0byBiZSBjYXVnaHQgYnkgdGhlIHVzZVRvd2VyVG9NYXJrZXIgaG9va1xuICAgICAgICAvLyBGaXhlZDogQ2hhbmdlZCB2YXJpYWJsZSBuYW1lIHRvIGF2b2lkIGNvbmZsaWN0IHdpdGggdGhlIGV2ZW50IHBhcmFtZXRlclxuICAgICAgICBjb25zdCBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgndG93ZXI6Y3JlYXRlUmVwZWF0ZXInLCB7IGRldGFpbDogdG93ZXJEYXRhIH0pO1xuICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbG9zZSB0aGUgcG9wdXBcbiAgICAgICAgcG9wdXAucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIDEwMCk7IC8vIFNtYWxsIHRpbWVvdXQgdG8gZW5zdXJlIERPTSBpcyByZWFkeVxufVxuXG4vKipcbiAqIEFwcGx5IGZpbHRlcnMgdG8gdGhlIG1vYmlsZSB0b3dlcnMgbGF5ZXJzXG4gKiBcbiAqIEBwYXJhbSBtYXAgTWFwYm94IG1hcCBpbnN0YW5jZVxuICogQHBhcmFtIGZpbHRlcnMgVG93ZXIgZmlsdGVyIGNyaXRlcmlhXG4gKiBAcmV0dXJucyBTdWNjZXNzIHN0YXR1c1xuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyTW9iaWxlVG93ZXJzKFxuICBtYXA6IG1hcGJveGdsLk1hcCxcbiAgZmlsdGVyczogTW9iaWxlVG93ZXJGaWx0ZXJzXG4pOiBib29sZWFuIHtcbiAgY29uc29sZS5sb2coJ2ZpbHRlck1vYmlsZVRvd2VyczogYXBwbHlpbmcgZmlsdGVycycsIHtcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBmaWx0ZXJzLFxuICAgIG1lc3NhZ2U6ICdBcHBseWluZyBmaWx0ZXJzIHRvIG1vYmlsZSB0b3dlciBsYXllcnMnXG4gIH0pO1xuXG4gIC8vIEZpbmQgYWxsIHRvd2VyLXJlbGF0ZWQgbGF5ZXJzIHRoYXQgbmVlZCBmaWx0ZXJpbmdcbiAgY29uc3QgdG93ZXJMYXllcnMgPSBbXG4gICAgVE9XRVJfTEFZRVJfSUQsXG4gICAgVE9XRVJfTEFCRUxTX0xBWUVSX0lEXG4gIF07XG4gIFxuICB0cnkge1xuICAgIC8vIEJ1aWxkIGZpbHRlciBleHByZXNzaW9uXG4gICAgbGV0IGZpbHRlclBhcnRzOiBhbnlbXSA9IFsnYWxsJ107XG4gICAgXG4gICAgLy8gQWRkIGNhcnJpZXIgZmlsdGVyIGlmIHNwZWNpZmllZFxuICAgIGlmIChmaWx0ZXJzLmNhcnJpZXJzICYmIGZpbHRlcnMuY2FycmllcnMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gVXNlICdtYXRjaCcgZXhwcmVzc2lvbiBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgICBmaWx0ZXJQYXJ0cy5wdXNoKFtcbiAgICAgICAgJ21hdGNoJyxcbiAgICAgICAgWydnZXQnLCAnY2FycmllciddLFxuICAgICAgICBmaWx0ZXJzLmNhcnJpZXJzLFxuICAgICAgICB0cnVlLFxuICAgICAgICBmYWxzZVxuICAgICAgXSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCB0ZWNobm9sb2d5IGZpbHRlciBpZiBzcGVjaWZpZWRcbiAgICBpZiAoZmlsdGVycy50ZWNobm9sb2dpZXMgJiYgZmlsdGVycy50ZWNobm9sb2dpZXMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gVXNlICdtYXRjaCcgZXhwcmVzc2lvbiBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgICBmaWx0ZXJQYXJ0cy5wdXNoKFtcbiAgICAgICAgJ21hdGNoJyxcbiAgICAgICAgWydnZXQnLCAndGVjaG5vbG9neSddLFxuICAgICAgICBmaWx0ZXJzLnRlY2hub2xvZ2llcyxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgZmFsc2VcbiAgICAgIF0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBBZGQgZnJlcXVlbmN5IGJhbmQgZmlsdGVyIGlmIHNwZWNpZmllZFxuICAgIGlmIChmaWx0ZXJzLmZyZXF1ZW5jeUJhbmRzICYmIGZpbHRlcnMuZnJlcXVlbmN5QmFuZHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZnJlcXVlbmN5RmlsdGVyOiBhbnlbXSA9IFsnYW55J107XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgYmFuZCBvZiBmaWx0ZXJzLmZyZXF1ZW5jeUJhbmRzKSB7XG4gICAgICAgIGNvbnN0IGJhbmRSYW5nZSA9IEZSRVFVRU5DWV9CQU5EU1tiYW5kXTtcbiAgICAgICAgaWYgKGJhbmRSYW5nZSkge1xuICAgICAgICAgIGZyZXF1ZW5jeUZpbHRlci5wdXNoKFtcbiAgICAgICAgICAgICdhbGwnLFxuICAgICAgICAgICAgWyc+PScsIFsnLycsIFsnZ2V0JywgJ2ZyZXF1ZW5jeSddLCAxMDAwMDAwXSwgYmFuZFJhbmdlLm1pbl0sXG4gICAgICAgICAgICBbJzw9JywgWycvJywgWydnZXQnLCAnZnJlcXVlbmN5J10sIDEwMDAwMDBdLCBiYW5kUmFuZ2UubWF4XVxuICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGZpbHRlclBhcnRzLnB1c2goZnJlcXVlbmN5RmlsdGVyKTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ2ZpbHRlck1vYmlsZVRvd2VyczogZmlsdGVyIGV4cHJlc3Npb24nLCB7XG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGV4cHJlc3Npb246IEpTT04uc3RyaW5naWZ5KGZpbHRlclBhcnRzKSxcbiAgICAgIG1lc3NhZ2U6ICdDcmVhdGVkIGZpbHRlciBleHByZXNzaW9uJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEFwcGx5IGZpbHRlciB0byBhbGwgdG93ZXIgbGF5ZXJzXG4gICAgZm9yIChjb25zdCBsYXllcklkIG9mIHRvd2VyTGF5ZXJzKSB7XG4gICAgICBpZiAobWFwLmdldExheWVyKGxheWVySWQpKSB7XG4gICAgICAgIG1hcC5zZXRGaWx0ZXIobGF5ZXJJZCwgZmlsdGVyUGFydHMpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdmaWx0ZXJNb2JpbGVUb3dlcnM6IGVycm9yJywge1xuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBhcHBseSBmaWx0ZXJzIHRvIHRvd2VyIGxheWVycydcbiAgICB9KTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgdGhlIGZyZXF1ZW5jeSBiYW5kIGxhYmVsIGZvciBhIGdpdmVuIGZyZXF1ZW5jeVxuICogXG4gKiBAcGFyYW0gZnJlcXVlbmN5IEZyZXF1ZW5jeSBpbiBIelxuICogQHJldHVybnMgRnJlcXVlbmN5IGJhbmQgbGFiZWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZyZXF1ZW5jeUJhbmRMYWJlbChmcmVxdWVuY3k6IG51bWJlcik6IHN0cmluZyB7XG4gIC8vIENvbnZlcnQgdG8gTUh6IGZvciBjb21wYXJpc29uXG4gIGNvbnN0IGZyZXFNSHogPSBmcmVxdWVuY3kgLyAxMDAwMDAwO1xuICBcbiAgZm9yIChjb25zdCBbYmFuZCwgcmFuZ2VdIG9mIE9iamVjdC5lbnRyaWVzKEZSRVFVRU5DWV9CQU5EUykpIHtcbiAgICBpZiAoZnJlcU1IeiA+PSByYW5nZS5taW4gJiYgZnJlcU1IeiA8PSByYW5nZS5tYXgpIHtcbiAgICAgIHJldHVybiByYW5nZS5sYWJlbDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuICdPdGhlcic7XG59XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiB0byBjYXBpdGFsaXplIHRoZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKHN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKCFzdHJpbmcpIHJldHVybiAnJztcbiAgcmV0dXJuIHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKTtcbn0iXSwibmFtZXMiOlsibWFwYm94Z2wiLCJNQVBCT1hfU09VUkNFX1VSTCIsIk1BUEJPWF9TT1VSQ0VfTEFZRVIiLCJGUkVRVUVOQ1lfQkFORFMiLCJMT1dfQkFORCIsIm1pbiIsIm1heCIsImxhYmVsIiwiTUlEX0JBTkRfMSIsIk1JRF9CQU5EXzIiLCJISUdIX0JBTkQiLCJNTVdBVkUiLCJUT1dFUl9TT1VSQ0VfSUQiLCJUT1dFUl9MQVlFUl9JRCIsIlRPV0VSX0xBQkVMU19MQVlFUl9JRCIsImRpc3BsYXlNb2JpbGVUb3dlcnMiLCJtYXAiLCJhb0dlb21ldHJ5Iiwic2V0TGF5ZXJWaXNpYmlsaXR5IiwiY29uc29sZSIsImxvZyIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm1lc3NhZ2UiLCJnZXRMYXllciIsImdldFNvdXJjZSIsImFkZFNvdXJjZSIsInR5cGUiLCJ1cmwiLCJzb3VyY2VJZCIsImFkZExheWVyIiwiaWQiLCJzb3VyY2UiLCJwYWludCIsImxheWVySWQiLCJsYXlvdXQiLCJvbiIsInpvb20iLCJnZXRab29tIiwic2V0TGF5b3V0UHJvcGVydHkiLCJoYW5kbGVUb3dlckNsaWNrIiwiZ2V0Q2FudmFzIiwic3R5bGUiLCJjdXJzb3IiLCJsYXllcnMiLCJlcnJvciIsIkVycm9yIiwiU3RyaW5nIiwiZSIsImZlYXR1cmVzIiwibGVuZ3RoIiwidGFyZ2V0IiwiZmVhdHVyZSIsInByb3BzIiwicHJvcGVydGllcyIsImNvb3JkaW5hdGVzIiwibG5nTGF0IiwiZnJlcXVlbmN5IiwiZnJlcXVlbmN5QmFuZCIsImdldEZyZXF1ZW5jeUJhbmRMYWJlbCIsImNvbnRlbnQiLCJuYW1lIiwiY2FwaXRhbGl6ZUZpcnN0TGV0dGVyIiwiY2FycmllciIsInRlY2hub2xvZ3kiLCJ0b1VwcGVyQ2FzZSIsInRvRml4ZWQiLCJoZWlnaHQiLCJhemltdXRoIiwidGlsdCIsImVpcnAiLCJlaXJwX3VuaXQiLCJlbGV2YXRpb24iLCJzdGF0ZSIsImxuZyIsImxhdCIsInBvcHVwIiwiUG9wdXAiLCJzZXRMbmdMYXQiLCJzZXRIVE1MIiwiYWRkVG8iLCJzZXRUaW1lb3V0IiwiY3JlYXRlUmVwZWF0ZXJCdG4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsaWNrRXZlbnQiLCJjdXJyZW50VGFyZ2V0IiwidG93ZXJEYXRhIiwiZGF0YXNldCIsInRvd2VySWQiLCJwYXJzZUZsb2F0IiwidG93ZXJMbmciLCJ0b3dlckxhdCIsInRvd2VyRWxldmF0aW9uIiwidG93ZXJIZWlnaHQiLCJ0b3dlckNhcnJpZXIiLCJ0b3dlclRlY2hub2xvZ3kiLCJ0b3dlckZyZXF1ZW5jeSIsInRvd2VyQXppbXV0aCIsInVuZGVmaW5lZCIsInRvd2VyVGlsdCIsInRvd2VyRWlycCIsInRvd2VyRWlycFVuaXQiLCJjdXN0b21FdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwid2luZG93IiwiZGlzcGF0Y2hFdmVudCIsInJlbW92ZSIsImZpbHRlck1vYmlsZVRvd2VycyIsImZpbHRlcnMiLCJ0b3dlckxheWVycyIsImZpbHRlclBhcnRzIiwiY2FycmllcnMiLCJwdXNoIiwidGVjaG5vbG9naWVzIiwiZnJlcXVlbmN5QmFuZHMiLCJmcmVxdWVuY3lGaWx0ZXIiLCJiYW5kIiwiYmFuZFJhbmdlIiwiZXhwcmVzc2lvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXRGaWx0ZXIiLCJmcmVxTUh6IiwicmFuZ2UiLCJPYmplY3QiLCJlbnRyaWVzIiwic3RyaW5nIiwiY2hhckF0Iiwic2xpY2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/services/MobileTowerService.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/services/TreeHeightCanvas.tsx":
/*!***********************************************!*\
  !*** ./src/app/services/TreeHeightCanvas.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TreeHeightCanvas: () => (/* binding */ TreeHeightCanvas)\n/* harmony export */ });\n/**\n * TreeHeightCanvas.tsx\n * \n * Purpose:\n * Manages the canvas DOM element for tree height visualization overlay.\n * Handles canvas creation, positioning, sizing, and interaction methods.\n * Provides a clean interface for canvas operations without React dependencies.\n * \n * This component:\n * - Creates and positions canvas overlay on map\n * - Handles canvas resizing and synchronization with map\n * - Provides methods for canvas visibility control\n * - Enables pixel-level height value extraction\n * - Manages canvas lifecycle and cleanup\n * \n * Related Files:\n * - TreeHeightSystem.ts: Core rendering engine\n * - useTreeHeights.ts: React integration hook\n * - MapboxLayerHandler.tsx: Layer coordination\n */ class TreeHeightCanvas {\n    constructor(map){\n        this.canvas = null;\n        this.ctx = null;\n        this.isVisible = false;\n        this.resizeHandler = null;\n        this.map = map;\n        this.initialize();\n    }\n    /**\n   * Initialize the canvas overlay\n   */ initialize() {\n        console.log(\" Initializing TreeHeightCanvas\");\n        // Create canvas element\n        this.canvas = document.createElement('canvas');\n        this.canvas.setAttribute('data-tree-height-canvas', 'true'); // Identifier for TreeHeightSystem\n        // Style the canvas overlay\n        this.canvas.style.position = 'absolute';\n        this.canvas.style.top = '0px';\n        this.canvas.style.left = '0px';\n        this.canvas.style.pointerEvents = 'none';\n        this.canvas.style.zIndex = '10';\n        this.canvas.style.display = 'none';\n        this.canvas.style.mixBlendMode = 'multiply'; // Blend with map for better visuals\n        // Get canvas context\n        this.ctx = this.canvas.getContext('2d');\n        if (!this.ctx) {\n            console.error(\"Failed to get canvas 2D context\");\n            return;\n        }\n        // Add canvas to map container\n        const mapContainer = this.map.getContainer();\n        mapContainer.appendChild(this.canvas);\n        // Set up resize handling\n        this.resizeHandler = this.handleResize.bind(this);\n        this.map.on('resize', this.resizeHandler);\n        // Initial size\n        this.updateCanvasSize();\n        console.log(\" TreeHeightCanvas initialized\");\n    }\n    /**\n   * Handle map resize events\n   */ handleResize() {\n        this.updateCanvasSize();\n    }\n    /**\n   * Update canvas size to match map\n   */ updateCanvasSize() {\n        if (!this.canvas) return;\n        const mapCanvas = this.map.getCanvas();\n        // Set canvas size to match map canvas exactly\n        this.canvas.width = mapCanvas.width;\n        this.canvas.height = mapCanvas.height;\n        this.canvas.style.width = `${mapCanvas.clientWidth}px`;\n        this.canvas.style.height = `${mapCanvas.clientHeight}px`;\n        console.log(` Canvas resized to: ${mapCanvas.width}x${mapCanvas.height} (${mapCanvas.clientWidth}x${mapCanvas.clientHeight})`);\n    }\n    /**\n   * Set canvas visibility\n   */ setVisible(visible) {\n        if (!this.canvas) return;\n        this.isVisible = visible;\n        this.canvas.style.display = visible ? 'block' : 'none';\n        console.log(` Canvas visibility: ${visible ? 'visible' : 'hidden'}`);\n    }\n    /**\n   * Check if canvas is visible\n   */ getVisible() {\n        return this.isVisible;\n    }\n    /**\n   * Clear the canvas\n   */ clear() {\n        if (!this.canvas || !this.ctx) return;\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        console.log(\" Canvas cleared\");\n    }\n    /**\n   * Get tree height value at specific canvas coordinates\n   */ getHeightAtPoint(canvasX, canvasY) {\n        if (!this.canvas || !this.ctx || !this.isVisible) {\n            return null;\n        }\n        try {\n            // Ensure coordinates are within canvas bounds\n            const x = Math.floor(canvasX);\n            const y = Math.floor(canvasY);\n            if (x < 0 || y < 0 || x >= this.canvas.width || y >= this.canvas.height) {\n                console.warn(`Click coordinates ${x}, ${y} outside canvas bounds`);\n                return null;\n            }\n            // Get pixel data\n            const imageData = this.ctx.getImageData(x, y, 1, 1);\n            const pixel = imageData.data;\n            // Tree height is stored in the red channel\n            const heightValue = pixel[0];\n            const hasData = pixel[3] > 0; // Alpha channel indicates if there's data\n            console.log(` Pixel data at (${x}, ${y}): R=${pixel[0]} G=${pixel[1]} B=${pixel[2]} A=${pixel[3]}`);\n            return hasData && heightValue > 0 ? heightValue : null;\n        } catch (error) {\n            console.error(\"Error reading canvas pixel data:\", error);\n            return null;\n        }\n    }\n    /**\n   * Get canvas dimensions\n   */ getDimensions() {\n        if (!this.canvas) return null;\n        return {\n            width: this.canvas.width,\n            height: this.canvas.height\n        };\n    }\n    /**\n   * Get canvas element (for direct access if needed)\n   */ getCanvasElement() {\n        return this.canvas;\n    }\n    /**\n   * Get canvas context (for direct rendering if needed)\n   */ getContext() {\n        return this.ctx;\n    }\n    /**\n   * Check if canvas is ready for use\n   */ isReady() {\n        return !!(this.canvas && this.ctx);\n    }\n    /**\n   * Set canvas blend mode\n   */ setBlendMode(blendMode) {\n        if (!this.canvas) return;\n        this.canvas.style.mixBlendMode = blendMode;\n        console.log(` Canvas blend mode set to: ${blendMode}`);\n    }\n    /**\n   * Set canvas opacity\n   */ setOpacity(opacity) {\n        if (!this.canvas) return;\n        const clampedOpacity = Math.max(0, Math.min(1, opacity));\n        this.canvas.style.opacity = clampedOpacity.toString();\n        console.log(` Canvas opacity set to: ${clampedOpacity}`);\n    }\n    /**\n   * Set cursor style when hovering over tree areas\n   */ setCursor(cursor) {\n        if (!this.canvas) return;\n        const mapContainer = this.map.getContainer();\n        mapContainer.style.cursor = cursor;\n        console.log(` Map cursor set to: ${cursor}`);\n    }\n    /**\n   * Reset cursor to default\n   */ resetCursor() {\n        const mapContainer = this.map.getContainer();\n        mapContainer.style.cursor = '';\n        console.log(` Map cursor reset`);\n    }\n    /**\n   * Get canvas statistics for debugging\n   */ getStats() {\n        return {\n            isReady: this.isReady(),\n            isVisible: this.isVisible,\n            dimensions: this.getDimensions(),\n            hasContext: !!this.ctx\n        };\n    }\n    /**\n   * Destroy the canvas and clean up resources\n   */ destroy() {\n        console.log(\" Destroying TreeHeightCanvas\");\n        // Remove resize handler\n        if (this.resizeHandler) {\n            this.map.off('resize', this.resizeHandler);\n            this.resizeHandler = null;\n        }\n        // Remove canvas from DOM\n        if (this.canvas && this.canvas.parentNode) {\n            this.canvas.parentNode.removeChild(this.canvas);\n        }\n        // Clear references\n        this.canvas = null;\n        this.ctx = null;\n        this.isVisible = false;\n        console.log(\" TreeHeightCanvas destroyed\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL3NlcnZpY2VzL1RyZWVIZWlnaHRDYW52YXMudHN4IiwibWFwcGluZ3MiOiI7Ozs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQW1CQyxHQUVNLE1BQU1BO0lBT1hDLFlBQVlDLEdBQWlCLENBQUU7YUFMdkJDLFNBQW1DO2FBQ25DQyxNQUF1QzthQUN2Q0MsWUFBcUI7YUFDckJDLGdCQUFxQztRQUczQyxJQUFJLENBQUNKLEdBQUcsR0FBR0E7UUFDWCxJQUFJLENBQUNLLFVBQVU7SUFDakI7SUFFQTs7R0FFQyxHQUNELGFBQTJCO1FBQ3pCQyxRQUFRQyxHQUFHLENBQUM7UUFFWix3QkFBd0I7UUFDeEIsSUFBSSxDQUFDTixNQUFNLEdBQUdPLFNBQVNDLGFBQWEsQ0FBQztRQUNyQyxJQUFJLENBQUNSLE1BQU0sQ0FBQ1MsWUFBWSxDQUFDLDJCQUEyQixTQUFTLGtDQUFrQztRQUUvRiwyQkFBMkI7UUFDM0IsSUFBSSxDQUFDVCxNQUFNLENBQUNVLEtBQUssQ0FBQ0MsUUFBUSxHQUFHO1FBQzdCLElBQUksQ0FBQ1gsTUFBTSxDQUFDVSxLQUFLLENBQUNFLEdBQUcsR0FBRztRQUN4QixJQUFJLENBQUNaLE1BQU0sQ0FBQ1UsS0FBSyxDQUFDRyxJQUFJLEdBQUc7UUFDekIsSUFBSSxDQUFDYixNQUFNLENBQUNVLEtBQUssQ0FBQ0ksYUFBYSxHQUFHO1FBQ2xDLElBQUksQ0FBQ2QsTUFBTSxDQUFDVSxLQUFLLENBQUNLLE1BQU0sR0FBRztRQUMzQixJQUFJLENBQUNmLE1BQU0sQ0FBQ1UsS0FBSyxDQUFDTSxPQUFPLEdBQUc7UUFDNUIsSUFBSSxDQUFDaEIsTUFBTSxDQUFDVSxLQUFLLENBQUNPLFlBQVksR0FBRyxZQUFZLG9DQUFvQztRQUVqRixxQkFBcUI7UUFDckIsSUFBSSxDQUFDaEIsR0FBRyxHQUFHLElBQUksQ0FBQ0QsTUFBTSxDQUFDa0IsVUFBVSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxJQUFJLENBQUNqQixHQUFHLEVBQUU7WUFDYkks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TztZQUNMWixTQUFTLElBQUksQ0FBQ0EsT0FBTztZQUNyQnBELFdBQVcsSUFBSSxDQUFDQSxTQUFTO1lBQ3pCaUUsWUFBWSxJQUFJLENBQUNmLGFBQWE7WUFDOUJnQixZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUNuRSxHQUFHO1FBQ3hCO0lBQ0Y7SUFFQTs7R0FFQyxHQUNEb0UsVUFBZ0I7UUFDZGhFLFFBQVFDLEdBQUcsQ0FBQztRQUVaLHdCQUF3QjtRQUN4QixJQUFJLElBQUksQ0FBQ0gsYUFBYSxFQUFFO1lBQ3RCLElBQUksQ0FBQ0osR0FBRyxDQUFDdUUsR0FBRyxDQUFDLFVBQVUsSUFBSSxDQUFDbkUsYUFBYTtZQUN6QyxJQUFJLENBQUNBLGFBQWEsR0FBRztRQUN2QjtRQUVBLHlCQUF5QjtRQUN6QixJQUFJLElBQUksQ0FBQ0gsTUFBTSxJQUFJLElBQUksQ0FBQ0EsTUFBTSxDQUFDdUUsVUFBVSxFQUFFO1lBQ3pDLElBQUksQ0FBQ3ZFLE1BQU0sQ0FBQ3VFLFVBQVUsQ0FBQ0MsV0FBVyxDQUFDLElBQUksQ0FBQ3hFLE1BQU07UUFDaEQ7UUFFQSxtQkFBbUI7UUFDbkIsSUFBSSxDQUFDQSxNQUFNLEdBQUc7UUFDZCxJQUFJLENBQUNDLEdBQUcsR0FBRztRQUNYLElBQUksQ0FBQ0MsU0FBUyxHQUFHO1FBRWpCRyxRQUFRQyxHQUFHLENBQUM7SUFDZDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9zZXJ2aWNlcy9UcmVlSGVpZ2h0Q2FudmFzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSBtYXBib3hnbCBmcm9tICdtYXBib3gtZ2wnO1xuXG4vKipcbiAqIFRyZWVIZWlnaHRDYW52YXMudHN4XG4gKiBcbiAqIFB1cnBvc2U6XG4gKiBNYW5hZ2VzIHRoZSBjYW52YXMgRE9NIGVsZW1lbnQgZm9yIHRyZWUgaGVpZ2h0IHZpc3VhbGl6YXRpb24gb3ZlcmxheS5cbiAqIEhhbmRsZXMgY2FudmFzIGNyZWF0aW9uLCBwb3NpdGlvbmluZywgc2l6aW5nLCBhbmQgaW50ZXJhY3Rpb24gbWV0aG9kcy5cbiAqIFByb3ZpZGVzIGEgY2xlYW4gaW50ZXJmYWNlIGZvciBjYW52YXMgb3BlcmF0aW9ucyB3aXRob3V0IFJlYWN0IGRlcGVuZGVuY2llcy5cbiAqIFxuICogVGhpcyBjb21wb25lbnQ6XG4gKiAtIENyZWF0ZXMgYW5kIHBvc2l0aW9ucyBjYW52YXMgb3ZlcmxheSBvbiBtYXBcbiAqIC0gSGFuZGxlcyBjYW52YXMgcmVzaXppbmcgYW5kIHN5bmNocm9uaXphdGlvbiB3aXRoIG1hcFxuICogLSBQcm92aWRlcyBtZXRob2RzIGZvciBjYW52YXMgdmlzaWJpbGl0eSBjb250cm9sXG4gKiAtIEVuYWJsZXMgcGl4ZWwtbGV2ZWwgaGVpZ2h0IHZhbHVlIGV4dHJhY3Rpb25cbiAqIC0gTWFuYWdlcyBjYW52YXMgbGlmZWN5Y2xlIGFuZCBjbGVhbnVwXG4gKiBcbiAqIFJlbGF0ZWQgRmlsZXM6XG4gKiAtIFRyZWVIZWlnaHRTeXN0ZW0udHM6IENvcmUgcmVuZGVyaW5nIGVuZ2luZVxuICogLSB1c2VUcmVlSGVpZ2h0cy50czogUmVhY3QgaW50ZWdyYXRpb24gaG9va1xuICogLSBNYXBib3hMYXllckhhbmRsZXIudHN4OiBMYXllciBjb29yZGluYXRpb25cbiAqL1xuXG5leHBvcnQgY2xhc3MgVHJlZUhlaWdodENhbnZhcyB7XG4gIHByaXZhdGUgbWFwOiBtYXBib3hnbC5NYXA7XG4gIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgaXNWaXNpYmxlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgcmVzaXplSGFuZGxlcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IobWFwOiBtYXBib3hnbC5NYXApIHtcbiAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBjYW52YXMgb3ZlcmxheVxuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwi8J+OqCBJbml0aWFsaXppbmcgVHJlZUhlaWdodENhbnZhc1wiKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgY2FudmFzIGVsZW1lbnRcbiAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHRoaXMuY2FudmFzLnNldEF0dHJpYnV0ZSgnZGF0YS10cmVlLWhlaWdodC1jYW52YXMnLCAndHJ1ZScpOyAvLyBJZGVudGlmaWVyIGZvciBUcmVlSGVpZ2h0U3lzdGVtXG4gICAgXG4gICAgLy8gU3R5bGUgdGhlIGNhbnZhcyBvdmVybGF5XG4gICAgdGhpcy5jYW52YXMuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMuY2FudmFzLnN0eWxlLnRvcCA9ICcwcHgnO1xuICAgIHRoaXMuY2FudmFzLnN0eWxlLmxlZnQgPSAnMHB4JztcbiAgICB0aGlzLmNhbnZhcy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIHRoaXMuY2FudmFzLnN0eWxlLnpJbmRleCA9ICcxMCc7XG4gICAgdGhpcy5jYW52YXMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLmNhbnZhcy5zdHlsZS5taXhCbGVuZE1vZGUgPSAnbXVsdGlwbHknOyAvLyBCbGVuZCB3aXRoIG1hcCBmb3IgYmV0dGVyIHZpc3VhbHNcbiAgICBcbiAgICAvLyBHZXQgY2FudmFzIGNvbnRleHRcbiAgICB0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgaWYgKCF0aGlzLmN0eCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBnZXQgY2FudmFzIDJEIGNvbnRleHRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCBjYW52YXMgdG8gbWFwIGNvbnRhaW5lclxuICAgIGNvbnN0IG1hcENvbnRhaW5lciA9IHRoaXMubWFwLmdldENvbnRhaW5lcigpO1xuICAgIG1hcENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7XG4gICAgXG4gICAgLy8gU2V0IHVwIHJlc2l6ZSBoYW5kbGluZ1xuICAgIHRoaXMucmVzaXplSGFuZGxlciA9IHRoaXMuaGFuZGxlUmVzaXplLmJpbmQodGhpcyk7XG4gICAgdGhpcy5tYXAub24oJ3Jlc2l6ZScsIHRoaXMucmVzaXplSGFuZGxlcik7XG4gICAgXG4gICAgLy8gSW5pdGlhbCBzaXplXG4gICAgdGhpcy51cGRhdGVDYW52YXNTaXplKCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coXCLinIUgVHJlZUhlaWdodENhbnZhcyBpbml0aWFsaXplZFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgbWFwIHJlc2l6ZSBldmVudHNcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlUmVzaXplKCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlQ2FudmFzU2l6ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBjYW52YXMgc2l6ZSB0byBtYXRjaCBtYXBcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlQ2FudmFzU2l6ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY2FudmFzKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgbWFwQ2FudmFzID0gdGhpcy5tYXAuZ2V0Q2FudmFzKCk7XG4gICAgXG4gICAgLy8gU2V0IGNhbnZhcyBzaXplIHRvIG1hdGNoIG1hcCBjYW52YXMgZXhhY3RseVxuICAgIHRoaXMuY2FudmFzLndpZHRoID0gbWFwQ2FudmFzLndpZHRoO1xuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IG1hcENhbnZhcy5oZWlnaHQ7XG4gICAgdGhpcy5jYW52YXMuc3R5bGUud2lkdGggPSBgJHttYXBDYW52YXMuY2xpZW50V2lkdGh9cHhgO1xuICAgIHRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IGAke21hcENhbnZhcy5jbGllbnRIZWlnaHR9cHhgO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGDwn5OPIENhbnZhcyByZXNpemVkIHRvOiAke21hcENhbnZhcy53aWR0aH14JHttYXBDYW52YXMuaGVpZ2h0fSAoJHttYXBDYW52YXMuY2xpZW50V2lkdGh9eCR7bWFwQ2FudmFzLmNsaWVudEhlaWdodH0pYCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGNhbnZhcyB2aXNpYmlsaXR5XG4gICAqL1xuICBzZXRWaXNpYmxlKHZpc2libGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY2FudmFzKSByZXR1cm47XG4gICAgXG4gICAgdGhpcy5pc1Zpc2libGUgPSB2aXNpYmxlO1xuICAgIHRoaXMuY2FudmFzLnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICBcbiAgICBjb25zb2xlLmxvZyhg8J+Rge+4jyBDYW52YXMgdmlzaWJpbGl0eTogJHt2aXNpYmxlID8gJ3Zpc2libGUnIDogJ2hpZGRlbid9YCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgY2FudmFzIGlzIHZpc2libGVcbiAgICovXG4gIGdldFZpc2libGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNWaXNpYmxlO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIHRoZSBjYW52YXNcbiAgICovXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jYW52YXMgfHwgIXRoaXMuY3R4KSByZXR1cm47XG4gICAgXG4gICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuICAgIGNvbnNvbGUubG9nKFwi8J+nuSBDYW52YXMgY2xlYXJlZFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdHJlZSBoZWlnaHQgdmFsdWUgYXQgc3BlY2lmaWMgY2FudmFzIGNvb3JkaW5hdGVzXG4gICAqL1xuICBnZXRIZWlnaHRBdFBvaW50KGNhbnZhc1g6IG51bWJlciwgY2FudmFzWTogbnVtYmVyKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgaWYgKCF0aGlzLmNhbnZhcyB8fCAhdGhpcy5jdHggfHwgIXRoaXMuaXNWaXNpYmxlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEVuc3VyZSBjb29yZGluYXRlcyBhcmUgd2l0aGluIGNhbnZhcyBib3VuZHNcbiAgICAgIGNvbnN0IHggPSBNYXRoLmZsb29yKGNhbnZhc1gpO1xuICAgICAgY29uc3QgeSA9IE1hdGguZmxvb3IoY2FudmFzWSk7XG4gICAgICBcbiAgICAgIGlmICh4IDwgMCB8fCB5IDwgMCB8fCB4ID49IHRoaXMuY2FudmFzLndpZHRoIHx8IHkgPj0gdGhpcy5jYW52YXMuaGVpZ2h0KSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgQ2xpY2sgY29vcmRpbmF0ZXMgJHt4fSwgJHt5fSBvdXRzaWRlIGNhbnZhcyBib3VuZHNgKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdldCBwaXhlbCBkYXRhXG4gICAgICBjb25zdCBpbWFnZURhdGEgPSB0aGlzLmN0eC5nZXRJbWFnZURhdGEoeCwgeSwgMSwgMSk7XG4gICAgICBjb25zdCBwaXhlbCA9IGltYWdlRGF0YS5kYXRhO1xuICAgICAgXG4gICAgICAvLyBUcmVlIGhlaWdodCBpcyBzdG9yZWQgaW4gdGhlIHJlZCBjaGFubmVsXG4gICAgICBjb25zdCBoZWlnaHRWYWx1ZSA9IHBpeGVsWzBdO1xuICAgICAgY29uc3QgaGFzRGF0YSA9IHBpeGVsWzNdID4gMDsgLy8gQWxwaGEgY2hhbm5lbCBpbmRpY2F0ZXMgaWYgdGhlcmUncyBkYXRhXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OKIFBpeGVsIGRhdGEgYXQgKCR7eH0sICR7eX0pOiBSPSR7cGl4ZWxbMF19IEc9JHtwaXhlbFsxXX0gQj0ke3BpeGVsWzJdfSBBPSR7cGl4ZWxbM119YCk7XG4gICAgICBcbiAgICAgIHJldHVybiBoYXNEYXRhICYmIGhlaWdodFZhbHVlID4gMCA/IGhlaWdodFZhbHVlIDogbnVsbDtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmVhZGluZyBjYW52YXMgcGl4ZWwgZGF0YTpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjYW52YXMgZGltZW5zaW9uc1xuICAgKi9cbiAgZ2V0RGltZW5zaW9ucygpOiB7IHdpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyIH0gfCBudWxsIHtcbiAgICBpZiAoIXRoaXMuY2FudmFzKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IHRoaXMuY2FudmFzLndpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzLmNhbnZhcy5oZWlnaHRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjYW52YXMgZWxlbWVudCAoZm9yIGRpcmVjdCBhY2Nlc3MgaWYgbmVlZGVkKVxuICAgKi9cbiAgZ2V0Q2FudmFzRWxlbWVudCgpOiBIVE1MQ2FudmFzRWxlbWVudCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmNhbnZhcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2FudmFzIGNvbnRleHQgKGZvciBkaXJlY3QgcmVuZGVyaW5nIGlmIG5lZWRlZClcbiAgICovXG4gIGdldENvbnRleHQoKTogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuY3R4O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGNhbnZhcyBpcyByZWFkeSBmb3IgdXNlXG4gICAqL1xuICBpc1JlYWR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhISh0aGlzLmNhbnZhcyAmJiB0aGlzLmN0eCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGNhbnZhcyBibGVuZCBtb2RlXG4gICAqL1xuICBzZXRCbGVuZE1vZGUoYmxlbmRNb2RlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY2FudmFzKSByZXR1cm47XG4gICAgXG4gICAgdGhpcy5jYW52YXMuc3R5bGUubWl4QmxlbmRNb2RlID0gYmxlbmRNb2RlO1xuICAgIGNvbnNvbGUubG9nKGDwn46oIENhbnZhcyBibGVuZCBtb2RlIHNldCB0bzogJHtibGVuZE1vZGV9YCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGNhbnZhcyBvcGFjaXR5XG4gICAqL1xuICBzZXRPcGFjaXR5KG9wYWNpdHk6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5jYW52YXMpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBjbGFtcGVkT3BhY2l0eSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIG9wYWNpdHkpKTtcbiAgICB0aGlzLmNhbnZhcy5zdHlsZS5vcGFjaXR5ID0gY2xhbXBlZE9wYWNpdHkudG9TdHJpbmcoKTtcbiAgICBjb25zb2xlLmxvZyhg8J+Mq++4jyBDYW52YXMgb3BhY2l0eSBzZXQgdG86ICR7Y2xhbXBlZE9wYWNpdHl9YCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGN1cnNvciBzdHlsZSB3aGVuIGhvdmVyaW5nIG92ZXIgdHJlZSBhcmVhc1xuICAgKi9cbiAgc2V0Q3Vyc29yKGN1cnNvcjogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmNhbnZhcykgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IG1hcENvbnRhaW5lciA9IHRoaXMubWFwLmdldENvbnRhaW5lcigpO1xuICAgIG1hcENvbnRhaW5lci5zdHlsZS5jdXJzb3IgPSBjdXJzb3I7XG4gICAgY29uc29sZS5sb2coYPCfkYYgTWFwIGN1cnNvciBzZXQgdG86ICR7Y3Vyc29yfWApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IGN1cnNvciB0byBkZWZhdWx0XG4gICAqL1xuICByZXNldEN1cnNvcigpOiB2b2lkIHtcbiAgICBjb25zdCBtYXBDb250YWluZXIgPSB0aGlzLm1hcC5nZXRDb250YWluZXIoKTtcbiAgICBtYXBDb250YWluZXIuc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgY29uc29sZS5sb2coYPCfkYYgTWFwIGN1cnNvciByZXNldGApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjYW52YXMgc3RhdGlzdGljcyBmb3IgZGVidWdnaW5nXG4gICAqL1xuICBnZXRTdGF0cygpOiB7XG4gICAgaXNSZWFkeTogYm9vbGVhbjtcbiAgICBpc1Zpc2libGU6IGJvb2xlYW47XG4gICAgZGltZW5zaW9uczogeyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlciB9IHwgbnVsbDtcbiAgICBoYXNDb250ZXh0OiBib29sZWFuO1xuICB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNSZWFkeTogdGhpcy5pc1JlYWR5KCksXG4gICAgICBpc1Zpc2libGU6IHRoaXMuaXNWaXNpYmxlLFxuICAgICAgZGltZW5zaW9uczogdGhpcy5nZXREaW1lbnNpb25zKCksXG4gICAgICBoYXNDb250ZXh0OiAhIXRoaXMuY3R4XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95IHRoZSBjYW52YXMgYW5kIGNsZWFuIHVwIHJlc291cmNlc1xuICAgKi9cbiAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIvCfp7kgRGVzdHJveWluZyBUcmVlSGVpZ2h0Q2FudmFzXCIpO1xuICAgIFxuICAgIC8vIFJlbW92ZSByZXNpemUgaGFuZGxlclxuICAgIGlmICh0aGlzLnJlc2l6ZUhhbmRsZXIpIHtcbiAgICAgIHRoaXMubWFwLm9mZigncmVzaXplJywgdGhpcy5yZXNpemVIYW5kbGVyKTtcbiAgICAgIHRoaXMucmVzaXplSGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlbW92ZSBjYW52YXMgZnJvbSBET01cbiAgICBpZiAodGhpcy5jYW52YXMgJiYgdGhpcy5jYW52YXMucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy5jYW52YXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmNhbnZhcyk7XG4gICAgfVxuICAgIFxuICAgIC8vIENsZWFyIHJlZmVyZW5jZXNcbiAgICB0aGlzLmNhbnZhcyA9IG51bGw7XG4gICAgdGhpcy5jdHggPSBudWxsO1xuICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgXG4gICAgY29uc29sZS5sb2coXCLinIUgVHJlZUhlaWdodENhbnZhcyBkZXN0cm95ZWRcIik7XG4gIH1cbn0iXSwibmFtZXMiOlsiVHJlZUhlaWdodENhbnZhcyIsImNvbnN0cnVjdG9yIiwibWFwIiwiY2FudmFzIiwiY3R4IiwiaXNWaXNpYmxlIiwicmVzaXplSGFuZGxlciIsImluaXRpYWxpemUiLCJjb25zb2xlIiwibG9nIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwic3R5bGUiLCJwb3NpdGlvbiIsInRvcCIsImxlZnQiLCJwb2ludGVyRXZlbnRzIiwiekluZGV4IiwiZGlzcGxheSIsIm1peEJsZW5kTW9kZSIsImdldENvbnRleHQiLCJlcnJvciIsIm1hcENvbnRhaW5lciIsImdldENvbnRhaW5lciIsImFwcGVuZENoaWxkIiwiaGFuZGxlUmVzaXplIiwiYmluZCIsIm9uIiwidXBkYXRlQ2FudmFzU2l6ZSIsIm1hcENhbnZhcyIsImdldENhbnZhcyIsIndpZHRoIiwiaGVpZ2h0IiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJzZXRWaXNpYmxlIiwidmlzaWJsZSIsImdldFZpc2libGUiLCJjbGVhciIsImNsZWFyUmVjdCIsImdldEhlaWdodEF0UG9pbnQiLCJjYW52YXNYIiwiY2FudmFzWSIsIngiLCJNYXRoIiwiZmxvb3IiLCJ5Iiwid2FybiIsImltYWdlRGF0YSIsImdldEltYWdlRGF0YSIsInBpeGVsIiwiZGF0YSIsImhlaWdodFZhbHVlIiwiaGFzRGF0YSIsImdldERpbWVuc2lvbnMiLCJnZXRDYW52YXNFbGVtZW50IiwiaXNSZWFkeSIsInNldEJsZW5kTW9kZSIsImJsZW5kTW9kZSIsInNldE9wYWNpdHkiLCJvcGFjaXR5IiwiY2xhbXBlZE9wYWNpdHkiLCJtYXgiLCJtaW4iLCJ0b1N0cmluZyIsInNldEN1cnNvciIsImN1cnNvciIsInJlc2V0Q3Vyc29yIiwiZ2V0U3RhdHMiLCJkaW1lbnNpb25zIiwiaGFzQ29udGV4dCIsImRlc3Ryb3kiLCJvZmYiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/services/TreeHeightCanvas.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/services/TreeHeightSystem.tsx":
/*!***********************************************!*\
  !*** ./src/app/services/TreeHeightSystem.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   treeHeightSystem: () => (/* binding */ treeHeightSystem)\n/* harmony export */ });\n/**\n * TreeHeightSystem.ts\n * \n * Purpose:\n * Core service for tree height visualization. Handles tile fetching, caching,\n * image processing, color mapping, and rendering coordination.\n * Updated for rasterarray tileset with actual height data.\n */ // Configuration constants - UPDATED for new rasterarray tileset\nconst TREE_HEIGHT_CONFIG = {\n    MIN_ZOOM: 10,\n    MAX_ZOOM: 13,\n    TILE_SIZE: 256,\n    MAX_CACHED_TILES: 100,\n    // NEW RASTERARRAY TILESET ID\n    TILE_URL: 'https://api.mapbox.com/v4/intelaero.forest-height-aus-data/{z}/{x}/{y}.png',\n    ACCESS_TOKEN: 'sk.eyJ1IjoiaW50ZWxhZXJvIiwiYSI6ImNtYjdpcG51YTBhYmwyam4wd204ZXlmcHUifQ.hhR2MhgqopLEtNSg05zigg'\n};\n// Color mapping for tree heights\nconst TREE_HEIGHT_COLORS = {\n    0: 'rgba(0,0,0,0)',\n    2: 'rgba(50,200,50,0.8)',\n    5: 'rgba(0,255,0,0.8)',\n    10: 'rgba(255,255,0,0.8)',\n    20: 'rgba(255,165,0,0.9)',\n    30: 'rgba(255,50,50,0.9)',\n    40: 'rgba(200,0,200,1.0)' // Purple for very tall trees\n};\nclass TreeHeightSystem {\n    initialize(map) {\n        this.map = map;\n        this.isInitialized = true;\n        console.log(\" TreeHeightSystem initialized for rasterarray tileset\");\n    }\n    getTreeHeightColor(heightValue) {\n        const heights = Object.keys(TREE_HEIGHT_COLORS).map(Number).sort((a, b)=>a - b);\n        for(let i = 0; i < heights.length; i++){\n            if (heightValue <= heights[i]) {\n                return TREE_HEIGHT_COLORS[heights[i]];\n            }\n        }\n        return TREE_HEIGHT_COLORS[40];\n    }\n    parseColor(color) {\n        const match = color.match(/rgba?\\(([^)]+)\\)/);\n        if (!match) return {\n            r: 0,\n            g: 0,\n            b: 0,\n            a: 0\n        };\n        const values = match[1].split(',').map((v)=>parseFloat(v.trim()));\n        return {\n            r: values[0] || 0,\n            g: values[1] || 0,\n            b: values[2] || 0,\n            a: Math.floor((values[3] || 1) * 255)\n        };\n    }\n    // FIXED: Added missing return statement\n    async fetchTreeHeightTile(zoom, x, y) {\n        const tileKey = `${zoom}/${x}/${y}`;\n        if (this.tileCache.has(tileKey)) {\n            console.log(` Using cached tile: ${tileKey}`);\n            return this.tileCache.get(tileKey);\n        }\n        try {\n            const url = TREE_HEIGHT_CONFIG.TILE_URL.replace('{z}', zoom.toString()).replace('{x}', x.toString()).replace('{y}', y.toString()) + `?access_token=${TREE_HEIGHT_CONFIG.ACCESS_TOKEN}`;\n            console.log(` Fetching tile ${tileKey} from: ${url}`);\n            const response = await fetch(url, {\n                cache: 'force-cache'\n            });\n            console.log(` Tile ${tileKey} response: ${response.status} ${response.statusText}`);\n            if (!response.ok) {\n                const errorText = await response.text();\n                console.log(` Tile ${tileKey} error: ${errorText}`);\n                throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n            }\n            const blob = await response.blob();\n            console.log(` Tile ${tileKey} blob size: ${blob.size} bytes`);\n            const imageData = await this.processImageBlob(blob);\n            if (imageData) {\n                if (this.tileCache.size >= TREE_HEIGHT_CONFIG.MAX_CACHED_TILES) {\n                    const firstKey = this.tileCache.keys().next().value;\n                    this.tileCache.delete(firstKey);\n                }\n                this.tileCache.set(tileKey, imageData);\n                // Enhanced logging for rasterarray data\n                console.log(` Tile ${tileKey} loaded successfully`);\n                console.log(` First 8 pixels (RGBA):`, imageData.data.slice(0, 32));\n                console.log(` Red channel values:`, [\n                    imageData.data[0],\n                    imageData.data[4],\n                    imageData.data[8],\n                    imageData.data[12],\n                    imageData.data[16],\n                    imageData.data[20],\n                    imageData.data[24],\n                    imageData.data[28]\n                ]);\n                console.log(` Non-zero red values count:`, Array.from(imageData.data).filter((val, i)=>i % 4 === 0 && val > 0).length);\n                // ADDED: Return the imageData\n                return imageData;\n            }\n        } catch (error) {\n            console.error(` Failed to fetch tile ${tileKey}:`, error);\n            return null;\n        }\n        return null;\n    }\n    async processImageBlob(blob) {\n        return new Promise((resolve)=>{\n            const img = new Image();\n            img.crossOrigin = 'anonymous';\n            img.onload = ()=>{\n                try {\n                    const canvas = document.createElement('canvas');\n                    canvas.width = TREE_HEIGHT_CONFIG.TILE_SIZE;\n                    canvas.height = TREE_HEIGHT_CONFIG.TILE_SIZE;\n                    const ctx = canvas.getContext('2d');\n                    if (!ctx) {\n                        resolve(null);\n                        return;\n                    }\n                    ctx.drawImage(img, 0, 0, TREE_HEIGHT_CONFIG.TILE_SIZE, TREE_HEIGHT_CONFIG.TILE_SIZE);\n                    const imageData = ctx.getImageData(0, 0, TREE_HEIGHT_CONFIG.TILE_SIZE, TREE_HEIGHT_CONFIG.TILE_SIZE);\n                    resolve(imageData);\n                } catch (error) {\n                    console.error(' Error processing image blob:', error);\n                    resolve(null);\n                }\n            };\n            img.onerror = ()=>{\n                console.error(' Failed to load image blob');\n                resolve(null);\n            };\n            img.src = URL.createObjectURL(blob);\n        });\n    }\n    getTileBounds(zoom, x, y) {\n        const scale = Math.pow(2, zoom);\n        return {\n            west: x / scale * 360 - 180,\n            north: Math.atan(Math.sinh(Math.PI * (1 - 2 * y / scale))) * 180 / Math.PI,\n            east: (x + 1) / scale * 360 - 180,\n            south: Math.atan(Math.sinh(Math.PI * (1 - 2 * (y + 1) / scale))) * 180 / Math.PI\n        };\n    }\n    tileIntersectsAO(zoom, x, y, isPointInAO) {\n        const bounds = this.getTileBounds(zoom, x, y);\n        const checkPoints = [\n            [\n                bounds.west,\n                bounds.north\n            ],\n            [\n                bounds.east,\n                bounds.north\n            ],\n            [\n                bounds.west,\n                bounds.south\n            ],\n            [\n                bounds.east,\n                bounds.south\n            ],\n            [\n                (bounds.west + bounds.east) / 2,\n                (bounds.north + bounds.south) / 2\n            ]\n        ];\n        return checkPoints.some(([lng, lat])=>isPointInAO(lng, lat));\n    }\n    getVisibleTiles(zoom) {\n        if (!this.map) return [];\n        const bounds = this.map.getBounds();\n        const scale = Math.pow(2, zoom);\n        const minTileX = Math.floor((bounds.getWest() + 180) / 360 * scale);\n        const maxTileX = Math.floor((bounds.getEast() + 180) / 360 * scale);\n        const minTileY = Math.floor((1 - Math.log(Math.tan(bounds.getNorth() * Math.PI / 180) + 1 / Math.cos(bounds.getNorth() * Math.PI / 180)) / Math.PI) / 2 * scale);\n        const maxTileY = Math.floor((1 - Math.log(Math.tan(bounds.getSouth() * Math.PI / 180) + 1 / Math.cos(bounds.getSouth() * Math.PI / 180)) / Math.PI) / 2 * scale);\n        const tiles = [];\n        for(let x = minTileX; x <= maxTileX; x++){\n            for(let y = minTileY; y <= maxTileY; y++){\n                tiles.push({\n                    x,\n                    y\n                });\n            }\n        }\n        return tiles;\n    }\n    async renderTreeHeights(options) {\n        if (!this.isInitialized || !this.map) {\n            throw new Error(\"TreeHeightSystem not initialized\");\n        }\n        const { isPointInAO, onProgress } = options;\n        console.log(\" Starting tree height rendering with rasterarray data\");\n        const currentZoom = Math.floor(this.map.getZoom());\n        const clampedZoom = Math.min(TREE_HEIGHT_CONFIG.MAX_ZOOM, Math.max(TREE_HEIGHT_CONFIG.MIN_ZOOM, currentZoom));\n        console.log(` Rendering at zoom ${clampedZoom} (actual: ${currentZoom})`);\n        const visibleTiles = this.getVisibleTiles(clampedZoom);\n        const totalTiles = visibleTiles.length;\n        console.log(` Processing ${totalTiles} tiles`);\n        let processedTiles = 0;\n        let successfulTiles = 0;\n        let skippedTiles = 0;\n        for (const tile of visibleTiles){\n            const { x, y } = tile;\n            if (!this.tileIntersectsAO(clampedZoom, x, y, isPointInAO)) {\n                skippedTiles++;\n                continue;\n            }\n            try {\n                const tileData = await this.fetchTreeHeightTile(clampedZoom, x, y);\n                processedTiles++;\n                if (onProgress) {\n                    onProgress(processedTiles / totalTiles);\n                }\n                if (!tileData) continue;\n                successfulTiles++;\n                await this.renderTile(clampedZoom, x, y, tileData, isPointInAO);\n            } catch (error) {\n                console.warn(` Error processing tile ${clampedZoom}/${x}/${y}:`, error);\n            }\n        }\n        console.log(` Rendering complete: ${successfulTiles}/${processedTiles} tiles successful, ${skippedTiles} skipped (outside AO)`);\n    }\n    async renderTile(zoom, x, y, tileData, isPointInAO) {\n        if (!this.map) return;\n        const canvas = document.querySelector('canvas[data-tree-height-canvas]');\n        if (!canvas) {\n            console.warn(\" No canvas found with data-tree-height-canvas attribute\");\n            return;\n        }\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return;\n        const tileBounds = this.getTileBounds(zoom, x, y);\n        const topLeft = this.map.project([\n            tileBounds.west,\n            tileBounds.north\n        ]);\n        const bottomRight = this.map.project([\n            tileBounds.east,\n            tileBounds.south\n        ]);\n        const tileWidth = bottomRight.x - topLeft.x;\n        const tileHeight = bottomRight.y - topLeft.y;\n        const coloredCanvas = document.createElement('canvas');\n        coloredCanvas.width = TREE_HEIGHT_CONFIG.TILE_SIZE;\n        coloredCanvas.height = TREE_HEIGHT_CONFIG.TILE_SIZE;\n        const colorCtx = coloredCanvas.getContext('2d');\n        if (!colorCtx) return;\n        const coloredImageData = colorCtx.createImageData(TREE_HEIGHT_CONFIG.TILE_SIZE, TREE_HEIGHT_CONFIG.TILE_SIZE);\n        let pixelsWithData = 0;\n        for(let i = 0; i < tileData.data.length; i += 4){\n            const pixelX = i / 4 % TREE_HEIGHT_CONFIG.TILE_SIZE;\n            const pixelY = Math.floor(i / 4 / TREE_HEIGHT_CONFIG.TILE_SIZE);\n            const pixelLng = tileBounds.west + pixelX / TREE_HEIGHT_CONFIG.TILE_SIZE * (tileBounds.east - tileBounds.west);\n            const pixelLat = tileBounds.north + pixelY / TREE_HEIGHT_CONFIG.TILE_SIZE * (tileBounds.south - tileBounds.north);\n            if (!isPointInAO(pixelLng, pixelLat)) {\n                coloredImageData.data[i] = 0;\n                coloredImageData.data[i + 1] = 0;\n                coloredImageData.data[i + 2] = 0;\n                coloredImageData.data[i + 3] = 0;\n                continue;\n            }\n            // For rasterarray, height should be in red channel\n            const heightValue = tileData.data[i];\n            if (heightValue > 0) {\n                pixelsWithData++;\n                const color = this.getTreeHeightColor(heightValue);\n                const rgba = this.parseColor(color);\n                coloredImageData.data[i] = rgba.r;\n                coloredImageData.data[i + 1] = rgba.g;\n                coloredImageData.data[i + 2] = rgba.b;\n                coloredImageData.data[i + 3] = rgba.a;\n            } else {\n                coloredImageData.data[i] = 0;\n                coloredImageData.data[i + 1] = 0;\n                coloredImageData.data[i + 2] = 0;\n                coloredImageData.data[i + 3] = 0;\n            }\n        }\n        if (pixelsWithData > 0) {\n            colorCtx.putImageData(coloredImageData, 0, 0);\n            ctx.drawImage(coloredCanvas, topLeft.x, topLeft.y, tileWidth, tileHeight);\n            console.log(` Rendered tile ${zoom}/${x}/${y} with ${pixelsWithData} pixels containing height data`);\n        } else {\n            console.log(` Tile ${zoom}/${x}/${y} had no pixels with height data > 0`);\n        }\n    }\n    clearCache() {\n        this.tileCache.clear();\n        console.log(\" Tree height tile cache cleared\");\n    }\n    getCacheStats() {\n        return {\n            size: this.tileCache.size,\n            maxSize: TREE_HEIGHT_CONFIG.MAX_CACHED_TILES\n        };\n    }\n    cleanup() {\n        this.clearCache();\n        this.map = null;\n        this.isInitialized = false;\n        console.log(\" TreeHeightSystem cleanup complete\");\n    }\n    constructor(){\n        this.map = null;\n        this.tileCache = new Map();\n        this.isInitialized = false;\n    }\n}\nconst treeHeightSystem = new TreeHeightSystem();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL3NlcnZpY2VzL1RyZWVIZWlnaHRTeXN0ZW0udHN4IiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Ozs7OztDQU9DLEdBSUQsZ0VBQWdFO0FBQ2hFLE1BQU1BLHFCQUFxQjtJQUN6QkMsVUFBVTtJQUNWQyxVQUFVO0lBQ1ZDLFdBQVc7SUFDWEMsa0JBQWtCO0lBQ2xCLDZCQUE2QjtJQUM3QkMsVUFBVTtJQUNWQyxjQUFjO0FBQ2hCO0FBRUEsaUNBQWlDO0FBQ2pDLE1BQU1DLHFCQUFxQjtJQUN6QixHQUFHO0lBQ0gsR0FBRztJQUNILEdBQUc7SUFDSCxJQUFJO0lBQ0osSUFBSTtJQUNKLElBQUk7SUFDSixJQUFJLHNCQUEwQiw2QkFBNkI7QUFDN0Q7QUFxQkEsTUFBTUM7SUFLSkMsV0FBV0MsR0FBaUIsRUFBUTtRQUNsQyxJQUFJLENBQUNBLEdBQUcsR0FBR0E7UUFDWCxJQUFJLENBQUNDLGFBQWEsR0FBRztRQUNyQkMsUUFBUUMsR0FBRyxDQUFDO0lBQ2Q7SUFFUUMsbUJBQW1CQyxXQUFtQixFQUFVO1FBQ3RELE1BQU1DLFVBQVVDLE9BQU9DLElBQUksQ0FBQ1gsb0JBQW9CRyxHQUFHLENBQUNTLFFBQVFDLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNRCxJQUFJQztRQUUvRSxJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSVAsUUFBUVEsTUFBTSxFQUFFRCxJQUFLO1lBQ3ZDLElBQUlSLGVBQWVDLE9BQU8sQ0FBQ08sRUFBRSxFQUFFO2dCQUM3QixPQUFPaEIsa0JBQWtCLENBQUNTLE9BQU8sQ0FBQ08sRUFBRSxDQUFvQztZQUMxRTtRQUNGO1FBRUEsT0FBT2hCLGtCQUFrQixDQUFDLEdBQUc7SUFDL0I7SUFFUWtCLFdBQVdDLEtBQWEsRUFBYTtRQUMzQyxNQUFNQyxRQUFRRCxNQUFNQyxLQUFLLENBQUM7UUFDMUIsSUFBSSxDQUFDQSxPQUFPLE9BQU87WUFBRUMsR0FBRztZQUFHQyxHQUFHO1lBQUdQLEdBQUc7WUFBR0QsR0FBRztRQUFF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RztnQkFDL0I4SCxpQkFBaUJuRixJQUFJLENBQUMzQyxJQUFJLEVBQUUsR0FBRztZQUNqQztRQUNGO1FBRUEsSUFBSWdJLGlCQUFpQixHQUFHO1lBQ3RCSCxTQUFTUyxZQUFZLENBQUNSLGtCQUFrQixHQUFHO1lBQzNDakUsSUFBSUUsU0FBUyxDQUFDNkQsZUFBZUwsUUFBUXZHLENBQUMsRUFBRXVHLFFBQVF0RyxDQUFDLEVBQUV5RyxXQUFXQztZQUM5RHRJLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFeUIsS0FBSyxDQUFDLEVBQUVDLEVBQUUsQ0FBQyxFQUFFQyxFQUFFLE1BQU0sRUFBRStHLGVBQWUsOEJBQThCLENBQUM7UUFDdkcsT0FBTztZQUNMM0ksUUFBUUMsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFeUIsS0FBSyxDQUFDLEVBQUVDLEVBQUUsQ0FBQyxFQUFFQyxFQUFFLG1DQUFtQyxDQUFDO1FBQzVFO0lBQ0Y7SUFFQXNILGFBQW1CO1FBQ2pCLElBQUksQ0FBQ3BILFNBQVMsQ0FBQ3FILEtBQUs7UUFDcEJuSixRQUFRQyxHQUFHLENBQUM7SUFDZDtJQUVBbUosZ0JBQW1EO1FBQ2pELE9BQU87WUFDTHRHLE1BQU0sSUFBSSxDQUFDaEIsU0FBUyxDQUFDZ0IsSUFBSTtZQUN6QnVHLFNBQVNqSyxtQkFBbUJJLGdCQUFnQjtRQUM5QztJQUNGO0lBRUE4SixVQUFnQjtRQUNkLElBQUksQ0FBQ0osVUFBVTtRQUNmLElBQUksQ0FBQ3BKLEdBQUcsR0FBRztRQUNYLElBQUksQ0FBQ0MsYUFBYSxHQUFHO1FBQ3JCQyxRQUFRQyxHQUFHLENBQUM7SUFDZDs7YUFwVVFILE1BQTJCO2FBQzNCZ0MsWUFBWSxJQUFJeUg7YUFDaEJ4SixnQkFBZ0I7O0FBbVUxQjtBQUVPLE1BQU15SixtQkFBbUIsSUFBSTVKLG1CQUFtQiIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvc2VydmljZXMvVHJlZUhlaWdodFN5c3RlbS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUcmVlSGVpZ2h0U3lzdGVtLnRzXG4gKiBcbiAqIFB1cnBvc2U6XG4gKiBDb3JlIHNlcnZpY2UgZm9yIHRyZWUgaGVpZ2h0IHZpc3VhbGl6YXRpb24uIEhhbmRsZXMgdGlsZSBmZXRjaGluZywgY2FjaGluZyxcbiAqIGltYWdlIHByb2Nlc3NpbmcsIGNvbG9yIG1hcHBpbmcsIGFuZCByZW5kZXJpbmcgY29vcmRpbmF0aW9uLlxuICogVXBkYXRlZCBmb3IgcmFzdGVyYXJyYXkgdGlsZXNldCB3aXRoIGFjdHVhbCBoZWlnaHQgZGF0YS5cbiAqL1xuXG5pbXBvcnQgdHlwZSBtYXBib3hnbCBmcm9tICdtYXBib3gtZ2wnO1xuXG4vLyBDb25maWd1cmF0aW9uIGNvbnN0YW50cyAtIFVQREFURUQgZm9yIG5ldyByYXN0ZXJhcnJheSB0aWxlc2V0XG5jb25zdCBUUkVFX0hFSUdIVF9DT05GSUcgPSB7XG4gIE1JTl9aT09NOiAxMCwgLy8gVXBkYXRlZCB0byBtYXRjaCBuZXcgdGlsZXNldFxuICBNQVhfWk9PTTogMTMsIC8vIFVwZGF0ZWQgdG8gbWF0Y2ggbmV3IHRpbGVzZXRcbiAgVElMRV9TSVpFOiAyNTYsXG4gIE1BWF9DQUNIRURfVElMRVM6IDEwMCxcbiAgLy8gTkVXIFJBU1RFUkFSUkFZIFRJTEVTRVQgSURcbiAgVElMRV9VUkw6ICdodHRwczovL2FwaS5tYXBib3guY29tL3Y0L2ludGVsYWVyby5mb3Jlc3QtaGVpZ2h0LWF1cy1kYXRhL3t6fS97eH0ve3l9LnBuZycsXG4gIEFDQ0VTU19UT0tFTjogJ3NrLmV5SjFJam9pYVc1MFpXeGhaWEp2SWl3aVlTSTZJbU50WWpkcGNHNTFZVEJoWW13eWFtNHdkMjA0WlhsbWNIVWlmUS5oaFIyTWhncW9wTEV0TlNnMDV6aWdnJ1xufSBhcyBjb25zdDtcblxuLy8gQ29sb3IgbWFwcGluZyBmb3IgdHJlZSBoZWlnaHRzXG5jb25zdCBUUkVFX0hFSUdIVF9DT0xPUlMgPSB7XG4gIDA6ICdyZ2JhKDAsMCwwLDApJywgICAgICAgICAgIC8vIFRyYW5zcGFyZW50IGZvciBubyB0cmVlc1xuICAyOiAncmdiYSg1MCwyMDAsNTAsMC44KScsICAgICAvLyBMaWdodCBncmVlblxuICA1OiAncmdiYSgwLDI1NSwwLDAuOCknLCAgICAgICAvLyBCcmlnaHQgZ3JlZW4gIFxuICAxMDogJ3JnYmEoMjU1LDI1NSwwLDAuOCknLCAgICAvLyBZZWxsb3dcbiAgMjA6ICdyZ2JhKDI1NSwxNjUsMCwwLjkpJywgICAgLy8gT3JhbmdlXG4gIDMwOiAncmdiYSgyNTUsNTAsNTAsMC45KScsICAgIC8vIFJlZFxuICA0MDogJ3JnYmEoMjAwLDAsMjAwLDEuMCknICAgICAvLyBQdXJwbGUgZm9yIHZlcnkgdGFsbCB0cmVlc1xufSBhcyBjb25zdDtcblxuaW50ZXJmYWNlIFJlbmRlck9wdGlvbnMge1xuICBpc1BvaW50SW5BTzogKGxuZzogbnVtYmVyLCBsYXQ6IG51bWJlcikgPT4gYm9vbGVhbjtcbiAgb25Qcm9ncmVzcz86IChwcm9ncmVzczogbnVtYmVyKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgVGlsZUJvdW5kcyB7XG4gIHdlc3Q6IG51bWJlcjtcbiAgbm9ydGg6IG51bWJlcjtcbiAgZWFzdDogbnVtYmVyO1xuICBzb3V0aDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgQ29sb3JSR0JBIHtcbiAgcjogbnVtYmVyO1xuICBnOiBudW1iZXI7XG4gIGI6IG51bWJlcjtcbiAgYTogbnVtYmVyO1xufVxuXG5jbGFzcyBUcmVlSGVpZ2h0U3lzdGVtIHtcbiAgcHJpdmF0ZSBtYXA6IG1hcGJveGdsLk1hcCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHRpbGVDYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBJbWFnZURhdGE+KCk7XG4gIHByaXZhdGUgaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gIGluaXRpYWxpemUobWFwOiBtYXBib3hnbC5NYXApOiB2b2lkIHtcbiAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIGNvbnNvbGUubG9nKFwi8J+MsiBUcmVlSGVpZ2h0U3lzdGVtIGluaXRpYWxpemVkIGZvciByYXN0ZXJhcnJheSB0aWxlc2V0XCIpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRUcmVlSGVpZ2h0Q29sb3IoaGVpZ2h0VmFsdWU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgaGVpZ2h0cyA9IE9iamVjdC5rZXlzKFRSRUVfSEVJR0hUX0NPTE9SUykubWFwKE51bWJlcikuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGhlaWdodFZhbHVlIDw9IGhlaWdodHNbaV0pIHtcbiAgICAgICAgcmV0dXJuIFRSRUVfSEVJR0hUX0NPTE9SU1toZWlnaHRzW2ldIGFzIGtleW9mIHR5cGVvZiBUUkVFX0hFSUdIVF9DT0xPUlNdO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gVFJFRV9IRUlHSFRfQ09MT1JTWzQwXTtcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VDb2xvcihjb2xvcjogc3RyaW5nKTogQ29sb3JSR0JBIHtcbiAgICBjb25zdCBtYXRjaCA9IGNvbG9yLm1hdGNoKC9yZ2JhP1xcKChbXildKylcXCkvKTtcbiAgICBpZiAoIW1hdGNoKSByZXR1cm4geyByOiAwLCBnOiAwLCBiOiAwLCBhOiAwIH07XG4gICAgXG4gICAgY29uc3QgdmFsdWVzID0gbWF0Y2hbMV0uc3BsaXQoJywnKS5tYXAodiA9PiBwYXJzZUZsb2F0KHYudHJpbSgpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHI6IHZhbHVlc1swXSB8fCAwLFxuICAgICAgZzogdmFsdWVzWzFdIHx8IDAsXG4gICAgICBiOiB2YWx1ZXNbMl0gfHwgMCxcbiAgICAgIGE6IE1hdGguZmxvb3IoKHZhbHVlc1szXSB8fCAxKSAqIDI1NSlcbiAgICB9O1xuICB9XG5cbiAgLy8gRklYRUQ6IEFkZGVkIG1pc3NpbmcgcmV0dXJuIHN0YXRlbWVudFxuICBwcml2YXRlIGFzeW5jIGZldGNoVHJlZUhlaWdodFRpbGUoem9vbTogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlcik6IFByb21pc2U8SW1hZ2VEYXRhIHwgbnVsbD4ge1xuICAgIGNvbnN0IHRpbGVLZXkgPSBgJHt6b29tfS8ke3h9LyR7eX1gO1xuICAgIFxuICAgIGlmICh0aGlzLnRpbGVDYWNoZS5oYXModGlsZUtleSkpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OLIFVzaW5nIGNhY2hlZCB0aWxlOiAke3RpbGVLZXl9YCk7XG4gICAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGUuZ2V0KHRpbGVLZXkpITtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gVFJFRV9IRUlHSFRfQ09ORklHLlRJTEVfVVJMXG4gICAgICAgIC5yZXBsYWNlKCd7en0nLCB6b29tLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKCd7eH0nLCB4LnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKCd7eX0nLCB5LnRvU3RyaW5nKCkpICsgYD9hY2Nlc3NfdG9rZW49JHtUUkVFX0hFSUdIVF9DT05GSUcuQUNDRVNTX1RPS0VOfWA7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIEZldGNoaW5nIHRpbGUgJHt0aWxlS2V5fSBmcm9tOiAke3VybH1gKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHsgY2FjaGU6ICdmb3JjZS1jYWNoZScgfSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OhIFRpbGUgJHt0aWxlS2V5fSByZXNwb25zZTogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDinYwgVGlsZSAke3RpbGVLZXl9IGVycm9yOiAke2Vycm9yVGV4dH1gKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgY29uc29sZS5sb2coYPCfk6YgVGlsZSAke3RpbGVLZXl9IGJsb2Igc2l6ZTogJHtibG9iLnNpemV9IGJ5dGVzYCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGF3YWl0IHRoaXMucHJvY2Vzc0ltYWdlQmxvYihibG9iKTtcbiAgICAgIFxuICAgICAgaWYgKGltYWdlRGF0YSkge1xuICAgICAgICBpZiAodGhpcy50aWxlQ2FjaGUuc2l6ZSA+PSBUUkVFX0hFSUdIVF9DT05GSUcuTUFYX0NBQ0hFRF9USUxFUykge1xuICAgICAgICAgIGNvbnN0IGZpcnN0S2V5ID0gdGhpcy50aWxlQ2FjaGUua2V5cygpLm5leHQoKS52YWx1ZTtcbiAgICAgICAgICB0aGlzLnRpbGVDYWNoZS5kZWxldGUoZmlyc3RLZXkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnRpbGVDYWNoZS5zZXQodGlsZUtleSwgaW1hZ2VEYXRhKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEVuaGFuY2VkIGxvZ2dpbmcgZm9yIHJhc3RlcmFycmF5IGRhdGFcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBUaWxlICR7dGlsZUtleX0gbG9hZGVkIHN1Y2Nlc3NmdWxseWApO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBGaXJzdCA4IHBpeGVscyAoUkdCQSk6YCwgaW1hZ2VEYXRhLmRhdGEuc2xpY2UoMCwgMzIpKTtcbiAgICAgICAgY29uc29sZS5sb2coYPCfjq8gUmVkIGNoYW5uZWwgdmFsdWVzOmAsIFtcbiAgICAgICAgICBpbWFnZURhdGEuZGF0YVswXSwgaW1hZ2VEYXRhLmRhdGFbNF0sIGltYWdlRGF0YS5kYXRhWzhdLCBpbWFnZURhdGEuZGF0YVsxMl0sXG4gICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbMTZdLCBpbWFnZURhdGEuZGF0YVsyMF0sIGltYWdlRGF0YS5kYXRhWzI0XSwgaW1hZ2VEYXRhLmRhdGFbMjhdXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+OryBOb24temVybyByZWQgdmFsdWVzIGNvdW50OmAsIFxuICAgICAgICAgIEFycmF5LmZyb20oaW1hZ2VEYXRhLmRhdGEpLmZpbHRlcigodmFsLCBpKSA9PiBpICUgNCA9PT0gMCAmJiB2YWwgPiAwKS5sZW5ndGgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQURERUQ6IFJldHVybiB0aGUgaW1hZ2VEYXRhXG4gICAgICAgIHJldHVybiBpbWFnZURhdGE7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBGYWlsZWQgdG8gZmV0Y2ggdGlsZSAke3RpbGVLZXl9OmAsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc0ltYWdlQmxvYihibG9iOiBCbG9iKTogUHJvbWlzZTxJbWFnZURhdGEgfCBudWxsPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGltZy5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnO1xuICAgICAgXG4gICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgIGNhbnZhcy53aWR0aCA9IFRSRUVfSEVJR0hUX0NPTkZJRy5USUxFX1NJWkU7XG4gICAgICAgICAgY2FudmFzLmhlaWdodCA9IFRSRUVfSEVJR0hUX0NPTkZJRy5USUxFX1NJWkU7XG4gICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBUUkVFX0hFSUdIVF9DT05GSUcuVElMRV9TSVpFLCBUUkVFX0hFSUdIVF9DT05GSUcuVElMRV9TSVpFKTtcbiAgICAgICAgICBjb25zdCBpbWFnZURhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIFRSRUVfSEVJR0hUX0NPTkZJRy5USUxFX1NJWkUsIFRSRUVfSEVJR0hUX0NPTkZJRy5USUxFX1NJWkUpO1xuICAgICAgICAgIHJlc29sdmUoaW1hZ2VEYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgcHJvY2Vzc2luZyBpbWFnZSBibG9iOicsIGVycm9yKTtcbiAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICBpbWcub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBsb2FkIGltYWdlIGJsb2InKTtcbiAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgIH07XG4gICAgICBpbWcuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VGlsZUJvdW5kcyh6b29tOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKTogVGlsZUJvdW5kcyB7XG4gICAgY29uc3Qgc2NhbGUgPSBNYXRoLnBvdygyLCB6b29tKTtcbiAgICByZXR1cm4ge1xuICAgICAgd2VzdDogKHggLyBzY2FsZSkgKiAzNjAgLSAxODAsXG4gICAgICBub3J0aDogKE1hdGguYXRhbihNYXRoLnNpbmgoTWF0aC5QSSAqICgxIC0gMiAqIHkgLyBzY2FsZSkpKSAqIDE4MCkgLyBNYXRoLlBJLFxuICAgICAgZWFzdDogKCh4ICsgMSkgLyBzY2FsZSkgKiAzNjAgLSAxODAsXG4gICAgICBzb3V0aDogKE1hdGguYXRhbihNYXRoLnNpbmgoTWF0aC5QSSAqICgxIC0gMiAqICh5ICsgMSkgLyBzY2FsZSkpKSAqIDE4MCkgLyBNYXRoLlBJXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgdGlsZUludGVyc2VjdHNBTyh6b29tOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCBpc1BvaW50SW5BTzogKGxuZzogbnVtYmVyLCBsYXQ6IG51bWJlcikgPT4gYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZ2V0VGlsZUJvdW5kcyh6b29tLCB4LCB5KTtcbiAgICBcbiAgICBjb25zdCBjaGVja1BvaW50cyA9IFtcbiAgICAgIFtib3VuZHMud2VzdCwgYm91bmRzLm5vcnRoXSxcbiAgICAgIFtib3VuZHMuZWFzdCwgYm91bmRzLm5vcnRoXSxcbiAgICAgIFtib3VuZHMud2VzdCwgYm91bmRzLnNvdXRoXSxcbiAgICAgIFtib3VuZHMuZWFzdCwgYm91bmRzLnNvdXRoXSxcbiAgICAgIFsoYm91bmRzLndlc3QgKyBib3VuZHMuZWFzdCkgLyAyLCAoYm91bmRzLm5vcnRoICsgYm91bmRzLnNvdXRoKSAvIDJdXG4gICAgXTtcbiAgICBcbiAgICByZXR1cm4gY2hlY2tQb2ludHMuc29tZSgoW2xuZywgbGF0XSkgPT4gaXNQb2ludEluQU8obG5nLCBsYXQpKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VmlzaWJsZVRpbGVzKHpvb206IG51bWJlcik6IEFycmF5PHt4OiBudW1iZXIsIHk6IG51bWJlcn0+IHtcbiAgICBpZiAoIXRoaXMubWFwKSByZXR1cm4gW107XG4gICAgXG4gICAgY29uc3QgYm91bmRzID0gdGhpcy5tYXAuZ2V0Qm91bmRzKCk7XG4gICAgY29uc3Qgc2NhbGUgPSBNYXRoLnBvdygyLCB6b29tKTtcbiAgICBcbiAgICBjb25zdCBtaW5UaWxlWCA9IE1hdGguZmxvb3IoKChib3VuZHMuZ2V0V2VzdCgpICsgMTgwKSAvIDM2MCkgKiBzY2FsZSk7XG4gICAgY29uc3QgbWF4VGlsZVggPSBNYXRoLmZsb29yKCgoYm91bmRzLmdldEVhc3QoKSArIDE4MCkgLyAzNjApICogc2NhbGUpO1xuICAgIGNvbnN0IG1pblRpbGVZID0gTWF0aC5mbG9vcigoKDEgLSBNYXRoLmxvZyhNYXRoLnRhbigoYm91bmRzLmdldE5vcnRoKCkgKiBNYXRoLlBJKSAvIDE4MCkgKyAxIC8gTWF0aC5jb3MoKGJvdW5kcy5nZXROb3J0aCgpICogTWF0aC5QSSkgLyAxODApKSAvIE1hdGguUEkpIC8gMikgKiBzY2FsZSk7XG4gICAgY29uc3QgbWF4VGlsZVkgPSBNYXRoLmZsb29yKCgoMSAtIE1hdGgubG9nKE1hdGgudGFuKChib3VuZHMuZ2V0U291dGgoKSAqIE1hdGguUEkpIC8gMTgwKSArIDEgLyBNYXRoLmNvcygoYm91bmRzLmdldFNvdXRoKCkgKiBNYXRoLlBJKSAvIDE4MCkpIC8gTWF0aC5QSSkgLyAyKSAqIHNjYWxlKTtcbiAgICBcbiAgICBjb25zdCB0aWxlczogQXJyYXk8e3g6IG51bWJlciwgeTogbnVtYmVyfT4gPSBbXTtcbiAgICBcbiAgICBmb3IgKGxldCB4ID0gbWluVGlsZVg7IHggPD0gbWF4VGlsZVg7IHgrKykge1xuICAgICAgZm9yIChsZXQgeSA9IG1pblRpbGVZOyB5IDw9IG1heFRpbGVZOyB5KyspIHtcbiAgICAgICAgdGlsZXMucHVzaCh7IHgsIHkgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0aWxlcztcbiAgfVxuXG4gIGFzeW5jIHJlbmRlclRyZWVIZWlnaHRzKG9wdGlvbnM6IFJlbmRlck9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCB8fCAhdGhpcy5tYXApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyZWVIZWlnaHRTeXN0ZW0gbm90IGluaXRpYWxpemVkXCIpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB7IGlzUG9pbnRJbkFPLCBvblByb2dyZXNzIH0gPSBvcHRpb25zO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKFwi8J+OqCBTdGFydGluZyB0cmVlIGhlaWdodCByZW5kZXJpbmcgd2l0aCByYXN0ZXJhcnJheSBkYXRhXCIpO1xuICAgIFxuICAgIGNvbnN0IGN1cnJlbnRab29tID0gTWF0aC5mbG9vcih0aGlzLm1hcC5nZXRab29tKCkpO1xuICAgIGNvbnN0IGNsYW1wZWRab29tID0gTWF0aC5taW4oVFJFRV9IRUlHSFRfQ09ORklHLk1BWF9aT09NLCBNYXRoLm1heChUUkVFX0hFSUdIVF9DT05GSUcuTUlOX1pPT00sIGN1cnJlbnRab29tKSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYPCfjq8gUmVuZGVyaW5nIGF0IHpvb20gJHtjbGFtcGVkWm9vbX0gKGFjdHVhbDogJHtjdXJyZW50Wm9vbX0pYCk7XG4gICAgXG4gICAgY29uc3QgdmlzaWJsZVRpbGVzID0gdGhpcy5nZXRWaXNpYmxlVGlsZXMoY2xhbXBlZFpvb20pO1xuICAgIGNvbnN0IHRvdGFsVGlsZXMgPSB2aXNpYmxlVGlsZXMubGVuZ3RoO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGDwn5OKIFByb2Nlc3NpbmcgJHt0b3RhbFRpbGVzfSB0aWxlc2ApO1xuICAgIFxuICAgIGxldCBwcm9jZXNzZWRUaWxlcyA9IDA7XG4gICAgbGV0IHN1Y2Nlc3NmdWxUaWxlcyA9IDA7XG4gICAgbGV0IHNraXBwZWRUaWxlcyA9IDA7XG4gICAgXG4gICAgZm9yIChjb25zdCB0aWxlIG9mIHZpc2libGVUaWxlcykge1xuICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aWxlO1xuICAgICAgXG4gICAgICBpZiAoIXRoaXMudGlsZUludGVyc2VjdHNBTyhjbGFtcGVkWm9vbSwgeCwgeSwgaXNQb2ludEluQU8pKSB7XG4gICAgICAgIHNraXBwZWRUaWxlcysrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdGlsZURhdGEgPSBhd2FpdCB0aGlzLmZldGNoVHJlZUhlaWdodFRpbGUoY2xhbXBlZFpvb20sIHgsIHkpO1xuICAgICAgICBwcm9jZXNzZWRUaWxlcysrO1xuICAgICAgICBcbiAgICAgICAgaWYgKG9uUHJvZ3Jlc3MpIHtcbiAgICAgICAgICBvblByb2dyZXNzKHByb2Nlc3NlZFRpbGVzIC8gdG90YWxUaWxlcyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghdGlsZURhdGEpIGNvbnRpbnVlO1xuICAgICAgICBcbiAgICAgICAgc3VjY2Vzc2Z1bFRpbGVzKys7XG4gICAgICAgIFxuICAgICAgICBhd2FpdCB0aGlzLnJlbmRlclRpbGUoY2xhbXBlZFpvb20sIHgsIHksIHRpbGVEYXRhLCBpc1BvaW50SW5BTyk7XG4gICAgICAgIFxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGDinYwgRXJyb3IgcHJvY2Vzc2luZyB0aWxlICR7Y2xhbXBlZFpvb219LyR7eH0vJHt5fTpgLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGDinIUgUmVuZGVyaW5nIGNvbXBsZXRlOiAke3N1Y2Nlc3NmdWxUaWxlc30vJHtwcm9jZXNzZWRUaWxlc30gdGlsZXMgc3VjY2Vzc2Z1bCwgJHtza2lwcGVkVGlsZXN9IHNraXBwZWQgKG91dHNpZGUgQU8pYCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlbmRlclRpbGUoXG4gICAgem9vbTogbnVtYmVyLCBcbiAgICB4OiBudW1iZXIsIFxuICAgIHk6IG51bWJlciwgXG4gICAgdGlsZURhdGE6IEltYWdlRGF0YSwgXG4gICAgaXNQb2ludEluQU86IChsbmc6IG51bWJlciwgbGF0OiBudW1iZXIpID0+IGJvb2xlYW5cbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLm1hcCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhc1tkYXRhLXRyZWUtaGVpZ2h0LWNhbnZhc10nKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBpZiAoIWNhbnZhcykge1xuICAgICAgY29uc29sZS53YXJuKFwi8J+OqCBObyBjYW52YXMgZm91bmQgd2l0aCBkYXRhLXRyZWUtaGVpZ2h0LWNhbnZhcyBhdHRyaWJ1dGVcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGlmICghY3R4KSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgdGlsZUJvdW5kcyA9IHRoaXMuZ2V0VGlsZUJvdW5kcyh6b29tLCB4LCB5KTtcbiAgICBjb25zdCB0b3BMZWZ0ID0gdGhpcy5tYXAucHJvamVjdChbdGlsZUJvdW5kcy53ZXN0LCB0aWxlQm91bmRzLm5vcnRoXSk7XG4gICAgY29uc3QgYm90dG9tUmlnaHQgPSB0aGlzLm1hcC5wcm9qZWN0KFt0aWxlQm91bmRzLmVhc3QsIHRpbGVCb3VuZHMuc291dGhdKTtcbiAgICBcbiAgICBjb25zdCB0aWxlV2lkdGggPSBib3R0b21SaWdodC54IC0gdG9wTGVmdC54O1xuICAgIGNvbnN0IHRpbGVIZWlnaHQgPSBib3R0b21SaWdodC55IC0gdG9wTGVmdC55O1xuICAgIFxuICAgIGNvbnN0IGNvbG9yZWRDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjb2xvcmVkQ2FudmFzLndpZHRoID0gVFJFRV9IRUlHSFRfQ09ORklHLlRJTEVfU0laRTtcbiAgICBjb2xvcmVkQ2FudmFzLmhlaWdodCA9IFRSRUVfSEVJR0hUX0NPTkZJRy5USUxFX1NJWkU7XG4gICAgY29uc3QgY29sb3JDdHggPSBjb2xvcmVkQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgaWYgKCFjb2xvckN0eCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGNvbG9yZWRJbWFnZURhdGEgPSBjb2xvckN0eC5jcmVhdGVJbWFnZURhdGEoVFJFRV9IRUlHSFRfQ09ORklHLlRJTEVfU0laRSwgVFJFRV9IRUlHSFRfQ09ORklHLlRJTEVfU0laRSk7XG4gICAgXG4gICAgbGV0IHBpeGVsc1dpdGhEYXRhID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpbGVEYXRhLmRhdGEubGVuZ3RoOyBpICs9IDQpIHtcbiAgICAgIGNvbnN0IHBpeGVsWCA9IChpIC8gNCkgJSBUUkVFX0hFSUdIVF9DT05GSUcuVElMRV9TSVpFO1xuICAgICAgY29uc3QgcGl4ZWxZID0gTWF0aC5mbG9vcigoaSAvIDQpIC8gVFJFRV9IRUlHSFRfQ09ORklHLlRJTEVfU0laRSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHBpeGVsTG5nID0gdGlsZUJvdW5kcy53ZXN0ICsgKHBpeGVsWCAvIFRSRUVfSEVJR0hUX0NPTkZJRy5USUxFX1NJWkUpICogKHRpbGVCb3VuZHMuZWFzdCAtIHRpbGVCb3VuZHMud2VzdCk7XG4gICAgICBjb25zdCBwaXhlbExhdCA9IHRpbGVCb3VuZHMubm9ydGggKyAocGl4ZWxZIC8gVFJFRV9IRUlHSFRfQ09ORklHLlRJTEVfU0laRSkgKiAodGlsZUJvdW5kcy5zb3V0aCAtIHRpbGVCb3VuZHMubm9ydGgpO1xuICAgICAgXG4gICAgICBpZiAoIWlzUG9pbnRJbkFPKHBpeGVsTG5nLCBwaXhlbExhdCkpIHtcbiAgICAgICAgY29sb3JlZEltYWdlRGF0YS5kYXRhW2ldID0gMDtcbiAgICAgICAgY29sb3JlZEltYWdlRGF0YS5kYXRhW2kgKyAxXSA9IDA7XG4gICAgICAgIGNvbG9yZWRJbWFnZURhdGEuZGF0YVtpICsgMl0gPSAwO1xuICAgICAgICBjb2xvcmVkSW1hZ2VEYXRhLmRhdGFbaSArIDNdID0gMDtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEZvciByYXN0ZXJhcnJheSwgaGVpZ2h0IHNob3VsZCBiZSBpbiByZWQgY2hhbm5lbFxuICAgICAgY29uc3QgaGVpZ2h0VmFsdWUgPSB0aWxlRGF0YS5kYXRhW2ldO1xuICAgICAgXG4gICAgICBpZiAoaGVpZ2h0VmFsdWUgPiAwKSB7XG4gICAgICAgIHBpeGVsc1dpdGhEYXRhKys7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5nZXRUcmVlSGVpZ2h0Q29sb3IoaGVpZ2h0VmFsdWUpO1xuICAgICAgICBjb25zdCByZ2JhID0gdGhpcy5wYXJzZUNvbG9yKGNvbG9yKTtcbiAgICAgICAgXG4gICAgICAgIGNvbG9yZWRJbWFnZURhdGEuZGF0YVtpXSA9IHJnYmEucjtcbiAgICAgICAgY29sb3JlZEltYWdlRGF0YS5kYXRhW2kgKyAxXSA9IHJnYmEuZztcbiAgICAgICAgY29sb3JlZEltYWdlRGF0YS5kYXRhW2kgKyAyXSA9IHJnYmEuYjtcbiAgICAgICAgY29sb3JlZEltYWdlRGF0YS5kYXRhW2kgKyAzXSA9IHJnYmEuYTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbG9yZWRJbWFnZURhdGEuZGF0YVtpXSA9IDA7XG4gICAgICAgIGNvbG9yZWRJbWFnZURhdGEuZGF0YVtpICsgMV0gPSAwO1xuICAgICAgICBjb2xvcmVkSW1hZ2VEYXRhLmRhdGFbaSArIDJdID0gMDtcbiAgICAgICAgY29sb3JlZEltYWdlRGF0YS5kYXRhW2kgKyAzXSA9IDA7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChwaXhlbHNXaXRoRGF0YSA+IDApIHtcbiAgICAgIGNvbG9yQ3R4LnB1dEltYWdlRGF0YShjb2xvcmVkSW1hZ2VEYXRhLCAwLCAwKTtcbiAgICAgIGN0eC5kcmF3SW1hZ2UoY29sb3JlZENhbnZhcywgdG9wTGVmdC54LCB0b3BMZWZ0LnksIHRpbGVXaWR0aCwgdGlsZUhlaWdodCk7XG4gICAgICBjb25zb2xlLmxvZyhg8J+OqCBSZW5kZXJlZCB0aWxlICR7em9vbX0vJHt4fS8ke3l9IHdpdGggJHtwaXhlbHNXaXRoRGF0YX0gcGl4ZWxzIGNvbnRhaW5pbmcgaGVpZ2h0IGRhdGFgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBUaWxlICR7em9vbX0vJHt4fS8ke3l9IGhhZCBubyBwaXhlbHMgd2l0aCBoZWlnaHQgZGF0YSA+IDBgKTtcbiAgICB9XG4gIH1cblxuICBjbGVhckNhY2hlKCk6IHZvaWQge1xuICAgIHRoaXMudGlsZUNhY2hlLmNsZWFyKCk7XG4gICAgY29uc29sZS5sb2coXCLwn6e5IFRyZWUgaGVpZ2h0IHRpbGUgY2FjaGUgY2xlYXJlZFwiKTtcbiAgfVxuXG4gIGdldENhY2hlU3RhdHMoKTogeyBzaXplOiBudW1iZXI7IG1heFNpemU6IG51bWJlciB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgc2l6ZTogdGhpcy50aWxlQ2FjaGUuc2l6ZSxcbiAgICAgIG1heFNpemU6IFRSRUVfSEVJR0hUX0NPTkZJRy5NQVhfQ0FDSEVEX1RJTEVTXG4gICAgfTtcbiAgfVxuXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgdGhpcy5jbGVhckNhY2hlKCk7XG4gICAgdGhpcy5tYXAgPSBudWxsO1xuICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIGNvbnNvbGUubG9nKFwi8J+nuSBUcmVlSGVpZ2h0U3lzdGVtIGNsZWFudXAgY29tcGxldGVcIik7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHRyZWVIZWlnaHRTeXN0ZW0gPSBuZXcgVHJlZUhlaWdodFN5c3RlbSgpOyJdLCJuYW1lcyI6WyJUUkVFX0hFSUdIVF9DT05GSUciLCJNSU5fWk9PTSIsIk1BWF9aT09NIiwiVElMRV9TSVpFIiwiTUFYX0NBQ0hFRF9USUxFUyIsIlRJTEVfVVJMIiwiQUNDRVNTX1RPS0VOIiwiVFJFRV9IRUlHSFRfQ09MT1JTIiwiVHJlZUhlaWdodFN5c3RlbSIsImluaXRpYWxpemUiLCJtYXAiLCJpc0luaXRpYWxpemVkIiwiY29uc29sZSIsImxvZyIsImdldFRyZWVIZWlnaHRDb2xvciIsImhlaWdodFZhbHVlIiwiaGVpZ2h0cyIsIk9iamVjdCIsImtleXMiLCJOdW1iZXIiLCJzb3J0IiwiYSIsImIiLCJpIiwibGVuZ3RoIiwicGFyc2VDb2xvciIsImNvbG9yIiwibWF0Y2giLCJyIiwiZyIsInZhbHVlcyIsInNwbGl0IiwidiIsInBhcnNlRmxvYXQiLCJ0cmltIiwiTWF0aCIsImZsb29yIiwiZmV0Y2hUcmVlSGVpZ2h0VGlsZSIsInpvb20iLCJ4IiwieSIsInRpbGVLZXkiLCJ0aWxlQ2FjaGUiLCJoYXMiLCJnZXQiLCJ1cmwiLCJyZXBsYWNlIiwidG9TdHJpbmciLCJyZXNwb25zZSIsImZldGNoIiwiY2FjaGUiLCJzdGF0dXMiLCJzdGF0dXNUZXh0Iiwib2siLCJlcnJvclRleHQiLCJ0ZXh0IiwiRXJyb3IiLCJibG9iIiwic2l6ZSIsImltYWdlRGF0YSIsInByb2Nlc3NJbWFnZUJsb2IiLCJmaXJzdEtleSIsIm5leHQiLCJ2YWx1ZSIsImRlbGV0ZSIsInNldCIsImRhdGEiLCJzbGljZSIsIkFycmF5IiwiZnJvbSIsImZpbHRlciIsInZhbCIsImVycm9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJpbWciLCJJbWFnZSIsImNyb3NzT3JpZ2luIiwib25sb2FkIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJoZWlnaHQiLCJjdHgiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwiZ2V0SW1hZ2VEYXRhIiwib25lcnJvciIsInNyYyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImdldFRpbGVCb3VuZHMiLCJzY2FsZSIsInBvdyIsIndlc3QiLCJub3J0aCIsImF0YW4iLCJzaW5oIiwiUEkiLCJlYXN0Iiwic291dGgiLCJ0aWxlSW50ZXJzZWN0c0FPIiwiaXNQb2ludEluQU8iLCJib3VuZHMiLCJjaGVja1BvaW50cyIsInNvbWUiLCJsbmciLCJsYXQiLCJnZXRWaXNpYmxlVGlsZXMiLCJnZXRCb3VuZHMiLCJtaW5UaWxlWCIsImdldFdlc3QiLCJtYXhUaWxlWCIsImdldEVhc3QiLCJtaW5UaWxlWSIsInRhbiIsImdldE5vcnRoIiwiY29zIiwibWF4VGlsZVkiLCJnZXRTb3V0aCIsInRpbGVzIiwicHVzaCIsInJlbmRlclRyZWVIZWlnaHRzIiwib3B0aW9ucyIsIm9uUHJvZ3Jlc3MiLCJjdXJyZW50Wm9vbSIsImdldFpvb20iLCJjbGFtcGVkWm9vbSIsIm1pbiIsIm1heCIsInZpc2libGVUaWxlcyIsInRvdGFsVGlsZXMiLCJwcm9jZXNzZWRUaWxlcyIsInN1Y2Nlc3NmdWxUaWxlcyIsInNraXBwZWRUaWxlcyIsInRpbGUiLCJ0aWxlRGF0YSIsInJlbmRlclRpbGUiLCJ3YXJuIiwicXVlcnlTZWxlY3RvciIsInRpbGVCb3VuZHMiLCJ0b3BMZWZ0IiwicHJvamVjdCIsImJvdHRvbVJpZ2h0IiwidGlsZVdpZHRoIiwidGlsZUhlaWdodCIsImNvbG9yZWRDYW52YXMiLCJjb2xvckN0eCIsImNvbG9yZWRJbWFnZURhdGEiLCJjcmVhdGVJbWFnZURhdGEiLCJwaXhlbHNXaXRoRGF0YSIsInBpeGVsWCIsInBpeGVsWSIsInBpeGVsTG5nIiwicGl4ZWxMYXQiLCJyZ2JhIiwicHV0SW1hZ2VEYXRhIiwiY2xlYXJDYWNoZSIsImNsZWFyIiwiZ2V0Q2FjaGVTdGF0cyIsIm1heFNpemUiLCJjbGVhbnVwIiwiTWFwIiwidHJlZUhlaWdodFN5c3RlbSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/services/TreeHeightSystem.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/types/PremiumTypes.ts":
/*!***************************************!*\
  !*** ./src/app/types/PremiumTypes.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TierLevel: () => (/* binding */ TierLevel)\n/* harmony export */ });\n// PremiumTypes.ts\nvar TierLevel = /*#__PURE__*/ function(TierLevel) {\n    TierLevel[TierLevel[\"FREE\"] = 0] = \"FREE\";\n    TierLevel[TierLevel[\"COMMUNITY\"] = 1] = \"COMMUNITY\";\n    TierLevel[TierLevel[\"COMMERCIAL\"] = 2] = \"COMMERCIAL\";\n    return TierLevel;\n}({});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL3R5cGVzL1ByZW1pdW1UeXBlcy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsa0JBQWtCO0FBQ1gsdUNBQUtBOzs7O1dBQUFBO01BSVgiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL3R5cGVzL1ByZW1pdW1UeXBlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBQcmVtaXVtVHlwZXMudHNcbmV4cG9ydCBlbnVtIFRpZXJMZXZlbCB7XG4gIEZSRUUgPSAwLFxuICBDT01NVU5JVFkgPSAxLFxuICBDT01NRVJDSUFMID0gMlxufVxuXG4vLyBGZWF0dXJlIElEcyB3aXRoIHRpZXIgcmVxdWlyZW1lbnRzXG5leHBvcnQgdHlwZSBGZWF0dXJlSWQgPSBcbiAgfCAnYWRkX2djcycgXG4gIHwgJ2FkZF9vYnNlcnZlcicgXG4gIHwgJ2FkZF9yZXBlYXRlcidcbiAgfCAnc3RhdGlvbl9hbmFseXNpcydcbiAgfCAnbWVyZ2VkX2FuYWx5c2lzJyBcbiAgfCAnc3RhdGlvbl9sb3NfYW5hbHlzaXMnXG4gIHwgJ2ZsaWdodF9wYXRoX2FuYWx5c2lzJ1xuICB8ICd0ZXJyYWluX2FuYWx5c2lzJ1xuICB8ICdsb2NhbF9wb3dlcmxpbmVzJ1xuICB8ICdodl9wb3dlcmxpbmVzJ1xuICB8ICdhaXJzcGFjZV9hbmFseXNpcydcbiAgfCAnZXh0ZW5kZWRfZ3JpZF9yYW5nZSdcbiAgfCAnaGlnaF9yZXNvbHV0aW9uX2dyaWQnXG4gIHwgJ21vYmlsZV90b3dlcl9hbmFseXNpcydcbiAgfCAndHJlZV9oZWlnaHRzJzsiXSwibmFtZXMiOlsiVGllckxldmVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/types/PremiumTypes.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/utils/TerrainUtils.ts":
/*!***************************************!*\
  !*** ./src/app/utils/TerrainUtils.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearElevationCache: () => (/* binding */ clearElevationCache),\n/* harmony export */   ensureDEMLoaded: () => (/* binding */ ensureDEMLoaded),\n/* harmony export */   getReliableTerrainElevations: () => (/* binding */ getReliableTerrainElevations),\n/* harmony export */   preloadTiles: () => (/* binding */ preloadTiles),\n/* harmony export */   validateDEMData: () => (/* binding */ validateDEMData)\n/* harmony export */ });\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/helpers/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/bbox/dist/esm/index.js\");\n/* harmony import */ var _turf_turf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @turf/turf */ \"(ssr)/./node_modules/@turf/point-grid/dist/esm/index.js\");\n\n// In-memory cache for elevation results\nconst elevationCache = new Map();\n// Utility to generate cache key from coordinates\nfunction getCacheKey(lon, lat) {\n    return `${lon.toFixed(4)}|${lat.toFixed(4)}`;\n}\n/**\n * Gets reliable terrain elevations using a robust approach with minimal retries.\n * Optimized for flight path processing with caching, parallel queries, and preloading.\n * Does not cache negative elevation values < 0.05 and requeries them if requested again.\n * \n * @param map - The Mapbox GL map instance\n * @param coordinates - Array of [longitude, latitude] coordinates to query\n * @param progressCallback - Optional callback for reporting progress (0-100)\n * @returns Array of elevations for each coordinate\n */ async function getReliableTerrainElevations(map, coordinates, progressCallback) {\n    console.log(`[${new Date().toISOString()}] [TerrainUtils] Getting reliable terrain elevations for ${coordinates.length} coordinates`);\n    const elevations = new Array(coordinates.length).fill(0);\n    const CHUNK_SIZE = 50; // Smaller chunk size for better performance\n    for(let i = 0; i < coordinates.length; i += CHUNK_SIZE){\n        const chunk = coordinates.slice(i, i + CHUNK_SIZE);\n        // Process chunk concurrently\n        await Promise.all(chunk.map(async ([lon, lat], j)=>{\n            const cacheKey = getCacheKey(lon, lat);\n            // Check cache and validate elevation\n            if (elevationCache.has(cacheKey)) {\n                const cachedElevation = elevationCache.get(cacheKey);\n                if (cachedElevation >= 0.05) {\n                    elevations[i + j] = cachedElevation;\n                    return;\n                } else {\n                    // Remove invalid cached value to force requery\n                    elevationCache.delete(cacheKey);\n                    console.log(`[${new Date().toISOString()}] [TerrainUtils] Removed invalid cached elevation ${cachedElevation}m for [${lon}, ${lat}]`);\n                }\n            }\n            let elevation = null;\n            for(let attempt = 1; attempt <= 3; attempt++){\n                // Reduced delays: 50ms, 100ms, 150ms\n                await new Promise((resolve)=>setTimeout(resolve, 50 * attempt));\n                try {\n                    const elev = map.queryTerrainElevation([\n                        lon,\n                        lat\n                    ]);\n                    if (elev !== null) {\n                        elevation = elev;\n                        console.log(`[${new Date().toISOString()}] [TerrainUtils] Got elevation ${elevation.toFixed(1)}m for [${lon}, ${lat}] on attempt ${attempt}`);\n                        break;\n                    }\n                    console.warn(`[${new Date().toISOString()}] [TerrainUtils] Attempt ${attempt} returned null for [${lon}, ${lat}]`);\n                } catch (err) {\n                    console.error(`[${new Date().toISOString()}] [TerrainUtils] Error on attempt ${attempt} for [${lon}, ${lat}]:`, err);\n                }\n            }\n            if (elevation === null) {\n                console.warn(`[${new Date().toISOString()}] [TerrainUtils] Using fallback elevation for [${lon}, ${lat}]`);\n                // Use average of valid elevations in current chunk\n                const neighbors = elevations.slice(0, i + j).filter((e)=>e !== 0);\n                elevation = neighbors.length > 0 ? neighbors.reduce((sum, e)=>sum + e, 0) / neighbors.length : 0;\n            }\n            elevations[i + j] = elevation;\n            // Only cache elevations >= 0.05\n            if (elevation >= 0.05) {\n                elevationCache.set(cacheKey, elevation);\n            } else {\n                console.log(`[${new Date().toISOString()}] [TerrainUtils] Skipped caching elevation ${elevation}m for [${lon}, ${lat}] (below 0.05m)`);\n            }\n        }));\n        // Report progress\n        if (progressCallback) {\n            progressCallback(Math.min(100, Math.round((i + CHUNK_SIZE) / coordinates.length * 100)));\n        }\n        // Reduced delay between chunks\n        await new Promise((resolve)=>setTimeout(resolve, 20));\n    }\n    return elevations;\n}\n/**\n * Ensures that DEM data is loaded, with limited retries and dynamic test points.\n * @param map - The Mapbox GL map instance\n * @param testPoints - Optional array of test coordinates for validation\n * @returns Promise that resolves when DEM is ready or after max retries\n */ async function ensureDEMLoaded(map, testPoints) {\n    console.log(`[${new Date().toISOString()}] [TerrainUtils] Ensuring DEM is fully loaded...`);\n    return new Promise((resolve)=>{\n        let retries = 0;\n        const maxRetries = 3;\n        const checkDEM = async ()=>{\n            if (map.isSourceLoaded('mapbox-dem')) {\n                const isValid = await validateDEMData(map, testPoints);\n                if (isValid) {\n                    console.log(`[${new Date().toISOString()}] [TerrainUtils]  DEM fully loaded and validated`);\n                    resolve();\n                } else if (retries < maxRetries) {\n                    retries++;\n                    console.log(`[${new Date().toISOString()}] [TerrainUtils] DEM validation failed, retrying (${retries}/${maxRetries})...`);\n                    setTimeout(checkDEM, 500);\n                } else {\n                    console.warn(`[${new Date().toISOString()}] [TerrainUtils] DEM validation failed after ${maxRetries} retries, proceeding with warning`);\n                    resolve();\n                }\n            } else {\n                console.log(`[${new Date().toISOString()}] [TerrainUtils] Waiting for DEM source to load...`);\n                map.once('sourcedata', checkDEM);\n            }\n        };\n        checkDEM();\n    });\n}\n/**\n * Validates that DEM data is available using provided or dynamic test points.\n * @param map - The Mapbox GL map instance\n * @param testPoints - Optional array of test coordinates\n * @returns Promise resolving to boolean indicating if DEM data is valid\n */ async function validateDEMData(map, testPoints) {\n    const points = testPoints && testPoints.length > 0 ? testPoints.slice(0, 3) : [\n        map.getCenter().toArray()\n    ];\n    const elevations = await Promise.all(points.map(async (point)=>{\n        const elevation = map.queryTerrainElevation(point);\n        return {\n            point,\n            elevation\n        };\n    }));\n    const validElevations = elevations.filter((e)=>e.elevation !== null && e.elevation !== 0);\n    if (validElevations.length === points.length) {\n        console.log(`[${new Date().toISOString()}] [TerrainUtils] DEM validation successful:`, validElevations.map((v)=>`[${v.point}]: ${v.elevation}m`).join(', '));\n        return true;\n    }\n    console.warn(`[${new Date().toISOString()}] [TerrainUtils] DEM validation failed:`, elevations.map((e)=>`[${e.point}]: ${e.elevation !== null ? e.elevation : 'null'}m`).join(', '));\n    return false;\n}\n/**\n * Preloads DEM tiles for a set of coordinates to minimize null results.\n * @param map - The Mapbox GL map instance\n * @param coordinates - Array of [longitude, latitude] coordinates\n * @returns Promise that resolves when preloading is complete\n */ async function preloadTiles(map, coordinates) {\n    if (!coordinates.length) return;\n    console.log(`[${new Date().toISOString()}] [TerrainUtils] Preloading DEM tiles for ${coordinates.length} coordinates`);\n    // Create a bounding box\n    const points = coordinates.map(([lon, lat])=>_turf_turf__WEBPACK_IMPORTED_MODULE_0__.point([\n            lon,\n            lat\n        ]));\n    const featureCollection = _turf_turf__WEBPACK_IMPORTED_MODULE_0__.featureCollection(points);\n    const bbox = _turf_turf__WEBPACK_IMPORTED_MODULE_1__.bbox(featureCollection);\n    // Generate sample points within the bbox\n    const samplePoints = _turf_turf__WEBPACK_IMPORTED_MODULE_2__.pointGrid(bbox, 100, {\n        units: 'meters'\n    }).features.map((f)=>f.geometry.coordinates);\n    // Query sample points to load tiles\n    const BATCH_SIZE = 50;\n    for(let i = 0; i < samplePoints.length; i += BATCH_SIZE){\n        const batch = samplePoints.slice(i, i + BATCH_SIZE);\n        await Promise.all(batch.map(([lon, lat])=>map.queryTerrainElevation([\n                lon,\n                lat\n            ])));\n        await new Promise((resolve)=>setTimeout(resolve, 20));\n    }\n    // Query waypoints directly to ensure coverage\n    await Promise.all(coordinates.map(([lon, lat])=>map.queryTerrainElevation([\n            lon,\n            lat\n        ])));\n    console.log(`[${new Date().toISOString()}] [TerrainUtils] DEM tiles preloaded`);\n}\n/**\n * Clears the elevation cache to free memory.\n */ function clearElevationCache() {\n    elevationCache.clear();\n    console.log(`[${new Date().toISOString()}] [TerrainUtils] Elevation cache cleared`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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InNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvdXRpbHMvVGVycmFpblV0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtYXBib3hnbCBmcm9tICdtYXBib3gtZ2wnO1xuaW1wb3J0ICogYXMgdHVyZiBmcm9tICdAdHVyZi90dXJmJztcblxuLy8gSW4tbWVtb3J5IGNhY2hlIGZvciBlbGV2YXRpb24gcmVzdWx0c1xuY29uc3QgZWxldmF0aW9uQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuXG4vLyBVdGlsaXR5IHRvIGdlbmVyYXRlIGNhY2hlIGtleSBmcm9tIGNvb3JkaW5hdGVzXG5mdW5jdGlvbiBnZXRDYWNoZUtleShsb246IG51bWJlciwgbGF0OiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gYCR7bG9uLnRvRml4ZWQoNCl9fCR7bGF0LnRvRml4ZWQoNCl9YDtcbn1cblxuLyoqXG4gKiBHZXRzIHJlbGlhYmxlIHRlcnJhaW4gZWxldmF0aW9ucyB1c2luZyBhIHJvYnVzdCBhcHByb2FjaCB3aXRoIG1pbmltYWwgcmV0cmllcy5cbiAqIE9wdGltaXplZCBmb3IgZmxpZ2h0IHBhdGggcHJvY2Vzc2luZyB3aXRoIGNhY2hpbmcsIHBhcmFsbGVsIHF1ZXJpZXMsIGFuZCBwcmVsb2FkaW5nLlxuICogRG9lcyBub3QgY2FjaGUgbmVnYXRpdmUgZWxldmF0aW9uIHZhbHVlcyA8IDAuMDUgYW5kIHJlcXVlcmllcyB0aGVtIGlmIHJlcXVlc3RlZCBhZ2Fpbi5cbiAqIFxuICogQHBhcmFtIG1hcCAtIFRoZSBNYXBib3ggR0wgbWFwIGluc3RhbmNlXG4gKiBAcGFyYW0gY29vcmRpbmF0ZXMgLSBBcnJheSBvZiBbbG9uZ2l0dWRlLCBsYXRpdHVkZV0gY29vcmRpbmF0ZXMgdG8gcXVlcnlcbiAqIEBwYXJhbSBwcm9ncmVzc0NhbGxiYWNrIC0gT3B0aW9uYWwgY2FsbGJhY2sgZm9yIHJlcG9ydGluZyBwcm9ncmVzcyAoMC0xMDApXG4gKiBAcmV0dXJucyBBcnJheSBvZiBlbGV2YXRpb25zIGZvciBlYWNoIGNvb3JkaW5hdGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJlbGlhYmxlVGVycmFpbkVsZXZhdGlvbnMoXG4gIG1hcDogbWFwYm94Z2wuTWFwLFxuICBjb29yZGluYXRlczogW251bWJlciwgbnVtYmVyXVtdLFxuICBwcm9ncmVzc0NhbGxiYWNrPzogKHBlcmNlbnQ6IG51bWJlcikgPT4gdm9pZFxuKTogUHJvbWlzZTxudW1iZXJbXT4ge1xuICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW1RlcnJhaW5VdGlsc10gR2V0dGluZyByZWxpYWJsZSB0ZXJyYWluIGVsZXZhdGlvbnMgZm9yICR7Y29vcmRpbmF0ZXMubGVuZ3RofSBjb29yZGluYXRlc2ApO1xuICBcbiAgY29uc3QgZWxldmF0aW9uczogbnVtYmVyW10gPSBuZXcgQXJyYXkoY29vcmRpbmF0ZXMubGVuZ3RoKS5maWxsKDApO1xuICBjb25zdCBDSFVOS19TSVpFID0gNTA7IC8vIFNtYWxsZXIgY2h1bmsgc2l6ZSBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gIFxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSArPSBDSFVOS19TSVpFKSB7XG4gICAgY29uc3QgY2h1bmsgPSBjb29yZGluYXRlcy5zbGljZShpLCBpICsgQ0hVTktfU0laRSk7XG4gICAgXG4gICAgLy8gUHJvY2VzcyBjaHVuayBjb25jdXJyZW50bHlcbiAgICBhd2FpdCBQcm9taXNlLmFsbChjaHVuay5tYXAoYXN5bmMgKFtsb24sIGxhdF0sIGopID0+IHtcbiAgICAgIGNvbnN0IGNhY2hlS2V5ID0gZ2V0Q2FjaGVLZXkobG9uLCBsYXQpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBjYWNoZSBhbmQgdmFsaWRhdGUgZWxldmF0aW9uXG4gICAgICBpZiAoZWxldmF0aW9uQ2FjaGUuaGFzKGNhY2hlS2V5KSkge1xuICAgICAgICBjb25zdCBjYWNoZWRFbGV2YXRpb24gPSBlbGV2YXRpb25DYWNoZS5nZXQoY2FjaGVLZXkpITtcbiAgICAgICAgaWYgKGNhY2hlZEVsZXZhdGlvbiA+PSAwLjA1KSB7XG4gICAgICAgICAgZWxldmF0aW9uc1tpICsgal0gPSBjYWNoZWRFbGV2YXRpb247XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJlbW92ZSBpbnZhbGlkIGNhY2hlZCB2YWx1ZSB0byBmb3JjZSByZXF1ZXJ5XG4gICAgICAgICAgZWxldmF0aW9uQ2FjaGUuZGVsZXRlKGNhY2hlS2V5KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW1RlcnJhaW5VdGlsc10gUmVtb3ZlZCBpbnZhbGlkIGNhY2hlZCBlbGV2YXRpb24gJHtjYWNoZWRFbGV2YXRpb259bSBmb3IgWyR7bG9ufSwgJHtsYXR9XWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGxldCBlbGV2YXRpb246IG51bWJlciB8IG51bGwgPSBudWxsO1xuICAgICAgZm9yIChsZXQgYXR0ZW1wdCA9IDE7IGF0dGVtcHQgPD0gMzsgYXR0ZW1wdCsrKSB7XG4gICAgICAgIC8vIFJlZHVjZWQgZGVsYXlzOiA1MG1zLCAxMDBtcywgMTUwbXNcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwICogYXR0ZW1wdCkpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGVsZXYgPSBtYXAucXVlcnlUZXJyYWluRWxldmF0aW9uKFtsb24sIGxhdF0pO1xuICAgICAgICAgIGlmIChlbGV2ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBlbGV2YXRpb24gPSBlbGV2O1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtUZXJyYWluVXRpbHNdIEdvdCBlbGV2YXRpb24gJHtlbGV2YXRpb24udG9GaXhlZCgxKX1tIGZvciBbJHtsb259LCAke2xhdH1dIG9uIGF0dGVtcHQgJHthdHRlbXB0fWApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUud2FybihgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW1RlcnJhaW5VdGlsc10gQXR0ZW1wdCAke2F0dGVtcHR9IHJldHVybmVkIG51bGwgZm9yIFske2xvbn0sICR7bGF0fV1gKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW1RlcnJhaW5VdGlsc10gRXJyb3Igb24gYXR0ZW1wdCAke2F0dGVtcHR9IGZvciBbJHtsb259LCAke2xhdH1dOmAsIGVycik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGVsZXZhdGlvbiA9PT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtUZXJyYWluVXRpbHNdIFVzaW5nIGZhbGxiYWNrIGVsZXZhdGlvbiBmb3IgWyR7bG9ufSwgJHtsYXR9XWApO1xuICAgICAgICAvLyBVc2UgYXZlcmFnZSBvZiB2YWxpZCBlbGV2YXRpb25zIGluIGN1cnJlbnQgY2h1bmtcbiAgICAgICAgY29uc3QgbmVpZ2hib3JzID0gZWxldmF0aW9ucy5zbGljZSgwLCBpICsgaikuZmlsdGVyKGUgPT4gZSAhPT0gMCk7XG4gICAgICAgIGVsZXZhdGlvbiA9IG5laWdoYm9ycy5sZW5ndGggPiAwID8gbmVpZ2hib3JzLnJlZHVjZSgoc3VtLCBlKSA9PiBzdW0gKyBlLCAwKSAvIG5laWdoYm9ycy5sZW5ndGggOiAwO1xuICAgICAgfVxuICAgICAgXG4gICAgICBlbGV2YXRpb25zW2kgKyBqXSA9IGVsZXZhdGlvbjtcbiAgICAgIC8vIE9ubHkgY2FjaGUgZWxldmF0aW9ucyA+PSAwLjA1XG4gICAgICBpZiAoZWxldmF0aW9uID49IDAuMDUpIHtcbiAgICAgICAgZWxldmF0aW9uQ2FjaGUuc2V0KGNhY2hlS2V5LCBlbGV2YXRpb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtUZXJyYWluVXRpbHNdIFNraXBwZWQgY2FjaGluZyBlbGV2YXRpb24gJHtlbGV2YXRpb259bSBmb3IgWyR7bG9ufSwgJHtsYXR9XSAoYmVsb3cgMC4wNW0pYCk7XG4gICAgICB9XG4gICAgfSkpO1xuICAgIFxuICAgIC8vIFJlcG9ydCBwcm9ncmVzc1xuICAgIGlmIChwcm9ncmVzc0NhbGxiYWNrKSB7XG4gICAgICBwcm9ncmVzc0NhbGxiYWNrKE1hdGgubWluKDEwMCwgTWF0aC5yb3VuZCgoaSArIENIVU5LX1NJWkUpIC8gY29vcmRpbmF0ZXMubGVuZ3RoICogMTAwKSkpO1xuICAgIH1cbiAgICBcbiAgICAvLyBSZWR1Y2VkIGRlbGF5IGJldHdlZW4gY2h1bmtzXG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwKSk7XG4gIH1cbiAgXG4gIHJldHVybiBlbGV2YXRpb25zO1xufVxuXG4vKipcbiAqIEVuc3VyZXMgdGhhdCBERU0gZGF0YSBpcyBsb2FkZWQsIHdpdGggbGltaXRlZCByZXRyaWVzIGFuZCBkeW5hbWljIHRlc3QgcG9pbnRzLlxuICogQHBhcmFtIG1hcCAtIFRoZSBNYXBib3ggR0wgbWFwIGluc3RhbmNlXG4gKiBAcGFyYW0gdGVzdFBvaW50cyAtIE9wdGlvbmFsIGFycmF5IG9mIHRlc3QgY29vcmRpbmF0ZXMgZm9yIHZhbGlkYXRpb25cbiAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIERFTSBpcyByZWFkeSBvciBhZnRlciBtYXggcmV0cmllc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5zdXJlREVNTG9hZGVkKG1hcDogbWFwYm94Z2wuTWFwLCB0ZXN0UG9pbnRzPzogW251bWJlciwgbnVtYmVyXVtdKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnNvbGUubG9nKGBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBbVGVycmFpblV0aWxzXSBFbnN1cmluZyBERU0gaXMgZnVsbHkgbG9hZGVkLi4uYCk7XG4gIFxuICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICBsZXQgcmV0cmllcyA9IDA7XG4gICAgY29uc3QgbWF4UmV0cmllcyA9IDM7XG4gICAgXG4gICAgY29uc3QgY2hlY2tERU0gPSBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAobWFwLmlzU291cmNlTG9hZGVkKCdtYXBib3gtZGVtJykpIHtcbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IHZhbGlkYXRlREVNRGF0YShtYXAsIHRlc3RQb2ludHMpO1xuICAgICAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBbVGVycmFpblV0aWxzXSDinIUgREVNIGZ1bGx5IGxvYWRlZCBhbmQgdmFsaWRhdGVkYCk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHJldHJpZXMgPCBtYXhSZXRyaWVzKSB7XG4gICAgICAgICAgcmV0cmllcysrO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBbVGVycmFpblV0aWxzXSBERU0gdmFsaWRhdGlvbiBmYWlsZWQsIHJldHJ5aW5nICgke3JldHJpZXN9LyR7bWF4UmV0cmllc30pLi4uYCk7XG4gICAgICAgICAgc2V0VGltZW91dChjaGVja0RFTSwgNTAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtUZXJyYWluVXRpbHNdIERFTSB2YWxpZGF0aW9uIGZhaWxlZCBhZnRlciAke21heFJldHJpZXN9IHJldHJpZXMsIHByb2NlZWRpbmcgd2l0aCB3YXJuaW5nYCk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW1RlcnJhaW5VdGlsc10gV2FpdGluZyBmb3IgREVNIHNvdXJjZSB0byBsb2FkLi4uYCk7XG4gICAgICAgIG1hcC5vbmNlKCdzb3VyY2VkYXRhJywgY2hlY2tERU0pO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgY2hlY2tERU0oKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgREVNIGRhdGEgaXMgYXZhaWxhYmxlIHVzaW5nIHByb3ZpZGVkIG9yIGR5bmFtaWMgdGVzdCBwb2ludHMuXG4gKiBAcGFyYW0gbWFwIC0gVGhlIE1hcGJveCBHTCBtYXAgaW5zdGFuY2VcbiAqIEBwYXJhbSB0ZXN0UG9pbnRzIC0gT3B0aW9uYWwgYXJyYXkgb2YgdGVzdCBjb29yZGluYXRlc1xuICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gYm9vbGVhbiBpbmRpY2F0aW5nIGlmIERFTSBkYXRhIGlzIHZhbGlkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2YWxpZGF0ZURFTURhdGEobWFwOiBtYXBib3hnbC5NYXAsIHRlc3RQb2ludHM/OiBbbnVtYmVyLCBudW1iZXJdW10pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3QgcG9pbnRzID0gdGVzdFBvaW50cyAmJiB0ZXN0UG9pbnRzLmxlbmd0aCA+IDAgPyB0ZXN0UG9pbnRzLnNsaWNlKDAsIDMpIDogW1xuICAgIG1hcC5nZXRDZW50ZXIoKS50b0FycmF5KCkgYXMgW251bWJlciwgbnVtYmVyXSwgLy8gRmFsbGJhY2sgdG8gbWFwIGNlbnRlclxuICBdO1xuICBcbiAgY29uc3QgZWxldmF0aW9ucyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgIHBvaW50cy5tYXAoYXN5bmMgcG9pbnQgPT4ge1xuICAgICAgY29uc3QgZWxldmF0aW9uID0gbWFwLnF1ZXJ5VGVycmFpbkVsZXZhdGlvbihwb2ludCk7XG4gICAgICByZXR1cm4geyBwb2ludCwgZWxldmF0aW9uIH07XG4gICAgfSlcbiAgKTtcbiAgXG4gIGNvbnN0IHZhbGlkRWxldmF0aW9ucyA9IGVsZXZhdGlvbnMuZmlsdGVyKGUgPT4gZS5lbGV2YXRpb24gIT09IG51bGwgJiYgZS5lbGV2YXRpb24gIT09IDApO1xuICBcbiAgaWYgKHZhbGlkRWxldmF0aW9ucy5sZW5ndGggPT09IHBvaW50cy5sZW5ndGgpIHtcbiAgICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW1RlcnJhaW5VdGlsc10gREVNIHZhbGlkYXRpb24gc3VjY2Vzc2Z1bDpgLCBcbiAgICAgIHZhbGlkRWxldmF0aW9ucy5tYXAodiA9PiBgWyR7di5wb2ludH1dOiAke3YuZWxldmF0aW9ufW1gKS5qb2luKCcsICcpXG4gICAgKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBcbiAgY29uc29sZS53YXJuKGBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBbVGVycmFpblV0aWxzXSBERU0gdmFsaWRhdGlvbiBmYWlsZWQ6YCxcbiAgICBlbGV2YXRpb25zLm1hcChlID0+IGBbJHtlLnBvaW50fV06ICR7ZS5lbGV2YXRpb24gIT09IG51bGwgPyBlLmVsZXZhdGlvbiA6ICdudWxsJ31tYCkuam9pbignLCAnKVxuICApO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogUHJlbG9hZHMgREVNIHRpbGVzIGZvciBhIHNldCBvZiBjb29yZGluYXRlcyB0byBtaW5pbWl6ZSBudWxsIHJlc3VsdHMuXG4gKiBAcGFyYW0gbWFwIC0gVGhlIE1hcGJveCBHTCBtYXAgaW5zdGFuY2VcbiAqIEBwYXJhbSBjb29yZGluYXRlcyAtIEFycmF5IG9mIFtsb25naXR1ZGUsIGxhdGl0dWRlXSBjb29yZGluYXRlc1xuICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gcHJlbG9hZGluZyBpcyBjb21wbGV0ZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJlbG9hZFRpbGVzKG1hcDogbWFwYm94Z2wuTWFwLCBjb29yZGluYXRlczogW251bWJlciwgbnVtYmVyXVtdKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghY29vcmRpbmF0ZXMubGVuZ3RoKSByZXR1cm47XG4gIFxuICBjb25zb2xlLmxvZyhgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gW1RlcnJhaW5VdGlsc10gUHJlbG9hZGluZyBERU0gdGlsZXMgZm9yICR7Y29vcmRpbmF0ZXMubGVuZ3RofSBjb29yZGluYXRlc2ApO1xuICBcbiAgLy8gQ3JlYXRlIGEgYm91bmRpbmcgYm94XG4gIGNvbnN0IHBvaW50cyA9IGNvb3JkaW5hdGVzLm1hcCgoW2xvbiwgbGF0XSkgPT4gdHVyZi5wb2ludChbbG9uLCBsYXRdKSk7XG4gIGNvbnN0IGZlYXR1cmVDb2xsZWN0aW9uID0gdHVyZi5mZWF0dXJlQ29sbGVjdGlvbihwb2ludHMpO1xuICBjb25zdCBiYm94ID0gdHVyZi5iYm94KGZlYXR1cmVDb2xsZWN0aW9uKTtcbiAgXG4gIC8vIEdlbmVyYXRlIHNhbXBsZSBwb2ludHMgd2l0aGluIHRoZSBiYm94XG4gIGNvbnN0IHNhbXBsZVBvaW50cyA9IHR1cmYucG9pbnRHcmlkKGJib3gsIDEwMCwgeyB1bml0czogJ21ldGVycycgfSkuZmVhdHVyZXMubWFwKGYgPT4gZi5nZW9tZXRyeS5jb29yZGluYXRlcyBhcyBbbnVtYmVyLCBudW1iZXJdKTtcbiAgXG4gIC8vIFF1ZXJ5IHNhbXBsZSBwb2ludHMgdG8gbG9hZCB0aWxlc1xuICBjb25zdCBCQVRDSF9TSVpFID0gNTA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2FtcGxlUG9pbnRzLmxlbmd0aDsgaSArPSBCQVRDSF9TSVpFKSB7XG4gICAgY29uc3QgYmF0Y2ggPSBzYW1wbGVQb2ludHMuc2xpY2UoaSwgaSArIEJBVENIX1NJWkUpO1xuICAgIGF3YWl0IFByb21pc2UuYWxsKGJhdGNoLm1hcCgoW2xvbiwgbGF0XSkgPT4gbWFwLnF1ZXJ5VGVycmFpbkVsZXZhdGlvbihbbG9uLCBsYXRdKSkpO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMCkpO1xuICB9XG4gIFxuICAvLyBRdWVyeSB3YXlwb2ludHMgZGlyZWN0bHkgdG8gZW5zdXJlIGNvdmVyYWdlXG4gIGF3YWl0IFByb21pc2UuYWxsKGNvb3JkaW5hdGVzLm1hcCgoW2xvbiwgbGF0XSkgPT4gbWFwLnF1ZXJ5VGVycmFpbkVsZXZhdGlvbihbbG9uLCBsYXRdKSkpO1xuICBcbiAgY29uc29sZS5sb2coYFske25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1dIFtUZXJyYWluVXRpbHNdIERFTSB0aWxlcyBwcmVsb2FkZWRgKTtcbn1cblxuLyoqXG4gKiBDbGVhcnMgdGhlIGVsZXZhdGlvbiBjYWNoZSB0byBmcmVlIG1lbW9yeS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyRWxldmF0aW9uQ2FjaGUoKTogdm9pZCB7XG4gIGVsZXZhdGlvbkNhY2hlLmNsZWFyKCk7XG4gIGNvbnNvbGUubG9nKGBbJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XSBbVGVycmFpblV0aWxzXSBFbGV2YXRpb24gY2FjaGUgY2xlYXJlZGApO1xufSJdLCJuYW1lcyI6WyJ0dXJmIiwiZWxldmF0aW9uQ2FjaGUiLCJNYXAiLCJnZXRDYWNoZUtleSIsImxvbiIsImxhdCIsInRvRml4ZWQiLCJnZXRSZWxpYWJsZVRlcnJhaW5FbGV2YXRpb25zIiwibWFwIiwiY29vcmRpbmF0ZXMiLCJwcm9ncmVzc0NhbGxiYWNrIiwiY29uc29sZSIsImxvZyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImxlbmd0aCIsImVsZXZhdGlvbnMiLCJBcnJheSIsImZpbGwiLCJDSFVOS19TSVpFIiwiaSIsImNodW5rIiwic2xpY2UiLCJQcm9taXNlIiwiYWxsIiwiaiIsImNhY2hlS2V5IiwiaGFzIiwiY2FjaGVkRWxldmF0aW9uIiwiZ2V0IiwiZGVsZXRlIiwiZWxldmF0aW9uIiwiYXR0ZW1wdCIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZWxldiIsInF1ZXJ5VGVycmFpbkVsZXZhdGlvbiIsIndhcm4iLCJlcnIiLCJlcnJvciIsIm5laWdoYm9ycyIsImZpbHRlciIsImUiLCJyZWR1Y2UiLCJzdW0iLCJzZXQiLCJNYXRoIiwibWluIiwicm91bmQiLCJlbnN1cmVERU1Mb2FkZWQiLCJ0ZXN0UG9pbnRzIiwicmV0cmllcyIsIm1heFJldHJpZXMiLCJjaGVja0RFTSIsImlzU291cmNlTG9hZGVkIiwiaXNWYWxpZCIsInZhbGlkYXRlREVNRGF0YSIsIm9uY2UiLCJwb2ludHMiLCJnZXRDZW50ZXIiLCJ0b0FycmF5IiwicG9pbnQiLCJ2YWxpZEVsZXZhdGlvbnMiLCJ2Iiwiam9pbiIsInByZWxvYWRUaWxlcyIsImZlYXR1cmVDb2xsZWN0aW9uIiwiYmJveCIsInNhbXBsZVBvaW50cyIsInBvaW50R3JpZCIsInVuaXRzIiwiZmVhdHVyZXMiLCJmIiwiZ2VvbWV0cnkiLCJCQVRDSF9TSVpFIiwiYmF0Y2giLCJjbGVhckVsZXZhdGlvbkNhY2hlIiwiY2xlYXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/utils/TerrainUtils.ts\n");

/***/ }),

/***/ "(ssr)/./src/app/utils/premiumConfig.ts":
/*!****************************************!*\
  !*** ./src/app/utils/premiumConfig.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FEATURE_TIER_REQUIREMENTS: () => (/* binding */ FEATURE_TIER_REQUIREMENTS),\n/* harmony export */   PARAMETER_LIMITS: () => (/* binding */ PARAMETER_LIMITS),\n/* harmony export */   TIER_CONFIG: () => (/* binding */ TIER_CONFIG)\n/* harmony export */ });\n/* harmony import */ var _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types/PremiumTypes */ \"(ssr)/./src/app/types/PremiumTypes.ts\");\n/**\n * Premium feature configuration and tier definitions\n * \n * This file contains all tier-specific configurations, feature requirements,\n * and parameter limits for the premium feature system.\n */ \n/**\n * TIER_CONFIG - The single source of truth for all tier-related configurations\n * This defines what each tier can access, and any specific limitations\n */ const TIER_CONFIG = {\n    [_types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.FREE]: {\n        name: 'Free',\n        // Marker limits\n        maxMarkers: {\n            gcs: 0,\n            observer: 1,\n            repeater: 0\n        },\n        // Parameter limits\n        parameters: {\n            gridRange: {\n                min: 100,\n                max: 500\n            },\n            gridSize: {\n                min: 30,\n                max: 100\n            },\n            stationCount: {\n                min: 0,\n                max: 1\n            }\n        },\n        // Feature access (true = available in this tier)\n        features: {\n            'station_analysis': true,\n            'station_los_analysis': true,\n            'terrain_analysis': true,\n            'flight_path_analysis': false,\n            'merged_analysis': false,\n            'local_powerlines': false,\n            'hv_powerlines': true,\n            'extended_grid_range': false,\n            'high_resolution_grid': false,\n            'airspace_analysis': true,\n            'mobile_tower_analysis': false,\n            'tree_heights': false\n        }\n    },\n    [_types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.COMMUNITY]: {\n        name: 'Community',\n        maxMarkers: {\n            gcs: 1,\n            observer: 2,\n            repeater: 1\n        },\n        parameters: {\n            gridRange: {\n                min: 100,\n                max: 500\n            },\n            gridSize: {\n                min: 30,\n                max: 100\n            },\n            stationCount: {\n                min: 0,\n                max: 4\n            }\n        },\n        features: {\n            'station_analysis': true,\n            'station_los_analysis': true,\n            'terrain_analysis': true,\n            'flight_path_analysis': true,\n            'merged_analysis': false,\n            'local_powerlines': false,\n            'hv_powerlines': true,\n            'extended_grid_range': false,\n            'high_resolution_grid': false,\n            'airspace_analysis': true,\n            'mobile_tower_analysis': false,\n            'tree_heights': false\n        }\n    },\n    [_types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.COMMERCIAL]: {\n        name: 'Commercial',\n        maxMarkers: {\n            gcs: 10,\n            observer: 10,\n            repeater: 10\n        },\n        parameters: {\n            gridRange: {\n                min: 100,\n                max: 5000\n            },\n            gridSize: {\n                min: 1,\n                max: 100\n            },\n            stationCount: {\n                min: 0,\n                max: 30\n            }\n        },\n        features: {\n            'station_analysis': true,\n            'station_los_analysis': true,\n            'terrain_analysis': true,\n            'flight_path_analysis': true,\n            'merged_analysis': true,\n            'local_powerlines': true,\n            'hv_powerlines': true,\n            'extended_grid_range': true,\n            'high_resolution_grid': true,\n            'airspace_analysis': true,\n            'mobile_tower_analysis': true,\n            'tree_heights': true\n        }\n    }\n};\n/**\n * Helper function to derive FEATURE_TIER_REQUIREMENTS from TIER_CONFIG\n * This ensures consistency between requirements and actual tier capabilities\n */ function generateFeatureTierRequirements() {\n    const requirements = {};\n    // Handle regular features\n    const allFeatures = Object.keys(TIER_CONFIG[_types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.COMMERCIAL].features);\n    allFeatures.forEach((feature)=>{\n        // Find the lowest tier that has this feature\n        for(let tier = _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.FREE; tier <= _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.COMMERCIAL; tier++){\n            if (TIER_CONFIG[tier].features[feature]) {\n                requirements[feature] = tier;\n                break;\n            }\n        }\n    });\n    // Handle marker types\n    const markerTypes = [\n        'gcs',\n        'observer',\n        'repeater'\n    ];\n    markerTypes.forEach((markerType)=>{\n        const featureId = `add_${markerType}`;\n        // Find the lowest tier that allows this marker\n        for(let tier = _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.FREE; tier <= _types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.COMMERCIAL; tier++){\n            if (TIER_CONFIG[tier].maxMarkers[markerType] > 0) {\n                requirements[featureId] = tier;\n                break;\n            }\n        }\n    });\n    return requirements;\n}\n/**\n * Feature tier requirements - DERIVED FROM TIER_CONFIG\n * This ensures there are no inconsistencies between tier requirements\n * and the actual capabilities of each tier\n */ const FEATURE_TIER_REQUIREMENTS = generateFeatureTierRequirements();\n/**\n * Parameter limits - FOR BACKWARDS COMPATIBILITY\n * These values are now directly derived from TIER_CONFIG\n */ const PARAMETER_LIMITS = {\n    [_types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.FREE]: TIER_CONFIG[_types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.FREE].parameters,\n    [_types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.COMMUNITY]: TIER_CONFIG[_types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.COMMUNITY].parameters,\n    [_types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.COMMERCIAL]: TIER_CONFIG[_types_PremiumTypes__WEBPACK_IMPORTED_MODULE_0__.TierLevel.COMMERCIAL].parameters\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBQ0Y7SUFFQSxzQkFBc0I7SUFDdEIsTUFBTUMsY0FBYztRQUFDO1FBQU87UUFBWTtLQUFXO0lBQ25EQSxZQUFZSCxPQUFPLENBQUNJLENBQUFBO1FBQ2xCLE1BQU1DLFlBQVksQ0FBQyxJQUFJLEVBQUVELFlBQVk7UUFFckMsK0NBQStDO1FBQy9DLElBQUssSUFBSUYsT0FBT3hCLDBEQUFTQSxDQUFDRSxJQUFJLEVBQUVzQixRQUFReEIsMERBQVNBLENBQUNnQixVQUFVLEVBQUVRLE9BQVE7WUFDcEUsSUFBSXZCLFdBQVcsQ0FBQ3VCLEtBQUssQ0FBQ3BCLFVBQVUsQ0FBQ3NCLFdBQVcsR0FBRyxHQUFHO2dCQUNoRFIsWUFBWSxDQUFDUyxVQUFVLEdBQUdIO2dCQUMxQjtZQUNGO1FBQ0Y7SUFDRjtJQUVBLE9BQU9OO0FBQ1Q7QUFFQTs7OztDQUlDLEdBQ00sTUFBTVUsNEJBQTRCWCxrQ0FBa0M7QUFFM0U7OztDQUdDLEdBQ00sTUFBTVksbUJBQW1CO0lBQzlCLENBQUM3QiwwREFBU0EsQ0FBQ0UsSUFBSSxDQUFDLEVBQUVELFdBQVcsQ0FBQ0QsMERBQVNBLENBQUNFLElBQUksQ0FBQyxDQUFDTSxVQUFVO0lBQ3hELENBQUNSLDBEQUFTQSxDQUFDZSxTQUFTLENBQUMsRUFBRWQsV0FBVyxDQUFDRCwwREFBU0EsQ0FBQ2UsU0FBUyxDQUFDLENBQUNQLFVBQVU7SUFDbEUsQ0FBQ1IsMERBQVNBLENBQUNnQixVQUFVLENBQUMsRUFBRWYsV0FBVyxDQUFDRCwwREFBU0EsQ0FBQ2dCLFVBQVUsQ0FBQyxDQUFDUixVQUFVO0FBQ3RFLEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL3V0aWxzL3ByZW1pdW1Db25maWcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQcmVtaXVtIGZlYXR1cmUgY29uZmlndXJhdGlvbiBhbmQgdGllciBkZWZpbml0aW9uc1xuICogXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgYWxsIHRpZXItc3BlY2lmaWMgY29uZmlndXJhdGlvbnMsIGZlYXR1cmUgcmVxdWlyZW1lbnRzLFxuICogYW5kIHBhcmFtZXRlciBsaW1pdHMgZm9yIHRoZSBwcmVtaXVtIGZlYXR1cmUgc3lzdGVtLlxuICovXG5cbmltcG9ydCB7IFRpZXJMZXZlbCwgRmVhdHVyZUlkIH0gZnJvbSAnLi4vdHlwZXMvUHJlbWl1bVR5cGVzJztcblxuLyoqXG4gKiBUSUVSX0NPTkZJRyAtIFRoZSBzaW5nbGUgc291cmNlIG9mIHRydXRoIGZvciBhbGwgdGllci1yZWxhdGVkIGNvbmZpZ3VyYXRpb25zXG4gKiBUaGlzIGRlZmluZXMgd2hhdCBlYWNoIHRpZXIgY2FuIGFjY2VzcywgYW5kIGFueSBzcGVjaWZpYyBsaW1pdGF0aW9uc1xuICovXG5leHBvcnQgY29uc3QgVElFUl9DT05GSUcgPSB7XG4gIFtUaWVyTGV2ZWwuRlJFRV06IHtcbiAgICBuYW1lOiAnRnJlZScsXG4gICAgLy8gTWFya2VyIGxpbWl0c1xuICAgIG1heE1hcmtlcnM6IHtcbiAgICAgIGdjczogMCwgICAgICAgICBcbiAgICAgIG9ic2VydmVyOiAxLFxuICAgICAgcmVwZWF0ZXI6IDAgICAgICBcbiAgICB9LFxuICAgIC8vIFBhcmFtZXRlciBsaW1pdHNcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICBncmlkUmFuZ2U6IHsgbWluOiAxMDAsIG1heDogNTAwIH0sXG4gICAgICBncmlkU2l6ZTogeyBtaW46IDMwLCBtYXg6IDEwMCB9LFxuICAgICAgc3RhdGlvbkNvdW50OiB7IG1pbjogMCwgbWF4OiAxIH1cbiAgICB9LFxuICAgIC8vIEZlYXR1cmUgYWNjZXNzICh0cnVlID0gYXZhaWxhYmxlIGluIHRoaXMgdGllcilcbiAgICBmZWF0dXJlczoge1xuICAgICAgJ3N0YXRpb25fYW5hbHlzaXMnOiB0cnVlLFxuICAgICAgJ3N0YXRpb25fbG9zX2FuYWx5c2lzJzogdHJ1ZSxcbiAgICAgICd0ZXJyYWluX2FuYWx5c2lzJzogdHJ1ZSxcbiAgICAgICdmbGlnaHRfcGF0aF9hbmFseXNpcyc6IGZhbHNlLFxuICAgICAgJ21lcmdlZF9hbmFseXNpcyc6IGZhbHNlLFxuICAgICAgJ2xvY2FsX3Bvd2VybGluZXMnOiBmYWxzZSxcbiAgICAgICdodl9wb3dlcmxpbmVzJzogdHJ1ZSxcbiAgICAgICdleHRlbmRlZF9ncmlkX3JhbmdlJzogZmFsc2UsXG4gICAgICAnaGlnaF9yZXNvbHV0aW9uX2dyaWQnOiBmYWxzZSxcbiAgICAgICdhaXJzcGFjZV9hbmFseXNpcyc6IHRydWUsXG4gICAgICAnbW9iaWxlX3Rvd2VyX2FuYWx5c2lzJzogZmFsc2UsXG4gICAgICAndHJlZV9oZWlnaHRzJzogZmFsc2VcbiAgICB9XG4gIH0sXG4gIFtUaWVyTGV2ZWwuQ09NTVVOSVRZXToge1xuICAgIG5hbWU6ICdDb21tdW5pdHknLFxuICAgIG1heE1hcmtlcnM6IHtcbiAgICAgIGdjczogMSxcbiAgICAgIG9ic2VydmVyOiAyLFxuICAgICAgcmVwZWF0ZXI6IDFcbiAgICB9LFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIGdyaWRSYW5nZTogeyBtaW46IDEwMCwgbWF4OiA1MDAgfSxcbiAgICAgIGdyaWRTaXplOiB7IG1pbjogMzAsIG1heDogMTAwIH0sXG4gICAgICBzdGF0aW9uQ291bnQ6IHsgbWluOiAwLCBtYXg6IDQgfVxuICAgIH0sXG4gICAgZmVhdHVyZXM6IHtcbiAgICAgICdzdGF0aW9uX2FuYWx5c2lzJzogdHJ1ZSxcbiAgICAgICdzdGF0aW9uX2xvc19hbmFseXNpcyc6IHRydWUsXG4gICAgICAndGVycmFpbl9hbmFseXNpcyc6IHRydWUsXG4gICAgICAnZmxpZ2h0X3BhdGhfYW5hbHlzaXMnOiB0cnVlLFxuICAgICAgJ21lcmdlZF9hbmFseXNpcyc6IGZhbHNlLFxuICAgICAgJ2xvY2FsX3Bvd2VybGluZXMnOiBmYWxzZSxcbiAgICAgICdodl9wb3dlcmxpbmVzJzogdHJ1ZSxcbiAgICAgICdleHRlbmRlZF9ncmlkX3JhbmdlJzogZmFsc2UsXG4gICAgICAnaGlnaF9yZXNvbHV0aW9uX2dyaWQnOiBmYWxzZSxcbiAgICAgICdhaXJzcGFjZV9hbmFseXNpcyc6IHRydWUsXG4gICAgICAnbW9iaWxlX3Rvd2VyX2FuYWx5c2lzJzogZmFsc2UsXG4gICAgICAndHJlZV9oZWlnaHRzJzogZmFsc2VcbiAgICB9XG4gIH0sXG4gIFtUaWVyTGV2ZWwuQ09NTUVSQ0lBTF06IHtcbiAgICBuYW1lOiAnQ29tbWVyY2lhbCcsXG4gICAgbWF4TWFya2Vyczoge1xuICAgICAgZ2NzOiAxMCxcbiAgICAgIG9ic2VydmVyOiAxMCxcbiAgICAgIHJlcGVhdGVyOiAxMFxuICAgIH0sXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgZ3JpZFJhbmdlOiB7IG1pbjogMTAwLCBtYXg6IDUwMDAgfSxcbiAgICAgIGdyaWRTaXplOiB7IG1pbjogMSwgbWF4OiAxMDAgfSxcbiAgICAgIHN0YXRpb25Db3VudDogeyBtaW46IDAsIG1heDogMzAgfVxuICAgIH0sXG4gICAgZmVhdHVyZXM6IHtcbiAgICAgICdzdGF0aW9uX2FuYWx5c2lzJzogdHJ1ZSxcbiAgICAgICdzdGF0aW9uX2xvc19hbmFseXNpcyc6IHRydWUsXG4gICAgICAndGVycmFpbl9hbmFseXNpcyc6IHRydWUsXG4gICAgICAnZmxpZ2h0X3BhdGhfYW5hbHlzaXMnOiB0cnVlLFxuICAgICAgJ21lcmdlZF9hbmFseXNpcyc6IHRydWUsXG4gICAgICAnbG9jYWxfcG93ZXJsaW5lcyc6IHRydWUsXG4gICAgICAnaHZfcG93ZXJsaW5lcyc6IHRydWUsXG4gICAgICAnZXh0ZW5kZWRfZ3JpZF9yYW5nZSc6IHRydWUsXG4gICAgICAnaGlnaF9yZXNvbHV0aW9uX2dyaWQnOiB0cnVlLFxuICAgICAgJ2FpcnNwYWNlX2FuYWx5c2lzJzogdHJ1ZSxcbiAgICAgICdtb2JpbGVfdG93ZXJfYW5hbHlzaXMnOiB0cnVlLFxuICAgICAgJ3RyZWVfaGVpZ2h0cyc6IHRydWVcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGRlcml2ZSBGRUFUVVJFX1RJRVJfUkVRVUlSRU1FTlRTIGZyb20gVElFUl9DT05GSUdcbiAqIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW5jeSBiZXR3ZWVuIHJlcXVpcmVtZW50cyBhbmQgYWN0dWFsIHRpZXIgY2FwYWJpbGl0aWVzXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlRmVhdHVyZVRpZXJSZXF1aXJlbWVudHMoKTogUmVjb3JkPEZlYXR1cmVJZCwgVGllckxldmVsPiB7XG4gIGNvbnN0IHJlcXVpcmVtZW50czogUmVjb3JkPHN0cmluZywgVGllckxldmVsPiA9IHt9O1xuICBcbiAgLy8gSGFuZGxlIHJlZ3VsYXIgZmVhdHVyZXNcbiAgY29uc3QgYWxsRmVhdHVyZXMgPSBPYmplY3Qua2V5cyhUSUVSX0NPTkZJR1tUaWVyTGV2ZWwuQ09NTUVSQ0lBTF0uZmVhdHVyZXMpO1xuICBhbGxGZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgIC8vIEZpbmQgdGhlIGxvd2VzdCB0aWVyIHRoYXQgaGFzIHRoaXMgZmVhdHVyZVxuICAgIGZvciAobGV0IHRpZXIgPSBUaWVyTGV2ZWwuRlJFRTsgdGllciA8PSBUaWVyTGV2ZWwuQ09NTUVSQ0lBTDsgdGllcisrKSB7XG4gICAgICBpZiAoVElFUl9DT05GSUdbdGllcl0uZmVhdHVyZXNbZmVhdHVyZV0pIHtcbiAgICAgICAgcmVxdWlyZW1lbnRzW2ZlYXR1cmVdID0gdGllcjtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgXG4gIC8vIEhhbmRsZSBtYXJrZXIgdHlwZXNcbiAgY29uc3QgbWFya2VyVHlwZXMgPSBbJ2djcycsICdvYnNlcnZlcicsICdyZXBlYXRlciddIGFzIGNvbnN0O1xuICBtYXJrZXJUeXBlcy5mb3JFYWNoKG1hcmtlclR5cGUgPT4ge1xuICAgIGNvbnN0IGZlYXR1cmVJZCA9IGBhZGRfJHttYXJrZXJUeXBlfWA7XG4gICAgXG4gICAgLy8gRmluZCB0aGUgbG93ZXN0IHRpZXIgdGhhdCBhbGxvd3MgdGhpcyBtYXJrZXJcbiAgICBmb3IgKGxldCB0aWVyID0gVGllckxldmVsLkZSRUU7IHRpZXIgPD0gVGllckxldmVsLkNPTU1FUkNJQUw7IHRpZXIrKykge1xuICAgICAgaWYgKFRJRVJfQ09ORklHW3RpZXJdLm1heE1hcmtlcnNbbWFya2VyVHlwZV0gPiAwKSB7XG4gICAgICAgIHJlcXVpcmVtZW50c1tmZWF0dXJlSWRdID0gdGllcjtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgXG4gIHJldHVybiByZXF1aXJlbWVudHMgYXMgUmVjb3JkPEZlYXR1cmVJZCwgVGllckxldmVsPjtcbn1cblxuLyoqXG4gKiBGZWF0dXJlIHRpZXIgcmVxdWlyZW1lbnRzIC0gREVSSVZFRCBGUk9NIFRJRVJfQ09ORklHXG4gKiBUaGlzIGVuc3VyZXMgdGhlcmUgYXJlIG5vIGluY29uc2lzdGVuY2llcyBiZXR3ZWVuIHRpZXIgcmVxdWlyZW1lbnRzXG4gKiBhbmQgdGhlIGFjdHVhbCBjYXBhYmlsaXRpZXMgb2YgZWFjaCB0aWVyXG4gKi9cbmV4cG9ydCBjb25zdCBGRUFUVVJFX1RJRVJfUkVRVUlSRU1FTlRTID0gZ2VuZXJhdGVGZWF0dXJlVGllclJlcXVpcmVtZW50cygpO1xuXG4vKipcbiAqIFBhcmFtZXRlciBsaW1pdHMgLSBGT1IgQkFDS1dBUkRTIENPTVBBVElCSUxJVFlcbiAqIFRoZXNlIHZhbHVlcyBhcmUgbm93IGRpcmVjdGx5IGRlcml2ZWQgZnJvbSBUSUVSX0NPTkZJR1xuICovXG5leHBvcnQgY29uc3QgUEFSQU1FVEVSX0xJTUlUUyA9IHtcbiAgW1RpZXJMZXZlbC5GUkVFXTogVElFUl9DT05GSUdbVGllckxldmVsLkZSRUVdLnBhcmFtZXRlcnMsXG4gIFtUaWVyTGV2ZWwuQ09NTVVOSVRZXTogVElFUl9DT05GSUdbVGllckxldmVsLkNPTU1VTklUWV0ucGFyYW1ldGVycyxcbiAgW1RpZXJMZXZlbC5DT01NRVJDSUFMXTogVElFUl9DT05GSUdbVGllckxldmVsLkNPTU1FUkNJQUxdLnBhcmFtZXRlcnNcbn07Il0sIm5hbWVzIjpbIlRpZXJMZXZlbCIsIlRJRVJfQ09ORklHIiwiRlJFRSIsIm5hbWUiLCJtYXhNYXJrZXJzIiwiZ2NzIiwib2JzZXJ2ZXIiLCJyZXBlYXRlciIsInBhcmFtZXRlcnMiLCJncmlkUmFuZ2UiLCJtaW4iLCJtYXgiLCJncmlkU2l6ZSIsInN0YXRpb25Db3VudCIsImZlYXR1cmVzIiwiQ09NTVVOSVRZIiwiQ09NTUVSQ0lBTCIsImdlbmVyYXRlRmVhdHVyZVRpZXJSZXF1aXJlbWVudHMiLCJyZXF1aXJlbWVudHMiLCJhbGxGZWF0dXJlcyIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwiZmVhdHVyZSIsInRpZXIiLCJtYXJrZXJUeXBlcyIsIm1hcmtlclR5cGUiLCJmZWF0dXJlSWQiLCJGRUFUVVJFX1RJRVJfUkVRVUlSRU1FTlRTIiwiUEFSQU1FVEVSX0xJTUlUUyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/utils/premiumConfig.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/globals.css":
/*!*****************************!*\
  !*** ./src/app/globals.css ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"2e33382ae11f\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2dsb2JhbHMuY3NzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjO0FBQzdCLElBQUksS0FBVSxFQUFFLEVBQXVCIiwic291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9nbG9iYWxzLmNzcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIjJlMzMzODJhZTExZlwiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/globals.css\n");

/***/ }),

/***/ "(rsc)/./src/app/layout.tsx":
/*!****************************!*\
  !*** ./src/app/layout.tsx ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RootLayout),\n/* harmony export */   metadata: () => (/* binding */ metadata)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_font_google_target_css_path_src_app_layout_tsx_import_Ubuntu_arguments_subsets_latin_weight_300_400_500_700_variable_font_ubuntu_variableName_ubuntu___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/font/google/target.css?{\"path\":\"src/app/layout.tsx\",\"import\":\"Ubuntu\",\"arguments\":[{\"subsets\":[\"latin\"],\"weight\":[\"300\",\"400\",\"500\",\"700\"],\"variable\":\"--font-ubuntu\"}],\"variableName\":\"ubuntu\"} */ \"(rsc)/./node_modules/next/font/google/target.css?{\\\"path\\\":\\\"src/app/layout.tsx\\\",\\\"import\\\":\\\"Ubuntu\\\",\\\"arguments\\\":[{\\\"subsets\\\":[\\\"latin\\\"],\\\"weight\\\":[\\\"300\\\",\\\"400\\\",\\\"500\\\",\\\"700\\\"],\\\"variable\\\":\\\"--font-ubuntu\\\"}],\\\"variableName\\\":\\\"ubuntu\\\"}\");\n/* harmony import */ var next_font_google_target_css_path_src_app_layout_tsx_import_Ubuntu_arguments_subsets_latin_weight_300_400_500_700_variable_font_ubuntu_variableName_ubuntu___WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_font_google_target_css_path_src_app_layout_tsx_import_Ubuntu_arguments_subsets_latin_weight_300_400_500_700_variable_font_ubuntu_variableName_ubuntu___WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.css */ \"(rsc)/./src/app/globals.css\");\n\n\n\nconst metadata = {\n    title: \"Intel.Aero\",\n    description: \"Intelligent Mission Assurance For RPAS\"\n};\nfunction RootLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"en\",\n        className: (next_font_google_target_css_path_src_app_layout_tsx_import_Ubuntu_arguments_subsets_latin_weight_300_400_500_700_variable_font_ubuntu_variableName_ubuntu___WEBPACK_IMPORTED_MODULE_2___default().variable),\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n            className: \"antialiased\",\n            children: children\n        }, void 0, false, {\n            fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/layout.tsx\",\n            lineNumber: 23,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/kieranblair/git/fa/flight-assurance/src/app/layout.tsx\",\n        lineNumber: 22,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xheW91dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFJTUE7QUFGaUI7QUFRaEIsTUFBTUMsV0FBcUI7SUFDaENDLE9BQU87SUFDUEMsYUFBYTtBQUNmLEVBQUU7QUFFYSxTQUFTQyxXQUFXLEVBQ2pDQyxRQUFRLEVBR1I7SUFDQSxxQkFDRSw4REFBQ0M7UUFBS0MsTUFBSztRQUFLQyxXQUFXUiw0TUFBZTtrQkFDeEMsNEVBQUNVO1lBQUtGLFdBQVU7c0JBQWVIOzs7Ozs7Ozs7OztBQUdyQyIsInNvdXJjZXMiOlsiL1VzZXJzL2tpZXJhbmJsYWlyL2dpdC9mYS9mbGlnaHQtYXNzdXJhbmNlL3NyYy9hcHAvbGF5b3V0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE1ldGFkYXRhIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IFVidW50dSB9IGZyb20gXCJuZXh0L2ZvbnQvZ29vZ2xlXCI7XG5pbXBvcnQgXCIuL2dsb2JhbHMuY3NzXCI7XG5cbmNvbnN0IHVidW50dSA9IFVidW50dSh7XG4gIHN1YnNldHM6IFtcImxhdGluXCJdLFxuICB3ZWlnaHQ6IFtcIjMwMFwiLCBcIjQwMFwiLCBcIjUwMFwiLCBcIjcwMFwiXSwgLy8gVXNlIGRlc2lyZWQgZm9udCB3ZWlnaHRzXG4gIHZhcmlhYmxlOiBcIi0tZm9udC11YnVudHVcIixcbn0pO1xuXG5leHBvcnQgY29uc3QgbWV0YWRhdGE6IE1ldGFkYXRhID0ge1xuICB0aXRsZTogXCJJbnRlbC5BZXJvXCIsXG4gIGRlc2NyaXB0aW9uOiBcIkludGVsbGlnZW50IE1pc3Npb24gQXNzdXJhbmNlIEZvciBSUEFTXCIsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSb290TGF5b3V0KHtcbiAgY2hpbGRyZW4sXG59OiBSZWFkb25seTx7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59Pikge1xuICByZXR1cm4gKFxuICAgIDxodG1sIGxhbmc9XCJlblwiIGNsYXNzTmFtZT17dWJ1bnR1LnZhcmlhYmxlfT5cbiAgICAgIDxib2R5IGNsYXNzTmFtZT1cImFudGlhbGlhc2VkXCI+e2NoaWxkcmVufTwvYm9keT5cbiAgICA8L2h0bWw+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidWJ1bnR1IiwibWV0YWRhdGEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiUm9vdExheW91dCIsImNoaWxkcmVuIiwiaHRtbCIsImxhbmciLCJjbGFzc05hbWUiLCJ2YXJpYWJsZSIsImJvZHkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./src/app/page.tsx":
/*!**************************!*\
  !*** ./src/app/page.tsx ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-server-dom-webpack/server.edge */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-webpack-server-edge.js\");\n/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(\nfunction() { throw new Error(\"Attempted to call the default export of \\\"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\\\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n\"/Users/kieranblair/git/fa/flight-assurance/src/app/page.tsx\",\n\"default\",\n));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBIiwic291cmNlcyI6WyIvVXNlcnMva2llcmFuYmxhaXIvZ2l0L2ZhL2ZsaWdodC1hc3N1cmFuY2Uvc3JjL2FwcC9wYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIHBhZ2UudHN4IC0gT1BUSU1JWkVEIFZFUlNJT04gV0lUSCBMQVpZIExPQURJTkdcbiAqIFxuICogUHVycG9zZTpcbiAqIE1haW4gZW50cnkgcG9pbnQgZm9yIHRoZSBhcHBsaWNhdGlvbiwgb3JjaGVzdHJhdGluZyB0aGUgbGF5b3V0IGFuZCBzdGF0ZSBtYW5hZ2VtZW50XG4gKiBmb3IgbWFwLCBhbmFseXNpcyBwYW5lbHMsIGFuZCB2ZXJpZmljYXRpb24gdG9vbHMuIFdyYXBzIGNvbnRlbnQgd2l0aCBuZWNlc3NhcnkgcHJvdmlkZXJzLlxuICogXG4gKiBPcHRpbWl6YXRpb25zOlxuICogLSBMYXp5IGxvYWRlZCBoZWF2eSBhbmFseXNpcyBjb21wb25lbnRzIHRvIHJlZHVjZSBpbml0aWFsIGJ1bmRsZSBzaXplXG4gKiAtIExhenkgbG9hZGVkIG1vZGFsIGNvbXBvbmVudHMgdGhhdCBhcmVuJ3QgaW1tZWRpYXRlbHkgbmVlZGVkXG4gKiAtIEFkZGVkIFN1c3BlbnNlIGJvdW5kYXJpZXMgd2l0aCBsb2FkaW5nIHN0YXRlc1xuICogLSBLZXB0IGNvcmUgbWFwIGFuZCBjb250ZXh0IHByb3ZpZGVycyBpbiBtYWluIGJ1bmRsZSBmb3IgaW1tZWRpYXRlIGF2YWlsYWJpbGl0eVxuICovXG5cblwidXNlIGNsaWVudFwiO1xuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCBSZWFjdE5vZGUsIHVzZUVmZmVjdCwgU3VzcGVuc2UsIGxhenkgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBNYXAgZnJvbSBcIi4vY29tcG9uZW50cy9NYXBcIjtcbmltcG9ydCB7XG4gIEZsaWdodFBsYW5Qcm92aWRlcixcbiAgdXNlRmxpZ2h0UGxhbkNvbnRleHQsXG59IGZyb20gXCIuL2NvbnRleHQvRmxpZ2h0UGxhbkNvbnRleHRcIjtcbmltcG9ydCB7IHVzZUFyZWFPZk9wc0NvbnRleHQgfSBmcm9tIFwiLi9jb250ZXh0L0FyZWFPZk9wc0NvbnRleHRcIjtcbmltcG9ydCB7IE1hcmtlclByb3ZpZGVyIH0gZnJvbSBcIi4vY29udGV4dC9NYXJrZXJDb250ZXh0XCI7XG5pbXBvcnQgeyBMT1NBbmFseXNpc1Byb3ZpZGVyIH0gZnJvbSBcIi4vY29udGV4dC9MT1NBbmFseXNpc0NvbnRleHRcIjtcbmltcG9ydCB7IEZsaWdodENvbmZpZ3VyYXRpb25Qcm92aWRlciB9IGZyb20gXCIuL2NvbnRleHQvRmxpZ2h0Q29uZmlndXJhdGlvbkNvbnRleHRcIjtcbmltcG9ydCB7IEFyZWFPZk9wc1Byb3ZpZGVyIH0gZnJvbSBcIi4vY29udGV4dC9BcmVhT2ZPcHNDb250ZXh0XCI7XG5pbXBvcnQgeyBDaGVja2xpc3RQcm92aWRlciB9IGZyb20gXCIuL2NvbnRleHQvQ2hlY2tsaXN0Q29udGV4dFwiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4vY29tcG9uZW50cy9VSS9DYXJkXCI7XG5pbXBvcnQgeyBPYnN0YWNsZUFuYWx5c2lzUHJvdmlkZXIgfSBmcm9tIFwiLi9jb250ZXh0L09ic3RhY2xlQW5hbHlzaXNDb250ZXh0XCI7XG5pbXBvcnQgTWFwU2lkZVBhbmVsIGZyb20gXCIuL2NvbXBvbmVudHMvVUkvTWFwU2lkZVBhbmVsXCI7XG5pbXBvcnQgeyBCYXR0ZXJ5LCBSYWRpbywgTW91bnRhaW4sIE1hcFBpbiwgU2VhcmNoLCBMb2FkZXIyIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuaW1wb3J0IHsgdHJhY2tFdmVudFdpdGhGb3JtIGFzIHRyYWNrRXZlbnQgfSBmcm9tIFwiLi9jb21wb25lbnRzL3RyYWNraW5nL3RyYWNraW5nXCI7XG5pbXBvcnQgeyBNYXBQcm92aWRlciB9IGZyb20gXCIuL2NvbnRleHQvbWFwY29udGV4dFwiO1xuaW1wb3J0IHsgQW5hbHlzaXNDb250cm9sbGVyUHJvdmlkZXIsIHVzZUFuYWx5c2lzQ29udHJvbGxlciB9IGZyb20gXCIuL2NvbnRleHQvQW5hbHlzaXNDb250cm9sbGVyQ29udGV4dFwiO1xuaW1wb3J0ICdtYXBib3gtZ2wvZGlzdC9tYXBib3gtZ2wuY3NzJztcbmltcG9ydCBJbWFnZSBmcm9tIFwibmV4dC9pbWFnZVwiO1xuaW1wb3J0IFJlbG9hZEJ1dHRvbiBmcm9tIFwiLi9jb21wb25lbnRzL1VJL1JlbG9hZEJ1dHRvblwiO1xuXG4vL3BheW1lbnQgYW5kIHByZW1pdW0gYWNjZXNzXG5pbXBvcnQgeyBQcmVtaXVtUHJvdmlkZXIgfSBmcm9tIFwiLi9jb250ZXh0L1ByZW1pdW1Db250ZXh0XCI7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIExBWlkgTE9BREVEIENPTVBPTkVOVFNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEhlYXZ5IGFuYWx5c2lzIGNvbXBvbmVudHMgLSBvbmx5IGxvYWRlZCB3aGVuIHBhbmVscyBhcmUgb3BlbmVkXG5jb25zdCBPYnN0YWNsZUFuYWx5c2lzRGFzaGJvYXJkID0gbGF6eSgoKSA9PiBpbXBvcnQoXCIuL2NvbXBvbmVudHMvQW5hbHlzZXMvT2JzdGFjbGVBbmFseXNpcy9UZXJyYWluQW5hbHlzaXNEYXNoYm9hcmRcIikpO1xuY29uc3QgQW5hbHlzaXNEYXNoYm9hcmQgPSBsYXp5KCgpID0+IGltcG9ydChcIi4vY29tcG9uZW50cy9BbmFseXNlcy9MT1NBbmFseXNlcy9VSS9WaXNpYmlsaXR5QW5hbHlzaXNEYXNoYm9hcmRcIikpO1xuY29uc3QgQ2FsY3VsYXRvciA9IGxhenkoKCkgPT4gaW1wb3J0KFwiLi9jb21wb25lbnRzL0NhbGN1bGF0b3JcIikpO1xuXG4vLyBNb2RhbC9vdmVybGF5IGNvbXBvbmVudHMgLSBvbmx5IGxvYWRlZCB3aGVuIG5lZWRlZFxuY29uc3QgQW5hbHlzaXNXaXphcmQgPSBsYXp5KCgpID0+IGltcG9ydChcIi4vY29tcG9uZW50cy9BbmFseXNpc1dpemFyZFwiKSk7XG5jb25zdCBGbGlnaHRQbGFuVXBsb2FkZXIgPSBsYXp5KCgpID0+IGltcG9ydChcIi4vY29tcG9uZW50cy9GbGlnaHRQbGFuVXBsb2FkZXJcIikpO1xuY29uc3QgQXJlYU9wc1VwbG9hZGVyID0gbGF6eSgoKSA9PiBpbXBvcnQoXCIuL2NvbXBvbmVudHMvQU8vQXJlYU9wc1VwbG9hZGVyXCIpKTtcbmNvbnN0IFVwZ3JhZGVNb2RhbCA9IGxhenkoKCkgPT4gaW1wb3J0KFwiLi9jb21wb25lbnRzL1VJL1VwZ3JhZGVNb2RhbFwiKSk7XG5jb25zdCBNYXJrZXJMb2NhdGlvbnNNb2RhbCA9IGxhenkoKCkgPT4gaW1wb3J0KFwiLi9jb21wb25lbnRzL1VJL01hcmtlckxvY2F0aW9uc01vZGFsXCIpKTtcblxuLy8gQ29uZGl0aW9uYWwgVUkgY29tcG9uZW50c1xuY29uc3QgQ2hlY2tsaXN0Q29tcG9uZW50ID0gbGF6eSgoKSA9PiBpbXBvcnQoXCIuL2NvbXBvbmVudHMvQ2hlY2tsaXN0Q29tcG9uZW50XCIpKTtcbmNvbnN0IFdlbGNvbWVNZXNzYWdlID0gbGF6eSgoKSA9PiBpbXBvcnQoXCIuL2NvbXBvbmVudHMvV2VsY29tZU1lc3NhZ2VcIikpO1xuY29uc3QgTWFwU2VsZWN0aW9uUGFuZWwgPSBsYXp5KCgpID0+IGltcG9ydChcIi4vY29tcG9uZW50cy9BTy9NYXBTZWxlY3Rpb25QYW5lbFwiKSk7XG5jb25zdCBUb29sc0Rhc2hib2FyZCA9IGxhenkoKCkgPT4gaW1wb3J0KFwiLi9jb21wb25lbnRzL1ZlcmlmaWNhdGlvblRvb2xiYXIvVG9vbHNEYXNoYm9hcmRcIikpO1xuXG4vLyBIZWF2eSBzdWItY29tcG9uZW50cyB3aXRoaW4gVG9vbHNEYXNoYm9hcmQgdGhhdCBjYW4gYmUgcHJlbG9hZGVkXG5jb25zdCBDb21wYWN0RGlzY2xhaW1lcldpZGdldCA9IGxhenkoKCkgPT4gaW1wb3J0KFwiLi9jb21wb25lbnRzL0NvbXBhY3REaXNjbGFpbWVyV2lkZ2V0XCIpKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTE9BRElORyBDT01QT05FTlRTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vKipcbiAqIExvYWRpbmcgc3Bpbm5lciBmb3IgYW5hbHlzaXMgcGFuZWxzXG4gKi9cbmNvbnN0IEFuYWx5c2lzTG9hZGluZ1NwaW5uZXI6IFJlYWN0LkZDID0gKCkgPT4gKFxuICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtOFwiPlxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cInctNiBoLTYgYW5pbWF0ZS1zcGluIHRleHQtYmx1ZS02MDBcIiAvPlxuICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwXCI+TG9hZGluZyBhbmFseXNpcyB0b29scy4uLjwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4pO1xuXG4vKipcbiAqIExvYWRpbmcgcGxhY2Vob2xkZXIgZm9yIG1vZGFsc1xuICovXG5jb25zdCBNb2RhbExvYWRpbmdQbGFjZWhvbGRlcjogUmVhY3QuRkMgPSAoKSA9PiAoXG4gIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCBiZy1ibGFjay81MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB6LTUwXCI+XG4gICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBwLTQgcm91bmRlZC1sZ1wiPlxuICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwidy02IGgtNiBhbmltYXRlLXNwaW4gdGV4dC1ibHVlLTYwMFwiIC8+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuKTtcblxuLyoqXG4gKiBNYWluIGNvbnRlbnQgY29tcG9uZW50IGZvciB0aGUgaG9tZSBwYWdlLCBtYW5hZ2luZyBVSSBsYXlvdXQgYW5kIHVwbG9hZGVyL3dpemFyZCBvdmVybGF5c1xuICovXG5jb25zdCBIb21lQ29udGVudCA9ICgpID0+IHtcbiAgY29uc3QgW2FjdGl2ZVBhbmVsLCBzZXRBY3RpdmVQYW5lbF0gPSB1c2VTdGF0ZTxcImVuZXJneVwiIHwgXCJsb3NcIiB8IFwidGVycmFpblwiIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpbml0aWFsU2VjdGlvbiwgc2V0SW5pdGlhbFNlY3Rpb25dID0gdXNlU3RhdGU8J2ZsaWdodCcgfCAnc3RhdGlvbicgfCAnbWVyZ2VkJyB8ICdzdGF0aW9uTE9TJyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2hvd1VwbG9hZGVyLCBzZXRTaG93VXBsb2FkZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0FyZWFPcHNVcGxvYWRlciwgc2V0U2hvd0FyZWFPcHNVcGxvYWRlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93V2l6YXJkLCBzZXRTaG93V2l6YXJkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dXZWxjb21lTWVzc2FnZSwgc2V0U2hvd1dlbGNvbWVNZXNzYWdlXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbc2hvd0NoZWNrbGlzdCwgc2V0U2hvd0NoZWNrbGlzdF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHsgZmxpZ2h0UGxhbiwgc2V0RmxpZ2h0UGxhbiB9ID0gdXNlRmxpZ2h0UGxhbkNvbnRleHQoKTtcbiAgY29uc3QgeyBhb0dlb21ldHJ5IH0gPSB1c2VBcmVhT2ZPcHNDb250ZXh0KCk7XG4gIGNvbnN0IHsgc2hvd01hcmtlckxvY2F0aW9uc01vZGFsLCBzZXRTaG93TWFya2VyTG9jYXRpb25zTW9kYWwgfSA9IHVzZUFuYWx5c2lzQ29udHJvbGxlcigpO1xuXG4gIGNvbnN0IFtpc01hcFNlbGVjdGlvbk1vZGUsIHNldElzTWFwU2VsZWN0aW9uTW9kZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFttYXBTZWxlY3Rpb25Nb2RlLCBzZXRNYXBTZWxlY3Rpb25Nb2RlXSA9IHVzZVN0YXRlPFwibWFwXCIgfCBcInNlYXJjaFwiPihcIm1hcFwiKTtcblxuICAvKipcbiAgICogVG9nZ2xlcyB0aGUgYWN0aXZlIGFuYWx5c2lzIHBhbmVsIGFuZCBzZXRzIGluaXRpYWwgc2VjdGlvblxuICAgKiBAcGFyYW0gcGFuZWwgLSBUaGUgcGFuZWwgdG8gdG9nZ2xlXG4gICAqIEBwYXJhbSBzZWN0aW9uIC0gT3B0aW9uYWwgc2VjdGlvbiB0byBleHBhbmQgaW4gQW5hbHlzaXNEYXNoYm9hcmRcbiAgICovXG4gIGNvbnN0IHRvZ2dsZVBhbmVsID0gKHBhbmVsOiBcImVuZXJneVwiIHwgXCJsb3NcIiB8IFwidGVycmFpblwiIHwgbnVsbCwgc2VjdGlvbj86ICdmbGlnaHQnIHwgJ3N0YXRpb24nIHwgJ21lcmdlZCcgfCAnc3RhdGlvbkxPUycgfCBudWxsKSA9PiB7XG4gICAgc2V0QWN0aXZlUGFuZWwoKHByZXYpID0+IChwcmV2ID09PSBwYW5lbCA/IG51bGwgOiBwYW5lbCkpO1xuICAgIHNldEluaXRpYWxTZWN0aW9uKHBhbmVsID09PSAnbG9zJyA/IHNlY3Rpb24gfHwgbnVsbCA6IG51bGwpO1xuICAgIHRyYWNrRXZlbnQoXCJ0b2dnbGVfYW5hbHlzaXNfcGFuZWxcIiwgeyBwYW5lbCwgc2VjdGlvbiB9KTtcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlcyBvcGVuaW5nIHRoZSBBcmVhIG9mIE9wZXJhdGlvbnMgdXBsb2FkZXJcbiAgICovXG4gIGNvbnN0IGhhbmRsZUFyZWFPcHMgPSAoKSA9PiB7XG4gICAgc2V0U2hvd0FyZWFPcHNVcGxvYWRlcih0cnVlKTtcbiAgICB0cmFja0V2ZW50KCdhcmVhX29wc191cGxvYWRlcl9vcGVuZWQnLCB7fSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgb3BlbmluZyB0aGUgd2l6YXJkXG4gICAqL1xuICBjb25zdCBoYW5kbGVXaXphcmQgPSAoKSA9PiB7XG4gICAgc2V0U2hvd1dpemFyZCh0cnVlKTtcbiAgICBzZXRTaG93V2VsY29tZU1lc3NhZ2UoZmFsc2UpO1xuICAgIHRyYWNrRXZlbnQoJ3dpemFyZF9vcGVuZWQnLCB7fSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgY2hlY2tsaXN0IG92ZXJsYXlcbiAgICovXG4gIGNvbnN0IGhhbmRsZUNsb3NlQ2hlY2tsaXN0ID0gKCkgPT4ge1xuICAgIHNldFNob3dDaGVja2xpc3QoZmFsc2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFZmZlY3QgdG8gc2hvdyBjaGVja2xpc3Qgd2hlbiB3aXphcmQgY2xvc2VzIGFuZCB1cGxvYWQgaXMgY29tcGxldGVcbiAgICovXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKChmbGlnaHRQbGFuIHx8IGFvR2VvbWV0cnkpICYmICFzaG93V2l6YXJkICYmICFzaG93VXBsb2FkZXIgJiYgIXNob3dBcmVhT3BzVXBsb2FkZXIpIHtcbiAgICAgIHNldFNob3dDaGVja2xpc3QodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFNob3dDaGVja2xpc3QoZmFsc2UpO1xuICAgIH1cbiAgfSwgW2ZsaWdodFBsYW4sIGFvR2VvbWV0cnksIHNob3dXaXphcmQsIHNob3dVcGxvYWRlciwgc2hvd0FyZWFPcHNVcGxvYWRlcl0pO1xuXG4gIC8vIEFkZCBoYW5kbGVycyBmb3IgbWFwIHNlbGVjdGlvblxuICAvKipcbiAgICogU3RhcnRzIG1hcCBzZWxlY3Rpb24gbW9kZVxuICAgKi9cbiAgY29uc3QgaGFuZGxlU3RhcnRNYXBTZWxlY3Rpb24gPSAobW9kZTogXCJtYXBcIiB8IFwic2VhcmNoXCIpID0+IHtcbiAgICBzZXRJc01hcFNlbGVjdGlvbk1vZGUodHJ1ZSk7XG4gICAgc2V0TWFwU2VsZWN0aW9uTW9kZShtb2RlKTtcbiAgICBzZXRTaG93V2l6YXJkKGZhbHNlKTtcbiAgICB0cmFja0V2ZW50KCdtYXBfc2VsZWN0aW9uX3N0YXJ0ZWQnLCB7IG1vZGUgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbXBsZXRlcyBtYXAgc2VsZWN0aW9uXG4gICAqL1xuICBjb25zdCBoYW5kbGVNYXBTZWxlY3Rpb25Db21wbGV0ZSA9ICgpID0+IHtcbiAgICBzZXRJc01hcFNlbGVjdGlvbk1vZGUoZmFsc2UpO1xuICAgIHRyYWNrRXZlbnQoJ21hcF9zZWxlY3Rpb25fY29tcGxldGVkJywge30pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYW5jZWxzIG1hcCBzZWxlY3Rpb25cbiAgICovXG4gIGNvbnN0IGhhbmRsZU1hcFNlbGVjdGlvbkNhbmNlbCA9ICgpID0+IHtcbiAgICBzZXRJc01hcFNlbGVjdGlvbk1vZGUoZmFsc2UpO1xuICAgIHNldFNob3dXaXphcmQodHJ1ZSk7XG4gICAgdHJhY2tFdmVudCgnbWFwX3NlbGVjdGlvbl9jYW5jZWxsZWQnLCB7fSk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBmbGV4IGZsZXgtY29sIGJnLXdoaXRlIG92ZXJmbG93LXgtaGlkZGVuXCI+XG4gICAgICB7LyogTWFpbiBDb250ZW50IEFyZWEgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSB3LWZ1bGwgaC1mdWxsXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXJvdyBoLWZ1bGwgcmVsYXRpdmVcIj5cbiAgICAgICAgICB7LyogTWFwIFNlY3Rpb24gKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LWdyb3cgcmVsYXRpdmUgaC1mdWxsXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGgtZnVsbCByb3VuZGVkLXItbGcgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgIDxNYXBcbiAgICAgICAgICAgICAgICBhY3RpdmVQYW5lbD17YWN0aXZlUGFuZWx9XG4gICAgICAgICAgICAgICAgdG9nZ2xlUGFuZWw9e3RvZ2dsZVBhbmVsfVxuICAgICAgICAgICAgICAgIGZsaWdodFBsYW49e2ZsaWdodFBsYW59XG4gICAgICAgICAgICAgICAgc2V0U2hvd1VwbG9hZGVyPXtzZXRTaG93VXBsb2FkZXJ9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIHsvKiBXZWxjb21lIE1lc3NhZ2UgT3ZlcmxheSAqL31cbiAgICAgICAgICAgICAgeyghc2hvd1VwbG9hZGVyICYmICFzaG93QXJlYU9wc1VwbG9hZGVyICYmICFzaG93V2l6YXJkICYmIHNob3dXZWxjb21lTWVzc2FnZSAmJiAhZmxpZ2h0UGxhbiAmJiAhYW9HZW9tZXRyeSkgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy1ibGFjay81MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB6LTIwIHAtMlwiPlxuICAgICAgICAgICAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8TW9kYWxMb2FkaW5nUGxhY2Vob2xkZXIgLz59PlxuICAgICAgICAgICAgICAgICAgICA8V2VsY29tZU1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICBvbkdldFN0YXJ0ZWQ9e2hhbmRsZVdpemFyZH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRTaG93V2VsY29tZU1lc3NhZ2UoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9TdXNwZW5zZT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgey8qIFdpemFyZCBPdmVybGF5ICovfVxuICAgICAgICAgICAgICB7KCFzaG93VXBsb2FkZXIgJiYgIXNob3dBcmVhT3BzVXBsb2FkZXIgJiYgc2hvd1dpemFyZCAmJiAhZmxpZ2h0UGxhbiAmJiAhYW9HZW9tZXRyeSkgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy1ibGFjay81MCBmbGV4IGl0ZW1zLXN0YXJ0IGp1c3RpZnktY2VudGVyIHotMjAgcC00IG92ZXJmbG93LXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBwLTIgcm91bmRlZC1sZyBzaGFkb3ctbGcgdy1mdWxsIG1heC13LTN4bFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIG14LTQgbXQtNCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmM9XCIvTG9nb25vYmFja2dybmQucG5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsdD1cIkludGVsLkFlcm8gTmFtZSBMb2dvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXs2MH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17MjR9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBvYmplY3RGaXQ6IFwiY29udGFpblwiIH19XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkXCI+U3RhcnQgSGVyZTwvaDM+XG5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PEFuYWx5c2lzTG9hZGluZ1NwaW5uZXIgLz59PlxuICAgICAgICAgICAgICAgICAgICAgIDxBbmFseXNpc1dpemFyZCBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNob3dXaXphcmQoZmFsc2UpfSBcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhcnRNYXBTZWxlY3Rpb249e2hhbmRsZVN0YXJ0TWFwU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgb25TaG93QXJlYU9wc1VwbG9hZGVyPXsoKSA9PiBzZXRTaG93QXJlYU9wc1VwbG9hZGVyKHRydWUpfVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvU3VzcGVuc2U+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge3Nob3dVcGxvYWRlciAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLWJsYWNrLzUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotMjAgcC0yXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHAtMiByb3VuZGVkLWxnIHNoYWRvdy1sZyB3LWZ1bGwgbWF4LXctNXhsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItMlwiPkZsaWdodCBQbGFuIFVwbG9hZDwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PEFuYWx5c2lzTG9hZGluZ1NwaW5uZXIgLz59PlxuICAgICAgICAgICAgICAgICAgICAgIDxGbGlnaHRQbGFuVXBsb2FkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNob3dVcGxvYWRlcihmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblBsYW5VcGxvYWRlZD17KGZsaWdodERhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2hvd1VwbG9hZGVyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9TdXNwZW5zZT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7c2hvd0FyZWFPcHNVcGxvYWRlciAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLWJsYWNrLzUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotMjAgcC0yXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHAtMiByb3VuZGVkLWxnIHNoYWRvdy1sZyB3LWZ1bGwgbWF4LXctNXhsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItMlwiPkFyZWEgb2YgT3BlcmF0aW9ucyBVcGxvYWQ8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8U3VzcGVuc2UgZmFsbGJhY2s9ezxBbmFseXNpc0xvYWRpbmdTcGlubmVyIC8+fT5cbiAgICAgICAgICAgICAgICAgICAgICA8QXJlYU9wc1VwbG9hZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRTaG93QXJlYU9wc1VwbG9hZGVyKGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L1N1c3BlbnNlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBSaWdodCBTaWRlYmFyOiBDaGVja2xpc3QgYW5kIFBsYW4gVmVyaWZpY2F0aW9uICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy04MCBoLWZ1bGwgc2hyaW5rLTAgbWF4LWgtc2NyZWVuIG92ZXJmbG93LXktYXV0byBmbGV4IHAtMSBtci0yIGZsZXgtY29sIGdhcC00IHBiLTRcIj5cbiAgICAgICAgICAgIHsvKiBQbGFuIFZlcmlmaWNhdGlvbiBTZWN0aW9uICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgei0wXCI+XG4gICAgICAgICAgICAgIDxDYXJkIGNsYXNzTmFtZT1cInctZnVsbCByb3VuZGVkLWwteGxcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNCBoLWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPlRlcnJhaW4gYW5kIFZpc2liaWxpdHkgVG9vbGJhcjwvaDM+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8QW5hbHlzaXNMb2FkaW5nU3Bpbm5lciAvPn0+XG4gICAgICAgICAgICAgICAgICAgICAgPFRvb2xzRGFzaGJvYXJkIG9uVG9nZ2xlUGFuZWw9e3RvZ2dsZVBhbmVsfSAvPlxuICAgICAgICAgICAgICAgICAgICA8L1N1c3BlbnNlPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7LyogTWFwIFNlbGVjdGlvbiBQYW5lbCAtIE9ubHkgc2hvd24gd2hlbiBpbiBtYXAgc2VsZWN0aW9uIG1vZGUgKi99XG4gICAgICAgICAgICB7aXNNYXBTZWxlY3Rpb25Nb2RlICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgei0xMFwiPlxuICAgICAgICAgICAgICAgIDxDYXJkIGNsYXNzTmFtZT1cInctZnVsbCByb3VuZGVkLWwteGxcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zIGgtZnVsbCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7bWFwU2VsZWN0aW9uTW9kZSA9PT0gXCJtYXBcIiA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxNYXBQaW4gY2xhc3NOYW1lPVwidy01IGgtNSB0ZXh0LWJsdWUtNjAwXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0IEFyZWEgb24gTWFwXG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlYXJjaCBjbGFzc05hbWU9XCJ3LTUgaC01IHRleHQtYmx1ZS02MDBcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBTZWFyY2ggTG9jYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PEFuYWx5c2lzTG9hZGluZ1NwaW5uZXIgLz59PlxuICAgICAgICAgICAgICAgICAgICAgICAgPE1hcFNlbGVjdGlvblBhbmVsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlPXttYXBTZWxlY3Rpb25Nb2RlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlPXtoYW5kbGVNYXBTZWxlY3Rpb25Db21wbGV0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DYW5jZWw9e2hhbmRsZU1hcFNlbGVjdGlvbkNhbmNlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9TdXNwZW5zZT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgey8qIENoZWNrbGlzdCBTZWN0aW9uICovfVxuICAgICAgICAgICAgeyhmbGlnaHRQbGFuIHx8IGFvR2VvbWV0cnkpICYmICFzaG93V2l6YXJkICYmICFzaG93VXBsb2FkZXIgJiYgIXNob3dBcmVhT3BzVXBsb2FkZXIgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCByZWxhdGl2ZSB6LTEwXCI+XG4gICAgICAgICAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8QW5hbHlzaXNMb2FkaW5nU3Bpbm5lciAvPn0+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tsaXN0Q29tcG9uZW50IGNsYXNzTmFtZT1cInJlbGF0aXZlXCIgdG9nZ2xlUGFuZWw9e3RvZ2dsZVBhbmVsfSAvPlxuICAgICAgICAgICAgICAgIDwvU3VzcGVuc2U+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX0gICAgICAgICAgICBcbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBBbmFseXNpcyBQYW5lbHMgLSBXSVRIIExBWlkgTE9BRElORyAqL31cbiAgICAgICAgICA8TWFwU2lkZVBhbmVsXG4gICAgICAgICAgICB0aXRsZT1cIkVuZXJneSBBbmFseXNpc1wiXG4gICAgICAgICAgICBpY29uPXs8QmF0dGVyeSBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz59XG4gICAgICAgICAgICBpc0V4cGFuZGVkPXthY3RpdmVQYW5lbCA9PT0gXCJlbmVyZ3lcIn1cbiAgICAgICAgICAgIG9uVG9nZ2xlPXsoKSA9PiB0b2dnbGVQYW5lbChcImVuZXJneVwiKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInotMzBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PEFuYWx5c2lzTG9hZGluZ1NwaW5uZXIgLz59PlxuICAgICAgICAgICAgICA8Q2FsY3VsYXRvciAvPlxuICAgICAgICAgICAgPC9TdXNwZW5zZT5cbiAgICAgICAgICA8L01hcFNpZGVQYW5lbD5cblxuICAgICAgICAgIDxNYXBTaWRlUGFuZWxcbiAgICAgICAgICAgIHRpdGxlPVwiVmlzaWJpbGl0eSBhbmQgQ29tbXMgVG9vbHNcIlxuICAgICAgICAgICAgaWNvbj17PFJhZGlvIGNsYXNzTmFtZT1cInctNSBoLTVcIiAvPn1cbiAgICAgICAgICAgIGlzRXhwYW5kZWQ9e2FjdGl2ZVBhbmVsID09PSBcImxvc1wifVxuICAgICAgICAgICAgb25Ub2dnbGU9eygpID0+IHRvZ2dsZVBhbmVsKFwibG9zXCIpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiei0zMFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8QW5hbHlzaXNMb2FkaW5nU3Bpbm5lciAvPn0+XG4gICAgICAgICAgICAgIDxBbmFseXNpc0Rhc2hib2FyZCBpbml0aWFsU2VjdGlvbj17aW5pdGlhbFNlY3Rpb259IC8+XG4gICAgICAgICAgICA8L1N1c3BlbnNlPlxuICAgICAgICAgIDwvTWFwU2lkZVBhbmVsPlxuXG4gICAgICAgICAgPE1hcFNpZGVQYW5lbFxuICAgICAgICAgICAgdGl0bGU9XCJUZXJyYWluIEFuYWx5c2lzIFRvb2xzXCJcbiAgICAgICAgICAgIGljb249ezxNb3VudGFpbiBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz59XG4gICAgICAgICAgICBpc0V4cGFuZGVkPXthY3RpdmVQYW5lbCA9PT0gXCJ0ZXJyYWluXCJ9XG4gICAgICAgICAgICBvblRvZ2dsZT17KCkgPT4gdG9nZ2xlUGFuZWwoXCJ0ZXJyYWluXCIpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiei0zMFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8QW5hbHlzaXNMb2FkaW5nU3Bpbm5lciAvPn0+XG4gICAgICAgICAgICAgIDxPYnN0YWNsZUFuYWx5c2lzRGFzaGJvYXJkIC8+XG4gICAgICAgICAgICA8L1N1c3BlbnNlPlxuICAgICAgICAgIDwvTWFwU2lkZVBhbmVsPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuLyoqXG4gKiBXcmFwcGVyIGNvbXBvbmVudCBmb3IgdGhlIE1hcmtlckxvY2F0aW9uc01vZGFsIC0gV0lUSCBMQVpZIExPQURJTkdcbiAqIFRoaXMgZW5zdXJlcyB0aGUgbW9kYWwgaGFzIGFjY2VzcyB0byBhbGwgbmVjZXNzYXJ5IGNvbnRleHRcbiAqIGFuZCBpcyByZW5kZXJlZCBhdCB0aGUgYXBwbGljYXRpb24gbGV2ZWxcbiAqL1xuY29uc3QgTWFya2VyTG9jYXRpb25zTW9kYWxXcmFwcGVyOiBSZWFjdC5GQyA9ICgpID0+IHtcbiAgY29uc3QgeyBzaG93TWFya2VyTG9jYXRpb25zTW9kYWwsIHNldFNob3dNYXJrZXJMb2NhdGlvbnNNb2RhbCB9ID0gdXNlQW5hbHlzaXNDb250cm9sbGVyKCk7XG4gIFxuICBpZiAoIXNob3dNYXJrZXJMb2NhdGlvbnNNb2RhbCkgcmV0dXJuIG51bGw7XG4gIFxuICByZXR1cm4gKFxuICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PE1vZGFsTG9hZGluZ1BsYWNlaG9sZGVyIC8+fT5cbiAgICAgIDxNYXJrZXJMb2NhdGlvbnNNb2RhbFxuICAgICAgICBpc09wZW49e3Nob3dNYXJrZXJMb2NhdGlvbnNNb2RhbH1cbiAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0U2hvd01hcmtlckxvY2F0aW9uc01vZGFsKGZhbHNlKX1cbiAgICAgIC8+XG4gICAgPC9TdXNwZW5zZT5cbiAgKTtcbn07XG5cbi8qKlxuICogTGF6eS1sb2FkZWQgVXBncmFkZU1vZGFsIHdyYXBwZXJcbiAqL1xuY29uc3QgVXBncmFkZU1vZGFsV3JhcHBlcjogUmVhY3QuRkMgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgPFN1c3BlbnNlIGZhbGxiYWNrPXtudWxsfT5cbiAgICAgIDxVcGdyYWRlTW9kYWwgLz5cbiAgICA8L1N1c3BlbnNlPlxuICApO1xufTtcblxuLyoqXG4gKiBIb21lIHBhZ2UgY29tcG9uZW50LCB3cmFwcGluZyBjb250ZW50IHdpdGggbmVjZXNzYXJ5IHByb3ZpZGVyc1xuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIb21lKCkge1xuICByZXR1cm4gKFxuICAgIDxNYXBQcm92aWRlcj5cbiAgICAgIDxBbmFseXNpc0NvbnRyb2xsZXJQcm92aWRlcj4gXG4gICAgICAgIDxBcmVhT2ZPcHNQcm92aWRlcj5cbiAgICAgICAgICA8RmxpZ2h0UGxhblByb3ZpZGVyPlxuICAgICAgICAgICAgPEZsaWdodENvbmZpZ3VyYXRpb25Qcm92aWRlcj5cbiAgICAgICAgICAgICAgPFByZW1pdW1Qcm92aWRlcj5cbiAgICAgICAgICAgICAgICA8TWFya2VyUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgICA8TE9TQW5hbHlzaXNQcm92aWRlcj5cbiAgICAgICAgICAgICAgICAgICAgPE9ic3RhY2xlQW5hbHlzaXNQcm92aWRlcj5cbiAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tsaXN0UHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SG9tZUNvbnRlbnQgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxVcGdyYWRlTW9kYWxXcmFwcGVyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TWFya2VyTG9jYXRpb25zTW9kYWxXcmFwcGVyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9DaGVja2xpc3RQcm92aWRlcj5cbiAgICAgICAgICAgICAgICAgICAgPC9PYnN0YWNsZUFuYWx5c2lzUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgICA8L0xPU0FuYWx5c2lzUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgPC9NYXJrZXJQcm92aWRlcj5cbiAgICAgICAgICAgICAgPC9QcmVtaXVtUHJvdmlkZXI+XG4gICAgICAgICAgICA8L0ZsaWdodENvbmZpZ3VyYXRpb25Qcm92aWRlcj5cbiAgICAgICAgICA8L0ZsaWdodFBsYW5Qcm92aWRlcj5cbiAgICAgICAgPC9BcmVhT2ZPcHNQcm92aWRlcj5cbiAgICAgIDwvQW5hbHlzaXNDb250cm9sbGVyUHJvdmlkZXI+XG4gICAgPC9NYXBQcm92aWRlcj5cbiAgKTtcbn0iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/page.tsx\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-metadata-image-loader.js?type=favicon&segment=&basePath=&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js!./src/app/favicon.ico?__next_metadata__":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-metadata-image-loader.js?type=favicon&segment=&basePath=&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js!./src/app/favicon.ico?__next_metadata__ ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_dist_lib_metadata_get_metadata_route__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/lib/metadata/get-metadata-route */ \"(rsc)/./node_modules/next/dist/lib/metadata/get-metadata-route.js\");\n/* harmony import */ var next_dist_lib_metadata_get_metadata_route__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_metadata_get_metadata_route__WEBPACK_IMPORTED_MODULE_0__);\n  \n\n  /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (props) => {\n    const imageData = {\"type\":\"image/x-icon\",\"sizes\":\"128x128\"}\n    const imageUrl = (0,next_dist_lib_metadata_get_metadata_route__WEBPACK_IMPORTED_MODULE_0__.fillMetadataSegment)(\".\", await props.params, \"favicon.ico\")\n\n    return [{\n      ...imageData,\n      url: imageUrl + \"\",\n    }]\n  });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LW1ldGFkYXRhLWltYWdlLWxvYWRlci5qcz90eXBlPWZhdmljb24mc2VnbWVudD0mYmFzZVBhdGg9JnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMhLi9zcmMvYXBwL2Zhdmljb24uaWNvP19fbmV4dF9tZXRhZGF0YV9fIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLEVBQWlGOztBQUVqRixFQUFFLGlFQUFlO0FBQ2pCLHVCQUF1QjtBQUN2QixxQkFBcUIsOEZBQW1COztBQUV4QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wiLCJzb3VyY2VzIjpbIi9Vc2Vycy9raWVyYW5ibGFpci9naXQvZmEvZmxpZ2h0LWFzc3VyYW5jZS9zcmMvYXBwL2Zhdmljb24uaWNvP19fbmV4dF9tZXRhZGF0YV9fIl0sInNvdXJjZXNDb250ZW50IjpbIiAgaW1wb3J0IHsgZmlsbE1ldGFkYXRhU2VnbWVudCB9IGZyb20gJ25leHQvZGlzdC9saWIvbWV0YWRhdGEvZ2V0LW1ldGFkYXRhLXJvdXRlJ1xuXG4gIGV4cG9ydCBkZWZhdWx0IGFzeW5jIChwcm9wcykgPT4ge1xuICAgIGNvbnN0IGltYWdlRGF0YSA9IHtcInR5cGVcIjpcImltYWdlL3gtaWNvblwiLFwic2l6ZXNcIjpcIjEyOHgxMjhcIn1cbiAgICBjb25zdCBpbWFnZVVybCA9IGZpbGxNZXRhZGF0YVNlZ21lbnQoXCIuXCIsIGF3YWl0IHByb3BzLnBhcmFtcywgXCJmYXZpY29uLmljb1wiKVxuXG4gICAgcmV0dXJuIFt7XG4gICAgICAuLi5pbWFnZURhdGEsXG4gICAgICB1cmw6IGltYWdlVXJsICsgXCJcIixcbiAgICB9XVxuICB9Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-metadata-image-loader.js?type=favicon&segment=&basePath=&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js!./src/app/favicon.ico?__next_metadata__\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/lucide-react","vendor-chunks/next","vendor-chunks/@swc","vendor-chunks/@turf","vendor-chunks/d3-geo","vendor-chunks/d3-array","vendor-chunks/point-in-polygon-hao","vendor-chunks/uuid","vendor-chunks/mapbox-gl"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkieranblair%2Fgit%2Ffa%2Fflight-assurance&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();